{"id":"tilt_ui-0xg","title":"Design and implement BrewSignal Recipe Format v1.0","description":"","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T18:41:26.319589488+11:00","updated_at":"2025-12-09T18:41:26.319589488+11:00"}
{"id":"tilt_ui-1w4","title":"Integrate ML Pipeline with Main Application","description":"The ML pipeline is complete and tested (PR #61) but not yet integrated with the main application. This issue tracks connecting the ML components to the live reading pipeline.\n\n**Current State:**\n✅ Complete:\n- ML pipeline implementation in backend/ml/\n- 48/48 tests passing\n- Per-device state isolation\n- Kalman filtering, anomaly detection, curve fitting, MPC\n\n❌ Not Connected:\n- Not called from backend/main.py reading handler\n- Not exposed via API endpoints\n- Not displayed in frontend UI\n- State lost on service restart\n\n**Proposed Integration:**\n\nPhase 1: Basic Integration\n1. Add MLPipelineManager to backend/main.py\n2. Process readings through ML pipeline in handle_tilt_reading()\n3. Broadcast ML results via WebSocket\n4. Display filtered values on dashboard\n\nPhase 2: State Persistence\n5. Hydrate ML state from database on startup (last 48 hours)\n6. Ensures predictions work immediately after restart\n7. Option: Store ML results in new ml_results table\n\nPhase 3: UI Integration\n8. Show Kalman-filtered values on dashboard\n9. Display FG predictions and completion estimates\n10. Anomaly alerts (stuck fermentation, temperature spikes)\n11. MPC temperature trajectory visualization\n\n**Acceptance Criteria:**\n- ML pipeline processes all live Tilt readings\n- Filtered values broadcast via WebSocket\n- ML state survives service restarts\n- Dashboard shows filtered SG/temp\n- Predictions visible on batch detail page\n- Anomaly alerts displayed to user\n- No performance degradation (\u003c10ms overhead)\n\n**GitHub Issue:** #62","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T19:54:47.785215585+11:00","updated_at":"2025-12-09T20:21:17.845011679+11:00","closed_at":"2025-12-09T20:21:17.845011679+11:00"}
{"id":"tilt_ui-8xe","title":"Bug: Batch device selection shows unpaired Tilt instead of paired GravityMon","description":"## Description\nWhen creating a new batch, the device dropdown shows a single unpaired Tilt device instead of showing the paired GravityMon device.\n\n## Steps to Reproduce\n1. Pair a GravityMon device (visible in /devices)\n2. Ensure zero Tilt devices are paired\n3. Start to plan a new batch\n4. Check device dropdown\n\n## Expected Behavior\n- Should show paired GravityMon device\n- Should NOT show unpaired Tilt devices\n\n## Actual Behavior\n- Shows single unpaired Tilt device\n- GravityMon not visible in dropdown\n\n## Possible Causes\n- Device filtering logic not checking paired status\n- Query excluding non-Tilt device types\n- Frontend device list not including all device types","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-09T20:53:12.026094986+11:00","updated_at":"2025-12-09T20:55:49.354647889+11:00","closed_at":"2025-12-09T20:55:49.354647889+11:00"}
{"id":"tilt_ui-crx","title":"Enhance recipe CRUD frontend with better UX","description":"Current recipe CRUD frontend is minimal and functional but could be improved with:\n- Better form validation and error messages\n- Ingredient list display and editing (fermentables, hops, yeasts)\n- Richer recipe detail view with all BeerJSON fields\n- Batch size conversion tools (L/gal)\n- Temperature unit conversion display (C/F)\n- Recipe cloning/duplication\n- Recipe search and filtering\n- Style guide integration\n- Print/export functionality\n\nCurrent implementation covers basic recipe metadata (name, author, style, OG, FG, ABV, IBU, color, batch size, notes) but BeerJSON import includes much more detail that isn't exposed in the UI yet.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T19:50:26.932820447+11:00","updated_at":"2025-12-09T19:50:26.932820447+11:00"}
{"id":"tilt_ui-pzu","title":"Build frontend UI for recipe management","description":"Create comprehensive frontend UI for the recipe CRUD system implemented in PR #87 (now merged).\n\n**Backend Capabilities (Already Built):**\n✅ Multi-format recipe import (BeerXML, BeerJSON, Brewfather JSON)\n✅ Full CRUD API endpoints (GET, POST, PUT, DELETE)\n✅ BeerJSON 2.06 schema support\n✅ Recipe serializer for BeerJSON output\n✅ Database migrations complete\n\n**PR Reference:** https://github.com/machug/brewsignal/pull/87\n\n---\n\n## Frontend Work Required\n\n### 1. Recipe List Page (`/recipes`)\n- [ ] Table/card view of all recipes\n- [ ] Filter/search by name, style\n- [ ] Sort by name, date created\n- [ ] Quick actions: View, Edit, Delete\n- [ ] Import button (multi-format)\n\n### 2. Recipe Detail Page (`/recipes/[id]`)\n- [ ] Display all BeerJSON fields:\n  - Name, style, brewer, batch size\n  - OG, FG, ABV, IBU, color (SRM)\n  - Boil time, efficiency\n  - Carbonation volumes\n- [ ] Show ingredients (fermentables, hops, cultures/yeasts, misc)\n- [ ] Display mash/fermentation/packaging steps\n- [ ] Edit/Delete actions\n- [ ] \"Create Batch from Recipe\" button\n\n### 3. Recipe Import UI\n- [ ] Multi-format file picker (.xml for BeerXML, .json for BeerJSON/Brewfather)\n- [ ] Format detection help text\n- [ ] Import progress/error feedback\n- [ ] Handle array error responses from backend\n\n### 4. Recipe Create/Edit Forms\n- [ ] Basic info: name, style, brewer, batch size\n- [ ] Gravity/alcohol: OG, FG, ABV\n- [ ] Color/bitterness: SRM, IBU\n- [ ] Brewing params: boil time, efficiency, carbonation\n- [ ] Ingredients sections (fermentables, hops, cultures, misc)\n- [ ] Mash/fermentation/packaging steps\n- [ ] Format extensions field (JSON)\n- [ ] Field validation (updateRecipe uses whitelist)\n\n### 5. Integration Points\n- [ ] Update batch create flow to select from recipes\n- [ ] Link recipe detail to associated batches\n- [ ] Handle temperature unit conversion (C/F)\n- [ ] Use existing TailwindCSS styling conventions\n\n---\n\n## Technical Notes\n\n**API Endpoints Available:**\n- GET /api/recipes - List all recipes\n- GET /api/recipes/{id} - Get recipe details\n- POST /api/recipes - Create recipe\n- PUT /api/recipes/{id} - Update recipe (uses field whitelist)\n- DELETE /api/recipes/{id} - Delete recipe\n- POST /api/recipes/import - Import from file (BeerXML/BeerJSON/Brewfather)\n- GET /api/recipes/{id}/beerjson - Export as BeerJSON\n\n**Frontend API Functions (Already Created):**\n```typescript\n// From frontend/src/lib/api.ts\ncreateRecipe(data: RecipeCreate): Promise\u003cRecipeResponse\u003e\nupdateRecipe(id: number, data: RecipeUpdate): Promise\u003cRecipeResponse\u003e\nimportRecipe(file: File): Promise\u003cRecipeResponse\u003e\n```\n\n**BeerJSON Field Names:**\n- Use `og`, `fg`, `abv` (NOT og_target, fg_target)\n- Use `color_srm`, `batch_size_liters`\n- Cultures table (was yeasts)\n\n**Security:**\n- updateRecipe uses field whitelist (can't update arbitrary fields)\n- Handle both string and array error formats\n\n---\n\n## Acceptance Criteria\n- [ ] Can view list of all recipes\n- [ ] Can import recipe from BeerXML, BeerJSON, or Brewfather JSON\n- [ ] Can view recipe details with all fields\n- [ ] Can create new recipe manually\n- [ ] Can edit existing recipe (respects backend field whitelist)\n- [ ] Can delete recipe\n- [ ] Can create batch from recipe (integration point)\n- [ ] Temperature units respect user preferences (C/F)\n- [ ] Error handling for import failures\n- [ ] Responsive design (mobile-friendly)\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T10:52:36.617912412+11:00","updated_at":"2025-12-09T11:35:47.274967461+11:00","closed_at":"2025-12-09T11:35:47.274970341+11:00"}
{"id":"tilt_ui-xlz","title":"AI Brewing Assistant with Recipe Generation","description":"## Overview\nAdd an AI-powered brewing assistant to help users create recipes, troubleshoot fermentation issues, and get brewing advice.\n\n## Features\n\n### 1. LLM Backend Options\n- **Local SLM**: Support for local small language models (Ollama, llama.cpp)\n  - Privacy-first option (no data leaves user's network)\n  - Works offline\n  - Models: Llama 3, Mistral, Phi-3, etc.\n  \n- **Cloud LLM APIs**: Optional integration with commercial APIs\n  - OpenAI (GPT-4, GPT-3.5)\n  - Anthropic (Claude)\n  - DeepSeek\n  - User provides their own API key\n  - Stored securely in app config\n\n### 2. Recipe Generation from Prompts\n- Natural language recipe creation\n- Examples:\n  - \"Create a Pliny the Elder clone for my 5-gallon system\"\n  - \"Design a hazy IPA with Citra and Mosaic hops\"\n  - \"Make a Belgian Tripel targeting 9% ABV\"\n  \n- **Context-Aware**:\n  - Uses user's equipment profile (batch size, efficiency)\n  - Considers available inventory (if implemented)\n  - Respects system constraints (mash tun capacity, etc.)\n  \n- **Output**: BrewSignal recipe schema (BeerJSON compatible)\n  - Can be imported directly into recipe library\n  - Includes all standard fields (grains, hops, yeast, mash schedule)\n\n### 3. Fermentation Assistant\n- Answer brewing questions\n- Troubleshoot fermentation issues\n  - \"My gravity is stuck at 1.020, what should I do?\"\n  - \"Is this fermentation curve normal?\"\n- Provide style-specific advice\n- Suggest recipe modifications based on historical batch data\n\n### 4. Context Integration\n- Access to user's batch history\n- Current fermentation data (gravity curves, temperature profiles)\n- Recipe library for learning user preferences\n- Equipment profile for accurate calculations\n\n## Technical Considerations\n\n### Backend Architecture\n- New router: \n- Service layer: \n  -  - Abstract LLM interface\n  -  - Ollama/llama.cpp integration\n  -  - API client for OpenAI/Anthropic/DeepSeek\n  -  - Recipe generation logic\n  -  - Structured prompts for recipe generation\n  \n### Configuration\n- Settings page for LLM configuration\n  - Choose backend (local vs cloud)\n  - API key management (encrypted storage)\n  - Model selection\n  - Temperature/creativity controls\n\n### Recipe Schema Output\n- Generate valid BeerJSON 2.0 format\n- Include calculated values (OG, FG, IBU, SRM, ABV)\n- Validate against schema before presenting to user\n- Allow user to review/modify before saving\n\n### UI Components\n- Chat interface for assistant\n- Recipe generation form with prompt input\n- Preview pane for generated recipes\n- One-click import to recipe library\n\n## Dependencies\n- LLM integration library (e.g., LangChain, LiteLLM for unified API)\n- Ollama server (optional, for local LLM)\n- Recipe calculation engine (reuse existing BrewSignal logic)\n\n## Future Enhancements\n- Multi-turn conversation for recipe refinement\n- Learn from user's successful batches\n- Suggest recipe adjustments based on fermentation telemetry\n- Batch prediction (\"How will this recipe turn out based on my history?\")\n- Integration with ingredients database (when available)\n\n## Security \u0026 Privacy\n- API keys encrypted at rest\n- Local LLM option for privacy-conscious users\n- User data never sent to cloud without explicit consent\n- Rate limiting for API calls to prevent cost overruns","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T20:49:49.775721886+11:00","updated_at":"2025-12-09T20:49:49.775721886+11:00"}
