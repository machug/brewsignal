# BrewSignal Configuration
# Copy this to .env and adjust values for your deployment

# =============================================================================
# DEPLOYMENT MODE
# =============================================================================
# local  = Single-user RPi deployment (SQLite, optional auth)
# cloud  = Multi-tenant SaaS (PostgreSQL, required auth)
DEPLOYMENT_MODE=local

# =============================================================================
# DATABASE
# =============================================================================
# For local mode: leave empty to use default SQLite (data/fermentation.db)
# For cloud mode: Use Supabase connection string (required)
# Get from: Supabase Dashboard > Project Settings > Database > Connection string (URI)
# Use the "Session" pooler mode with port 5432 for best compatibility
# DATABASE_URL=postgresql+asyncpg://postgres.xxxxx:password@aws-0-region.pooler.supabase.com:5432/postgres

# =============================================================================
# AUTHENTICATION
# =============================================================================
# Get these from: Supabase Dashboard > Project Settings > API
# In local mode: optional but recommended for data claiming and multi-tenant features
# In cloud mode: required
#
# When configured, users can login with their BrewSignal account to:
# - Claim existing data as their own
# - Access data across devices logged into the same account
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
# SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# =============================================================================
# MULTI-TENANCY
# =============================================================================
# Automatically enabled in cloud mode
# MULTI_TENANT=false

# =============================================================================
# EXTERNAL APIS
# =============================================================================
# Brewfather integration (optional)
# BREWFATHER_USER_ID=
# BREWFATHER_API_KEY=
BREWFATHER_API_ENDPOINT=https://api.brewfather.app/v2/

# Anthropic API for AI features (optional)
# ANTHROPIC_API_KEY=

# =============================================================================
# SCANNER SETTINGS
# =============================================================================
# Set to true for development without BLE hardware
SCANNER_MOCK=false

# Relay mode: receive readings from remote TiltPi instead of local BLE
# SCANNER_RELAY_HOST=192.168.1.100

# =============================================================================
# SERVER SETTINGS
# =============================================================================
HOST=0.0.0.0
PORT=8080

# =============================================================================
# FEATURE FLAG OVERRIDES
# =============================================================================
# Each deployment mode has sensible defaults. Use these to override individual
# features. Leave unset (or remove) to use the default for your deployment mode.
#
# Feature          | Local Default | Cloud Default | Description
# -----------------|---------------|---------------|----------------------------------
# SCANNER_ENABLED  | true          | false         | BLE Tilt scanning
# HA_ENABLED       | true          | false         | Home Assistant integration
# MQTT_ENABLED     | true          | false         | MQTT publishing
# CONTROL_ENABLED  | true          | false         | Temperature controller
# POLLERS_ENABLED  | true          | false         | Ambient/chamber polling
# CLEANUP_ENABLED  | true          | false         | Reading cleanup service
# GATEWAY_ENABLED  | false         | true          | Gateway WebSocket (ESP32)
# CLOUD_SYNC_ENABLED| false        | true          | Premium cloud sync
# REQUIRE_AUTH_ENABLED| false      | true          | Require JWT authentication
# SERVE_FRONTEND_ENABLED| true     | false         | Serve static SvelteKit build
#
# Example: Local Pi that also accepts gateway connections
# GATEWAY_ENABLED=true
#
# Example: Local dev without BLE hardware
# SCANNER_ENABLED=false
