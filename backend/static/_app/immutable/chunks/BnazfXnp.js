import{d as Ve,f as n,a as o,s as p,c as pe}from"./CCsyRfs1.js";import{a as Xe,s as b,p as we,o as Ze,t as u,g as $e,e as i,d as r,c as g,r as s,h as e,u as Z,f as $,ax as et}from"./DyQh1CUw.js";import{e as ue,i as tt}from"./DndLTv14.js";import{i as f}from"./HQeVE6fZ.js";import{r as at}from"./DPJa9AuX.js";import{s as Ce}from"./COCsBJqH.js";import{b as rt}from"./B_acRpXz.js";import{b as Fe}from"./U9y4h8n3.js";import{p as st}from"./B-ZSmncO.js";import{g as vt,x as ot}from"./BRyx_Jik.js";var lt=n('<button type="button" class="clear-btn svelte-1qv5788">Clear Selection</button>'),it=n('<div class="loading svelte-1qv5788"><div class="spinner svelte-1qv5788"></div> <p>Loading yeast strains...</p></div>'),nt=n('<div class="error-box svelte-1qv5788"><p class="error-text svelte-1qv5788"> </p></div>'),ct=n('<div class="empty svelte-1qv5788"><p class="empty-text svelte-1qv5788">No yeast strains available.</p></div>'),dt=n('<span class="yeast-type svelte-1qv5788"> </span>'),_t=n('<p class="yeast-producer svelte-1qv5788"> </p>'),pt=n('<span class="spec svelte-1qv5788"> </span>'),ut=n('<span class="spec svelte-1qv5788"> </span>'),ft=n('<span class="spec svelte-1qv5788"> </span>'),mt=n('<div class="selected-yeast svelte-1qv5788"><div class="yeast-info svelte-1qv5788"><div class="yeast-header svelte-1qv5788"><p class="yeast-name svelte-1qv5788"> </p> <!></div> <!> <div class="yeast-specs svelte-1qv5788"><!> <!> <!></div></div></div>'),yt=n("<option> </option>"),qt=n('<span class="strain-type svelte-1qv5788"> </span>'),ht=n('<span class="detail svelte-1qv5788"> </span>'),xt=n('<span class="detail svelte-1qv5788"> </span>'),bt=n('<button type="button" class="strain-item svelte-1qv5788"><div class="strain-main svelte-1qv5788"><span class="strain-name svelte-1qv5788"> </span> <!></div> <div class="strain-details svelte-1qv5788"><!> <!></div></button>'),gt=n('<div class="producer-group svelte-1qv5788"><h4 class="producer-name svelte-1qv5788"> </h4> <!></div>'),wt=n('<div class="no-results svelte-1qv5788"><p class="svelte-1qv5788">No strains match your filters</p></div>'),Ct=n('<div class="filters svelte-1qv5788"><input id="yeast-search" type="text" placeholder="Search yeast strains..." class="search-input svelte-1qv5788"/> <div class="filter-row svelte-1qv5788"><select class="filter-select svelte-1qv5788"><option>All Types</option><option>Ale</option><option>Lager</option><option>Wine</option><option>Wild</option></select> <select class="filter-select svelte-1qv5788"><option>All Producers</option><!></select></div></div> <div class="strain-list svelte-1qv5788"><!> <!></div>',1),Ft=n('<div class="yeast-selector svelte-1qv5788"><div class="selector-header svelte-1qv5788"><label for="yeast-search" class="selector-label svelte-1qv5788"> </label> <!></div> <!></div>');function Et(Se,w){Xe(w,!0);let Le=st(w,"label",3,"Select Yeast Strain (Optional)"),Q=b(we([])),fe=b(we([])),me=b(!0),ee=b(null),C=b(""),R=b(""),z=b(""),Ye=Z(()=>()=>e(Q).filter(t=>{const v=!e(C)||t.name.toLowerCase().includes(e(C).toLowerCase())||t.producer?.toLowerCase().includes(e(C).toLowerCase())||t.product_id?.toLowerCase().includes(e(C).toLowerCase()),h=!e(R)||t.type===e(R),se=!e(z)||t.producer===e(z);return v&&h&&se})),ye=Z(()=>()=>{const t={};for(const v of e(Ye)()){const h=v.producer||"Other";t[h]||(t[h]=[]),t[h].push(v)}return Object.fromEntries(Object.entries(t).sort(([v],[h])=>v.localeCompare(h)))}),c=Z(()=>w.selectedYeastId?e(Q).find(t=>t.id===w.selectedYeastId):null);Ze(async()=>{try{const[t,v]=await Promise.all([vt(),ot()]);g(Q,t,!0),g(fe,v,!0)}catch(t){g(ee,t instanceof Error?t.message:"Failed to load yeast strains",!0),console.error("Failed to load yeast strains:",t)}finally{g(me,!1)}});function Oe(t){w.onSelect(t)}function ke(){w.onSelect(null)}function qe(t,v){return t==null&&v==null?"":t!=null&&v!=null?`${t.toFixed(0)}-${v.toFixed(0)}°C`:t!=null?`>${t.toFixed(0)}°C`:`<${v.toFixed(0)}°C`}function he(t,v){return t==null&&v==null?"":t!=null&&v!=null?`${t.toFixed(0)}-${v.toFixed(0)}%`:t!=null?`>${t.toFixed(0)}%`:`<${v.toFixed(0)}%`}function xe(t){switch(t){case"ale":return"var(--positive)";case"lager":return"var(--info)";case"wine":return"var(--warning)";case"wild":return"var(--negative)";default:return"var(--text-secondary)"}}var te=Ft(),ae=r(te),re=r(ae),Ae=r(re,!0);s(re);var Te=i(re,2);{var je=t=>{var v=lt();v.__click=ke,o(t,v)};f(Te,t=>{e(c)&&t(je)})}s(ae);var Pe=i(ae,2);{var De=t=>{var v=it();o(t,v)},Ee=t=>{var v=pe(),h=$(v);{var se=F=>{var S=nt(),B=r(S),ve=r(B,!0);s(B),s(S),u(()=>p(ve,e(ee))),o(F,S)},Ge=F=>{var S=pe(),B=$(S);{var ve=L=>{var H=ct();o(L,H)},Ie=L=>{var H=pe(),Ne=$(H);{var We=Y=>{var O=mt(),k=r(O),x=r(k),A=r(x),T=r(A,!0);s(A);var D=i(A,2);{var E=l=>{var a=dt(),d=r(a,!0);s(a),u(_=>{Ce(a,`color: ${_??""}`),p(d,e(c).type)},[()=>xe(e(c).type)]),o(l,a)};f(D,l=>{e(c).type&&l(E)})}s(x);var j=i(x,2);{var G=l=>{var a=_t(),d=r(a,!0);s(a),u(()=>p(d,e(c).producer)),o(l,a)};f(j,l=>{e(c).producer&&l(G)})}var I=i(j,2),P=r(I);{var N=l=>{var a=pt(),d=r(a);s(a),u(_=>p(d,`Attn: ${_??""}`),[()=>he(e(c).attenuation_low,e(c).attenuation_high)]),o(l,a)};f(P,l=>{(e(c).attenuation_low||e(c).attenuation_high)&&l(N)})}var J=i(P,2);{var K=l=>{var a=ut(),d=r(a);s(a),u(_=>p(d,`Temp: ${_??""}`),[()=>qe(e(c).temp_low,e(c).temp_high)]),o(l,a)};f(J,l=>{(e(c).temp_low||e(c).temp_high)&&l(K)})}var U=i(J,2);{var oe=l=>{var a=ft(),d=r(a);s(a),u(()=>p(d,`Floc: ${e(c).flocculation??""}`)),o(l,a)};f(U,l=>{e(c).flocculation&&l(oe)})}s(I),s(k),s(O),u(()=>p(T,e(c).name)),o(Y,O)},Me=Y=>{var O=Ct(),k=$(O),x=r(k);at(x);var A=i(x,2),T=r(A),D=r(T);D.value=D.__value="";var E=i(D);E.value=E.__value="ale";var j=i(E);j.value=j.__value="lager";var G=i(j);G.value=G.__value="wine";var I=i(G);I.value=I.__value="wild",s(T);var P=i(T,2),N=r(P);N.value=N.__value="";var J=i(N);ue(J,17,()=>e(fe),tt,(a,d)=>{var _=yt(),le=r(_,!0);s(_);var V={};u(()=>{p(le,e(d)),V!==(V=e(d))&&(_.value=(_.__value=e(d))??"")}),o(a,_)}),s(P),s(A),s(k);var K=i(k,2),U=r(K);ue(U,17,()=>Object.entries(e(ye)()),([a,d])=>a,(a,d)=>{var _=Z(()=>et(e(d),2));let le=()=>e(_)[0],V=()=>e(_)[1];var ie=gt(),ne=r(ie),Qe=r(ne,!0);s(ne);var Re=i(ne,2);ue(Re,17,V,ce=>ce.id,(ce,m)=>{var X=bt();X.__click=()=>Oe(e(m));var de=r(X),_e=r(de),ze=r(_e,!0);s(_e);var Be=i(_e,2);{var He=q=>{var y=qt(),W=r(y,!0);s(y),u(M=>{Ce(y,`color: ${M??""}`),p(W,e(m).type)},[()=>xe(e(m).type)]),o(q,y)};f(Be,q=>{e(m).type&&q(He)})}s(de);var be=i(de,2),ge=r(be);{var Je=q=>{var y=ht(),W=r(y,!0);s(y),u(M=>p(W,M),[()=>he(e(m).attenuation_low,e(m).attenuation_high)]),o(q,y)};f(ge,q=>{(e(m).attenuation_low||e(m).attenuation_high)&&q(Je)})}var Ke=i(ge,2);{var Ue=q=>{var y=xt(),W=r(y,!0);s(y),u(M=>p(W,M),[()=>qe(e(m).temp_low,e(m).temp_high)]),o(q,y)};f(Ke,q=>{(e(m).temp_low||e(m).temp_high)&&q(Ue)})}s(be),s(X),u(()=>p(ze,e(m).name)),o(ce,X)}),s(ie),u(()=>p(Qe,le())),o(a,ie)});var oe=i(U,2);{var l=a=>{var d=wt();o(a,d)};f(oe,a=>{Object.keys(e(ye)()).length===0&&a(l)})}s(K),rt(x,()=>e(C),a=>g(C,a)),Fe(T,()=>e(R),a=>g(R,a)),Fe(P,()=>e(z),a=>g(z,a)),o(Y,O)};f(Ne,Y=>{e(c)?Y(We):Y(Me,!1)})}o(L,H)};f(B,L=>{e(Q).length===0?L(ve):L(Ie,!1)},!0)}o(F,S)};f(h,F=>{e(ee)?F(se):F(Ge,!1)},!0)}o(t,v)};f(Pe,t=>{e(me)?t(De):t(Ee,!1)})}s(te),u(()=>p(Ae,Le())),o(Se,te),$e()}Ve(["click"]);export{Et as Y};
