import{p as c}from"./pAodAtlG.js";const n={temp_units:"C",sg_units:"sg",local_logging_enabled:!0,local_interval_minutes:15,min_rssi:-100,smoothing_enabled:!1,smoothing_samples:5,id_by_mac:!1,ha_enabled:!1,ha_url:"",ha_token:"",ha_ambient_temp_entity_id:"",ha_ambient_humidity_entity_id:"",ha_chamber_temp_entity_id:"",ha_chamber_humidity_entity_id:"",temp_control_enabled:!1,temp_target:68,temp_hysteresis:1,ha_heater_entity_id:"",ha_weather_entity_id:"",weather_alerts_enabled:!1,alert_temp_threshold:3,ai_enabled:!1,ai_provider:"local",ai_model:"",ai_api_key:"",ai_base_url:"",ai_temperature:.7,ai_max_tokens:2e3,mqtt_enabled:!1,mqtt_host:"",mqtt_port:1883,mqtt_username:"",mqtt_password:"",mqtt_topic_prefix:"brewsignal"},a=c({config:n,loaded:!1});async function f(){try{const t=await fetch("/api/config");if(t.ok){const e=await t.json();a.config={...n,...e}}}catch(t){console.error("Failed to load config:",t)}finally{a.loaded=!0}}async function d(t){try{const e=await fetch("/api/config",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok){const s=await e.json();return a.config={...n,...s},{success:!0}}const i=await e.json();return i.detail&&Array.isArray(i.detail)?{success:!1,error:i.detail.map(o=>o.msg).join(", ")}:{success:!1,error:"Failed to save settings"}}catch(e){return console.error("Failed to update config:",e),{success:!1,error:"Network error saving settings"}}}function m(t){return(t-32)*(5/9)}function _(t){return t*(9/5)+32}function p(t,e){return(a.config.temp_units??"C")==="F"?_(t).toFixed(1):t.toFixed(1)}function h(){return(a.config.temp_units??"C")==="C"?"째C":"째F"}function r(t){return-616.868+1111.14*t-630.272*t**2+135.997*t**3}function l(t){return r(t)}function g(t,e=a.config.sg_units){switch(e){case"plato":return r(t).toFixed(1);case"brix":return l(t).toFixed(1);default:return t.toFixed(3)}}function y(){switch(a.config.sg_units){case"plato":return"째P";case"brix":return"째Bx";default:return"SG"}}export{y as a,g as b,a as c,p as d,_ as e,m as f,h as g,f as l,d as u};
