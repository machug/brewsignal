import{e as p,f as y,aq as v,h as o,j as w,C,N as _,w as u,i as d,x as T,ar as A,as as b,at as N,au as E,T as S,av as F,p as M}from"./BeYMcFNd.js";function D(e,t){let a=null,s=o;var r;if(o){a=T;for(var i=w(document.head);i!==null&&(i.nodeType!==C||i.data!==e);)i=_(i);if(i===null)u(!1);else{var n=_(i);i.remove(),d(n)}}o||(r=document.head.appendChild(p()));try{y(()=>t(r),v)}finally{s&&(u(!0),d(a))}}const g=[...` 	
\r\f \v\uFEFF`];function H(e,t,a){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),a){for(var r in a)if(a[r])s=s?s+" "+r:r;else if(s.length)for(var i=r.length,n=0;(n=s.indexOf(r,n))>=0;){var f=n+i;(n===0||g.includes(s[n-1]))&&(f===s.length||g.includes(s[f]))?s=(n===0?"":s.substring(0,n))+s.substring(f+1):n=f}}return s===""?null:s}function U(e,t){return e==null?null:String(e)}const x=Symbol("is custom element"),O=Symbol("is html");function q(e){if(o){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var s=e.value;h(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var r=e.checked;h(e,"checked",null),e.checked=r}}};e.__on_r=a,S(a),F()}}function h(e,t,a,s){var r=k(e);o&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=a)&&(t==="loading"&&(e[N]=a),a==null?e.removeAttribute(t):typeof a!="string"&&L(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function k(e){return e.__attributes??={[x]:e.nodeName.includes("-"),[O]:e.namespaceURI===A}}var m=new Map;function L(e){var t=e.getAttribute("is")||e.nodeName,a=m.get(t);if(a)return a;m.set(t,a=[]);for(var s,r=e,i=Element.prototype;i!==r;){s=E(r);for(var n in s)s[n].set&&a.push(n);r=b(r)}return a}const c={temp_units:"C",sg_units:"sg",local_logging_enabled:!0,local_interval_minutes:15,min_rssi:-100,smoothing_enabled:!1,smoothing_samples:5,id_by_mac:!1,ha_enabled:!1,ha_url:"",ha_token:"",ha_ambient_temp_entity_id:"",ha_ambient_humidity_entity_id:"",temp_control_enabled:!1,temp_target:68,temp_hysteresis:1,ha_heater_entity_id:"",ha_weather_entity_id:"",weather_alerts_enabled:!1,alert_temp_threshold:5},l=M({config:c,loaded:!1});async function G(){try{const e=await fetch("/api/config");if(e.ok){const t=await e.json();l.config={...c,...t}}}catch(e){console.error("Failed to load config:",e)}finally{l.loaded=!0}}async function P(e){try{const t=await fetch("/api/config",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const s=await t.json();return l.config={...c,...s},{success:!0}}const a=await t.json();return a.detail&&Array.isArray(a.detail)?{success:!1,error:a.detail.map(r=>r.msg).join(", ")}:{success:!1,error:"Failed to save settings"}}catch(t){return console.error("Failed to update config:",t),{success:!1,error:"Network error saving settings"}}}function j(e){return(e-32)*(5/9)}function R(e,t=l.config.temp_units){return t==="C"?j(e).toFixed(1):e.toFixed(1)}function B(){return l.config.temp_units==="C"?"°C":"°F"}export{H as a,R as b,l as c,j as f,B as g,D as h,G as l,q as r,h as s,U as t,P as u};
