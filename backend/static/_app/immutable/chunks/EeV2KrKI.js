import{d as mo,c as Ds,a as nt,f as Pt,s as He,e as Ar,t as Ti}from"./orbuQWWI.js";import{a as go,f as Jn,h as v,u as Rl,g as vo,d as ee,r as X,e as le,s as Ke,t as Dl,c as we,n as Ls,p as mn,o as Cr,aJ as Dr,az as ys}from"./pAodAtlG.js";import{e as Ei,i as Mi}from"./0whDC7Rl.js";import{i as sl}from"./ucc1DXe2.js";import{r as Lr,s as Ql}from"./CYuZshLQ.js";import{s as Pl}from"./Cpbxxhlc.js";import{s as Pr}from"./C-5oeV0L.js";import{i as Rr,s as Fr}from"./RboyDiSx.js";import{b as wo}from"./B4Wl1ZzR.js";import{p as Zn}from"./C44MPb_E.js";import{W as Or,X as zr,Y as Gr,Z as Ir,_ as Nr}from"./D-LVxhuj.js";import{c as Qn,d as Fn,b as _o,g as Vr}from"./D9t2HWx4.js";import{b as Hr}from"./Dh5hCwq1.js";const Br=!0,mt="u-",Wr="uplot",Yr=mt+"hz",Ur=mt+"vt",qr=mt+"title",Kr=mt+"wrap",jr=mt+"under",Jr=mt+"over",Zr=mt+"axis",$l=mt+"off",Qr=mt+"select",$r=mt+"cursor-x",Xr=mt+"cursor-y",ea=mt+"cursor-pt",ta=mt+"legend",la=mt+"live",na=mt+"inline",sa=mt+"series",ia=mt+"marker",Ai=mt+"label",oa=mt+"value",On="width",zn="height",Pn="top",Ci="bottom",gn="left",xs="right",Bs="#000",Di=Bs+"0",ks="mousemove",Li="mousedown",Ts="mouseup",Pi="mouseenter",Ri="mouseleave",Fi="dblclick",ra="resize",aa="scroll",Oi="change",Xn="dppxchange",Ws="--",xn=typeof window<"u",Ps=xn?document:null,wn=xn?window:null,ua=xn?navigator:null;let Ce,qn;function Rs(){let e=devicePixelRatio;Ce!=e&&(Ce=e,qn&&Os(Oi,qn,Rs),qn=matchMedia(`(min-resolution: ${Ce-.001}dppx) and (max-resolution: ${Ce+.001}dppx)`),Xl(Oi,qn,Rs),wn.dispatchEvent(new CustomEvent(Xn)))}function nl(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Fs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Be(e,l,i){e.style[l]=i+"px"}function vl(e,l,i,n){let o=Ps.createElement(e);return l!=null&&nl(o,l),i?.insertBefore(o,n),o}function pl(e,l){return vl("div",e,l)}const zi=new WeakMap;function Cl(e,l,i,n,o){let c="translate("+l+"px,"+i+"px)",u=zi.get(e);c!=u&&(e.style.transform=c,zi.set(e,c),l<0||i<0||l>n||i>o?nl(e,$l):Fs(e,$l))}const Gi=new WeakMap;function Ii(e,l,i){let n=l+i,o=Gi.get(e);n!=o&&(Gi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Ni=new WeakMap;function Vi(e,l,i,n){let o=l+""+i,c=Ni.get(e);o!=c&&(Ni.set(e,o),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Ys={passive:!0},ca={...Ys,capture:!0};function Xl(e,l,i,n){l.addEventListener(e,i,n?ca:Ys)}function Os(e,l,i,n){l.removeEventListener(e,i,Ys)}xn&&Rs();function wl(e,l,i,n){let o;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)o=c?i+n>>1:il((i+n)/2),l[o]<e?i=o:n=o;return e-l[i]<=l[n]-e?i:n}function bo(e){return(i,n,o)=>{let c=-1,u=-1;for(let p=n;p<=o;p++)if(e(i[p])){c=p;break}for(let p=o;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const So=e=>e!=null,yo=e=>e!=null&&e>0,ls=bo(So),fa=bo(yo);function pa(e,l,i,n=0,o=!1){let c=o?fa:ls,u=o?yo:So;[l,i]=c(e,l,i);let p=e[l],d=e[l];if(l>-1)if(n==1)p=e[l],d=e[i];else if(n==-1)p=e[i],d=e[l];else for(let m=l;m<=i;m++){let k=e[m];u(k)&&(k<p?p=k:k>d&&(d=k))}return[p??Oe,d??-Oe]}function ns(e,l,i,n){let o=Wi(e),c=Wi(l);e==l&&(o==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?Fl:xo,p=o==1?il:dl,d=c==1?dl:il,m=p(u(ht(e))),k=d(u(ht(l))),g=_n(i,m),w=_n(i,k);return i==10&&(m<0&&(g=ze(g,-m)),k<0&&(w=ze(w,-k))),n||i==2?(e=g*o,l=w*c):(e=Mo(e,g),l=ss(l,w)),[e,l]}function Us(e,l,i,n){let o=ns(e,l,i,n);return e==0&&(o[0]=0),l==0&&(o[1]=0),o}const qs=.1,Hi={mode:3,pad:qs},In={pad:0,soft:null,mode:0},da={min:In,max:In};function es(e,l,i,n){return is(i)?Bi(e,l,i):(In.pad=i,In.soft=n?0:null,In.mode=n?3:0,Bi(e,l,da))}function ke(e,l){return e??l}function ha(e,l,i){for(l=ke(l,0),i=ke(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Bi(e,l,i){let n=i.min,o=i.max,c=ke(n.pad,0),u=ke(o.pad,0),p=ke(n.hard,-Oe),d=ke(o.hard,Oe),m=ke(n.soft,Oe),k=ke(o.soft,-Oe),g=ke(n.mode,0),w=ke(o.mode,0),N=l-e,E=Fl(N),F=Vt(ht(e),ht(l)),Z=Fl(F),ne=ht(Z-E);(N<1e-24||ne>10)&&(N=0,(e==0||l==0)&&(N=1e-24,g==2&&m!=Oe&&(c=0),w==2&&k!=-Oe&&(u=0)));let y=N||F||1e3,H=Fl(y),D=_n(10,il(H)),re=y*(N==0?e==0?.1:1:c),P=ze(Mo(e-re,D/10),24),pe=e>=m&&(g==1||g==3&&P<=m||g==2&&P>=m)?m:Oe,ae=Vt(p,P<pe&&e>=pe?pe:_l(pe,P)),Q=y*(N==0?l==0?.1:1:u),q=ze(ss(l+Q,D/10),24),b=l<=k&&(w==1||w==3&&q>=k||w==2&&q<=k)?k:-Oe,K=_l(d,q>b&&l<=b?b:Vt(b,q));return ae==K&&ae==0&&(K=100),[ae,K]}const ma=new Intl.NumberFormat(xn?ua.language:"en-US"),Ks=e=>ma.format(e),ol=Math,$n=ol.PI,ht=ol.abs,il=ol.floor,dt=ol.round,dl=ol.ceil,_l=ol.min,Vt=ol.max,_n=ol.pow,Wi=ol.sign,Fl=ol.log10,xo=ol.log2,ga=(e,l=1)=>ol.sinh(e)*l,Es=(e,l=1)=>ol.asinh(e/l),Oe=1/0;function Yi(e){return(Fl((e^e>>31)-(e>>31))|0)+1}function zs(e,l,i){return _l(Vt(e,l),i)}function ko(e){return typeof e=="function"}function _e(e){return ko(e)?e:()=>e}const va=()=>{},To=e=>e,Eo=(e,l)=>l,wa=e=>null,Ui=e=>!0,qi=(e,l)=>e==l,_a=/\.\d*?(?=9{6,}|0{6,})/gm,en=e=>{if(Co(e)||Bl.has(e))return e;const l=`${e}`,i=l.match(_a);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[o,c]=l.split("e");return+`${en(o)}e${c}`}return ze(e,n)};function Jl(e,l){return en(ze(en(e/l))*l)}function ss(e,l){return en(dl(en(e/l))*l)}function Mo(e,l){return en(il(en(e/l))*l)}function ze(e,l=0){if(Co(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return dt(n)/i}const Bl=new Map;function Ao(e){return((""+e).split(".")[1]||"").length}function Vn(e,l,i,n){let o=[],c=n.map(Ao);for(let u=l;u<i;u++){let p=ht(u),d=ze(_n(e,u),p);for(let m=0;m<n.length;m++){let k=e==10?+`${n[m]}e${u}`:n[m]*d,g=(u>=0?0:p)+(u>=c[m]?0:c[m]),w=e==10?k:ze(k,g);o.push(w),Bl.set(w,g)}}return o}const Nn={},js=[],bn=[null,null],Hl=Array.isArray,Co=Number.isInteger,ba=e=>e===void 0;function Ki(e){return typeof e=="string"}function is(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Sa(e){return e!=null&&typeof e=="object"}const ya=Object.getPrototypeOf(Uint8Array),Do="__proto__";function Sn(e,l=is){let i;if(Hl(e)){let n=e.find(o=>o!=null);if(Hl(n)||l(n)){i=Array(e.length);for(let o=0;o<e.length;o++)i[o]=Sn(e[o],l)}else i=e.slice()}else if(e instanceof ya)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Do&&(i[n]=Sn(e[n],l))}else i=e;return i}function ut(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let o in n)o!=Do&&(is(e[o])?ut(e[o],Sn(n[o])):e[o]=Sn(n[o]))}return e}const xa=0,ka=1,Ta=2;function Ea(e,l,i){for(let n=0,o,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(o=u-1;o>=0&&e[o]==null;)e[o--]=null;for(o=u+1;o<i&&e[o]==null;)e[c=o++]=null}}}function Ma(e,l){if(Da(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return La(u[0])||(u=Ca(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let d=e[u][0],m=d.length;for(let k=0;k<m;k++)i.add(d[k])}let n=[Array.from(i).sort((u,p)=>u-p)],o=n[0].length,c=new Map;for(let u=0;u<o;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],d=p[0];for(let m=1;m<p.length;m++){let k=p[m],g=Array(o).fill(void 0),w=l?l[u][m]:ka,N=[];for(let E=0;E<k.length;E++){let F=k[E],Z=c.get(d[E]);F===null?w!=xa&&(g[Z]=F,w==Ta&&N.push(Z)):g[Z]=F}Ea(g,N,o),n.push(g)}}return n}const Aa=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ca(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let o=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let d=0;d<i;d++)p[d]=u[n[d]];o.push(p)}return o}function Da(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let o=e[n][0];if(o.length!=i)return!1;if(o!=l){for(let c=0;c<i;c++)if(o[c]!=l[c])return!1}}return!0}function La(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,o=i-1;for(;n<=o&&e[n]==null;)n++;for(;o>=n&&e[o]==null;)o--;if(o<=n)return!0;const c=Vt(1,il((o-n+1)/l));for(let u=e[n],p=n+c;p<=o;p+=c){const d=e[p];if(d!=null){if(d<=u)return!1;u=d}}return!0}const Lo=["January","February","March","April","May","June","July","August","September","October","November","December"],Po=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ro(e){return e.slice(0,3)}const Pa=Po.map(Ro),Ra=Lo.map(Ro),Fa={MMMM:Lo,MMM:Ra,WWWW:Po,WWW:Pa};function Rn(e){return(e<10?"0":"")+e}function Oa(e){return(e<10?"00":e<100?"0":"")+e}const za={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>Rn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>Rn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>Rn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>Rn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>Rn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Oa(e.getMilliseconds())};function Js(e,l){l=l||Fa;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,o;for(;o=n.exec(e);)i.push(o[0][0]=="{"?za[o[1]]:o[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Ga=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Ia(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ga?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Fo=e=>e%1==0,ts=[1,2,2.5,5],Na=Vn(10,-32,0,ts),Oo=Vn(10,0,32,ts),Va=Oo.filter(Fo),Zl=Na.concat(Oo),Zs=`
`,zo="{YYYY}",ji=Zs+zo,Go="{M}/{D}",Gn=Zs+Go,Kn=Gn+"/{YY}",Io="{aa}",Ha="{h}:{mm}",vn=Ha+Io,Ji=Zs+vn,Zi=":{ss}",Le=null;function No(e){let l=e*1e3,i=l*60,n=i*60,o=n*24,c=o*30,u=o*365,d=(e==1?Vn(10,0,3,ts).filter(Fo):Vn(10,-3,0,ts)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,o,o*2,o*3,o*4,o*5,o*6,o*7,o*8,o*9,o*10,o*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const m=[[u,zo,Le,Le,Le,Le,Le,Le,1],[o*28,"{MMM}",ji,Le,Le,Le,Le,Le,1],[o,Go,ji,Le,Le,Le,Le,Le,1],[n,"{h}"+Io,Kn,Le,Gn,Le,Le,Le,1],[i,vn,Kn,Le,Gn,Le,Le,Le,1],[l,Zi,Kn+" "+vn,Le,Gn+" "+vn,Le,Ji,Le,1],[e,Zi+".{fff}",Kn+" "+vn,Le,Gn+" "+vn,Le,Ji,Le,1]];function k(g){return(w,N,E,F,Z,ne)=>{let y=[],H=Z>=u,D=Z>=c&&Z<u,re=g(E),P=ze(re*e,3),pe=Ms(re.getFullYear(),H?0:re.getMonth(),D||H?1:re.getDate()),ae=ze(pe*e,3);if(D||H){let Q=D?Z/c:0,q=H?Z/u:0,b=P==ae?P:ze(Ms(pe.getFullYear()+q,pe.getMonth()+Q,1)*e,3),K=new Date(dt(b/e)),O=K.getFullYear(),j=K.getMonth();for(let L=0;b<=F;L++){let ie=Ms(O+q*L,j+Q*L,1),G=ie-g(ze(ie*e,3));b=ze((+ie+G)*e,3),b<=F&&y.push(b)}}else{let Q=Z>=o?o:Z,q=il(E)-il(P),b=ae+q+ss(P-ae,Q);y.push(b);let K=g(b),O=K.getHours()+K.getMinutes()/i+K.getSeconds()/n,j=Z/n,L=w.axes[N]._space,ie=ne/L;for(;b=ze(b+Z,e==1?0:3),!(b>F);)if(j>1){let G=il(ze(O+j,6))%24,ue=g(b).getHours()-G;ue>1&&(ue=-1),b-=ue*n,O=(O+j)%24;let de=y[y.length-1];ze((b-de)/Z,3)*ie>=.7&&y.push(b)}else y.push(b)}return y}}return[d,m,k]}const[Ba,Wa,Ya]=No(1),[Ua,qa,Ka]=No(.001);Vn(2,-53,53,[1]);function Qi(e,l){return e.map(i=>i.map((n,o)=>o==0||o==8||n==null?n:l(o==1||i[8]==0?n:i[1]+n)))}function $i(e,l){return(i,n,o,c,u)=>{let p=l.find(E=>u>=E[0])||l[l.length-1],d,m,k,g,w,N;return n.map(E=>{let F=e(E),Z=F.getFullYear(),ne=F.getMonth(),y=F.getDate(),H=F.getHours(),D=F.getMinutes(),re=F.getSeconds(),P=Z!=d&&p[2]||ne!=m&&p[3]||y!=k&&p[4]||H!=g&&p[5]||D!=w&&p[6]||re!=N&&p[7]||p[1];return d=Z,m=ne,k=y,g=H,w=D,N=re,P(F)})}}function ja(e,l){let i=Js(l);return(n,o,c,u,p)=>o.map(d=>i(e(d)))}function Ms(e,l,i){return new Date(e,l,i)}function Xi(e,l){return l(e)}const Ja="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function eo(e,l){return(i,n,o,c)=>c==null?Ws:l(e(n))}function Za(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function Qa(e,l){return e.series[l].fill(e,l)}const $a={show:!0,live:!0,isolate:!1,mount:va,markers:{show:!0,width:2,stroke:Za,fill:Qa,dash:"solid"},idx:null,idxs:null,values:[]};function Xa(e,l){let i=e.cursor.points,n=pl(),o=i.size(e,l);Be(n,On,o),Be(n,zn,o);let c=o/-2;Be(n,"marginLeft",c),Be(n,"marginTop",c);let u=i.width(e,l,o);return u&&Be(n,"borderWidth",u),n}function eu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function tu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function lu(e,l){return e.series[l].points.size}const As=[0,0];function nu(e,l,i){return As[0]=l,As[1]=i,As}function jn(e,l,i,n=!0){return o=>{o.button==0&&(!n||o.target==l)&&i(o)}}function Cs(e,l,i,n=!0){return o=>{(!n||o.target==l)&&i(o)}}const su={show:!0,x:!0,y:!0,lock:!1,move:nu,points:{one:!1,show:Xa,size:lu,width:0,stroke:tu,fill:eu},bind:{mousedown:jn,mouseup:jn,click:jn,dblclick:jn,mousemove:Cs,mouseleave:Cs,mouseenter:Cs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,o)=>n-o,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Vo={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Qs=ut({},Vo,{filter:Eo}),Ho=ut({},Qs,{size:10}),Bo=ut({},Vo,{show:!1}),$s='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Wo="bold "+$s,Yo=1.5,to={show:!0,scale:"x",stroke:Bs,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Wo,side:2,grid:Qs,ticks:Ho,border:Bo,font:$s,lineGap:Yo,rotate:0},iu="Value",ou="Time",lo={show:!0,scale:"x",auto:!1,sorted:1,min:Oe,max:-Oe,idxs:[]};function ru(e,l,i,n,o){return l.map(c=>c==null?"":Ks(c))}function au(e,l,i,n,o,c,u){let p=[],d=Bl.get(o)||0;i=u?i:ze(ss(i,o),d);for(let m=i;m<=n;m=ze(m+o,d))p.push(Object.is(m,-0)?0:m);return p}function Gs(e,l,i,n,o,c,u){const p=[],d=e.scales[e.axes[l].scale].log,m=d==10?Fl:xo,k=il(m(i));o=_n(d,k),d==10&&(o=Zl[wl(o,Zl)]);let g=i,w=o*d;d==10&&(w=Zl[wl(w,Zl)]);do p.push(g),g=g+o,d==10&&!Bl.has(g)&&(g=ze(g,Bl.get(o))),g>=w&&(o=g,w=o*d,d==10&&(w=Zl[wl(w,Zl)]));while(g<=n);return p}function uu(e,l,i,n,o,c,u){let d=e.scales[e.axes[l].scale].asinh,m=n>d?Gs(e,l,Vt(d,i),n,o):[d],k=n>=0&&i<=0?[0]:[];return(i<-d?Gs(e,l,Vt(d,-n),-i,o):[d]).reverse().map(w=>-w).concat(k,m)}const Uo=/./,cu=/[12357]/,fu=/[125]/,no=/1/,Is=(e,l,i,n)=>e.map((o,c)=>l==4&&o==0||c%n==0&&i.test(o.toExponential()[o<0?1:0])?o:null);function pu(e,l,i,n,o){let c=e.axes[i],u=c.scale,p=e.scales[u],d=e.valToPos,m=c._space,k=d(10,u),g=d(9,u)-k>=m?Uo:d(7,u)-k>=m?cu:d(5,u)-k>=m?fu:no;if(g==no){let w=ht(d(1,u)-k);if(w<m)return Is(l.slice().reverse(),p.distr,g,dl(m/w)).reverse()}return Is(l,p.distr,g,1)}function du(e,l,i,n,o){let c=e.axes[i],u=c.scale,p=c._space,d=e.valToPos,m=ht(d(1,u)-d(2,u));return m<p?Is(l.slice().reverse(),3,Uo,dl(p/m)).reverse():l}function hu(e,l,i,n){return n==null?Ws:l==null?"":Ks(l)}const so={show:!0,scale:"y",stroke:Bs,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Wo,side:3,grid:Qs,ticks:Ho,border:Bo,font:$s,lineGap:Yo,rotate:0};function mu(e,l){let i=3+(e||1)*2;return ze(i*l,3)}function gu(e,l){let{scale:i,idxs:n}=e.series[0],o=e._data[0],c=e.valToPos(o[n[0]],i,!0),u=e.valToPos(o[n[1]],i,!0),p=ht(u-c),d=e.series[l],m=p/(d.points.space*Ce);return n[1]-n[0]<=m}const io={scale:null,auto:!0,sorted:0,min:Oe,max:-Oe},qo=(e,l,i,n,o)=>o,oo={show:!0,auto:!0,sorted:0,gaps:qo,alpha:1,facets:[ut({},io,{scale:"x"}),ut({},io,{scale:"y"})]},ro={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:qo,alpha:1,points:{show:gu,filter:null},values:null,min:Oe,max:-Oe,idxs:[],path:null,clip:null};function vu(e,l,i,n,o){return i/10}const Ko={time:Br,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},wu=ut({},Ko,{time:!1,ori:1}),ao={};function jo(e,l){let i=ao[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(o=>o!=n)},pub(n,o,c,u,p,d,m){for(let k=0;k<i.plots.length;k++)i.plots[k]!=o&&i.plots[k].pub(n,o,c,u,p,d,m)}},e!=null&&(ao[e]=i)),i}const yn=1,Ns=2;function tn(e,l,i){const n=e.mode,o=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let d=c[0],m=n==2?c[1]:c[l],k=n==2?u[o.facets[0].scale]:u[e.series[0].scale],g=n==2?u[o.facets[1].scale]:u[o.scale],w=p.left,N=p.top,E=p.width,F=p.height,Z=e.valToPosH,ne=e.valToPosV;return k.ori==0?i(o,d,m,k,g,Z,ne,w,N,E,F,rs,kn,us,Zo,$o):i(o,d,m,k,g,ne,Z,N,w,F,E,as,Tn,ti,Qo,Xo)}function Xs(e,l){let i=0,n=0,o=ke(e.bands,js);for(let c=0;c<o.length;c++){let u=o[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function _u(e,l,i,n,o){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,d=e.scales[p];return o==-1?d.min:o==1?d.max:d.distr==3?d.dir==1?d.min:d.max:0}function Ol(e,l,i,n,o,c){return tn(e,l,(u,p,d,m,k,g,w,N,E,F,Z)=>{let ne=u.pxRound;const y=m.dir*(m.ori==0?1:-1),H=m.ori==0?kn:Tn;let D,re;y==1?(D=i,re=n):(D=n,re=i);let P=ne(g(p[D],m,F,N)),pe=ne(w(d[D],k,Z,E)),ae=ne(g(p[re],m,F,N)),Q=ne(w(c==1?k.max:k.min,k,Z,E)),q=new Path2D(o);return H(q,ae,Q),H(q,P,Q),H(q,P,pe),q})}function os(e,l,i,n,o,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?us:ti;let d=i;for(let g=0;g<e.length;g++){let w=e[g];if(w[1]>w[0]){let N=w[0]-d;N>0&&p(u,d,n,N,n+c),d=w[1]}}let m=i+o-d,k=10;m>0&&p(u,d,n-k/2,m,n+c+k)}return u}function bu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ei(e,l,i,n,o,c,u){let p=[],d=e.length;for(let m=o==1?i:n;m>=i&&m<=n;m+=o)if(l[m]===null){let g=m,w=m;if(o==1)for(;++m<=n&&l[m]===null;)w=m;else for(;--m>=i&&l[m]===null;)w=m;let N=c(e[g]),E=w==g?N:c(e[w]),F=g-o;N=u<=0&&F>=0&&F<d?c(e[F]):N;let ne=w+o;E=u>=0&&ne>=0&&ne<d?c(e[ne]):E,E>=N&&p.push([N,E])}return p}function uo(e){return e==0?To:e==1?dt:l=>Jl(l,e)}function Jo(e){let l=e==0?rs:as,i=e==0?(o,c,u,p,d,m)=>{o.arcTo(c,u,p,d,m)}:(o,c,u,p,d,m)=>{o.arcTo(u,c,d,p,m)},n=e==0?(o,c,u,p,d)=>{o.rect(c,u,p,d)}:(o,c,u,p,d)=>{o.rect(u,c,d,p)};return(o,c,u,p,d,m=0,k=0)=>{m==0&&k==0?n(o,c,u,p,d):(m=_l(m,p/2,d/2),k=_l(k,p/2,d/2),l(o,c+m,u),i(o,c+p,u,c+p,u+d,m),i(o,c+p,u+d,c,u+d,k),i(o,c,u+d,c,u,k),i(o,c,u,c+p,u,m),o.closePath())}}const rs=(e,l,i)=>{e.moveTo(l,i)},as=(e,l,i)=>{e.moveTo(i,l)},kn=(e,l,i)=>{e.lineTo(l,i)},Tn=(e,l,i)=>{e.lineTo(i,l)},us=Jo(0),ti=Jo(1),Zo=(e,l,i,n,o,c)=>{e.arc(l,i,n,o,c)},Qo=(e,l,i,n,o,c)=>{e.arc(i,l,n,o,c)},$o=(e,l,i,n,o,c,u)=>{e.bezierCurveTo(l,i,n,o,c,u)},Xo=(e,l,i,n,o,c,u)=>{e.bezierCurveTo(i,l,o,n,u,c)};function er(e){return(l,i,n,o,c)=>tn(l,i,(u,p,d,m,k,g,w,N,E,F,Z)=>{let{pxRound:ne,points:y}=u,H,D;m.ori==0?(H=rs,D=Zo):(H=as,D=Qo);const re=ze(y.width*Ce,3);let P=(y.size-y.width)/2*Ce,pe=ze(P*2,3),ae=new Path2D,Q=new Path2D,{left:q,top:b,width:K,height:O}=l.bbox;us(Q,q-pe,b-pe,K+pe*2,O+pe*2);const j=L=>{if(d[L]!=null){let ie=ne(g(p[L],m,F,N)),G=ne(w(d[L],k,Z,E));H(ae,ie+P,G),D(ae,ie,G,P,0,$n*2)}};if(c)c.forEach(j);else for(let L=n;L<=o;L++)j(L);return{stroke:re>0?ae:null,fill:ae,clip:Q,flags:yn|Ns}})}function tr(e){return(l,i,n,o,c,u)=>{n!=o&&(c!=n&&u!=n&&e(l,i,n),c!=o&&u!=o&&e(l,i,o),e(l,i,u))}}const Su=tr(kn),yu=tr(Tn);function lr(e){const l=ke(e?.alignGaps,0);return(i,n,o,c)=>tn(i,n,(u,p,d,m,k,g,w,N,E,F,Z)=>{[o,c]=ls(d,o,c);let ne=u.pxRound,y=O=>ne(g(O,m,F,N)),H=O=>ne(w(O,k,Z,E)),D,re;m.ori==0?(D=kn,re=Su):(D=Tn,re=yu);const P=m.dir*(m.ori==0?1:-1),pe={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:yn},ae=pe.stroke;let Q=!1;if(c-o>=F*4){let O=Y=>i.posToVal(Y,m.key,!0),j=null,L=null,ie,G,Ge,he=y(p[P==1?o:c]),ue=y(p[o]),de=y(p[c]),se=O(P==1?ue+1:de-1);for(let Y=P==1?o:c;Y>=o&&Y<=c;Y+=P){let De=p[Y],Se=(P==1?De<se:De>se)?he:y(De),me=d[Y];Se==he?me!=null?(G=me,j==null?(D(ae,Se,H(G)),ie=j=L=G):G<j?j=G:G>L&&(L=G)):me===null&&(Q=!0):(j!=null&&re(ae,he,H(j),H(L),H(ie),H(G)),me!=null?(G=me,D(ae,Se,H(G)),j=L=ie=G):(j=L=null,me===null&&(Q=!0)),he=Se,se=O(he+P))}j!=null&&j!=L&&Ge!=he&&re(ae,he,H(j),H(L),H(ie),H(G))}else for(let O=P==1?o:c;O>=o&&O<=c;O+=P){let j=d[O];j===null?Q=!0:j!=null&&D(ae,y(p[O]),H(j))}let[b,K]=Xs(i,n);if(u.fill!=null||b!=0){let O=pe.fill=new Path2D(ae),j=u.fillTo(i,n,u.min,u.max,b),L=H(j),ie=y(p[o]),G=y(p[c]);P==-1&&([G,ie]=[ie,G]),D(O,G,L),D(O,ie,L)}if(!u.spanGaps){let O=[];Q&&O.push(...ei(p,d,o,c,P,y,l)),pe.gaps=O=u.gaps(i,n,o,c,O),pe.clip=os(O,m.ori,N,E,F,Z)}return K!=0&&(pe.band=K==2?[Ol(i,n,o,c,ae,-1),Ol(i,n,o,c,ae,1)]:Ol(i,n,o,c,ae,K)),pe})}function xu(e){const l=ke(e.align,1),i=ke(e.ascDesc,!1),n=ke(e.alignGaps,0),o=ke(e.extend,!1);return(c,u,p,d)=>tn(c,u,(m,k,g,w,N,E,F,Z,ne,y,H)=>{[p,d]=ls(g,p,d);let D=m.pxRound,{left:re,width:P}=c.bbox,pe=ue=>D(E(ue,w,y,Z)),ae=ue=>D(F(ue,N,H,ne)),Q=w.ori==0?kn:Tn;const q={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:yn},b=q.stroke,K=w.dir*(w.ori==0?1:-1);let O=ae(g[K==1?p:d]),j=pe(k[K==1?p:d]),L=j,ie=j;o&&l==-1&&(ie=re,Q(b,ie,O)),Q(b,j,O);for(let ue=K==1?p:d;ue>=p&&ue<=d;ue+=K){let de=g[ue];if(de==null)continue;let se=pe(k[ue]),Y=ae(de);l==1?Q(b,se,O):Q(b,L,Y),Q(b,se,Y),O=Y,L=se}let G=L;o&&l==1&&(G=re+P,Q(b,G,O));let[Ge,he]=Xs(c,u);if(m.fill!=null||Ge!=0){let ue=q.fill=new Path2D(b),de=m.fillTo(c,u,m.min,m.max,Ge),se=ae(de);Q(ue,G,se),Q(ue,ie,se)}if(!m.spanGaps){let ue=[];ue.push(...ei(k,g,p,d,K,pe,n));let de=m.width*Ce/2,se=i||l==1?de:-de,Y=i||l==-1?-de:de;ue.forEach(De=>{De[0]+=se,De[1]+=Y}),q.gaps=ue=m.gaps(c,u,p,d,ue),q.clip=os(ue,w.ori,Z,ne,y,H)}return he!=0&&(q.band=he==2?[Ol(c,u,p,d,b,-1),Ol(c,u,p,d,b,1)]:Ol(c,u,p,d,b,he)),q})}function co(e,l,i,n,o,c,u=Oe){if(e.length>1){let p=null;for(let d=0,m=1/0;d<e.length;d++)if(l[d]!==void 0){if(p!=null){let k=ht(e[d]-e[p]);k<m&&(m=k,u=ht(i(e[d],n,o,c)-i(e[p],n,o,c)))}p=d}}return u}function ku(e){e=e||Nn;const l=ke(e.size,[.6,Oe,1]),i=e.align||0,n=e.gap||0;let o=e.radius;o=o==null?[0,0]:typeof o=="number"?[o,0]:o;const c=_e(o),u=1-l[0],p=ke(l[1],Oe),d=ke(l[2],1),m=ke(e.disp,Nn),k=ke(e.each,N=>{}),{fill:g,stroke:w}=m;return(N,E,F,Z)=>tn(N,E,(ne,y,H,D,re,P,pe,ae,Q,q,b)=>{let K=ne.pxRound,O=i,j=n*Ce,L=p*Ce,ie=d*Ce,G,Ge;D.ori==0?[G,Ge]=c(N,E):[Ge,G]=c(N,E);const he=D.dir*(D.ori==0?1:-1);let ue=D.ori==0?us:ti,de=D.ori==0?k:(R,Te,Ye,Qt,$t,Et,Ut)=>{k(R,Te,Ye,$t,Qt,Ut,Et)},se=ke(N.bands,js).find(R=>R.series[0]==E),Y=se!=null?se.dir:0,De=ne.fillTo(N,E,ne.min,ne.max,Y),Ze=K(pe(De,re,b,Q)),Se,me,gt,je=q,ye=K(ne.width*Ce),it=!1,Tt=null,We=null,ot=null,Ht=null;g!=null&&(ye==0||w!=null)&&(it=!0,Tt=g.values(N,E,F,Z),We=new Map,new Set(Tt).forEach(R=>{R!=null&&We.set(R,new Path2D)}),ye>0&&(ot=w.values(N,E,F,Z),Ht=new Map,new Set(ot).forEach(R=>{R!=null&&Ht.set(R,new Path2D)})));let{x0:ge,size:tt}=m;if(ge!=null&&tt!=null){O=1,y=ge.values(N,E,F,Z),ge.unit==2&&(y=y.map(Ye=>N.posToVal(ae+Ye*q,D.key,!0)));let R=tt.values(N,E,F,Z);tt.unit==2?me=R[0]*q:me=P(R[0],D,q,ae)-P(0,D,q,ae),je=co(y,H,P,D,q,ae,je),gt=je-me+j}else je=co(y,H,P,D,q,ae,je),gt=je*u+j,me=je-gt;gt<1&&(gt=0),ye>=me/2&&(ye=0),gt<5&&(K=To);let Bt=gt>0,Rt=je-gt-(Bt?ye:0);me=K(zs(Rt,ie,L)),Se=(O==0?me/2:O==he?0:me)-O*he*((O==0?j/2:0)+(Bt?ye/2:0));const Pe={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Wt=it?null:new Path2D;let Yt=null;if(se!=null)Yt=N.data[se.series[1]];else{let{y0:R,y1:Te}=m;R!=null&&Te!=null&&(H=Te.values(N,E,F,Z),Yt=R.values(N,E,F,Z))}let rl=G*me,ce=Ge*me;for(let R=he==1?F:Z;R>=F&&R<=Z;R+=he){let Te=H[R];if(Te==null)continue;if(Yt!=null){let ct=Yt[R]??0;if(Te-ct==0)continue;Ze=pe(ct,re,b,Q)}let Ye=D.distr!=2||m!=null?y[R]:R,Qt=P(Ye,D,q,ae),$t=pe(ke(Te,De),re,b,Q),Et=K(Qt-Se),Ut=K(Vt($t,Ze)),lt=K(_l($t,Ze)),Je=Ut-lt;if(Te!=null){let ct=Te<0?ce:rl,vt=Te<0?rl:ce;it?(ye>0&&ot[R]!=null&&ue(Ht.get(ot[R]),Et,lt+il(ye/2),me,Vt(0,Je-ye),ct,vt),Tt[R]!=null&&ue(We.get(Tt[R]),Et,lt+il(ye/2),me,Vt(0,Je-ye),ct,vt)):ue(Wt,Et,lt+il(ye/2),me,Vt(0,Je-ye),ct,vt),de(N,E,R,Et-ye/2,lt,me+ye,Je)}}return ye>0?Pe.stroke=it?Ht:Wt:it||(Pe._fill=ne.width==0?ne._fill:ne._stroke??ne._fill,Pe.width=0),Pe.fill=it?We:Wt,Pe})}function Tu(e,l){const i=ke(l?.alignGaps,0);return(n,o,c,u)=>tn(n,o,(p,d,m,k,g,w,N,E,F,Z,ne)=>{[c,u]=ls(m,c,u);let y=p.pxRound,H=G=>y(w(G,k,Z,E)),D=G=>y(N(G,g,ne,F)),re,P,pe;k.ori==0?(re=rs,pe=kn,P=$o):(re=as,pe=Tn,P=Xo);const ae=k.dir*(k.ori==0?1:-1);let Q=H(d[ae==1?c:u]),q=Q,b=[],K=[];for(let G=ae==1?c:u;G>=c&&G<=u;G+=ae)if(m[G]!=null){let he=d[G],ue=H(he);b.push(q=ue),K.push(D(m[G]))}const O={stroke:e(b,K,re,pe,P,y),fill:null,clip:null,band:null,gaps:null,flags:yn},j=O.stroke;let[L,ie]=Xs(n,o);if(p.fill!=null||L!=0){let G=O.fill=new Path2D(j),Ge=p.fillTo(n,o,p.min,p.max,L),he=D(Ge);pe(G,q,he),pe(G,Q,he)}if(!p.spanGaps){let G=[];G.push(...ei(d,m,c,u,ae,H,i)),O.gaps=G=p.gaps(n,o,c,u,G),O.clip=os(G,k.ori,E,F,Z,ne)}return ie!=0&&(O.band=ie==2?[Ol(n,o,c,u,j,-1),Ol(n,o,c,u,j,1)]:Ol(n,o,c,u,j,ie)),O})}function Eu(e){return Tu(Mu,e)}function Mu(e,l,i,n,o,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let d=Array(u),m=Array(u-1),k=Array(u-1),g=Array(u-1);for(let w=0;w<u-1;w++)k[w]=l[w+1]-l[w],g[w]=e[w+1]-e[w],m[w]=k[w]/g[w];d[0]=m[0];for(let w=1;w<u-1;w++)m[w]===0||m[w-1]===0||m[w-1]>0!=m[w]>0?d[w]=0:(d[w]=3*(g[w-1]+g[w])/((2*g[w]+g[w-1])/m[w-1]+(g[w]+2*g[w-1])/m[w]),isFinite(d[w])||(d[w]=0));d[u-1]=m[u-2];for(let w=0;w<u-1;w++)o(p,e[w]+g[w]/3,l[w]+d[w]*g[w]/3,e[w+1]-g[w]/3,l[w+1]-d[w+1]*g[w]/3,e[w+1],l[w+1])}return p}const Vs=new Set;function fo(){for(let e of Vs)e.syncRect(!0)}xn&&(Xl(ra,wn,fo),Xl(aa,wn,fo,!0),Xl(Xn,wn,()=>{st.pxRatio=Ce}));const Au=lr(),Cu=er();function po(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Hs(c,u,l,i))}function Du(e,l){return e.map((i,n)=>n==0?{}:ut({},l,i))}function Hs(e,l,i,n){return ut({},l==0?i:n,e)}function nr(e,l,i){return l==null?bn:[l,i]}const Lu=nr;function Pu(e,l,i){return l==null?bn:es(l,i,qs,!0)}function sr(e,l,i,n){return l==null?bn:ns(l,i,e.scales[n].log,!1)}const Ru=sr;function ir(e,l,i,n){return l==null?bn:Us(l,i,e.scales[n].log,!1)}const Fu=ir;function Ou(e,l,i,n,o){let c=Vt(Yi(e),Yi(l)),u=l-e,p=wl(o/n*u,i);do{let d=i[p],m=n*d/u;if(m>=o&&c+(d<5?Bl.get(d):0)<=17)return[d,m]}while(++p<i.length);return[0,0]}function ho(e){let l,i;return e=e.replace(/(\d+)px/,(n,o)=>(l=dt((i=+o)*Ce))+"px"),[e,l,i]}function zu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=ze(l[2]*Ce,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function st(e,l,i){const n={mode:ke(e.mode,1)},o=n.mode;function c(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?1-f:f)}function u(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?f:1-f)}function p(t,s,r,a){return s.ori==0?c(t,s,r,a):u(t,s,r,a)}n.valToPosH=c,n.valToPosV=u;let d=!1;n.status=0;const m=n.root=pl(Wr);if(e.id!=null&&(m.id=e.id),nl(m,e.class),e.title){let t=pl(qr,m);t.textContent=e.title}const k=vl("canvas"),g=n.ctx=k.getContext("2d"),w=pl(Kr,m);Xl("click",w,t=>{t.target===E&&(Ie!=cn||qe!=fn)&&Ct.click(n,t)},!0);const N=n.under=pl(jr,w);w.appendChild(k);const E=n.over=pl(Jr,w);e=Sn(e);const F=+ke(e.pxAlign,1),Z=uo(F);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const ne=e.ms||.001,y=n.series=o==1?po(e.series||[],lo,ro,!1):Du(e.series||[null],oo),H=n.axes=po(e.axes||[],to,so,!0),D=n.scales={},re=n.bands=e.bands||[];re.forEach(t=>{t.fill=_e(t.fill||null),t.dir=ke(t.dir,-1)});const P=o==2?y[1].facets[0].scale:y[0].scale,pe={axes:dr,series:ar},ae=(e.drawOrder||["axes","series"]).map(t=>pe[t]);function Q(t){const s=t.distr==3?r=>Fl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Es(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let a=s(r),{_min:f,_max:h}=t,_=h-f;return(a-f)/_}}function q(t){let s=D[t];if(s==null){let r=(e.scales||Nn)[t]||Nn;if(r.from!=null){q(r.from);let a=ut({},D[r.from],r,{key:t});a.valToPct=Q(a),D[t]=a}else{s=D[t]=ut({},t==P?Ko:wu,r),s.key=t;let a=s.time,f=s.range,h=Hl(f);if((t!=P||o==2&&!a)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Hi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Hi:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&is(f))){let _=f;f=(T,C,z)=>C==null?bn:es(C,z,_)}s.range=_e(f||(a?Lu:t==P?s.distr==3?Ru:s.distr==4?Fu:nr:s.distr==3?sr:s.distr==4?ir:Pu)),s.auto=_e(h?!1:s.auto),s.clamp=_e(s.clamp||vu),s._min=s._max=null,s.valToPct=Q(s)}}}q("x"),q("y"),o==1&&y.forEach(t=>{q(t.scale)}),H.forEach(t=>{q(t.scale)});for(let t in e.scales)q(t);const b=D[P],K=b.distr;let O,j;b.ori==0?(nl(m,Yr),O=c,j=u):(nl(m,Ur),O=u,j=c);const L={};for(let t in D){let s=D[t];(s.min!=null||s.max!=null)&&(L[t]={min:s.min,max:s.max},s.min=s.max=null)}const ie=e.tzDate||(t=>new Date(dt(t/ne))),G=e.fmtDate||Js,Ge=ne==1?Ya(ie):Ka(ie),he=$i(ie,Qi(ne==1?Wa:qa,G)),ue=eo(ie,Xi(Ja,G)),de=[],se=n.legend=ut({},$a,e.legend),Y=n.cursor=ut({},su,{drag:{y:o==2}},e.cursor),De=se.show,Ze=Y.show,Se=se.markers;se.idxs=de,Se.width=_e(Se.width),Se.dash=_e(Se.dash),Se.stroke=_e(Se.stroke),Se.fill=_e(Se.fill);let me,gt,je,ye=[],it=[],Tt,We=!1,ot={};if(se.live){const t=y[1]?y[1].values:null;We=t!=null,Tt=We?t(n,1,0):{_:0};for(let s in Tt)ot[s]=Ws}if(De)if(me=vl("table",ta,m),je=vl("tbody",null,me),se.mount(n,me),We){gt=vl("thead",null,me,je);let t=vl("tr",null,gt);vl("th",null,t);for(var Ht in Tt)vl("th",Ai,t).textContent=Ht}else nl(me,na),se.live&&nl(me,la);const ge={show:!0},tt={show:!1};function Bt(t,s){if(s==0&&(We||!se.live||o==2))return bn;let r=[],a=vl("tr",sa,je,je.childNodes[s]);nl(a,t.class),t.show||nl(a,$l);let f=vl("th",null,a);if(Se.show){let T=pl(ia,f);if(s>0){let C=Se.width(n,s);C&&(T.style.border=C+"px "+Se.dash(n,s)+" "+Se.stroke(n,s)),T.style.background=Se.fill(n,s)}}let h=pl(Ai,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(Se.show||(h.style.color=t.width>0?Se.stroke(n,s):Se.fill(n,s)),Pe("click",f,T=>{if(Y._lock)return;qt(T);let C=y.indexOf(t);if((T.ctrlKey||T.metaKey)!=se.isolate){let z=y.some((I,W)=>W>0&&W!=C&&I.show);y.forEach((I,W)=>{W>0&&Tl(W,z?W==C?ge:tt:ge,!0,at.setSeries)})}else Tl(C,{show:!t.show},!0,at.setSeries)},!1),xl&&Pe(Pi,f,T=>{Y._lock||(qt(T),Tl(y.indexOf(t),dn,!0,at.setSeries))},!1));for(var _ in Tt){let T=vl("td",oa,a);T.textContent="--",r.push(T)}return[a,r]}const Rt=new Map;function Pe(t,s,r,a=!0){const f=Rt.get(s)||{},h=Y.bind[t](n,s,r,a);h&&(Xl(t,s,f[t]=h),Rt.set(s,f))}function Wt(t,s,r){const a=Rt.get(s)||{};for(let f in a)(t==null||f==t)&&(Os(f,s,a[f]),delete a[f]);t==null&&Rt.delete(s)}let Yt=0,rl=0,ce=0,R=0,Te=0,Ye=0,Qt=Te,$t=Ye,Et=ce,Ut=R,lt=0,Je=0,ct=0,vt=0;n.bbox={};let bl=!1,zl=!1,Ft=!1,Xt=!1,hl=!1,ft=!1;function Sl(t,s,r){(r||t!=n.width||s!=n.height)&&Wl(t,s),on(!1),Ft=!0,zl=!0,rn()}function Wl(t,s){n.width=Yt=ce=t,n.height=rl=R=s,Te=Ye=0,En(),yl();let r=n.bbox;lt=r.left=Jl(Te*Ce,.5),Je=r.top=Jl(Ye*Ce,.5),ct=r.width=Jl(ce*Ce,.5),vt=r.height=Jl(R*Ce,.5)}const ln=3;function Yl(){let t=!1,s=0;for(;!t;){s++;let r=fr(s),a=pr(s);t=s==ln||r&&a,t||(Wl(n.width,n.height),zl=!0)}}function nn({width:t,height:s}){Sl(t,s)}n.setSize=nn;function En(){let t=!1,s=!1,r=!1,a=!1;H.forEach((f,h)=>{if(f.show&&f._show){let{side:_,_size:T}=f,C=_%2,z=f.label!=null?f.labelSize:0,I=T+z;I>0&&(C?(ce-=I,_==3?(Te+=I,a=!0):r=!0):(R-=I,_==0?(Ye+=I,t=!0):s=!0))}}),M[0]=t,M[1]=r,M[2]=s,M[3]=a,ce-=B[1]+B[3],Te+=B[3],R-=B[2]+B[0],Ye+=B[0]}function yl(){let t=Te+ce,s=Ye+R,r=Te,a=Ye;function f(h,_){switch(h){case 1:return t+=_,t-_;case 2:return s+=_,s-_;case 3:return r-=_,r+_;case 0:return a-=_,a+_}}H.forEach((h,_)=>{if(h.show&&h._show){let T=h.side;h._pos=f(T,h._size),h.label!=null&&(h._lpos=f(T,h.labelSize))}})}if(Y.dataIdx==null){let t=Y.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=_e(t.prox),a=t.bias??=0;Y.dataIdx=(f,h,_,T)=>{if(h==0)return _;let C=_,z=r(f,h,_,T)??Oe,I=z>=0&&z<Oe,W=b.ori==0?ce:R,fe=Y.left,Ae=l[0],xe=l[h];if(s.has(xe[_])){C=null;let ve=null,oe=null,$;if(a==0||a==-1)for($=_;ve==null&&$-- >0;)s.has(xe[$])||(ve=$);if(a==0||a==1)for($=_;oe==null&&$++<xe.length;)s.has(xe[$])||(oe=$);if(ve!=null||oe!=null)if(I){let Ve=ve==null?-1/0:O(Ae[ve],b,W,0),Xe=oe==null?1/0:O(Ae[oe],b,W,0),kt=fe-Ve,Re=Xe-fe;kt<=Re?kt<=z&&(C=ve):Re<=z&&(C=oe)}else C=oe==null?ve:ve==null?oe:_-ve<=oe-_?ve:oe}else I&&ht(fe-O(Ae[_],b,W,0))>z&&(C=null);return C}}const qt=t=>{Y.event=t};Y.idxs=de,Y._lock=!1;let rt=Y.points;rt.show=_e(rt.show),rt.size=_e(rt.size),rt.stroke=_e(rt.stroke),rt.width=_e(rt.width),rt.fill=_e(rt.fill);const Kt=n.focus=ut({},e.focus||{alpha:.3},Y.focus),xl=Kt.prox>=0,Qe=xl&&rt.one;let Ee=[],pt=[],jt=[];function kl(t,s){let r=rt.show(n,s);if(r instanceof HTMLElement)return nl(r,ea),nl(r,t.class),Cl(r,-10,-10,ce,R),E.insertBefore(r,Ee[s]),r}function Ot(t,s){if(o==1||s>0){let r=o==1&&D[t.scale].time,a=t.value;t.value=r?Ki(a)?eo(ie,Xi(a,G)):a||ue:a||hu,t.label=t.label||(r?ou:iu)}if(Qe||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Au||wa,t.fillTo=_e(t.fillTo||_u),t.pxAlign=+ke(t.pxAlign,F),t.pxRound=uo(t.pxAlign),t.stroke=_e(t.stroke||null),t.fill=_e(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=mu(Vt(1,t.width),1),a=t.points=ut({},{size:r,width:Vt(1,r*.2),stroke:t.stroke,space:r*2,paths:Cu,_stroke:null,_fill:null},t.points);a.show=_e(a.show),a.filter=_e(a.filter),a.fill=_e(a.fill),a.stroke=_e(a.stroke),a.paths=_e(a.paths),a.pxAlign=t.pxAlign}if(De){let r=Bt(t,s);ye.splice(s,0,r[0]),it.splice(s,0,r[1]),se.values.push(null)}if(Ze){de.splice(s,0,null);let r=null;Qe?s==0&&(r=kl(t,s)):s>0&&(r=kl(t,s)),Ee.splice(s,0,r),pt.splice(s,0,0),jt.splice(s,0,0)}xt("addSeries",s)}function Jt(t,s){s=s??y.length,t=o==1?Hs(t,s,lo,ro):Hs(t,s,{},oo),y.splice(s,0,t),Ot(y[s],s)}n.addSeries=Jt;function x(t){if(y.splice(t,1),De){se.values.splice(t,1),it.splice(t,1);let s=ye.splice(t,1)[0];Wt(null,s.firstChild),s.remove()}Ze&&(de.splice(t,1),Ee.splice(t,1)[0].remove(),pt.splice(t,1),jt.splice(t,1)),xt("delSeries",t)}n.delSeries=x;const M=[!1,!1,!1,!1];function U(t,s){if(t._show=t.show,t.show){let r=t.side%2,a=D[t.scale];a==null&&(t.scale=r?y[1].scale:P,a=D[t.scale]);let f=a.time;t.size=_e(t.size),t.space=_e(t.space),t.rotate=_e(t.rotate),Hl(t.incrs)&&t.incrs.forEach(_=>{!Bl.has(_)&&Bl.set(_,Ao(_))}),t.incrs=_e(t.incrs||(a.distr==2?Va:f?ne==1?Ba:Ua:Zl)),t.splits=_e(t.splits||(f&&a.distr==1?Ge:a.distr==3?Gs:a.distr==4?uu:au)),t.stroke=_e(t.stroke),t.grid.stroke=_e(t.grid.stroke),t.ticks.stroke=_e(t.ticks.stroke),t.border.stroke=_e(t.border.stroke);let h=t.values;t.values=Hl(h)&&!Hl(h[0])?_e(h):f?Hl(h)?$i(ie,Qi(h,G)):Ki(h)?ja(ie,h):h||he:h||ru,t.filter=_e(t.filter||(a.distr>=3&&a.log==10?pu:a.distr==3&&a.log==2?du:Eo)),t.font=ho(t.font),t.labelFont=ho(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(M[s]=!0,t._el=pl(Zr,w))}}function V(t,s,r,a){let[f,h,_,T]=r,C=s%2,z=0;return C==0&&(T||h)&&(z=s==0&&!f||s==2&&!_?dt(to.size/3):0),C==1&&(f||_)&&(z=s==1&&!h||s==3&&!T?dt(so.size/2):0),z}const te=n.padding=(e.padding||[V,V,V,V]).map(t=>_e(ke(t,V))),B=n._padding=te.map((t,s)=>t(n,s,M,0));let A,S=null,J=null;const be=o==1?y[0].idxs:null;let Fe=null,wt=!1;function Dt(t,s){if(l=t??[],n.data=n._data=l,o==2){A=0;for(let r=1;r<y.length;r++)A+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Fe=l[0],A=Fe.length;let r=l;if(K==2){r=l.slice();let a=r[0]=Array(A);for(let f=0;f<A;f++)a[f]=f}n._data=l=r}if(on(!0),xt("setData"),K==2&&(Ft=!0),s!==!1){let r=b;r.auto(n,wt)?zt():Il(P,r.min,r.max),Xt=Xt||Y.left>=0,ft=!0,rn()}}n.setData=Dt;function zt(){wt=!0;let t,s;o==1&&(A>0?(S=be[0]=0,J=be[1]=A-1,t=l[0][S],s=l[0][J],K==2?(t=S,s=J):t==s&&(K==3?[t,s]=ns(t,t,b.log,!1):K==4?[t,s]=Us(t,t,b.log,!1):b.time?s=t+dt(86400/ne):[t,s]=es(t,s,qs,!0))):(S=be[0]=t=null,J=be[1]=s=null)),Il(P,t,s)}let Mt,_t,al,At,Ue,Me,bt,Zt,ul,$e;function Ul(t,s,r,a,f,h){t??=Di,r??=js,a??="butt",f??=Di,h??="round",t!=Mt&&(g.strokeStyle=Mt=t),f!=_t&&(g.fillStyle=_t=f),s!=al&&(g.lineWidth=al=s),h!=Ue&&(g.lineJoin=Ue=h),a!=Me&&(g.lineCap=Me=a),r!=At&&g.setLineDash(At=r)}function sn(t,s,r,a){s!=_t&&(g.fillStyle=_t=s),t!=bt&&(g.font=bt=t),r!=Zt&&(g.textAlign=Zt=r),a!=ul&&(g.textBaseline=ul=a)}function Lt(t,s,r,a,f=0){if(a.length>0&&t.auto(n,wt)&&(s==null||s.min==null)){let h=ke(S,0),_=ke(J,a.length-1),T=r.min==null?pa(a,h,_,f,t.distr==3):[r.min,r.max];t.min=_l(t.min,r.min=T[0]),t.max=Vt(t.max,r.max=T[1])}}const li={min:null,max:null};function or(){for(let a in D){let f=D[a];L[a]==null&&(f.min==null||L[P]!=null&&f.auto(n,wt))&&(L[a]=li)}for(let a in D){let f=D[a];L[a]==null&&f.from!=null&&L[f.from]!=null&&(L[a]=li)}L[P]!=null&&on(!0);let t={};for(let a in L){let f=L[a];if(f!=null){let h=t[a]=Sn(D[a],Sa);if(f.min!=null)ut(h,f);else if(a!=P||o==2)if(A==0&&h.from==null){let _=h.range(n,null,null,a);h.min=_[0],h.max=_[1]}else h.min=Oe,h.max=-Oe}}if(A>0){y.forEach((a,f)=>{if(o==1){let h=a.scale,_=L[h];if(_==null)return;let T=t[h];if(f==0){let C=T.range(n,T.min,T.max,h);T.min=C[0],T.max=C[1],S=wl(T.min,l[0]),J=wl(T.max,l[0]),J-S>1&&(l[0][S]<T.min&&S++,l[0][J]>T.max&&J--),a.min=Fe[S],a.max=Fe[J]}else a.show&&a.auto&&Lt(T,_,a,l[f],a.sorted);a.idxs[0]=S,a.idxs[1]=J}else if(f>0&&a.show&&a.auto){let[h,_]=a.facets,T=h.scale,C=_.scale,[z,I]=l[f],W=t[T],fe=t[C];W!=null&&Lt(W,L[T],h,z,h.sorted),fe!=null&&Lt(fe,L[C],_,I,_.sorted),a.min=_.min,a.max=_.max}});for(let a in t){let f=t[a],h=L[a];if(f.from==null&&(h==null||h.min==null)){let _=f.range(n,f.min==Oe?null:f.min,f.max==-Oe?null:f.max,a);f.min=_[0],f.max=_[1]}}}for(let a in t){let f=t[a];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let _=f.range(n,h.min,h.max,a);f.min=_[0],f.max=_[1]}}}let s={},r=!1;for(let a in t){let f=t[a],h=D[a];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let _=h.distr;h._min=_==3?Fl(h.min):_==4?Es(h.min,h.asinh):_==100?h.fwd(h.min):h.min,h._max=_==3?Fl(h.max):_==4?Es(h.max,h.asinh):_==100?h.fwd(h.max):h.max,s[a]=r=!0}}if(r){y.forEach((a,f)=>{o==2?f>0&&s.y&&(a._paths=null):s[a.scale]&&(a._paths=null)});for(let a in s)Ft=!0,xt("setScale",a);Ze&&Y.left>=0&&(Xt=ft=!0)}for(let a in L)L[a]=null}function rr(t){let s=zs(S-1,0,A-1),r=zs(J+1,0,A-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<A-1;)r++;return[s,r]}function ar(){if(A>0){let t=y.some(s=>s._focus)&&$e!=Kt.alpha;t&&(g.globalAlpha=$e=Kt.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(ni(r,!1),ni(r,!0),s._paths==null)){let a=$e;$e!=s.alpha&&(g.globalAlpha=$e=s.alpha);let f=o==2?[0,l[r][0].length-1]:rr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),$e!=a&&(g.globalAlpha=$e=a)}}),y.forEach((s,r)=>{if(r>0&&s.show){let a=$e;$e!=s.alpha&&(g.globalAlpha=$e=s.alpha),s._paths!=null&&si(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,S,J,f),_=s.points.filter(n,r,h,f);(h||_)&&(s.points._paths=s.points.paths(n,r,S,J,_),si(r,!0))}$e!=a&&(g.globalAlpha=$e=a),xt("drawSeries",r)}}),t&&(g.globalAlpha=$e=1)}}function ni(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function si(t,s){let r=s?y[t].points:y[t],{stroke:a,fill:f,clip:h,flags:_,_stroke:T=r._stroke,_fill:C=r._fill,_width:z=r.width}=r._paths;z=ze(z*Ce,3);let I=null,W=z%2/2;s&&C==null&&(C=z>0?"#fff":T);let fe=r.pxAlign==1&&W>0;if(fe&&g.translate(W,W),!s){let Ae=lt-z/2,xe=Je-z/2,ve=ct+z,oe=vt+z;I=new Path2D,I.rect(Ae,xe,ve,oe)}s?cs(T,z,r.dash,r.cap,C,a,f,_,h):ur(t,T,z,r.dash,r.cap,C,a,f,_,I,h),fe&&g.translate(-W,-W)}function ur(t,s,r,a,f,h,_,T,C,z,I){let W=!1;C!=0&&re.forEach((fe,Ae)=>{if(fe.series[0]==t){let xe=y[fe.series[1]],ve=l[fe.series[1]],oe=(xe._paths||Nn).band;Hl(oe)&&(oe=fe.dir==1?oe[0]:oe[1]);let $,Ve=null;xe.show&&oe&&ha(ve,S,J)?(Ve=fe.fill(n,Ae)||h,$=xe._paths.clip):oe=null,cs(s,r,a,f,Ve,_,T,C,z,I,$,oe),W=!0}}),W||cs(s,r,a,f,h,_,T,C,z,I)}const ii=yn|Ns;function cs(t,s,r,a,f,h,_,T,C,z,I,W){Ul(t,s,r,a,f),(C||z||W)&&(g.save(),C&&g.clip(C),z&&g.clip(z)),W?(T&ii)==ii?(g.clip(W),I&&g.clip(I),Bn(f,_),Hn(t,h,s)):T&Ns?(Bn(f,_),g.clip(W),Hn(t,h,s)):T&yn&&(g.save(),g.clip(W),I&&g.clip(I),Bn(f,_),g.restore(),Hn(t,h,s)):(Bn(f,_),Hn(t,h,s)),(C||z||W)&&g.restore()}function Hn(t,s,r){r>0&&(s instanceof Map?s.forEach((a,f)=>{g.strokeStyle=Mt=f,g.stroke(a)}):s!=null&&t&&g.stroke(s))}function Bn(t,s){s instanceof Map?s.forEach((r,a)=>{g.fillStyle=_t=a,g.fill(r)}):s!=null&&t&&g.fill(s)}function cr(t,s,r,a){let f=H[t],h;if(a<=0)h=[0,0];else{let _=f._space=f.space(n,t,s,r,a),T=f._incrs=f.incrs(n,t,s,r,a,_);h=Ou(s,r,T,a,_)}return f._found=h}function fs(t,s,r,a,f,h,_,T,C,z){let I=_%2/2;F==1&&g.translate(I,I),Ul(T,_,C,z,T),g.beginPath();let W,fe,Ae,xe,ve=f+(a==0||a==3?-h:h);r==0?(fe=f,xe=ve):(W=f,Ae=ve);for(let oe=0;oe<t.length;oe++)s[oe]!=null&&(r==0?W=Ae=t[oe]:fe=xe=t[oe],g.moveTo(W,fe),g.lineTo(Ae,xe));g.stroke(),F==1&&g.translate(-I,-I)}function fr(t){let s=!0;return H.forEach((r,a)=>{if(!r.show)return;let f=D[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,on(!1));return}else r._show||(s=!1,r._show=!0,on(!1));let h=r.side,_=h%2,{min:T,max:C}=f,[z,I]=cr(a,T,C,_==0?ce:R);if(I==0)return;let W=f.distr==2,fe=r._splits=r.splits(n,a,T,C,z,I,W),Ae=f.distr==2?fe.map($=>Fe[$]):fe,xe=f.distr==2?Fe[fe[1]]-Fe[fe[0]]:z,ve=r._values=r.values(n,r.filter(n,Ae,a,I,xe),a,I,xe);r._rotate=h==2?r.rotate(n,ve,a,I):0;let oe=r._size;r._size=dl(r.size(n,ve,a,t)),oe!=null&&r._size!=oe&&(s=!1)}),s}function pr(t){let s=!0;return te.forEach((r,a)=>{let f=r(n,a,M,t);f!=B[a]&&(s=!1),B[a]=f}),s}function dr(){for(let t=0;t<H.length;t++){let s=H[t];if(!s.show||!s._show)continue;let r=s.side,a=r%2,f,h,_=s.stroke(n,t),T=r==0||r==3?-1:1,[C,z]=s._found;if(s.label!=null){let It=s.labelGap*T,ll=dt((s._lpos+It)*Ce);sn(s.labelFont[0],_,"center",r==2?Pn:Ci),g.save(),a==1?(f=h=0,g.translate(ll,dt(Je+vt/2)),g.rotate((r==3?-$n:$n)/2)):(f=dt(lt+ct/2),h=ll);let jl=ko(s.label)?s.label(n,t,C,z):s.label;g.fillText(jl,f,h),g.restore()}if(z==0)continue;let I=D[s.scale],W=a==0?ct:vt,fe=a==0?lt:Je,Ae=s._splits,xe=I.distr==2?Ae.map(It=>Fe[It]):Ae,ve=I.distr==2?Fe[Ae[1]]-Fe[Ae[0]]:C,oe=s.ticks,$=s.border,Ve=oe.show?oe.size:0,Xe=dt(Ve*Ce),kt=dt((s.alignTo==2?s._size-Ve-s.gap:s.gap)*Ce),Re=s._rotate*-$n/180,et=Z(s._pos*Ce),el=(Xe+kt)*T,Gt=et+el;h=a==0?Gt:0,f=a==1?Gt:0;let cl=s.font[0],ml=s.align==1?gn:s.align==2?xs:Re>0?gn:Re<0?xs:a==0?"center":r==3?xs:gn,Ml=Re||a==1?"middle":r==2?Pn:Ci;sn(cl,_,ml,Ml);let tl=s.font[1]*s.lineGap,fl=Ae.map(It=>Z(p(It,I,W,fe))),gl=s._values;for(let It=0;It<gl.length;It++){let ll=gl[It];if(ll!=null){a==0?f=fl[It]:h=fl[It],ll=""+ll;let jl=ll.indexOf(`
`)==-1?[ll]:ll.split(/\n/gm);for(let Nt=0;Nt<jl.length;Nt++){let ki=jl[Nt];Re?(g.save(),g.translate(f,h+Nt*tl),g.rotate(Re),g.fillText(ki,0,0),g.restore()):g.fillText(ki,f,h+Nt*tl)}}}oe.show&&fs(fl,oe.filter(n,xe,t,z,ve),a,r,et,Xe,ze(oe.width*Ce,3),oe.stroke(n,t),oe.dash,oe.cap);let Al=s.grid;Al.show&&fs(fl,Al.filter(n,xe,t,z,ve),a,a==0?2:1,a==0?Je:lt,a==0?vt:ct,ze(Al.width*Ce,3),Al.stroke(n,t),Al.dash,Al.cap),$.show&&fs([et],[1],a==0?1:0,a==0?1:2,a==1?Je:lt,a==1?vt:ct,ze($.width*Ce,3),$.stroke(n,t),$.dash,$.cap)}xt("drawAxes")}function on(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(o==1?(s.min=null,s.max=null):s.facets.forEach(a=>{a.min=null,a.max=null})))})}let Wn=!1,ps=!1,Mn=[];function hr(){ps=!1;for(let t=0;t<Mn.length;t++)xt(...Mn[t]);Mn.length=0}function rn(){Wn||(Aa(oi),Wn=!0)}function mr(t,s=!1){Wn=!0,ps=s,t(n),oi(),s&&Mn.length>0&&queueMicrotask(hr)}n.batch=mr;function oi(){if(bl&&(or(),bl=!1),Ft&&(Yl(),Ft=!1),zl){if(Be(N,gn,Te),Be(N,Pn,Ye),Be(N,On,ce),Be(N,zn,R),Be(E,gn,Te),Be(E,Pn,Ye),Be(E,On,ce),Be(E,zn,R),Be(w,On,Yt),Be(w,zn,rl),k.width=dt(Yt*Ce),k.height=dt(rl*Ce),H.forEach(({_el:t,_show:s,_size:r,_pos:a,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,_=f%2==1;Be(t,_?"left":"top",a-h),Be(t,_?"width":"height",r),Be(t,_?"top":"left",_?Ye:Te),Be(t,_?"height":"width",_?R:ce),Fs(t,$l)}else nl(t,$l)}),Mt=_t=al=Ue=Me=bt=Zt=ul=At=null,$e=1,Dn(!0),Te!=Qt||Ye!=$t||ce!=Et||R!=Ut){on(!1);let t=ce/Et,s=R/Ut;if(Ze&&!Xt&&Y.left>=0){Y.left*=t,Y.top*=s,an&&Cl(an,dt(Y.left),0,ce,R),un&&Cl(un,0,dt(Y.top),ce,R);for(let r=0;r<Ee.length;r++){let a=Ee[r];a!=null&&(pt[r]*=t,jt[r]*=s,Cl(a,dl(pt[r]),dl(jt[r]),ce,R))}}if(Ne.show&&!hl&&Ne.left>=0&&Ne.width>0){Ne.left*=t,Ne.width*=t,Ne.top*=s,Ne.height*=s;for(let r in ws)Be(pn,r,Ne[r])}Qt=Te,$t=Ye,Et=ce,Ut=R}xt("setSize"),zl=!1}Yt>0&&rl>0&&(g.clearRect(0,0,k.width,k.height),xt("drawClear"),ae.forEach(t=>t()),xt("draw")),Ne.show&&hl&&(Yn(Ne),hl=!1),Ze&&Xt&&(Kl(null,!0,!1),Xt=!1),se.show&&se.live&&ft&&(gs(),ft=!1),d||(d=!0,n.status=1,xt("ready")),wt=!1,Wn=!1}n.redraw=(t,s)=>{Ft=s||!1,t!==!1?Il(P,b.min,b.max):rn()};function ds(t,s){let r=D[t];if(r.from==null){if(A==0){let a=r.range(n,s.min,s.max,t);s.min=a[0],s.max=a[1]}if(s.min>s.max){let a=s.min;s.min=s.max,s.max=a}if(A>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==P&&r.distr==2&&A>0&&(s.min=wl(s.min,l[0]),s.max=wl(s.max,l[0]),s.min==s.max&&s.max++),L[t]=s,bl=!0,rn()}}n.setScale=ds;let hs,ms,an,un,ri,ai,cn,fn,ui,ci,Ie,qe,Gl=!1;const Ct=Y.drag;let St=Ct.x,yt=Ct.y;Ze&&(Y.x&&(hs=pl($r,E)),Y.y&&(ms=pl(Xr,E)),b.ori==0?(an=hs,un=ms):(an=ms,un=hs),Ie=Y.left,qe=Y.top);const Ne=n.select=ut({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),pn=Ne.show?pl(Qr,Ne.over?E:N):null;function Yn(t,s){if(Ne.show){for(let r in t)Ne[r]=t[r],r in ws&&Be(pn,r,t[r]);s!==!1&&xt("setSelect")}}n.setSelect=Yn;function gr(t){if(y[t].show)De&&Fs(ye[t],$l);else if(De&&nl(ye[t],$l),Ze){let r=Qe?Ee[0]:Ee[t];r!=null&&Cl(r,-10,-10,ce,R)}}function Il(t,s,r){ds(t,{min:s,max:r})}function Tl(t,s,r,a){s.focus!=null&&Sr(t),s.show!=null&&y.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,gr(h),o==2?(Il(f.facets[0].scale,null,null),Il(f.facets[1].scale,null,null)):Il(f.scale,null,null),rn())}),r!==!1&&xt("setSeries",t,s),a&&Ln("setSeries",n,t,s)}n.setSeries=Tl;function vr(t,s){ut(re[t],s)}function wr(t,s){t.fill=_e(t.fill||null),t.dir=ke(t.dir,-1),s=s??re.length,re.splice(s,0,t)}function _r(t){t==null?re.length=0:re.splice(t,1)}n.addBand=wr,n.setBand=vr,n.delBand=_r;function br(t,s){y[t].alpha=s,Ze&&Ee[t]!=null&&(Ee[t].style.opacity=s),De&&ye[t]&&(ye[t].style.opacity=s)}let Ll,Nl,ql;const dn={focus:!0};function Sr(t){if(t!=ql){let s=t==null,r=Kt.alpha!=1;y.forEach((a,f)=>{if(o==1||f>0){let h=s||f==0||f==t;a._focus=s?null:h,r&&br(f,h?1:Kt.alpha)}}),ql=t,r&&rn()}}De&&xl&&Pe(Ri,me,t=>{Y._lock||(qt(t),ql!=null&&Tl(null,dn,!0,at.setSeries))});function El(t,s,r){let a=D[s];r&&(t=t/Ce-(a.ori==1?Ye:Te));let f=ce;a.ori==1&&(f=R,t=f-t),a.dir==-1&&(t=f-t);let h=a._min,_=a._max,T=t/f,C=h+(_-h)*T,z=a.distr;return z==3?_n(10,C):z==4?ga(C,a.asinh):z==100?a.bwd(C):C}function yr(t,s){let r=El(t,P,s);return wl(r,l[0],S,J)}n.valToIdx=t=>wl(t,l[0]),n.posToIdx=yr,n.posToVal=El,n.valToPos=(t,s,r)=>D[s].ori==0?c(t,D[s],r?ct:ce,r?lt:0):u(t,D[s],r?vt:R,r?Je:0),n.setCursor=(t,s,r)=>{Ie=t.left,qe=t.top,Kl(null,s,r)};function fi(t,s){Be(pn,gn,Ne.left=t),Be(pn,On,Ne.width=s)}function pi(t,s){Be(pn,Pn,Ne.top=t),Be(pn,zn,Ne.height=s)}let An=b.ori==0?fi:pi,Cn=b.ori==1?fi:pi;function xr(){if(De&&se.live)for(let t=o==2?1:0;t<y.length;t++){if(t==0&&We)continue;let s=se.values[t],r=0;for(let a in s)it[t][r++].firstChild.nodeValue=s[a]}}function gs(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,a)=>{de[a]=r}):ba(t.idx)||de.fill(t.idx),se.idx=de[0]),De&&se.live){for(let r=0;r<y.length;r++)(r>0||o==1&&!We)&&kr(r,de[r]);xr()}ft=!1,s!==!1&&xt("setLegend")}n.setLegend=gs;function kr(t,s){let r=y[t],a=t==0&&K==2?Fe:l[t],f;We?f=r.values(n,t,s)??ot:(f=r.value(n,s==null?null:a[s],t,s),f=f==null?ot:{_:f}),se.values[t]=f}function Kl(t,s,r){ui=Ie,ci=qe,[Ie,qe]=Y.move(n,Ie,qe),Y.left=Ie,Y.top=qe,Ze&&(an&&Cl(an,dt(Ie),0,ce,R),un&&Cl(un,0,dt(qe),ce,R));let a,f=S>J;Ll=Oe,Nl=null;let h=b.ori==0?ce:R,_=b.ori==1?ce:R;if(Ie<0||A==0||f){a=Y.idx=null;for(let T=0;T<y.length;T++){let C=Ee[T];C!=null&&Cl(C,-10,-10,ce,R)}xl&&Tl(null,dn,!0,t==null&&at.setSeries),se.live&&(de.fill(a),ft=!0)}else{let T,C,z;o==1&&(T=b.ori==0?Ie:qe,C=El(T,P),a=Y.idx=wl(C,l[0],S,J),z=O(l[0][a],b,h,0));let I=-10,W=-10,fe=0,Ae=0,xe=!0,ve="",oe="";for(let $=o==2?1:0;$<y.length;$++){let Ve=y[$],Xe=de[$],kt=Xe==null?null:o==1?l[$][Xe]:l[$][1][Xe],Re=Y.dataIdx(n,$,a,C),et=Re==null?null:o==1?l[$][Re]:l[$][1][Re];if(ft=ft||et!=kt||Re!=Xe,de[$]=Re,$>0&&Ve.show){let el=Re==null?-10:Re==a?z:O(o==1?l[0][Re]:l[$][0][Re],b,h,0),Gt=et==null?-10:j(et,o==1?D[Ve.scale]:D[Ve.facets[1].scale],_,0);if(xl&&et!=null){let cl=b.ori==1?Ie:qe,ml=ht(Kt.dist(n,$,Re,Gt,cl));if(ml<Ll){let Ml=Kt.bias;if(Ml!=0){let tl=El(cl,Ve.scale),fl=et>=0?1:-1,gl=tl>=0?1:-1;gl==fl&&(gl==1?Ml==1?et>=tl:et<=tl:Ml==1?et<=tl:et>=tl)&&(Ll=ml,Nl=$)}else Ll=ml,Nl=$}}if(ft||Qe){let cl,ml;b.ori==0?(cl=el,ml=Gt):(cl=Gt,ml=el);let Ml,tl,fl,gl,Al,It,ll=!0,jl=rt.bbox;if(jl!=null){ll=!1;let Nt=jl(n,$);fl=Nt.left,gl=Nt.top,Ml=Nt.width,tl=Nt.height}else fl=cl,gl=ml,Ml=tl=rt.size(n,$);if(It=rt.fill(n,$),Al=rt.stroke(n,$),Qe)$==Nl&&Ll<=Kt.prox&&(I=fl,W=gl,fe=Ml,Ae=tl,xe=ll,ve=It,oe=Al);else{let Nt=Ee[$];Nt!=null&&(pt[$]=fl,jt[$]=gl,Vi(Nt,Ml,tl,ll),Ii(Nt,It,Al),Cl(Nt,dl(fl),dl(gl),ce,R))}}}}if(Qe){let $=Kt.prox,Ve=ql==null?Ll<=$:Ll>$||Nl!=ql;if(ft||Ve){let Xe=Ee[0];Xe!=null&&(pt[0]=I,jt[0]=W,Vi(Xe,fe,Ae,xe),Ii(Xe,ve,oe),Cl(Xe,dl(I),dl(W),ce,R))}}}if(Ne.show&&Gl)if(t!=null){let[T,C]=at.scales,[z,I]=at.match,[W,fe]=t.cursor.sync.scales,Ae=t.cursor.drag;if(St=Ae._x,yt=Ae._y,St||yt){let{left:xe,top:ve,width:oe,height:$}=t.select,Ve=t.scales[W].ori,Xe=t.posToVal,kt,Re,et,el,Gt,cl=T!=null&&z(T,W),ml=C!=null&&I(C,fe);cl&&St?(Ve==0?(kt=xe,Re=oe):(kt=ve,Re=$),et=D[T],el=O(Xe(kt,W),et,h,0),Gt=O(Xe(kt+Re,W),et,h,0),An(_l(el,Gt),ht(Gt-el))):An(0,h),ml&&yt?(Ve==1?(kt=xe,Re=oe):(kt=ve,Re=$),et=D[C],el=j(Xe(kt,fe),et,_,0),Gt=j(Xe(kt+Re,fe),et,_,0),Cn(_l(el,Gt),ht(Gt-el))):Cn(0,_)}else _s()}else{let T=ht(ui-ri),C=ht(ci-ai);if(b.ori==1){let fe=T;T=C,C=fe}St=Ct.x&&T>=Ct.dist,yt=Ct.y&&C>=Ct.dist;let z=Ct.uni;z!=null?St&&yt&&(St=T>=z,yt=C>=z,!St&&!yt&&(C>T?yt=!0:St=!0)):Ct.x&&Ct.y&&(St||yt)&&(St=yt=!0);let I,W;St&&(b.ori==0?(I=cn,W=Ie):(I=fn,W=qe),An(_l(I,W),ht(W-I)),yt||Cn(0,_)),yt&&(b.ori==1?(I=cn,W=Ie):(I=fn,W=qe),Cn(_l(I,W),ht(W-I)),St||An(0,h)),!St&&!yt&&(An(0,0),Cn(0,0))}if(Ct._x=St,Ct._y=yt,t==null){if(r){if(xi!=null){let[T,C]=at.scales;at.values[0]=T!=null?El(b.ori==0?Ie:qe,T):null,at.values[1]=C!=null?El(b.ori==1?Ie:qe,C):null}Ln(ks,n,Ie,qe,ce,R,a)}if(xl){let T=r&&at.setSeries,C=Kt.prox;ql==null?Ll<=C&&Tl(Nl,dn,!0,T):Ll>C?Tl(null,dn,!0,T):Nl!=ql&&Tl(Nl,dn,!0,T)}}ft&&(se.idx=a,gs()),s!==!1&&xt("setCursor")}let Vl=null;Object.defineProperty(n,"rect",{get(){return Vl==null&&Dn(!1),Vl}});function Dn(t=!1){t?Vl=null:(Vl=E.getBoundingClientRect(),xt("syncRect",Vl))}function di(t,s,r,a,f,h,_){Y._lock||Gl&&t!=null&&t.movementX==0&&t.movementY==0||(vs(t,s,r,a,f,h,_,!1,t!=null),t!=null?Kl(null,!0,!0):Kl(s,!0,!1))}function vs(t,s,r,a,f,h,_,T,C){if(Vl==null&&Dn(!1),qt(t),t!=null)r=t.clientX-Vl.left,a=t.clientY-Vl.top;else{if(r<0||a<0){Ie=-10,qe=-10;return}let[z,I]=at.scales,W=s.cursor.sync,[fe,Ae]=W.values,[xe,ve]=W.scales,[oe,$]=at.match,Ve=s.axes[0].side%2==1,Xe=b.ori==0?ce:R,kt=b.ori==1?ce:R,Re=Ve?h:f,et=Ve?f:h,el=Ve?a:r,Gt=Ve?r:a;if(xe!=null?r=oe(z,xe)?p(fe,D[z],Xe,0):-10:r=Xe*(el/Re),ve!=null?a=$(I,ve)?p(Ae,D[I],kt,0):-10:a=kt*(Gt/et),b.ori==1){let cl=r;r=a,a=cl}}C&&(s==null||s.cursor.event.type==ks)&&((r<=1||r>=ce-1)&&(r=Jl(r,ce)),(a<=1||a>=R-1)&&(a=Jl(a,R))),T?(ri=r,ai=a,[cn,fn]=Y.move(n,r,a)):(Ie=r,qe=a)}const ws={width:0,height:0,left:0,top:0};function _s(){Yn(ws,!1)}let hi,mi,gi,vi;function wi(t,s,r,a,f,h,_){Gl=!0,St=yt=Ct._x=Ct._y=!1,vs(t,s,r,a,f,h,_,!0,!1),t!=null&&(Pe(Ts,Ps,_i,!1),Ln(Li,n,cn,fn,ce,R,null));let{left:T,top:C,width:z,height:I}=Ne;hi=T,mi=C,gi=z,vi=I}function _i(t,s,r,a,f,h,_){Gl=Ct._x=Ct._y=!1,vs(t,s,r,a,f,h,_,!1,!0);let{left:T,top:C,width:z,height:I}=Ne,W=z>0||I>0,fe=hi!=T||mi!=C||gi!=z||vi!=I;if(W&&fe&&Yn(Ne),Ct.setScale&&W&&fe){let Ae=T,xe=z,ve=C,oe=I;if(b.ori==1&&(Ae=C,xe=I,ve=T,oe=z),St&&Il(P,El(Ae,P),El(Ae+xe,P)),yt)for(let $ in D){let Ve=D[$];$!=P&&Ve.from==null&&Ve.min!=Oe&&Il($,El(ve+oe,$),El(ve,$))}_s()}else Y.lock&&(Y._lock=!Y._lock,Kl(s,!0,t!=null));t!=null&&(Wt(Ts,Ps),Ln(Ts,n,Ie,qe,ce,R,null))}function Tr(t,s,r,a,f,h,_){if(Y._lock)return;qt(t);let T=Gl;if(Gl){let C=!0,z=!0,I=10,W,fe;b.ori==0?(W=St,fe=yt):(W=yt,fe=St),W&&fe&&(C=Ie<=I||Ie>=ce-I,z=qe<=I||qe>=R-I),W&&C&&(Ie=Ie<cn?0:ce),fe&&z&&(qe=qe<fn?0:R),Kl(null,!0,!0),Gl=!1}Ie=-10,qe=-10,de.fill(null),Kl(null,!0,!0),T&&(Gl=T)}function bi(t,s,r,a,f,h,_){Y._lock||(qt(t),zt(),_s(),t!=null&&Ln(Fi,n,Ie,qe,ce,R,null))}function Si(){H.forEach(zu),Sl(n.width,n.height,!0)}Xl(Xn,wn,Si);const hn={};hn.mousedown=wi,hn.mousemove=di,hn.mouseup=_i,hn.dblclick=bi,hn.setSeries=(t,s,r,a)=>{let f=at.match[2];r=f(n,s,r),r!=-1&&Tl(r,a,!0,!1)},Ze&&(Pe(Li,E,wi),Pe(ks,E,di),Pe(Pi,E,t=>{qt(t),Dn(!1)}),Pe(Ri,E,Tr),Pe(Fi,E,bi),Vs.add(n),n.syncRect=Dn);const Un=n.hooks=e.hooks||{};function xt(t,s,r){ps?Mn.push([t,s,r]):t in Un&&Un[t].forEach(a=>{a.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Un[s]=(Un[s]||[]).concat(t.hooks[s])});const yi=(t,s,r)=>r,at=ut({key:null,setSeries:!1,filters:{pub:Ui,sub:Ui},scales:[P,y[1]?y[1].scale:null],match:[qi,qi,yi],values:[null,null]},Y.sync);at.match.length==2&&at.match.push(yi),Y.sync=at;const xi=at.key,bs=jo(xi);function Ln(t,s,r,a,f,h,_){at.filters.pub(t,s,r,a,f,h,_)&&bs.pub(t,s,r,a,f,h,_)}bs.sub(n);function Er(t,s,r,a,f,h,_){at.filters.sub(t,s,r,a,f,h,_)&&hn[t](null,s,r,a,f,h,_)}n.pub=Er;function Mr(){bs.unsub(n),Vs.delete(n),Rt.clear(),Os(Xn,wn,Si),m.remove(),me?.remove(),xt("destroy")}n.destroy=Mr;function Ss(){xt("init",e,l),Dt(l||e.data,!1),L[P]?ds(P,L[P]):zt(),hl=Ne.show&&(Ne.width>0||Ne.height>0),Xt=ft=!0,Sl(e.width,e.height)}return y.forEach(Ot),H.forEach(U),i?i instanceof HTMLElement?(i.appendChild(m),Ss()):i(n,Ss):Ss(),n}st.assign=ut;st.fmtNum=Ks;st.rangeNum=es;st.rangeLog=ns;st.rangeAsinh=Us;st.orient=tn;st.pxRatio=Ce;st.join=Ma;st.fmtDate=Js,st.tzDate=Ia;st.sync=jo;{st.addGap=bu,st.clipGaps=os;let e=st.paths={points:er};e.linear=lr,e.stepped=xu,e.bars=ku,e.spline=Eu}var Gu=Pt('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Iu=Pt('<span class="estimated-badge svelte-3wi8ix">est</span>'),Nu=Pt('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),Vu=Pt('<span class="estimated-badge svelte-3wi8ix">est</span>'),Hu=Pt("<span> </span> <!>",1),Bu=Pt('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),Wu=Pt('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),Yu=Pt('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function Uu(e,l){go(l,!0);const i=.5,n=1.2,o=0,c=100;function u(b,K){const O=[...b].sort((G,Ge)=>G-Ge),j=K/100*(O.length-1),L=Math.floor(j),ie=Math.ceil(j);return L===ie?O[L]:O[L]+(O[ie]-O[L])*(j-L)}let p=Zn(l,"trend",3,null),d=Ke(!1),m=Ke(""),k=Ke(null),g=Rl(()=>Qn.config.temp_units==="C"),w=Rl(Vr),N=Rl(_o),E=Rl(()=>{if(l.readings.length===0)return null;const b=l.readings.filter(ge=>ge.status!=="invalid");if(b.length===0)return null;const K=[...b].sort((ge,tt)=>new Date(ge.timestamp).getTime()-new Date(tt.timestamp).getTime()),O=K[0],j=K[K.length-1],L=K.map(ge=>ge.sg_calibrated??ge.sg_raw).filter(ge=>ge!==null&&ge>=i&&ge<=n),ie=K.map(ge=>ge.temp_calibrated??ge.temp_raw).filter(ge=>ge!==null&&ge>=o&&ge<=c);if(L.length===0)return null;const G=L[L.length-1],Ge=L[0],he=u(L,95),ue=u(L,5),de=new Date(O.timestamp).getTime(),se=new Date(j.timestamp).getTime(),De=(se-de)/(1e3*60*60*24),Ze=De>0?(G-Ge)/De:0;let Se=null,me=null,gt=null,je=null;if(ie.length>0){const ge=ie[ie.length-1],tt=ie.reduce((Pe,Wt)=>Pe+Wt,0)/ie.length,Bt=u(ie,95),Rt=u(ie,5);Se=v(g)?ge:ge*9/5+32,me=v(g)?tt:tt*9/5+32,gt=v(g)?Bt:Bt*9/5+32,je=v(g)?Rt:Rt*9/5+32}let ye=0;const it=.001;for(let ge=L.length-2;ge>=0;ge--)if(Math.abs(L[ge]-G)>it){const tt=new Date(K[ge+1].timestamp).getTime();ye=(se-tt)/(1e3*60*60*24);break}let Tt=null,We=null;const ot=l.originalGravity??he,Ht=l.originalGravity===null;return ot>1&&ot>G&&(Tt=(ot-G)/(ot-1)*100,We=(ot-G)*131.25),{currentSg:G,firstSg:Ge,highSg:he,lowSg:ue,currentTemp:Se,avgTemp:me,highTemp:gt,lowTemp:je,fermRate:Ze,durationDays:De,daysAtCurrentSg:ye,apparentAttenuation:Tt,abv:We,ogIsEstimated:Ht,effectiveOg:ot}});function F(){we(m,l.originalGravity?.toFixed(3)??"",!0),we(d,!0),setTimeout(()=>v(k)?.focus(),0)}function Z(){const b=v(m).trim();if(!b)l.onOgChange?.(null);else{const K=parseFloat(b);!isNaN(K)&&K>=.99&&K<=1.2&&l.onOgChange?.(K)}we(d,!1)}function ne(b){b.key==="Enter"?Z():b.key==="Escape"&&we(d,!1)}function y(b){return Fn(b)}function H(b){return`${b>=0?"+":""}${b.toFixed(4)}`}function D(b){return b<1?`${(b*24).toFixed(1)}h`:`${b.toFixed(1)}d`}function re(b){return b===null?"--":b.toFixed(1)}function P(b){return b===null?"--":`${b.toFixed(1)}%`}var pe=Ds(),ae=Jn(pe);{var Q=b=>{var K=Wu(),O=ee(K),j=ee(O),L=ee(j),ie=ee(L,!0);X(L);var G=le(L,2),Ge=le(ee(G),2),he=ee(Ge,!0);X(Ge),X(G);var ue=le(G,2),de=le(ee(ue),2),se=ee(de,!0);X(de),X(ue);var Y=le(ue,2),De=le(ee(Y),2),Ze=ee(De,!0);X(De),X(Y);var Se=le(Y,2),me=le(ee(Se),2),gt=ee(me,!0);X(me),X(Se),X(j);var je=le(j,2),ye=le(ee(je),2),it=le(ee(ye),2),Tt=ee(it,!0),We=le(Tt),ot=ee(We,!0);X(We),X(it),X(ye);var Ht=le(ye,2),ge=le(ee(Ht),2),tt=ee(ge,!0),Bt=le(tt),Rt=ee(Bt,!0);X(Bt),X(ge),X(Ht);var Pe=le(Ht,2),Wt=le(ee(Pe),2),Yt=ee(Wt,!0),rl=le(Yt),ce=ee(rl,!0);X(rl),X(Wt),X(Pe);var R=le(Pe,2),Te=le(ee(R),2),Ye=ee(Te,!0),Qt=le(Ye),$t=ee(Qt,!0);X(Qt),X(Te),X(R),X(je),X(O);var Et=le(O,2),Ut=ee(Et),lt=le(ee(Ut),2);let Je;var ct=ee(lt);X(lt),X(Ut);var vt=le(Ut,2),bl=le(ee(vt),2),zl=ee(bl,!0);X(bl),X(vt);var Ft=le(vt,2),Xt=le(ee(Ft),2),hl=ee(Xt,!0);X(Xt),X(Ft);var ft=le(Ft,2),Sl=le(ee(ft),2);{var Wl=Qe=>{var Ee=Gu();Lr(Ee),Ee.__keydown=ne,wo(Ee,pt=>we(k,pt),()=>v(k)),Ar("blur",Ee,Z),Hr(Ee,()=>v(m),pt=>we(m,pt)),nt(Qe,Ee)},ln=Qe=>{var Ee=Ds(),pt=Jn(Ee);{var jt=Ot=>{var Jt=Nu();Jt.__click=F;var x=ee(Jt);let M;var U=ee(x,!0);X(x);var V=le(x,2);{var te=B=>{var A=Iu();nt(B,A)};sl(V,B=>{v(E).ogIsEstimated&&B(te)})}Ls(2),X(Jt),Dl(B=>{Ql(Jt,"title",v(E).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),M=Pl(x,1,"stat-value svelte-3wi8ix",null,M,{estimated:v(E).ogIsEstimated}),He(U,B)},[()=>y(v(E).effectiveOg)]),nt(Ot,Jt)},kl=Ot=>{var Jt=Hu(),x=Jn(Jt);let M;var U=ee(x,!0);X(x);var V=le(x,2);{var te=B=>{var A=Vu();nt(B,A)};sl(V,B=>{v(E).ogIsEstimated&&B(te)})}Dl(B=>{M=Pl(x,1,"stat-value svelte-3wi8ix",null,M,{estimated:v(E).ogIsEstimated}),He(U,B)},[()=>y(v(E).effectiveOg)]),nt(Ot,Jt)};sl(pt,Ot=>{l.onOgChange?Ot(jt):Ot(kl,!1)},!0)}nt(Qe,Ee)};sl(Sl,Qe=>{l.onOgChange&&v(d)?Qe(Wl):Qe(ln,!1)})}X(ft);var Yl=le(ft,2),nn=le(ee(Yl),2),En=ee(nn,!0);X(nn),X(Yl);var yl=le(Yl,2),qt=le(ee(yl),2),rt=ee(qt,!0);X(qt),X(yl);var Kt=le(yl,2);{var xl=Qe=>{var Ee=Bu(),pt=le(ee(Ee),2),jt=ee(pt,!0);X(pt),Ls(2),X(Ee),Dl((kl,Ot)=>{Ql(Ee,"title",`Estimated time until target FG (R=${kl??""})`),He(jt,Ot)},[()=>p().r2.toFixed(2),()=>D(p().daysToFg)]),nt(Qe,Ee)};sl(Kt,Qe=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&Qe(xl)})}X(Et),X(K),Dl((Qe,Ee,pt,jt,kl,Ot,Jt,x,M,U,V,te,B)=>{He(ie,v(N)==="SG"?"Gravity":v(N)==="P"?"Plato":"Brix"),He(he,Qe),He(se,Ee),He(Ze,pt),He(gt,jt),He(Tt,kl),He(ot,v(w)),He(tt,Ot),He(Rt,v(w)),He(Yt,Jt),He(ce,v(w)),He(Ye,x),He($t,v(w)),Je=Pl(lt,1,"stat-value rate svelte-3wi8ix",null,Je,{fermenting:v(E).fermRate<0}),He(ct,`${M??""}/day`),He(zl,U),He(hl,V),He(En,te),He(rt,B)},[()=>y(v(E).currentSg),()=>y(v(E).firstSg),()=>y(v(E).highSg),()=>y(v(E).lowSg),()=>re(v(E).currentTemp),()=>re(v(E).avgTemp),()=>re(v(E).highTemp),()=>re(v(E).lowTemp),()=>H(v(E).fermRate),()=>D(v(E).durationDays),()=>D(v(E).daysAtCurrentSg),()=>P(v(E).apparentAttenuation),()=>P(v(E).abv)]),nt(b,K)},q=b=>{var K=Yu();nt(b,K)};sl(ae,b=>{v(E)?b(Q):b(q,!1)})}nt(e,pe),vo()}mo(["keydown","click"]);var qu=Pt('<button type="button"> </button>'),Ku=Pt("<option> </option>"),ju=Pt('<button type="button"><span class="legend-dot legend-dot-anomaly svelte-12kwequ"></span> <span> </span></button>'),Ju=Pt('<button type="button"><span class="legend-line legend-line-battery svelte-12kwequ"></span> <span>Battery</span></button>'),Zu=Pt('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),Qu=Pt('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),$u=Pt('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),Xu=Pt('<div class="chart-wrapper svelte-12kwequ" role="region" aria-label="Fermentation Chart"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot legend-dot-sg svelte-12kwequ"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <button type="button"><span class="legend-line legend-line-ambient svelte-12kwequ"></span> <span>Ambient</span></button> <button type="button"><span class="legend-line legend-line-chamber svelte-12kwequ"></span> <span>Chamber</span></button> <button type="button"><span class="legend-line legend-line-trend svelte-12kwequ"></span> <span>Trend</span></button> <!> <!></div></div></div> <div class="chart-container svelte-12kwequ" role="img" aria-label="Fermentation progress chart showing gravity and temperature over time"><span class="sr-only svelte-12kwequ">Interactive chart displaying fermentation data. <!></span> <!> <!></div> <!></div>');function dc(e,l){go(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let o=Rl(()=>Qn.config.smoothing_enabled),c=Rl(()=>Qn.config.smoothing_samples),u=Ke("UTC"),p=Ke(0),d=Ke(3),m=Zn(l,"deviceColor",3,"BLACK"),k=Zn(l,"originalGravity",3,null),g=Zn(l,"controlEvents",19,()=>[]),w=Rl(()=>Qn.config.temp_units==="C"),N=Rl(_o),E,F=null,Z=Ke(!0),ne=Ke(null),y=Ke(24),H=Ke(mn([])),D=Ke(mn([])),re=Ke(mn([])),P=Ke(null),pe=Ke(null),ae=Ke(!1);function Q(x,M=""){return typeof document>"u"?M:getComputedStyle(document.documentElement).getPropertyValue(x).trim()||M}let q=Ke(mn({sg:"#f59e0b",sgGlow:"rgba(245, 158, 11, 0.3)",textMuted:"#71717a",textSecondary:"#a1a1aa",grid:"rgba(255, 255, 255, 0.04)",ambient:"#22d3ee",chamber:"#a78bfa",trend:"rgba(245, 158, 11, 0.5)",anomaly:"#ef4444",battery:"#22c55e"}));function b(){return{RED:Q("--tilt-red","#f87171"),GREEN:Q("--tilt-green","#4ade80"),BLACK:Q("--tilt-black","#71717a"),PURPLE:Q("--tilt-purple","#a78bfa"),ORANGE:Q("--tilt-orange","#fb923c"),BLUE:Q("--tilt-blue","#60a5fa"),YELLOW:Q("--tilt-yellow","#facc15"),PINK:Q("--tilt-pink","#f472b6")}}function K(){we(q,{sg:Q("--chart-sg","#f59e0b"),sgGlow:Q("--chart-sg-glow","rgba(245, 158, 11, 0.3)"),textMuted:Q("--text-muted","#71717a"),textSecondary:Q("--text-secondary","#a1a1aa"),grid:Q("--chart-grid","rgba(255, 255, 255, 0.04)"),ambient:Q("--chart-ambient","#22d3ee"),chamber:Q("--chart-chamber","#a78bfa"),trend:Q("--chart-trend","rgba(245, 158, 11, 0.5)"),anomaly:Q("--chart-anomaly","#ef4444"),battery:Q("--chart-battery","#22c55e")},!0)}const O="brewsignal_chart_trend_enabled";let j=Ke(!0);const L="brewsignal_chart_ambient_enabled",ie="brewsignal_chart_chamber_enabled",G="brewsignal_chart_anomaly_enabled",Ge="brewsignal_chart_battery_enabled";let he=Ke(!0),ue=Ke(!0),de=Ke(!0),se=Ke(!0),Y=Ke(!1),De=Ke(mn([])),Ze=Ke(mn([]));function Se(x,M,U=1.01){const V=[];for(let Ue=0;Ue<x.length;Ue++)M[Ue]!==null&&V.push([x[Ue],M[Ue]]);if(V.length<10)return null;const te=V.length;let B=0,A=0,S=0,J=0;for(const[Ue,Me]of V)B+=Ue,A+=Me,S+=Ue*Me,J+=Ue*Ue;const be=te*J-B*B;if(Math.abs(be)<1e-10)return null;const Fe=(te*S-B*A)/be,wt=(A-Fe*B)/te,Dt=A/te;let zt=0,Mt=0;for(const[Ue,Me]of V){const bt=Fe*Ue+wt;zt+=(Me-bt)**2,Mt+=(Me-Dt)**2}const _t=Mt>0?1-zt/Mt:0;let al=null,At=null;if(Fe<0&&_t>.3){const Ue=x[x.length-1],Me=(U-wt)/Fe;Me>Ue&&(At=(Me-Ue)/(1440*60),At>0&&At<60?al=U:At=null)}return{slope:Fe,intercept:wt,r2:_t,predictedFg:al,daysToFg:At}}function me(x){const M=[];let U=null,V=null;for(const B of x){const A=We(B.timestamp);B.action==="heat_on"?U=A:B.action==="heat_off"&&U!==null?(M.push({type:"heating",startTime:U,endTime:A}),U=null):B.action==="cool_on"?V=A:B.action==="cool_off"&&V!==null&&(M.push({type:"cooling",startTime:V,endTime:A}),V=null)}const te=Date.now()/1e3;return U!==null&&M.push({type:"heating",startTime:U,endTime:te}),V!==null&&M.push({type:"cooling",startTime:V,endTime:te}),M}function gt(x,M){return x.map(U=>M.slope*U+M.intercept)}function je(x,M,U){const V=new Date(x*1e3);try{return U?V.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:M}):V.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:M})}catch(te){return console.warn("Invalid timezone:",M,te),U?V.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):V.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function ye(x,M,U){const V=b(),te=v(q).sg,B=V[m()]||v(q).textSecondary;return{width:x,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!0,width:8,stroke:(A,S)=>A.series[S].stroke,fill:(A,S)=>A.series[S].stroke}},hooks:{setCursor:[A=>{const S=A.cursor.idx;if(S==null)return;const J=A.root.querySelector(".u-legend");J&&(J.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`)}]},scales:{x:{time:!0},sg:{auto:!0,range:(A,S,J)=>{const be=(J-S)*.1||.005;return[S-be,J+be]}},temp:{auto:!0,range:(A,S,J)=>{const be=J-S,Fe=10;if(be<Fe){const Dt=(J+S)/2;return[Dt-Fe/2,Dt+Fe/2]}const wt=be*.1;return[S-wt,J+wt]}},battery:{auto:!1,range:[0,105]}},axes:[{stroke:v(q).textMuted,grid:{stroke:v(q).grid,width:1},ticks:{stroke:v(q).grid,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(A,S)=>S.map(J=>je(J,U,v(y)<=24))},{scale:"sg",stroke:te,grid:{stroke:v(q).grid,width:1},ticks:{stroke:v(q).grid,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(A,S)=>S.map(J=>Fn(J)),side:3},{scale:"temp",stroke:B,grid:{show:!1},ticks:{stroke:v(q).grid,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(A,S)=>S.map(J=>J.toFixed(0)+""),side:1}],series:[{value:(A,S)=>je(S,U,!1)+" "+je(S,U,!0)},{label:v(N)==="SG"?"Gravity":v(N)==="P"?"Plato":"Brix",scale:"sg",stroke:te,width:2,value:(A,S)=>S!==null?Fn(S):"--",fill:(A,S)=>{const J=A.ctx.createLinearGradient(0,A.bbox.top,0,A.bbox.top+A.bbox.height);return J.addColorStop(0,v(q).sgGlow),J.addColorStop(1,"transparent"),J},points:{show:!1},paths:st.paths.spline?.()},{label:"Wort",scale:"temp",stroke:B,width:1.5,dash:[4,4],value:(A,S)=>S!==null?S.toFixed(1)+"":"--",points:{show:!1},paths:st.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:v(q).ambient,width:1.5,dash:[2,4],value:(A,S)=>S!==null?S.toFixed(1)+"":"--",points:{show:!1},paths:st.paths.spline?.(),show:v(he)},{label:"Chamber",scale:"temp",stroke:v(q).chamber,width:1.5,dash:[4,2],value:(A,S)=>S!==null?S.toFixed(1)+"":"--",points:{show:!1},paths:st.paths.spline?.(),show:v(ue)},{label:"Trend",scale:"sg",stroke:v(q).trend,width:2,dash:[8,4],value:(A,S)=>S!==null?Fn(S):"--",points:{show:!1},show:v(j)},{label:"Anomaly",scale:"sg",stroke:v(q).anomaly,width:2,value:(A,S)=>S!==null?Fn(S)+" ":"--",points:{show:!0,size:10,fill:v(q).anomaly,stroke:"#ffffff",width:2},paths:()=>null,show:v(de)},{label:"Battery",scale:"battery",stroke:v(q).battery,width:1.5,dash:[2,2],value:(A,S)=>S!==null?S.toFixed(0)+"%":"--",points:{show:!1},paths:st.paths.spline?.(),show:v(se)}]}}function it(x,M){if(M<=1)return x;const U=[];for(let V=0;V<x.length;V++){const te=[],B=Math.floor(M/2);for(let A=Math.max(0,V-B);A<=Math.min(x.length-1,V+B);A++){const S=x[A];S!==null&&te.push(S)}te.length>0?U.push(te.reduce((A,S)=>A+S,0)/te.length):U.push(null)}return U}function Tt(x,M,U,V,te,B,A){if(x.length<=A)return[x,M,U,V,te,B];const S=Math.ceil(x.length/A),J=[],be=[],Fe=[],wt=[],Dt=[],zt=[];for(let Mt=0;Mt<x.length;Mt+=S){const _t=Math.min(Mt+S,x.length);let al=0,At=0,Ue=0,Me=0,bt=0,Zt=0,ul=0,$e=0,Ul=0,sn=0;for(let Lt=Mt;Lt<_t;Lt++)M[Lt]!==null&&(al+=M[Lt],At++),U[Lt]!==null&&(Ue+=U[Lt],Me++),V[Lt]!==null&&(bt+=V[Lt],Zt++),te[Lt]!==null&&(ul+=te[Lt],$e++),B[Lt]!==null&&(Ul+=B[Lt],sn++);J.push(x[Math.floor((Mt+_t-1)/2)]),be.push(At>0?al/At:null),Fe.push(Me>0?Ue/Me:null),wt.push(Zt>0?bt/Zt:null),Dt.push($e>0?ul/$e:null),zt.push(sn>0?Ul/sn:null)}return[J,be,Fe,wt,Dt,zt]}function We(x){return!x.endsWith("Z")&&!x.match(/[+-]\d{2}:\d{2}$/)&&(x=x+"Z"),new Date(x).getTime()/1e3}function ot(x,M,U){if(x.length===0||M.length===0)return M.map(()=>null);const V=[...x].sort((A,S)=>We(A.timestamp)-We(S.timestamp)),te=V.map(A=>We(A.timestamp)),B=V.map(A=>A.temperature===null?null:U?A.temperature:A.temperature*9/5+32);return M.map(A=>{let S=null,J=null;for(let be=0;be<te.length;be++)if(te[be]<=A&&(S={time:te[be],temp:B[be]}),te[be]>=A&&J===null){J={time:te[be],temp:B[be]};break}if(S&&J&&S.temp!==null&&J.temp!==null){if(S.time===J.time)return S.temp;const be=(A-S.time)/(J.time-S.time);return S.temp+be*(J.temp-S.temp)}return S!==null&&S.temp!==null?S.temp:J!==null&&J.temp!==null?J.temp:null})}function Ht(x,M,U,V){const te=[...x].reverse();let B=[],A=[],S=[],J=[],be=[];const Fe=[];let wt=!1;for(const Me of te){const bt=We(Me.timestamp),Zt=Me.sg_calibrated??Me.sg_raw;if(B.push(bt),A.push(Zt),Me.is_anomaly&&Zt!==null){be.push(Zt);let $e=[];if(Me.anomaly_reasons)try{$e=JSON.parse(Me.anomaly_reasons)}catch{$e=Me.anomaly_reasons.split(",").map(Ul=>Ul.trim())}Fe.push({timestamp:bt,sg:Zt,reasons:$e})}else be.push(null);const ul=Me.temp_calibrated??Me.temp_raw;ul!==null?S.push(V?ul:ul*9/5+32):S.push(null),Me.battery_percent!==null&&Me.battery_percent!==void 0?(J.push(Me.battery_percent),wt=!0):J.push(null)}we(Y,wt,!0),we(De,Fe,!0);let Dt=ot(M,B,V),zt=ot(U,B,V);v(o)&&v(c)>1&&(A=it(A,v(c)),S=it(S,v(c)),Dt=it(Dt,v(c)),zt=it(zt,v(c)));const Mt=500,_t=[...B],al=[...be];[B,A,S,Dt,zt,J]=Tt(B,A,S,Dt,zt,J,Mt),be=B.map(Me=>{for(let bt=0;bt<_t.length;bt++)if(al[bt]!==null){const Zt=Math.abs(_t[bt]-Me),ul=(_t[_t.length-1]-_t[0])/Mt;if(Zt<=ul)return al[bt]}return null});const At=Se(B,A);we(P,At,!0);const Ue=At?gt(B,At):B.map(()=>null);return[B,A,S,Dt,zt,Ue,be,J]}const ge=3e4;async function tt(x=!1){const U=Date.now()-v(p);if(!(!x&&v(p)>0&&U<ge)){we(Z,!0),we(ne,null);try{if(!v(pe)){const S=await zr(l.batchId);we(pe,S.device_id??null,!0),we(ae,["completed","conditioning","archived"].includes(S.status),!0),v(ae)&&v(y)!==0&&we(y,0)}const V=v(y)>0?v(y):void 0,[te,B,A]=await Promise.all([Gr(l.batchId,V),Ir(V??720).catch(()=>[]),Nr(V??720).catch(()=>[])]);we(H,te,!0),we(D,B,!0),we(re,A,!0),Bt()}catch(V){we(ne,V instanceof Error?V.message:"Failed to load data",!0)}finally{we(p,Date.now(),!0),we(Z,!1)}}}function Bt(){if(!E||v(H).length===0)return;const x=Ht(v(H),v(D),v(re),v(w)),M=ye(E.clientWidth,v(w),v(u));F&&F.destroy(),F=new st(M,x,E)}function Rt(){F&&E&&F.setSize({width:E.clientWidth,height:220})}let Pe=null;function Wt(){if(Pe&&(clearInterval(Pe),Pe=null),v(d)>0){const x=v(d)*60*1e3;Pe=setInterval(()=>{v(Z)||tt(!1)},x)}}Cr(async()=>{K();const x=localStorage.getItem(i);if(x!==null){const A=parseInt(x,10);Number.isNaN(A)||we(d,A,!0)}const M=localStorage.getItem(O);M!==null&&we(j,M==="true");const U=localStorage.getItem(L);U!==null&&we(he,U==="true");const V=localStorage.getItem(ie);V!==null&&we(ue,V==="true");const te=localStorage.getItem(G);te!==null&&we(de,te==="true");const B=localStorage.getItem(Ge);B!==null&&we(se,B==="true");try{const A=await fetch("/api/system/timezone");if(A.ok){const S=await A.json();we(u,S.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await tt(!0),window.addEventListener("resize",Rt),Wt()}),Dr(()=>{F?.destroy(),window.removeEventListener("resize",Rt),Pe&&clearInterval(Pe)}),ys(()=>{g()&&g().length>0?we(Ze,me(g()),!0):we(Ze,[],!0)}),ys(()=>{v(w)!==void 0&&v(H).length>0&&E&&Bt()}),ys(()=>{v(o),v(c),v(H).length>0&&E&&Bt()});function Yt(x){const M=Number(x.target.value);we(d,M,!0),localStorage.setItem(i,String(M)),Wt(),tt(!0)}function rl(){we(j,!v(j)),localStorage.setItem(O,String(v(j))),F&&F.setSeries(5,{show:v(j)})}function ce(){we(he,!v(he)),localStorage.setItem(L,String(v(he))),F&&F.setSeries(3,{show:v(he)})}function R(){we(ue,!v(ue)),localStorage.setItem(ie,String(v(ue))),F&&F.setSeries(4,{show:v(ue)})}function Te(){we(de,!v(de)),localStorage.setItem(G,String(v(de))),F&&F.setSeries(6,{show:v(de)})}function Ye(){we(se,!v(se)),localStorage.setItem(Ge,String(v(se))),F&&F.setSeries(7,{show:v(se)})}var Qt=Xu(),$t=ee(Qt),Et=ee($t);Ei(Et,21,()=>Or,Mi,(x,M)=>{var U=qu();let V;U.__click=()=>{v(y)!==v(M).hours&&(we(y,v(M).hours,!0),tt(!0))};var te=ee(U,!0);X(U),Dl(()=>{V=Pl(U,1,"range-btn svelte-12kwequ",null,V,{active:v(y)===v(M).hours}),He(te,v(M).label)}),nt(x,U)}),X(Et);var Ut=le(Et,2),lt=ee(Ut),Je=le(ee(lt),2);Je.__change=Yt,Ei(Je,21,()=>n,Mi,(x,M)=>{var U=Ku(),V=ee(U,!0);X(U);var te={};Dl(()=>{He(V,v(M).label),te!==(te=v(M).value)&&(U.value=(U.__value=v(M).value)??"")}),nt(x,U)}),X(Je);var ct;Rr(Je),X(lt);var vt=le(lt,2),bl=le(ee(vt),2),zl=ee(bl);Ls(2),X(bl);var Ft=le(bl,2);let Xt;Ft.__click=ce;var hl=le(Ft,2);let ft;hl.__click=R;var Sl=le(hl,2);let Wl;Sl.__click=rl;var ln=le(Sl,2);{var Yl=x=>{var M=ju();let U;M.__click=Te;var V=le(ee(M),2),te=ee(V);X(V),X(M),Dl(()=>{U=Pl(M,1,"legend-item legend-toggle anomaly-toggle svelte-12kwequ",null,U,{"legend-disabled":!v(de)}),Ql(M,"title",v(de)?"Hide anomaly markers":"Show anomaly markers"),He(te,`Anomalies (${v(De).length??""})`)}),nt(x,M)};sl(ln,x=>{v(De).length>0&&x(Yl)})}var nn=le(ln,2);{var En=x=>{var M=Ju();let U;M.__click=Ye,Dl(()=>{U=Pl(M,1,"legend-item legend-toggle svelte-12kwequ",null,U,{"legend-disabled":!v(se)}),Ql(M,"title",v(se)?"Hide battery level":"Show battery level")}),nt(x,M)};sl(nn,x=>{v(Y)&&x(En)})}X(vt),X(Ut),X($t);var yl=le($t,2),qt=ee(yl),rt=le(ee(qt));{var Kt=x=>{var M=Ti();Dl(()=>He(M,`Showing ${v(H).length??""} data points.`)),nt(x,M)},xl=x=>{var M=Ti("No data available yet.");nt(x,M)};sl(rt,x=>{v(H).length>0?x(Kt):x(xl,!1)})}X(qt);var Qe=le(qt,2);{var Ee=x=>{var M=Zu();nt(x,M)};sl(Qe,x=>{v(Z)&&x(Ee)})}var pt=le(Qe,2);{var jt=x=>{var M=Qu(),U=le(ee(M),2);U.__click=()=>tt(!0),X(M),nt(x,M)},kl=x=>{var M=Ds(),U=Jn(M);{var V=te=>{var B=$u();nt(te,B)};sl(U,te=>{v(H).length===0&&te(V)},!0)}nt(x,M)};sl(pt,x=>{v(ne)?x(jt):x(kl,!1)})}X(yl),wo(yl,x=>E=x,()=>E);var Ot=le(yl,2);{var Jt=x=>{{let M=Rl(()=>v(P)?{predictedFg:v(P).predictedFg,daysToFg:v(P).daysToFg,r2:v(P).r2}:null);Uu(x,{get readings(){return v(H)},get originalGravity(){return k()},get trend(){return v(M)}})}};sl(Ot,x=>{v(H).length>0&&x(Jt)})}X(Qt),Dl(x=>{ct!==(ct=v(d))&&(Je.value=(Je.__value=v(d))??"",Fr(Je,v(d))),Pr(zl,`background: ${v(q).textSecondary??""}; background: var(--tilt-${x??""}, ${v(q).textSecondary??""});`),Xt=Pl(Ft,1,"legend-item legend-toggle svelte-12kwequ",null,Xt,{"legend-disabled":!v(he)}),Ql(Ft,"title",v(he)?"Hide ambient temp":"Show ambient temp"),ft=Pl(hl,1,"legend-item legend-toggle svelte-12kwequ",null,ft,{"legend-disabled":!v(ue)}),Ql(hl,"title",v(ue)?"Hide chamber temp":"Show chamber temp"),Wl=Pl(Sl,1,"legend-item legend-toggle svelte-12kwequ",null,Wl,{"legend-disabled":!v(j)}),Ql(Sl,"title",v(j)?"Hide trend line":"Show trend line")},[()=>m().toLowerCase()]),nt(e,Qt),vo()}mo(["click","change"]);export{dc as F};
