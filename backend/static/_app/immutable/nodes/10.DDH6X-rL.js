import{c as ie,a as n,f as c,s as d,d as Je}from"../chunks/LrF3SKCG.js";import{ah as pe,at as le,aj as ue,ak as s,al as a,c as e,an as t,ar as g,as as Qe,ai as oe,av as Xe,ao as Ze,aF as et,s as D,aq as ve,am as tt}from"../chunks/OlDeM-au.js";import{i as p}from"../chunks/BY7INp_b.js";import{h as at}from"../chunks/C70lBF8F.js";import{s as rt,a as st}from"../chunks/DL_-oZVs.js";import{g as De}from"../chunks/CLbO8-5e.js";import{p as vt}from"../chunks/Dxdbd6IW.js";import{m as lt,n as it}from"../chunks/D2Emw0fV.js";import{e as ce,i as _e}from"../chunks/C8cJb_ce.js";const ot=!1,Yt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ot},Symbol.toStringTag,{value:"Module"}));var nt=c('<span class="origin svelte-2e1ash"> </span>'),dt=c('<div class="supplier svelte-2e1ash"> </div>'),ct=c('<tr class="svelte-2e1ash"><td class="name svelte-2e1ash"> <!> <!></td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td></tr>'),_t=c('<div class="fermentables svelte-2e1ash"><h3 class="svelte-2e1ash">Grain Bill</h3> <table class="svelte-2e1ash"><thead><tr><th class="svelte-2e1ash">Fermentable</th><th class="svelte-2e1ash">Type</th><th class="svelte-2e1ash">Amount</th><th class="svelte-2e1ash">%</th><th class="svelte-2e1ash">Color</th></tr></thead><tbody class="svelte-2e1ash"></tbody><tfoot class="svelte-2e1ash"><tr><td colspan="2" class="svelte-2e1ash"><strong>Total</strong></td><td class="svelte-2e1ash"><strong> </strong></td><td class="svelte-2e1ash">100%</td><td class="svelte-2e1ash">--</td></tr></tfoot></table></div>');function pt(te,L){pe(L,!0);let W=oe(()=>L.fermentables.reduce((u,i)=>u+(i.amount_kg||0),0));function ae(u){return!u||!e(W)?"--":(u/e(W)*100).toFixed(1)+"%"}function Z(u){return u==null?"--":u.toFixed(2)+" kg"}function v(u){return u==null?"--":u.toFixed(0)+"°L"}var K=ie(),R=le(K);{var H=u=>{var i=_t(),y=s(a(i),2),h=s(a(y));ce(h,21,()=>L.fermentables,_e,(I,k)=>{var _=ct(),m=a(_),C=a(m),A=s(C);{var B=$=>{var w=nt(),E=a(w);t(w),g(()=>d(E,`(${e(k).origin??""})`)),n($,w)};p(A,$=>{e(k).origin&&$(B)})}var F=s(A,2);{var b=$=>{var w=dt(),E=a(w,!0);t(w),g(()=>d(E,e(k).supplier)),n($,w)};p(F,$=>{e(k).supplier&&$(b)})}t(m);var x=s(m),P=a(x,!0);t(x);var M=s(x),G=a(M,!0);t(M);var N=s(M),U=a(N,!0);t(N);var V=s(N),Y=a(V,!0);t(V),t(_),g(($,w,E)=>{d(C,`${e(k).name??""} `),d(P,e(k).type||"--"),d(G,$),d(U,w),d(Y,E)},[()=>Z(e(k).amount_kg),()=>ae(e(k).amount_kg),()=>v(e(k).color_lovibond)]),n(I,_)}),t(h);var O=s(h),S=a(O),q=s(a(S)),ee=a(q),re=a(ee,!0);t(ee),t(q),Qe(2),t(S),t(O),t(y),t(i),g(I=>d(re,I),[()=>Z(e(W))]),n(u,i)};p(R,u=>{L.fermentables.length>0&&u(H)})}n(te,K),ue()}var ut=c('<div class="hop-type svelte-1iyzc0d"> </div>'),gt=c('<tr class="svelte-1iyzc0d"><td class="hop-name svelte-1iyzc0d"> <!></td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td></tr>'),yt=c('<div class="hop-group svelte-1iyzc0d"><h4 class="svelte-1iyzc0d"> </h4> <table class="svelte-1iyzc0d"><thead><tr><th class="svelte-1iyzc0d">Hop</th><th class="svelte-1iyzc0d">Amount</th><th class="svelte-1iyzc0d">AA%</th><th class="svelte-1iyzc0d">Time</th><th class="svelte-1iyzc0d">Form</th></tr></thead><tbody class="svelte-1iyzc0d"></tbody></table></div>'),ht=c('<div class="hop-schedule svelte-1iyzc0d"><h3 class="svelte-1iyzc0d">Hop Schedule</h3> <!></div>');function ft(te,L){pe(L,!0);let W=oe(()=>{const i={};for(const y of L.hops){const h=y.timing?.use||"Other";i[h]||(i[h]=[]),i[h].push(y)}for(const[y,h]of Object.entries(i))(y==="add_to_boil"||y==="Boil")&&h.sort((O,S)=>(S.timing?.duration?.value||0)-(O.timing?.duration?.value||0));return i});function ae(i){return i==null?"--":i.toFixed(0)+"g"}function Z(i){return i==null?"--":i.toFixed(1)+"%"}function v(i){if(!i?.duration?.value)return"--";const y=i.duration.value,h=i.use;return h==="dry_hop"||h==="add_to_fermentation"?y===0?"At packaging":`Day ${y}`:`${y} ${i.duration.unit||"min"}`}function K(i){return i?{add_to_boil:"Boil",dry_hop:"Dry Hop",add_to_fermentation:"Fermentation",whirlpool:"Whirlpool",first_wort:"First Wort",mash:"Mash",aroma:"Aroma"}[i]||i.replace(/_/g," ").replace(/\b\w/g,h=>h.toUpperCase()):"Other"}var R=ie(),H=le(R);{var u=i=>{var y=ht(),h=s(a(y),2);ce(h,17,()=>Object.entries(e(W)),_e,(O,S)=>{var q=oe(()=>Xe(e(S),2));let ee=()=>e(q)[0],re=()=>e(q)[1];var I=yt(),k=a(I),_=a(k,!0);t(k);var m=s(k,2),C=s(a(m));ce(C,21,re,_e,(A,B)=>{var F=gt(),b=a(F),x=a(b),P=s(x);{var M=J=>{var Q=ut(),X=a(Q,!0);t(Q),g(()=>d(X,e(B).origin)),n(J,Q)};p(P,J=>{e(B).origin&&J(M)})}t(b);var G=s(b),N=a(G,!0);t(G);var U=s(G),V=a(U,!0);t(U);var Y=s(U),$=a(Y,!0);t(Y);var w=s(Y),E=a(w,!0);t(w),t(F),g((J,Q,X)=>{d(x,`${e(B).name??""} `),d(N,J),d(V,Q),d($,X),d(E,e(B).form||"--")},[()=>ae(e(B).amount_grams),()=>Z(e(B).alpha_acid_percent),()=>v(e(B).timing)]),n(A,F)}),t(C),t(m),t(I),g(A=>d(_,A),[()=>K(ee())]),n(O,I)}),t(y),n(i,y)};p(H,i=>{L.hops.length>0&&i(u)})}n(te,R),ue()}var mt=c('<div class="loading-state svelte-1r2e3yg"><div class="spinner svelte-1r2e3yg"></div> <p>Loading recipe...</p></div>'),bt=c('<div class="error-state svelte-1r2e3yg"><p class="error-message svelte-1r2e3yg"> </p></div>'),xt=c('<p class="recipe-author svelte-1r2e3yg"> </p>'),kt=c('<p class="recipe-type svelte-1r2e3yg"> </p>'),Ft=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Original Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),zt=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Final Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),$t=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">ABV</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),wt=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Attenuation</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Bt=c('<p class="yeast-name svelte-1r2e3yg"> </p>'),At=c('<p class="yeast-lab svelte-1r2e3yg"> </p>'),Dt=c('<p class="yeast-temp svelte-1r2e3yg"> </p>'),Ct=c('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Yeast</h2> <div class="yeast-info svelte-1r2e3yg"><!> <!> <!></div></div>'),Mt=c('<div class="section svelte-1r2e3yg"><!></div>'),Tt=c('<div class="section svelte-1r2e3yg"><!></div>'),jt=c('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">Batch Size</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),Lt=c('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">IBU</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),Rt=c('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">SRM</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),St=c('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Notes</h2> <p class="notes svelte-1r2e3yg"> </p></div>'),Ht=c('<div class="recipe-container svelte-1r2e3yg"><div class="recipe-header svelte-1r2e3yg"><div class="header-left svelte-1r2e3yg"><h1 class="recipe-title svelte-1r2e3yg"> </h1> <!> <!></div> <button type="button" class="delete-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Delete</button></div> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Fermentation Parameters</h2> <div class="param-grid svelte-1r2e3yg"><!> <!> <!> <!></div></div> <!> <!> <!> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Batch Details</h2> <div class="details-grid svelte-1r2e3yg"><!> <!> <!></div></div> <!> <div class="section svelte-1r2e3yg"><p class="created-date svelte-1r2e3yg"> </p></div> <div class="actions svelte-1r2e3yg"><button type="button" class="brew-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Brew This Recipe</button></div></div>'),Ot=c('<div class="modal-overlay svelte-1r2e3yg"><div class="modal svelte-1r2e3yg"><h2 class="modal-title svelte-1r2e3yg">Delete Recipe?</h2> <p class="modal-text svelte-1r2e3yg"> </p> <div class="modal-actions svelte-1r2e3yg"><button type="button" class="modal-btn cancel svelte-1r2e3yg">Cancel</button> <button type="button" class="modal-btn delete svelte-1r2e3yg"> </button></div></div></div>'),It=c('<div class="page-container svelte-1r2e3yg"><div class="back-link svelte-1r2e3yg"><a href="/recipes" class="back-btn svelte-1r2e3yg"><svg class="back-icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <!></div> <!>',1);function Jt(te,L){pe(L,!0);const W=()=>st(vt,"$page",ae),[ae,Z]=rt();let v=ve(null),K=ve(!0),R=ve(null),H=ve(!1),u=ve(!1),i=oe(()=>{const _=parseInt(W().params.id||"",10);return isNaN(_)||_<=0?null:_});Ze(async()=>{if(!e(i)){D(R,"Invalid recipe ID"),D(K,!1);return}try{D(v,await lt(e(i)),!0)}catch(_){D(R,_ instanceof Error?_.message:"Failed to load recipe",!0)}finally{D(K,!1)}});async function y(){if(e(v)){D(u,!0);try{await it(e(v).id),De("/recipes")}catch(_){D(R,_ instanceof Error?_.message:"Failed to delete recipe",!0),D(u,!1),D(H,!1)}}}function h(){e(v)&&De(`/batches/new?recipe_id=${e(v).id}`)}var O=It();at("1r2e3yg",_=>{et(()=>{tt.title=`${(e(v)?.name||"Recipe")??""} | BrewSignal`})});var S=le(O),q=s(a(S),2);{var ee=_=>{var m=mt();n(_,m)},re=_=>{var m=ie(),C=le(m);{var A=F=>{var b=bt(),x=a(b),P=a(x,!0);t(x),t(b),g(()=>d(P,e(R))),n(F,b)},B=F=>{var b=ie(),x=le(b);{var P=M=>{var G=Ht(),N=a(G),U=a(N),V=a(U),Y=a(V,!0);t(V);var $=s(V,2);{var w=r=>{var l=xt(),o=a(l);t(l),g(()=>d(o,`by ${e(v).author??""}`)),n(r,l)};p($,r=>{e(v).author&&r(w)})}var E=s($,2);{var J=r=>{var l=kt(),o=a(l,!0);t(l),g(()=>d(o,e(v).type)),n(r,l)};p(E,r=>{e(v).type&&r(J)})}t(U);var Q=s(U,2);Q.__click=()=>D(H,!0),t(N);var X=s(N,2),ge=s(a(X),2),ye=a(ge);{var Ce=r=>{var l=Ft(),o=s(a(l),2),f=a(o,!0);t(o),t(l),g(z=>d(f,z),[()=>e(v).og.toFixed(3)]),n(r,l)};p(ye,r=>{e(v).og&&r(Ce)})}var he=s(ye,2);{var Me=r=>{var l=zt(),o=s(a(l),2),f=a(o,!0);t(o),t(l),g(z=>d(f,z),[()=>e(v).fg.toFixed(3)]),n(r,l)};p(he,r=>{e(v).fg&&r(Me)})}var fe=s(he,2);{var Te=r=>{var l=$t(),o=s(a(l),2),f=a(o);t(o),t(l),g(z=>d(f,`${z??""}%`),[()=>(e(v).abv*100).toFixed(1)]),n(r,l)};p(fe,r=>{e(v).abv&&r(Te)})}var je=s(fe,2);{var Le=r=>{var l=wt(),o=s(a(l),2),f=a(o);t(o),t(l),g(z=>d(f,`${z??""}%`),[()=>(e(v).yeast_attenuation*100).toFixed(0)]),n(r,l)};p(je,r=>{e(v).yeast_attenuation&&r(Le)})}t(ge),t(X);var me=s(X,2);{var Re=r=>{var l=Ct(),o=s(a(l),2),f=a(o);{var z=T=>{var j=Bt(),se=a(j,!0);t(j),g(()=>d(se,e(v).yeast_name)),n(T,j)};p(f,T=>{e(v).yeast_name&&T(z)})}var Ae=s(f,2);{var Ke=T=>{var j=At(),se=a(j,!0);t(j),g(()=>d(se,e(v).yeast_lab)),n(T,j)};p(Ae,T=>{e(v).yeast_lab&&T(Ke)})}var Ve=s(Ae,2);{var We=T=>{var j=Dt(),se=a(j);t(j),g((qe,Ye)=>d(se,`Temperature: ${qe??""}-${Ye??""}°C`),[()=>e(v).yeast_temp_min.toFixed(0),()=>e(v).yeast_temp_max.toFixed(0)]),n(T,j)};p(Ve,T=>{e(v).yeast_temp_min!=null&&e(v).yeast_temp_max!=null&&T(We)})}t(o),t(l),n(r,l)};p(me,r=>{(e(v).yeast_name||e(v).yeast_temp_min||e(v).yeast_temp_max)&&r(Re)})}var be=s(me,2);{var Se=r=>{var l=Mt(),o=a(l);pt(o,{get fermentables(){return e(v).fermentables}}),t(l),n(r,l)};p(be,r=>{e(v).fermentables&&e(v).fermentables.length>0&&r(Se)})}var xe=s(be,2);{var He=r=>{var l=Tt(),o=a(l);ft(o,{get hops(){return e(v).hops}}),t(l),n(r,l)};p(xe,r=>{e(v).hops&&e(v).hops.length>0&&r(He)})}var ne=s(xe,2),ke=s(a(ne),2),Fe=a(ke);{var Oe=r=>{var l=jt(),o=s(a(l),2),f=a(o);t(o),t(l),g(z=>d(f,`${z??""} L`),[()=>e(v).batch_size_liters.toFixed(1)]),n(r,l)};p(Fe,r=>{e(v).batch_size_liters&&r(Oe)})}var ze=s(Fe,2);{var Ie=r=>{var l=Lt(),o=s(a(l),2),f=a(o,!0);t(o),t(l),g(z=>d(f,z),[()=>e(v).ibu.toFixed(0)]),n(r,l)};p(ze,r=>{e(v).ibu&&r(Ie)})}var Pe=s(ze,2);{var Ge=r=>{var l=Rt(),o=s(a(l),2),f=a(o,!0);t(o),t(l),g(z=>d(f,z),[()=>e(v).color_srm.toFixed(1)]),n(r,l)};p(Pe,r=>{e(v).color_srm&&r(Ge)})}t(ke),t(ne);var $e=s(ne,2);{var Ne=r=>{var l=St(),o=s(a(l),2),f=a(o,!0);t(o),t(l),g(()=>d(f,e(v).notes)),n(r,l)};p($e,r=>{e(v).notes&&r(Ne)})}var de=s($e,2),we=a(de),Ue=a(we);t(we),t(de);var Be=s(de,2),Ee=a(Be);Ee.__click=h,t(Be),t(G),g(r=>{d(Y,e(v).name),d(Ue,`Created ${r??""}`)},[()=>new Date(e(v).created_at).toLocaleDateString()]),n(M,G)};p(x,M=>{e(v)&&M(P)},!0)}n(F,b)};p(C,F=>{e(R)?F(A):F(B,!1)},!0)}n(_,m)};p(q,_=>{e(K)?_(ee):_(re,!1)})}t(S);var I=s(S,2);{var k=_=>{var m=Ot();m.__click=()=>D(H,!1);var C=a(m);C.__click=M=>M.stopPropagation();var A=s(a(C),2),B=a(A);t(A);var F=s(A,2),b=a(F);b.__click=()=>D(H,!1);var x=s(b,2);x.__click=y;var P=a(x,!0);t(x),t(F),t(C),t(m),g(()=>{d(B,`Are you sure you want to delete "${e(v)?.name??""}"? This cannot be undone.`),b.disabled=e(u),x.disabled=e(u),d(P,e(u)?"Deleting...":"Delete Recipe")}),n(_,m)};p(I,_=>{e(H)&&_(k)})}n(te,O),ue(),Z()}Je(["click"]);export{Jt as component,Yt as universal};
