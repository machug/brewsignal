import{c as ie,a as n,f as c,s as d,d as Je}from"../chunks/LrF3SKCG.js";import{ah as pe,at as le,aj as ue,ak as s,al as a,c as e,an as t,ar as y,as as Qe,ai as oe,av as Xe,ao as Ze,aF as et,s as A,aq as ve,am as tt}from"../chunks/OlDeM-au.js";import{i as p}from"../chunks/BY7INp_b.js";import{h as at}from"../chunks/C70lBF8F.js";import{s as rt,a as st}from"../chunks/DL_-oZVs.js";import{g as Ae}from"../chunks/CwHltxNN.js";import{p as vt}from"../chunks/CbplJDxp.js";import{m as lt,n as it}from"../chunks/D2Emw0fV.js";import{e as ce,i as _e}from"../chunks/C8cJb_ce.js";const ot=!1,Yt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ot},Symbol.toStringTag,{value:"Module"}));var nt=c('<span class="origin svelte-2e1ash"> </span>'),dt=c('<div class="supplier svelte-2e1ash"> </div>'),ct=c('<tr class="svelte-2e1ash"><td class="name svelte-2e1ash"> <!> <!></td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td></tr>'),_t=c('<div class="fermentables svelte-2e1ash"><h3 class="svelte-2e1ash">Grain Bill</h3> <table class="svelte-2e1ash"><thead><tr><th class="svelte-2e1ash">Fermentable</th><th class="svelte-2e1ash">Type</th><th class="svelte-2e1ash">Amount</th><th class="svelte-2e1ash">%</th><th class="svelte-2e1ash">Color</th></tr></thead><tbody class="svelte-2e1ash"></tbody><tfoot class="svelte-2e1ash"><tr><td colspan="2" class="svelte-2e1ash"><strong>Total</strong></td><td class="svelte-2e1ash"><strong> </strong></td><td class="svelte-2e1ash">100%</td><td class="svelte-2e1ash">--</td></tr></tfoot></table></div>');function pt(te,H){pe(H,!0);let W=oe(()=>H.fermentables.reduce((u,i)=>u+(i.amount_kg||0),0));function ae(u){return!u||!e(W)?"--":(u/e(W)*100).toFixed(1)+"%"}function Z(u){return u==null?"--":u.toFixed(2)+" kg"}function v(u){return u==null?"--":u.toFixed(0)+"°L"}var U=ie(),L=le(U);{var S=u=>{var i=_t(),g=s(a(i),2),z=s(a(g));ce(z,21,()=>H.fermentables,_e,(I,x)=>{var _=ct(),f=a(_),M=a(f),D=s(M);{var B=$=>{var w=nt(),K=a(w);t(w),y(()=>d(K,`(${e(x).origin??""})`)),n($,w)};p(D,$=>{e(x).origin&&$(B)})}var k=s(D,2);{var m=$=>{var w=dt(),K=a(w,!0);t(w),y(()=>d(K,e(x).supplier)),n($,w)};p(k,$=>{e(x).supplier&&$(m)})}t(f);var b=s(f),P=a(b,!0);t(b);var C=s(b),G=a(C,!0);t(C);var N=s(C),E=a(N,!0);t(N);var V=s(N),Y=a(V,!0);t(V),t(_),y(($,w,K)=>{d(M,`${e(x).name??""} `),d(P,e(x).type||"--"),d(G,$),d(E,w),d(Y,K)},[()=>Z(e(x).amount_kg),()=>ae(e(x).amount_kg),()=>v(e(x).color_lovibond)]),n(I,_)}),t(z);var O=s(z),R=a(O),q=s(a(R)),ee=a(q),re=a(ee,!0);t(ee),t(q),Qe(2),t(R),t(O),t(g),t(i),y(I=>d(re,I),[()=>Z(e(W))]),n(u,i)};p(L,u=>{H.fermentables.length>0&&u(S)})}n(te,U),ue()}var ut=c('<div class="hop-type svelte-1iyzc0d"> </div>'),yt=c('<tr class="svelte-1iyzc0d"><td class="hop-name svelte-1iyzc0d"> <!></td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td></tr>'),gt=c('<div class="hop-group svelte-1iyzc0d"><h4 class="svelte-1iyzc0d"> </h4> <table class="svelte-1iyzc0d"><thead><tr><th class="svelte-1iyzc0d">Hop</th><th class="svelte-1iyzc0d">Amount</th><th class="svelte-1iyzc0d">AA%</th><th class="svelte-1iyzc0d">Time</th><th class="svelte-1iyzc0d">Form</th></tr></thead><tbody class="svelte-1iyzc0d"></tbody></table></div>'),ht=c('<div class="hop-schedule svelte-1iyzc0d"><h3 class="svelte-1iyzc0d">Hop Schedule</h3> <!></div>');function ft(te,H){pe(H,!0);let W=oe(()=>{const i={};for(const g of H.hops){const z=g.timing?.use||"Other";i[z]||(i[z]=[]),i[z].push(g)}for(const[g,z]of Object.entries(i))(g==="add_to_boil"||g==="Boil")&&z.sort((O,R)=>(R.timing?.duration?.value||0)-(O.timing?.duration?.value||0));return i});function ae(i){return i==null?"--":i.toFixed(0)+"g"}function Z(i){return i==null?"--":i.toFixed(1)+"%"}function v(i){if(!i?.duration?.value)return"--";const g=i.duration.value;return i.use==="dry_hop"?g===0?"At packaging":`Day ${g}`:`${g} ${i.duration.unit||"min"}`}function U(i){return i?{add_to_boil:"Boil",dry_hop:"Dry Hop",add_to_fermentation:"Dry Hop",whirlpool:"Whirlpool",first_wort:"First Wort",mash:"Mash",aroma:"Aroma"}[i]||i:"Other"}var L=ie(),S=le(L);{var u=i=>{var g=ht(),z=s(a(g),2);ce(z,17,()=>Object.entries(e(W)),_e,(O,R)=>{var q=oe(()=>Xe(e(R),2));let ee=()=>e(q)[0],re=()=>e(q)[1];var I=gt(),x=a(I),_=a(x,!0);t(x);var f=s(x,2),M=s(a(f));ce(M,21,re,_e,(D,B)=>{var k=yt(),m=a(k),b=a(m),P=s(b);{var C=J=>{var Q=ut(),X=a(Q,!0);t(Q),y(()=>d(X,e(B).origin)),n(J,Q)};p(P,J=>{e(B).origin&&J(C)})}t(m);var G=s(m),N=a(G,!0);t(G);var E=s(G),V=a(E,!0);t(E);var Y=s(E),$=a(Y,!0);t(Y);var w=s(Y),K=a(w,!0);t(w),t(k),y((J,Q,X)=>{d(b,`${e(B).name??""} `),d(N,J),d(V,Q),d($,X),d(K,e(B).form||"--")},[()=>ae(e(B).amount_grams),()=>Z(e(B).alpha_acid_percent),()=>v(e(B).timing)]),n(D,k)}),t(M),t(f),t(I),y(D=>d(_,D),[()=>U(ee())]),n(O,I)}),t(g),n(i,g)};p(S,i=>{H.hops.length>0&&i(u)})}n(te,L),ue()}var mt=c('<div class="loading-state svelte-1r2e3yg"><div class="spinner svelte-1r2e3yg"></div> <p>Loading recipe...</p></div>'),bt=c('<div class="error-state svelte-1r2e3yg"><p class="error-message svelte-1r2e3yg"> </p></div>'),xt=c('<p class="recipe-author svelte-1r2e3yg"> </p>'),kt=c('<p class="recipe-type svelte-1r2e3yg"> </p>'),Ft=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Original Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),zt=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Final Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),$t=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">ABV</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),wt=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Attenuation</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Bt=c('<p class="yeast-name svelte-1r2e3yg"> </p>'),Dt=c('<p class="yeast-lab svelte-1r2e3yg"> </p>'),At=c('<p class="yeast-temp svelte-1r2e3yg"> </p>'),Mt=c('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Yeast</h2> <div class="yeast-info svelte-1r2e3yg"><!> <!> <!></div></div>'),Ct=c('<div class="section svelte-1r2e3yg"><!></div>'),Tt=c('<div class="section svelte-1r2e3yg"><!></div>'),jt=c('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">Batch Size</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),Ht=c('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">IBU</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),Lt=c('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">SRM</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),Rt=c('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Notes</h2> <p class="notes svelte-1r2e3yg"> </p></div>'),St=c('<div class="recipe-container svelte-1r2e3yg"><div class="recipe-header svelte-1r2e3yg"><div class="header-left svelte-1r2e3yg"><h1 class="recipe-title svelte-1r2e3yg"> </h1> <!> <!></div> <button type="button" class="delete-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Delete</button></div> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Fermentation Parameters</h2> <div class="param-grid svelte-1r2e3yg"><!> <!> <!> <!></div></div> <!> <!> <!> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Batch Details</h2> <div class="details-grid svelte-1r2e3yg"><!> <!> <!></div></div> <!> <div class="section svelte-1r2e3yg"><p class="created-date svelte-1r2e3yg"> </p></div> <div class="actions svelte-1r2e3yg"><button type="button" class="brew-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Brew This Recipe</button></div></div>'),Ot=c('<div class="modal-overlay svelte-1r2e3yg"><div class="modal svelte-1r2e3yg"><h2 class="modal-title svelte-1r2e3yg">Delete Recipe?</h2> <p class="modal-text svelte-1r2e3yg"> </p> <div class="modal-actions svelte-1r2e3yg"><button type="button" class="modal-btn cancel svelte-1r2e3yg">Cancel</button> <button type="button" class="modal-btn delete svelte-1r2e3yg"> </button></div></div></div>'),It=c('<div class="page-container svelte-1r2e3yg"><div class="back-link svelte-1r2e3yg"><a href="/recipes" class="back-btn svelte-1r2e3yg"><svg class="back-icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <!></div> <!>',1);function Jt(te,H){pe(H,!0);const W=()=>st(vt,"$page",ae),[ae,Z]=rt();let v=ve(null),U=ve(!0),L=ve(null),S=ve(!1),u=ve(!1),i=oe(()=>{const _=parseInt(W().params.id||"",10);return isNaN(_)||_<=0?null:_});Ze(async()=>{if(!e(i)){A(L,"Invalid recipe ID"),A(U,!1);return}try{A(v,await lt(e(i)),!0)}catch(_){A(L,_ instanceof Error?_.message:"Failed to load recipe",!0)}finally{A(U,!1)}});async function g(){if(e(v)){A(u,!0);try{await it(e(v).id),Ae("/recipes")}catch(_){A(L,_ instanceof Error?_.message:"Failed to delete recipe",!0),A(u,!1),A(S,!1)}}}function z(){e(v)&&Ae(`/batches/new?recipe_id=${e(v).id}`)}var O=It();at("1r2e3yg",_=>{et(()=>{tt.title=`${(e(v)?.name||"Recipe")??""} | BrewSignal`})});var R=le(O),q=s(a(R),2);{var ee=_=>{var f=mt();n(_,f)},re=_=>{var f=ie(),M=le(f);{var D=k=>{var m=bt(),b=a(m),P=a(b,!0);t(b),t(m),y(()=>d(P,e(L))),n(k,m)},B=k=>{var m=ie(),b=le(m);{var P=C=>{var G=St(),N=a(G),E=a(N),V=a(E),Y=a(V,!0);t(V);var $=s(V,2);{var w=r=>{var l=xt(),o=a(l);t(l),y(()=>d(o,`by ${e(v).author??""}`)),n(r,l)};p($,r=>{e(v).author&&r(w)})}var K=s($,2);{var J=r=>{var l=kt(),o=a(l,!0);t(l),y(()=>d(o,e(v).type)),n(r,l)};p(K,r=>{e(v).type&&r(J)})}t(E);var Q=s(E,2);Q.__click=()=>A(S,!0),t(N);var X=s(N,2),ye=s(a(X),2),ge=a(ye);{var Me=r=>{var l=Ft(),o=s(a(l),2),h=a(o,!0);t(o),t(l),y(F=>d(h,F),[()=>e(v).og.toFixed(3)]),n(r,l)};p(ge,r=>{e(v).og&&r(Me)})}var he=s(ge,2);{var Ce=r=>{var l=zt(),o=s(a(l),2),h=a(o,!0);t(o),t(l),y(F=>d(h,F),[()=>e(v).fg.toFixed(3)]),n(r,l)};p(he,r=>{e(v).fg&&r(Ce)})}var fe=s(he,2);{var Te=r=>{var l=$t(),o=s(a(l),2),h=a(o);t(o),t(l),y(F=>d(h,`${F??""}%`),[()=>(e(v).abv*100).toFixed(1)]),n(r,l)};p(fe,r=>{e(v).abv&&r(Te)})}var je=s(fe,2);{var He=r=>{var l=wt(),o=s(a(l),2),h=a(o);t(o),t(l),y(F=>d(h,`${F??""}%`),[()=>(e(v).yeast_attenuation*100).toFixed(0)]),n(r,l)};p(je,r=>{e(v).yeast_attenuation&&r(He)})}t(ye),t(X);var me=s(X,2);{var Le=r=>{var l=Mt(),o=s(a(l),2),h=a(o);{var F=T=>{var j=Bt(),se=a(j,!0);t(j),y(()=>d(se,e(v).yeast_name)),n(T,j)};p(h,T=>{e(v).yeast_name&&T(F)})}var De=s(h,2);{var Ue=T=>{var j=Dt(),se=a(j,!0);t(j),y(()=>d(se,e(v).yeast_lab)),n(T,j)};p(De,T=>{e(v).yeast_lab&&T(Ue)})}var Ve=s(De,2);{var We=T=>{var j=At(),se=a(j);t(j),y((qe,Ye)=>d(se,`Temperature: ${qe??""}-${Ye??""}°C`),[()=>e(v).yeast_temp_min.toFixed(0),()=>e(v).yeast_temp_max.toFixed(0)]),n(T,j)};p(Ve,T=>{e(v).yeast_temp_min!=null&&e(v).yeast_temp_max!=null&&T(We)})}t(o),t(l),n(r,l)};p(me,r=>{(e(v).yeast_name||e(v).yeast_temp_min||e(v).yeast_temp_max)&&r(Le)})}var be=s(me,2);{var Re=r=>{var l=Ct(),o=a(l);pt(o,{get fermentables(){return e(v).fermentables}}),t(l),n(r,l)};p(be,r=>{e(v).fermentables&&e(v).fermentables.length>0&&r(Re)})}var xe=s(be,2);{var Se=r=>{var l=Tt(),o=a(l);ft(o,{get hops(){return e(v).hops}}),t(l),n(r,l)};p(xe,r=>{e(v).hops&&e(v).hops.length>0&&r(Se)})}var ne=s(xe,2),ke=s(a(ne),2),Fe=a(ke);{var Oe=r=>{var l=jt(),o=s(a(l),2),h=a(o);t(o),t(l),y(F=>d(h,`${F??""} L`),[()=>e(v).batch_size_liters.toFixed(1)]),n(r,l)};p(Fe,r=>{e(v).batch_size_liters&&r(Oe)})}var ze=s(Fe,2);{var Ie=r=>{var l=Ht(),o=s(a(l),2),h=a(o,!0);t(o),t(l),y(F=>d(h,F),[()=>e(v).ibu.toFixed(0)]),n(r,l)};p(ze,r=>{e(v).ibu&&r(Ie)})}var Pe=s(ze,2);{var Ge=r=>{var l=Lt(),o=s(a(l),2),h=a(o,!0);t(o),t(l),y(F=>d(h,F),[()=>e(v).color_srm.toFixed(1)]),n(r,l)};p(Pe,r=>{e(v).color_srm&&r(Ge)})}t(ke),t(ne);var $e=s(ne,2);{var Ne=r=>{var l=Rt(),o=s(a(l),2),h=a(o,!0);t(o),t(l),y(()=>d(h,e(v).notes)),n(r,l)};p($e,r=>{e(v).notes&&r(Ne)})}var de=s($e,2),we=a(de),Ee=a(we);t(we),t(de);var Be=s(de,2),Ke=a(Be);Ke.__click=z,t(Be),t(G),y(r=>{d(Y,e(v).name),d(Ee,`Created ${r??""}`)},[()=>new Date(e(v).created_at).toLocaleDateString()]),n(C,G)};p(b,C=>{e(v)&&C(P)},!0)}n(k,m)};p(M,k=>{e(L)?k(D):k(B,!1)},!0)}n(_,f)};p(q,_=>{e(U)?_(ee):_(re,!1)})}t(R);var I=s(R,2);{var x=_=>{var f=Ot();f.__click=()=>A(S,!1);var M=a(f);M.__click=C=>C.stopPropagation();var D=s(a(M),2),B=a(D);t(D);var k=s(D,2),m=a(k);m.__click=()=>A(S,!1);var b=s(m,2);b.__click=g;var P=a(b,!0);t(b),t(k),t(M),t(f),y(()=>{d(B,`Are you sure you want to delete "${e(v)?.name??""}"? This cannot be undone.`),m.disabled=e(u),b.disabled=e(u),d(P,e(u)?"Deleting...":"Delete Recipe")}),n(_,f)};p(I,_=>{e(S)&&_(x)})}n(te,O),ue(),Z()}Je(["click"]);export{Jt as component,Yt as universal};
