import{c as ne,a as n,f as _,s as d,d as Xe}from"../chunks/DZ15WIaR.js";import{a as ge,f as le,h as he,g as s,d as a,i as e,j as t,t as h,n as Ze,l as de,aw as et,o as tt,ay as at,c as A,s as ve,at as rt}from"../chunks/CdgKpHHH.js";import{i as u}from"../chunks/CiVu40Aa.js";import{h as st}from"../chunks/DwuO6wC8.js";import{s as vt}from"../chunks/CnbDaB_W.js";import{s as lt,a as it}from"../chunks/DKl8-VAe.js";import{g as Me}from"../chunks/DmTVlH1B.js";import{p as ot}from"../chunks/B-gmscBy.js";import{D as nt,O as dt}from"../chunks/B_gYxpKk.js";import{e as pe,i as ue}from"../chunks/Xm3Ul2fO.js";const ct=!1,Zt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ct},Symbol.toStringTag,{value:"Module"}));var _t=_('<span class="origin svelte-2e1ash"> </span>'),pt=_('<div class="supplier svelte-2e1ash"> </div>'),ut=_('<tr class="svelte-2e1ash"><td class="name svelte-2e1ash"> <!> <!></td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td></tr>'),gt=_('<div class="fermentables svelte-2e1ash"><h3 class="svelte-2e1ash">Grain Bill</h3> <table class="svelte-2e1ash"><thead><tr><th class="svelte-2e1ash">Fermentable</th><th class="svelte-2e1ash">Type</th><th class="svelte-2e1ash">Amount</th><th class="svelte-2e1ash">%</th><th class="svelte-2e1ash">Color</th></tr></thead><tbody class="svelte-2e1ash"></tbody><tfoot class="svelte-2e1ash"><tr><td colspan="2" class="svelte-2e1ash"><strong>Total</strong></td><td class="svelte-2e1ash"><strong> </strong></td><td class="svelte-2e1ash">100%</td><td class="svelte-2e1ash">--</td></tr></tfoot></table></div>');function ht(ae,j){ge(j,!0);let R=de(()=>j.fermentables.reduce((p,H)=>p+(H.amount_kg||0),0));function re(p){return!p||!e(R)?"--":(p/e(R)*100).toFixed(1)+"%"}function Z(p){return p==null?"--":p.toFixed(2)+" kg"}function v(p){return p==null?"--":p.toFixed(0)+"°L"}var G=ne(),S=le(G);{var I=p=>{var H=gt(),ee=s(a(H),2),i=s(a(ee));pe(i,21,()=>j.fermentables,ue,(Y,B)=>{var c=ut(),b=a(c),O=a(b),D=s(O);{var V=F=>{var w=_t(),E=a(w);t(w),h(()=>d(E,`(${e(B).origin??""})`)),n(F,w)};u(D,F=>{e(B).origin&&F(V)})}var $=s(D,2);{var y=F=>{var w=pt(),E=a(w,!0);t(w),h(()=>d(E,e(B).supplier)),n(F,w)};u($,F=>{e(B).supplier&&F(y)})}t(b);var x=s(b),M=a(x,!0);t(x);var C=s(x),q=a(C,!0);t(C);var P=s(C),U=a(P,!0);t(P);var W=s(P),J=a(W,!0);t(W),t(c),h((F,w,E)=>{d(O,`${e(B).name??""} `),d(M,e(B).type||"--"),d(q,F),d(U,w),d(J,E)},[()=>Z(e(B).amount_kg),()=>re(e(B).amount_kg),()=>v(e(B).color_lovibond)]),n(Y,c)}),t(i);var g=s(i),f=a(g),k=s(a(f)),N=a(k),te=a(N,!0);t(N),t(k),Ze(2),t(f),t(g),t(ee),t(H),h(Y=>d(te,Y),[()=>Z(e(R))]),n(p,H)};u(S,p=>{j.fermentables.length>0&&p(I)})}n(ae,G),he()}var yt=_('<div class="hop-type svelte-1iyzc0d"> </div>'),ft=_('<tr class="svelte-1iyzc0d"><td class="hop-name svelte-1iyzc0d"> <!></td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td></tr>'),mt=_('<div class="hop-group svelte-1iyzc0d"><h4 class="svelte-1iyzc0d"> </h4> <table class="svelte-1iyzc0d"><thead><tr><th class="svelte-1iyzc0d">Hop</th><th class="svelte-1iyzc0d">Amount</th><th class="svelte-1iyzc0d">AA%</th><th class="svelte-1iyzc0d">Time</th><th class="svelte-1iyzc0d">Form</th></tr></thead><tbody class="svelte-1iyzc0d"></tbody></table></div>'),bt=_('<div class="hop-schedule svelte-1iyzc0d"><h3 class="svelte-1iyzc0d">Hop Schedule</h3> <!></div>');function xt(ae,j){ge(j,!0);function R(i){return i?.duration?.value??i?.time?.value}function re(i){return i?.duration?.unit??i?.time?.unit}let Z=de(()=>{const i={};for(const g of j.hops){const f=g.timing?.use||"Other";i[f]||(i[f]=[]),i[f].push(g)}for(const[g,f]of Object.entries(i))(g==="add_to_boil"||g==="Boil"||g==="boil")&&f.sort((k,N)=>(R(N.timing)||0)-(R(k.timing)||0));return i});function v(i){return i==null?"--":i.toFixed(0)+"g"}function G(i){return i==null?"--":i.toFixed(1)+"%"}function S(i){const g=R(i);if(g===void 0)return"--";const f=re(i)||"min",k=i?.use;return k==="dry_hop"||k==="dry hop"||k==="add_to_fermentation"?g===0?"At packaging":`${g} ${f}`:(k==="whirlpool"||k==="Whirlpool")&&i?.temperature?.value?`${g} ${f} @ ${i.temperature.value}°${i.temperature.unit||"C"}`:`${g} ${f}`}function I(i){if(!i)return"Other";const g=i.toLowerCase().replace(/\s+/g,"_");return{add_to_boil:"Boil",boil:"Boil",dry_hop:"Dry Hop",add_to_fermentation:"Fermentation",whirlpool:"Whirlpool",first_wort:"First Wort",mash:"Mash",aroma:"Aroma"}[g]||i.replace(/_/g," ").replace(/\b\w/g,k=>k.toUpperCase())}var p=ne(),H=le(p);{var ee=i=>{var g=bt(),f=s(a(g),2);pe(f,17,()=>Object.entries(e(Z)),ue,(k,N)=>{var te=de(()=>et(e(N),2));let Y=()=>e(te)[0],B=()=>e(te)[1];var c=mt(),b=a(c),O=a(b,!0);t(b);var D=s(b,2),V=s(a(D));pe(V,21,B,ue,($,y)=>{var x=ft(),M=a(x),C=a(M),q=s(C);{var P=K=>{var Q=yt(),X=a(Q,!0);t(Q),h(()=>d(X,e(y).origin)),n(K,Q)};u(q,K=>{e(y).origin&&K(P)})}t(M);var U=s(M),W=a(U,!0);t(U);var J=s(U),F=a(J,!0);t(J);var w=s(J),E=a(w,!0);t(w);var ie=s(w),oe=a(ie,!0);t(ie),t(x),h((K,Q,X)=>{d(C,`${e(y).name??""} `),d(W,K),d(F,Q),d(E,X),d(oe,e(y).form||"--")},[()=>v(e(y).amount_grams),()=>G(e(y).alpha_acid_percent),()=>S(e(y).timing)]),n($,x)}),t(V),t(D),t(c),h($=>d(O,$),[()=>I(Y())]),n(k,c)}),t(g),n(i,g)};u(H,i=>{j.hops.length>0&&i(ee)})}n(ae,p),he()}var kt=_('<div class="loading-state svelte-1r2e3yg"><div class="spinner svelte-1r2e3yg"></div> <p>Loading recipe...</p></div>'),$t=_('<div class="error-state svelte-1r2e3yg"><p class="error-message svelte-1r2e3yg"> </p></div>'),wt=_('<p class="recipe-author svelte-1r2e3yg"> </p>'),zt=_('<p class="recipe-type svelte-1r2e3yg"> </p>'),Ft=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Original Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Bt=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Final Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Ct=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">ABV</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),At=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Attenuation</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Dt=_('<p class="yeast-name svelte-1r2e3yg"> </p>'),Mt=_('<p class="yeast-lab svelte-1r2e3yg"> </p>'),Tt=_('<p class="yeast-temp svelte-1r2e3yg"> </p>'),Lt=_('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Yeast</h2> <div class="yeast-info svelte-1r2e3yg"><!> <!> <!></div></div>'),jt=_('<div class="section svelte-1r2e3yg"><!></div>'),Ht=_('<div class="section svelte-1r2e3yg"><!></div>'),Ot=_('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">Batch Size</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),Rt=_('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">IBU</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),St=_('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">SRM</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),It=_('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Notes</h2> <p class="notes svelte-1r2e3yg"> </p></div>'),Pt=_('<div class="recipe-container svelte-1r2e3yg"><div class="recipe-header svelte-1r2e3yg"><div class="header-left svelte-1r2e3yg"><h1 class="recipe-title svelte-1r2e3yg"> </h1> <!> <!></div> <div class="header-actions svelte-1r2e3yg"><a class="edit-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> Edit</a> <button type="button" class="delete-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Delete</button></div></div> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Fermentation Parameters</h2> <div class="param-grid svelte-1r2e3yg"><!> <!> <!> <!></div></div> <!> <!> <!> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Batch Details</h2> <div class="details-grid svelte-1r2e3yg"><!> <!> <!></div></div> <!> <div class="section svelte-1r2e3yg"><p class="created-date svelte-1r2e3yg"> </p></div> <div class="actions svelte-1r2e3yg"><button type="button" class="brew-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Brew This Recipe</button></div></div>'),Ut=_('<div class="modal-overlay svelte-1r2e3yg"><div class="modal svelte-1r2e3yg"><h2 class="modal-title svelte-1r2e3yg">Delete Recipe?</h2> <p class="modal-text svelte-1r2e3yg"> </p> <div class="modal-actions svelte-1r2e3yg"><button type="button" class="modal-btn cancel svelte-1r2e3yg">Cancel</button> <button type="button" class="modal-btn delete svelte-1r2e3yg"> </button></div></div></div>'),Et=_('<div class="page-container svelte-1r2e3yg"><div class="back-link svelte-1r2e3yg"><a href="/recipes" class="back-btn svelte-1r2e3yg"><svg class="back-icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <!></div> <!>',1);function ea(ae,j){ge(j,!0);const R=()=>it(ot,"$page",re),[re,Z]=lt();let v=ve(null),G=ve(!0),S=ve(null),I=ve(!1),p=ve(!1),H=de(()=>{const c=parseInt(R().params.id||"",10);return isNaN(c)||c<=0?null:c});tt(async()=>{if(!e(H)){A(S,"Invalid recipe ID"),A(G,!1);return}try{A(v,await nt(e(H)),!0)}catch(c){A(S,c instanceof Error?c.message:"Failed to load recipe",!0)}finally{A(G,!1)}});async function ee(){if(e(v)){A(p,!0);try{await dt(e(v).id),Me("/recipes")}catch(c){A(S,c instanceof Error?c.message:"Failed to delete recipe",!0),A(p,!1),A(I,!1)}}}function i(){e(v)&&Me(`/batches/new?recipe_id=${e(v).id}`)}var g=Et();st("1r2e3yg",c=>{at(()=>{rt.title=`${(e(v)?.name||"Recipe")??""} | BrewSignal`})});var f=le(g),k=s(a(f),2);{var N=c=>{var b=kt();n(c,b)},te=c=>{var b=ne(),O=le(b);{var D=$=>{var y=$t(),x=a(y),M=a(x,!0);t(x),t(y),h(()=>d(M,e(S))),n($,y)},V=$=>{var y=ne(),x=le(y);{var M=C=>{var q=Pt(),P=a(q),U=a(P),W=a(U),J=a(W,!0);t(W);var F=s(W,2);{var w=r=>{var l=wt(),o=a(l);t(l),h(()=>d(o,`by ${e(v).author??""}`)),n(r,l)};u(F,r=>{e(v).author&&r(w)})}var E=s(F,2);{var ie=r=>{var l=zt(),o=a(l,!0);t(l),h(()=>d(o,e(v).type)),n(r,l)};u(E,r=>{e(v).type&&r(ie)})}t(U);var oe=s(U,2),K=a(oe),Q=s(K,2);Q.__click=()=>A(I,!0),t(oe),t(P);var X=s(P,2),ye=s(a(X),2),fe=a(ye);{var Te=r=>{var l=Ft(),o=s(a(l),2),m=a(o,!0);t(o),t(l),h(z=>d(m,z),[()=>e(v).og.toFixed(3)]),n(r,l)};u(fe,r=>{e(v).og&&r(Te)})}var me=s(fe,2);{var Le=r=>{var l=Bt(),o=s(a(l),2),m=a(o,!0);t(o),t(l),h(z=>d(m,z),[()=>e(v).fg.toFixed(3)]),n(r,l)};u(me,r=>{e(v).fg&&r(Le)})}var be=s(me,2);{var je=r=>{var l=Ct(),o=s(a(l),2),m=a(o);t(o),t(l),h(z=>d(m,`${z??""}%`),[()=>e(v).abv.toFixed(1)]),n(r,l)};u(be,r=>{e(v).abv&&r(je)})}var He=s(be,2);{var Oe=r=>{var l=At(),o=s(a(l),2),m=a(o);t(o),t(l),h(z=>d(m,`${z??""}%`),[()=>e(v).yeast_attenuation.toFixed(0)]),n(r,l)};u(He,r=>{e(v).yeast_attenuation&&r(Oe)})}t(ye),t(X);var xe=s(X,2);{var Re=r=>{var l=Lt(),o=s(a(l),2),m=a(o);{var z=T=>{var L=Dt(),se=a(L,!0);t(L),h(()=>d(se,e(v).yeast_name)),n(T,L)};u(m,T=>{e(v).yeast_name&&T(z)})}var De=s(m,2);{var Ke=T=>{var L=Mt(),se=a(L,!0);t(L),h(()=>d(se,e(v).yeast_lab)),n(T,L)};u(De,T=>{e(v).yeast_lab&&T(Ke)})}var Ye=s(De,2);{var qe=T=>{var L=Tt(),se=a(L);t(L),h((Je,Qe)=>d(se,`Temperature: ${Je??""}-${Qe??""}°C`),[()=>e(v).yeast_temp_min.toFixed(0),()=>e(v).yeast_temp_max.toFixed(0)]),n(T,L)};u(Ye,T=>{e(v).yeast_temp_min!=null&&e(v).yeast_temp_max!=null&&T(qe)})}t(o),t(l),n(r,l)};u(xe,r=>{(e(v).yeast_name||e(v).yeast_temp_min||e(v).yeast_temp_max)&&r(Re)})}var ke=s(xe,2);{var Se=r=>{var l=jt(),o=a(l);ht(o,{get fermentables(){return e(v).fermentables}}),t(l),n(r,l)};u(ke,r=>{e(v).fermentables&&e(v).fermentables.length>0&&r(Se)})}var $e=s(ke,2);{var Ie=r=>{var l=Ht(),o=a(l);xt(o,{get hops(){return e(v).hops}}),t(l),n(r,l)};u($e,r=>{e(v).hops&&e(v).hops.length>0&&r(Ie)})}var ce=s($e,2),we=s(a(ce),2),ze=a(we);{var Pe=r=>{var l=Ot(),o=s(a(l),2),m=a(o);t(o),t(l),h(z=>d(m,`${z??""} L`),[()=>e(v).batch_size_liters.toFixed(1)]),n(r,l)};u(ze,r=>{e(v).batch_size_liters&&r(Pe)})}var Fe=s(ze,2);{var Ue=r=>{var l=Rt(),o=s(a(l),2),m=a(o,!0);t(o),t(l),h(z=>d(m,z),[()=>e(v).ibu.toFixed(0)]),n(r,l)};u(Fe,r=>{e(v).ibu&&r(Ue)})}var Ee=s(Fe,2);{var Ge=r=>{var l=St(),o=s(a(l),2),m=a(o,!0);t(o),t(l),h(z=>d(m,z),[()=>e(v).color_srm.toFixed(1)]),n(r,l)};u(Ee,r=>{e(v).color_srm&&r(Ge)})}t(we),t(ce);var Be=s(ce,2);{var Ne=r=>{var l=It(),o=s(a(l),2),m=a(o,!0);t(o),t(l),h(()=>d(m,e(v).notes)),n(r,l)};u(Be,r=>{e(v).notes&&r(Ne)})}var _e=s(Be,2),Ce=a(_e),Ve=a(Ce);t(Ce),t(_e);var Ae=s(_e,2),We=a(Ae);We.__click=i,t(Ae),t(q),h(r=>{d(J,e(v).name),vt(K,"href",`/recipes/${e(v).id??""}/edit`),d(Ve,`Created ${r??""}`)},[()=>new Date(e(v).created_at).toLocaleDateString()]),n(C,q)};u(x,C=>{e(v)&&C(M)},!0)}n($,y)};u(O,$=>{e(S)?$(D):$(V,!1)},!0)}n(c,b)};u(k,c=>{e(G)?c(N):c(te,!1)})}t(f);var Y=s(f,2);{var B=c=>{var b=Ut();b.__click=()=>A(I,!1);var O=a(b);O.__click=C=>C.stopPropagation();var D=s(a(O),2),V=a(D);t(D);var $=s(D,2),y=a($);y.__click=()=>A(I,!1);var x=s(y,2);x.__click=ee;var M=a(x,!0);t(x),t($),t(O),t(b),h(()=>{d(V,`Are you sure you want to delete "${e(v)?.name??""}"? This cannot be undone.`),y.disabled=e(p),x.disabled=e(p),d(M,e(p)?"Deleting...":"Delete Recipe")}),n(c,b)};u(Y,c=>{e(I)&&c(B)})}n(ae,g),he(),Z()}Xe(["click"]);export{ea as component,Zt as universal};
