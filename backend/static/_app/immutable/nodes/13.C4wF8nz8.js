import{c as ne,a as n,f as _,s as d,d as Xe}from"../chunks/_XOVx4lj.js";import{a as ge,f as ve,h as he,g as s,d as a,i as e,j as t,t as h,n as Ze,l as de,au as et,o as tt,ay as at,c as M,s as le,at as rt}from"../chunks/DB-qchCW.js";import{i as p}from"../chunks/CxlJqsN3.js";import{h as st}from"../chunks/D33WWFu2.js";import{s as lt}from"../chunks/N6Y6k7Jx.js";import{s as vt,a as it}from"../chunks/DCPTKMIa.js";import{g as De}from"../chunks/Ca7rv7DM.js";import{p as ot}from"../chunks/DNeG47mn.js";import{N as nt,a4 as dt}from"../chunks/1yiRDCQX.js";import{e as pe,i as ue}from"../chunks/BGNkgO3t.js";const ct=!1,Zt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ct},Symbol.toStringTag,{value:"Module"}));var _t=_('<span class="origin svelte-2e1ash"> </span>'),pt=_('<div class="supplier svelte-2e1ash"> </div>'),ut=_('<tr class="svelte-2e1ash"><td class="name svelte-2e1ash"> <!> <!></td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td></tr>'),gt=_('<div class="fermentables svelte-2e1ash"><h3 class="svelte-2e1ash">Grain Bill</h3> <table class="svelte-2e1ash"><thead><tr><th class="svelte-2e1ash">Fermentable</th><th class="svelte-2e1ash">Type</th><th class="svelte-2e1ash">Amount</th><th class="svelte-2e1ash">%</th><th class="svelte-2e1ash">Color</th></tr></thead><tbody class="svelte-2e1ash"></tbody><tfoot class="svelte-2e1ash"><tr><td colspan="2" class="svelte-2e1ash"><strong>Total</strong></td><td class="svelte-2e1ash"><strong> </strong></td><td class="svelte-2e1ash">100%</td><td class="svelte-2e1ash">--</td></tr></tfoot></table></div>');function ht(ae,H){ge(H,!0);let O=de(()=>H.fermentables.reduce((u,w)=>u+(w.amount_kg||0),0));function re(u){return!u||!e(O)?"--":(u/e(O)*100).toFixed(1)+"%"}function ee(u){return u==null?"--":u.toFixed(2)+" kg"}function l(u){const w=u.color_srm,R=u.color_lovibond;return w!=null?w.toFixed(0)+" SRM":R!=null?R.toFixed(0)+"°L":"--"}var G=ne(),I=ve(G);{var N=u=>{var w=gt(),R=s(a(w),2),i=s(a(R));pe(i,21,()=>H.fermentables,ue,(q,C)=>{var c=ut(),b=a(c),S=a(b),D=s(S);{var W=B=>{var z=_t(),E=a(z);t(z),h(()=>d(E,`(${e(C).origin??""})`)),n(B,z)};p(D,B=>{e(C).origin&&B(W)})}var $=s(D,2);{var y=B=>{var z=pt(),E=a(z,!0);t(z),h(()=>d(E,e(C).supplier)),n(B,z)};p($,B=>{e(C).supplier&&B(y)})}t(b);var x=s(b),T=a(x,!0);t(x);var A=s(x),J=a(A,!0);t(A);var P=s(A),U=a(P,!0);t(P);var K=s(P),Q=a(K,!0);t(K),t(c),h((B,z,E)=>{d(S,`${e(C).name??""} `),d(T,e(C).type||"--"),d(J,B),d(U,z),d(Q,E)},[()=>ee(e(C).amount_kg),()=>re(e(C).amount_kg),()=>l(e(C))]),n(q,c)}),t(i);var g=s(i),f=a(g),k=s(a(f)),V=a(k),te=a(V,!0);t(V),t(k),Ze(2),t(f),t(g),t(R),t(w),h(q=>d(te,q),[()=>ee(e(O))]),n(u,w)};p(I,u=>{H.fermentables.length>0&&u(N)})}n(ae,G),he()}var yt=_('<div class="hop-type svelte-1iyzc0d"> </div>'),ft=_('<tr class="svelte-1iyzc0d"><td class="hop-name svelte-1iyzc0d"> <!></td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td></tr>'),mt=_('<div class="hop-group svelte-1iyzc0d"><h4 class="svelte-1iyzc0d"> </h4> <table class="svelte-1iyzc0d"><thead><tr><th class="svelte-1iyzc0d">Hop</th><th class="svelte-1iyzc0d">Amount</th><th class="svelte-1iyzc0d">AA%</th><th class="svelte-1iyzc0d">Time</th><th class="svelte-1iyzc0d">Form</th></tr></thead><tbody class="svelte-1iyzc0d"></tbody></table></div>'),bt=_('<div class="hop-schedule svelte-1iyzc0d"><h3 class="svelte-1iyzc0d">Hop Schedule</h3> <!></div>');function xt(ae,H){ge(H,!0);function O(i){return i?.duration?.value??i?.time?.value}function re(i){return i?.duration?.unit??i?.time?.unit}let ee=de(()=>{const i={};for(const g of H.hops){const f=g.timing?.use||"Other";i[f]||(i[f]=[]),i[f].push(g)}for(const[g,f]of Object.entries(i))(g==="add_to_boil"||g==="Boil"||g==="boil")&&f.sort((k,V)=>(O(V.timing)||0)-(O(k.timing)||0));return i});function l(i){return i==null?"--":i.toFixed(0)+"g"}function G(i){return i==null?"--":i.toFixed(1)+"%"}function I(i){const g=O(i);if(g===void 0)return"--";const f=re(i)||"min",k=i?.use;return k==="dry_hop"||k==="dry hop"||k==="add_to_fermentation"?g===0?"At packaging":`${g} ${f}`:(k==="whirlpool"||k==="Whirlpool")&&i?.temperature?.value?`${g} ${f} @ ${i.temperature.value}°${i.temperature.unit||"C"}`:`${g} ${f}`}function N(i){if(!i)return"Other";const g=i.toLowerCase().replace(/\s+/g,"_");return{add_to_boil:"Boil",boil:"Boil",dry_hop:"Dry Hop",add_to_fermentation:"Fermentation",whirlpool:"Whirlpool",first_wort:"First Wort",mash:"Mash",aroma:"Aroma"}[g]||i.replace(/_/g," ").replace(/\b\w/g,k=>k.toUpperCase())}var u=ne(),w=ve(u);{var R=i=>{var g=bt(),f=s(a(g),2);pe(f,17,()=>Object.entries(e(ee)),ue,(k,V)=>{var te=de(()=>et(e(V),2));let q=()=>e(te)[0],C=()=>e(te)[1];var c=mt(),b=a(c),S=a(b,!0);t(b);var D=s(b,2),W=s(a(D));pe(W,21,C,ue,($,y)=>{var x=ft(),T=a(x),A=a(T),J=s(A);{var P=Y=>{var X=yt(),Z=a(X,!0);t(X),h(()=>d(Z,e(y).origin)),n(Y,X)};p(J,Y=>{e(y).origin&&Y(P)})}t(T);var U=s(T),K=a(U,!0);t(U);var Q=s(U),B=a(Q,!0);t(Q);var z=s(Q),E=a(z,!0);t(z);var ie=s(z),oe=a(ie,!0);t(ie),t(x),h((Y,X,Z)=>{d(A,`${e(y).name??""} `),d(K,Y),d(B,X),d(E,Z),d(oe,e(y).form||"--")},[()=>l(e(y).amount_grams),()=>G(e(y).alpha_acid_percent),()=>I(e(y).timing)]),n($,x)}),t(W),t(D),t(c),h($=>d(S,$),[()=>N(q())]),n(k,c)}),t(g),n(i,g)};p(w,i=>{H.hops.length>0&&i(R)})}n(ae,u),he()}var kt=_('<div class="loading-state svelte-1r2e3yg"><div class="spinner svelte-1r2e3yg"></div> <p>Loading recipe...</p></div>'),$t=_('<div class="error-state svelte-1r2e3yg"><p class="error-message svelte-1r2e3yg"> </p></div>'),zt=_('<p class="recipe-author svelte-1r2e3yg"> </p>'),Ft=_('<p class="recipe-type svelte-1r2e3yg"> </p>'),wt=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Original Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Bt=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Final Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Ct=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">ABV</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),At=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Attenuation</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Mt=_('<p class="yeast-name svelte-1r2e3yg"> </p>'),Dt=_('<p class="yeast-lab svelte-1r2e3yg"> </p>'),Tt=_('<p class="yeast-temp svelte-1r2e3yg"> </p>'),Lt=_('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Yeast</h2> <div class="yeast-info svelte-1r2e3yg"><!> <!> <!></div></div>'),jt=_('<div class="section svelte-1r2e3yg"><!></div>'),Ht=_('<div class="section svelte-1r2e3yg"><!></div>'),Rt=_('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">Batch Size</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),St=_('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">IBU</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),Ot=_('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">SRM</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),It=_('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Notes</h2> <p class="notes svelte-1r2e3yg"> </p></div>'),Nt=_('<div class="recipe-container svelte-1r2e3yg"><div class="recipe-header svelte-1r2e3yg"><div class="header-left svelte-1r2e3yg"><h1 class="recipe-title svelte-1r2e3yg"> </h1> <!> <!></div> <div class="header-actions svelte-1r2e3yg"><a class="edit-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> Edit</a> <button type="button" class="delete-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Delete</button></div></div> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Fermentation Parameters</h2> <div class="param-grid svelte-1r2e3yg"><!> <!> <!> <!></div></div> <!> <!> <!> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Batch Details</h2> <div class="details-grid svelte-1r2e3yg"><!> <!> <!></div></div> <!> <div class="section svelte-1r2e3yg"><p class="created-date svelte-1r2e3yg"> </p></div> <div class="actions svelte-1r2e3yg"><button type="button" class="brew-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Brew This Recipe</button></div></div>'),Pt=_('<div class="modal-overlay svelte-1r2e3yg"><div class="modal svelte-1r2e3yg"><h2 class="modal-title svelte-1r2e3yg">Delete Recipe?</h2> <p class="modal-text svelte-1r2e3yg"> </p> <div class="modal-actions svelte-1r2e3yg"><button type="button" class="modal-btn cancel svelte-1r2e3yg">Cancel</button> <button type="button" class="modal-btn delete svelte-1r2e3yg"> </button></div></div></div>'),Ut=_('<div class="page-container svelte-1r2e3yg"><div class="back-link svelte-1r2e3yg"><a href="/recipes" class="back-btn svelte-1r2e3yg"><svg class="back-icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <!></div> <!>',1);function ea(ae,H){ge(H,!0);const O=()=>it(ot,"$page",re),[re,ee]=vt();let l=le(null),G=le(!0),I=le(null),N=le(!1),u=le(!1),w=de(()=>{const c=parseInt(O().params.id||"",10);return isNaN(c)||c<=0?null:c});tt(async()=>{if(!e(w)){M(I,"Invalid recipe ID"),M(G,!1);return}try{M(l,await nt(e(w)),!0)}catch(c){M(I,c instanceof Error?c.message:"Failed to load recipe",!0)}finally{M(G,!1)}});async function R(){if(e(l)){M(u,!0);try{await dt(e(l).id),De("/recipes")}catch(c){M(I,c instanceof Error?c.message:"Failed to delete recipe",!0),M(u,!1),M(N,!1)}}}function i(){e(l)&&De(`/batches/new?recipe_id=${e(l).id}`)}var g=Ut();st("1r2e3yg",c=>{at(()=>{rt.title=`${(e(l)?.name||"Recipe")??""} | BrewSignal`})});var f=ve(g),k=s(a(f),2);{var V=c=>{var b=kt();n(c,b)},te=c=>{var b=ne(),S=ve(b);{var D=$=>{var y=$t(),x=a(y),T=a(x,!0);t(x),t(y),h(()=>d(T,e(I))),n($,y)},W=$=>{var y=ne(),x=ve(y);{var T=A=>{var J=Nt(),P=a(J),U=a(P),K=a(U),Q=a(K,!0);t(K);var B=s(K,2);{var z=r=>{var v=zt(),o=a(v);t(v),h(()=>d(o,`by ${e(l).author??""}`)),n(r,v)};p(B,r=>{e(l).author&&r(z)})}var E=s(B,2);{var ie=r=>{var v=Ft(),o=a(v,!0);t(v),h(()=>d(o,e(l).type)),n(r,v)};p(E,r=>{e(l).type&&r(ie)})}t(U);var oe=s(U,2),Y=a(oe),X=s(Y,2);X.__click=()=>M(N,!0),t(oe),t(P);var Z=s(P,2),ye=s(a(Z),2),fe=a(ye);{var Te=r=>{var v=wt(),o=s(a(v),2),m=a(o,!0);t(o),t(v),h(F=>d(m,F),[()=>e(l).og.toFixed(3)]),n(r,v)};p(fe,r=>{e(l).og&&r(Te)})}var me=s(fe,2);{var Le=r=>{var v=Bt(),o=s(a(v),2),m=a(o,!0);t(o),t(v),h(F=>d(m,F),[()=>e(l).fg.toFixed(3)]),n(r,v)};p(me,r=>{e(l).fg&&r(Le)})}var be=s(me,2);{var je=r=>{var v=Ct(),o=s(a(v),2),m=a(o);t(o),t(v),h(F=>d(m,`${F??""}%`),[()=>e(l).abv.toFixed(1)]),n(r,v)};p(be,r=>{e(l).abv&&r(je)})}var He=s(be,2);{var Re=r=>{var v=At(),o=s(a(v),2),m=a(o);t(o),t(v),h(F=>d(m,`${F??""}%`),[()=>e(l).yeast_attenuation.toFixed(0)]),n(r,v)};p(He,r=>{e(l).yeast_attenuation&&r(Re)})}t(ye),t(Z);var xe=s(Z,2);{var Se=r=>{var v=Lt(),o=s(a(v),2),m=a(o);{var F=L=>{var j=Mt(),se=a(j,!0);t(j),h(()=>d(se,e(l).yeast_name)),n(L,j)};p(m,L=>{e(l).yeast_name&&L(F)})}var Me=s(m,2);{var Ke=L=>{var j=Dt(),se=a(j,!0);t(j),h(()=>d(se,e(l).yeast_lab)),n(L,j)};p(Me,L=>{e(l).yeast_lab&&L(Ke)})}var Ye=s(Me,2);{var qe=L=>{var j=Tt(),se=a(j);t(j),h((Je,Qe)=>d(se,`Temperature: ${Je??""}-${Qe??""}°C`),[()=>e(l).yeast_temp_min.toFixed(0),()=>e(l).yeast_temp_max.toFixed(0)]),n(L,j)};p(Ye,L=>{e(l).yeast_temp_min!=null&&e(l).yeast_temp_max!=null&&L(qe)})}t(o),t(v),n(r,v)};p(xe,r=>{(e(l).yeast_name||e(l).yeast_temp_min||e(l).yeast_temp_max)&&r(Se)})}var ke=s(xe,2);{var Oe=r=>{var v=jt(),o=a(v);ht(o,{get fermentables(){return e(l).fermentables}}),t(v),n(r,v)};p(ke,r=>{e(l).fermentables&&e(l).fermentables.length>0&&r(Oe)})}var $e=s(ke,2);{var Ie=r=>{var v=Ht(),o=a(v);xt(o,{get hops(){return e(l).hops}}),t(v),n(r,v)};p($e,r=>{e(l).hops&&e(l).hops.length>0&&r(Ie)})}var ce=s($e,2),ze=s(a(ce),2),Fe=a(ze);{var Ne=r=>{var v=Rt(),o=s(a(v),2),m=a(o);t(o),t(v),h(F=>d(m,`${F??""} L`),[()=>e(l).batch_size_liters.toFixed(1)]),n(r,v)};p(Fe,r=>{e(l).batch_size_liters&&r(Ne)})}var we=s(Fe,2);{var Pe=r=>{var v=St(),o=s(a(v),2),m=a(o,!0);t(o),t(v),h(F=>d(m,F),[()=>e(l).ibu.toFixed(0)]),n(r,v)};p(we,r=>{e(l).ibu&&r(Pe)})}var Ue=s(we,2);{var Ee=r=>{var v=Ot(),o=s(a(v),2),m=a(o,!0);t(o),t(v),h(F=>d(m,F),[()=>e(l).color_srm.toFixed(1)]),n(r,v)};p(Ue,r=>{e(l).color_srm&&r(Ee)})}t(ze),t(ce);var Be=s(ce,2);{var Ge=r=>{var v=It(),o=s(a(v),2),m=a(o,!0);t(o),t(v),h(()=>d(m,e(l).notes)),n(r,v)};p(Be,r=>{e(l).notes&&r(Ge)})}var _e=s(Be,2),Ce=a(_e),Ve=a(Ce);t(Ce),t(_e);var Ae=s(_e,2),We=a(Ae);We.__click=i,t(Ae),t(J),h(r=>{d(Q,e(l).name),lt(Y,"href",`/recipes/${e(l).id??""}/edit`),d(Ve,`Created ${r??""}`)},[()=>new Date(e(l).created_at).toLocaleDateString()]),n(A,J)};p(x,A=>{e(l)&&A(T)},!0)}n($,y)};p(S,$=>{e(I)?$(D):$(W,!1)},!0)}n(c,b)};p(k,c=>{e(G)?c(V):c(te,!1)})}t(f);var q=s(f,2);{var C=c=>{var b=Pt();b.__click=()=>M(N,!1);var S=a(b);S.__click=A=>A.stopPropagation();var D=s(a(S),2),W=a(D);t(D);var $=s(D,2),y=a($);y.__click=()=>M(N,!1);var x=s(y,2);x.__click=R;var T=a(x,!0);t(x),t($),t(S),t(b),h(()=>{d(W,`Are you sure you want to delete "${e(l)?.name??""}"? This cannot be undone.`),y.disabled=e(u),x.disabled=e(u),d(T,e(u)?"Deleting...":"Delete Recipe")}),n(c,b)};p(q,c=>{e(N)&&c(C)})}n(ae,g),he(),ee()}Xe(["click"]);export{ea as component,Zt as universal};
