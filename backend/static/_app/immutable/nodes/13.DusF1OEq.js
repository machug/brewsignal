import{c as ne,a as n,f as _,s as d,d as Xe}from"../chunks/BPY3LF1i.js";import{a as ge,f as ve,g as ye,e as s,d as a,h as e,r as t,t as y,n as Ze,u as de,ay as et,o as tt,aC as at,c as M,s as le,ax as rt}from"../chunks/WzhiZOZ9.js";import{i as p}from"../chunks/DTo_ih-i.js";import{h as st}from"../chunks/BJzfFUzm.js";import{s as lt}from"../chunks/D5Ox4mlS.js";import{s as vt,a as it}from"../chunks/fcLv_oK9.js";import{g as De}from"../chunks/DM9EaMqs.js";import{p as ot}from"../chunks/Bj9uCDZC.js";import{N as nt,a4 as dt}from"../chunks/BKVJalqB.js";import{e as pe,i as ue}from"../chunks/DnC7am1E.js";const ct=!1,Zt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ct},Symbol.toStringTag,{value:"Module"}));var _t=_('<span class="origin svelte-2e1ash"> </span>'),pt=_('<div class="supplier svelte-2e1ash"> </div>'),ut=_('<tr class="svelte-2e1ash"><td class="name svelte-2e1ash"> <!> <!></td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td></tr>'),gt=_('<div class="fermentables svelte-2e1ash"><h3 class="svelte-2e1ash">Grain Bill</h3> <table class="svelte-2e1ash"><thead><tr><th class="svelte-2e1ash">Fermentable</th><th class="svelte-2e1ash">Type</th><th class="svelte-2e1ash">Amount</th><th class="svelte-2e1ash">%</th><th class="svelte-2e1ash">Color</th></tr></thead><tbody class="svelte-2e1ash"></tbody><tfoot class="svelte-2e1ash"><tr><td colspan="2" class="svelte-2e1ash"><strong>Total</strong></td><td class="svelte-2e1ash"><strong> </strong></td><td class="svelte-2e1ash">100%</td><td class="svelte-2e1ash">--</td></tr></tfoot></table></div>');function yt(ae,S){ge(S,!0);let I=de(()=>S.fermentables.reduce((u,B)=>u+(B.amount_kg||0),0));function re(u){return!u||!e(I)?"--":(u/e(I)*100).toFixed(1)+"%"}function ee(u){return u==null?"--":u.toFixed(2)+" kg"}function l(u){const B=u.color_srm,O=u.color_lovibond;return B!=null?B.toFixed(0)+" SRM":O!=null?O.toFixed(0)+"°L":"--"}var G=ne(),P=ve(G);{var j=u=>{var B=gt(),O=s(a(B),2),i=s(a(O));pe(i,21,()=>S.fermentables,ue,(q,A)=>{var c=ut(),m=a(c),D=a(m),T=s(D);{var W=C=>{var z=_t(),U=a(z);t(z),y(()=>d(U,`(${e(A).origin??""})`)),n(C,z)};p(T,C=>{e(A).origin&&C(W)})}var $=s(T,2);{var h=C=>{var z=pt(),U=a(z,!0);t(z),y(()=>d(U,e(A).supplier)),n(C,z)};p($,C=>{e(A).supplier&&C(h)})}t(m);var x=s(m),L=a(x,!0);t(x);var w=s(x),J=a(w,!0);t(w);var E=s(w),N=a(E,!0);t(E);var K=s(E),Q=a(K,!0);t(K),t(c),y((C,z,U)=>{d(D,`${e(A).name??""} `),d(L,e(A).type||"--"),d(J,C),d(N,z),d(Q,U)},[()=>ee(e(A).amount_kg),()=>re(e(A).amount_kg),()=>l(e(A))]),n(q,c)}),t(i);var g=s(i),f=a(g),k=s(a(f)),V=a(k),te=a(V,!0);t(V),t(k),Ze(2),t(f),t(g),t(O),t(B),y(q=>d(te,q),[()=>ee(e(I))]),n(u,B)};p(P,u=>{S.fermentables.length>0&&u(j)})}n(ae,G),ye()}var ht=_('<div class="hop-type svelte-1iyzc0d"> </div>'),ft=_('<tr class="svelte-1iyzc0d"><td class="hop-name svelte-1iyzc0d"> <!></td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td></tr>'),mt=_('<div class="hop-group svelte-1iyzc0d"><h4 class="svelte-1iyzc0d"> </h4> <table class="svelte-1iyzc0d"><thead><tr><th class="svelte-1iyzc0d">Hop</th><th class="svelte-1iyzc0d">Amount</th><th class="svelte-1iyzc0d">AA%</th><th class="svelte-1iyzc0d">Time</th><th class="svelte-1iyzc0d">Form</th></tr></thead><tbody class="svelte-1iyzc0d"></tbody></table></div>'),bt=_('<div class="hop-schedule svelte-1iyzc0d"><h3 class="svelte-1iyzc0d">Hop Schedule</h3> <!></div>');function xt(ae,S){ge(S,!0);function I(i){return i?.duration?.value??i?.time?.value}function re(i){return i?.duration?.unit??i?.time?.unit}let ee=de(()=>{const i={};for(const g of S.hops){const f=g.timing?.use||"Other";i[f]||(i[f]=[]),i[f].push(g)}for(const[g,f]of Object.entries(i))(g==="add_to_boil"||g==="Boil"||g==="boil")&&f.sort((k,V)=>(I(V.timing)||0)-(I(k.timing)||0));return i});function l(i){return i==null?"--":i.toFixed(0)+"g"}function G(i){return i==null?"--":i.toFixed(1)+"%"}function P(i){const g=I(i);if(g===void 0)return"--";const f=re(i)||"min",k=i?.use;return k==="dry_hop"||k==="dry hop"||k==="add_to_fermentation"?g===0?"At packaging":`${g} ${f}`:(k==="whirlpool"||k==="Whirlpool")&&i?.temperature?.value?`${g} ${f} @ ${i.temperature.value}°${i.temperature.unit||"C"}`:`${g} ${f}`}function j(i){if(!i)return"Other";const g=i.toLowerCase().replace(/\s+/g,"_");return{add_to_boil:"Boil",boil:"Boil",dry_hop:"Dry Hop",add_to_fermentation:"Fermentation",whirlpool:"Whirlpool",first_wort:"First Wort",mash:"Mash",aroma:"Aroma"}[g]||i.replace(/_/g," ").replace(/\b\w/g,k=>k.toUpperCase())}var u=ne(),B=ve(u);{var O=i=>{var g=bt(),f=s(a(g),2);pe(f,17,()=>Object.entries(e(ee)),ue,(k,V)=>{var te=de(()=>et(e(V),2));let q=()=>e(te)[0],A=()=>e(te)[1];var c=mt(),m=a(c),D=a(m,!0);t(m);var T=s(m,2),W=s(a(T));pe(W,21,A,ue,($,h)=>{var x=ft(),L=a(x),w=a(L),J=s(w);{var E=Y=>{var X=ht(),Z=a(X,!0);t(X),y(()=>d(Z,e(h).origin)),n(Y,X)};p(J,Y=>{e(h).origin&&Y(E)})}t(L);var N=s(L),K=a(N,!0);t(N);var Q=s(N),C=a(Q,!0);t(Q);var z=s(Q),U=a(z,!0);t(z);var ie=s(z),oe=a(ie,!0);t(ie),t(x),y((Y,X,Z)=>{d(w,`${e(h).name??""} `),d(K,Y),d(C,X),d(U,Z),d(oe,e(h).form||"--")},[()=>l(e(h).amount_grams),()=>G(e(h).alpha_acid_percent),()=>P(e(h).timing)]),n($,x)}),t(W),t(T),t(c),y($=>d(D,$),[()=>j(q())]),n(k,c)}),t(g),n(i,g)};p(B,i=>{S.hops.length>0&&i(O)})}n(ae,u),ye()}var kt=_('<div class="loading-state svelte-1r2e3yg"><div class="spinner svelte-1r2e3yg"></div> <p>Loading recipe...</p></div>'),wt=_('<div class="error-state svelte-1r2e3yg"><p class="error-message svelte-1r2e3yg"> </p></div>'),$t=_('<p class="recipe-author svelte-1r2e3yg"> </p>'),zt=_('<p class="recipe-type svelte-1r2e3yg"> </p>'),Ft=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Original Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Bt=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Final Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Ct=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">ABV</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),At=_('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Attenuation</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Mt=_('<p class="yeast-name svelte-1r2e3yg"> </p>'),Dt=_('<p class="yeast-lab svelte-1r2e3yg"> </p>'),Tt=_('<p class="yeast-temp svelte-1r2e3yg"> </p>'),Lt=_('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Yeast</h2> <div class="yeast-info svelte-1r2e3yg"><!> <!> <!></div></div>'),Ht=_('<div class="section svelte-1r2e3yg"><!></div>'),Rt=_('<div class="section svelte-1r2e3yg"><!></div>'),St=_('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">Batch Size</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),jt=_('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">IBU</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),Ot=_('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">SRM</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),It=_('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Notes</h2> <p class="notes svelte-1r2e3yg"> </p></div>'),Pt=_('<div class="recipe-container svelte-1r2e3yg"><div class="recipe-header svelte-1r2e3yg"><div class="header-left svelte-1r2e3yg"><h1 class="recipe-title svelte-1r2e3yg"> </h1> <!> <!></div> <div class="header-actions svelte-1r2e3yg"><a class="edit-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> Edit</a> <button type="button" class="delete-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Delete</button></div></div> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Fermentation Parameters</h2> <div class="param-grid svelte-1r2e3yg"><!> <!> <!> <!></div></div> <!> <!> <!> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Batch Details</h2> <div class="details-grid svelte-1r2e3yg"><!> <!> <!></div></div> <!> <div class="section svelte-1r2e3yg"><p class="created-date svelte-1r2e3yg"> </p></div> <div class="actions svelte-1r2e3yg"><button type="button" class="brew-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Brew This Recipe</button></div></div>'),Et=_('<div class="modal-overlay svelte-1r2e3yg" role="presentation"><div class="modal svelte-1r2e3yg" role="dialog" aria-modal="true" aria-labelledby="delete-recipe-title" tabindex="-1"><h2 id="delete-recipe-title" class="modal-title svelte-1r2e3yg">Delete Recipe?</h2> <p class="modal-text svelte-1r2e3yg"> </p> <div class="modal-actions svelte-1r2e3yg"><button type="button" class="modal-btn cancel svelte-1r2e3yg">Cancel</button> <button type="button" class="modal-btn delete svelte-1r2e3yg"> </button></div></div></div>'),Nt=_('<div class="page-container svelte-1r2e3yg"><div class="back-link svelte-1r2e3yg"><a href="/recipes" class="back-btn svelte-1r2e3yg"><svg class="back-icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <!></div> <!>',1);function ea(ae,S){ge(S,!0);const I=()=>it(ot,"$page",re),[re,ee]=vt();let l=le(null),G=le(!0),P=le(null),j=le(!1),u=le(!1),B=de(()=>{const c=parseInt(I().params.id||"",10);return isNaN(c)||c<=0?null:c});tt(async()=>{if(!e(B)){M(P,"Invalid recipe ID"),M(G,!1);return}try{M(l,await nt(e(B)),!0)}catch(c){M(P,c instanceof Error?c.message:"Failed to load recipe",!0)}finally{M(G,!1)}});async function O(){if(e(l)){M(u,!0);try{await dt(e(l).id),De("/recipes")}catch(c){M(P,c instanceof Error?c.message:"Failed to delete recipe",!0),M(u,!1),M(j,!1)}}}function i(){e(l)&&De(`/batches/new?recipe_id=${e(l).id}`)}var g=Nt();st("1r2e3yg",c=>{at(()=>{rt.title=`${(e(l)?.name||"Recipe")??""} | BrewSignal`})});var f=ve(g),k=s(a(f),2);{var V=c=>{var m=kt();n(c,m)},te=c=>{var m=ne(),D=ve(m);{var T=$=>{var h=wt(),x=a(h),L=a(x,!0);t(x),t(h),y(()=>d(L,e(P))),n($,h)},W=$=>{var h=ne(),x=ve(h);{var L=w=>{var J=Pt(),E=a(J),N=a(E),K=a(N),Q=a(K,!0);t(K);var C=s(K,2);{var z=r=>{var v=$t(),o=a(v);t(v),y(()=>d(o,`by ${e(l).author??""}`)),n(r,v)};p(C,r=>{e(l).author&&r(z)})}var U=s(C,2);{var ie=r=>{var v=zt(),o=a(v,!0);t(v),y(()=>d(o,e(l).type)),n(r,v)};p(U,r=>{e(l).type&&r(ie)})}t(N);var oe=s(N,2),Y=a(oe),X=s(Y,2);X.__click=()=>M(j,!0),t(oe),t(E);var Z=s(E,2),he=s(a(Z),2),fe=a(he);{var Te=r=>{var v=Ft(),o=s(a(v),2),b=a(o,!0);t(o),t(v),y(F=>d(b,F),[()=>e(l).og.toFixed(3)]),n(r,v)};p(fe,r=>{e(l).og&&r(Te)})}var me=s(fe,2);{var Le=r=>{var v=Bt(),o=s(a(v),2),b=a(o,!0);t(o),t(v),y(F=>d(b,F),[()=>e(l).fg.toFixed(3)]),n(r,v)};p(me,r=>{e(l).fg&&r(Le)})}var be=s(me,2);{var He=r=>{var v=Ct(),o=s(a(v),2),b=a(o);t(o),t(v),y(F=>d(b,`${F??""}%`),[()=>e(l).abv.toFixed(1)]),n(r,v)};p(be,r=>{e(l).abv&&r(He)})}var Re=s(be,2);{var Se=r=>{var v=At(),o=s(a(v),2),b=a(o);t(o),t(v),y(F=>d(b,`${F??""}%`),[()=>e(l).yeast_attenuation.toFixed(0)]),n(r,v)};p(Re,r=>{e(l).yeast_attenuation&&r(Se)})}t(he),t(Z);var xe=s(Z,2);{var je=r=>{var v=Lt(),o=s(a(v),2),b=a(o);{var F=H=>{var R=Mt(),se=a(R,!0);t(R),y(()=>d(se,e(l).yeast_name)),n(H,R)};p(b,H=>{e(l).yeast_name&&H(F)})}var Me=s(b,2);{var Ke=H=>{var R=Dt(),se=a(R,!0);t(R),y(()=>d(se,e(l).yeast_lab)),n(H,R)};p(Me,H=>{e(l).yeast_lab&&H(Ke)})}var Ye=s(Me,2);{var qe=H=>{var R=Tt(),se=a(R);t(R),y((Je,Qe)=>d(se,`Temperature: ${Je??""}-${Qe??""}°C`),[()=>e(l).yeast_temp_min.toFixed(0),()=>e(l).yeast_temp_max.toFixed(0)]),n(H,R)};p(Ye,H=>{e(l).yeast_temp_min!=null&&e(l).yeast_temp_max!=null&&H(qe)})}t(o),t(v),n(r,v)};p(xe,r=>{(e(l).yeast_name||e(l).yeast_temp_min||e(l).yeast_temp_max)&&r(je)})}var ke=s(xe,2);{var Oe=r=>{var v=Ht(),o=a(v);yt(o,{get fermentables(){return e(l).fermentables}}),t(v),n(r,v)};p(ke,r=>{e(l).fermentables&&e(l).fermentables.length>0&&r(Oe)})}var we=s(ke,2);{var Ie=r=>{var v=Rt(),o=a(v);xt(o,{get hops(){return e(l).hops}}),t(v),n(r,v)};p(we,r=>{e(l).hops&&e(l).hops.length>0&&r(Ie)})}var ce=s(we,2),$e=s(a(ce),2),ze=a($e);{var Pe=r=>{var v=St(),o=s(a(v),2),b=a(o);t(o),t(v),y(F=>d(b,`${F??""} L`),[()=>e(l).batch_size_liters.toFixed(1)]),n(r,v)};p(ze,r=>{e(l).batch_size_liters&&r(Pe)})}var Fe=s(ze,2);{var Ee=r=>{var v=jt(),o=s(a(v),2),b=a(o,!0);t(o),t(v),y(F=>d(b,F),[()=>e(l).ibu.toFixed(0)]),n(r,v)};p(Fe,r=>{e(l).ibu&&r(Ee)})}var Ne=s(Fe,2);{var Ue=r=>{var v=Ot(),o=s(a(v),2),b=a(o,!0);t(o),t(v),y(F=>d(b,F),[()=>e(l).color_srm.toFixed(1)]),n(r,v)};p(Ne,r=>{e(l).color_srm&&r(Ue)})}t($e),t(ce);var Be=s(ce,2);{var Ge=r=>{var v=It(),o=s(a(v),2),b=a(o,!0);t(o),t(v),y(()=>d(b,e(l).notes)),n(r,v)};p(Be,r=>{e(l).notes&&r(Ge)})}var _e=s(Be,2),Ce=a(_e),Ve=a(Ce);t(Ce),t(_e);var Ae=s(_e,2),We=a(Ae);We.__click=i,t(Ae),t(J),y(r=>{d(Q,e(l).name),lt(Y,"href",`/recipes/${e(l).id??""}/edit`),d(Ve,`Created ${r??""}`)},[()=>new Date(e(l).created_at).toLocaleDateString()]),n(w,J)};p(x,w=>{e(l)&&w(L)},!0)}n($,h)};p(D,$=>{e(P)?$(T):$(W,!1)},!0)}n(c,m)};p(k,c=>{e(G)?c(V):c(te,!1)})}t(f);var q=s(f,2);{var A=c=>{var m=Et();m.__click=()=>M(j,!1),m.__keydown=w=>w.key==="Escape"&&M(j,!1);var D=a(m);D.__click=w=>w.stopPropagation(),D.__keydown=w=>w.stopPropagation();var T=s(a(D),2),W=a(T);t(T);var $=s(T,2),h=a($);h.__click=()=>M(j,!1);var x=s(h,2);x.__click=O;var L=a(x,!0);t(x),t($),t(D),t(m),y(()=>{d(W,`Are you sure you want to delete "${e(l)?.name??""}"? This cannot be undone.`),h.disabled=e(u),x.disabled=e(u),d(L,e(u)?"Deleting...":"Delete Recipe")}),n(c,m)};p(q,c=>{e(j)&&c(A)})}n(ae,g),ye(),ee()}Xe(["click","keydown"]);export{ea as component,Zt as universal};
