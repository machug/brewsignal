import{d as he,f as R,s as V,e as ze,a as h,c as de}from"../chunks/CCsyRfs1.js";import{a as fe,s as o,p as f,d as a,h as e,e as t,r as s,i as ye,t as A,c as l,g as be,o as xe,aJ as ke,u as we,aw as Be,f as ie}from"../chunks/DyQh1CUw.js";import{i as U}from"../chunks/HQeVE6fZ.js";import{h as Se}from"../chunks/BZNRDT2A.js";import{r as g,s as Ce}from"../chunks/DPJa9AuX.js";import{s as Re,a as Me}from"../chunks/BDbtNKFo.js";import{g as Z}from"../chunks/C2wp5FgX.js";import{p as Ee}from"../chunks/C70Fl3mE.js";import{a1 as je,a2 as qe}from"../chunks/DciRO_hW.js";import{b}from"../chunks/B_acRpXz.js";import{p as Ae}from"../chunks/B-ZSmncO.js";const Fe=!1,et=Object.freeze(Object.defineProperty({__proto__:null,prerender:Fe},Symbol.toStringTag,{value:"Module"}));var Ne=R('<div class="error-banner svelte-1umens4"><svg class="error-icon svelte-1umens4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),Oe=R('<form class="recipe-form svelte-1umens4"><!> <div class="form-section svelte-1umens4"><h2 class="section-title svelte-1umens4">Basic Information</h2> <div class="form-row svelte-1umens4"><label class="form-label svelte-1umens4">Recipe Name * <input type="text" required class="form-input svelte-1umens4" placeholder="e.g., Philter XPA Clone"/></label></div> <div class="form-row svelte-1umens4"><label class="form-label svelte-1umens4">Brewer <input type="text" class="form-input svelte-1umens4" placeholder="Your name"/></label> <label class="form-label svelte-1umens4">Style <input type="text" class="form-input svelte-1umens4" placeholder="e.g., American Pale Ale"/></label></div></div> <div class="form-section svelte-1umens4"><h2 class="section-title svelte-1umens4">Batch Details</h2> <div class="form-row svelte-1umens4"><label class="form-label svelte-1umens4">Batch Size (L) * <input type="number" required step="0.1" min="0" class="form-input svelte-1umens4"/></label> <label class="form-label svelte-1umens4">Color (SRM) <input type="number" step="0.1" min="0" class="form-input svelte-1umens4"/></label> <label class="form-label svelte-1umens4">Bitterness (IBU) <input type="number" step="0.1" min="0" class="form-input svelte-1umens4"/></label></div></div> <div class="form-section svelte-1umens4"><h2 class="section-title svelte-1umens4">Fermentation Targets</h2> <div class="form-row svelte-1umens4"><label class="form-label svelte-1umens4">Original Gravity * <input type="number" required step="0.001" min="1.000" max="1.200" class="form-input svelte-1umens4"/></label> <label class="form-label svelte-1umens4">Final Gravity * <input type="number" required step="0.001" min="1.000" max="1.200" class="form-input svelte-1umens4"/></label> <label class="form-label svelte-1umens4">ABV (%) * <input type="number" required step="0.1" min="0" max="20" class="form-input svelte-1umens4"/></label></div></div> <div class="form-section svelte-1umens4"><h2 class="section-title svelte-1umens4">Notes</h2> <label class="form-label svelte-1umens4">Brewing Notes <textarea rows="4" class="form-textarea svelte-1umens4" placeholder="Optional brewing notes, tips, or variations..."></textarea></label></div> <div class="form-actions svelte-1umens4"><button type="button" class="btn-secondary svelte-1umens4">Cancel</button> <button type="submit" class="btn-primary svelte-1umens4"> </button></div></form>');function Ie($,n){fe(n,!0);let F=Ae(n,"submitting",3,!1),N=o(f(n.recipe?.name??"")),O=o(f(n.recipe?.author??"")),p=o(f(n.recipe?.type??"")),z=o(f(n.recipe?.batch_size_liters??19)),u=o(f(n.recipe?.og??1.05)),y=o(f(n.recipe?.fg??1.01)),v=o(f(n.recipe?.abv??5)),I=o(f(n.recipe?.ibu??30)),x=o(f(n.recipe?.color_srm??10)),k=o(f(n.recipe?.notes??"")),c=o(null);async function ee(r){if(r.preventDefault(),l(c,null),e(z)<=0){l(c,"Batch size must be greater than zero");return}if(e(v)<0||e(v)>20){l(c,"ABV must be between 0% and 20%");return}if(e(x)!==null&&e(x)<0){l(c,"Color (SRM) cannot be negative");return}if(e(u)<=e(y)){l(c,"Original gravity must be greater than final gravity");return}const T={name:e(N),author:e(O)||void 0,type:e(p)||void 0,batch_size_liters:e(z),og:e(u),fg:e(y),abv:e(v),ibu:e(I)??void 0,color_srm:e(x)??void 0,notes:e(k)||void 0};await n.onSubmit(T)}var M=Oe(),J=a(M);{var te=r=>{var T=Ne(),pe=t(a(T),2),ge=a(pe,!0);s(pe),s(T),A(()=>V(ge,e(c))),h(r,T)};U(J,r=>{e(c)&&r(te)})}var i=t(J,2),m=t(a(i),2),X=a(m),Y=t(a(X));g(Y),s(X),s(m);var H=t(m,2),d=a(H),_=t(a(d));g(_),s(d);var w=t(d,2),E=t(a(w));g(E),s(w),s(H),s(i);var B=t(i,2),P=t(a(B),2),S=a(P),D=t(a(S));g(D),s(S);var G=t(S,2),L=t(a(G));g(L),s(G);var K=t(G,2),Q=t(a(K));g(Q),s(K),s(P),s(B);var C=t(B,2),j=t(a(C),2),q=a(j),W=t(a(q));g(W),s(q);var ae=t(q,2),ne=t(a(ae));g(ne),s(ae);var oe=t(ae,2),ve=t(a(oe));g(ve),s(oe),s(j),s(C);var se=t(C,2),ue=t(a(se),2),ce=t(a(ue));ye(ce),s(ue),s(se);var me=t(se,2),re=a(me);re.__click=function(...r){n.onCancel?.apply(this,r)};var le=t(re,2),_e=a(le,!0);s(le),s(me),s(M),A(()=>{re.disabled=F(),le.disabled=F(),V(_e,F()?"Saving...":n.recipe?"Update Recipe":"Create Recipe")}),ze("submit",M,ee),b(Y,()=>e(N),r=>l(N,r)),b(_,()=>e(O),r=>l(O,r)),b(E,()=>e(p),r=>l(p,r)),b(D,()=>e(z),r=>l(z,r)),b(L,()=>e(x),r=>l(x,r)),b(Q,()=>e(I),r=>l(I,r)),b(W,()=>e(u),r=>l(u,r)),b(ne,()=>e(y),r=>l(y,r)),b(ve,()=>e(v),r=>l(v,r)),b(ce,()=>e(k),r=>l(k,r)),h($,M),be()}he(["click"]);var Pe=R('<div class="loading-state svelte-1gzu0z"><div class="spinner svelte-1gzu0z"></div> <p>Loading recipe...</p></div>'),De=R('<div class="error-state svelte-1gzu0z"><p class="error-message svelte-1gzu0z"> </p></div>'),Ge=R('<div class="error-banner svelte-1gzu0z"><svg class="error-icon svelte-1gzu0z" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),Le=R('<div class="page-header svelte-1gzu0z"><h1 class="page-title svelte-1gzu0z">Edit Recipe</h1> <p class="page-description svelte-1gzu0z"> </p></div> <!> <!>',1),Te=R('<div class="page-container svelte-1gzu0z"><div class="back-link svelte-1gzu0z"><a class="back-btn svelte-1gzu0z"><svg class="back-icon svelte-1gzu0z" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipe</a></div> <!></div>');function tt($,n){fe(n,!0);const F=()=>Me(Ee,"$page",N),[N,O]=Re();let p=o(null),z=o(!0),u=o(null),y=o(!1),v=we(()=>{const i=parseInt(F().params.id||"",10);return isNaN(i)||i<=0?null:i});xe(async()=>{if(!e(v)){l(z,!1),Z("/recipes");return}try{l(p,await je(e(v)),!0)}catch(i){l(u,i instanceof Error?i.message:"Failed to load recipe",!0)}finally{l(z,!1)}});async function I(i){if(e(v)){l(y,!0),l(u,null);try{await qe(e(v),i),Z(`/recipes/${e(v)}`)}catch(m){l(u,m instanceof Error?m.message:"Failed to update recipe",!0),l(y,!1)}}}function x(){e(v)?Z(`/recipes/${e(v)}`):Z("/recipes")}var k=Te();Se("1gzu0z",i=>{ke(()=>{Be.title=`Edit ${(e(p)?.name||"Recipe")??""} | BrewSignal`})});var c=a(k),ee=a(c);s(c);var M=t(c,2);{var J=i=>{var m=Pe();h(i,m)},te=i=>{var m=de(),X=ie(m);{var Y=d=>{var _=De(),w=a(_),E=a(w,!0);s(w),s(_),A(()=>V(E,e(u))),h(d,_)},H=d=>{var _=de(),w=ie(_);{var E=B=>{var P=Le(),S=ie(P),D=t(a(S),2),G=a(D);s(D),s(S);var L=t(S,2);{var K=C=>{var j=Ge(),q=t(a(j),2),W=a(q,!0);s(q),s(j),A(()=>V(W,e(u))),h(C,j)};U(L,C=>{e(u)&&C(K)})}var Q=t(L,2);Ie(Q,{get recipe(){return e(p)},onSubmit:I,onCancel:x,get submitting(){return e(y)}}),A(()=>V(G,`Editing: ${e(p).name??""}`)),h(B,P)};U(w,B=>{e(p)&&B(E)},!0)}h(d,_)};U(X,d=>{e(u)&&!e(p)?d(Y):d(H,!1)},!0)}h(i,m)};U(M,i=>{e(z)?i(J):i(te,!1)})}s(k),A(()=>Ce(ee,"href",`/recipes/${e(v)??""}`)),h($,k),be(),O()}export{tt as component,et as universal};
