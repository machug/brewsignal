import{d as fe,f as R,s as J,e as ze,a as h,c as pe}from"../chunks/Bkky6kvZ.js";import{a as be,s as o,p as f,d as a,h as e,e as t,r as s,i as ye,t as A,c as l,g as _e,o as ke,aJ as xe,u as we,ax as Be,f as ie}from"../chunks/813s5maz.js";import{i as V}from"../chunks/Bf7HnLem.js";import{h as Ce}from"../chunks/BgIwEmqo.js";import{r as g,s as Se}from"../chunks/UKAZQVVw.js";import{s as Me,a as Re}from"../chunks/Rx9Mwdtx.js";import{g as $}from"../chunks/F9gJPe3z.js";import{p as je}from"../chunks/DrfFrr0Q.js";import{a1 as Ee,a2 as qe}from"../chunks/D3bWYmks.js";import{b}from"../chunks/Bjks-vZK.js";import{p as Ae}from"../chunks/B-xGjlKy.js";const Fe=!1,et=Object.freeze(Object.defineProperty({__proto__:null,prerender:Fe},Symbol.toStringTag,{value:"Module"}));var Ne=R('<div class="error-banner svelte-1umens4"><svg class="error-icon svelte-1umens4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),Oe=R('<form class="recipe-form svelte-1umens4"><!> <div class="form-section svelte-1umens4"><h2 class="section-title svelte-1umens4">Basic Information</h2> <div class="form-row svelte-1umens4"><label class="form-label svelte-1umens4">Recipe Name * <input type="text" required class="form-input svelte-1umens4" placeholder="e.g., Philter XPA Clone"/></label></div> <div class="form-row svelte-1umens4"><label class="form-label svelte-1umens4">Brewer <input type="text" class="form-input svelte-1umens4" placeholder="Your name"/></label> <label class="form-label svelte-1umens4">Style <input type="text" class="form-input svelte-1umens4" placeholder="e.g., American Pale Ale"/></label></div></div> <div class="form-section svelte-1umens4"><h2 class="section-title svelte-1umens4">Batch Details</h2> <div class="form-row svelte-1umens4"><label class="form-label svelte-1umens4">Batch Size (L) * <input type="number" required step="0.1" min="0" class="form-input svelte-1umens4"/></label> <label class="form-label svelte-1umens4">Color (SRM) <input type="number" step="0.1" min="0" class="form-input svelte-1umens4"/></label> <label class="form-label svelte-1umens4">Bitterness (IBU) <input type="number" step="0.1" min="0" class="form-input svelte-1umens4"/></label></div></div> <div class="form-section svelte-1umens4"><h2 class="section-title svelte-1umens4">Fermentation Targets</h2> <div class="form-row svelte-1umens4"><label class="form-label svelte-1umens4">Original Gravity * <input type="number" required step="0.001" min="1.000" max="1.200" class="form-input svelte-1umens4"/></label> <label class="form-label svelte-1umens4">Final Gravity * <input type="number" required step="0.001" min="1.000" max="1.200" class="form-input svelte-1umens4"/></label> <label class="form-label svelte-1umens4">ABV (%) * <input type="number" required step="0.1" min="0" max="20" class="form-input svelte-1umens4"/></label></div></div> <div class="form-section svelte-1umens4"><h2 class="section-title svelte-1umens4">Notes</h2> <label class="form-label svelte-1umens4">Brewing Notes <textarea rows="4" class="form-textarea svelte-1umens4" placeholder="Optional brewing notes, tips, or variations..."></textarea></label></div> <div class="form-actions svelte-1umens4"><button type="button" class="btn-secondary svelte-1umens4">Cancel</button> <button type="submit" class="btn-primary svelte-1umens4"> </button></div></form>');function Ie(ee,n){be(n,!0);let F=Ae(n,"submitting",3,!1),N=o(f(n.recipe?.name??"")),O=o(f(n.recipe?.author??"")),d=o(f(n.recipe?.type??"")),z=o(f(n.recipe?.batch_size_liters??19)),u=o(f(n.recipe?.og??1.05)),y=o(f(n.recipe?.fg??1.01)),v=o(f(n.recipe?.abv??5)),I=o(f(n.recipe?.ibu??30)),k=o(f(n.recipe?.color_srm??10)),x=o(f(n.recipe?.notes??"")),c=o(null);async function te(r){if(r.preventDefault(),l(c,null),e(z)<=0){l(c,"Batch size must be greater than zero");return}if(e(v)<0||e(v)>20){l(c,"ABV must be between 0% and 20%");return}if(e(k)!==null&&e(k)<0){l(c,"Color (SRM) cannot be negative");return}if(e(u)<=e(y)){l(c,"Original gravity must be greater than final gravity");return}const U={name:e(N),author:e(O)||void 0,type:e(d)||void 0,batch_size_liters:e(z),og:e(u),fg:e(y),abv:e(v),ibu:e(I)??void 0,color_srm:e(k)??void 0,notes:e(x)||void 0};await n.onSubmit(U)}var j=Oe(),X=a(j);{var ae=r=>{var U=Ne(),de=t(a(U),2),he=a(de,!0);s(de),s(U),A(()=>J(he,e(c))),h(r,U)};V(X,r=>{e(c)&&r(ae)})}var i=t(X,2),m=t(a(i),2),Y=a(m),H=t(a(Y));g(H),s(Y),s(m);var K=t(m,2),p=a(K),_=t(a(p));g(_),s(p);var w=t(p,2),E=t(a(w));g(E),s(w),s(K),s(i);var B=t(i,2),P=t(a(B),2),C=a(P),D=t(a(C));g(D),s(C);var L=t(C,2),G=t(a(L));g(G),s(L);var Q=t(L,2),W=t(a(Q));g(W),s(Q),s(P),s(B);var S=t(B,2),q=t(a(S),2),M=a(q),Z=t(a(M));g(Z),s(M);var T=t(M,2),ne=t(a(T));g(ne),s(T);var oe=t(T,2),ve=t(a(oe));g(ve),s(oe),s(q),s(S);var se=t(S,2),ue=t(a(se),2),ce=t(a(ue));ye(ce),s(ue),s(se);var me=t(se,2),re=a(me);re.__click=function(...r){n.onCancel?.apply(this,r)};var le=t(re,2),ge=a(le,!0);s(le),s(me),s(j),A(()=>{re.disabled=F(),le.disabled=F(),J(ge,F()?"Saving...":n.recipe?"Update Recipe":"Create Recipe")}),ze("submit",j,te),b(H,()=>e(N),r=>l(N,r)),b(_,()=>e(O),r=>l(O,r)),b(E,()=>e(d),r=>l(d,r)),b(D,()=>e(z),r=>l(z,r)),b(G,()=>e(k),r=>l(k,r)),b(W,()=>e(I),r=>l(I,r)),b(Z,()=>e(u),r=>l(u,r)),b(ne,()=>e(y),r=>l(y,r)),b(ve,()=>e(v),r=>l(v,r)),b(ce,()=>e(x),r=>l(x,r)),h(ee,j),_e()}fe(["click"]);var Pe=R('<div class="loading-state svelte-1gzu0z"><div class="spinner svelte-1gzu0z"></div> <p>Loading recipe...</p></div>'),De=R('<div class="error-state svelte-1gzu0z"><p class="error-message svelte-1gzu0z"> </p></div>'),Le=R('<div class="error-banner svelte-1gzu0z"><svg class="error-icon svelte-1gzu0z" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="error-text svelte-1gzu0z"> </span> <button class="error-dismiss svelte-1gzu0z" aria-label="Dismiss error"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="svelte-1gzu0z"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Ge=R('<div class="page-header svelte-1gzu0z"><h1 class="page-title svelte-1gzu0z">Edit Recipe</h1> <p class="page-description svelte-1gzu0z"> </p></div> <!> <!>',1),Te=R('<div class="page-container svelte-1gzu0z"><div class="back-link svelte-1gzu0z"><a class="back-btn svelte-1gzu0z"><svg class="back-icon svelte-1gzu0z" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipe</a></div> <!></div>');function tt(ee,n){be(n,!0);const F=()=>Re(je,"$page",N),[N,O]=Me();let d=o(null),z=o(!0),u=o(null),y=o(!1),v=we(()=>{const i=parseInt(F().params.id||"",10);return isNaN(i)||i<=0?null:i});ke(async()=>{if(!e(v)){l(z,!1),$("/recipes");return}try{l(d,await Ee(e(v)),!0)}catch(i){l(u,i instanceof Error?i.message:"Failed to load recipe",!0)}finally{l(z,!1)}});async function I(i){if(e(v)){l(y,!0),l(u,null);try{await qe(e(v),i),$(`/recipes/${e(v)}`)}catch(m){l(u,m instanceof Error?m.message:"Failed to update recipe",!0),l(y,!1)}}}function k(){e(v)?$(`/recipes/${e(v)}`):$("/recipes")}var x=Te();Ce("1gzu0z",i=>{xe(()=>{Be.title=`Edit ${(e(d)?.name||"Recipe")??""} | BrewSignal`})});var c=a(x),te=a(c);s(c);var j=t(c,2);{var X=i=>{var m=Pe();h(i,m)},ae=i=>{var m=pe(),Y=ie(m);{var H=p=>{var _=De(),w=a(_),E=a(w,!0);s(w),s(_),A(()=>J(E,e(u))),h(p,_)},K=p=>{var _=pe(),w=ie(_);{var E=B=>{var P=Ge(),C=ie(P),D=t(a(C),2),L=a(D);s(D),s(C);var G=t(C,2);{var Q=S=>{var q=Le(),M=t(a(q),2),Z=a(M,!0);s(M);var T=t(M,2);T.__click=()=>l(u,null),s(q),A(()=>J(Z,e(u))),h(S,q)};V(G,S=>{e(u)&&S(Q)})}var W=t(G,2);Ie(W,{get recipe(){return e(d)},onSubmit:I,onCancel:k,get submitting(){return e(y)}}),A(()=>J(L,`Editing: ${e(d).name??""}`)),h(B,P)};V(w,B=>{e(d)&&B(E)},!0)}h(p,_)};V(Y,p=>{e(u)&&!e(d)?p(H):p(K,!1)},!0)}h(i,m)};V(j,i=>{e(z)?i(X):i(ae,!1)})}s(x),A(()=>Se(te,"href",`/recipes/${e(v)??""}`)),h(ee,x),_e(),O()}fe(["click"]);export{tt as component,et as universal};
