import{d as U,f,e as m,a as d,s as A}from"../chunks/DZ15WIaR.js";import{a as J,g as l,t as h,h as N,e as W,d as c,at as X,i,s as g,j as p,c as s,n as $,f as q}from"../chunks/CdgKpHHH.js";import{i as b}from"../chunks/CiVu40Aa.js";import{h as K}from"../chunks/DwuO6wC8.js";import{s as P}from"../chunks/CXy9Ft3Z.js";import{g as w}from"../chunks/BcpNh-dK.js";import{s as T}from"../chunks/CxswqFen.js";var Z=f('<div class="spinner svelte-559ncu"></div> <p class="drop-text svelte-559ncu">Importing recipe...</p>',1),G=f('<div class="upload-icon svelte-559ncu">ðŸ“„</div> <p class="drop-text svelte-559ncu">Drop recipe file here</p> <p class="drop-subtext svelte-559ncu">or click to browse</p> <input type="file" accept=".xml,.json" class="file-input svelte-559ncu"/>',1),H=f('<div class="error-box svelte-559ncu"><svg class="error-icon svelte-559ncu" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="error-text svelte-559ncu"> </p></div>'),Q=f(`<div class="page-container svelte-559ncu"><div class="back-link svelte-559ncu"><a href="/recipes" class="back-btn svelte-559ncu"><svg class="back-icon svelte-559ncu" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <div class="import-container svelte-559ncu"><h1 class="page-title svelte-559ncu">Import Recipe</h1> <p class="page-description svelte-559ncu">Upload recipe files from Brewfather, BeerSmith, Brewer's Friend, or any brewing software</p> <div role="button" tabindex="0" aria-label="Upload recipe file by dropping or clicking"><!></div> <div class="file-info svelte-559ncu"><p class="info-text svelte-559ncu">Supported: BeerXML (.xml), BeerJSON (.json), Brewfather JSON (.json) - max 1MB</p></div> <!></div></div>`);function ne(y,B){J(B,!0);const j=1e6;let o=g(!1),n=g(null),v=g(!1);async function _(e){s(n,null);const t=e.name.toLowerCase();if(!t.endsWith(".xml")&&!t.endsWith(".json")){s(n,"Please upload a .xml or .json recipe file");return}if(e.size>j){s(n,"File must be smaller than 1MB");return}s(o,!0);try{const a=await T(e);a.length===1?w(`/recipes/${a[0].id}`):w("/recipes")}catch(a){s(n,a instanceof Error?a.message:"Failed to import recipe",!0)}finally{s(o,!1)}}function D(e){e.preventDefault(),s(v,!1);const t=e.dataTransfer?.files[0];t&&_(t)}function I(e){e.preventDefault(),s(v,!0)}function M(){s(v,!1)}function S(e){const a=e.target.files?.[0];a&&_(a)}function F(e){if(e.key==="Enter"||e.key===" "){e.preventDefault();const t=document.querySelector(".file-input");t&&t.click()}}var u=Q();K("559ncu",e=>{W(()=>{X.title="Import Recipe | BrewSignal"})});var k=l(c(u),2),r=l(c(k),4);let x;r.__keydown=F;var E=c(r);{var L=e=>{var t=Z();$(2),d(e,t)},R=e=>{var t=G(),a=l(q(t),6);a.__change=S,h(()=>a.disabled=i(o)),d(e,t)};b(E,e=>{i(o)?e(L):e(R,!1)})}p(r);var z=l(r,4);{var C=e=>{var t=H(),a=l(c(t),2),O=c(a,!0);p(a),p(t),h(()=>A(O,i(n))),d(e,t)};b(z,e=>{i(n)&&e(C)})}p(k),p(u),h(()=>x=P(r,1,"drop-zone svelte-559ncu",null,x,{active:i(v),uploading:i(o)})),m("drop",r,D),m("dragover",r,I),m("dragleave",r,M),d(y,u),N()}U(["keydown","change"]);export{ne as component};
