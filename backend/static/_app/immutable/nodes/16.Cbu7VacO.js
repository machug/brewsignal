import{d as Wa,f as p,a as o,s as j,t as Se,b as Bt,c as qa}from"../chunks/DZ15WIaR.js";import{a as Ya,s as c,p as Ns,au as Rt,i as e,o as Qa,h as Xa,c as a,e as Za,g as s,d as i,l as Ls,at as $a,j as t,n as P,t as k,f as Te}from"../chunks/CdgKpHHH.js";import{e as Js,i as Vs}from"../chunks/Xm3Ul2fO.js";import{i as _}from"../chunks/CiVu40Aa.js";import{h as ei}from"../chunks/DwuO6wC8.js";import{r as U,s as Q}from"../chunks/CnbDaB_W.js";import{s as G}from"../chunks/CXy9Ft3Z.js";import{b as R}from"../chunks/DaMP4aMW.js";import{i as si,s as ti,b as Gs}from"../chunks/DKHZoZvF.js";import{c as b,f as ai,u as Ce,a as ii}from"../chunks/C_yfWKmV.js";var ni=p('<div class="loading-state svelte-hj1sc2"><div class="loading-spinner svelte-hj1sc2"></div> <span class="svelte-hj1sc2">Loading system information...</span></div>'),li=p('<div class="info-grid svelte-hj1sc2"><div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Hostname</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Version</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Uptime</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">IP Address</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div></div>'),ri=p('<p class="text-muted svelte-hj1sc2">Unable to load system information</p>'),oi=p('<div class="setting-row sub-setting svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Smoothing Samples</span> <span class="setting-description svelte-hj1sc2">Number of readings to average</span></div> <select class="select-input-sm svelte-hj1sc2"><option class="svelte-hj1sc2">3</option><option class="svelte-hj1sc2">5</option><option class="svelte-hj1sc2">10</option><option class="svelte-hj1sc2">15</option><option class="svelte-hj1sc2">20</option></select></div>'),ci=p('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),vi=p('<p class="config-error svelte-hj1sc2"> </p>'),di=p('<p class="config-success svelte-hj1sc2">Settings saved</p>'),pi=p('<option class="svelte-hj1sc2"> </option>'),hi=p('<div class="loading-spinner-small svelte-hj1sc2"></div>'),ui=p('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Connection Status</span></div> <span> </span></div>'),_i=p("<span> </span>"),fi=p('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),gi=p('<p class="config-error svelte-hj1sc2"> </p>'),mi=p('<p class="config-success svelte-hj1sc2">Settings saved</p>'),ji=p('<!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Home Assistant URL</span> <span class="setting-description svelte-hj1sc2">e.g., http://192.168.1.100:8123</span></div> <input type="url" placeholder="http://homeassistant.local:8123" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Access Token</span> <span class="setting-description svelte-hj1sc2">Long-lived access token from HA profile</span></div> <input type="password" placeholder="Enter token..." class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Test Connection</span></div> <div class="test-connection svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Temp Entity</span> <span class="setting-description svelte-hj1sc2">e.g., sensor.fermenter_room_temperature</span></div> <input type="text" placeholder="sensor.xxx_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Optional humidity sensor</span></div> <input type="text" placeholder="sensor.xxx_humidity" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Weather Entity</span> <span class="setting-description svelte-hj1sc2">For forecast display, e.g., weather.home</span></div> <input type="text" placeholder="weather.home" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Chamber Temperature Entity</span> <span class="setting-description svelte-hj1sc2">Temperature sensor inside fermentation chamber</span></div> <input type="text" placeholder="sensor.chamber_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Chamber Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Humidity sensor inside fermentation chamber</span></div> <input type="text" placeholder="sensor.chamber_humidity" class="input-field svelte-hj1sc2"/></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>',1),bi=p('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),yi=p('<p class="config-error svelte-hj1sc2"> </p>'),wi=p('<p class="config-success svelte-hj1sc2">Settings saved</p>'),ki=p(`<p class="section-note svelte-hj1sc2">Configure heater switches per batch. These are the default settings used when a batch doesn't specify its own.</p> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Default Target Temperature</span> <span class="setting-description svelte-hj1sc2"> </span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" step="0.5" class="input-field input-number svelte-hj1sc2"/> <span class="unit svelte-hj1sc2"> </span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Default Hysteresis</span> <span class="setting-description svelte-hj1sc2"> </span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" class="input-field input-number svelte-hj1sc2"/> <span class="unit svelte-hj1sc2"> </span></div></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>`,1),xi=p('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Temperature Control</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Temperature Control</span> <span class="setting-description svelte-hj1sc2">Automatically control heaters for batches</span></div> <button type="button" aria-label="Toggle temperature control"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div>'),Si=p('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Alert Threshold</span> <span class="setting-description svelte-hj1sc2">Alert when forecast differs from target by this amount (°C)</span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" min="1" max="15" step="0.5" class="input-field-sm svelte-hj1sc2"/> <span class="unit svelte-hj1sc2">°C</span></div></div> <p class="setting-hint mt-2 svelte-hj1sc2">Alerts are generated when the forecast high or low temperatures differ from your target fermentation temperature by more than the threshold.</p>',1),Ti=p('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Ci=p('<p class="config-error svelte-hj1sc2"> </p>'),Ai=p('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Mi=p('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Weather Alerts</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Weather Alerts</span> <span class="setting-description svelte-hj1sc2">Get alerts when forecast temps may affect fermentation</span></div> <button type="button" aria-label="Toggle weather alerts"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div>'),Ei=p('<option class="svelte-hj1sc2"> </option>'),Ii=p('<a target="_blank" rel="noopener" class="text-amber-400 hover:underline ml-1 svelte-hj1sc2">Setup guide →</a>'),zi=p('<p class="setting-hint mb-3 svelte-hj1sc2"> <!></p>'),Fi=p('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">API Key</span> <span class="setting-description svelte-hj1sc2"> </span></div> <input type="password" placeholder="sk-..." class="input-field svelte-hj1sc2"/></div>'),Hi=p('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ollama URL</span> <span class="setting-description svelte-hj1sc2">URL of your Ollama server</span></div> <input type="text" placeholder="http://localhost:11434" class="input-field svelte-hj1sc2"/></div>'),Pi=p('<option class="svelte-hj1sc2"> </option>'),Ui=p('<p class="setting-hint mb-3 svelte-hj1sc2"> </p>'),Ri=p('<span class="loading-dot svelte-hj1sc2"></span> Testing...',1),Bi=p('<p class="config-success mt-2 svelte-hj1sc2"> </p>'),Oi=p('<p class="config-error mt-2 svelte-hj1sc2"> </p>'),Di=p('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Provider</span> <span class="setting-description svelte-hj1sc2">Choose where to run the AI model</span></div> <select class="input-field input-select svelte-hj1sc2"></select></div> <!> <!> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Model</span> <span class="setting-description svelte-hj1sc2">AI model to use</span></div> <select class="input-field input-select svelte-hj1sc2"><option class="svelte-hj1sc2">Default</option><!></select></div> <!> <details class="mt-4 svelte-hj1sc2"><summary class="cursor-pointer text-zinc-400 hover:text-zinc-200 svelte-hj1sc2">Advanced Settings</summary> <div class="mt-3 space-y-3 svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature</span> <span class="setting-description svelte-hj1sc2">Higher = more creative, lower = more focused</span></div> <input type="number" min="0" max="2" step="0.1" class="input-field input-number svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Max Tokens</span> <span class="setting-description svelte-hj1sc2">Maximum response length</span></div> <input type="number" min="100" max="8000" step="100" class="input-field input-number svelte-hj1sc2"/></div></div></details> <div class="mt-4 svelte-hj1sc2"><button type="button" class="btn-secondary svelte-hj1sc2"><!></button> <!></div>',1),Ni=p('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Li=p('<p class="config-error svelte-hj1sc2"> </p>'),Ji=p('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Vi=p('<div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Total Readings</span></div> <div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Estimated Size</span></div>',1),Gi=p('<p class="text-muted svelte-hj1sc2">Unable to load storage stats</p>'),Ki=p('<button type="button" class="btn-danger-sm svelte-hj1sc2"> </button>'),Wi=p('<p class="cleanup-message svelte-hj1sc2"> </p>'),qi=p('<span class="loading-dot svelte-hj1sc2"></span> Rebooting...',1),Yi=Bt('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" class="svelte-hj1sc2"></path></svg> Reboot System',1),Qi=p('<span class="loading-dot svelte-hj1sc2"></span> Shutting down...',1),Xi=Bt('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" class="svelte-hj1sc2"></path></svg> Shutdown System',1),Zi=p(`<div class="grid gap-6 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">System Information</h2></div> <div class="card-body svelte-hj1sc2"><!></div></div> <div class="grid gap-6 md:grid-cols-2 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Application Settings</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature Units</span> <span class="setting-description svelte-hj1sc2">Display temperature in Celsius or Fahrenheit</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">°C</button> <button type="button">°F</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Gravity Units</span> <span class="setting-description svelte-hj1sc2">Display gravity as SG, Plato, or Brix</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">SG</button> <button type="button">°P</button> <button type="button">°Bx</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Minimum RSSI</span> <span class="setting-description svelte-hj1sc2">Ignore readings below this signal strength</span></div> <div class="rssi-input svelte-hj1sc2"><input type="number" min="-100" max="0" class="input-field-sm svelte-hj1sc2"/> <span class="input-suffix svelte-hj1sc2">dBm</span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Reading Smoothing</span> <span class="setting-description svelte-hj1sc2">Average multiple readings to reduce noise</span></div> <button type="button" aria-label="Toggle reading smoothing"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Identify by MAC</span> <span class="setting-description svelte-hj1sc2">Use MAC address instead of broadcast ID</span></div> <button type="button" aria-label="Toggle identify by MAC address"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Timezone</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description svelte-hj1sc2">Current timezone: <span class="font-mono text-[var(--accent)] svelte-hj1sc2"> </span></p> <div class="timezone-selector svelte-hj1sc2"><select class="select-input svelte-hj1sc2"></select> <!></div></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Home Assistant</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Integration</span> <span class="setting-description svelte-hj1sc2">Connect to Home Assistant for ambient temp and control</span></div> <button type="button" aria-label="Enable Home Assistant integration"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div> <!> <!> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">AI Brewing Assistant</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description mb-4 svelte-hj1sc2">Enable an AI assistant to help with recipe creation, fermentation troubleshooting, and brewing advice.
						Use a local model (Ollama) for free and private operation, or connect to cloud providers.</p> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable AI Assistant</span> <span class="setting-description svelte-hj1sc2">Turn on AI-powered brewing features</span></div> <button type="button" aria-label="Toggle AI assistant"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Storage & Data Cleanup</h2></div> <div class="card-body svelte-hj1sc2"><div class="storage-grid svelte-hj1sc2"><div class="storage-stats svelte-hj1sc2"><!></div> <div class="cleanup-section svelte-hj1sc2"><p class="section-description mb-3 svelte-hj1sc2">Remove old readings to free up storage. Readings older than the specified days will be permanently deleted.</p> <div class="cleanup-controls svelte-hj1sc2"><div class="cleanup-input-group svelte-hj1sc2"><label for="retention-days" class="svelte-hj1sc2">Keep readings from last</label> <input id="retention-days" type="number" min="1" max="365" class="input-field-sm svelte-hj1sc2"/> <span class="svelte-hj1sc2">days</span></div> <div class="cleanup-actions svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <!></div></div></div></div> <div class="card danger-zone svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Power Controls</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description danger-text svelte-hj1sc2">These actions will affect the entire system. Make sure you have saved any pending work.</p> <div class="power-buttons svelte-hj1sc2"><button type="button" class="btn-warning svelte-hj1sc2"><!></button> <button type="button" class="btn-danger svelte-hj1sc2"><!></button></div></div></div></div>`),$i=p('<div class="page-container svelte-hj1sc2"><div class="page-header svelte-hj1sc2"><h1 class="page-title svelte-hj1sc2">System</h1> <p class="page-description svelte-hj1sc2">System settings, device management, and power controls</p> <div class="header-actions svelte-hj1sc2"><a href="/devices" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" class="svelte-hj1sc2"></path></svg> Devices</a> <a href="/calibration" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-hj1sc2"></path></svg> Calibration</a> <a href="/logging" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-hj1sc2"></path></svg> Logging</a> <a href="/system/maintenance" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" class="svelte-hj1sc2"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-hj1sc2"></path></svg> Data Maintenance</a></div></div> <!></div>');function dn(Ot,Dt){Ya(Dt,!0);let oe=c(null),Ne=c(null),Ks=c(Ns([])),ge=c(""),Ws=c(!0),z=c(null),me=c("C"),le=c("sg"),Le=c(-100),ce=c(!1),Je=c(5),je=c(!1),Ve=c(!1),Ge=c(null),Ke=c(!1),be=c(30),Z=c(null),se=c(!1),ye=c(""),we=c(""),We=c(""),qe=c(""),Ye=c(""),Qe=c(""),Ae=c(""),Xe=c(!1),ve=c(null),Ze=c(null),$e=c(!1),es=c(null),ss=c(!1),de=c(!1),ts=c(68),Me=c(1),as=c(!1),is=c(null),ns=c(!1),pe=c(!1),ls=c(3),rs=c(!1),os=c(null),cs=c(!1),re=c(!1),K=c("local"),he=c(""),Ee=c(""),Ie=c(""),ze=c(.7),Fe=c(2e3),vs=c(!1),ds=c(null),ps=c(!1),hs=c(!1),ue=c(null),ke=c(Ns([])),He=c(Ns([])),te=Ls(()=>b.config.temp_units==="C"),us=Ls(()=>e(te)?"°C":"°F");function Nt(l){return e(te)?ii(l):l}function Lt(l){return e(te)?ai(l):l}async function Jt(){try{const l=await fetch("/api/system/info");l.ok&&a(oe,await l.json(),!0)}catch(l){console.error("Failed to load system info:",l)}}async function qs(){try{const l=await fetch("/api/system/storage");l.ok&&a(Ne,await l.json(),!0)}catch(l){console.error("Failed to load storage stats:",l)}}async function Vt(){try{const[l,T]=await Promise.all([fetch("/api/system/timezones"),fetch("/api/system/timezone")]);if(l.ok){const B=await l.json();a(Ks,B.timezones||[],!0)}if(T.ok){const B=await T.json();a(ge,B.timezone||"UTC",!0)}}catch(l){console.error("Failed to load timezones:",l)}}function Ys(){a(me,b.config.temp_units,!0),a(le,b.config.sg_units,!0),a(Le,b.config.min_rssi,!0),a(ce,b.config.smoothing_enabled,!0),a(Je,b.config.smoothing_samples,!0),a(je,b.config.id_by_mac,!0),a(se,b.config.ha_enabled,!0),a(ye,b.config.ha_url,!0),a(we,b.config.ha_token,!0),a(We,b.config.ha_ambient_temp_entity_id,!0),a(qe,b.config.ha_ambient_humidity_entity_id,!0),a(Ye,b.config.ha_chamber_temp_entity_id,!0),a(Qe,b.config.ha_chamber_humidity_entity_id,!0),a(Ae,b.config.ha_weather_entity_id,!0),a(de,b.config.temp_control_enabled,!0),a(ts,Math.round(Lt(b.config.temp_target)*2)/2),a(Me,b.config.temp_units==="C"?Math.round(b.config.temp_hysteresis*(5/9)*100)/100:b.config.temp_hysteresis,!0),a(pe,b.config.weather_alerts_enabled,!0),a(ls,b.config.alert_temp_threshold,!0),a(re,b.config.ai_enabled??!1,!0),a(K,b.config.ai_provider??"local",!0),a(he,b.config.ai_model??"",!0),a(Ee,b.config.ai_api_key??"",!0),a(Ie,b.config.ai_base_url??"",!0),a(ze,b.config.ai_temperature??.7,!0),a(Fe,b.config.ai_max_tokens??2e3,!0)}async function Gt(){try{const l=await fetch("/api/assistant/providers");l.ok&&a(ke,await l.json(),!0)}catch(l){console.error("Failed to load AI providers:",l)}}async function Kt(l){try{const T=await fetch(`/api/assistant/models/${l}`);if(T.ok){const B=await T.json();a(He,B.models,!0)}}catch(T){console.error("Failed to load AI models:",T),a(He,[],!0)}}async function Wt(){a(vs,!0),a(ds,null),a(ps,!1);try{await Ce({ai_enabled:e(re),ai_provider:e(K),ai_model:e(he),ai_api_key:e(Ee),ai_base_url:e(Ie),ai_temperature:e(ze),ai_max_tokens:e(Fe)}),a(ps,!0),setTimeout(()=>a(ps,!1),3e3)}catch(l){a(ds,l instanceof Error?l.message:"Failed to save AI settings",!0)}finally{a(vs,!1)}}async function qt(){a(hs,!0),a(ue,null);try{await Ce({ai_enabled:e(re),ai_provider:e(K),ai_model:e(he),ai_api_key:e(Ee),ai_base_url:e(Ie),ai_temperature:e(ze),ai_max_tokens:e(Fe)});const T=await(await fetch("/api/assistant/test",{method:"POST"})).json();a(ue,T,!0)}catch(l){a(ue,{success:!1,error:l instanceof Error?l.message:"Connection test failed"},!0)}finally{a(hs,!1)}}Rt(()=>{e(K)&&Kt(e(K))});async function Yt(){a(Ve,!0),a(Ge,null),a(Ke,!1);try{const l=await Ce({temp_units:e(me),sg_units:e(le),min_rssi:e(Le),smoothing_enabled:e(ce),smoothing_samples:e(Je),id_by_mac:e(je)});l.success?(a(Ke,!0),setTimeout(()=>a(Ke,!1),3e3)):a(Ge,l.error||"Failed to save settings",!0)}finally{a(Ve,!1)}}async function Qt(){a($e,!0),a(es,null),a(ss,!1);try{const l=await Ce({ha_enabled:e(se),ha_url:e(ye),ha_token:e(we),ha_ambient_temp_entity_id:e(We),ha_ambient_humidity_entity_id:e(qe),ha_chamber_temp_entity_id:e(Ye),ha_chamber_humidity_entity_id:e(Qe),ha_weather_entity_id:e(Ae)});l.success?(a(ss,!0),setTimeout(()=>a(ss,!1),3e3),await Xs()):a(es,l.error||"Failed to save settings",!0)}finally{a($e,!1)}}async function Xt(){a(as,!0),a(is,null),a(ns,!1);try{const l=Nt(e(ts)),T=e(te)?e(Me)*(9/5):e(Me),B=await Ce({temp_control_enabled:e(de),temp_target:l,temp_hysteresis:T});B.success?(a(ns,!0),setTimeout(()=>a(ns,!1),3e3)):a(is,B.error||"Failed to save settings",!0)}finally{a(as,!1)}}async function Zt(){a(rs,!0),a(os,null),a(cs,!1);try{const l=await Ce({weather_alerts_enabled:e(pe),alert_temp_threshold:e(ls)});l.success?(a(cs,!0),setTimeout(()=>a(cs,!1),3e3)):a(os,l.error||"Failed to save settings",!0)}finally{a(rs,!1)}}async function $t(l){a(z,"timezone");try{(await fetch("/api/system/timezone",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:l})})).ok&&a(ge,l,!0)}catch(T){console.error("Failed to set timezone:",T)}finally{a(z,null)}}async function ea(){a(z,"cleanup-preview");try{const l=await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(be),confirm:!1})});l.ok&&a(Z,await l.json(),!0)}catch(l){console.error("Failed to preview cleanup:",l)}finally{a(z,null)}}async function sa(){if(!(!e(Z)||e(Z).readings_to_delete===0)&&confirm(`Delete ${e(Z).readings_to_delete.toLocaleString()} readings older than ${e(be)} days?`)){a(z,"cleanup");try{(await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(be),confirm:!0})})).ok&&(a(Z,null),await qs())}catch(l){console.error("Failed to execute cleanup:",l)}finally{a(z,null)}}}async function ta(){if(confirm("Are you sure you want to reboot the system? The UI will be unavailable until restart completes.")){a(z,"reboot");try{await fetch("/api/system/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(l){console.error("Reboot command failed:",l)}finally{a(z,null)}}}async function aa(){if(confirm("Are you sure you want to shut down the system? You will need physical access to restart.")){a(z,"shutdown");try{await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(l){console.error("Shutdown command failed:",l)}finally{a(z,null)}}}function ia(l){if(!l)return"Unknown";const T=Math.floor(l/86400),B=Math.floor(l%86400/3600),Pe=Math.floor(l%3600/60),_e=[];return T>0&&_e.push(`${T}d`),B>0&&_e.push(`${B}h`),Pe>0&&_e.push(`${Pe}m`),_e.length>0?_e.join(" "):"< 1m"}function na(l){return!Number.isFinite(l)||l<0?"0 B":l<1024?`${l} B`:l<1024*1024?`${(l/1024).toFixed(1)} KB`:`${(l/(1024*1024)).toFixed(1)} MB`}function Qs(l){return l.toLocaleString()}async function la(){a(Xe,!0),a(ve,null);try{const l=await fetch("/api/ha/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(ye),token:e(we)})});l.ok?a(ve,await l.json(),!0):a(ve,{success:!1,message:"Request failed"},!0)}catch{a(ve,{success:!1,message:"Network error"},!0)}finally{a(Xe,!1)}}async function Xs(){try{const l=await fetch("/api/ha/status");l.ok&&a(Ze,await l.json(),!0)}catch(l){console.error("Failed to load HA status:",l)}}Qa(async()=>{await Promise.all([Jt(),qs(),Vt(),Xs(),Gt()]),Ys(),a(Ws,!1)}),Rt(()=>{b.loaded&&Ys()});var fs=$i();ei("hj1sc2",l=>{Za(()=>{$a.title="System | BrewSignal"})});var ra=s(i(fs),2);{var oa=l=>{var T=ni();o(l,T)},ca=l=>{var T=Zi(),B=i(T),Pe=s(i(B),2),_e=i(Pe);{var va=n=>{var r=li(),f=i(r),y=s(i(f),2),x=i(y,!0);t(y),t(f);var C=s(f,2),A=s(i(C),2),O=i(A);t(A),t(C);var M=s(C,2),F=s(i(M),2),H=i(F,!0);t(F),t(M);var N=s(M,2),J=s(i(N),2),$=i(J,!0);t(J),t(N),t(r),k(V=>{j(x,e(oe).hostname),j(O,`v${e(oe).version??""}`),j(H,V),j($,e(oe).ip_addresses.length>0?e(oe).ip_addresses[0]:"Unknown")},[()=>ia(e(oe).uptime_seconds)]),o(n,r)},da=n=>{var r=ri();o(n,r)};_(_e,n=>{e(oe)?n(va):n(da,!1)})}t(Pe),t(B);var gs=s(B,2),ms=i(gs),Zs=s(i(ms),2),js=i(Zs),$s=s(i(js),2),bs=i($s);let et;bs.__click=()=>a(me,"C");var st=s(bs,2);let tt;st.__click=()=>a(me,"F"),t($s),t(js);var ys=s(js,2),at=s(i(ys),2),ws=i(at);let it;ws.__click=()=>a(le,"sg");var ks=s(ws,2);let nt;ks.__click=()=>a(le,"plato");var lt=s(ks,2);let rt;lt.__click=()=>a(le,"brix"),t(at),t(ys);var xs=s(ys,2),ot=s(i(xs),2),ct=i(ot);U(ct),P(2),t(ot),t(xs);var Ss=s(xs,2),Ts=s(i(Ss),2);let vt;Ts.__click=()=>a(ce,!e(ce)),t(Ss);var dt=s(Ss,2);{var pa=n=>{var r=oi(),f=s(i(r),2),y=i(f);y.value=y.__value=3;var x=s(y);x.value=x.__value=5;var C=s(x);C.value=C.__value=10;var A=s(C);A.value=A.__value=15;var O=s(A);O.value=O.__value=20,t(f),t(r),Gs(f,()=>e(Je),M=>a(Je,M)),o(n,r)};_(dt,n=>{e(ce)&&n(pa)})}var Cs=s(dt,2),As=s(i(Cs),2);let pt;As.__click=()=>a(je,!e(je)),t(Cs);var ht=s(Cs,2),Ue=i(ht);Ue.__click=Yt;var ha=i(Ue);{var ua=n=>{var r=ci();P(),o(n,r)},_a=n=>{var r=Se("Save Settings");o(n,r)};_(ha,n=>{e(Ve)?n(ua):n(_a,!1)})}t(Ue);var ut=s(Ue,2);{var fa=n=>{var r=vi(),f=i(r,!0);t(r),k(()=>j(f,e(Ge))),o(n,r)};_(ut,n=>{e(Ge)&&n(fa)})}var ga=s(ut,2);{var ma=n=>{var r=di();o(n,r)};_(ga,n=>{e(Ke)&&n(ma)})}t(ht),t(Zs),t(ms);var _t=s(ms,2),ft=s(i(_t),2),Ms=i(ft),gt=s(i(Ms)),ja=i(gt,!0);t(gt),t(Ms);var mt=s(Ms,2),ae=i(mt);ae.__change=n=>$t(n.currentTarget.value),Js(ae,21,()=>e(Ks),Vs,(n,r)=>{var f=pi(),y=i(f,!0);t(f);var x={};k(()=>{j(y,e(r)),x!==(x=e(r))&&(f.value=(f.__value=e(r))??"")}),o(n,f)}),t(ae);var jt;si(ae);var ba=s(ae,2);{var ya=n=>{var r=hi();o(n,r)};_(ba,n=>{e(z)==="timezone"&&n(ya)})}t(mt),t(ft),t(_t),t(gs);var Es=s(gs,2),bt=s(i(Es),2),Is=i(bt),zs=s(i(Is),2);let yt;zs.__click=()=>a(se,!e(se)),t(Is);var wa=s(Is,2);{var ka=n=>{var r=ji(),f=Te(r);{var y=v=>{var g=ui(),d=s(i(g),2);let I;var Ds=i(d,!0);t(d),t(g),k(()=>{I=G(d,1,"status-badge svelte-hj1sc2",null,I,{connected:e(Ze).connected}),j(Ds,e(Ze).connected?"Connected":"Disconnected")}),o(v,g)};_(f,v=>{e(Ze)&&v(y)})}var x=s(f,2),C=s(i(x),2);U(C),t(x);var A=s(x,2),O=s(i(A),2);U(O),t(A);var M=s(A,2),F=s(i(M),2),H=i(F);H.__click=la;var N=i(H,!0);t(H);var J=s(H,2);{var $=v=>{var g=_i();let d;var I=i(g,!0);t(g),k(()=>{d=G(g,1,"test-result svelte-hj1sc2",null,d,{success:e(ve).success}),j(I,e(ve).message)}),o(v,g)};_(J,v=>{e(ve)&&v($)})}t(F),t(M);var V=s(M,2),W=s(i(V),2);U(W),t(V);var q=s(V,2),w=s(i(q),2);U(w),t(q);var S=s(q,2),L=s(i(S),2);U(L),t(S);var Y=s(S,2),ee=s(i(Y),2);U(ee),t(Y);var X=s(Y,2),D=s(i(X),2);U(D),t(X);var fe=s(X,2),ie=i(fe);ie.__click=Qt;var xe=i(ie);{var ne=v=>{var g=fi();P(),o(v,g)},De=v=>{var g=Se("Save HA Settings");o(v,g)};_(xe,v=>{e($e)?v(ne):v(De,!1)})}t(ie);var h=s(ie,2);{var u=v=>{var g=gi(),d=i(g,!0);t(g),k(()=>j(d,e(es))),o(v,g)};_(h,v=>{e(es)&&v(u)})}var m=s(h,2);{var E=v=>{var g=mi();o(v,g)};_(m,v=>{e(ss)&&v(E)})}t(fe),k(()=>{H.disabled=e(Xe)||!e(ye)||!e(we),j(N,e(Xe)?"Testing...":"Test"),ie.disabled=e($e)}),R(C,()=>e(ye),v=>a(ye,v)),R(O,()=>e(we),v=>a(we,v)),R(W,()=>e(We),v=>a(We,v)),R(w,()=>e(qe),v=>a(qe,v)),R(L,()=>e(Ae),v=>a(Ae,v)),R(ee,()=>e(Ye),v=>a(Ye,v)),R(D,()=>e(Qe),v=>a(Qe,v)),o(n,r)};_(wa,n=>{e(se)&&n(ka)})}t(bt),t(Es);var wt=s(Es,2);{var xa=n=>{var r=xi(),f=s(i(r),2),y=i(f),x=s(i(y),2);let C;x.__click=()=>a(de,!e(de)),t(y);var A=s(y,2);{var O=M=>{var F=ki(),H=s(Te(F),2),N=i(H),J=s(i(N),2),$=i(J);t(J),t(N);var V=s(N,2),W=i(V);U(W);var q=s(W,2),w=i(q,!0);t(q),t(V),t(H);var S=s(H,2),L=i(S),Y=s(i(L),2),ee=i(Y);t(Y),t(L);var X=s(L,2),D=i(X);U(D);var fe=s(D,2),ie=i(fe,!0);t(fe),t(X),t(S);var xe=s(S,2),ne=i(xe);ne.__click=Xt;var De=i(ne);{var h=d=>{var I=bi();P(),o(d,I)},u=d=>{var I=Se("Save Control Settings");o(d,I)};_(De,d=>{e(as)?d(h):d(u,!1)})}t(ne);var m=s(ne,2);{var E=d=>{var I=yi(),Ds=i(I,!0);t(I),k(()=>j(Ds,e(is))),o(d,I)};_(m,d=>{e(is)&&d(E)})}var v=s(m,2);{var g=d=>{var I=wi();o(d,I)};_(v,d=>{e(ns)&&d(g)})}t(xe),k(()=>{j($,`Desired fermentation temperature (${e(us)??""})`),Q(W,"min",e(te)?0:32),Q(W,"max",e(te)?38:100),j(w,e(us)),j(ee,`± tolerance before triggering (${e(us)??""})`),Q(D,"min",e(te)?.3:.5),Q(D,"max",e(te)?5.5:10),Q(D,"step",e(te)?.25:.5),j(ie,e(us)),ne.disabled=e(as)}),R(W,()=>e(ts),d=>a(ts,d)),R(D,()=>e(Me),d=>a(Me,d)),o(M,F)};_(A,M=>{e(de)&&M(O)})}t(f),t(r),k(()=>{C=G(x,1,"toggle svelte-hj1sc2",null,C,{active:e(de)}),Q(x,"aria-pressed",e(de))}),o(n,r)};_(wt,n=>{e(se)&&n(xa)})}var kt=s(wt,2);{var Sa=n=>{var r=Mi(),f=s(i(r),2),y=i(f),x=s(i(y),2);let C;x.__click=()=>a(pe,!e(pe)),t(y);var A=s(y,2);{var O=w=>{var S=Si(),L=Te(S),Y=s(i(L),2),ee=i(Y);U(ee),P(2),t(Y),t(L),P(2),R(ee,()=>e(ls),X=>a(ls,X)),o(w,S)};_(A,w=>{e(pe)&&w(O)})}var M=s(A,2),F=i(M);F.__click=Zt;var H=i(F);{var N=w=>{var S=Ti();P(),o(w,S)},J=w=>{var S=Se("Save Alert Settings");o(w,S)};_(H,w=>{e(rs)?w(N):w(J,!1)})}t(F);var $=s(F,2);{var V=w=>{var S=Ci(),L=i(S,!0);t(S),k(()=>j(L,e(os))),o(w,S)};_($,w=>{e(os)&&w(V)})}var W=s($,2);{var q=w=>{var S=Ai();o(w,S)};_(W,w=>{e(cs)&&w(q)})}t(M),t(f),t(r),k(()=>{C=G(x,1,"toggle svelte-hj1sc2",null,C,{active:e(pe)}),Q(x,"aria-pressed",e(pe)),F.disabled=e(rs)}),o(n,r)};_(kt,n=>{e(se)&&e(Ae)&&n(Sa)})}var Fs=s(kt,2),xt=s(i(Fs),2),Hs=s(i(xt),2),Ps=s(i(Hs),2);let St;Ps.__click=()=>a(re,!e(re)),t(Hs);var Tt=s(Hs,2);{var Ta=n=>{var r=Di(),f=Te(r),y=s(i(f),2);Js(y,21,()=>e(ke),Vs,(h,u)=>{var m=Ei(),E=i(m,!0);t(m);var v={};k(()=>{j(E,e(u).name),v!==(v=e(u).id)&&(m.value=(m.__value=e(u).id)??"")}),o(h,m)}),t(y),t(f);var x=s(f,2);{var C=h=>{const u=Ls(()=>e(ke).find(d=>d.id===e(K)));var m=zi(),E=i(m),v=s(E);{var g=d=>{var I=Ii();k(()=>Q(I,"href",e(u).setup_url)),o(d,I)};_(v,d=>{e(u)?.setup_url&&d(g)})}t(m),k(()=>j(E,`${e(u)?.description??""} `)),o(h,m)};_(x,h=>{e(ke).find(u=>u.id===e(K))&&h(C)})}var A=s(x,2);{var O=h=>{var u=Fi(),m=i(u),E=s(i(m),2),v=i(E);t(E),t(m);var g=s(m,2);U(g),t(u),k(d=>j(v,`Your API key for ${d??""}`),[()=>e(ke).find(d=>d.id===e(K))?.name]),R(g,()=>e(Ee),d=>a(Ee,d)),o(h,u)};_(A,h=>{e(ke).find(u=>u.id===e(K))?.requires_api_key&&h(O)})}var M=s(A,2);{var F=h=>{var u=Hi(),m=s(i(u),2);U(m),t(u),R(m,()=>e(Ie),E=>a(Ie,E)),o(h,u)};_(M,h=>{e(K)==="local"&&h(F)})}var H=s(M,2),N=s(i(H),2),J=i(N);J.value=J.__value="";var $=s(J);Js($,17,()=>e(He),Vs,(h,u)=>{var m=Pi(),E=i(m,!0);t(m);var v={};k(()=>{j(E,e(u).name),v!==(v=e(u).id)&&(m.value=(m.__value=e(u).id)??"")}),o(h,m)}),t(N),t(H);var V=s(H,2);{var W=h=>{var u=Ui(),m=i(u,!0);t(u),k(E=>j(m,E),[()=>e(He).find(E=>E.id===e(he))?.description]),o(h,u)};_(V,h=>{e(He).find(u=>u.id===e(he))&&h(W)})}var q=s(V,2),w=s(i(q),2),S=i(w),L=s(i(S),2);U(L),t(S);var Y=s(S,2),ee=s(i(Y),2);U(ee),t(Y),t(w),t(q);var X=s(q,2),D=i(X);D.__click=qt;var fe=i(D);{var ie=h=>{var u=Ri();P(),o(h,u)},xe=h=>{var u=Se("Test Connection");o(h,u)};_(fe,h=>{e(hs)?h(ie):h(xe,!1)})}t(D);var ne=s(D,2);{var De=h=>{var u=qa(),m=Te(u);{var E=g=>{var d=Bi(),I=i(d);t(d),k(()=>j(I,`Connected! Response: "${e(ue).response??""}"`)),o(g,d)},v=g=>{var d=Oi(),I=i(d,!0);t(d),k(()=>j(I,e(ue).error)),o(g,d)};_(m,g=>{e(ue).success?g(E):g(v,!1)})}o(h,u)};_(ne,h=>{e(ue)&&h(De)})}t(X),k(()=>D.disabled=e(hs)),Gs(y,()=>e(K),h=>a(K,h)),Gs(N,()=>e(he),h=>a(he,h)),R(L,()=>e(ze),h=>a(ze,h)),R(ee,()=>e(Fe),h=>a(Fe,h)),o(n,r)};_(Tt,n=>{e(re)&&n(Ta)})}var Ct=s(Tt,2),Re=i(Ct);Re.__click=Wt;var Ca=i(Re);{var Aa=n=>{var r=Ni();P(),o(n,r)},Ma=n=>{var r=Se("Save AI Settings");o(n,r)};_(Ca,n=>{e(vs)?n(Aa):n(Ma,!1)})}t(Re);var At=s(Re,2);{var Ea=n=>{var r=Li(),f=i(r,!0);t(r),k(()=>j(f,e(ds))),o(n,r)};_(At,n=>{e(ds)&&n(Ea)})}var Ia=s(At,2);{var za=n=>{var r=Ji();o(n,r)};_(Ia,n=>{e(ps)&&n(za)})}t(Ct),t(xt),t(Fs);var Us=s(Fs,2),Mt=s(i(Us),2),Et=i(Mt),Rs=i(Et),Fa=i(Rs);{var Ha=n=>{var r=Vi(),f=Te(r),y=i(f),x=i(y,!0);t(y),P(2),t(f);var C=s(f,2),A=i(C),O=i(A,!0);t(A),P(2),t(C),k((M,F)=>{j(x,M),j(O,F)},[()=>Qs(e(Ne).total_readings),()=>na(e(Ne).estimated_size_bytes)]),o(n,r)},Pa=n=>{var r=Gi();o(n,r)};_(Fa,n=>{e(Ne)?n(Ha):n(Pa,!1)})}t(Rs);var It=s(Rs,2),Bs=s(i(It),2),Os=i(Bs),zt=s(i(Os),2);U(zt),P(2),t(Os);var Ft=s(Os,2),Be=i(Ft);Be.__click=ea;var Ua=i(Be,!0);t(Be);var Ra=s(Be,2);{var Ba=n=>{var r=Ki();r.__click=sa;var f=i(r,!0);t(r),k(y=>{r.disabled=e(z)!==null,j(f,y)},[()=>e(z)==="cleanup"?"Deleting...":`Delete ${Qs(e(Z).readings_to_delete)} readings`]),o(n,r)};_(Ra,n=>{e(Z)&&e(Z).readings_to_delete>0&&n(Ba)})}t(Ft),t(Bs);var Oa=s(Bs,2);{var Da=n=>{var r=Wi(),f=i(r);t(r),k(()=>j(f,`No readings older than ${e(be)??""} days found.`)),o(n,r)};_(Oa,n=>{e(Z)&&e(Z).readings_to_delete===0&&n(Da)})}t(It),t(Et),t(Mt),t(Us);var Ht=s(Us,2),Pt=s(i(Ht),2),Ut=s(i(Pt),2),Oe=i(Ut);Oe.__click=ta;var Na=i(Oe);{var La=n=>{var r=qi();P(),o(n,r)},Ja=n=>{var r=Yi();P(),o(n,r)};_(Na,n=>{e(z)==="reboot"?n(La):n(Ja,!1)})}t(Oe);var _s=s(Oe,2);_s.__click=aa;var Va=i(_s);{var Ga=n=>{var r=Qi();P(),o(n,r)},Ka=n=>{var r=Xi();P(),o(n,r)};_(Va,n=>{e(z)==="shutdown"?n(Ga):n(Ka,!1)})}t(_s),t(Ut),t(Pt),t(Ht),t(T),k(()=>{et=G(bs,1,"unit-btn svelte-hj1sc2",null,et,{active:e(me)==="C"}),tt=G(st,1,"unit-btn svelte-hj1sc2",null,tt,{active:e(me)==="F"}),it=G(ws,1,"unit-btn svelte-hj1sc2",null,it,{active:e(le)==="sg"}),nt=G(ks,1,"unit-btn svelte-hj1sc2",null,nt,{active:e(le)==="plato"}),rt=G(lt,1,"unit-btn svelte-hj1sc2",null,rt,{active:e(le)==="brix"}),vt=G(Ts,1,"toggle svelte-hj1sc2",null,vt,{active:e(ce)}),Q(Ts,"aria-pressed",e(ce)),pt=G(As,1,"toggle svelte-hj1sc2",null,pt,{active:e(je)}),Q(As,"aria-pressed",e(je)),Ue.disabled=e(Ve),j(ja,e(ge)),ae.disabled=e(z)==="timezone",jt!==(jt=e(ge))&&(ae.value=(ae.__value=e(ge))??"",ti(ae,e(ge))),yt=G(zs,1,"toggle svelte-hj1sc2",null,yt,{active:e(se)}),Q(zs,"aria-pressed",e(se)),St=G(Ps,1,"toggle svelte-hj1sc2",null,St,{active:e(re)}),Q(Ps,"aria-pressed",e(re)),Re.disabled=e(vs),Be.disabled=e(z)!==null,j(Ua,e(z)==="cleanup-preview"?"Checking...":"Preview"),Oe.disabled=e(z)!==null,_s.disabled=e(z)!==null}),R(ct,()=>e(Le),n=>a(Le,n)),R(zt,()=>e(be),n=>a(be,n)),o(l,T)};_(ra,l=>{e(Ws)?l(oa):l(ca,!1)})}t(fs),o(Ot,fs),Xa()}Wa(["click","change"]);export{dn as component};
