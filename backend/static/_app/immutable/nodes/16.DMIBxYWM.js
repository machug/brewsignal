import{d as Dt,f as _,a as p,s as h,c as Oe,e as St}from"../chunks/D7bl-hCC.js";import{ah as Yt,aq as x,p as qe,ao as $t,at as ge,al as o,s as r,ak as a,ar as k,c as e,aj as Tt,e as jt,am as Ht,an as s,as as Mt,ai as We,au as Pt,aw as Rt}from"../chunks/CDGrRRS4.js";import{e as Ne,i as Bt}from"../chunks/qsSua8e8.js";import{i as b}from"../chunks/Cg1NE5Eo.js";import{h as Et}from"../chunks/DA8KTw8j.js";import{r as j}from"../chunks/BDaOlnf6.js";import{s as tt}from"../chunks/vT9oYAV7.js";import{s as Ot}from"../chunks/DkX27r1m.js";import{b as H,a as qt}from"../chunks/DjjCnkE4.js";import{b as re}from"../chunks/Hxk7fwGZ.js";import{r as Wt,b as Nt,d as Qt,g as Vt,h as zt}from"../chunks/COvJLFo_.js";var Gt=_('<span class="strain-count svelte-1o4svxh"> </span>'),It=_("<option> </option>"),Jt=_('<div class="loading-state svelte-1o4svxh"><div class="spinner svelte-1o4svxh"></div> <p>Loading yeast strains...</p></div>'),Kt=_('<div class="error-state svelte-1o4svxh"><p class="error-message svelte-1o4svxh"> </p> <button type="button" class="retry-btn svelte-1o4svxh">Retry</button></div>'),Ut=_('<div class="empty-state svelte-1o4svxh"><div class="empty-icon svelte-1o4svxh">ðŸ§«</div> <h2 class="empty-title svelte-1o4svxh">No Yeast Strains</h2> <p class="empty-description svelte-1o4svxh">Click "Refresh DB" to load the yeast database</p></div>'),Xt=_('<div class="empty-state svelte-1o4svxh"><p class="empty-description svelte-1o4svxh">No yeasts match your filters</p></div>'),Zt=_('<button type="button" class="delete-btn svelte-1o4svxh" aria-label="Delete"><svg class="icon-sm svelte-1o4svxh" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),ea=_('<span class="strain-type svelte-1o4svxh"> </span>'),ta=_('<span class="strain-form svelte-1o4svxh"> </span>'),aa=_('<span class="custom-badge svelte-1o4svxh">custom</span>'),sa=_('<div class="spec svelte-1o4svxh"><span class="spec-label svelte-1o4svxh">Flocculation</span> <span class="spec-value svelte-1o4svxh"> </span></div>'),oa=_('<p class="strain-description svelte-1o4svxh"> </p>'),la=_('<div><div class="strain-header svelte-1o4svxh"><h3 class="strain-name svelte-1o4svxh"> </h3> <!></div> <div class="strain-meta svelte-1o4svxh"><!> <!> <!></div> <div class="strain-specs svelte-1o4svxh"><div class="spec svelte-1o4svxh"><span class="spec-label svelte-1o4svxh">Attenuation</span> <span class="spec-value svelte-1o4svxh"> </span></div> <div class="spec svelte-1o4svxh"><span class="spec-label svelte-1o4svxh">Temp Range</span> <span class="spec-value svelte-1o4svxh"> </span></div> <!></div> <!></div>'),ra=_('<div class="producer-group svelte-1o4svxh"><h2 class="producer-name svelte-1o4svxh"> <span class="producer-count svelte-1o4svxh"> </span></h2> <div class="strains-grid svelte-1o4svxh"></div></div>'),va=_('<div class="strains-list svelte-1o4svxh"></div>'),ia=_('<div class="modal-overlay svelte-1o4svxh" role="dialog" aria-modal="true"><div class="modal svelte-1o4svxh"><h2 class="modal-title svelte-1o4svxh">Add Custom Yeast</h2> <form class="modal-form svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-name" class="svelte-1o4svxh">Name *</label> <input id="yeast-name" type="text" required class="svelte-1o4svxh"/></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-producer" class="svelte-1o4svxh">Producer</label> <input id="yeast-producer" type="text" class="svelte-1o4svxh"/></div> <div class="form-group svelte-1o4svxh"><label for="yeast-type" class="svelte-1o4svxh">Type</label> <select id="yeast-type" class="svelte-1o4svxh"><option>Ale</option><option>Lager</option><option>Wine</option><option>Wild</option></select></div></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-form" class="svelte-1o4svxh">Form</label> <select id="yeast-form" class="svelte-1o4svxh"><option>Dry</option><option>Liquid</option><option>Slant</option></select></div> <div class="form-group svelte-1o4svxh"><label for="yeast-floc" class="svelte-1o4svxh">Flocculation</label> <select id="yeast-floc" class="svelte-1o4svxh"><option>Low</option><option>Medium</option><option>High</option><option>Very High</option></select></div></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-atten-low" class="svelte-1o4svxh">Attenuation Low (%)</label> <input id="yeast-atten-low" type="number" step="1" min="50" max="100" class="svelte-1o4svxh"/></div> <div class="form-group svelte-1o4svxh"><label for="yeast-atten-high" class="svelte-1o4svxh">Attenuation High (%)</label> <input id="yeast-atten-high" type="number" step="1" min="50" max="100" class="svelte-1o4svxh"/></div></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-temp-low" class="svelte-1o4svxh">Temp Low (Â°C)</label> <input id="yeast-temp-low" type="number" step="0.5" min="0" max="40" class="svelte-1o4svxh"/></div> <div class="form-group svelte-1o4svxh"><label for="yeast-temp-high" class="svelte-1o4svxh">Temp High (Â°C)</label> <input id="yeast-temp-high" type="number" step="0.5" min="0" max="40" class="svelte-1o4svxh"/></div></div> <div class="form-group svelte-1o4svxh"><label for="yeast-desc" class="svelte-1o4svxh">Description</label> <textarea id="yeast-desc" rows="3" class="svelte-1o4svxh"></textarea></div> <div class="modal-actions svelte-1o4svxh"><button type="button" class="btn-cancel svelte-1o4svxh">Cancel</button> <button type="submit" class="btn-submit svelte-1o4svxh"> </button></div></form></div></div>'),na=_('<div class="modal-overlay svelte-1o4svxh" role="dialog" aria-modal="true"><div class="modal svelte-1o4svxh"><h2 class="modal-title svelte-1o4svxh">Delete Yeast?</h2> <p class="modal-text svelte-1o4svxh"> </p> <div class="modal-actions svelte-1o4svxh"><button type="button" class="btn-cancel svelte-1o4svxh">Cancel</button> <button type="button" class="btn-delete svelte-1o4svxh"> </button></div></div></div>'),da=_('<div class="page-container svelte-1o4svxh"><div class="page-header svelte-1o4svxh"><div class="header-left svelte-1o4svxh"><h1 class="page-title svelte-1o4svxh">Yeast Library</h1> <!></div> <div class="header-actions svelte-1o4svxh"><button type="button" class="refresh-btn svelte-1o4svxh"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> </button> <button type="button" class="add-btn svelte-1o4svxh"><svg class="icon svelte-1o4svxh" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"></path></svg> Add Custom</button></div></div> <div class="filters-bar svelte-1o4svxh"><input type="text" placeholder="Search yeasts..." class="search-input svelte-1o4svxh"/> <select class="filter-select svelte-1o4svxh"><option>All Types</option><option>Ale</option><option>Lager</option><option>Wine</option><option>Wild</option></select> <select class="filter-select svelte-1o4svxh"><option>All Producers</option><!></select> <label class="custom-toggle svelte-1o4svxh"><input type="checkbox" class="svelte-1o4svxh"/> <span>Custom only</span></label></div> <!></div> <!> <!>',1);function wa(at,st){Yt(st,!0);let A=x(qe([])),Qe=x(qe([])),ve=x(!0),M=x(null),Q=x(""),ie=x(""),ne=x(""),we=x(!1),K=x(!1),d=x(qe({name:"",producer:"",type:"ale",form:"dry",attenuation_low:void 0,attenuation_high:void 0,temp_low:void 0,temp_high:void 0,flocculation:"medium",description:""})),de=x(!1),U=x(!1),L=x(null),ce=x(!1),ke=We(()=>()=>e(A).filter(t=>{const l=!e(Q)||t.name.toLowerCase().includes(e(Q).toLowerCase())||t.producer?.toLowerCase().includes(e(Q).toLowerCase())||t.product_id?.toLowerCase().includes(e(Q).toLowerCase()),i=!e(ie)||t.type===e(ie),m=!e(ne)||t.producer===e(ne),g=!e(we)||t.is_custom;return l&&i&&m&&g})),ot=We(()=>()=>{const t={};for(const l of e(ke)()){const i=l.producer||"Other";t[i]||(t[i]=[]),t[i].push(l)}return Object.fromEntries(Object.entries(t).sort(([l],[i])=>l.localeCompare(i)))});async function Ce(){r(ve,!0),r(M,null);try{const[t,l]=await Promise.all([Nt(),Qt()]);r(A,t,!0),r(Qe,l,!0)}catch(t){r(M,t instanceof Error?t.message:"Failed to load yeast strains",!0)}finally{r(ve,!1)}}async function lt(){if(e(d).name.trim()){r(de,!0);try{const t=await Vt(e(d));r(A,[t,...e(A)],!0),r(K,!1),r(d,{name:"",producer:"",type:"ale",form:"dry",attenuation_low:void 0,attenuation_high:void 0,temp_low:void 0,temp_high:void 0,flocculation:"medium",description:""},!0)}catch(t){r(M,t instanceof Error?t.message:"Failed to add yeast",!0)}finally{r(de,!1)}}}async function rt(){if(e(L)){r(ce,!0);try{await zt(e(L).id),r(A,e(A).filter(t=>t.id!==e(L).id),!0),r(L,null)}catch(t){r(M,t instanceof Error?t.message:"Failed to delete yeast",!0)}finally{r(ce,!1)}}}async function vt(){r(U,!0);try{const t=await Wt();await Ce()}catch(t){r(M,t instanceof Error?t.message:"Failed to refresh yeast database",!0)}finally{r(U,!1)}}function it(t,l){return t==null&&l==null?"--":t!=null&&l!=null?`${t.toFixed(0)}-${l.toFixed(0)}Â°C`:t!=null?`>${t.toFixed(0)}Â°C`:`<${l.toFixed(0)}Â°C`}function nt(t,l){return t==null&&l==null?"--":t!=null&&l!=null?t===l?`${t.toFixed(0)}%`:`${t.toFixed(0)}-${l.toFixed(0)}%`:t!=null?`>${t.toFixed(0)}%`:`<${l.toFixed(0)}%`}function dt(t){switch(t){case"ale":return"var(--positive)";case"lager":return"var(--info)";case"wine":return"var(--warning)";case"wild":return"var(--negative)";default:return"var(--text-secondary)"}}$t(Ce);var Ve=da();Et("1o4svxh",t=>{jt(()=>{Ht.title="Yeast Library | BrewSignal"})});var Fe=ge(Ve),Ae=o(Fe),Le=o(Ae),ct=a(o(Le),2);{var ut=t=>{var l=Gt(),i=o(l);s(l),k(m=>h(i,`${m??""} of ${e(A).length??""}`),[()=>e(ke)().length]),p(t,l)};b(ct,t=>{!e(ve)&&e(A).length>0&&t(ut)})}s(Le);var ze=a(Le,2),X=o(ze);X.__click=vt;var Ge=o(X);let Ie;var pt=a(Ge);s(X);var _t=a(X,2);_t.__click=()=>r(K,!0),s(ze),s(Ae);var De=a(Ae,2),Se=o(De);j(Se);var ue=a(Se,2),Ye=o(ue);Ye.value=Ye.__value="";var $e=a(Ye);$e.value=$e.__value="ale";var Te=a($e);Te.value=Te.__value="lager";var je=a(Te);je.value=je.__value="wine";var Je=a(je);Je.value=Je.__value="wild",s(ue);var pe=a(ue,2),He=o(pe);He.value=He.__value="";var ht=a(He);Ne(ht,17,()=>e(Qe),Bt,(t,l)=>{var i=It(),m=o(i,!0);s(i);var g={};k(()=>{h(m,e(l)),g!==(g=e(l))&&(i.value=(i.__value=e(l))??"")}),p(t,i)}),s(pe);var Ke=a(pe,2),Ue=o(Ke);j(Ue),Mt(2),s(Ke),s(De);var mt=a(De,2);{var ft=t=>{var l=Jt();p(t,l)},xt=t=>{var l=Oe(),i=ge(l);{var m=w=>{var y=Kt(),f=o(y),S=o(f,!0);s(f);var Y=a(f,2);Y.__click=Ce,s(y),k(()=>h(S,e(M))),p(w,y)},g=w=>{var y=Oe(),f=ge(y);{var S=C=>{var $=Ut();p(C,$)},Y=C=>{var $=Oe(),Z=ge($);{var ee=F=>{var D=Xt();p(F,D)},_e=F=>{var D=va();Ne(D,21,()=>Object.entries(e(ot)()),([P,V])=>P,(P,V)=>{var z=We(()=>Rt(e(V),2));let he=()=>e(z)[0],te=()=>e(z)[1];var R=ra(),B=o(R),G=o(B),I=a(G),me=o(I);s(I),s(B);var J=a(B,2);Ne(J,21,te,E=>E.id,(E,u)=>{var O=la();let ae;var q=o(O),W=o(q),fe=o(W,!0);s(W);var xe=a(W,2);{var ye=n=>{var c=Zt();c.__click=()=>r(L,e(u),!0),p(n,c)};b(xe,n=>{e(u).is_custom&&n(ye)})}s(q);var N=a(q,2),se=o(N);{var be=n=>{var c=ea(),T=o(c,!0);s(c),k(Ee=>{Ot(c,`color: ${Ee??""}`),h(T,e(u).type)},[()=>dt(e(u).type)]),p(n,c)};b(se,n=>{e(u).type&&n(be)})}var oe=a(se,2);{var le=n=>{var c=ta(),T=o(c,!0);s(c),k(()=>h(T,e(u).form)),p(n,c)};b(oe,n=>{e(u).form&&n(le)})}var Me=a(oe,2);{var v=n=>{var c=aa();p(n,c)};b(Me,n=>{e(u).is_custom&&n(v)})}s(N);var Pe=a(N,2),Re=o(Pe),Ze=a(o(Re),2),wt=o(Ze,!0);s(Ze),s(Re);var Be=a(Re,2),et=a(o(Be),2),kt=o(et,!0);s(et),s(Be);var Ct=a(Be,2);{var Ft=n=>{var c=sa(),T=a(o(c),2),Ee=o(T,!0);s(T),s(c),k(()=>h(Ee,e(u).flocculation)),p(n,c)};b(Ct,n=>{e(u).flocculation&&n(Ft)})}s(Pe);var At=a(Pe,2);{var Lt=n=>{var c=oa(),T=o(c,!0);s(c),k(()=>h(T,e(u).description)),p(n,c)};b(At,n=>{e(u).description&&n(Lt)})}s(O),k((n,c)=>{ae=tt(O,1,"strain-card svelte-1o4svxh",null,ae,{custom:e(u).is_custom}),h(fe,e(u).name),h(wt,n),h(kt,c)},[()=>nt(e(u).attenuation_low,e(u).attenuation_high),()=>it(e(u).temp_low,e(u).temp_high)]),p(E,O)}),s(J),s(R),k(()=>{h(G,`${he()??""} `),h(me,`(${te().length??""})`)}),p(P,R)}),s(D),p(F,D)};b(Z,F=>{e(ke)().length===0?F(ee):F(_e,!1)},!0)}p(C,$)};b(f,C=>{e(A).length===0?C(S):C(Y,!1)},!0)}p(w,y)};b(i,w=>{e(M)?w(m):w(g,!1)},!0)}p(t,l)};b(mt,t=>{e(ve)?t(ft):t(xt,!1)})}s(Fe);var Xe=a(Fe,2);{var yt=t=>{var l=ia();l.__click=()=>r(K,!1);var i=o(l);i.__click=v=>v.stopPropagation();var m=a(o(i),2),g=o(m),w=a(o(g),2);j(w),s(g);var y=a(g,2),f=o(y),S=a(o(f),2);j(S),s(f);var Y=a(f,2),C=a(o(Y),2),$=o(C);$.value=$.__value="ale";var Z=a($);Z.value=Z.__value="lager";var ee=a(Z);ee.value=ee.__value="wine";var _e=a(ee);_e.value=_e.__value="wild",s(C),s(Y),s(y);var F=a(y,2),D=o(F),P=a(o(D),2),V=o(P);V.value=V.__value="dry";var z=a(V);z.value=z.__value="liquid";var he=a(z);he.value=he.__value="slant",s(P),s(D);var te=a(D,2),R=a(o(te),2),B=o(R);B.value=B.__value="low";var G=a(B);G.value=G.__value="medium";var I=a(G);I.value=I.__value="high";var me=a(I);me.value=me.__value="very high",s(R),s(te),s(F);var J=a(F,2),E=o(J),u=a(o(E),2);j(u),s(E);var O=a(E,2),ae=a(o(O),2);j(ae),s(O),s(J);var q=a(J,2),W=o(q),fe=a(o(W),2);j(fe),s(W);var xe=a(W,2),ye=a(o(xe),2);j(ye),s(xe),s(q);var N=a(q,2),se=a(o(N),2);Pt(se),s(N);var be=a(N,2),oe=o(be);oe.__click=()=>r(K,!1);var le=a(oe,2),Me=o(le,!0);s(le),s(be),s(m),s(i),s(l),k(v=>{le.disabled=v,h(Me,e(de)?"Adding...":"Add Yeast")},[()=>e(de)||!e(d).name.trim()]),St("submit",m,v=>{v.preventDefault(),lt()}),H(w,()=>e(d).name,v=>e(d).name=v),H(S,()=>e(d).producer,v=>e(d).producer=v),re(C,()=>e(d).type,v=>e(d).type=v),re(P,()=>e(d).form,v=>e(d).form=v),re(R,()=>e(d).flocculation,v=>e(d).flocculation=v),H(u,()=>e(d).attenuation_low,v=>e(d).attenuation_low=v),H(ae,()=>e(d).attenuation_high,v=>e(d).attenuation_high=v),H(fe,()=>e(d).temp_low,v=>e(d).temp_low=v),H(ye,()=>e(d).temp_high,v=>e(d).temp_high=v),H(se,()=>e(d).description,v=>e(d).description=v),p(t,l)};b(Xe,t=>{e(K)&&t(yt)})}var bt=a(Xe,2);{var gt=t=>{var l=na();l.__click=()=>r(L,null);var i=o(l);i.__click=Y=>Y.stopPropagation();var m=a(o(i),2),g=o(m);s(m);var w=a(m,2),y=o(w);y.__click=()=>r(L,null);var f=a(y,2);f.__click=rt;var S=o(f,!0);s(f),s(w),s(i),s(l),k(()=>{h(g,`Are you sure you want to delete "${e(L).name??""}"? This cannot be undone.`),f.disabled=e(ce),h(S,e(ce)?"Deleting...":"Delete")}),p(t,l)};b(bt,t=>{e(L)&&t(gt)})}k(()=>{X.disabled=e(U),Ie=tt(Ge,0,"icon svelte-1o4svxh",null,Ie,{spinning:e(U)}),h(pt,` ${e(U)?"Refreshing...":"Refresh DB"}`)}),H(Se,()=>e(Q),t=>r(Q,t)),re(ue,()=>e(ie),t=>r(ie,t)),re(pe,()=>e(ne),t=>r(ne,t)),qt(Ue,()=>e(we),t=>r(we,t)),p(at,Ve),Tt()}Dt(["click"]);export{wa as component};
