import{d as Ut,f as w,a as b,s as T,c as It,e as Fs,h as br,t as kr}from"../chunks/CCsyRfs1.js";import{a as Gt,s as B,p as pt,o as Us,c as g,e as p,g as jt,d as c,r as o,h as a,t as F,u as ae,n as rt,f as ut,ax as as,i as xr,ay as wr,z as yr,aw as Sr}from"../chunks/DyQh1CUw.js";import{i as C}from"../chunks/HQeVE6fZ.js";import{h as zr}from"../chunks/BZNRDT2A.js";import{b as Rr}from"../chunks/BlPaiSLK.js";import{g as Ls}from"../chunks/DAHLg5fR.js";import{z as $r,A as Tr,a4 as Ar,h as Br,y as Cr,a5 as Fr,a6 as Lr,a7 as qr}from"../chunks/DciRO_hW.js";import{e as Ze,i as bt}from"../chunks/DndLTv14.js";import{h as Pr}from"../chunks/DRjuPuC8.js";import{r as je,b as Bt}from"../chunks/DPJa9AuX.js";import{s as Gs}from"../chunks/C1-3ELYM.js";import{s as Ct}from"../chunks/COCsBJqH.js";import{b as ct}from"../chunks/B_acRpXz.js";import{b as Mt,i as qs,s as Ps}from"../chunks/U9y4h8n3.js";import{p as Et}from"../chunks/B-ZSmncO.js";import{Y as Ir}from"../chunks/B8Ai3Rw5.js";function cs(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var dt=cs();function js(r){dt=r}var Ft={exec:()=>null};function E(r,e=""){let s=typeof r=="string"?r:r.source,n={replace:(t,i)=>{let l=typeof i=="string"?i:i.source;return l=l.replace($e.caret,"$1"),s=s.replace(t,l),n},getRegex:()=>new RegExp(s,e)};return n}var Mr=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),$e={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},Er=/^(?:[ \t]*(?:\n|$))+/,Or=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Dr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Lt=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Hr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,us=/(?:[*+-]|\d{1,9}[.)])/,Zs=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Ns=E(Zs).replace(/bull/g,us).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Ur=E(Zs).replace(/bull/g,us).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),ps=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Gr=/^[^\n]+/,vs=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,jr=E(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",vs).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Zr=E(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,us).getRegex(),Zt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ds=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Nr=E("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ds).replace("tag",Zt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Qs=E(ps).replace("hr",Lt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zt).getRegex(),Qr=E(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Qs).getRegex(),hs={blockquote:Qr,code:Or,def:jr,fences:Dr,heading:Hr,hr:Lt,html:Nr,lheading:Ns,list:Zr,newline:Er,paragraph:Qs,table:Ft,text:Gr},Is=E("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Lt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zt).getRegex(),Wr={...hs,lheading:Ur,table:Is,paragraph:E(ps).replace("hr",Lt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Is).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zt).getRegex()},Vr={...hs,html:E(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ds).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ft,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:E(ps).replace("hr",Lt).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ns).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Yr=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Xr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ws=/^( {2,}|\\)\n(?!\s*$)/,Jr=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Nt=/[\p{P}\p{S}]/u,_s=/[\s\p{P}\p{S}]/u,Vs=/[^\s\p{P}\p{S}]/u,Kr=E(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,_s).getRegex(),Ys=/(?!~)[\p{P}\p{S}]/u,ea=/(?!~)[\s\p{P}\p{S}]/u,ta=/(?:[^\s\p{P}\p{S}]|~)/u,sa=E(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Mr?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Xs=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,ra=E(Xs,"u").replace(/punct/g,Nt).getRegex(),aa=E(Xs,"u").replace(/punct/g,Ys).getRegex(),Js="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",na=E(Js,"gu").replace(/notPunctSpace/g,Vs).replace(/punctSpace/g,_s).replace(/punct/g,Nt).getRegex(),la=E(Js,"gu").replace(/notPunctSpace/g,ta).replace(/punctSpace/g,ea).replace(/punct/g,Ys).getRegex(),ia=E("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Vs).replace(/punctSpace/g,_s).replace(/punct/g,Nt).getRegex(),oa=E(/\\(punct)/,"gu").replace(/punct/g,Nt).getRegex(),ca=E(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ua=E(ds).replace("(?:-->|$)","-->").getRegex(),pa=E("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ua).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ot=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,va=E(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ot).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ks=E(/^!?\[(label)\]\[(ref)\]/).replace("label",Ot).replace("ref",vs).getRegex(),er=E(/^!?\[(ref)\](?:\[\])?/).replace("ref",vs).getRegex(),da=E("reflink|nolink(?!\\()","g").replace("reflink",Ks).replace("nolink",er).getRegex(),Ms=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,fs={_backpedal:Ft,anyPunctuation:oa,autolink:ca,blockSkip:sa,br:Ws,code:Xr,del:Ft,emStrongLDelim:ra,emStrongRDelimAst:na,emStrongRDelimUnd:ia,escape:Yr,link:va,nolink:er,punctuation:Kr,reflink:Ks,reflinkSearch:da,tag:pa,text:Jr,url:Ft},ha={...fs,link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",Ot).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ot).getRegex()},ns={...fs,emStrongRDelimAst:la,emStrongLDelim:aa,url:E(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Ms).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:E(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Ms).getRegex()},_a={...ns,br:E(Ws).replace("{2,}","*").getRegex(),text:E(ns.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Pt={normal:hs,gfm:Wr,pedantic:Vr},$t={normal:fs,gfm:ns,breaks:_a,pedantic:ha},fa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Es=r=>fa[r];function nt(r,e){if(e){if($e.escapeTest.test(r))return r.replace($e.escapeReplace,Es)}else if($e.escapeTestNoEncode.test(r))return r.replace($e.escapeReplaceNoEncode,Es);return r}function Os(r){try{r=encodeURI(r).replace($e.percentDecode,"%")}catch{return null}return r}function Ds(r,e){let s=r.replace($e.findPipe,(i,l,h)=>{let u=!1,m=l;for(;--m>=0&&h[m]==="\\";)u=!u;return u?"|":" |"}),n=s.split($e.splitPipe),t=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;t<n.length;t++)n[t]=n[t].trim().replace($e.slashPipe,"|");return n}function Tt(r,e,s){let n=r.length;if(n===0)return"";let t=0;for(;t<n&&r.charAt(n-t-1)===e;)t++;return r.slice(0,n-t)}function ga(r,e){if(r.indexOf(e[1])===-1)return-1;let s=0;for(let n=0;n<r.length;n++)if(r[n]==="\\")n++;else if(r[n]===e[0])s++;else if(r[n]===e[1]&&(s--,s<0))return n;return s>0?-2:-1}function Hs(r,e,s,n,t){let i=e.href,l=e.title||null,h=r[1].replace(t.other.outputLinkReplace,"$1");n.state.inLink=!0;let u={type:r[0].charAt(0)==="!"?"image":"link",raw:s,href:i,title:l,text:h,tokens:n.inlineTokens(h)};return n.state.inLink=!1,u}function ma(r,e,s){let n=r.match(s.other.indentCodeCompensation);if(n===null)return e;let t=n[1];return e.split(`
`).map(i=>{let l=i.match(s.other.beginningSpace);if(l===null)return i;let[h]=l;return h.length>=t.length?i.slice(t.length):i}).join(`
`)}var Dt=class{options;rules;lexer;constructor(r){this.options=r||dt}space(r){let e=this.rules.block.newline.exec(r);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(r){let e=this.rules.block.code.exec(r);if(e){let s=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Tt(s,`
`)}}}fences(r){let e=this.rules.block.fences.exec(r);if(e){let s=e[0],n=ma(s,e[3]||"",this.rules);return{type:"code",raw:s,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(r){let e=this.rules.block.heading.exec(r);if(e){let s=e[2].trim();if(this.rules.other.endingHash.test(s)){let n=Tt(s,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(s=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(r){let e=this.rules.block.hr.exec(r);if(e)return{type:"hr",raw:Tt(e[0],`
`)}}blockquote(r){let e=this.rules.block.blockquote.exec(r);if(e){let s=Tt(e[0],`
`).split(`
`),n="",t="",i=[];for(;s.length>0;){let l=!1,h=[],u;for(u=0;u<s.length;u++)if(this.rules.other.blockquoteStart.test(s[u]))h.push(s[u]),l=!0;else if(!l)h.push(s[u]);else break;s=s.slice(u);let m=h.join(`
`),_=m.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${m}`:m,t=t?`${t}
${_}`:_;let S=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(_,i,!0),this.lexer.state.top=S,s.length===0)break;let z=i.at(-1);if(z?.type==="code")break;if(z?.type==="blockquote"){let P=z,I=P.raw+`
`+s.join(`
`),X=this.blockquote(I);i[i.length-1]=X,n=n.substring(0,n.length-P.raw.length)+X.raw,t=t.substring(0,t.length-P.text.length)+X.text;break}else if(z?.type==="list"){let P=z,I=P.raw+`
`+s.join(`
`),X=this.list(I);i[i.length-1]=X,n=n.substring(0,n.length-z.raw.length)+X.raw,t=t.substring(0,t.length-P.raw.length)+X.raw,s=I.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:t}}}list(r){let e=this.rules.block.list.exec(r);if(e){let s=e[1].trim(),n=s.length>1,t={type:"list",raw:"",ordered:n,start:n?+s.slice(0,-1):"",loose:!1,items:[]};s=n?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=n?s:"[*+-]");let i=this.rules.other.listItemRegex(s),l=!1;for(;r;){let u=!1,m="",_="";if(!(e=i.exec(r))||this.rules.block.hr.test(r))break;m=e[0],r=r.substring(m.length);let S=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,X=>" ".repeat(3*X.length)),z=r.split(`
`,1)[0],P=!S.trim(),I=0;if(this.options.pedantic?(I=2,_=S.trimStart()):P?I=e[1].length+1:(I=e[2].search(this.rules.other.nonSpaceChar),I=I>4?1:I,_=S.slice(I),I+=e[1].length),P&&this.rules.other.blankLine.test(z)&&(m+=z+`
`,r=r.substring(z.length+1),u=!0),!u){let X=this.rules.other.nextBulletRegex(I),de=this.rules.other.hrRegex(I),Te=this.rules.other.fencesBeginRegex(I),ke=this.rules.other.headingBeginRegex(I),Pe=this.rules.other.htmlBeginRegex(I);for(;r;){let V=r.split(`
`,1)[0],ne;if(z=V,this.options.pedantic?(z=z.replace(this.rules.other.listReplaceNesting,"  "),ne=z):ne=z.replace(this.rules.other.tabCharGlobal,"    "),Te.test(z)||ke.test(z)||Pe.test(z)||X.test(z)||de.test(z))break;if(ne.search(this.rules.other.nonSpaceChar)>=I||!z.trim())_+=`
`+ne.slice(I);else{if(P||S.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||Te.test(S)||ke.test(S)||de.test(S))break;_+=`
`+z}!P&&!z.trim()&&(P=!0),m+=V+`
`,r=r.substring(V.length+1),S=ne.slice(I)}}t.loose||(l?t.loose=!0:this.rules.other.doubleBlankLine.test(m)&&(l=!0)),t.items.push({type:"list_item",raw:m,task:!!this.options.gfm&&this.rules.other.listIsTask.test(_),loose:!1,text:_,tokens:[]}),t.raw+=m}let h=t.items.at(-1);if(h)h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd();else return;t.raw=t.raw.trimEnd();for(let u of t.items){if(this.lexer.state.top=!1,u.tokens=this.lexer.blockTokens(u.text,[]),u.task){if(u.text=u.text.replace(this.rules.other.listReplaceTask,""),u.tokens[0]?.type==="text"||u.tokens[0]?.type==="paragraph"){u.tokens[0].raw=u.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),u.tokens[0].text=u.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let _=this.lexer.inlineQueue.length-1;_>=0;_--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[_].src)){this.lexer.inlineQueue[_].src=this.lexer.inlineQueue[_].src.replace(this.rules.other.listReplaceTask,"");break}}let m=this.rules.other.listTaskCheckbox.exec(u.raw);if(m){let _={type:"checkbox",raw:m[0]+" ",checked:m[0]!=="[ ]"};u.checked=_.checked,t.loose?u.tokens[0]&&["paragraph","text"].includes(u.tokens[0].type)&&"tokens"in u.tokens[0]&&u.tokens[0].tokens?(u.tokens[0].raw=_.raw+u.tokens[0].raw,u.tokens[0].text=_.raw+u.tokens[0].text,u.tokens[0].tokens.unshift(_)):u.tokens.unshift({type:"paragraph",raw:_.raw,text:_.raw,tokens:[_]}):u.tokens.unshift(_)}}if(!t.loose){let m=u.tokens.filter(S=>S.type==="space"),_=m.length>0&&m.some(S=>this.rules.other.anyLine.test(S.raw));t.loose=_}}if(t.loose)for(let u of t.items){u.loose=!0;for(let m of u.tokens)m.type==="text"&&(m.type="paragraph")}return t}}html(r){let e=this.rules.block.html.exec(r);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(r){let e=this.rules.block.def.exec(r);if(e){let s=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",t=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:s,raw:e[0],href:n,title:t}}}table(r){let e=this.rules.block.table.exec(r);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let s=Ds(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),t=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(s.length===n.length){for(let l of n)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<s.length;l++)i.header.push({text:s[l],tokens:this.lexer.inline(s[l]),header:!0,align:i.align[l]});for(let l of t)i.rows.push(Ds(l,i.header.length).map((h,u)=>({text:h,tokens:this.lexer.inline(h),header:!1,align:i.align[u]})));return i}}lheading(r){let e=this.rules.block.lheading.exec(r);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(r){let e=this.rules.block.paragraph.exec(r);if(e){let s=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:s,tokens:this.lexer.inline(s)}}}text(r){let e=this.rules.block.text.exec(r);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(r){let e=this.rules.inline.escape.exec(r);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(r){let e=this.rules.inline.tag.exec(r);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(r){let e=this.rules.inline.link.exec(r);if(e){let s=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;let i=Tt(s.slice(0,-1),"\\");if((s.length-i.length)%2===0)return}else{let i=ga(e[2],"()");if(i===-2)return;if(i>-1){let l=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let n=e[2],t="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(n);i&&(n=i[1],t=i[3])}else t=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?n=n.slice(1):n=n.slice(1,-1)),Hs(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:t&&t.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(r,e){let s;if((s=this.rules.inline.reflink.exec(r))||(s=this.rules.inline.nolink.exec(r))){let n=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),t=e[n.toLowerCase()];if(!t){let i=s[0].charAt(0);return{type:"text",raw:i,text:i}}return Hs(s,t,s[0],this.lexer,this.rules)}}emStrong(r,e,s=""){let n=this.rules.inline.emStrongLDelim.exec(r);if(!(!n||n[3]&&s.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!s||this.rules.inline.punctuation.exec(s))){let t=[...n[0]].length-1,i,l,h=t,u=0,m=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(m.lastIndex=0,e=e.slice(-1*r.length+t);(n=m.exec(e))!=null;){if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!i)continue;if(l=[...i].length,n[3]||n[4]){h+=l;continue}else if((n[5]||n[6])&&t%3&&!((t+l)%3)){u+=l;continue}if(h-=l,h>0)continue;l=Math.min(l,l+h+u);let _=[...n[0]][0].length,S=r.slice(0,t+n.index+_+l);if(Math.min(t,l)%2){let P=S.slice(1,-1);return{type:"em",raw:S,text:P,tokens:this.lexer.inlineTokens(P)}}let z=S.slice(2,-2);return{type:"strong",raw:S,text:z,tokens:this.lexer.inlineTokens(z)}}}}codespan(r){let e=this.rules.inline.code.exec(r);if(e){let s=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(s),t=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return n&&t&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:e[0],text:s}}}br(r){let e=this.rules.inline.br.exec(r);if(e)return{type:"br",raw:e[0]}}del(r){let e=this.rules.inline.del.exec(r);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(r){let e=this.rules.inline.autolink.exec(r);if(e){let s,n;return e[2]==="@"?(s=e[1],n="mailto:"+s):(s=e[1],n=s),{type:"link",raw:e[0],text:s,href:n,tokens:[{type:"text",raw:s,text:s}]}}}url(r){let e;if(e=this.rules.inline.url.exec(r)){let s,n;if(e[2]==="@")s=e[0],n="mailto:"+s;else{let t;do t=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(t!==e[0]);s=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:s,href:n,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(r){let e=this.rules.inline.text.exec(r);if(e){let s=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:s}}}},Xe=class ls{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||dt,this.options.tokenizer=this.options.tokenizer||new Dt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let s={other:$e,block:Pt.normal,inline:$t.normal};this.options.pedantic?(s.block=Pt.pedantic,s.inline=$t.pedantic):this.options.gfm&&(s.block=Pt.gfm,this.options.breaks?s.inline=$t.breaks:s.inline=$t.gfm),this.tokenizer.rules=s}static get rules(){return{block:Pt,inline:$t}}static lex(e,s){return new ls(s).lex(e)}static lexInline(e,s){return new ls(s).inlineTokens(e)}lex(e){e=e.replace($e.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){let n=this.inlineQueue[s];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,s=[],n=!1){for(this.options.pedantic&&(e=e.replace($e.tabCharGlobal,"    ").replace($e.spaceLine,""));e;){let t;if(this.options.extensions?.block?.some(l=>(t=l.call({lexer:this},e,s))?(e=e.substring(t.raw.length),s.push(t),!0):!1))continue;if(t=this.tokenizer.space(e)){e=e.substring(t.raw.length);let l=s.at(-1);t.raw.length===1&&l!==void 0?l.raw+=`
`:s.push(t);continue}if(t=this.tokenizer.code(e)){e=e.substring(t.raw.length);let l=s.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+t.raw,l.text+=`
`+t.text,this.inlineQueue.at(-1).src=l.text):s.push(t);continue}if(t=this.tokenizer.fences(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.heading(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.hr(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.blockquote(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.list(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.html(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.def(e)){e=e.substring(t.raw.length);let l=s.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+t.raw,l.text+=`
`+t.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title},s.push(t));continue}if(t=this.tokenizer.table(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.lheading(e)){e=e.substring(t.raw.length),s.push(t);continue}let i=e;if(this.options.extensions?.startBlock){let l=1/0,h=e.slice(1),u;this.options.extensions.startBlock.forEach(m=>{u=m.call({lexer:this},h),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(i=e.substring(0,l+1))}if(this.state.top&&(t=this.tokenizer.paragraph(i))){let l=s.at(-1);n&&l?.type==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+t.raw,l.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):s.push(t),n=i.length!==e.length,e=e.substring(t.raw.length);continue}if(t=this.tokenizer.text(e)){e=e.substring(t.raw.length);let l=s.at(-1);l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+t.raw,l.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):s.push(t);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,s}inline(e,s=[]){return this.inlineQueue.push({src:e,tokens:s}),s}inlineTokens(e,s=[]){let n=e,t=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(t=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)u.includes(t[0].slice(t[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,t.index)+"["+"a".repeat(t[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(t=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,t.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(t=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)i=t[2]?t[2].length:0,n=n.slice(0,t.index+i)+"["+"a".repeat(t[0].length-i-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let l=!1,h="";for(;e;){l||(h=""),l=!1;let u;if(this.options.extensions?.inline?.some(_=>(u=_.call({lexer:this},e,s))?(e=e.substring(u.raw.length),s.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);let _=s.at(-1);u.type==="text"&&_?.type==="text"?(_.raw+=u.raw,_.text+=u.text):s.push(u);continue}if(u=this.tokenizer.emStrong(e,n,h)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),s.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),s.push(u);continue}let m=e;if(this.options.extensions?.startInline){let _=1/0,S=e.slice(1),z;this.options.extensions.startInline.forEach(P=>{z=P.call({lexer:this},S),typeof z=="number"&&z>=0&&(_=Math.min(_,z))}),_<1/0&&_>=0&&(m=e.substring(0,_+1))}if(u=this.tokenizer.inlineText(m)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(h=u.raw.slice(-1)),l=!0;let _=s.at(-1);_?.type==="text"?(_.raw+=u.raw,_.text+=u.text):s.push(u);continue}if(e){let _="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(_);break}else throw new Error(_)}}return s}},Ht=class{options;parser;constructor(r){this.options=r||dt}space(r){return""}code({text:r,lang:e,escaped:s}){let n=(e||"").match($e.notSpaceStart)?.[0],t=r.replace($e.endingNewline,"")+`
`;return n?'<pre><code class="language-'+nt(n)+'">'+(s?t:nt(t,!0))+`</code></pre>
`:"<pre><code>"+(s?t:nt(t,!0))+`</code></pre>
`}blockquote({tokens:r}){return`<blockquote>
${this.parser.parse(r)}</blockquote>
`}html({text:r}){return r}def(r){return""}heading({tokens:r,depth:e}){return`<h${e}>${this.parser.parseInline(r)}</h${e}>
`}hr(r){return`<hr>
`}list(r){let e=r.ordered,s=r.start,n="";for(let l=0;l<r.items.length;l++){let h=r.items[l];n+=this.listitem(h)}let t=e?"ol":"ul",i=e&&s!==1?' start="'+s+'"':"";return"<"+t+i+`>
`+n+"</"+t+`>
`}listitem(r){return`<li>${this.parser.parse(r.tokens)}</li>
`}checkbox({checked:r}){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>
`}table(r){let e="",s="";for(let t=0;t<r.header.length;t++)s+=this.tablecell(r.header[t]);e+=this.tablerow({text:s});let n="";for(let t=0;t<r.rows.length;t++){let i=r.rows[t];s="";for(let l=0;l<i.length;l++)s+=this.tablecell(i[l]);n+=this.tablerow({text:s})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:r}){return`<tr>
${r}</tr>
`}tablecell(r){let e=this.parser.parseInline(r.tokens),s=r.header?"th":"td";return(r.align?`<${s} align="${r.align}">`:`<${s}>`)+e+`</${s}>
`}strong({tokens:r}){return`<strong>${this.parser.parseInline(r)}</strong>`}em({tokens:r}){return`<em>${this.parser.parseInline(r)}</em>`}codespan({text:r}){return`<code>${nt(r,!0)}</code>`}br(r){return"<br>"}del({tokens:r}){return`<del>${this.parser.parseInline(r)}</del>`}link({href:r,title:e,tokens:s}){let n=this.parser.parseInline(s),t=Os(r);if(t===null)return n;r=t;let i='<a href="'+r+'"';return e&&(i+=' title="'+nt(e)+'"'),i+=">"+n+"</a>",i}image({href:r,title:e,text:s,tokens:n}){n&&(s=this.parser.parseInline(n,this.parser.textRenderer));let t=Os(r);if(t===null)return nt(s);r=t;let i=`<img src="${r}" alt="${s}"`;return e&&(i+=` title="${nt(e)}"`),i+=">",i}text(r){return"tokens"in r&&r.tokens?this.parser.parseInline(r.tokens):"escaped"in r&&r.escaped?r.text:nt(r.text)}},gs=class{strong({text:r}){return r}em({text:r}){return r}codespan({text:r}){return r}del({text:r}){return r}html({text:r}){return r}text({text:r}){return r}link({text:r}){return""+r}image({text:r}){return""+r}br(){return""}checkbox({raw:r}){return r}},Je=class is{options;renderer;textRenderer;constructor(e){this.options=e||dt,this.options.renderer=this.options.renderer||new Ht,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new gs}static parse(e,s){return new is(s).parse(e)}static parseInline(e,s){return new is(s).parseInline(e)}parse(e){let s="";for(let n=0;n<e.length;n++){let t=e[n];if(this.options.extensions?.renderers?.[t.type]){let l=t,h=this.options.extensions.renderers[l.type].call({parser:this},l);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){s+=h||"";continue}}let i=t;switch(i.type){case"space":{s+=this.renderer.space(i);break}case"hr":{s+=this.renderer.hr(i);break}case"heading":{s+=this.renderer.heading(i);break}case"code":{s+=this.renderer.code(i);break}case"table":{s+=this.renderer.table(i);break}case"blockquote":{s+=this.renderer.blockquote(i);break}case"list":{s+=this.renderer.list(i);break}case"checkbox":{s+=this.renderer.checkbox(i);break}case"html":{s+=this.renderer.html(i);break}case"def":{s+=this.renderer.def(i);break}case"paragraph":{s+=this.renderer.paragraph(i);break}case"text":{s+=this.renderer.text(i);break}default:{let l='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}parseInline(e,s=this.renderer){let n="";for(let t=0;t<e.length;t++){let i=e[t];if(this.options.extensions?.renderers?.[i.type]){let h=this.options.extensions.renderers[i.type].call({parser:this},i);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=h||"";continue}}let l=i;switch(l.type){case"escape":{n+=s.text(l);break}case"html":{n+=s.html(l);break}case"link":{n+=s.link(l);break}case"image":{n+=s.image(l);break}case"checkbox":{n+=s.checkbox(l);break}case"strong":{n+=s.strong(l);break}case"em":{n+=s.em(l);break}case"codespan":{n+=s.codespan(l);break}case"br":{n+=s.br(l);break}case"del":{n+=s.del(l);break}case"text":{n+=s.text(l);break}default:{let h='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return n}},At=class{options;block;constructor(r){this.options=r||dt}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}emStrongMask(r){return r}provideLexer(){return this.block?Xe.lex:Xe.lexInline}provideParser(){return this.block?Je.parse:Je.parseInline}},ba=class{defaults=cs();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Je;Renderer=Ht;TextRenderer=gs;Lexer=Xe;Tokenizer=Dt;Hooks=At;constructor(...r){this.use(...r)}walkTokens(r,e){let s=[];for(let n of r)switch(s=s.concat(e.call(this,n)),n.type){case"table":{let t=n;for(let i of t.header)s=s.concat(this.walkTokens(i.tokens,e));for(let i of t.rows)for(let l of i)s=s.concat(this.walkTokens(l.tokens,e));break}case"list":{let t=n;s=s.concat(this.walkTokens(t.items,e));break}default:{let t=n;this.defaults.extensions?.childTokens?.[t.type]?this.defaults.extensions.childTokens[t.type].forEach(i=>{let l=t[i].flat(1/0);s=s.concat(this.walkTokens(l,e))}):t.tokens&&(s=s.concat(this.walkTokens(t.tokens,e)))}}return s}use(...r){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(s=>{let n={...s};if(n.async=this.defaults.async||n.async||!1,s.extensions&&(s.extensions.forEach(t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){let i=e.renderers[t.name];i?e.renderers[t.name]=function(...l){let h=t.renderer.apply(this,l);return h===!1&&(h=i.apply(this,l)),h}:e.renderers[t.name]=t.renderer}if("tokenizer"in t){if(!t.level||t.level!=="block"&&t.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[t.level];i?i.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&(t.level==="block"?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:t.level==="inline"&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)}),n.extensions=e),s.renderer){let t=this.defaults.renderer||new Ht(this.defaults);for(let i in s.renderer){if(!(i in t))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let l=i,h=s.renderer[l],u=t[l];t[l]=(...m)=>{let _=h.apply(t,m);return _===!1&&(_=u.apply(t,m)),_||""}}n.renderer=t}if(s.tokenizer){let t=this.defaults.tokenizer||new Dt(this.defaults);for(let i in s.tokenizer){if(!(i in t))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let l=i,h=s.tokenizer[l],u=t[l];t[l]=(...m)=>{let _=h.apply(t,m);return _===!1&&(_=u.apply(t,m)),_}}n.tokenizer=t}if(s.hooks){let t=this.defaults.hooks||new At;for(let i in s.hooks){if(!(i in t))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let l=i,h=s.hooks[l],u=t[l];At.passThroughHooks.has(i)?t[l]=m=>{if(this.defaults.async&&At.passThroughHooksRespectAsync.has(i))return(async()=>{let S=await h.call(t,m);return u.call(t,S)})();let _=h.call(t,m);return u.call(t,_)}:t[l]=(...m)=>{if(this.defaults.async)return(async()=>{let S=await h.apply(t,m);return S===!1&&(S=await u.apply(t,m)),S})();let _=h.apply(t,m);return _===!1&&(_=u.apply(t,m)),_}}n.hooks=t}if(s.walkTokens){let t=this.defaults.walkTokens,i=s.walkTokens;n.walkTokens=function(l){let h=[];return h.push(i.call(this,l)),t&&(h=h.concat(t.call(this,l))),h}}this.defaults={...this.defaults,...n}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,e){return Xe.lex(r,e??this.defaults)}parser(r,e){return Je.parse(r,e??this.defaults)}parseMarkdown(r){return(e,s)=>{let n={...s},t={...this.defaults,...n},i=this.onError(!!t.silent,!!t.async);if(this.defaults.async===!0&&n.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(t.hooks&&(t.hooks.options=t,t.hooks.block=r),t.async)return(async()=>{let l=t.hooks?await t.hooks.preprocess(e):e,h=await(t.hooks?await t.hooks.provideLexer():r?Xe.lex:Xe.lexInline)(l,t),u=t.hooks?await t.hooks.processAllTokens(h):h;t.walkTokens&&await Promise.all(this.walkTokens(u,t.walkTokens));let m=await(t.hooks?await t.hooks.provideParser():r?Je.parse:Je.parseInline)(u,t);return t.hooks?await t.hooks.postprocess(m):m})().catch(i);try{t.hooks&&(e=t.hooks.preprocess(e));let l=(t.hooks?t.hooks.provideLexer():r?Xe.lex:Xe.lexInline)(e,t);t.hooks&&(l=t.hooks.processAllTokens(l)),t.walkTokens&&this.walkTokens(l,t.walkTokens);let h=(t.hooks?t.hooks.provideParser():r?Je.parse:Je.parseInline)(l,t);return t.hooks&&(h=t.hooks.postprocess(h)),h}catch(l){return i(l)}}}onError(r,e){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,r){let n="<p>An error occurred:</p><pre>"+nt(s.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(s);throw s}}},vt=new ba;function G(r,e){return vt.parse(r,e)}G.options=G.setOptions=function(r){return vt.setOptions(r),G.defaults=vt.defaults,js(G.defaults),G};G.getDefaults=cs;G.defaults=dt;G.use=function(...r){return vt.use(...r),G.defaults=vt.defaults,js(G.defaults),G};G.walkTokens=function(r,e){return vt.walkTokens(r,e)};G.parseInline=vt.parseInline;G.Parser=Je;G.parser=Je.parse;G.Renderer=Ht;G.TextRenderer=gs;G.Lexer=Xe;G.lexer=Xe.lex;G.Tokenizer=Dt;G.Hooks=At;G.parse=G;G.options;G.setOptions;G.use;G.walkTokens;G.parseInline;Je.parse;Xe.lex;function tr(r,e){return 1+r.reduce((t,i)=>{const l=(i.potential_sg-1)*1e3,h=i.amount_kg*l*8.345*(e.efficiency_percent/100)/e.batch_size_liters;return t+h},0)/1e3}function ka(r,e){return 1+(r-1)*1e3*(1-e/100)/1e3}function sr(r,e,s="simple"){return s==="simple"?(r-e)*131.25:76.08*(r-e)/(1.775-r)*(e/.794)}function rr(r,e,s){if(r.use==="dry_hop"||r.boil_time_minutes<=0)return 0;const n=1.65*Math.pow(125e-6,e-1),t=(1-Math.exp(-.04*r.boil_time_minutes))/4.15;let i=n*t;r.form==="pellet"&&(i*=1.1),r.use==="first_wort"&&(i*=1.1),r.use==="whirlpool"&&(i*=.2);const l=r.alpha_acid_percent/100*r.amount_grams*i*1e3/s;return Math.max(0,l)}function ar(r,e,s){return r.reduce((n,t)=>n+rr(t,e,s),0)}function nr(r,e){const s=(e-1)*1e3;return s>0?r/s:0}function lr(r,e){const s=e*.264172,n=r.reduce((i,l)=>{const h=l.amount_kg*2.20462;return i+h*l.color_srm/s},0),t=1.4922*Math.pow(n,.6859);return Math.min(40,Math.max(0,t))}function os(r){const e=Math.max(1,Math.min(40,r)),s={1:"#FFE699",2:"#FFD878",3:"#FFCA5A",4:"#FFBF42",5:"#FBB123",6:"#F8A600",7:"#F39C00",8:"#EA8F00",9:"#E58500",10:"#DE7C00",11:"#D77200",12:"#CF6900",13:"#CB6200",14:"#C35900",15:"#BB5100",16:"#B54C00",17:"#B04500",18:"#A63E00",19:"#A13700",20:"#9B3200",25:"#7C2900",30:"#5E1E00",35:"#401500",40:"#261000"},n=Object.keys(s).map(Number).sort((i,l)=>i-l);let t=n[0];for(const i of n)if(i<=e)t=i;else break;return s[t]||"#261000"}function xa(r){return r<2?"Pale Straw":r<3?"Straw":r<4?"Pale Gold":r<6?"Deep Gold":r<9?"Amber":r<12?"Copper":r<15?"Light Brown":r<18?"Brown":r<20?"Dark Brown":r<24?"Very Dark":r<30?"Black":"Opaque Black"}function wa(r,e,s=330){const t=sr(r,e)*.79*7*(s/100),i=(e-1)*1e3*.4*(s/100);return Math.round(t+i)}function ya(r,e,s,n){const t=tr(r,n),i=ka(t,s.attenuation_percent),l=sr(t,i),h=ar(e,t,n.batch_size_liters),u=lr(r,n.batch_size_liters);return{og:Math.round(t*1e3)/1e3,fg:Math.round(i*1e3)/1e3,abv:Math.round(l*10)/10,ibu:Math.round(h),srm:Math.round(u*10)/10,color_hex:os(u),calories_per_330ml:wa(t,i,330)}}var Sa=w('<span class="stats svelte-1qls65z"> <span class="color-swatch svelte-1qls65z"></span> </span>'),za=w('<div class="empty-state svelte-1qls65z"><p class="svelte-1qls65z">No fermentables added yet.</p> <button type="button" class="browse-btn svelte-1qls65z">Browse Library</button></div>'),Ra=w('<span class="ferm-type svelte-1qls65z"> </span>'),$a=w('<span class="detail svelte-1qls65z"> </span>'),Ta=w('<span class="detail svelte-1qls65z"> </span>'),Aa=w('<span class="detail svelte-1qls65z"> </span>'),Ba=w('<div class="ferm-item svelte-1qls65z"><div class="ferm-main svelte-1qls65z"><div class="ferm-info svelte-1qls65z"><span class="ferm-name svelte-1qls65z"> </span> <!></div> <div class="ferm-details svelte-1qls65z"><!> <!> <!></div></div> <div class="ferm-controls svelte-1qls65z"><div class="amount-input svelte-1qls65z"><input type="number" step="0.1" min="0" class="svelte-1qls65z"/> <span class="unit svelte-1qls65z">kg</span></div> <span class="percent svelte-1qls65z"> </span> <button type="button" class="remove-btn svelte-1qls65z">×</button></div></div>'),Ca=w('<div class="fermentables-list svelte-1qls65z"></div>'),Fa=w('<div class="loading svelte-1qls65z"><div class="spinner svelte-1qls65z"></div> <p>Loading fermentables...</p></div>'),La=w('<div class="error-box svelte-1qls65z"><p class="error-text svelte-1qls65z"> </p></div>'),qa=w("<option> </option>"),Pa=w("<option> </option>"),Ia=w('<span class="item-maltster svelte-1qls65z"> </span>'),Ma=w('<span class="item-color svelte-1qls65z"><span class="color-dot svelte-1qls65z"></span> </span>'),Ea=w('<span class="item-potential svelte-1qls65z"> </span>'),Oa=w('<button type="button"><div class="item-main svelte-1qls65z"><span class="item-name svelte-1qls65z"> </span> <!></div> <div class="item-details svelte-1qls65z"><!> <!></div></button>'),Da=w('<div class="type-group svelte-1qls65z"><h5 class="type-name svelte-1qls65z"> </h5> <!></div>'),Ha=w('<div class="no-results svelte-1qls65z"><p class="svelte-1qls65z">No fermentables match your filters</p></div>'),Ua=w('<div class="filters svelte-1qls65z"><input type="text" placeholder="Search fermentables..." class="search-input svelte-1qls65z"/> <div class="filter-row svelte-1qls65z"><select class="filter-select svelte-1qls65z"><option>All Types</option><!></select> <select class="filter-select svelte-1qls65z"><option>All Origins</option><!></select></div></div> <div class="library-list svelte-1qls65z"><!> <!></div>',1),Ga=w('<div class="browser-overlay svelte-1qls65z"><div class="browser-modal svelte-1qls65z"><div class="browser-header svelte-1qls65z"><h4 class="svelte-1qls65z">Add Fermentable</h4> <button type="button" class="close-btn svelte-1qls65z">×</button></div> <!></div></div>'),ja=w('<div class="fermentable-selector svelte-1qls65z"><div class="selector-header svelte-1qls65z"><div class="header-left svelte-1qls65z"><h3 class="svelte-1qls65z">Grain Bill</h3> <!></div> <button type="button" class="add-btn svelte-1qls65z">+ Add Fermentable</button></div> <!> <!></div>');function Za(r,e){Gt(e,!0);let s=Et(e,"batchSizeLiters",3,20),n=Et(e,"efficiencyPercent",3,72),t=B(pt([])),i=B(pt([])),l=B(pt([])),h=B(!0),u=B(null),m=B(""),_=B(""),S=B(""),z=B(!1),P=ae(()=>e.fermentables.reduce((y,v)=>y+v.amount_kg,0)),I=ae(()=>()=>{if(e.fermentables.length===0)return{og:1,srm:0,color_hex:"#FFE699"};const y=e.fermentables.map(M=>({name:M.name,amount_kg:M.amount_kg,potential_sg:M.potential_sg||1.036,color_srm:M.color_srm||2})),v={batch_size_liters:s(),efficiency_percent:n()},f=tr(y,v),x=lr(y,s()),L=os(x);return{og:f,srm:x,color_hex:L}}),X=ae(()=>()=>a(t).filter(y=>{const v=!a(m)||y.name.toLowerCase().includes(a(m).toLowerCase())||y.maltster?.toLowerCase().includes(a(m).toLowerCase())||y.origin?.toLowerCase().includes(a(m).toLowerCase()),f=!a(_)||y.type===a(_),x=!a(S)||y.origin===a(S);return v&&f&&x})),de=ae(()=>()=>{const y={};for(const f of a(X)()){const x=f.type||"Other";y[x]||(y[x]=[]),y[x].push(f)}const v=["base","specialty","adjunct","sugar","extract","fruit","other"];return Object.fromEntries(Object.entries(y).sort(([f],[x])=>{const L=v.indexOf(f.toLowerCase()),M=v.indexOf(x.toLowerCase());return L>=0&&M>=0?L-M:L>=0?-1:M>=0?1:f.localeCompare(x)}))});Us(async()=>{try{const[y,v,f]=await Promise.all([$r(),Tr(),Ar()]);g(t,y,!0),g(i,v.types||[],!0),g(l,f.origins||[],!0)}catch(y){g(u,y instanceof Error?y.message:"Failed to load fermentables",!0),console.error("Failed to load fermentables:",y)}finally{g(h,!1)}});function Te(y){if(e.fermentables.some(f=>f.id===y.id))return;const v={...y,amount_kg:.5};e.onUpdate([...e.fermentables,v])}function ke(y){e.onUpdate(e.fermentables.filter(v=>v.id!==y))}function Pe(y,v){e.onUpdate(e.fermentables.map(f=>f.id===y?{...f,amount_kg:Math.max(0,v)}:f))}function V(y){return!y||!a(P)?"0%":(y/a(P)*100).toFixed(1)+"%"}function ne(y){return y==null?"--":y.toFixed(0)+"°L"}function Ae(y){return y==null?"--":y.toFixed(3)}function Ke(y){switch(y?.toLowerCase()){case"base":return"var(--positive)";case"specialty":return"var(--warning)";case"adjunct":return"var(--info)";case"sugar":return"var(--accent-primary)";case"extract":return"var(--text-secondary)";default:return"var(--text-tertiary)"}}var Se=ja(),k=c(Se),A=c(k),Be=p(c(A),2);{var Q=y=>{var v=Sa(),f=c(v),x=p(f),L=p(x);o(v),F((M,te,_e,K)=>{T(f,`${M??""} kg · OG ${te??""} · `),Ct(x,`background-color: ${_e??""}`),T(L,` ${K??""} SRM`)},[()=>a(P).toFixed(2),()=>a(I)().og.toFixed(3),()=>a(I)().color_hex,()=>a(I)().srm.toFixed(0)]),b(y,v)};C(Be,y=>{e.fermentables.length>0&&y(Q)})}o(A);var lt=p(A,2);lt.__click=()=>g(z,!0),o(k);var ht=p(k,2);{var _t=y=>{var v=za(),f=p(c(v),2);f.__click=()=>g(z,!0),o(v),b(y,v)},kt=y=>{var v=Ca();Ze(v,21,()=>e.fermentables,f=>f.id,(f,x)=>{var L=Ba(),M=c(L),te=c(M),_e=c(te),K=c(_e,!0);o(_e);var le=p(_e,2);{var Ce=H=>{var j=Ra(),me=c(j,!0);o(j),F(Re=>{Ct(j,`color: ${Re??""}`),T(me,a(x).type)},[()=>Ke(a(x).type)]),b(H,j)};C(le,H=>{a(x).type&&H(Ce)})}o(te);var Ee=p(te,2),xe=c(Ee);{var O=H=>{var j=$a(),me=c(j,!0);o(j),F(()=>T(me,a(x).maltster)),b(H,j)};C(xe,H=>{a(x).maltster&&H(O)})}var Y=p(xe,2);{var se=H=>{var j=Ta(),me=c(j,!0);o(j),F(Re=>T(me,Re),[()=>ne(a(x).color_srm)]),b(H,j)};C(Y,H=>{a(x).color_srm&&H(se)})}var ie=p(Y,2);{var we=H=>{var j=Aa(),me=c(j,!0);o(j),F(Re=>T(me,Re),[()=>Ae(a(x).potential_sg)]),b(H,j)};C(ie,H=>{a(x).potential_sg&&H(we)})}o(Ee),o(M);var fe=p(M,2),ce=c(fe),Ie=c(ce);je(Ie),Ie.__change=H=>Pe(a(x).id,parseFloat(H.currentTarget.value)||0),rt(2),o(ce);var ge=p(ce,2),ze=c(ge,!0);o(ge);var Oe=p(ge,2);Oe.__click=()=>ke(a(x).id),o(fe),o(L),F(H=>{T(K,a(x).name),Bt(Ie,a(x).amount_kg),T(ze,H)},[()=>V(a(x).amount_kg)]),b(f,L)}),o(v),b(y,v)};C(ht,y=>{e.fermentables.length===0?y(_t):y(kt,!1)})}var xt=p(ht,2);{var wt=y=>{var v=Ga();v.__click=()=>g(z,!1);var f=c(v);f.__click=K=>K.stopPropagation();var x=c(f),L=p(c(x),2);L.__click=()=>g(z,!1),o(x);var M=p(x,2);{var te=K=>{var le=Fa();b(K,le)},_e=K=>{var le=It(),Ce=ut(le);{var Ee=O=>{var Y=La(),se=c(Y),ie=c(se,!0);o(se),o(Y),F(()=>T(ie,a(u))),b(O,Y)},xe=O=>{var Y=Ua(),se=ut(Y),ie=c(se);je(ie);var we=p(ie,2),fe=c(we),ce=c(fe);ce.value=ce.__value="";var Ie=p(ce);Ze(Ie,17,()=>a(i),bt,(N,oe)=>{var ee=qa(),Z=c(ee,!0);o(ee);var J={};F(()=>{T(Z,a(oe)),J!==(J=a(oe))&&(ee.value=(ee.__value=a(oe))??"")}),b(N,ee)}),o(fe);var ge=p(fe,2),ze=c(ge);ze.value=ze.__value="";var Oe=p(ze);Ze(Oe,17,()=>a(l),bt,(N,oe)=>{var ee=Pa(),Z=c(ee,!0);o(ee);var J={};F(()=>{T(Z,a(oe)),J!==(J=a(oe))&&(ee.value=(ee.__value=a(oe))??"")}),b(N,ee)}),o(ge),o(we),o(se);var H=p(se,2),j=c(H);Ze(j,17,()=>Object.entries(a(de)()),([N,oe])=>N,(N,oe)=>{var ee=ae(()=>as(a(oe),2));let Z=()=>a(ee)[0],J=()=>a(ee)[1];var ue=Da(),Fe=c(ue),et=c(Fe,!0);o(Fe);var De=p(Fe,2);Ze(De,17,J,he=>he.id,(he,pe)=>{const Ne=ae(()=>e.fermentables.some(q=>q.id===a(pe).id));var ve=Oa();let be;ve.__click=()=>Te(a(pe));var Le=c(ve),He=c(Le),Ue=c(He,!0);o(He);var qe=p(He,2);{var Qe=q=>{var D=Ia(),re=c(D,!0);o(D),F(()=>T(re,a(pe).maltster)),b(q,D)};C(qe,q=>{a(pe).maltster&&q(Qe)})}o(Le);var We=p(Le,2),Ge=c(We);{var Ve=q=>{var D=Ma(),re=c(D),Ye=p(re);o(D),F((Qt,Wt)=>{Ct(re,`background-color: ${Qt??""}`),T(Ye,` ${Wt??""}°L`)},[()=>os(a(pe).color_srm),()=>a(pe).color_srm.toFixed(0)]),b(q,D)};C(Ge,q=>{a(pe).color_srm&&q(Ve)})}var it=p(Ge,2);{var U=q=>{var D=Ea(),re=c(D,!0);o(D),F(Ye=>T(re,Ye),[()=>a(pe).potential_sg.toFixed(3)]),b(q,D)};C(it,q=>{a(pe).potential_sg&&q(U)})}o(We),o(ve),F(()=>{be=Gs(ve,1,"library-item svelte-1qls65z",null,be,{added:a(Ne)}),ve.disabled=a(Ne),T(Ue,a(pe).name)}),b(he,ve)}),o(ue),F(()=>T(et,Z())),b(N,ue)});var me=p(j,2);{var Re=N=>{var oe=Ha();b(N,oe)};C(me,N=>{Object.keys(a(de)()).length===0&&N(Re)})}o(H),ct(ie,()=>a(m),N=>g(m,N)),Mt(fe,()=>a(_),N=>g(_,N)),Mt(ge,()=>a(S),N=>g(S,N)),b(O,Y)};C(Ce,O=>{a(u)?O(Ee):O(xe,!1)},!0)}b(K,le)};C(M,K=>{a(h)?K(te):K(_e,!1)})}o(f),o(v),b(y,v)};C(xt,y=>{a(z)&&y(wt)})}o(Se),b(r,Se),jt()}Ut(["click","change"]);var Na=w('<span class="stats svelte-4wskud"> <span class="balance svelte-4wskud"> </span></span>'),Qa=w('<div class="empty-state svelte-4wskud"><p class="svelte-4wskud">No hops added yet.</p> <button type="button" class="browse-btn svelte-4wskud">Browse Library</button></div>'),Wa=w('<span class="hop-origin svelte-4wskud"> </span>'),Va=w('<span class="ibu-value svelte-4wskud"> </span>'),Ya=w('<span class="ibu-zero svelte-4wskud">0 IBU</span>'),Xa=w('<div class="control-group svelte-4wskud"><label class="svelte-4wskud">Time</label> <div class="input-with-unit svelte-4wskud"><input type="number" step="5" min="0" max="90" class="svelte-4wskud"/> <span class="unit svelte-4wskud">min</span></div></div>'),Ja=w('<div class="hop-item svelte-4wskud"><div class="hop-main svelte-4wskud"><div class="hop-info svelte-4wskud"><span class="hop-name svelte-4wskud"> </span> <!></div> <div class="hop-ibu svelte-4wskud"><!></div></div> <div class="hop-controls svelte-4wskud"><div class="control-row svelte-4wskud"><div class="control-group svelte-4wskud"><label class="svelte-4wskud">Amount</label> <div class="input-with-unit svelte-4wskud"><input type="number" step="5" min="0" class="svelte-4wskud"/> <span class="unit svelte-4wskud">g</span></div></div> <div class="control-group svelte-4wskud"><label class="svelte-4wskud">AA%</label> <input type="number" step="0.1" min="0" max="25" class="aa-input svelte-4wskud"/></div> <!> <div class="control-group svelte-4wskud"><label class="svelte-4wskud">Use</label> <select class="svelte-4wskud"><option>Boil</option><option>First Wort</option><option>Whirlpool</option><option>Dry Hop</option><option>Mash</option></select></div> <div class="control-group svelte-4wskud"><label class="svelte-4wskud">Form</label> <select class="svelte-4wskud"><option>Pellet</option><option>Whole</option><option>Plug</option></select></div></div> <button type="button" class="remove-btn svelte-4wskud">×</button></div></div>'),Ka=w('<div class="use-group svelte-4wskud"><h4 class="use-name svelte-4wskud"> </h4> <!></div>'),en=w('<div class="hops-list svelte-4wskud"></div>'),tn=w('<div class="loading svelte-4wskud"><div class="spinner svelte-4wskud"></div> <p>Loading hops...</p></div>'),sn=w('<div class="error-box svelte-4wskud"><p class="error-text svelte-4wskud"> </p></div>'),rn=w("<option> </option>"),an=w('<span class="item-origin svelte-4wskud"> </span>'),nn=w('<span class="item-aroma svelte-4wskud"> </span>'),ln=w('<button type="button" class="library-item svelte-4wskud"><div class="item-main svelte-4wskud"><span class="item-name svelte-4wskud"> </span> <!></div> <div class="item-details svelte-4wskud"><span class="item-aa svelte-4wskud"> </span> <!></div></button>'),on=w('<div class="purpose-group svelte-4wskud"><h5 class="purpose-name svelte-4wskud"> </h5> <!></div>'),cn=w('<div class="no-results svelte-4wskud"><p class="svelte-4wskud">No hops match your filters</p></div>'),un=w('<div class="filters svelte-4wskud"><input type="text" placeholder="Search hops..." class="search-input svelte-4wskud"/> <div class="filter-row svelte-4wskud"><select class="filter-select svelte-4wskud"><option>All Purposes</option><option>Bittering</option><option>Aroma</option><option>Dual Purpose</option></select> <select class="filter-select svelte-4wskud"><option>All Origins</option><!></select></div></div> <div class="library-list svelte-4wskud"><!> <!></div>',1),pn=w('<div class="browser-overlay svelte-4wskud"><div class="browser-modal svelte-4wskud"><div class="browser-header svelte-4wskud"><h4 class="svelte-4wskud">Add Hop</h4> <button type="button" class="close-btn svelte-4wskud">×</button></div> <!></div></div>'),vn=w('<div class="hop-selector svelte-4wskud"><div class="selector-header svelte-4wskud"><div class="header-left svelte-4wskud"><h3 class="svelte-4wskud">Hop Schedule</h3> <!></div> <button type="button" class="add-btn svelte-4wskud">+ Add Hop</button></div> <!> <!></div>');function dn(r,e){Gt(e,!0);let s=Et(e,"og",3,1.05),n=Et(e,"batchSizeLiters",3,20),t=B(pt([])),i=B(pt([])),l=B(!0),h=B(null),u=B(""),m=B(""),_=B(""),S=B(!1),z=ae(()=>()=>{if(e.hops.length===0)return 0;const v=e.hops.map(f=>({name:f.name,amount_grams:f.amount_grams,alpha_acid_percent:f.alpha_acid_percent,boil_time_minutes:f.boil_time_minutes,form:f.form,use:f.use}));return ar(v,s(),n())}),P=ae(()=>()=>nr(a(z)(),s())),I=ae(()=>()=>{const v=a(P)();return v<.3?"Very Sweet":v<.5?"Malty":v<.7?"Balanced":v<.9?"Hoppy":"Very Bitter"});function X(v){const f={name:v.name,amount_grams:v.amount_grams,alpha_acid_percent:v.alpha_acid_percent,boil_time_minutes:v.boil_time_minutes,form:v.form,use:v.use};return rr(f,s(),n())}let de=ae(()=>()=>a(t).filter(v=>{const f=!a(u)||v.name.toLowerCase().includes(a(u).toLowerCase())||v.origin?.toLowerCase().includes(a(u).toLowerCase())||v.aroma_profile?.toLowerCase().includes(a(u).toLowerCase()),x=!a(m)||v.origin===a(m),L=!a(_)||v.purpose===a(_);return f&&x&&L})),Te=ae(()=>()=>{const v={};for(const x of a(de)()){const L=x.purpose||"Other";v[L]||(v[L]=[]),v[L].push(x)}const f=["dual","bittering","aroma"];return Object.fromEntries(Object.entries(v).sort(([x],[L])=>{const M=f.indexOf(x.toLowerCase()),te=f.indexOf(L.toLowerCase());return M>=0&&te>=0?M-te:M>=0?-1:te>=0?1:x.localeCompare(L)}))}),ke=ae(()=>()=>{const v={};for(const f of e.hops){const x=f.use||"boil";v[x]||(v[x]=[]),v[x].push(f)}return v.boil&&v.boil.sort((f,x)=>x.boil_time_minutes-f.boil_time_minutes),v});Us(async()=>{try{const[v,f]=await Promise.all([Br(),Cr()]);g(t,v,!0),g(i,f.origins||[],!0)}catch(v){g(h,v instanceof Error?v.message:"Failed to load hops",!0),console.error("Failed to load hops:",v)}finally{g(l,!1)}});function Pe(v){const f=v.alpha_acid_low&&v.alpha_acid_high?(v.alpha_acid_low+v.alpha_acid_high)/2:v.alpha_acid_low||v.alpha_acid_high||10,x={...v,amount_grams:30,boil_time_minutes:60,use:"boil",form:"pellet",alpha_acid_percent:f};e.onUpdate([...e.hops,x])}function V(v){const f=[...e.hops];f.splice(v,1),e.onUpdate(f)}function ne(v,f,x){const L=e.hops.map((M,te)=>te===v?{...M,[f]:x}:M);e.onUpdate(L)}function Ae(v,f){return v!=null&&f!=null?`${v.toFixed(1)}-${f.toFixed(1)}%`:v!=null?`${v.toFixed(1)}%+`:f!=null?`≤${f.toFixed(1)}%`:"--"}function Ke(v){return{boil:"Boil",whirlpool:"Whirlpool",dry_hop:"Dry Hop",first_wort:"First Wort",mash:"Mash"}[v]||v}function Se(v){switch(v?.toLowerCase()){case"bittering":return"var(--warning)";case"aroma":return"var(--positive)";case"dual":return"var(--info)";default:return"var(--text-tertiary)"}}var k=vn(),A=c(k),Be=c(A),Q=p(c(Be),2);{var lt=v=>{var f=Na(),x=c(f),L=p(x),M=c(L,!0);o(L),o(f),F((te,_e,K)=>{T(x,`${te??""} IBU · BU:GU ${_e??""} · `),T(M,K)},[()=>a(z)().toFixed(0),()=>a(P)().toFixed(2),()=>a(I)()]),b(v,f)};C(Q,v=>{e.hops.length>0&&v(lt)})}o(Be);var ht=p(Be,2);ht.__click=()=>g(S,!0),o(A);var _t=p(A,2);{var kt=v=>{var f=Qa(),x=p(c(f),2);x.__click=()=>g(S,!0),o(f),b(v,f)},xt=v=>{var f=en();Ze(f,21,()=>Object.entries(a(ke)()),bt,(x,L)=>{var M=ae(()=>as(a(L),2));let te=()=>a(M)[0],_e=()=>a(M)[1];var K=Ka(),le=c(K),Ce=c(le,!0);o(le);var Ee=p(le,2);Ze(Ee,19,_e,(xe,O)=>xe.id+"-"+O,(xe,O)=>{const Y=ae(()=>e.hops.indexOf(a(O))),se=ae(()=>X(a(O)));var ie=Ja(),we=c(ie),fe=c(we),ce=c(fe),Ie=c(ce,!0);o(ce);var ge=p(ce,2);{var ze=U=>{var q=Wa(),D=c(q,!0);o(q),F(()=>T(D,a(O).origin)),b(U,q)};C(ge,U=>{a(O).origin&&U(ze)})}o(fe);var Oe=p(fe,2),H=c(Oe);{var j=U=>{var q=Va(),D=c(q);o(q),F(re=>T(D,`+${re??""} IBU`),[()=>a(se).toFixed(0)]),b(U,q)},me=U=>{var q=Ya();b(U,q)};C(H,U=>{a(se)>0?U(j):U(me,!1)})}o(Oe),o(we);var Re=p(we,2),N=c(Re),oe=c(N),ee=p(c(oe),2),Z=c(ee);je(Z),Z.__change=U=>ne(a(Y),"amount_grams",parseFloat(U.currentTarget.value)||0),rt(2),o(ee),o(oe);var J=p(oe,2),ue=p(c(J),2);je(ue),ue.__change=U=>ne(a(Y),"alpha_acid_percent",parseFloat(U.currentTarget.value)||0),o(J);var Fe=p(J,2);{var et=U=>{var q=Xa(),D=p(c(q),2),re=c(D);je(re),re.__change=Ye=>ne(a(Y),"boil_time_minutes",parseInt(Ye.currentTarget.value)||0),rt(2),o(D),o(q),F(()=>Bt(re,a(O).boil_time_minutes)),b(U,q)};C(Fe,U=>{a(O).use==="boil"&&U(et)})}var De=p(Fe,2),he=p(c(De),2);he.__change=U=>ne(a(Y),"use",U.currentTarget.value);var pe=c(he);pe.value=pe.__value="boil";var Ne=p(pe);Ne.value=Ne.__value="first_wort";var ve=p(Ne);ve.value=ve.__value="whirlpool";var be=p(ve);be.value=be.__value="dry_hop";var Le=p(be);Le.value=Le.__value="mash",o(he);var He;qs(he),o(De);var Ue=p(De,2),qe=p(c(Ue),2);qe.__change=U=>ne(a(Y),"form",U.currentTarget.value);var Qe=c(qe);Qe.value=Qe.__value="pellet";var We=p(Qe);We.value=We.__value="whole";var Ge=p(We);Ge.value=Ge.__value="plug",o(qe);var Ve;qs(qe),o(Ue),o(N);var it=p(N,2);it.__click=()=>V(a(Y)),o(Re),o(ie),F(()=>{T(Ie,a(O).name),Bt(Z,a(O).amount_grams),Bt(ue,a(O).alpha_acid_percent),He!==(He=a(O).use)&&(he.value=(he.__value=a(O).use)??"",Ps(he,a(O).use)),Ve!==(Ve=a(O).form)&&(qe.value=(qe.__value=a(O).form)??"",Ps(qe,a(O).form))}),b(xe,ie)}),o(K),F(xe=>T(Ce,xe),[()=>Ke(te())]),b(x,K)}),o(f),b(v,f)};C(_t,v=>{e.hops.length===0?v(kt):v(xt,!1)})}var wt=p(_t,2);{var y=v=>{var f=pn();f.__click=()=>g(S,!1);var x=c(f);x.__click=le=>le.stopPropagation();var L=c(x),M=p(c(L),2);M.__click=()=>g(S,!1),o(L);var te=p(L,2);{var _e=le=>{var Ce=tn();b(le,Ce)},K=le=>{var Ce=It(),Ee=ut(Ce);{var xe=Y=>{var se=sn(),ie=c(se),we=c(ie,!0);o(ie),o(se),F(()=>T(we,a(h))),b(Y,se)},O=Y=>{var se=un(),ie=ut(se),we=c(ie);je(we);var fe=p(we,2),ce=c(fe),Ie=c(ce);Ie.value=Ie.__value="";var ge=p(Ie);ge.value=ge.__value="bittering";var ze=p(ge);ze.value=ze.__value="aroma";var Oe=p(ze);Oe.value=Oe.__value="dual",o(ce);var H=p(ce,2),j=c(H);j.value=j.__value="";var me=p(j);Ze(me,17,()=>a(i),bt,(Z,J)=>{var ue=rn(),Fe=c(ue,!0);o(ue);var et={};F(()=>{T(Fe,a(J)),et!==(et=a(J))&&(ue.value=(ue.__value=a(J))??"")}),b(Z,ue)}),o(H),o(fe),o(ie);var Re=p(ie,2),N=c(Re);Ze(N,17,()=>Object.entries(a(Te)()),([Z,J])=>Z,(Z,J)=>{var ue=ae(()=>as(a(J),2));let Fe=()=>a(ue)[0],et=()=>a(ue)[1];var De=on(),he=c(De),pe=c(he,!0);o(he);var Ne=p(he,2);Ze(Ne,17,et,ve=>ve.id,(ve,be)=>{var Le=ln();Le.__click=()=>Pe(a(be));var He=c(Le),Ue=c(He),qe=c(Ue,!0);o(Ue);var Qe=p(Ue,2);{var We=D=>{var re=an(),Ye=c(re,!0);o(re),F(()=>T(Ye,a(be).origin)),b(D,re)};C(Qe,D=>{a(be).origin&&D(We)})}o(He);var Ge=p(He,2),Ve=c(Ge),it=c(Ve,!0);o(Ve);var U=p(Ve,2);{var q=D=>{var re=nn(),Ye=c(re,!0);o(re),F(()=>T(Ye,a(be).aroma_profile)),b(D,re)};C(U,D=>{a(be).aroma_profile&&D(q)})}o(Ge),o(Le),F(D=>{T(qe,a(be).name),T(it,D)},[()=>Ae(a(be).alpha_acid_low,a(be).alpha_acid_high)]),b(ve,Le)}),o(De),F(ve=>{Ct(he,`color: ${ve??""}`),T(pe,Fe())},[()=>Se(Fe())]),b(Z,De)});var oe=p(N,2);{var ee=Z=>{var J=cn();b(Z,J)};C(oe,Z=>{Object.keys(a(Te)()).length===0&&Z(ee)})}o(Re),ct(we,()=>a(u),Z=>g(u,Z)),Mt(ce,()=>a(_),Z=>g(_,Z)),Mt(H,()=>a(m),Z=>g(m,Z)),b(Y,se)};C(Ee,Y=>{a(h)?Y(xe):Y(O,!1)},!0)}b(le,Ce)};C(te,le=>{a(l)?le(_e):le(K,!1)})}o(x),o(f),b(v,f)};C(wt,v=>{a(S)&&v(y)})}o(k),b(r,k),jt()}Ut(["click","change"]);var hn=w('<div class="validation-error svelte-1rtvxu4"><svg class="error-icon svelte-1rtvxu4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="error-text svelte-1rtvxu4"> </span> <button class="error-dismiss svelte-1rtvxu4" aria-label="Dismiss"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="svelte-1rtvxu4"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),_n=w("<span> </span>"),fn=w('<div class="style-warnings svelte-1rtvxu4"><span class="warnings-label svelte-1rtvxu4">Style Guidelines:</span> <!></div>'),gn=w('<span class="autocomplete-spinner svelte-1rtvxu4"></span>'),mn=w('<button type="button" class="clear-style svelte-1rtvxu4" aria-label="Clear style">&times;</button>'),bn=w('<span class="style-category svelte-1rtvxu4"> </span>'),kn=w('<li><button type="button" class="style-option svelte-1rtvxu4"><span class="style-name svelte-1rtvxu4"> </span> <!></button></li>'),xn=w('<ul class="style-dropdown svelte-1rtvxu4"></ul>'),wn=w('<div class="review-loading svelte-1rtvxu4"><div class="spinner svelte-1rtvxu4"></div> <p class="svelte-1rtvxu4"> </p></div>'),yn=w('<div class="review-error svelte-1rtvxu4"><p> </p></div>'),Sn=w('<span class="style-badge found svelte-1rtvxu4"> </span>'),zn=w('<span class="style-badge not-found svelte-1rtvxu4">Style not in BJCP database</span>'),Rn=w('<div class="review-meta svelte-1rtvxu4"><!> <span class="model-badge svelte-1rtvxu4"> </span></div> <div class="review-content markdown-body svelte-1rtvxu4"><!></div>',1),$n=w('<div class="modal-overlay svelte-1rtvxu4" role="presentation"><div class="modal-content svelte-1rtvxu4" role="dialog" aria-modal="true" aria-labelledby="review-modal-title" tabindex="-1"><div class="modal-header svelte-1rtvxu4"><h2 id="review-modal-title" class="svelte-1rtvxu4">AI Recipe Review</h2> <button class="modal-close svelte-1rtvxu4" aria-label="Close">&times;</button></div> <div class="modal-body svelte-1rtvxu4"><!></div></div></div>'),Tn=w('<div class="recipe-builder svelte-1rtvxu4"><!> <div class="stats-panel svelte-1rtvxu4"><div class="stat-group svelte-1rtvxu4"><div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">OG</span> <span class="stat-value svelte-1rtvxu4"> </span></div> <div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">FG</span> <span class="stat-value svelte-1rtvxu4"> </span></div> <div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">ABV</span> <span class="stat-value svelte-1rtvxu4"> </span></div></div> <div class="stat-group svelte-1rtvxu4"><div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">IBU</span> <span class="stat-value svelte-1rtvxu4"> </span></div> <div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">BU:GU</span> <span class="stat-value balance svelte-1rtvxu4"> </span> <span class="stat-sub svelte-1rtvxu4"> </span></div></div> <div class="stat-group svelte-1rtvxu4"><div class="stat color-stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">Color</span> <div class="color-display svelte-1rtvxu4"><span class="color-swatch svelte-1rtvxu4"></span> <span class="stat-value svelte-1rtvxu4"> </span></div> <span class="stat-sub svelte-1rtvxu4"> </span></div></div> <div class="stat-group svelte-1rtvxu4"><div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">Calories</span> <span class="stat-value svelte-1rtvxu4"> </span> <span class="stat-sub svelte-1rtvxu4">per 330ml</span></div></div></div> <!> <div class="section metadata-section svelte-1rtvxu4"><h2 class="section-title svelte-1rtvxu4">Recipe Details</h2> <div class="form-grid svelte-1rtvxu4"><div class="form-field full-width svelte-1rtvxu4"><label for="recipe-name" class="svelte-1rtvxu4">Recipe Name *</label> <input id="recipe-name" type="text" placeholder="e.g., My Awesome IPA" class="form-input svelte-1rtvxu4"/></div> <div class="form-field svelte-1rtvxu4"><label for="author" class="svelte-1rtvxu4">Brewer</label> <input id="author" type="text" placeholder="Your name" class="form-input svelte-1rtvxu4"/></div> <div class="form-field style-autocomplete svelte-1rtvxu4"><label for="style" class="svelte-1rtvxu4">Style</label> <div class="autocomplete-container svelte-1rtvxu4"><input id="style" type="text" placeholder="Search BJCP styles..." class="form-input svelte-1rtvxu4" autocomplete="off"/> <!> <!></div> <!></div></div></div> <div class="section params-section svelte-1rtvxu4"><h2 class="section-title svelte-1rtvxu4">Batch Parameters</h2> <div class="params-grid svelte-1rtvxu4"><div class="param-field svelte-1rtvxu4"><label for="batch-size" class="svelte-1rtvxu4">Batch Size</label> <div class="input-with-unit svelte-1rtvxu4"><input id="batch-size" type="number" min="1" step="1" class="form-input svelte-1rtvxu4"/> <span class="unit svelte-1rtvxu4">L</span></div></div> <div class="param-field svelte-1rtvxu4"><label for="efficiency" class="svelte-1rtvxu4">Efficiency</label> <div class="input-with-unit svelte-1rtvxu4"><input id="efficiency" type="number" min="50" max="95" step="1" class="form-input svelte-1rtvxu4"/> <span class="unit svelte-1rtvxu4">%</span></div></div> <div class="param-field svelte-1rtvxu4"><label for="boil-time" class="svelte-1rtvxu4">Boil Time</label> <div class="input-with-unit svelte-1rtvxu4"><input id="boil-time" type="number" min="30" max="120" step="5" class="form-input svelte-1rtvxu4"/> <span class="unit svelte-1rtvxu4">min</span></div></div></div></div> <div class="section svelte-1rtvxu4"><!></div> <div class="section svelte-1rtvxu4"><!></div> <div class="section yeast-section svelte-1rtvxu4"><!></div> <div class="section notes-section svelte-1rtvxu4"><h2 class="section-title svelte-1rtvxu4">Notes</h2> <textarea placeholder="Brewing notes, tips, or variations..." rows="4" class="notes-input svelte-1rtvxu4"></textarea></div></div> <!>',1);function An(r,e){Gt(e,!0);function s(){f()}function n(){x()}function t(){return a(Ke)}function i(){return a(l).trim().length>0}let l=B(""),h=B(""),u=B(""),m=B(""),_=B(pt([])),S=B(null),z=B(!1),P=B(!1),I=null,X=B(20),de=B(72),Te=B(60),ke=B(pt([])),Pe=B(pt([])),V=B(null),ne=B(!1),Ae=B(null),Ke=B(!1),Se=B(null),k=B(null),A=ae(()=>()=>{if(a(ke).length===0)return{og:1,fg:1,abv:0,ibu:0,srm:0,color_hex:"#FFE699",calories_per_330ml:0};const d=a(ke).map(W=>({name:W.name,amount_kg:W.amount_kg,potential_sg:W.potential_sg||1.036,color_srm:W.color_srm||2})),R=a(Pe).map(W=>({name:W.name,amount_grams:W.amount_grams,alpha_acid_percent:W.alpha_acid_percent,boil_time_minutes:W.boil_time_minutes,form:W.form,use:W.use})),$={name:a(V)?.name||"Default Yeast",attenuation_percent:a(V)?.attenuation_low&&a(V)?.attenuation_high?(a(V).attenuation_low+a(V).attenuation_high)/2:75,temp_min_c:a(V)?.temp_low||18,temp_max_c:a(V)?.temp_high||22},ye={batch_size_liters:a(X),efficiency_percent:a(de),boil_time_minutes:a(Te)};return ya(d,R,$,ye)}),Be=ae(()=>()=>nr(a(A)().ibu,a(A)().og)),Q=ae(()=>()=>{const d=a(Be)();return d<.3?"Very Malty":d<.5?"Malty":d<.7?"Balanced":d<.9?"Hoppy":"Very Bitter"}),lt=ae(()=>()=>{if(!a(S))return[];const d=a(A)(),R=[],$=a(S);return $.og_min!==void 0&&$.og_max!==void 0&&(d.og<$.og_min?R.push({stat:"OG",value:d.og.toFixed(3),range:`${$.og_min.toFixed(3)} - ${$.og_max.toFixed(3)}`,severity:"warning"}):d.og>$.og_max&&R.push({stat:"OG",value:d.og.toFixed(3),range:`${$.og_min.toFixed(3)} - ${$.og_max.toFixed(3)}`,severity:"warning"})),$.fg_min!==void 0&&$.fg_max!==void 0&&(d.fg<$.fg_min||d.fg>$.fg_max)&&R.push({stat:"FG",value:d.fg.toFixed(3),range:`${$.fg_min.toFixed(3)} - ${$.fg_max.toFixed(3)}`,severity:"warning"}),$.abv_min!==void 0&&$.abv_max!==void 0&&(d.abv<$.abv_min||d.abv>$.abv_max)&&R.push({stat:"ABV",value:`${d.abv.toFixed(1)}%`,range:`${$.abv_min.toFixed(1)}% - ${$.abv_max.toFixed(1)}%`,severity:"warning"}),$.ibu_min!==void 0&&$.ibu_max!==void 0&&(d.ibu<$.ibu_min||d.ibu>$.ibu_max)&&R.push({stat:"IBU",value:d.ibu.toFixed(0),range:`${$.ibu_min} - ${$.ibu_max}`,severity:"warning"}),$.srm_min!==void 0&&$.srm_max!==void 0&&(d.srm<$.srm_min||d.srm>$.srm_max)&&R.push({stat:"Color",value:`${d.srm.toFixed(0)} SRM`,range:`${$.srm_min} - ${$.srm_max} SRM`,severity:"warning"}),R});async function ht(d){if(d.length<2){g(_,[],!0),g(P,!1);return}I&&clearTimeout(I),I=setTimeout(async()=>{g(z,!0);try{g(_,await Fr(d,8),!0),g(P,a(_).length>0)}catch(R){console.error("Failed to search styles:",R),g(_,[],!0)}finally{g(z,!1)}},300)}function _t(d){const R=d.target;g(u,R.value,!0),a(S)&&a(u)!==a(S).name&&g(S,null),ht(a(u))}function kt(d){g(S,d,!0),g(u,d.name,!0),g(P,!1),g(_,[],!0)}function xt(){g(S,null),g(u,""),g(_,[],!0),g(P,!1)}function wt(d){g(ke,d,!0)}function y(d){g(Pe,d,!0)}function v(d){g(V,d,!0)}function f(){if(!a(l).trim()){g(k,"Please enter a recipe name");return}g(k,null);const d={name:a(l),author:a(h),type:a(u),batch_size_liters:a(X),efficiency_percent:a(de),boil_time_minutes:a(Te),og:a(A)().og,fg:a(A)().fg,abv:a(A)().abv,ibu:a(A)().ibu,color_srm:a(A)().srm,fermentables:a(ke),hops:a(Pe),yeast:a(V),notes:a(m)};e.onSave?.(d)}async function x(){if(!a(u).trim()){g(Se,"Please enter a beer style to get an AI review"),g(ne,!0);return}if(a(ke).length===0){g(Se,"Please add at least one fermentable to get an AI review"),g(ne,!0);return}g(Ke,!0),g(Se,null),g(ne,!0);try{const d=a(A)();g(Ae,await Lr({name:a(l)||"Untitled Recipe",style:a(u),og:d.og,fg:d.fg,abv:d.abv,ibu:d.ibu,color_srm:d.srm,fermentables:a(ke).map(R=>({name:R.name,amount_kg:R.amount_kg,color_srm:R.color_srm,type:R.category})),hops:a(Pe).map(R=>({name:R.name,amount_grams:R.amount_grams,boil_time_minutes:R.boil_time_minutes,alpha_acid_percent:R.alpha_acid_percent,use:R.use})),yeast:a(V)?{name:a(V).name,producer:a(V).producer,attenuation:a(V).attenuation}:void 0}),!0)}catch(d){g(Se,d instanceof Error?d.message:"Failed to get AI review",!0)}finally{g(Ke,!1)}}function L(){g(ne,!1),g(Ae,null),g(Se,null)}var M={save:s,review:n,getReviewLoading:t,canSave:i},te=Tn(),_e=ut(te),K=c(_e);{var le=d=>{var R=hn(),$=p(c(R),2),ye=c($,!0);o($);var W=p($,2);W.__click=()=>g(k,null),o(R),F(()=>T(ye,a(k))),b(d,R)};C(K,d=>{a(k)&&d(le)})}var Ce=p(K,2),Ee=c(Ce),xe=c(Ee),O=p(c(xe),2),Y=c(O,!0);o(O),o(xe);var se=p(xe,2),ie=p(c(se),2),we=c(ie,!0);o(ie),o(se);var fe=p(se,2),ce=p(c(fe),2),Ie=c(ce);o(ce),o(fe),o(Ee);var ge=p(Ee,2),ze=c(ge),Oe=p(c(ze),2),H=c(Oe,!0);o(Oe),o(ze);var j=p(ze,2),me=p(c(j),2),Re=c(me,!0);o(me);var N=p(me,2),oe=c(N,!0);o(N),o(j),o(ge);var ee=p(ge,2),Z=c(ee),J=p(c(Z),2),ue=c(J),Fe=p(ue,2),et=c(Fe);o(Fe),o(J);var De=p(J,2),he=c(De,!0);o(De),o(Z),o(ee);var pe=p(ee,2),Ne=c(pe),ve=p(c(Ne),2),be=c(ve,!0);o(ve),rt(2),o(Ne),o(pe),o(Ce);var Le=p(Ce,2);{var He=d=>{var R=fn(),$=p(c(R),2);Ze($,17,()=>a(lt)(),bt,(ye,W)=>{var Me=_n(),at=c(Me);o(Me),F(()=>{Gs(Me,1,`warning-badge ${a(W).severity??""}`,"svelte-1rtvxu4"),T(at,`${a(W).stat??""}: ${a(W).value??""} (target: ${a(W).range??""})`)}),b(ye,Me)}),o(R),b(d,R)};C(Le,d=>{a(lt)().length>0&&d(He)})}var Ue=p(Le,2),qe=p(c(Ue),2),Qe=c(qe),We=p(c(Qe),2);je(We),o(Qe);var Ge=p(Qe,2),Ve=p(c(Ge),2);je(Ve),o(Ge);var it=p(Ge,2),U=p(c(it),2),q=c(U);je(q),q.__input=_t;var D=p(q,2);{var re=d=>{var R=gn();b(d,R)};C(D,d=>{a(z)&&d(re)})}var Ye=p(D,2);{var Qt=d=>{var R=mn();R.__click=xt,b(d,R)};C(Ye,d=>{a(S)&&d(Qt)})}o(U);var Wt=p(U,2);{var ir=d=>{var R=xn();Ze(R,21,()=>a(_),bt,($,ye)=>{var W=kn(),Me=c(W);Me.__click=()=>kt(a(ye));var at=c(Me),yt=c(at,!0);o(at);var St=p(at,2);{var tt=st=>{var ot=bn(),zt=c(ot,!0);o(ot),F(()=>T(zt,a(ye).category)),b(st,ot)};C(St,st=>{a(ye).category&&st(tt)})}o(Me),o(W),F(()=>T(yt,a(ye).name)),b($,W)}),o(R),b(d,R)};C(Wt,d=>{a(P)&&a(_).length>0&&d(ir)})}o(it),o(qe),o(Ue);var Vt=p(Ue,2),ms=p(c(Vt),2),Yt=c(ms),bs=p(c(Yt),2),ks=c(bs);je(ks),rt(2),o(bs),o(Yt);var Xt=p(Yt,2),xs=p(c(Xt),2),ws=c(xs);je(ws),rt(2),o(xs),o(Xt);var ys=p(Xt,2),Ss=p(c(ys),2),zs=c(Ss);je(zs),rt(2),o(Ss),o(ys),o(ms),o(Vt);var Jt=p(Vt,2),or=c(Jt);Za(or,{get fermentables(){return a(ke)},get batchSizeLiters(){return a(X)},get efficiencyPercent(){return a(de)},onUpdate:wt}),o(Jt);var Kt=p(Jt,2),cr=c(Kt);{let d=ae(()=>a(A)().og);dn(cr,{get hops(){return a(Pe)},get og(){return a(d)},get batchSizeLiters(){return a(X)},onUpdate:y})}o(Kt);var es=p(Kt,2),ur=c(es);{let d=ae(()=>a(V)?.id);Ir(ur,{get selectedYeastId(){return a(d)},onSelect:v,label:"Select Yeast Strain"})}o(es);var Rs=p(es,2),$s=p(c(Rs),2);xr($s),o(Rs),o(_e);var pr=p(_e,2);{var vr=d=>{var R=$n();R.__click=L;var $=c(R),ye=c($),W=p(c(ye),2);W.__click=L,o(ye);var Me=p(ye,2),at=c(Me);{var yt=tt=>{var st=wn(),ot=p(c(st),2),zt=c(ot);o(ot),o(st),F(()=>T(zt,`Analyzing your recipe against ${(a(u)||"style guidelines")??""}...`)),b(tt,st)},St=tt=>{var st=It(),ot=ut(st);{var zt=ft=>{var gt=yn(),qt=c(gt),ts=c(qt,!0);o(qt),o(gt),F(()=>T(ts,a(Se))),b(ft,gt)},dr=ft=>{var gt=It(),qt=ut(gt);{var ts=ss=>{var Ts=Rn(),rs=ut(Ts),As=c(rs);{var hr=mt=>{var Rt=Sn(),mr=c(Rt);o(Rt),F(()=>T(mr,`BJCP Style: ${a(Ae).style_name??""}`)),b(mt,Rt)},_r=mt=>{var Rt=zn();b(mt,Rt)};C(As,mt=>{a(Ae).style_found?mt(hr):mt(_r,!1)})}var Bs=p(As,2),fr=c(Bs);o(Bs),o(rs);var Cs=p(rs,2),gr=c(Cs);Pr(gr,()=>G(a(Ae).review)),o(Cs),F(()=>T(fr,`Model: ${a(Ae).model??""}`)),b(ss,Ts)};C(qt,ss=>{a(Ae)&&ss(ts)},!0)}b(ft,gt)};C(ot,ft=>{a(Se)?ft(zt):ft(dr,!1)},!0)}b(tt,st)};C(at,tt=>{a(Ke)?tt(yt):tt(St,!1)})}o(Me),o($),o(R),b(d,R)};C(pr,d=>{a(ne)&&d(vr)})}return F((d,R,$,ye,W,Me,at,yt,St,tt)=>{T(Y,d),T(we,R),T(Ie,`${$??""}%`),T(H,ye),T(Re,W),T(oe,Me),Ct(ue,`background-color: ${at??""}`),T(et,`${yt??""} SRM`),T(he,St),T(be,tt),Bt(q,a(u))},[()=>a(A)().og.toFixed(3),()=>a(A)().fg.toFixed(3),()=>a(A)().abv.toFixed(1),()=>a(A)().ibu.toFixed(0),()=>a(Be)().toFixed(2),()=>a(Q)(),()=>a(A)().color_hex,()=>a(A)().srm.toFixed(0),()=>xa(a(A)().srm),()=>a(A)().calories_per_330ml]),ct(We,()=>a(l),d=>g(l,d)),ct(Ve,()=>a(h),d=>g(h,d)),Fs("focus",q,()=>a(u).length>=2&&a(_).length>0&&g(P,!0)),Fs("blur",q,()=>setTimeout(()=>g(P,!1),200)),ct(ks,()=>a(X),d=>g(X,d)),ct(ws,()=>a(de),d=>g(de,d)),ct(zs,()=>a(Te),d=>g(Te,d)),ct($s,()=>a(m),d=>g(m,d)),b(r,te),jt(M)}Ut(["click","input"]);var Bn=w('<span class="btn-spinner svelte-1pes5m5"></span> Analyzing...',1),Cn=br('<svg class="btn-icon svelte-1pes5m5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z"></path></svg> AI Review',1),Fn=w('<span class="btn-spinner svelte-1pes5m5"></span> Saving...',1),Ln=w('<div class="error-banner svelte-1pes5m5"><svg class="error-icon svelte-1pes5m5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="error-message svelte-1pes5m5"> </span> <button class="error-dismiss svelte-1pes5m5" aria-label="Dismiss error"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="svelte-1pes5m5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),qn=w('<div class="saving-overlay svelte-1pes5m5"><div class="spinner svelte-1pes5m5"></div> <span>Saving recipe...</span></div>'),Pn=w('<div class="page-container svelte-1pes5m5"><div class="back-link svelte-1pes5m5"><a href="/recipes" class="back-btn svelte-1pes5m5"><svg class="back-icon svelte-1pes5m5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <div class="page-header svelte-1pes5m5"><div class="header-content svelte-1pes5m5"><h1 class="page-title svelte-1pes5m5">Create New Recipe</h1> <p class="page-description svelte-1pes5m5">Build your recipe with real-time calculations, or <a href="/recipes/import" class="import-link svelte-1pes5m5">import from BeerXML/BeerJSON</a></p></div> <div class="header-actions svelte-1pes5m5"><button type="button" class="btn-ghost svelte-1pes5m5">Cancel</button> <button type="button" class="btn-review svelte-1pes5m5"><!></button> <button type="button" class="btn-save svelte-1pes5m5"><!></button></div></div> <!> <!> <!></div>');function Jn(r,e){Gt(e,!0);let s=B(!1),n=B(null),t=B(void 0),i=B(!1);wr(()=>{const k=setInterval(()=>{a(t)&&g(i,a(t).getReviewLoading(),!0)},100);return()=>clearInterval(k)});async function l(k){g(s,!0),g(n,null);try{const A={name:k.name,author:k.author||void 0,type:k.type||void 0,batch_size_liters:k.batch_size_liters,efficiency_percent:k.efficiency_percent,boil_time_minutes:k.boil_time_minutes,og:k.og,fg:k.fg,abv:k.abv,ibu:k.ibu,color_srm:k.color_srm,notes:k.notes||void 0,yeast_name:k.yeast?.name,yeast_lab:k.yeast?.producer,yeast_product_id:k.yeast?.product_id,yeast_temp_min:k.yeast?.temp_low??void 0,yeast_temp_max:k.yeast?.temp_high??void 0,yeast_attenuation:k.yeast?.attenuation_low&&k.yeast?.attenuation_high?(k.yeast.attenuation_low+k.yeast.attenuation_high)/2:void 0,format_extensions:{fermentables:k.fermentables.map(Q=>({id:Q.id,name:Q.name,amount_kg:Q.amount_kg,color_lovibond:Q.color_lovibond,potential_sg:Q.potential_sg,type:Q.type,origin:Q.origin,maltster:Q.maltster})),hops:k.hops.map(Q=>({id:Q.id,name:Q.name,amount_grams:Q.amount_grams,alpha_acid_percent:Q.alpha_acid_percent,boil_time_minutes:Q.boil_time_minutes,use:Q.use,form:Q.form,origin:Q.origin,purpose:Q.purpose}))}},Be=await qr(A);Ls(`/recipes/${Be.id}`)}catch(A){g(n,A instanceof Error?A.message:"Failed to create recipe",!0),g(s,!1)}}function h(){Ls("/recipes")}var u=Pn();zr("1pes5m5",k=>{yr(()=>{Sr.title="New Recipe | BrewSignal"})});var m=p(c(u),2),_=p(c(m),2),S=c(_);S.__click=h;var z=p(S,2);z.__click=()=>a(t)?.review();var P=c(z);{var I=k=>{var A=Bn();rt(),b(k,A)},X=k=>{var A=Cn();rt(),b(k,A)};C(P,k=>{a(i)?k(I):k(X,!1)})}o(z);var de=p(z,2);de.__click=()=>a(t)?.save();var Te=c(de);{var ke=k=>{var A=Fn();rt(),b(k,A)},Pe=k=>{var A=kr("Save Recipe");b(k,A)};C(Te,k=>{a(s)?k(ke):k(Pe,!1)})}o(de),o(_),o(m);var V=p(m,2);{var ne=k=>{var A=Ln(),Be=p(c(A),2),Q=c(Be,!0);o(Be);var lt=p(Be,2);lt.__click=()=>g(n,null),o(A),F(()=>T(Q,a(n))),b(k,A)};C(V,k=>{a(n)&&k(ne)})}var Ae=p(V,2);{var Ke=k=>{var A=qn();b(k,A)};C(Ae,k=>{a(s)&&k(Ke)})}var Se=p(Ae,2);Rr(An(Se,{onSave:l,onCancel:h}),k=>g(t,k,!0),()=>a(t)),o(u),F(()=>{z.disabled=a(i),de.disabled=a(s)}),b(r,u),jt()}Ut(["click"]);export{Jn as component};
