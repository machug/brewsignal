import{d as Ot,f as d,a as c,s as m,c as bt,t as Dt}from"../chunks/D3BGmjiQ.js";import{a as wt,s as h,p as Ze,o as jt,c as u,g as s,h as yt,d as a,j as t,i as e,t as F,l as Q,n as Xe,f as Ne,ax as Pt,k as la,e as ia,aw as oa}from"../chunks/qPFz7rcR.js";import{i as w}from"../chunks/VWvnMYpw.js";import{h as na}from"../chunks/DUkqxoKv.js";import{g as Et}from"../chunks/DV9xmT9O.js";import{z as va,A as ca,a4 as ua,h as da,y as _a,a5 as pa,a6 as ma}from"../chunks/BCuyDNth.js";import{h as fa}from"../chunks/HeXKYDcw.js";import{r as Fe,b as ft}from"../chunks/D6lThKhy.js";import{s as dt}from"../chunks/DiFo9CWT.js";import{b as De}from"../chunks/DzkFo9Qc.js";import{e as Ue,i as gt}from"../chunks/fEN5jtvK.js";import{s as ba}from"../chunks/B1LnsfEN.js";import{b as xt,i as Tt,s as Gt}from"../chunks/Dx7-pTgU.js";import{p as ht}from"../chunks/DL3aSIGJ.js";import{Y as ga}from"../chunks/BnvVZ7HO.js";function Nt(_,o){return 1+_.reduce((C,g)=>{const B=(g.potential_sg-1)*1e3,U=g.amount_kg*B*o.efficiency_percent/(o.batch_size_liters/100);return C+U},0)/1e3}function xa(_,o){return 1+(_-1)*1e3*(1-o/100)/1e3}function Yt(_,o,f="simple"){return f==="simple"?(_-o)*131.25:76.08*(_-o)/(1.775-_)*(o/.794)}function Vt(_,o,f){if(_.use==="dry_hop"||_.boil_time_minutes<=0)return 0;const C=1.65*Math.pow(125e-6,o-1),g=(1-Math.exp(-.04*_.boil_time_minutes))/4.15;let B=C*g;_.form==="pellet"&&(B*=1.1),_.use==="first_wort"&&(B*=1.1),_.use==="whirlpool"&&(B*=.2);const U=_.alpha_acid_percent/100*_.amount_grams*B*1e3/(f*10);return Math.max(0,U)}function Wt(_,o,f){return _.reduce((C,g)=>C+Vt(g,o,f),0)}function Jt(_,o){const f=(o-1)*1e3;return f>0?_/f:0}function Kt(_,o){const f=o*.264172,C=_.reduce((B,U)=>{const $=U.amount_kg*2.20462;return B+$*U.color_srm/f},0),g=1.4922*Math.pow(C,.6859);return Math.min(40,Math.max(0,g))}function Mt(_){const o=Math.max(1,Math.min(40,_)),f={1:"#FFE699",2:"#FFD878",3:"#FFCA5A",4:"#FFBF42",5:"#FBB123",6:"#F8A600",7:"#F39C00",8:"#EA8F00",9:"#E58500",10:"#DE7C00",11:"#D77200",12:"#CF6900",13:"#CB6200",14:"#C35900",15:"#BB5100",16:"#B54C00",17:"#B04500",18:"#A63E00",19:"#A13700",20:"#9B3200",25:"#7C2900",30:"#5E1E00",35:"#401500",40:"#261000"},C=Object.keys(f).map(Number).sort((B,U)=>B-U);let g=C[0];for(const B of C)if(B<=o)g=B;else break;return f[g]||"#261000"}function ha(_){return _<2?"Pale Straw":_<3?"Straw":_<4?"Pale Gold":_<6?"Deep Gold":_<9?"Amber":_<12?"Copper":_<15?"Light Brown":_<18?"Brown":_<20?"Dark Brown":_<24?"Very Dark":_<30?"Black":"Opaque Black"}function wa(_,o,f=330){const g=Yt(_,o)*.79*7*(f/100),B=(o-1)*1e3*.4*(f/100);return Math.round(g+B)}function ya(_,o,f,C){const g=Nt(_,C),B=xa(g,f.attenuation_percent),U=Yt(g,B),$=Wt(o,g,C.batch_size_liters),X=Kt(_,C.batch_size_liters);return{og:Math.round(g*1e3)/1e3,fg:Math.round(B*1e3)/1e3,abv:Math.round(U*10)/10,ibu:Math.round($),srm:Math.round(X*10)/10,color_hex:Mt(X),calories_per_330ml:wa(g,B,330)}}var ka=d('<span class="stats svelte-1qls65z"> <span class="color-swatch svelte-1qls65z"></span> </span>'),za=d('<div class="empty-state svelte-1qls65z"><p class="svelte-1qls65z">No fermentables added yet.</p> <button type="button" class="browse-btn svelte-1qls65z">Browse Library</button></div>'),Fa=d('<span class="ferm-type svelte-1qls65z"> </span>'),Ba=d('<span class="detail svelte-1qls65z"> </span>'),qa=d('<span class="detail svelte-1qls65z"> </span>'),Ca=d('<span class="detail svelte-1qls65z"> </span>'),Sa=d('<div class="ferm-item svelte-1qls65z"><div class="ferm-main svelte-1qls65z"><div class="ferm-info svelte-1qls65z"><span class="ferm-name svelte-1qls65z"> </span> <!></div> <div class="ferm-details svelte-1qls65z"><!> <!> <!></div></div> <div class="ferm-controls svelte-1qls65z"><div class="amount-input svelte-1qls65z"><input type="number" step="0.1" min="0" class="svelte-1qls65z"/> <span class="unit svelte-1qls65z">kg</span></div> <span class="percent svelte-1qls65z"> </span> <button type="button" class="remove-btn svelte-1qls65z">×</button></div></div>'),La=d('<div class="fermentables-list svelte-1qls65z"></div>'),Aa=d('<div class="loading svelte-1qls65z"><div class="spinner svelte-1qls65z"></div> <p>Loading fermentables...</p></div>'),Pa=d('<div class="error-box svelte-1qls65z"><p class="error-text svelte-1qls65z"> </p></div>'),Ma=d("<option> </option>"),Oa=d("<option> </option>"),Ua=d('<span class="item-maltster svelte-1qls65z"> </span>'),Ra=d('<span class="item-color svelte-1qls65z"><span class="color-dot svelte-1qls65z"></span> </span>'),Ia=d('<span class="item-potential svelte-1qls65z"> </span>'),Ha=d('<button type="button"><div class="item-main svelte-1qls65z"><span class="item-name svelte-1qls65z"> </span> <!></div> <div class="item-details svelte-1qls65z"><!> <!></div></button>'),Da=d('<div class="type-group svelte-1qls65z"><h5 class="type-name svelte-1qls65z"> </h5> <!></div>'),Ea=d('<div class="no-results svelte-1qls65z"><p class="svelte-1qls65z">No fermentables match your filters</p></div>'),Ta=d('<div class="filters svelte-1qls65z"><input type="text" placeholder="Search fermentables..." class="search-input svelte-1qls65z"/> <div class="filter-row svelte-1qls65z"><select class="filter-select svelte-1qls65z"><option>All Types</option><!></select> <select class="filter-select svelte-1qls65z"><option>All Origins</option><!></select></div></div> <div class="library-list svelte-1qls65z"><!> <!></div>',1),Ga=d('<div class="browser-overlay svelte-1qls65z"><div class="browser-modal svelte-1qls65z"><div class="browser-header svelte-1qls65z"><h4 class="svelte-1qls65z">Add Fermentable</h4> <button type="button" class="close-btn svelte-1qls65z">×</button></div> <!></div></div>'),ja=d('<div class="fermentable-selector svelte-1qls65z"><div class="selector-header svelte-1qls65z"><div class="header-left svelte-1qls65z"><h3 class="svelte-1qls65z">Grain Bill</h3> <!></div> <button type="button" class="add-btn svelte-1qls65z">+ Add Fermentable</button></div> <!> <!></div>');function Na(_,o){wt(o,!0);let f=ht(o,"batchSizeLiters",3,20),C=ht(o,"efficiencyPercent",3,72),g=h(Ze([])),B=h(Ze([])),U=h(Ze([])),$=h(!0),X=h(null),G=h(""),le=h(""),A=h(""),p=h(!1),D=Q(()=>o.fermentables.reduce((n,r)=>n+r.amount_kg,0)),ne=Q(()=>()=>{if(o.fermentables.length===0)return{og:1,srm:0,color_hex:"#FFE699"};const n=o.fermentables.map(x=>({name:x.name,amount_kg:x.amount_kg,potential_sg:x.potential_sg||1.036,color_srm:x.color_srm||2})),r={batch_size_liters:f(),efficiency_percent:C()},l=Nt(n,r),i=Kt(n,f()),b=Mt(i);return{og:l,srm:i,color_hex:b}}),y=Q(()=>()=>e(g).filter(n=>{const r=!e(G)||n.name.toLowerCase().includes(e(G).toLowerCase())||n.maltster?.toLowerCase().includes(e(G).toLowerCase())||n.origin?.toLowerCase().includes(e(G).toLowerCase()),l=!e(le)||n.type===e(le),i=!e(A)||n.origin===e(A);return r&&l&&i})),j=Q(()=>()=>{const n={};for(const l of e(y)()){const i=l.type||"Other";n[i]||(n[i]=[]),n[i].push(l)}const r=["base","specialty","adjunct","sugar","extract","fruit","other"];return Object.fromEntries(Object.entries(n).sort(([l],[i])=>{const b=r.indexOf(l.toLowerCase()),x=r.indexOf(i.toLowerCase());return b>=0&&x>=0?b-x:b>=0?-1:x>=0?1:l.localeCompare(i)}))});jt(async()=>{try{const[n,r,l]=await Promise.all([va(),ca(),ua()]);u(g,n,!0),u(B,r.types||[],!0),u(U,l.origins||[],!0)}catch(n){u(X,n instanceof Error?n.message:"Failed to load fermentables",!0),console.error("Failed to load fermentables:",n)}finally{u($,!1)}});function Ye(n){if(o.fermentables.some(l=>l.id===n.id))return;const r={...n,amount_kg:.5};o.onUpdate([...o.fermentables,r]),u(p,!1)}function lt(n){o.onUpdate(o.fermentables.filter(r=>r.id!==n))}function it(n,r){o.onUpdate(o.fermentables.map(l=>l.id===n?{...l,amount_kg:Math.max(0,r)}:l))}function ot(n){return!n||!e(D)?"0%":(n/e(D)*100).toFixed(1)+"%"}function Re(n){return n==null?"--":n.toFixed(0)+"°L"}function nt(n){return n==null?"--":n.toFixed(3)}function vt(n){switch(n?.toLowerCase()){case"base":return"var(--positive)";case"specialty":return"var(--warning)";case"adjunct":return"var(--info)";case"sugar":return"var(--accent-primary)";case"extract":return"var(--text-secondary)";default:return"var(--text-tertiary)"}}var Ee=ja(),Ae=a(Ee),Be=a(Ae),Ie=s(a(Be),2);{var Ve=n=>{var r=ka(),l=a(r),i=s(l),b=s(i);t(r),F((x,Y,ve,E)=>{m(l,`${x??""} kg · OG ${Y??""} · `),dt(i,`background-color: ${ve??""}`),m(b,` ${E??""} SRM`)},[()=>e(D).toFixed(2),()=>e(ne)().og.toFixed(3),()=>e(ne)().color_hex,()=>e(ne)().srm.toFixed(0)]),c(n,r)};w(Ie,n=>{o.fermentables.length>0&&n(Ve)})}t(Be);var We=s(Be,2);We.__click=()=>u(p,!0),t(Ae);var Je=s(Ae,2);{var $e=n=>{var r=za(),l=s(a(r),2);l.__click=()=>u(p,!0),t(r),c(n,r)},Ke=n=>{var r=La();Ue(r,21,()=>o.fermentables,l=>l.id,(l,i)=>{var b=Sa(),x=a(b),Y=a(x),ve=a(Y),E=a(ve,!0);t(ve);var V=s(ve,2);{var we=k=>{var P=Fa(),oe=a(P,!0);t(P),F(_e=>{dt(P,`color: ${_e??""}`),m(oe,e(i).type)},[()=>vt(e(i).type)]),c(k,P)};w(V,k=>{e(i).type&&k(we)})}t(Y);var Pe=s(Y,2),ce=a(Pe);{var q=k=>{var P=Ba(),oe=a(P,!0);t(P),F(()=>m(oe,e(i).maltster)),c(k,P)};w(ce,k=>{e(i).maltster&&k(q)})}var R=s(ce,2);{var W=k=>{var P=qa(),oe=a(P,!0);t(P),F(_e=>m(oe,_e),[()=>Re(e(i).color_srm)]),c(k,P)};w(R,k=>{e(i).color_srm&&k(W)})}var J=s(R,2);{var ue=k=>{var P=Ca(),oe=a(P,!0);t(P),F(_e=>m(oe,_e),[()=>nt(e(i).potential_sg)]),c(k,P)};w(J,k=>{e(i).potential_sg&&k(ue)})}t(Pe),t(x);var ie=s(x,2),se=a(ie),be=a(se);Fe(be),be.__change=k=>it(e(i).id,parseFloat(k.currentTarget.value)||0),Xe(2),t(se);var de=s(se,2),ge=a(de,!0);t(de);var qe=s(de,2);qe.__click=()=>lt(e(i).id),t(ie),t(b),F(k=>{m(E,e(i).name),ft(be,e(i).amount_kg),m(ge,k)},[()=>ot(e(i).amount_kg)]),c(l,b)}),t(r),c(n,r)};w(Je,n=>{o.fermentables.length===0?n($e):n(Ke,!1)})}var et=s(Je,2);{var ct=n=>{var r=Ga();r.__click=()=>u(p,!1);var l=a(r);l.__click=E=>E.stopPropagation();var i=a(l),b=s(a(i),2);b.__click=()=>u(p,!1),t(i);var x=s(i,2);{var Y=E=>{var V=Aa();c(E,V)},ve=E=>{var V=bt(),we=Ne(V);{var Pe=q=>{var R=Pa(),W=a(R),J=a(W,!0);t(W),t(R),F(()=>m(J,e(X))),c(q,R)},ce=q=>{var R=Ta(),W=Ne(R),J=a(W);Fe(J);var ue=s(J,2),ie=a(ue),se=a(ie);se.value=se.__value="";var be=s(se);Ue(be,17,()=>e(B),gt,(M,K)=>{var N=Ma(),O=a(N,!0);t(N);var T={};F(()=>{m(O,e(K)),T!==(T=e(K))&&(N.value=(N.__value=e(K))??"")}),c(M,N)}),t(ie);var de=s(ie,2),ge=a(de);ge.value=ge.__value="";var qe=s(ge);Ue(qe,17,()=>e(U),gt,(M,K)=>{var N=Oa(),O=a(N,!0);t(N);var T={};F(()=>{m(O,e(K)),T!==(T=e(K))&&(N.value=(N.__value=e(K))??"")}),c(M,N)}),t(de),t(ue),t(W);var k=s(W,2),P=a(k);Ue(P,17,()=>Object.entries(e(j)()),([M,K])=>M,(M,K)=>{var N=Q(()=>Pt(e(K),2));let O=()=>e(N)[0],T=()=>e(N)[1];var ee=Da(),pe=a(ee),Ce=a(pe,!0);t(pe);var ye=s(pe,2);Ue(ye,17,T,Z=>Z.id,(Z,te)=>{const Se=Q(()=>o.fermentables.some(z=>z.id===e(te).id));var ae=Ha();let re;ae.__click=()=>Ye(e(te));var xe=a(ae),he=a(xe),Me=a(he,!0);t(he);var me=s(he,2);{var He=z=>{var S=Ua(),I=a(S,!0);t(S),F(()=>m(I,e(te).maltster)),c(z,S)};w(me,z=>{e(te).maltster&&z(He)})}t(xe);var ke=s(xe,2),Oe=a(ke);{var ze=z=>{var S=Ra(),I=a(S),Le=s(I);t(S),F((kt,zt)=>{dt(I,`background-color: ${kt??""}`),m(Le,` ${zt??""}°L`)},[()=>Mt(e(te).color_srm),()=>e(te).color_srm.toFixed(0)]),c(z,S)};w(Oe,z=>{e(te).color_srm&&z(ze)})}var Te=s(Oe,2);{var L=z=>{var S=Ia(),I=a(S,!0);t(S),F(Le=>m(I,Le),[()=>e(te).potential_sg.toFixed(3)]),c(z,S)};w(Te,z=>{e(te).potential_sg&&z(L)})}t(ke),t(ae),F(()=>{re=ba(ae,1,"library-item svelte-1qls65z",null,re,{added:e(Se)}),ae.disabled=e(Se),m(Me,e(te).name)}),c(Z,ae)}),t(ee),F(()=>m(Ce,O())),c(M,ee)});var oe=s(P,2);{var _e=M=>{var K=Ea();c(M,K)};w(oe,M=>{Object.keys(e(j)()).length===0&&M(_e)})}t(k),De(J,()=>e(G),M=>u(G,M)),xt(ie,()=>e(le),M=>u(le,M)),xt(de,()=>e(A),M=>u(A,M)),c(q,R)};w(we,q=>{e(X)?q(Pe):q(ce,!1)},!0)}c(E,V)};w(x,E=>{e($)?E(Y):E(ve,!1)})}t(l),t(r),c(n,r)};w(et,n=>{e(p)&&n(ct)})}t(Ee),c(_,Ee),yt()}Ot(["click","change"]);var Ya=d('<span class="stats svelte-4wskud"> <span class="balance svelte-4wskud"> </span></span>'),Va=d('<div class="empty-state svelte-4wskud"><p class="svelte-4wskud">No hops added yet.</p> <button type="button" class="browse-btn svelte-4wskud">Browse Library</button></div>'),Wa=d('<span class="hop-origin svelte-4wskud"> </span>'),Ja=d('<span class="ibu-value svelte-4wskud"> </span>'),Ka=d('<span class="ibu-zero svelte-4wskud">0 IBU</span>'),Qa=d('<div class="control-group svelte-4wskud"><label class="svelte-4wskud">Time</label> <div class="input-with-unit svelte-4wskud"><input type="number" step="5" min="0" max="90" class="svelte-4wskud"/> <span class="unit svelte-4wskud">min</span></div></div>'),Xa=d('<div class="hop-item svelte-4wskud"><div class="hop-main svelte-4wskud"><div class="hop-info svelte-4wskud"><span class="hop-name svelte-4wskud"> </span> <!></div> <div class="hop-ibu svelte-4wskud"><!></div></div> <div class="hop-controls svelte-4wskud"><div class="control-row svelte-4wskud"><div class="control-group svelte-4wskud"><label class="svelte-4wskud">Amount</label> <div class="input-with-unit svelte-4wskud"><input type="number" step="5" min="0" class="svelte-4wskud"/> <span class="unit svelte-4wskud">g</span></div></div> <div class="control-group svelte-4wskud"><label class="svelte-4wskud">AA%</label> <input type="number" step="0.1" min="0" max="25" class="aa-input svelte-4wskud"/></div> <!> <div class="control-group svelte-4wskud"><label class="svelte-4wskud">Use</label> <select class="svelte-4wskud"><option>Boil</option><option>First Wort</option><option>Whirlpool</option><option>Dry Hop</option><option>Mash</option></select></div> <div class="control-group svelte-4wskud"><label class="svelte-4wskud">Form</label> <select class="svelte-4wskud"><option>Pellet</option><option>Whole</option><option>Plug</option></select></div></div> <button type="button" class="remove-btn svelte-4wskud">×</button></div></div>'),Za=d('<div class="use-group svelte-4wskud"><h4 class="use-name svelte-4wskud"> </h4> <!></div>'),$a=d('<div class="hops-list svelte-4wskud"></div>'),es=d('<div class="loading svelte-4wskud"><div class="spinner svelte-4wskud"></div> <p>Loading hops...</p></div>'),ts=d('<div class="error-box svelte-4wskud"><p class="error-text svelte-4wskud"> </p></div>'),as=d("<option> </option>"),ss=d('<span class="item-origin svelte-4wskud"> </span>'),rs=d('<span class="item-aroma svelte-4wskud"> </span>'),ls=d('<button type="button" class="library-item svelte-4wskud"><div class="item-main svelte-4wskud"><span class="item-name svelte-4wskud"> </span> <!></div> <div class="item-details svelte-4wskud"><span class="item-aa svelte-4wskud"> </span> <!></div></button>'),is=d('<div class="purpose-group svelte-4wskud"><h5 class="purpose-name svelte-4wskud"> </h5> <!></div>'),os=d('<div class="no-results svelte-4wskud"><p class="svelte-4wskud">No hops match your filters</p></div>'),ns=d('<div class="filters svelte-4wskud"><input type="text" placeholder="Search hops..." class="search-input svelte-4wskud"/> <div class="filter-row svelte-4wskud"><select class="filter-select svelte-4wskud"><option>All Purposes</option><option>Bittering</option><option>Aroma</option><option>Dual Purpose</option></select> <select class="filter-select svelte-4wskud"><option>All Origins</option><!></select></div></div> <div class="library-list svelte-4wskud"><!> <!></div>',1),vs=d('<div class="browser-overlay svelte-4wskud"><div class="browser-modal svelte-4wskud"><div class="browser-header svelte-4wskud"><h4 class="svelte-4wskud">Add Hop</h4> <button type="button" class="close-btn svelte-4wskud">×</button></div> <!></div></div>'),cs=d('<div class="hop-selector svelte-4wskud"><div class="selector-header svelte-4wskud"><div class="header-left svelte-4wskud"><h3 class="svelte-4wskud">Hop Schedule</h3> <!></div> <button type="button" class="add-btn svelte-4wskud">+ Add Hop</button></div> <!> <!></div>');function us(_,o){wt(o,!0);let f=ht(o,"og",3,1.05),C=ht(o,"batchSizeLiters",3,20),g=h(Ze([])),B=h(Ze([])),U=h(!0),$=h(null),X=h(""),G=h(""),le=h(""),A=h(!1),p=Q(()=>()=>{if(o.hops.length===0)return 0;const r=o.hops.map(l=>({name:l.name,amount_grams:l.amount_grams,alpha_acid_percent:l.alpha_acid_percent,boil_time_minutes:l.boil_time_minutes,form:l.form,use:l.use}));return Wt(r,f(),C())}),D=Q(()=>()=>Jt(e(p)(),f())),ne=Q(()=>()=>{const r=e(D)();return r<.3?"Very Sweet":r<.5?"Malty":r<.7?"Balanced":r<.9?"Hoppy":"Very Bitter"});function y(r){const l={name:r.name,amount_grams:r.amount_grams,alpha_acid_percent:r.alpha_acid_percent,boil_time_minutes:r.boil_time_minutes,form:r.form,use:r.use};return Vt(l,f(),C())}let j=Q(()=>()=>e(g).filter(r=>{const l=!e(X)||r.name.toLowerCase().includes(e(X).toLowerCase())||r.origin?.toLowerCase().includes(e(X).toLowerCase())||r.aroma_profile?.toLowerCase().includes(e(X).toLowerCase()),i=!e(G)||r.origin===e(G),b=!e(le)||r.purpose===e(le);return l&&i&&b})),Ye=Q(()=>()=>{const r={};for(const i of e(j)()){const b=i.purpose||"Other";r[b]||(r[b]=[]),r[b].push(i)}const l=["dual","bittering","aroma"];return Object.fromEntries(Object.entries(r).sort(([i],[b])=>{const x=l.indexOf(i.toLowerCase()),Y=l.indexOf(b.toLowerCase());return x>=0&&Y>=0?x-Y:x>=0?-1:Y>=0?1:i.localeCompare(b)}))}),lt=Q(()=>()=>{const r={};for(const l of o.hops){const i=l.use||"boil";r[i]||(r[i]=[]),r[i].push(l)}return r.boil&&r.boil.sort((l,i)=>i.boil_time_minutes-l.boil_time_minutes),r});jt(async()=>{try{const[r,l]=await Promise.all([da(),_a()]);u(g,r,!0),u(B,l.origins||[],!0)}catch(r){u($,r instanceof Error?r.message:"Failed to load hops",!0),console.error("Failed to load hops:",r)}finally{u(U,!1)}});function it(r){const l=r.alpha_acid_low&&r.alpha_acid_high?(r.alpha_acid_low+r.alpha_acid_high)/2:r.alpha_acid_low||r.alpha_acid_high||10,i={...r,amount_grams:30,boil_time_minutes:60,use:"boil",form:"pellet",alpha_acid_percent:l};o.onUpdate([...o.hops,i]),u(A,!1)}function ot(r){const l=[...o.hops];l.splice(r,1),o.onUpdate(l)}function Re(r,l,i){const b=o.hops.map((x,Y)=>Y===r?{...x,[l]:i}:x);o.onUpdate(b)}function nt(r,l){return r!=null&&l!=null?`${r.toFixed(1)}-${l.toFixed(1)}%`:r!=null?`${r.toFixed(1)}%+`:l!=null?`≤${l.toFixed(1)}%`:"--"}function vt(r){return{boil:"Boil",whirlpool:"Whirlpool",dry_hop:"Dry Hop",first_wort:"First Wort",mash:"Mash"}[r]||r}function Ee(r){switch(r?.toLowerCase()){case"bittering":return"var(--warning)";case"aroma":return"var(--positive)";case"dual":return"var(--info)";default:return"var(--text-tertiary)"}}var Ae=cs(),Be=a(Ae),Ie=a(Be),Ve=s(a(Ie),2);{var We=r=>{var l=Ya(),i=a(l),b=s(i),x=a(b,!0);t(b),t(l),F((Y,ve,E)=>{m(i,`${Y??""} IBU · BU:GU ${ve??""} · `),m(x,E)},[()=>e(p)().toFixed(0),()=>e(D)().toFixed(2),()=>e(ne)()]),c(r,l)};w(Ve,r=>{o.hops.length>0&&r(We)})}t(Ie);var Je=s(Ie,2);Je.__click=()=>u(A,!0),t(Be);var $e=s(Be,2);{var Ke=r=>{var l=Va(),i=s(a(l),2);i.__click=()=>u(A,!0),t(l),c(r,l)},et=r=>{var l=$a();Ue(l,21,()=>Object.entries(e(lt)()),gt,(i,b)=>{var x=Q(()=>Pt(e(b),2));let Y=()=>e(x)[0],ve=()=>e(x)[1];var E=Za(),V=a(E),we=a(V,!0);t(V);var Pe=s(V,2);Ue(Pe,19,ve,(ce,q)=>ce.id+"-"+q,(ce,q)=>{const R=Q(()=>o.hops.indexOf(e(q))),W=Q(()=>y(e(q)));var J=Xa(),ue=a(J),ie=a(ue),se=a(ie),be=a(se,!0);t(se);var de=s(se,2);{var ge=L=>{var z=Wa(),S=a(z,!0);t(z),F(()=>m(S,e(q).origin)),c(L,z)};w(de,L=>{e(q).origin&&L(ge)})}t(ie);var qe=s(ie,2),k=a(qe);{var P=L=>{var z=Ja(),S=a(z);t(z),F(I=>m(S,`+${I??""} IBU`),[()=>e(W).toFixed(0)]),c(L,z)},oe=L=>{var z=Ka();c(L,z)};w(k,L=>{e(W)>0?L(P):L(oe,!1)})}t(qe),t(ue);var _e=s(ue,2),M=a(_e),K=a(M),N=s(a(K),2),O=a(N);Fe(O),O.__change=L=>Re(e(R),"amount_grams",parseFloat(L.currentTarget.value)||0),Xe(2),t(N),t(K);var T=s(K,2),ee=s(a(T),2);Fe(ee),ee.__change=L=>Re(e(R),"alpha_acid_percent",parseFloat(L.currentTarget.value)||0),t(T);var pe=s(T,2);{var Ce=L=>{var z=Qa(),S=s(a(z),2),I=a(S);Fe(I),I.__change=Le=>Re(e(R),"boil_time_minutes",parseInt(Le.currentTarget.value)||0),Xe(2),t(S),t(z),F(()=>ft(I,e(q).boil_time_minutes)),c(L,z)};w(pe,L=>{e(q).use==="boil"&&L(Ce)})}var ye=s(pe,2),Z=s(a(ye),2);Z.__change=L=>Re(e(R),"use",L.currentTarget.value);var te=a(Z);te.value=te.__value="boil";var Se=s(te);Se.value=Se.__value="first_wort";var ae=s(Se);ae.value=ae.__value="whirlpool";var re=s(ae);re.value=re.__value="dry_hop";var xe=s(re);xe.value=xe.__value="mash",t(Z);var he;Tt(Z),t(ye);var Me=s(ye,2),me=s(a(Me),2);me.__change=L=>Re(e(R),"form",L.currentTarget.value);var He=a(me);He.value=He.__value="pellet";var ke=s(He);ke.value=ke.__value="whole";var Oe=s(ke);Oe.value=Oe.__value="plug",t(me);var ze;Tt(me),t(Me),t(M);var Te=s(M,2);Te.__click=()=>ot(e(R)),t(_e),t(J),F(()=>{m(be,e(q).name),ft(O,e(q).amount_grams),ft(ee,e(q).alpha_acid_percent),he!==(he=e(q).use)&&(Z.value=(Z.__value=e(q).use)??"",Gt(Z,e(q).use)),ze!==(ze=e(q).form)&&(me.value=(me.__value=e(q).form)??"",Gt(me,e(q).form))}),c(ce,J)}),t(E),F(ce=>m(we,ce),[()=>vt(Y())]),c(i,E)}),t(l),c(r,l)};w($e,r=>{o.hops.length===0?r(Ke):r(et,!1)})}var ct=s($e,2);{var n=r=>{var l=vs();l.__click=()=>u(A,!1);var i=a(l);i.__click=V=>V.stopPropagation();var b=a(i),x=s(a(b),2);x.__click=()=>u(A,!1),t(b);var Y=s(b,2);{var ve=V=>{var we=es();c(V,we)},E=V=>{var we=bt(),Pe=Ne(we);{var ce=R=>{var W=ts(),J=a(W),ue=a(J,!0);t(J),t(W),F(()=>m(ue,e($))),c(R,W)},q=R=>{var W=ns(),J=Ne(W),ue=a(J);Fe(ue);var ie=s(ue,2),se=a(ie),be=a(se);be.value=be.__value="";var de=s(be);de.value=de.__value="bittering";var ge=s(de);ge.value=ge.__value="aroma";var qe=s(ge);qe.value=qe.__value="dual",t(se);var k=s(se,2),P=a(k);P.value=P.__value="";var oe=s(P);Ue(oe,17,()=>e(B),gt,(O,T)=>{var ee=as(),pe=a(ee,!0);t(ee);var Ce={};F(()=>{m(pe,e(T)),Ce!==(Ce=e(T))&&(ee.value=(ee.__value=e(T))??"")}),c(O,ee)}),t(k),t(ie),t(J);var _e=s(J,2),M=a(_e);Ue(M,17,()=>Object.entries(e(Ye)()),([O,T])=>O,(O,T)=>{var ee=Q(()=>Pt(e(T),2));let pe=()=>e(ee)[0],Ce=()=>e(ee)[1];var ye=is(),Z=a(ye),te=a(Z,!0);t(Z);var Se=s(Z,2);Ue(Se,17,Ce,ae=>ae.id,(ae,re)=>{var xe=ls();xe.__click=()=>it(e(re));var he=a(xe),Me=a(he),me=a(Me,!0);t(Me);var He=s(Me,2);{var ke=S=>{var I=ss(),Le=a(I,!0);t(I),F(()=>m(Le,e(re).origin)),c(S,I)};w(He,S=>{e(re).origin&&S(ke)})}t(he);var Oe=s(he,2),ze=a(Oe),Te=a(ze,!0);t(ze);var L=s(ze,2);{var z=S=>{var I=rs(),Le=a(I,!0);t(I),F(()=>m(Le,e(re).aroma_profile)),c(S,I)};w(L,S=>{e(re).aroma_profile&&S(z)})}t(Oe),t(xe),F(S=>{m(me,e(re).name),m(Te,S)},[()=>nt(e(re).alpha_acid_low,e(re).alpha_acid_high)]),c(ae,xe)}),t(ye),F(ae=>{dt(Z,`color: ${ae??""}`),m(te,pe())},[()=>Ee(pe())]),c(O,ye)});var K=s(M,2);{var N=O=>{var T=os();c(O,T)};w(K,O=>{Object.keys(e(Ye)()).length===0&&O(N)})}t(_e),De(ue,()=>e(X),O=>u(X,O)),xt(se,()=>e(le),O=>u(le,O)),xt(k,()=>e(G),O=>u(G,O)),c(R,W)};w(Pe,R=>{e($)?R(ce):R(q,!1)},!0)}c(V,we)};w(Y,V=>{e(U)?V(ve):V(E,!1)})}t(i),t(l),c(r,l)};w(ct,r=>{e(A)&&r(n)})}t(Ae),c(_,Ae),yt()}Ot(["click","change"]);var ds=d('<button type="button" class="btn-secondary svelte-1rtvxu4">Cancel</button>'),_s=d('<div class="review-loading svelte-1rtvxu4"><div class="spinner svelte-1rtvxu4"></div> <p class="svelte-1rtvxu4"> </p></div>'),ps=d('<div class="review-error svelte-1rtvxu4"><p> </p></div>'),ms=d('<span class="style-badge found svelte-1rtvxu4"> </span>'),fs=d('<span class="style-badge not-found svelte-1rtvxu4">Style not in BJCP database</span>'),bs=d('<div class="review-meta svelte-1rtvxu4"><!> <span class="model-badge svelte-1rtvxu4"> </span></div> <div class="review-content svelte-1rtvxu4"><!></div>',1),gs=d('<div class="modal-overlay svelte-1rtvxu4" role="presentation"><div class="modal-content svelte-1rtvxu4" role="dialog" aria-modal="true" aria-labelledby="review-modal-title" tabindex="-1"><div class="modal-header svelte-1rtvxu4"><h2 id="review-modal-title" class="svelte-1rtvxu4">AI Recipe Review</h2> <button class="modal-close svelte-1rtvxu4" aria-label="Close">&times;</button></div> <div class="modal-body svelte-1rtvxu4"><!></div></div></div>'),xs=d('<div class="recipe-builder svelte-1rtvxu4"><div class="stats-panel svelte-1rtvxu4"><div class="stat-group svelte-1rtvxu4"><div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">OG</span> <span class="stat-value svelte-1rtvxu4"> </span></div> <div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">FG</span> <span class="stat-value svelte-1rtvxu4"> </span></div> <div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">ABV</span> <span class="stat-value svelte-1rtvxu4"> </span></div></div> <div class="stat-group svelte-1rtvxu4"><div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">IBU</span> <span class="stat-value svelte-1rtvxu4"> </span></div> <div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">BU:GU</span> <span class="stat-value balance svelte-1rtvxu4"> </span> <span class="stat-sub svelte-1rtvxu4"> </span></div></div> <div class="stat-group svelte-1rtvxu4"><div class="stat color-stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">Color</span> <div class="color-display svelte-1rtvxu4"><span class="color-swatch svelte-1rtvxu4"></span> <span class="stat-value svelte-1rtvxu4"> </span></div> <span class="stat-sub svelte-1rtvxu4"> </span></div></div> <div class="stat-group svelte-1rtvxu4"><div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">Calories</span> <span class="stat-value svelte-1rtvxu4"> </span> <span class="stat-sub svelte-1rtvxu4">per 330ml</span></div></div></div> <div class="section metadata-section svelte-1rtvxu4"><h2 class="section-title svelte-1rtvxu4">Recipe Details</h2> <div class="form-grid svelte-1rtvxu4"><div class="form-field full-width svelte-1rtvxu4"><label for="recipe-name" class="svelte-1rtvxu4">Recipe Name *</label> <input id="recipe-name" type="text" placeholder="e.g., My Awesome IPA" class="form-input svelte-1rtvxu4"/></div> <div class="form-field svelte-1rtvxu4"><label for="author" class="svelte-1rtvxu4">Brewer</label> <input id="author" type="text" placeholder="Your name" class="form-input svelte-1rtvxu4"/></div> <div class="form-field svelte-1rtvxu4"><label for="style" class="svelte-1rtvxu4">Style</label> <input id="style" type="text" placeholder="e.g., American IPA" class="form-input svelte-1rtvxu4"/></div></div></div> <div class="section params-section svelte-1rtvxu4"><h2 class="section-title svelte-1rtvxu4">Batch Parameters</h2> <div class="params-grid svelte-1rtvxu4"><div class="param-field svelte-1rtvxu4"><label for="batch-size" class="svelte-1rtvxu4">Batch Size</label> <div class="input-with-unit svelte-1rtvxu4"><input id="batch-size" type="number" min="1" step="1" class="form-input svelte-1rtvxu4"/> <span class="unit svelte-1rtvxu4">L</span></div></div> <div class="param-field svelte-1rtvxu4"><label for="efficiency" class="svelte-1rtvxu4">Efficiency</label> <div class="input-with-unit svelte-1rtvxu4"><input id="efficiency" type="number" min="50" max="95" step="1" class="form-input svelte-1rtvxu4"/> <span class="unit svelte-1rtvxu4">%</span></div></div> <div class="param-field svelte-1rtvxu4"><label for="boil-time" class="svelte-1rtvxu4">Boil Time</label> <div class="input-with-unit svelte-1rtvxu4"><input id="boil-time" type="number" min="30" max="120" step="5" class="form-input svelte-1rtvxu4"/> <span class="unit svelte-1rtvxu4">min</span></div></div></div></div> <div class="section svelte-1rtvxu4"><!></div> <div class="section svelte-1rtvxu4"><!></div> <div class="section yeast-section svelte-1rtvxu4"><!></div> <div class="section notes-section svelte-1rtvxu4"><h2 class="section-title svelte-1rtvxu4">Notes</h2> <textarea placeholder="Brewing notes, tips, or variations..." rows="4" class="notes-input svelte-1rtvxu4"></textarea></div> <div class="actions svelte-1rtvxu4"><!> <button type="button" class="btn-ai svelte-1rtvxu4"><!></button> <button type="button" class="btn-primary svelte-1rtvxu4">Save Recipe</button></div></div> <!>',1);function hs(_,o){wt(o,!0);let f=h(""),C=h(""),g=h(""),B=h(""),U=h(20),$=h(72),X=h(60),G=h(Ze([])),le=h(Ze([])),A=h(null),p=h(!1),D=h(null),ne=h(!1),y=h(null),j=Q(()=>()=>{if(e(G).length===0)return{og:1,fg:1,abv:0,ibu:0,srm:0,color_hex:"#FFE699",calories_per_330ml:0};const v=e(G).map(fe=>({name:fe.name,amount_kg:fe.amount_kg,potential_sg:fe.potential_sg||1.036,color_srm:fe.color_srm||2})),H=e(le).map(fe=>({name:fe.name,amount_grams:fe.amount_grams,alpha_acid_percent:fe.alpha_acid_percent,boil_time_minutes:fe.boil_time_minutes,form:fe.form,use:fe.use})),Ge={name:e(A)?.name||"Default Yeast",attenuation_percent:e(A)?.attenuation_low&&e(A)?.attenuation_high?(e(A).attenuation_low+e(A).attenuation_high)/2:75,temp_min_c:e(A)?.temp_low||18,temp_max_c:e(A)?.temp_high||22},Qe={batch_size_liters:e(U),efficiency_percent:e($),boil_time_minutes:e(X)};return ya(v,H,Ge,Qe)}),Ye=Q(()=>()=>Jt(e(j)().ibu,e(j)().og)),lt=Q(()=>()=>{const v=e(Ye)();return v<.3?"Very Malty":v<.5?"Malty":v<.7?"Balanced":v<.9?"Hoppy":"Very Bitter"});function it(v){u(G,v,!0)}function ot(v){u(le,v,!0)}function Re(v){u(A,v,!0)}function nt(){if(!e(f).trim()){alert("Please enter a recipe name");return}const v={name:e(f),author:e(C),type:e(g),batch_size_liters:e(U),efficiency_percent:e($),boil_time_minutes:e(X),og:e(j)().og,fg:e(j)().fg,abv:e(j)().abv,ibu:e(j)().ibu,color_srm:e(j)().srm,fermentables:e(G),hops:e(le),yeast:e(A),notes:e(B)};o.onSave?.(v)}async function vt(){if(!e(g).trim()){u(y,"Please enter a beer style to get an AI review"),u(p,!0);return}if(e(G).length===0){u(y,"Please add at least one fermentable to get an AI review"),u(p,!0);return}u(ne,!0),u(y,null),u(p,!0);try{const v=e(j)();u(D,await pa({name:e(f)||"Untitled Recipe",style:e(g),og:v.og,fg:v.fg,abv:v.abv,ibu:v.ibu,color_srm:v.srm,fermentables:e(G).map(H=>({name:H.name,amount_kg:H.amount_kg,color_srm:H.color_srm,type:H.category})),hops:e(le).map(H=>({name:H.name,amount_grams:H.amount_grams,boil_time_minutes:H.boil_time_minutes,alpha_acid_percent:H.alpha_acid_percent,use:H.use})),yeast:e(A)?{name:e(A).name,producer:e(A).producer,attenuation:e(A).attenuation}:void 0}),!0)}catch(v){u(y,v instanceof Error?v.message:"Failed to get AI review",!0)}finally{u(ne,!1)}}function Ee(){u(p,!1),u(D,null),u(y,null)}var Ae=xs(),Be=Ne(Ae),Ie=a(Be),Ve=a(Ie),We=a(Ve),Je=s(a(We),2),$e=a(Je,!0);t(Je),t(We);var Ke=s(We,2),et=s(a(Ke),2),ct=a(et,!0);t(et),t(Ke);var n=s(Ke,2),r=s(a(n),2),l=a(r);t(r),t(n),t(Ve);var i=s(Ve,2),b=a(i),x=s(a(b),2),Y=a(x,!0);t(x),t(b);var ve=s(b,2),E=s(a(ve),2),V=a(E,!0);t(E);var we=s(E,2),Pe=a(we,!0);t(we),t(ve),t(i);var ce=s(i,2),q=a(ce),R=s(a(q),2),W=a(R),J=s(W,2),ue=a(J);t(J),t(R);var ie=s(R,2),se=a(ie,!0);t(ie),t(q),t(ce);var be=s(ce,2),de=a(be),ge=s(a(de),2),qe=a(ge,!0);t(ge),Xe(2),t(de),t(be),t(Ie);var k=s(Ie,2),P=s(a(k),2),oe=a(P),_e=s(a(oe),2);Fe(_e),t(oe);var M=s(oe,2),K=s(a(M),2);Fe(K),t(M);var N=s(M,2),O=s(a(N),2);Fe(O),t(N),t(P),t(k);var T=s(k,2),ee=s(a(T),2),pe=a(ee),Ce=s(a(pe),2),ye=a(Ce);Fe(ye),Xe(2),t(Ce),t(pe);var Z=s(pe,2),te=s(a(Z),2),Se=a(te);Fe(Se),Xe(2),t(te),t(Z);var ae=s(Z,2),re=s(a(ae),2),xe=a(re);Fe(xe),Xe(2),t(re),t(ae),t(ee),t(T);var he=s(T,2),Me=a(he);Na(Me,{get fermentables(){return e(G)},get batchSizeLiters(){return e(U)},get efficiencyPercent(){return e($)},onUpdate:it}),t(he);var me=s(he,2),He=a(me);{let v=Q(()=>e(j)().og);us(He,{get hops(){return e(le)},get og(){return e(v)},get batchSizeLiters(){return e(U)},onUpdate:ot})}t(me);var ke=s(me,2),Oe=a(ke);{let v=Q(()=>e(A)?.id);ga(Oe,{get selectedYeastId(){return e(v)},onSelect:Re,label:"Select Yeast Strain"})}t(ke);var ze=s(ke,2),Te=s(a(ze),2);la(Te),t(ze);var L=s(ze,2),z=a(L);{var S=v=>{var H=ds();H.__click=function(...Ge){o.onCancel?.apply(this,Ge)},c(v,H)};w(z,v=>{o.onCancel&&v(S)})}var I=s(z,2);I.__click=vt;var Le=a(I);{var kt=v=>{var H=Dt("Analyzing...");c(v,H)},zt=v=>{var H=Dt("AI Review");c(v,H)};w(Le,v=>{e(ne)?v(kt):v(zt,!1)})}t(I);var Qt=s(I,2);Qt.__click=nt,t(L),t(Be);var Xt=s(Be,2);{var Zt=v=>{var H=gs();H.__click=Ee;var Ge=a(H),Qe=a(Ge),fe=s(a(Qe),2);fe.__click=Ee,t(Qe);var _t=s(Qe,2),Ft=a(_t);{var Bt=je=>{var tt=_s(),pt=s(a(tt),2),Ct=a(pt);t(pt),t(tt),F(()=>m(Ct,`Analyzing your recipe against ${(e(g)||"style guidelines")??""}...`)),c(je,tt)},qt=je=>{var tt=bt(),pt=Ne(tt);{var Ct=at=>{var st=ps(),mt=a(st),St=a(mt,!0);t(mt),t(st),F(()=>m(St,e(y))),c(at,st)},$t=at=>{var st=bt(),mt=Ne(st);{var St=Lt=>{var Ut=bs(),At=Ne(Ut),Rt=a(At);{var ea=rt=>{var ut=ms(),ra=a(ut);t(ut),F(()=>m(ra,`BJCP Style: ${e(D).style_name??""}`)),c(rt,ut)},ta=rt=>{var ut=fs();c(rt,ut)};w(Rt,rt=>{e(D).style_found?rt(ea):rt(ta,!1)})}var It=s(Rt,2),aa=a(It);t(It),t(At);var Ht=s(At,2),sa=a(Ht);fa(sa,()=>e(D).review.replace(/\n/g,"<br>")),t(Ht),F(()=>m(aa,`Model: ${e(D).model??""}`)),c(Lt,Ut)};w(mt,Lt=>{e(D)&&Lt(St)},!0)}c(at,st)};w(pt,at=>{e(y)?at(Ct):at($t,!1)},!0)}c(je,tt)};w(Ft,je=>{e(ne)?je(Bt):je(qt,!1)})}t(_t),t(Ge),t(H),c(v,H)};w(Xt,v=>{e(p)&&v(Zt)})}F((v,H,Ge,Qe,fe,_t,Ft,Bt,qt,je)=>{m($e,v),m(ct,H),m(l,`${Ge??""}%`),m(Y,Qe),m(V,fe),m(Pe,_t),dt(W,`background-color: ${Ft??""}`),m(ue,`${Bt??""} SRM`),m(se,qt),m(qe,je),I.disabled=e(ne)},[()=>e(j)().og.toFixed(3),()=>e(j)().fg.toFixed(3),()=>e(j)().abv.toFixed(1),()=>e(j)().ibu.toFixed(0),()=>e(Ye)().toFixed(2),()=>e(lt)(),()=>e(j)().color_hex,()=>e(j)().srm.toFixed(0),()=>ha(e(j)().srm),()=>e(j)().calories_per_330ml]),De(_e,()=>e(f),v=>u(f,v)),De(K,()=>e(C),v=>u(C,v)),De(O,()=>e(g),v=>u(g,v)),De(ye,()=>e(U),v=>u(U,v)),De(Se,()=>e($),v=>u($,v)),De(xe,()=>e(X),v=>u(X,v)),De(Te,()=>e(B),v=>u(B,v)),c(_,Ae),yt()}Ot(["click"]);var ws=d('<div class="error-banner svelte-1pes5m5"><svg class="error-icon svelte-1pes5m5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),ys=d('<div class="saving-overlay svelte-1pes5m5"><div class="spinner svelte-1pes5m5"></div> <span>Saving recipe...</span></div>'),ks=d('<div class="page-container svelte-1pes5m5"><div class="back-link svelte-1pes5m5"><a href="/recipes" class="back-btn svelte-1pes5m5"><svg class="back-icon svelte-1pes5m5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <div class="page-header svelte-1pes5m5"><h1 class="page-title svelte-1pes5m5">Create New Recipe</h1> <p class="page-description svelte-1pes5m5">Build your recipe with real-time calculations, or <a href="/recipes/import" class="import-link svelte-1pes5m5">import from BeerXML/BeerJSON</a></p></div> <!> <!> <!></div>');function Ds(_,o){wt(o,!0);let f=h(!1),C=h(null);async function g(p){u(f,!0),u(C,null);try{const D={name:p.name,author:p.author||void 0,type:p.type||void 0,batch_size_liters:p.batch_size_liters,efficiency_percent:p.efficiency_percent,boil_time_minutes:p.boil_time_minutes,og:p.og,fg:p.fg,abv:p.abv,ibu:p.ibu,color_srm:p.color_srm,notes:p.notes||void 0,yeast_name:p.yeast?.name,yeast_lab:p.yeast?.producer,yeast_product_id:p.yeast?.product_id,yeast_temp_min:p.yeast?.temp_low??void 0,yeast_temp_max:p.yeast?.temp_high??void 0,yeast_attenuation:p.yeast?.attenuation_low&&p.yeast?.attenuation_high?(p.yeast.attenuation_low+p.yeast.attenuation_high)/2:void 0,format_extensions:{fermentables:p.fermentables.map(y=>({id:y.id,name:y.name,amount_kg:y.amount_kg,color_lovibond:y.color_lovibond,potential_sg:y.potential_sg,type:y.type,origin:y.origin,maltster:y.maltster})),hops:p.hops.map(y=>({id:y.id,name:y.name,amount_grams:y.amount_grams,alpha_acid_percent:y.alpha_acid_percent,boil_time_minutes:y.boil_time_minutes,use:y.use,form:y.form,origin:y.origin,purpose:y.purpose}))}},ne=await ma(D);Et(`/recipes/${ne.id}`)}catch(D){u(C,D instanceof Error?D.message:"Failed to create recipe",!0),u(f,!1)}}function B(){Et("/recipes")}var U=ks();na("1pes5m5",p=>{ia(()=>{oa.title="New Recipe | BrewSignal"})});var $=s(a(U),4);{var X=p=>{var D=ws(),ne=s(a(D),2),y=a(ne,!0);t(ne),t(D),F(()=>m(y,e(C))),c(p,D)};w($,p=>{e(C)&&p(X)})}var G=s($,2);{var le=p=>{var D=ys();c(p,D)};w(G,p=>{e(f)&&p(le)})}var A=s(G,2);hs(A,{onSave:g,onCancel:B}),t(U),c(_,U),yt()}export{Ds as component};
