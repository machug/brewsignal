import{d as jt,f as y,a as k,s as R,c as Et,e as Bs,h as _r,t as gr}from"../chunks/CCsyRfs1.js";import{a as Zt,s as A,p as ut,o as Ds,c as m,e as p,g as Nt,d as c,r as o,h as a,t as C,u as ne,n as rt,f as ct,ax as rs,i as mr,ay as br,z as kr,aw as xr}from"../chunks/DyQh1CUw.js";import{i as B}from"../chunks/HQeVE6fZ.js";import{h as wr}from"../chunks/BZNRDT2A.js";import{b as yr}from"../chunks/BlPaiSLK.js";import{g as Cs}from"../chunks/Chw80Gge.js";import{z as Sr,A as zr,a4 as Rr,h as $r,y as Tr,a5 as Ar,a6 as Br,a7 as Cr}from"../chunks/DciRO_hW.js";import{e as je,i as mt}from"../chunks/DndLTv14.js";import{h as Fr}from"../chunks/DRjuPuC8.js";import{r as Ge,b as Ct}from"../chunks/DPJa9AuX.js";import{s as Hs}from"../chunks/C1-3ELYM.js";import{s as Ft}from"../chunks/COCsBJqH.js";import{b as ot}from"../chunks/B_acRpXz.js";import{b as Ot,i as Fs,s as Ls}from"../chunks/U9y4h8n3.js";import{p as Dt}from"../chunks/B-ZSmncO.js";import{Y as Lr}from"../chunks/B8Ai3Rw5.js";function os(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var vt=os();function Us(r){vt=r}var Lt={exec:()=>null};function I(r,e=""){let s=typeof r=="string"?r:r.source,n={replace:(t,i)=>{let l=typeof i=="string"?i:i.source;return l=l.replace($e.caret,"$1"),s=s.replace(t,l),n},getRegex:()=>new RegExp(s,e)};return n}var qr=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),$e={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},Pr=/^(?:[ \t]*(?:\n|$))+/,Ir=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Mr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,qt=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Er=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,cs=/(?:[*+-]|\d{1,9}[.)])/,Gs=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,js=I(Gs).replace(/bull/g,cs).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Or=I(Gs).replace(/bull/g,cs).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),us=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Dr=/^[^\n]+/,ps=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Hr=I(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",ps).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ur=I(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,cs).getRegex(),Qt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",vs=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Gr=I("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",vs).replace("tag",Qt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Zs=I(us).replace("hr",qt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qt).getRegex(),jr=I(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Zs).getRegex(),ds={blockquote:jr,code:Ir,def:Hr,fences:Mr,heading:Er,hr:qt,html:Gr,lheading:js,list:Ur,newline:Pr,paragraph:Zs,table:Lt,text:Dr},qs=I("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",qt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qt).getRegex(),Zr={...ds,lheading:Or,table:qs,paragraph:I(us).replace("hr",qt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",qs).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qt).getRegex()},Nr={...ds,html:I(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",vs).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Lt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:I(us).replace("hr",qt).replace("heading",` *#{1,6} *[^
]`).replace("lheading",js).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Qr=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Wr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ns=/^( {2,}|\\)\n(?!\s*$)/,Vr=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Wt=/[\p{P}\p{S}]/u,hs=/[\s\p{P}\p{S}]/u,Qs=/[^\s\p{P}\p{S}]/u,Yr=I(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,hs).getRegex(),Ws=/(?!~)[\p{P}\p{S}]/u,Xr=/(?!~)[\s\p{P}\p{S}]/u,Jr=/(?:[^\s\p{P}\p{S}]|~)/u,Kr=I(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",qr?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Vs=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,ea=I(Vs,"u").replace(/punct/g,Wt).getRegex(),ta=I(Vs,"u").replace(/punct/g,Ws).getRegex(),Ys="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",sa=I(Ys,"gu").replace(/notPunctSpace/g,Qs).replace(/punctSpace/g,hs).replace(/punct/g,Wt).getRegex(),ra=I(Ys,"gu").replace(/notPunctSpace/g,Jr).replace(/punctSpace/g,Xr).replace(/punct/g,Ws).getRegex(),aa=I("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Qs).replace(/punctSpace/g,hs).replace(/punct/g,Wt).getRegex(),na=I(/\\(punct)/,"gu").replace(/punct/g,Wt).getRegex(),la=I(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ia=I(vs).replace("(?:-->|$)","-->").getRegex(),oa=I("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ia).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ht=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,ca=I(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ht).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Xs=I(/^!?\[(label)\]\[(ref)\]/).replace("label",Ht).replace("ref",ps).getRegex(),Js=I(/^!?\[(ref)\](?:\[\])?/).replace("ref",ps).getRegex(),ua=I("reflink|nolink(?!\\()","g").replace("reflink",Xs).replace("nolink",Js).getRegex(),Ps=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,fs={_backpedal:Lt,anyPunctuation:na,autolink:la,blockSkip:Kr,br:Ns,code:Wr,del:Lt,emStrongLDelim:ea,emStrongRDelimAst:sa,emStrongRDelimUnd:aa,escape:Qr,link:ca,nolink:Js,punctuation:Yr,reflink:Xs,reflinkSearch:ua,tag:oa,text:Vr,url:Lt},pa={...fs,link:I(/^!?\[(label)\]\((.*?)\)/).replace("label",Ht).getRegex(),reflink:I(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ht).getRegex()},as={...fs,emStrongRDelimAst:ra,emStrongLDelim:ta,url:I(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Ps).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:I(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Ps).getRegex()},va={...as,br:I(Ns).replace("{2,}","*").getRegex(),text:I(as.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Mt={normal:ds,gfm:Zr,pedantic:Nr},Tt={normal:fs,gfm:as,breaks:va,pedantic:pa},da={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Is=r=>da[r];function nt(r,e){if(e){if($e.escapeTest.test(r))return r.replace($e.escapeReplace,Is)}else if($e.escapeTestNoEncode.test(r))return r.replace($e.escapeReplaceNoEncode,Is);return r}function Ms(r){try{r=encodeURI(r).replace($e.percentDecode,"%")}catch{return null}return r}function Es(r,e){let s=r.replace($e.findPipe,(i,l,d)=>{let u=!1,b=l;for(;--b>=0&&d[b]==="\\";)u=!u;return u?"|":" |"}),n=s.split($e.splitPipe),t=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;t<n.length;t++)n[t]=n[t].trim().replace($e.slashPipe,"|");return n}function At(r,e,s){let n=r.length;if(n===0)return"";let t=0;for(;t<n&&r.charAt(n-t-1)===e;)t++;return r.slice(0,n-t)}function ha(r,e){if(r.indexOf(e[1])===-1)return-1;let s=0;for(let n=0;n<r.length;n++)if(r[n]==="\\")n++;else if(r[n]===e[0])s++;else if(r[n]===e[1]&&(s--,s<0))return n;return s>0?-2:-1}function Os(r,e,s,n,t){let i=e.href,l=e.title||null,d=r[1].replace(t.other.outputLinkReplace,"$1");n.state.inLink=!0;let u={type:r[0].charAt(0)==="!"?"image":"link",raw:s,href:i,title:l,text:d,tokens:n.inlineTokens(d)};return n.state.inLink=!1,u}function fa(r,e,s){let n=r.match(s.other.indentCodeCompensation);if(n===null)return e;let t=n[1];return e.split(`
`).map(i=>{let l=i.match(s.other.beginningSpace);if(l===null)return i;let[d]=l;return d.length>=t.length?i.slice(t.length):i}).join(`
`)}var Ut=class{options;rules;lexer;constructor(r){this.options=r||vt}space(r){let e=this.rules.block.newline.exec(r);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(r){let e=this.rules.block.code.exec(r);if(e){let s=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:At(s,`
`)}}}fences(r){let e=this.rules.block.fences.exec(r);if(e){let s=e[0],n=fa(s,e[3]||"",this.rules);return{type:"code",raw:s,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(r){let e=this.rules.block.heading.exec(r);if(e){let s=e[2].trim();if(this.rules.other.endingHash.test(s)){let n=At(s,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(s=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(r){let e=this.rules.block.hr.exec(r);if(e)return{type:"hr",raw:At(e[0],`
`)}}blockquote(r){let e=this.rules.block.blockquote.exec(r);if(e){let s=At(e[0],`
`).split(`
`),n="",t="",i=[];for(;s.length>0;){let l=!1,d=[],u;for(u=0;u<s.length;u++)if(this.rules.other.blockquoteStart.test(s[u]))d.push(s[u]),l=!0;else if(!l)d.push(s[u]);else break;s=s.slice(u);let b=d.join(`
`),f=b.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${b}`:b,t=t?`${t}
${f}`:f;let S=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=S,s.length===0)break;let z=i.at(-1);if(z?.type==="code")break;if(z?.type==="blockquote"){let L=z,q=L.raw+`
`+s.join(`
`),Y=this.blockquote(q);i[i.length-1]=Y,n=n.substring(0,n.length-L.raw.length)+Y.raw,t=t.substring(0,t.length-L.text.length)+Y.text;break}else if(z?.type==="list"){let L=z,q=L.raw+`
`+s.join(`
`),Y=this.list(q);i[i.length-1]=Y,n=n.substring(0,n.length-z.raw.length)+Y.raw,t=t.substring(0,t.length-L.raw.length)+Y.raw,s=q.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:t}}}list(r){let e=this.rules.block.list.exec(r);if(e){let s=e[1].trim(),n=s.length>1,t={type:"list",raw:"",ordered:n,start:n?+s.slice(0,-1):"",loose:!1,items:[]};s=n?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=n?s:"[*+-]");let i=this.rules.other.listItemRegex(s),l=!1;for(;r;){let u=!1,b="",f="";if(!(e=i.exec(r))||this.rules.block.hr.test(r))break;b=e[0],r=r.substring(b.length);let S=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,Y=>" ".repeat(3*Y.length)),z=r.split(`
`,1)[0],L=!S.trim(),q=0;if(this.options.pedantic?(q=2,f=S.trimStart()):L?q=e[1].length+1:(q=e[2].search(this.rules.other.nonSpaceChar),q=q>4?1:q,f=S.slice(q),q+=e[1].length),L&&this.rules.other.blankLine.test(z)&&(b+=z+`
`,r=r.substring(z.length+1),u=!0),!u){let Y=this.rules.other.nextBulletRegex(q),de=this.rules.other.hrRegex(q),Te=this.rules.other.fencesBeginRegex(q),be=this.rules.other.headingBeginRegex(q),Pe=this.rules.other.htmlBeginRegex(q);for(;r;){let W=r.split(`
`,1)[0],le;if(z=W,this.options.pedantic?(z=z.replace(this.rules.other.listReplaceNesting,"  "),le=z):le=z.replace(this.rules.other.tabCharGlobal,"    "),Te.test(z)||be.test(z)||Pe.test(z)||Y.test(z)||de.test(z))break;if(le.search(this.rules.other.nonSpaceChar)>=q||!z.trim())f+=`
`+le.slice(q);else{if(L||S.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||Te.test(S)||be.test(S)||de.test(S))break;f+=`
`+z}!L&&!z.trim()&&(L=!0),b+=W+`
`,r=r.substring(W.length+1),S=le.slice(q)}}t.loose||(l?t.loose=!0:this.rules.other.doubleBlankLine.test(b)&&(l=!0)),t.items.push({type:"list_item",raw:b,task:!!this.options.gfm&&this.rules.other.listIsTask.test(f),loose:!1,text:f,tokens:[]}),t.raw+=b}let d=t.items.at(-1);if(d)d.raw=d.raw.trimEnd(),d.text=d.text.trimEnd();else return;t.raw=t.raw.trimEnd();for(let u of t.items){if(this.lexer.state.top=!1,u.tokens=this.lexer.blockTokens(u.text,[]),u.task){if(u.text=u.text.replace(this.rules.other.listReplaceTask,""),u.tokens[0]?.type==="text"||u.tokens[0]?.type==="paragraph"){u.tokens[0].raw=u.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),u.tokens[0].text=u.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let f=this.lexer.inlineQueue.length-1;f>=0;f--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[f].src)){this.lexer.inlineQueue[f].src=this.lexer.inlineQueue[f].src.replace(this.rules.other.listReplaceTask,"");break}}let b=this.rules.other.listTaskCheckbox.exec(u.raw);if(b){let f={type:"checkbox",raw:b[0]+" ",checked:b[0]!=="[ ]"};u.checked=f.checked,t.loose?u.tokens[0]&&["paragraph","text"].includes(u.tokens[0].type)&&"tokens"in u.tokens[0]&&u.tokens[0].tokens?(u.tokens[0].raw=f.raw+u.tokens[0].raw,u.tokens[0].text=f.raw+u.tokens[0].text,u.tokens[0].tokens.unshift(f)):u.tokens.unshift({type:"paragraph",raw:f.raw,text:f.raw,tokens:[f]}):u.tokens.unshift(f)}}if(!t.loose){let b=u.tokens.filter(S=>S.type==="space"),f=b.length>0&&b.some(S=>this.rules.other.anyLine.test(S.raw));t.loose=f}}if(t.loose)for(let u of t.items){u.loose=!0;for(let b of u.tokens)b.type==="text"&&(b.type="paragraph")}return t}}html(r){let e=this.rules.block.html.exec(r);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(r){let e=this.rules.block.def.exec(r);if(e){let s=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",t=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:s,raw:e[0],href:n,title:t}}}table(r){let e=this.rules.block.table.exec(r);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let s=Es(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),t=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(s.length===n.length){for(let l of n)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<s.length;l++)i.header.push({text:s[l],tokens:this.lexer.inline(s[l]),header:!0,align:i.align[l]});for(let l of t)i.rows.push(Es(l,i.header.length).map((d,u)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:i.align[u]})));return i}}lheading(r){let e=this.rules.block.lheading.exec(r);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(r){let e=this.rules.block.paragraph.exec(r);if(e){let s=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:s,tokens:this.lexer.inline(s)}}}text(r){let e=this.rules.block.text.exec(r);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(r){let e=this.rules.inline.escape.exec(r);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(r){let e=this.rules.inline.tag.exec(r);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(r){let e=this.rules.inline.link.exec(r);if(e){let s=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;let i=At(s.slice(0,-1),"\\");if((s.length-i.length)%2===0)return}else{let i=ha(e[2],"()");if(i===-2)return;if(i>-1){let l=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let n=e[2],t="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(n);i&&(n=i[1],t=i[3])}else t=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?n=n.slice(1):n=n.slice(1,-1)),Os(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:t&&t.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(r,e){let s;if((s=this.rules.inline.reflink.exec(r))||(s=this.rules.inline.nolink.exec(r))){let n=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),t=e[n.toLowerCase()];if(!t){let i=s[0].charAt(0);return{type:"text",raw:i,text:i}}return Os(s,t,s[0],this.lexer,this.rules)}}emStrong(r,e,s=""){let n=this.rules.inline.emStrongLDelim.exec(r);if(!(!n||n[3]&&s.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!s||this.rules.inline.punctuation.exec(s))){let t=[...n[0]].length-1,i,l,d=t,u=0,b=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(b.lastIndex=0,e=e.slice(-1*r.length+t);(n=b.exec(e))!=null;){if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!i)continue;if(l=[...i].length,n[3]||n[4]){d+=l;continue}else if((n[5]||n[6])&&t%3&&!((t+l)%3)){u+=l;continue}if(d-=l,d>0)continue;l=Math.min(l,l+d+u);let f=[...n[0]][0].length,S=r.slice(0,t+n.index+f+l);if(Math.min(t,l)%2){let L=S.slice(1,-1);return{type:"em",raw:S,text:L,tokens:this.lexer.inlineTokens(L)}}let z=S.slice(2,-2);return{type:"strong",raw:S,text:z,tokens:this.lexer.inlineTokens(z)}}}}codespan(r){let e=this.rules.inline.code.exec(r);if(e){let s=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(s),t=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return n&&t&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:e[0],text:s}}}br(r){let e=this.rules.inline.br.exec(r);if(e)return{type:"br",raw:e[0]}}del(r){let e=this.rules.inline.del.exec(r);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(r){let e=this.rules.inline.autolink.exec(r);if(e){let s,n;return e[2]==="@"?(s=e[1],n="mailto:"+s):(s=e[1],n=s),{type:"link",raw:e[0],text:s,href:n,tokens:[{type:"text",raw:s,text:s}]}}}url(r){let e;if(e=this.rules.inline.url.exec(r)){let s,n;if(e[2]==="@")s=e[0],n="mailto:"+s;else{let t;do t=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(t!==e[0]);s=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:s,href:n,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(r){let e=this.rules.inline.text.exec(r);if(e){let s=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:s}}}},Ye=class ns{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||vt,this.options.tokenizer=this.options.tokenizer||new Ut,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let s={other:$e,block:Mt.normal,inline:Tt.normal};this.options.pedantic?(s.block=Mt.pedantic,s.inline=Tt.pedantic):this.options.gfm&&(s.block=Mt.gfm,this.options.breaks?s.inline=Tt.breaks:s.inline=Tt.gfm),this.tokenizer.rules=s}static get rules(){return{block:Mt,inline:Tt}}static lex(e,s){return new ns(s).lex(e)}static lexInline(e,s){return new ns(s).inlineTokens(e)}lex(e){e=e.replace($e.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){let n=this.inlineQueue[s];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,s=[],n=!1){for(this.options.pedantic&&(e=e.replace($e.tabCharGlobal,"    ").replace($e.spaceLine,""));e;){let t;if(this.options.extensions?.block?.some(l=>(t=l.call({lexer:this},e,s))?(e=e.substring(t.raw.length),s.push(t),!0):!1))continue;if(t=this.tokenizer.space(e)){e=e.substring(t.raw.length);let l=s.at(-1);t.raw.length===1&&l!==void 0?l.raw+=`
`:s.push(t);continue}if(t=this.tokenizer.code(e)){e=e.substring(t.raw.length);let l=s.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+t.raw,l.text+=`
`+t.text,this.inlineQueue.at(-1).src=l.text):s.push(t);continue}if(t=this.tokenizer.fences(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.heading(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.hr(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.blockquote(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.list(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.html(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.def(e)){e=e.substring(t.raw.length);let l=s.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+t.raw,l.text+=`
`+t.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title},s.push(t));continue}if(t=this.tokenizer.table(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.lheading(e)){e=e.substring(t.raw.length),s.push(t);continue}let i=e;if(this.options.extensions?.startBlock){let l=1/0,d=e.slice(1),u;this.options.extensions.startBlock.forEach(b=>{u=b.call({lexer:this},d),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(i=e.substring(0,l+1))}if(this.state.top&&(t=this.tokenizer.paragraph(i))){let l=s.at(-1);n&&l?.type==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+t.raw,l.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):s.push(t),n=i.length!==e.length,e=e.substring(t.raw.length);continue}if(t=this.tokenizer.text(e)){e=e.substring(t.raw.length);let l=s.at(-1);l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+t.raw,l.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):s.push(t);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,s}inline(e,s=[]){return this.inlineQueue.push({src:e,tokens:s}),s}inlineTokens(e,s=[]){let n=e,t=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(t=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)u.includes(t[0].slice(t[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,t.index)+"["+"a".repeat(t[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(t=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,t.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(t=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)i=t[2]?t[2].length:0,n=n.slice(0,t.index+i)+"["+"a".repeat(t[0].length-i-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let l=!1,d="";for(;e;){l||(d=""),l=!1;let u;if(this.options.extensions?.inline?.some(f=>(u=f.call({lexer:this},e,s))?(e=e.substring(u.raw.length),s.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);let f=s.at(-1);u.type==="text"&&f?.type==="text"?(f.raw+=u.raw,f.text+=u.text):s.push(u);continue}if(u=this.tokenizer.emStrong(e,n,d)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),s.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),s.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),s.push(u);continue}let b=e;if(this.options.extensions?.startInline){let f=1/0,S=e.slice(1),z;this.options.extensions.startInline.forEach(L=>{z=L.call({lexer:this},S),typeof z=="number"&&z>=0&&(f=Math.min(f,z))}),f<1/0&&f>=0&&(b=e.substring(0,f+1))}if(u=this.tokenizer.inlineText(b)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(d=u.raw.slice(-1)),l=!0;let f=s.at(-1);f?.type==="text"?(f.raw+=u.raw,f.text+=u.text):s.push(u);continue}if(e){let f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return s}},Gt=class{options;parser;constructor(r){this.options=r||vt}space(r){return""}code({text:r,lang:e,escaped:s}){let n=(e||"").match($e.notSpaceStart)?.[0],t=r.replace($e.endingNewline,"")+`
`;return n?'<pre><code class="language-'+nt(n)+'">'+(s?t:nt(t,!0))+`</code></pre>
`:"<pre><code>"+(s?t:nt(t,!0))+`</code></pre>
`}blockquote({tokens:r}){return`<blockquote>
${this.parser.parse(r)}</blockquote>
`}html({text:r}){return r}def(r){return""}heading({tokens:r,depth:e}){return`<h${e}>${this.parser.parseInline(r)}</h${e}>
`}hr(r){return`<hr>
`}list(r){let e=r.ordered,s=r.start,n="";for(let l=0;l<r.items.length;l++){let d=r.items[l];n+=this.listitem(d)}let t=e?"ol":"ul",i=e&&s!==1?' start="'+s+'"':"";return"<"+t+i+`>
`+n+"</"+t+`>
`}listitem(r){return`<li>${this.parser.parse(r.tokens)}</li>
`}checkbox({checked:r}){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>
`}table(r){let e="",s="";for(let t=0;t<r.header.length;t++)s+=this.tablecell(r.header[t]);e+=this.tablerow({text:s});let n="";for(let t=0;t<r.rows.length;t++){let i=r.rows[t];s="";for(let l=0;l<i.length;l++)s+=this.tablecell(i[l]);n+=this.tablerow({text:s})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:r}){return`<tr>
${r}</tr>
`}tablecell(r){let e=this.parser.parseInline(r.tokens),s=r.header?"th":"td";return(r.align?`<${s} align="${r.align}">`:`<${s}>`)+e+`</${s}>
`}strong({tokens:r}){return`<strong>${this.parser.parseInline(r)}</strong>`}em({tokens:r}){return`<em>${this.parser.parseInline(r)}</em>`}codespan({text:r}){return`<code>${nt(r,!0)}</code>`}br(r){return"<br>"}del({tokens:r}){return`<del>${this.parser.parseInline(r)}</del>`}link({href:r,title:e,tokens:s}){let n=this.parser.parseInline(s),t=Ms(r);if(t===null)return n;r=t;let i='<a href="'+r+'"';return e&&(i+=' title="'+nt(e)+'"'),i+=">"+n+"</a>",i}image({href:r,title:e,text:s,tokens:n}){n&&(s=this.parser.parseInline(n,this.parser.textRenderer));let t=Ms(r);if(t===null)return nt(s);r=t;let i=`<img src="${r}" alt="${s}"`;return e&&(i+=` title="${nt(e)}"`),i+=">",i}text(r){return"tokens"in r&&r.tokens?this.parser.parseInline(r.tokens):"escaped"in r&&r.escaped?r.text:nt(r.text)}},_s=class{strong({text:r}){return r}em({text:r}){return r}codespan({text:r}){return r}del({text:r}){return r}html({text:r}){return r}text({text:r}){return r}link({text:r}){return""+r}image({text:r}){return""+r}br(){return""}checkbox({raw:r}){return r}},Xe=class ls{options;renderer;textRenderer;constructor(e){this.options=e||vt,this.options.renderer=this.options.renderer||new Gt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new _s}static parse(e,s){return new ls(s).parse(e)}static parseInline(e,s){return new ls(s).parseInline(e)}parse(e){let s="";for(let n=0;n<e.length;n++){let t=e[n];if(this.options.extensions?.renderers?.[t.type]){let l=t,d=this.options.extensions.renderers[l.type].call({parser:this},l);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){s+=d||"";continue}}let i=t;switch(i.type){case"space":{s+=this.renderer.space(i);break}case"hr":{s+=this.renderer.hr(i);break}case"heading":{s+=this.renderer.heading(i);break}case"code":{s+=this.renderer.code(i);break}case"table":{s+=this.renderer.table(i);break}case"blockquote":{s+=this.renderer.blockquote(i);break}case"list":{s+=this.renderer.list(i);break}case"checkbox":{s+=this.renderer.checkbox(i);break}case"html":{s+=this.renderer.html(i);break}case"def":{s+=this.renderer.def(i);break}case"paragraph":{s+=this.renderer.paragraph(i);break}case"text":{s+=this.renderer.text(i);break}default:{let l='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}parseInline(e,s=this.renderer){let n="";for(let t=0;t<e.length;t++){let i=e[t];if(this.options.extensions?.renderers?.[i.type]){let d=this.options.extensions.renderers[i.type].call({parser:this},i);if(d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=d||"";continue}}let l=i;switch(l.type){case"escape":{n+=s.text(l);break}case"html":{n+=s.html(l);break}case"link":{n+=s.link(l);break}case"image":{n+=s.image(l);break}case"checkbox":{n+=s.checkbox(l);break}case"strong":{n+=s.strong(l);break}case"em":{n+=s.em(l);break}case"codespan":{n+=s.codespan(l);break}case"br":{n+=s.br(l);break}case"del":{n+=s.del(l);break}case"text":{n+=s.text(l);break}default:{let d='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return n}},Bt=class{options;block;constructor(r){this.options=r||vt}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}emStrongMask(r){return r}provideLexer(){return this.block?Ye.lex:Ye.lexInline}provideParser(){return this.block?Xe.parse:Xe.parseInline}},_a=class{defaults=os();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Xe;Renderer=Gt;TextRenderer=_s;Lexer=Ye;Tokenizer=Ut;Hooks=Bt;constructor(...r){this.use(...r)}walkTokens(r,e){let s=[];for(let n of r)switch(s=s.concat(e.call(this,n)),n.type){case"table":{let t=n;for(let i of t.header)s=s.concat(this.walkTokens(i.tokens,e));for(let i of t.rows)for(let l of i)s=s.concat(this.walkTokens(l.tokens,e));break}case"list":{let t=n;s=s.concat(this.walkTokens(t.items,e));break}default:{let t=n;this.defaults.extensions?.childTokens?.[t.type]?this.defaults.extensions.childTokens[t.type].forEach(i=>{let l=t[i].flat(1/0);s=s.concat(this.walkTokens(l,e))}):t.tokens&&(s=s.concat(this.walkTokens(t.tokens,e)))}}return s}use(...r){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(s=>{let n={...s};if(n.async=this.defaults.async||n.async||!1,s.extensions&&(s.extensions.forEach(t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){let i=e.renderers[t.name];i?e.renderers[t.name]=function(...l){let d=t.renderer.apply(this,l);return d===!1&&(d=i.apply(this,l)),d}:e.renderers[t.name]=t.renderer}if("tokenizer"in t){if(!t.level||t.level!=="block"&&t.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[t.level];i?i.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&(t.level==="block"?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:t.level==="inline"&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)}),n.extensions=e),s.renderer){let t=this.defaults.renderer||new Gt(this.defaults);for(let i in s.renderer){if(!(i in t))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let l=i,d=s.renderer[l],u=t[l];t[l]=(...b)=>{let f=d.apply(t,b);return f===!1&&(f=u.apply(t,b)),f||""}}n.renderer=t}if(s.tokenizer){let t=this.defaults.tokenizer||new Ut(this.defaults);for(let i in s.tokenizer){if(!(i in t))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let l=i,d=s.tokenizer[l],u=t[l];t[l]=(...b)=>{let f=d.apply(t,b);return f===!1&&(f=u.apply(t,b)),f}}n.tokenizer=t}if(s.hooks){let t=this.defaults.hooks||new Bt;for(let i in s.hooks){if(!(i in t))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let l=i,d=s.hooks[l],u=t[l];Bt.passThroughHooks.has(i)?t[l]=b=>{if(this.defaults.async&&Bt.passThroughHooksRespectAsync.has(i))return(async()=>{let S=await d.call(t,b);return u.call(t,S)})();let f=d.call(t,b);return u.call(t,f)}:t[l]=(...b)=>{if(this.defaults.async)return(async()=>{let S=await d.apply(t,b);return S===!1&&(S=await u.apply(t,b)),S})();let f=d.apply(t,b);return f===!1&&(f=u.apply(t,b)),f}}n.hooks=t}if(s.walkTokens){let t=this.defaults.walkTokens,i=s.walkTokens;n.walkTokens=function(l){let d=[];return d.push(i.call(this,l)),t&&(d=d.concat(t.call(this,l))),d}}this.defaults={...this.defaults,...n}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,e){return Ye.lex(r,e??this.defaults)}parser(r,e){return Xe.parse(r,e??this.defaults)}parseMarkdown(r){return(e,s)=>{let n={...s},t={...this.defaults,...n},i=this.onError(!!t.silent,!!t.async);if(this.defaults.async===!0&&n.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(t.hooks&&(t.hooks.options=t,t.hooks.block=r),t.async)return(async()=>{let l=t.hooks?await t.hooks.preprocess(e):e,d=await(t.hooks?await t.hooks.provideLexer():r?Ye.lex:Ye.lexInline)(l,t),u=t.hooks?await t.hooks.processAllTokens(d):d;t.walkTokens&&await Promise.all(this.walkTokens(u,t.walkTokens));let b=await(t.hooks?await t.hooks.provideParser():r?Xe.parse:Xe.parseInline)(u,t);return t.hooks?await t.hooks.postprocess(b):b})().catch(i);try{t.hooks&&(e=t.hooks.preprocess(e));let l=(t.hooks?t.hooks.provideLexer():r?Ye.lex:Ye.lexInline)(e,t);t.hooks&&(l=t.hooks.processAllTokens(l)),t.walkTokens&&this.walkTokens(l,t.walkTokens);let d=(t.hooks?t.hooks.provideParser():r?Xe.parse:Xe.parseInline)(l,t);return t.hooks&&(d=t.hooks.postprocess(d)),d}catch(l){return i(l)}}}onError(r,e){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,r){let n="<p>An error occurred:</p><pre>"+nt(s.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(s);throw s}}},pt=new _a;function U(r,e){return pt.parse(r,e)}U.options=U.setOptions=function(r){return pt.setOptions(r),U.defaults=pt.defaults,Us(U.defaults),U};U.getDefaults=os;U.defaults=vt;U.use=function(...r){return pt.use(...r),U.defaults=pt.defaults,Us(U.defaults),U};U.walkTokens=function(r,e){return pt.walkTokens(r,e)};U.parseInline=pt.parseInline;U.Parser=Xe;U.parser=Xe.parse;U.Renderer=Gt;U.TextRenderer=_s;U.Lexer=Ye;U.lexer=Ye.lex;U.Tokenizer=Ut;U.Hooks=Bt;U.parse=U;U.options;U.setOptions;U.use;U.walkTokens;U.parseInline;Xe.parse;Ye.lex;function Ks(r,e){return 1+r.reduce((t,i)=>{const l=(i.potential_sg-1)*1e3,d=i.amount_kg*l*8.345*(e.efficiency_percent/100)/e.batch_size_liters;return t+d},0)/1e3}function ga(r,e){return 1+(r-1)*1e3*(1-e/100)/1e3}function er(r,e,s="simple"){return s==="simple"?(r-e)*131.25:76.08*(r-e)/(1.775-r)*(e/.794)}function tr(r,e,s){if(r.use==="dry_hop"||r.boil_time_minutes<=0)return 0;const n=1.65*Math.pow(125e-6,e-1),t=(1-Math.exp(-.04*r.boil_time_minutes))/4.15;let i=n*t;r.form==="pellet"&&(i*=1.1),r.use==="first_wort"&&(i*=1.1),r.use==="whirlpool"&&(i*=.2);const l=r.alpha_acid_percent/100*r.amount_grams*i*1e3/s;return Math.max(0,l)}function sr(r,e,s){return r.reduce((n,t)=>n+tr(t,e,s),0)}function rr(r,e){const s=(e-1)*1e3;return s>0?r/s:0}function ar(r,e){const s=e*.264172,n=r.reduce((i,l)=>{const d=l.amount_kg*2.20462;return i+d*l.color_srm/s},0),t=1.4922*Math.pow(n,.6859);return Math.min(40,Math.max(0,t))}function is(r){const e=Math.max(1,Math.min(40,r)),s={1:"#FFE699",2:"#FFD878",3:"#FFCA5A",4:"#FFBF42",5:"#FBB123",6:"#F8A600",7:"#F39C00",8:"#EA8F00",9:"#E58500",10:"#DE7C00",11:"#D77200",12:"#CF6900",13:"#CB6200",14:"#C35900",15:"#BB5100",16:"#B54C00",17:"#B04500",18:"#A63E00",19:"#A13700",20:"#9B3200",25:"#7C2900",30:"#5E1E00",35:"#401500",40:"#261000"},n=Object.keys(s).map(Number).sort((i,l)=>i-l);let t=n[0];for(const i of n)if(i<=e)t=i;else break;return s[t]||"#261000"}function ma(r){return r<2?"Pale Straw":r<3?"Straw":r<4?"Pale Gold":r<6?"Deep Gold":r<9?"Amber":r<12?"Copper":r<15?"Light Brown":r<18?"Brown":r<20?"Dark Brown":r<24?"Very Dark":r<30?"Black":"Opaque Black"}function ba(r,e,s=330){const t=er(r,e)*.79*7*(s/100),i=(e-1)*1e3*.4*(s/100);return Math.round(t+i)}function ka(r,e,s,n){const t=Ks(r,n),i=ga(t,s.attenuation_percent),l=er(t,i),d=sr(e,t,n.batch_size_liters),u=ar(r,n.batch_size_liters);return{og:Math.round(t*1e3)/1e3,fg:Math.round(i*1e3)/1e3,abv:Math.round(l*10)/10,ibu:Math.round(d),srm:Math.round(u*10)/10,color_hex:is(u),calories_per_330ml:ba(t,i,330)}}var xa=y('<span class="stats svelte-1qls65z"> <span class="color-swatch svelte-1qls65z"></span> </span>'),wa=y('<div class="empty-state svelte-1qls65z"><p class="svelte-1qls65z">No fermentables added yet.</p> <button type="button" class="browse-btn svelte-1qls65z">Browse Library</button></div>'),ya=y('<span class="ferm-type svelte-1qls65z"> </span>'),Sa=y('<span class="detail svelte-1qls65z"> </span>'),za=y('<span class="detail svelte-1qls65z"> </span>'),Ra=y('<span class="detail svelte-1qls65z"> </span>'),$a=y('<div class="ferm-item svelte-1qls65z"><div class="ferm-main svelte-1qls65z"><div class="ferm-info svelte-1qls65z"><span class="ferm-name svelte-1qls65z"> </span> <!></div> <div class="ferm-details svelte-1qls65z"><!> <!> <!></div></div> <div class="ferm-controls svelte-1qls65z"><div class="amount-input svelte-1qls65z"><input type="number" step="0.1" min="0" class="svelte-1qls65z"/> <span class="unit svelte-1qls65z">kg</span></div> <span class="percent svelte-1qls65z"> </span> <button type="button" class="remove-btn svelte-1qls65z">×</button></div></div>'),Ta=y('<div class="fermentables-list svelte-1qls65z"></div>'),Aa=y('<div class="loading svelte-1qls65z"><div class="spinner svelte-1qls65z"></div> <p>Loading fermentables...</p></div>'),Ba=y('<div class="error-box svelte-1qls65z"><p class="error-text svelte-1qls65z"> </p></div>'),Ca=y("<option> </option>"),Fa=y("<option> </option>"),La=y('<span class="item-maltster svelte-1qls65z"> </span>'),qa=y('<span class="item-color svelte-1qls65z"><span class="color-dot svelte-1qls65z"></span> </span>'),Pa=y('<span class="item-potential svelte-1qls65z"> </span>'),Ia=y('<button type="button"><div class="item-main svelte-1qls65z"><span class="item-name svelte-1qls65z"> </span> <!></div> <div class="item-details svelte-1qls65z"><!> <!></div></button>'),Ma=y('<div class="type-group svelte-1qls65z"><h5 class="type-name svelte-1qls65z"> </h5> <!></div>'),Ea=y('<div class="no-results svelte-1qls65z"><p class="svelte-1qls65z">No fermentables match your filters</p></div>'),Oa=y('<div class="filters svelte-1qls65z"><input type="text" placeholder="Search fermentables..." class="search-input svelte-1qls65z"/> <div class="filter-row svelte-1qls65z"><select class="filter-select svelte-1qls65z"><option>All Types</option><!></select> <select class="filter-select svelte-1qls65z"><option>All Origins</option><!></select></div></div> <div class="library-list svelte-1qls65z"><!> <!></div>',1),Da=y('<div class="browser-overlay svelte-1qls65z"><div class="browser-modal svelte-1qls65z"><div class="browser-header svelte-1qls65z"><h4 class="svelte-1qls65z">Add Fermentable</h4> <button type="button" class="close-btn svelte-1qls65z">×</button></div> <!></div></div>'),Ha=y('<div class="fermentable-selector svelte-1qls65z"><div class="selector-header svelte-1qls65z"><div class="header-left svelte-1qls65z"><h3 class="svelte-1qls65z">Grain Bill</h3> <!></div> <button type="button" class="add-btn svelte-1qls65z">+ Add Fermentable</button></div> <!> <!></div>');function Ua(r,e){Zt(e,!0);let s=Dt(e,"batchSizeLiters",3,20),n=Dt(e,"efficiencyPercent",3,72),t=A(ut([])),i=A(ut([])),l=A(ut([])),d=A(!0),u=A(null),b=A(""),f=A(""),S=A(""),z=A(!1),L=ne(()=>e.fermentables.reduce((w,v)=>w+v.amount_kg,0)),q=ne(()=>()=>{if(e.fermentables.length===0)return{og:1,srm:0,color_hex:"#FFE699"};const w=e.fermentables.map(P=>({name:P.name,amount_kg:P.amount_kg,potential_sg:P.potential_sg||1.036,color_srm:P.color_srm||2})),v={batch_size_liters:s(),efficiency_percent:n()},_=Ks(w,v),x=ar(w,s()),F=is(x);return{og:_,srm:x,color_hex:F}}),Y=ne(()=>()=>a(t).filter(w=>{const v=!a(b)||w.name.toLowerCase().includes(a(b).toLowerCase())||w.maltster?.toLowerCase().includes(a(b).toLowerCase())||w.origin?.toLowerCase().includes(a(b).toLowerCase()),_=!a(f)||w.type===a(f),x=!a(S)||w.origin===a(S);return v&&_&&x})),de=ne(()=>()=>{const w={};for(const _ of a(Y)()){const x=_.type||"Other";w[x]||(w[x]=[]),w[x].push(_)}const v=["base","specialty","adjunct","sugar","extract","fruit","other"];return Object.fromEntries(Object.entries(w).sort(([_],[x])=>{const F=v.indexOf(_.toLowerCase()),P=v.indexOf(x.toLowerCase());return F>=0&&P>=0?F-P:F>=0?-1:P>=0?1:_.localeCompare(x)}))});Ds(async()=>{try{const[w,v,_]=await Promise.all([Sr(),zr(),Rr()]);m(t,w,!0),m(i,v.types||[],!0),m(l,_.origins||[],!0)}catch(w){m(u,w instanceof Error?w.message:"Failed to load fermentables",!0),console.error("Failed to load fermentables:",w)}finally{m(d,!1)}});function Te(w){if(e.fermentables.some(_=>_.id===w.id))return;const v={...w,amount_kg:.5};e.onUpdate([...e.fermentables,v])}function be(w){e.onUpdate(e.fermentables.filter(v=>v.id!==w))}function Pe(w,v){e.onUpdate(e.fermentables.map(_=>_.id===w?{..._,amount_kg:Math.max(0,v)}:_))}function W(w){return!w||!a(L)?"0%":(w/a(L)*100).toFixed(1)+"%"}function le(w){return w==null?"--":w.toFixed(0)+"°L"}function Ae(w){return w==null?"--":w.toFixed(3)}function Je(w){switch(w?.toLowerCase()){case"base":return"var(--positive)";case"specialty":return"var(--warning)";case"adjunct":return"var(--info)";case"sugar":return"var(--accent-primary)";case"extract":return"var(--text-secondary)";default:return"var(--text-tertiary)"}}var we=Ha(),g=c(we),H=c(g),De=p(c(H),2);{var N=w=>{var v=xa(),_=c(v),x=p(_),F=p(x);o(v),C((P,K,ge,X)=>{R(_,`${P??""} kg · OG ${K??""} · `),Ft(x,`background-color: ${ge??""}`),R(F,` ${X??""} SRM`)},[()=>a(L).toFixed(2),()=>a(q)().og.toFixed(3),()=>a(q)().color_hex,()=>a(q)().srm.toFixed(0)]),k(w,v)};B(De,w=>{e.fermentables.length>0&&w(N)})}o(H);var bt=p(H,2);bt.__click=()=>m(z,!0),o(g);var dt=p(g,2);{var ht=w=>{var v=wa(),_=p(c(v),2);_.__click=()=>m(z,!0),o(v),k(w,v)},kt=w=>{var v=Ta();je(v,21,()=>e.fermentables,_=>_.id,(_,x)=>{var F=$a(),P=c(F),K=c(P),ge=c(K),X=c(ge,!0);o(ge);var ee=p(ge,2);{var Ie=O=>{var G=ya(),Se=c(G,!0);o(G),C(me=>{Ft(G,`color: ${me??""}`),R(Se,a(x).type)},[()=>Je(a(x).type)]),k(O,G)};B(ee,O=>{a(x).type&&O(Ie)})}o(K);var Ke=p(K,2),ke=c(Ke);{var M=O=>{var G=Sa(),Se=c(G,!0);o(G),C(()=>R(Se,a(x).maltster)),k(O,G)};B(ke,O=>{a(x).maltster&&O(M)})}var V=p(ke,2);{var ie=O=>{var G=za(),Se=c(G,!0);o(G),C(me=>R(Se,me),[()=>le(a(x).color_srm)]),k(O,G)};B(V,O=>{a(x).color_srm&&O(ie)})}var oe=p(V,2);{var xe=O=>{var G=Ra(),Se=c(G,!0);o(G),C(me=>R(Se,me),[()=>Ae(a(x).potential_sg)]),k(O,G)};B(oe,O=>{a(x).potential_sg&&O(xe)})}o(Ke),o(P);var he=p(P,2),ce=c(he),Be=c(ce);Ge(Be),Be.__change=O=>Pe(a(x).id,parseFloat(O.currentTarget.value)||0),rt(2),o(ce);var ye=p(ce,2),Ce=c(ye,!0);o(ye);var Me=p(ye,2);Me.__click=()=>be(a(x).id),o(he),o(F),C(O=>{R(X,a(x).name),Ct(Be,a(x).amount_kg),R(Ce,O)},[()=>W(a(x).amount_kg)]),k(_,F)}),o(v),k(w,v)};B(dt,w=>{e.fermentables.length===0?w(ht):w(kt,!1)})}var xt=p(dt,2);{var wt=w=>{var v=Da();v.__click=()=>m(z,!1);var _=c(v);_.__click=X=>X.stopPropagation();var x=c(_),F=p(c(x),2);F.__click=()=>m(z,!1),o(x);var P=p(x,2);{var K=X=>{var ee=Aa();k(X,ee)},ge=X=>{var ee=Et(),Ie=ct(ee);{var Ke=M=>{var V=Ba(),ie=c(V),oe=c(ie,!0);o(ie),o(V),C(()=>R(oe,a(u))),k(M,V)},ke=M=>{var V=Oa(),ie=ct(V),oe=c(ie);Ge(oe);var xe=p(oe,2),he=c(xe),ce=c(he);ce.value=ce.__value="";var Be=p(ce);je(Be,17,()=>a(i),mt,(Q,te)=>{var se=Ca(),j=c(se,!0);o(se);var re={};C(()=>{R(j,a(te)),re!==(re=a(te))&&(se.value=(se.__value=a(te))??"")}),k(Q,se)}),o(he);var ye=p(he,2),Ce=c(ye);Ce.value=Ce.__value="";var Me=p(Ce);je(Me,17,()=>a(l),mt,(Q,te)=>{var se=Fa(),j=c(se,!0);o(se);var re={};C(()=>{R(j,a(te)),re!==(re=a(te))&&(se.value=(se.__value=a(te))??"")}),k(Q,se)}),o(ye),o(xe),o(ie);var O=p(ie,2),G=c(O);je(G,17,()=>Object.entries(a(de)()),([Q,te])=>Q,(Q,te)=>{var se=ne(()=>rs(a(te),2));let j=()=>a(se)[0],re=()=>a(se)[1];var ue=Ma(),Ee=c(ue),Ze=c(Ee,!0);o(Ee);var He=p(Ee,2);je(He,17,re,pe=>pe.id,(pe,fe)=>{const Ne=ne(()=>e.fermentables.some(E=>E.id===a(fe).id));var _e=Ia();let ve;_e.__click=()=>Te(a(fe));var Fe=c(_e),Le=c(Fe),Qe=c(Le,!0);o(Le);var ze=p(Le,2);{var et=E=>{var D=La(),ae=c(D,!0);o(D),C(()=>R(ae,a(fe).maltster)),k(E,D)};B(ze,E=>{a(fe).maltster&&E(et)})}o(Fe);var We=p(Fe,2),Ue=c(We);{var Re=E=>{var D=qa(),ae=c(D),Ve=p(ae);o(D),C((yt,Pt)=>{Ft(ae,`background-color: ${yt??""}`),R(Ve,` ${Pt??""}°L`)},[()=>is(a(fe).color_srm),()=>a(fe).color_srm.toFixed(0)]),k(E,D)};B(Ue,E=>{a(fe).color_srm&&E(Re)})}var lt=p(Ue,2);{var Z=E=>{var D=Pa(),ae=c(D,!0);o(D),C(Ve=>R(ae,Ve),[()=>a(fe).potential_sg.toFixed(3)]),k(E,D)};B(lt,E=>{a(fe).potential_sg&&E(Z)})}o(We),o(_e),C(()=>{ve=Hs(_e,1,"library-item svelte-1qls65z",null,ve,{added:a(Ne)}),_e.disabled=a(Ne),R(Qe,a(fe).name)}),k(pe,_e)}),o(ue),C(()=>R(Ze,j())),k(Q,ue)});var Se=p(G,2);{var me=Q=>{var te=Ea();k(Q,te)};B(Se,Q=>{Object.keys(a(de)()).length===0&&Q(me)})}o(O),ot(oe,()=>a(b),Q=>m(b,Q)),Ot(he,()=>a(f),Q=>m(f,Q)),Ot(ye,()=>a(S),Q=>m(S,Q)),k(M,V)};B(Ie,M=>{a(u)?M(Ke):M(ke,!1)},!0)}k(X,ee)};B(P,X=>{a(d)?X(K):X(ge,!1)})}o(_),o(v),k(w,v)};B(xt,w=>{a(z)&&w(wt)})}o(we),k(r,we),Nt()}jt(["click","change"]);var Ga=y('<span class="stats svelte-4wskud"> <span class="balance svelte-4wskud"> </span></span>'),ja=y('<div class="empty-state svelte-4wskud"><p class="svelte-4wskud">No hops added yet.</p> <button type="button" class="browse-btn svelte-4wskud">Browse Library</button></div>'),Za=y('<span class="hop-origin svelte-4wskud"> </span>'),Na=y('<span class="ibu-value svelte-4wskud"> </span>'),Qa=y('<span class="ibu-zero svelte-4wskud">0 IBU</span>'),Wa=y('<div class="control-group svelte-4wskud"><label class="svelte-4wskud">Time</label> <div class="input-with-unit svelte-4wskud"><input type="number" step="5" min="0" max="90" class="svelte-4wskud"/> <span class="unit svelte-4wskud">min</span></div></div>'),Va=y('<div class="hop-item svelte-4wskud"><div class="hop-main svelte-4wskud"><div class="hop-info svelte-4wskud"><span class="hop-name svelte-4wskud"> </span> <!></div> <div class="hop-ibu svelte-4wskud"><!></div></div> <div class="hop-controls svelte-4wskud"><div class="control-row svelte-4wskud"><div class="control-group svelte-4wskud"><label class="svelte-4wskud">Amount</label> <div class="input-with-unit svelte-4wskud"><input type="number" step="5" min="0" class="svelte-4wskud"/> <span class="unit svelte-4wskud">g</span></div></div> <div class="control-group svelte-4wskud"><label class="svelte-4wskud">AA%</label> <input type="number" step="0.1" min="0" max="25" class="aa-input svelte-4wskud"/></div> <!> <div class="control-group svelte-4wskud"><label class="svelte-4wskud">Use</label> <select class="svelte-4wskud"><option>Boil</option><option>First Wort</option><option>Whirlpool</option><option>Dry Hop</option><option>Mash</option></select></div> <div class="control-group svelte-4wskud"><label class="svelte-4wskud">Form</label> <select class="svelte-4wskud"><option>Pellet</option><option>Whole</option><option>Plug</option></select></div></div> <button type="button" class="remove-btn svelte-4wskud">×</button></div></div>'),Ya=y('<div class="use-group svelte-4wskud"><h4 class="use-name svelte-4wskud"> </h4> <!></div>'),Xa=y('<div class="hops-list svelte-4wskud"></div>'),Ja=y('<div class="loading svelte-4wskud"><div class="spinner svelte-4wskud"></div> <p>Loading hops...</p></div>'),Ka=y('<div class="error-box svelte-4wskud"><p class="error-text svelte-4wskud"> </p></div>'),en=y("<option> </option>"),tn=y('<span class="item-origin svelte-4wskud"> </span>'),sn=y('<span class="item-aroma svelte-4wskud"> </span>'),rn=y('<button type="button" class="library-item svelte-4wskud"><div class="item-main svelte-4wskud"><span class="item-name svelte-4wskud"> </span> <!></div> <div class="item-details svelte-4wskud"><span class="item-aa svelte-4wskud"> </span> <!></div></button>'),an=y('<div class="purpose-group svelte-4wskud"><h5 class="purpose-name svelte-4wskud"> </h5> <!></div>'),nn=y('<div class="no-results svelte-4wskud"><p class="svelte-4wskud">No hops match your filters</p></div>'),ln=y('<div class="filters svelte-4wskud"><input type="text" placeholder="Search hops..." class="search-input svelte-4wskud"/> <div class="filter-row svelte-4wskud"><select class="filter-select svelte-4wskud"><option>All Purposes</option><option>Bittering</option><option>Aroma</option><option>Dual Purpose</option></select> <select class="filter-select svelte-4wskud"><option>All Origins</option><!></select></div></div> <div class="library-list svelte-4wskud"><!> <!></div>',1),on=y('<div class="browser-overlay svelte-4wskud"><div class="browser-modal svelte-4wskud"><div class="browser-header svelte-4wskud"><h4 class="svelte-4wskud">Add Hop</h4> <button type="button" class="close-btn svelte-4wskud">×</button></div> <!></div></div>'),cn=y('<div class="hop-selector svelte-4wskud"><div class="selector-header svelte-4wskud"><div class="header-left svelte-4wskud"><h3 class="svelte-4wskud">Hop Schedule</h3> <!></div> <button type="button" class="add-btn svelte-4wskud">+ Add Hop</button></div> <!> <!></div>');function un(r,e){Zt(e,!0);let s=Dt(e,"og",3,1.05),n=Dt(e,"batchSizeLiters",3,20),t=A(ut([])),i=A(ut([])),l=A(!0),d=A(null),u=A(""),b=A(""),f=A(""),S=A(!1),z=ne(()=>()=>{if(e.hops.length===0)return 0;const v=e.hops.map(_=>({name:_.name,amount_grams:_.amount_grams,alpha_acid_percent:_.alpha_acid_percent,boil_time_minutes:_.boil_time_minutes,form:_.form,use:_.use}));return sr(v,s(),n())}),L=ne(()=>()=>rr(a(z)(),s())),q=ne(()=>()=>{const v=a(L)();return v<.3?"Very Sweet":v<.5?"Malty":v<.7?"Balanced":v<.9?"Hoppy":"Very Bitter"});function Y(v){const _={name:v.name,amount_grams:v.amount_grams,alpha_acid_percent:v.alpha_acid_percent,boil_time_minutes:v.boil_time_minutes,form:v.form,use:v.use};return tr(_,s(),n())}let de=ne(()=>()=>a(t).filter(v=>{const _=!a(u)||v.name.toLowerCase().includes(a(u).toLowerCase())||v.origin?.toLowerCase().includes(a(u).toLowerCase())||v.aroma_profile?.toLowerCase().includes(a(u).toLowerCase()),x=!a(b)||v.origin===a(b),F=!a(f)||v.purpose===a(f);return _&&x&&F})),Te=ne(()=>()=>{const v={};for(const x of a(de)()){const F=x.purpose||"Other";v[F]||(v[F]=[]),v[F].push(x)}const _=["dual","bittering","aroma"];return Object.fromEntries(Object.entries(v).sort(([x],[F])=>{const P=_.indexOf(x.toLowerCase()),K=_.indexOf(F.toLowerCase());return P>=0&&K>=0?P-K:P>=0?-1:K>=0?1:x.localeCompare(F)}))}),be=ne(()=>()=>{const v={};for(const _ of e.hops){const x=_.use||"boil";v[x]||(v[x]=[]),v[x].push(_)}return v.boil&&v.boil.sort((_,x)=>x.boil_time_minutes-_.boil_time_minutes),v});Ds(async()=>{try{const[v,_]=await Promise.all([$r(),Tr()]);m(t,v,!0),m(i,_.origins||[],!0)}catch(v){m(d,v instanceof Error?v.message:"Failed to load hops",!0),console.error("Failed to load hops:",v)}finally{m(l,!1)}});function Pe(v){const _=v.alpha_acid_low&&v.alpha_acid_high?(v.alpha_acid_low+v.alpha_acid_high)/2:v.alpha_acid_low||v.alpha_acid_high||10,x={...v,amount_grams:30,boil_time_minutes:60,use:"boil",form:"pellet",alpha_acid_percent:_};e.onUpdate([...e.hops,x])}function W(v){const _=[...e.hops];_.splice(v,1),e.onUpdate(_)}function le(v,_,x){const F=e.hops.map((P,K)=>K===v?{...P,[_]:x}:P);e.onUpdate(F)}function Ae(v,_){return v!=null&&_!=null?`${v.toFixed(1)}-${_.toFixed(1)}%`:v!=null?`${v.toFixed(1)}%+`:_!=null?`≤${_.toFixed(1)}%`:"--"}function Je(v){return{boil:"Boil",whirlpool:"Whirlpool",dry_hop:"Dry Hop",first_wort:"First Wort",mash:"Mash"}[v]||v}function we(v){switch(v?.toLowerCase()){case"bittering":return"var(--warning)";case"aroma":return"var(--positive)";case"dual":return"var(--info)";default:return"var(--text-tertiary)"}}var g=cn(),H=c(g),De=c(H),N=p(c(De),2);{var bt=v=>{var _=Ga(),x=c(_),F=p(x),P=c(F,!0);o(F),o(_),C((K,ge,X)=>{R(x,`${K??""} IBU · BU:GU ${ge??""} · `),R(P,X)},[()=>a(z)().toFixed(0),()=>a(L)().toFixed(2),()=>a(q)()]),k(v,_)};B(N,v=>{e.hops.length>0&&v(bt)})}o(De);var dt=p(De,2);dt.__click=()=>m(S,!0),o(H);var ht=p(H,2);{var kt=v=>{var _=ja(),x=p(c(_),2);x.__click=()=>m(S,!0),o(_),k(v,_)},xt=v=>{var _=Xa();je(_,21,()=>Object.entries(a(be)()),mt,(x,F)=>{var P=ne(()=>rs(a(F),2));let K=()=>a(P)[0],ge=()=>a(P)[1];var X=Ya(),ee=c(X),Ie=c(ee,!0);o(ee);var Ke=p(ee,2);je(Ke,19,ge,(ke,M)=>ke.id+"-"+M,(ke,M)=>{const V=ne(()=>e.hops.indexOf(a(M))),ie=ne(()=>Y(a(M)));var oe=Va(),xe=c(oe),he=c(xe),ce=c(he),Be=c(ce,!0);o(ce);var ye=p(ce,2);{var Ce=Z=>{var E=Za(),D=c(E,!0);o(E),C(()=>R(D,a(M).origin)),k(Z,E)};B(ye,Z=>{a(M).origin&&Z(Ce)})}o(he);var Me=p(he,2),O=c(Me);{var G=Z=>{var E=Na(),D=c(E);o(E),C(ae=>R(D,`+${ae??""} IBU`),[()=>a(ie).toFixed(0)]),k(Z,E)},Se=Z=>{var E=Qa();k(Z,E)};B(O,Z=>{a(ie)>0?Z(G):Z(Se,!1)})}o(Me),o(xe);var me=p(xe,2),Q=c(me),te=c(Q),se=p(c(te),2),j=c(se);Ge(j),j.__change=Z=>le(a(V),"amount_grams",parseFloat(Z.currentTarget.value)||0),rt(2),o(se),o(te);var re=p(te,2),ue=p(c(re),2);Ge(ue),ue.__change=Z=>le(a(V),"alpha_acid_percent",parseFloat(Z.currentTarget.value)||0),o(re);var Ee=p(re,2);{var Ze=Z=>{var E=Wa(),D=p(c(E),2),ae=c(D);Ge(ae),ae.__change=Ve=>le(a(V),"boil_time_minutes",parseInt(Ve.currentTarget.value)||0),rt(2),o(D),o(E),C(()=>Ct(ae,a(M).boil_time_minutes)),k(Z,E)};B(Ee,Z=>{a(M).use==="boil"&&Z(Ze)})}var He=p(Ee,2),pe=p(c(He),2);pe.__change=Z=>le(a(V),"use",Z.currentTarget.value);var fe=c(pe);fe.value=fe.__value="boil";var Ne=p(fe);Ne.value=Ne.__value="first_wort";var _e=p(Ne);_e.value=_e.__value="whirlpool";var ve=p(_e);ve.value=ve.__value="dry_hop";var Fe=p(ve);Fe.value=Fe.__value="mash",o(pe);var Le;Fs(pe),o(He);var Qe=p(He,2),ze=p(c(Qe),2);ze.__change=Z=>le(a(V),"form",Z.currentTarget.value);var et=c(ze);et.value=et.__value="pellet";var We=p(et);We.value=We.__value="whole";var Ue=p(We);Ue.value=Ue.__value="plug",o(ze);var Re;Fs(ze),o(Qe),o(Q);var lt=p(Q,2);lt.__click=()=>W(a(V)),o(me),o(oe),C(()=>{R(Be,a(M).name),Ct(j,a(M).amount_grams),Ct(ue,a(M).alpha_acid_percent),Le!==(Le=a(M).use)&&(pe.value=(pe.__value=a(M).use)??"",Ls(pe,a(M).use)),Re!==(Re=a(M).form)&&(ze.value=(ze.__value=a(M).form)??"",Ls(ze,a(M).form))}),k(ke,oe)}),o(X),C(ke=>R(Ie,ke),[()=>Je(K())]),k(x,X)}),o(_),k(v,_)};B(ht,v=>{e.hops.length===0?v(kt):v(xt,!1)})}var wt=p(ht,2);{var w=v=>{var _=on();_.__click=()=>m(S,!1);var x=c(_);x.__click=ee=>ee.stopPropagation();var F=c(x),P=p(c(F),2);P.__click=()=>m(S,!1),o(F);var K=p(F,2);{var ge=ee=>{var Ie=Ja();k(ee,Ie)},X=ee=>{var Ie=Et(),Ke=ct(Ie);{var ke=V=>{var ie=Ka(),oe=c(ie),xe=c(oe,!0);o(oe),o(ie),C(()=>R(xe,a(d))),k(V,ie)},M=V=>{var ie=ln(),oe=ct(ie),xe=c(oe);Ge(xe);var he=p(xe,2),ce=c(he),Be=c(ce);Be.value=Be.__value="";var ye=p(Be);ye.value=ye.__value="bittering";var Ce=p(ye);Ce.value=Ce.__value="aroma";var Me=p(Ce);Me.value=Me.__value="dual",o(ce);var O=p(ce,2),G=c(O);G.value=G.__value="";var Se=p(G);je(Se,17,()=>a(i),mt,(j,re)=>{var ue=en(),Ee=c(ue,!0);o(ue);var Ze={};C(()=>{R(Ee,a(re)),Ze!==(Ze=a(re))&&(ue.value=(ue.__value=a(re))??"")}),k(j,ue)}),o(O),o(he),o(oe);var me=p(oe,2),Q=c(me);je(Q,17,()=>Object.entries(a(Te)()),([j,re])=>j,(j,re)=>{var ue=ne(()=>rs(a(re),2));let Ee=()=>a(ue)[0],Ze=()=>a(ue)[1];var He=an(),pe=c(He),fe=c(pe,!0);o(pe);var Ne=p(pe,2);je(Ne,17,Ze,_e=>_e.id,(_e,ve)=>{var Fe=rn();Fe.__click=()=>Pe(a(ve));var Le=c(Fe),Qe=c(Le),ze=c(Qe,!0);o(Qe);var et=p(Qe,2);{var We=D=>{var ae=tn(),Ve=c(ae,!0);o(ae),C(()=>R(Ve,a(ve).origin)),k(D,ae)};B(et,D=>{a(ve).origin&&D(We)})}o(Le);var Ue=p(Le,2),Re=c(Ue),lt=c(Re,!0);o(Re);var Z=p(Re,2);{var E=D=>{var ae=sn(),Ve=c(ae,!0);o(ae),C(()=>R(Ve,a(ve).aroma_profile)),k(D,ae)};B(Z,D=>{a(ve).aroma_profile&&D(E)})}o(Ue),o(Fe),C(D=>{R(ze,a(ve).name),R(lt,D)},[()=>Ae(a(ve).alpha_acid_low,a(ve).alpha_acid_high)]),k(_e,Fe)}),o(He),C(_e=>{Ft(pe,`color: ${_e??""}`),R(fe,Ee())},[()=>we(Ee())]),k(j,He)});var te=p(Q,2);{var se=j=>{var re=nn();k(j,re)};B(te,j=>{Object.keys(a(Te)()).length===0&&j(se)})}o(me),ot(xe,()=>a(u),j=>m(u,j)),Ot(ce,()=>a(f),j=>m(f,j)),Ot(O,()=>a(b),j=>m(b,j)),k(V,ie)};B(Ke,V=>{a(d)?V(ke):V(M,!1)},!0)}k(ee,Ie)};B(K,ee=>{a(l)?ee(ge):ee(X,!1)})}o(x),o(_),k(v,_)};B(wt,v=>{a(S)&&v(w)})}o(g),k(r,g),Nt()}jt(["click","change"]);var pn=y("<span> </span>"),vn=y('<div class="style-warnings svelte-1rtvxu4"><span class="warnings-label svelte-1rtvxu4">Style Guidelines:</span> <!></div>'),dn=y('<span class="autocomplete-spinner svelte-1rtvxu4"></span>'),hn=y('<button type="button" class="clear-style svelte-1rtvxu4" aria-label="Clear style">&times;</button>'),fn=y('<span class="style-category svelte-1rtvxu4"> </span>'),_n=y('<li><button type="button" class="style-option svelte-1rtvxu4"><span class="style-name svelte-1rtvxu4"> </span> <!></button></li>'),gn=y('<ul class="style-dropdown svelte-1rtvxu4"></ul>'),mn=y('<div class="review-loading svelte-1rtvxu4"><div class="spinner svelte-1rtvxu4"></div> <p class="svelte-1rtvxu4"> </p></div>'),bn=y('<div class="review-error svelte-1rtvxu4"><p> </p></div>'),kn=y('<span class="style-badge found svelte-1rtvxu4"> </span>'),xn=y('<span class="style-badge not-found svelte-1rtvxu4">Style not in BJCP database</span>'),wn=y('<div class="review-meta svelte-1rtvxu4"><!> <span class="model-badge svelte-1rtvxu4"> </span></div> <div class="review-content markdown-body svelte-1rtvxu4"><!></div>',1),yn=y('<div class="modal-overlay svelte-1rtvxu4" role="presentation"><div class="modal-content svelte-1rtvxu4" role="dialog" aria-modal="true" aria-labelledby="review-modal-title" tabindex="-1"><div class="modal-header svelte-1rtvxu4"><h2 id="review-modal-title" class="svelte-1rtvxu4">AI Recipe Review</h2> <button class="modal-close svelte-1rtvxu4" aria-label="Close">&times;</button></div> <div class="modal-body svelte-1rtvxu4"><!></div></div></div>'),Sn=y('<div class="recipe-builder svelte-1rtvxu4"><div class="stats-panel svelte-1rtvxu4"><div class="stat-group svelte-1rtvxu4"><div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">OG</span> <span class="stat-value svelte-1rtvxu4"> </span></div> <div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">FG</span> <span class="stat-value svelte-1rtvxu4"> </span></div> <div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">ABV</span> <span class="stat-value svelte-1rtvxu4"> </span></div></div> <div class="stat-group svelte-1rtvxu4"><div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">IBU</span> <span class="stat-value svelte-1rtvxu4"> </span></div> <div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">BU:GU</span> <span class="stat-value balance svelte-1rtvxu4"> </span> <span class="stat-sub svelte-1rtvxu4"> </span></div></div> <div class="stat-group svelte-1rtvxu4"><div class="stat color-stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">Color</span> <div class="color-display svelte-1rtvxu4"><span class="color-swatch svelte-1rtvxu4"></span> <span class="stat-value svelte-1rtvxu4"> </span></div> <span class="stat-sub svelte-1rtvxu4"> </span></div></div> <div class="stat-group svelte-1rtvxu4"><div class="stat svelte-1rtvxu4"><span class="stat-label svelte-1rtvxu4">Calories</span> <span class="stat-value svelte-1rtvxu4"> </span> <span class="stat-sub svelte-1rtvxu4">per 330ml</span></div></div></div> <!> <div class="section metadata-section svelte-1rtvxu4"><h2 class="section-title svelte-1rtvxu4">Recipe Details</h2> <div class="form-grid svelte-1rtvxu4"><div class="form-field full-width svelte-1rtvxu4"><label for="recipe-name" class="svelte-1rtvxu4">Recipe Name *</label> <input id="recipe-name" type="text" placeholder="e.g., My Awesome IPA" class="form-input svelte-1rtvxu4"/></div> <div class="form-field svelte-1rtvxu4"><label for="author" class="svelte-1rtvxu4">Brewer</label> <input id="author" type="text" placeholder="Your name" class="form-input svelte-1rtvxu4"/></div> <div class="form-field style-autocomplete svelte-1rtvxu4"><label for="style" class="svelte-1rtvxu4">Style</label> <div class="autocomplete-container svelte-1rtvxu4"><input id="style" type="text" placeholder="Search BJCP styles..." class="form-input svelte-1rtvxu4" autocomplete="off"/> <!> <!></div> <!></div></div></div> <div class="section params-section svelte-1rtvxu4"><h2 class="section-title svelte-1rtvxu4">Batch Parameters</h2> <div class="params-grid svelte-1rtvxu4"><div class="param-field svelte-1rtvxu4"><label for="batch-size" class="svelte-1rtvxu4">Batch Size</label> <div class="input-with-unit svelte-1rtvxu4"><input id="batch-size" type="number" min="1" step="1" class="form-input svelte-1rtvxu4"/> <span class="unit svelte-1rtvxu4">L</span></div></div> <div class="param-field svelte-1rtvxu4"><label for="efficiency" class="svelte-1rtvxu4">Efficiency</label> <div class="input-with-unit svelte-1rtvxu4"><input id="efficiency" type="number" min="50" max="95" step="1" class="form-input svelte-1rtvxu4"/> <span class="unit svelte-1rtvxu4">%</span></div></div> <div class="param-field svelte-1rtvxu4"><label for="boil-time" class="svelte-1rtvxu4">Boil Time</label> <div class="input-with-unit svelte-1rtvxu4"><input id="boil-time" type="number" min="30" max="120" step="5" class="form-input svelte-1rtvxu4"/> <span class="unit svelte-1rtvxu4">min</span></div></div></div></div> <div class="section svelte-1rtvxu4"><!></div> <div class="section svelte-1rtvxu4"><!></div> <div class="section yeast-section svelte-1rtvxu4"><!></div> <div class="section notes-section svelte-1rtvxu4"><h2 class="section-title svelte-1rtvxu4">Notes</h2> <textarea placeholder="Brewing notes, tips, or variations..." rows="4" class="notes-input svelte-1rtvxu4"></textarea></div></div> <!>',1);function zn(r,e){Zt(e,!0);function s(){v()}function n(){_()}function t(){return a(Je)}function i(){return a(l).trim().length>0}let l=A(""),d=A(""),u=A(""),b=A(""),f=A(ut([])),S=A(null),z=A(!1),L=A(!1),q=null,Y=A(20),de=A(72),Te=A(60),be=A(ut([])),Pe=A(ut([])),W=A(null),le=A(!1),Ae=A(null),Je=A(!1),we=A(null),g=ne(()=>()=>{if(a(be).length===0)return{og:1,fg:1,abv:0,ibu:0,srm:0,color_hex:"#FFE699",calories_per_330ml:0};const h=a(be).map(J=>({name:J.name,amount_kg:J.amount_kg,potential_sg:J.potential_sg||1.036,color_srm:J.color_srm||2})),$=a(Pe).map(J=>({name:J.name,amount_grams:J.amount_grams,alpha_acid_percent:J.alpha_acid_percent,boil_time_minutes:J.boil_time_minutes,form:J.form,use:J.use})),T={name:a(W)?.name||"Default Yeast",attenuation_percent:a(W)?.attenuation_low&&a(W)?.attenuation_high?(a(W).attenuation_low+a(W).attenuation_high)/2:75,temp_min_c:a(W)?.temp_low||18,temp_max_c:a(W)?.temp_high||22},qe={batch_size_liters:a(Y),efficiency_percent:a(de),boil_time_minutes:a(Te)};return ka(h,$,T,qe)}),H=ne(()=>()=>rr(a(g)().ibu,a(g)().og)),De=ne(()=>()=>{const h=a(H)();return h<.3?"Very Malty":h<.5?"Malty":h<.7?"Balanced":h<.9?"Hoppy":"Very Bitter"}),N=ne(()=>()=>{if(!a(S))return[];const h=a(g)(),$=[],T=a(S);return T.og_min!==void 0&&T.og_max!==void 0&&(h.og<T.og_min?$.push({stat:"OG",value:h.og.toFixed(3),range:`${T.og_min.toFixed(3)} - ${T.og_max.toFixed(3)}`,severity:"warning"}):h.og>T.og_max&&$.push({stat:"OG",value:h.og.toFixed(3),range:`${T.og_min.toFixed(3)} - ${T.og_max.toFixed(3)}`,severity:"warning"})),T.fg_min!==void 0&&T.fg_max!==void 0&&(h.fg<T.fg_min||h.fg>T.fg_max)&&$.push({stat:"FG",value:h.fg.toFixed(3),range:`${T.fg_min.toFixed(3)} - ${T.fg_max.toFixed(3)}`,severity:"warning"}),T.abv_min!==void 0&&T.abv_max!==void 0&&(h.abv<T.abv_min||h.abv>T.abv_max)&&$.push({stat:"ABV",value:`${h.abv.toFixed(1)}%`,range:`${T.abv_min.toFixed(1)}% - ${T.abv_max.toFixed(1)}%`,severity:"warning"}),T.ibu_min!==void 0&&T.ibu_max!==void 0&&(h.ibu<T.ibu_min||h.ibu>T.ibu_max)&&$.push({stat:"IBU",value:h.ibu.toFixed(0),range:`${T.ibu_min} - ${T.ibu_max}`,severity:"warning"}),T.srm_min!==void 0&&T.srm_max!==void 0&&(h.srm<T.srm_min||h.srm>T.srm_max)&&$.push({stat:"Color",value:`${h.srm.toFixed(0)} SRM`,range:`${T.srm_min} - ${T.srm_max} SRM`,severity:"warning"}),$});async function bt(h){if(h.length<2){m(f,[],!0),m(L,!1);return}q&&clearTimeout(q),q=setTimeout(async()=>{m(z,!0);try{m(f,await Ar(h,8),!0),m(L,a(f).length>0)}catch($){console.error("Failed to search styles:",$),m(f,[],!0)}finally{m(z,!1)}},300)}function dt(h){const $=h.target;m(u,$.value,!0),a(S)&&a(u)!==a(S).name&&m(S,null),bt(a(u))}function ht(h){m(S,h,!0),m(u,h.name,!0),m(L,!1),m(f,[],!0)}function kt(){m(S,null),m(u,""),m(f,[],!0),m(L,!1)}function xt(h){m(be,h,!0)}function wt(h){m(Pe,h,!0)}function w(h){m(W,h,!0)}function v(){if(!a(l).trim()){alert("Please enter a recipe name");return}const h={name:a(l),author:a(d),type:a(u),batch_size_liters:a(Y),efficiency_percent:a(de),boil_time_minutes:a(Te),og:a(g)().og,fg:a(g)().fg,abv:a(g)().abv,ibu:a(g)().ibu,color_srm:a(g)().srm,fermentables:a(be),hops:a(Pe),yeast:a(W),notes:a(b)};e.onSave?.(h)}async function _(){if(!a(u).trim()){m(we,"Please enter a beer style to get an AI review"),m(le,!0);return}if(a(be).length===0){m(we,"Please add at least one fermentable to get an AI review"),m(le,!0);return}m(Je,!0),m(we,null),m(le,!0);try{const h=a(g)();m(Ae,await Br({name:a(l)||"Untitled Recipe",style:a(u),og:h.og,fg:h.fg,abv:h.abv,ibu:h.ibu,color_srm:h.srm,fermentables:a(be).map($=>({name:$.name,amount_kg:$.amount_kg,color_srm:$.color_srm,type:$.category})),hops:a(Pe).map($=>({name:$.name,amount_grams:$.amount_grams,boil_time_minutes:$.boil_time_minutes,alpha_acid_percent:$.alpha_acid_percent,use:$.use})),yeast:a(W)?{name:a(W).name,producer:a(W).producer,attenuation:a(W).attenuation}:void 0}),!0)}catch(h){m(we,h instanceof Error?h.message:"Failed to get AI review",!0)}finally{m(Je,!1)}}function x(){m(le,!1),m(Ae,null),m(we,null)}var F={save:s,review:n,getReviewLoading:t,canSave:i},P=Sn(),K=ct(P),ge=c(K),X=c(ge),ee=c(X),Ie=p(c(ee),2),Ke=c(Ie,!0);o(Ie),o(ee);var ke=p(ee,2),M=p(c(ke),2),V=c(M,!0);o(M),o(ke);var ie=p(ke,2),oe=p(c(ie),2),xe=c(oe);o(oe),o(ie),o(X);var he=p(X,2),ce=c(he),Be=p(c(ce),2),ye=c(Be,!0);o(Be),o(ce);var Ce=p(ce,2),Me=p(c(Ce),2),O=c(Me,!0);o(Me);var G=p(Me,2),Se=c(G,!0);o(G),o(Ce),o(he);var me=p(he,2),Q=c(me),te=p(c(Q),2),se=c(te),j=p(se,2),re=c(j);o(j),o(te);var ue=p(te,2),Ee=c(ue,!0);o(ue),o(Q),o(me);var Ze=p(me,2),He=c(Ze),pe=p(c(He),2),fe=c(pe,!0);o(pe),rt(2),o(He),o(Ze),o(ge);var Ne=p(ge,2);{var _e=h=>{var $=vn(),T=p(c($),2);je(T,17,()=>a(N)(),mt,(qe,J)=>{var Oe=pn(),at=c(Oe);o(Oe),C(()=>{Hs(Oe,1,`warning-badge ${a(J).severity??""}`,"svelte-1rtvxu4"),R(at,`${a(J).stat??""}: ${a(J).value??""} (target: ${a(J).range??""})`)}),k(qe,Oe)}),o($),k(h,$)};B(Ne,h=>{a(N)().length>0&&h(_e)})}var ve=p(Ne,2),Fe=p(c(ve),2),Le=c(Fe),Qe=p(c(Le),2);Ge(Qe),o(Le);var ze=p(Le,2),et=p(c(ze),2);Ge(et),o(ze);var We=p(ze,2),Ue=p(c(We),2),Re=c(Ue);Ge(Re),Re.__input=dt;var lt=p(Re,2);{var Z=h=>{var $=dn();k(h,$)};B(lt,h=>{a(z)&&h(Z)})}var E=p(lt,2);{var D=h=>{var $=hn();$.__click=kt,k(h,$)};B(E,h=>{a(S)&&h(D)})}o(Ue);var ae=p(Ue,2);{var Ve=h=>{var $=gn();je($,21,()=>a(f),mt,(T,qe)=>{var J=_n(),Oe=c(J);Oe.__click=()=>ht(a(qe));var at=c(Oe),St=c(at,!0);o(at);var zt=p(at,2);{var tt=st=>{var it=fn(),Rt=c(it,!0);o(it),C(()=>R(Rt,a(qe).category)),k(st,it)};B(zt,st=>{a(qe).category&&st(tt)})}o(Oe),o(J),C(()=>R(St,a(qe).name)),k(T,J)}),o($),k(h,$)};B(ae,h=>{a(L)&&a(f).length>0&&h(Ve)})}o(We),o(Fe),o(ve);var yt=p(ve,2),Pt=p(c(yt),2),Vt=c(Pt),gs=p(c(Vt),2),ms=c(gs);Ge(ms),rt(2),o(gs),o(Vt);var Yt=p(Vt,2),bs=p(c(Yt),2),ks=c(bs);Ge(ks),rt(2),o(bs),o(Yt);var xs=p(Yt,2),ws=p(c(xs),2),ys=c(ws);Ge(ys),rt(2),o(ws),o(xs),o(Pt),o(yt);var Xt=p(yt,2),nr=c(Xt);Ua(nr,{get fermentables(){return a(be)},get batchSizeLiters(){return a(Y)},get efficiencyPercent(){return a(de)},onUpdate:xt}),o(Xt);var Jt=p(Xt,2),lr=c(Jt);{let h=ne(()=>a(g)().og);un(lr,{get hops(){return a(Pe)},get og(){return a(h)},get batchSizeLiters(){return a(Y)},onUpdate:wt})}o(Jt);var Kt=p(Jt,2),ir=c(Kt);{let h=ne(()=>a(W)?.id);Lr(ir,{get selectedYeastId(){return a(h)},onSelect:w,label:"Select Yeast Strain"})}o(Kt);var Ss=p(Kt,2),zs=p(c(Ss),2);mr(zs),o(Ss),o(K);var or=p(K,2);{var cr=h=>{var $=yn();$.__click=x;var T=c($),qe=c(T),J=p(c(qe),2);J.__click=x,o(qe);var Oe=p(qe,2),at=c(Oe);{var St=tt=>{var st=mn(),it=p(c(st),2),Rt=c(it);o(it),o(st),C(()=>R(Rt,`Analyzing your recipe against ${(a(u)||"style guidelines")??""}...`)),k(tt,st)},zt=tt=>{var st=Et(),it=ct(st);{var Rt=ft=>{var _t=bn(),It=c(_t),es=c(It,!0);o(It),o(_t),C(()=>R(es,a(we))),k(ft,_t)},ur=ft=>{var _t=Et(),It=ct(_t);{var es=ts=>{var Rs=wn(),ss=ct(Rs),$s=c(ss);{var pr=gt=>{var $t=kn(),fr=c($t);o($t),C(()=>R(fr,`BJCP Style: ${a(Ae).style_name??""}`)),k(gt,$t)},vr=gt=>{var $t=xn();k(gt,$t)};B($s,gt=>{a(Ae).style_found?gt(pr):gt(vr,!1)})}var Ts=p($s,2),dr=c(Ts);o(Ts),o(ss);var As=p(ss,2),hr=c(As);Fr(hr,()=>U(a(Ae).review)),o(As),C(()=>R(dr,`Model: ${a(Ae).model??""}`)),k(ts,Rs)};B(It,ts=>{a(Ae)&&ts(es)},!0)}k(ft,_t)};B(it,ft=>{a(we)?ft(Rt):ft(ur,!1)},!0)}k(tt,st)};B(at,tt=>{a(Je)?tt(St):tt(zt,!1)})}o(Oe),o(T),o($),k(h,$)};B(or,h=>{a(le)&&h(cr)})}return C((h,$,T,qe,J,Oe,at,St,zt,tt)=>{R(Ke,h),R(V,$),R(xe,`${T??""}%`),R(ye,qe),R(O,J),R(Se,Oe),Ft(se,`background-color: ${at??""}`),R(re,`${St??""} SRM`),R(Ee,zt),R(fe,tt),Ct(Re,a(u))},[()=>a(g)().og.toFixed(3),()=>a(g)().fg.toFixed(3),()=>a(g)().abv.toFixed(1),()=>a(g)().ibu.toFixed(0),()=>a(H)().toFixed(2),()=>a(De)(),()=>a(g)().color_hex,()=>a(g)().srm.toFixed(0),()=>ma(a(g)().srm),()=>a(g)().calories_per_330ml]),ot(Qe,()=>a(l),h=>m(l,h)),ot(et,()=>a(d),h=>m(d,h)),Bs("focus",Re,()=>a(u).length>=2&&a(f).length>0&&m(L,!0)),Bs("blur",Re,()=>setTimeout(()=>m(L,!1),200)),ot(ms,()=>a(Y),h=>m(Y,h)),ot(ks,()=>a(de),h=>m(de,h)),ot(ys,()=>a(Te),h=>m(Te,h)),ot(zs,()=>a(b),h=>m(b,h)),k(r,P),Nt(F)}jt(["input","click"]);var Rn=y('<span class="btn-spinner svelte-1pes5m5"></span> Analyzing...',1),$n=_r('<svg class="btn-icon svelte-1pes5m5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z"></path></svg> AI Review',1),Tn=y('<span class="btn-spinner svelte-1pes5m5"></span> Saving...',1),An=y('<div class="error-banner svelte-1pes5m5"><svg class="error-icon svelte-1pes5m5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),Bn=y('<div class="saving-overlay svelte-1pes5m5"><div class="spinner svelte-1pes5m5"></div> <span>Saving recipe...</span></div>'),Cn=y('<div class="page-container svelte-1pes5m5"><div class="back-link svelte-1pes5m5"><a href="/recipes" class="back-btn svelte-1pes5m5"><svg class="back-icon svelte-1pes5m5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <div class="page-header svelte-1pes5m5"><div class="header-content svelte-1pes5m5"><h1 class="page-title svelte-1pes5m5">Create New Recipe</h1> <p class="page-description svelte-1pes5m5">Build your recipe with real-time calculations, or <a href="/recipes/import" class="import-link svelte-1pes5m5">import from BeerXML/BeerJSON</a></p></div> <div class="header-actions svelte-1pes5m5"><button type="button" class="btn-ghost svelte-1pes5m5">Cancel</button> <button type="button" class="btn-review svelte-1pes5m5"><!></button> <button type="button" class="btn-save svelte-1pes5m5"><!></button></div></div> <!> <!> <!></div>');function Wn(r,e){Zt(e,!0);let s=A(!1),n=A(null),t=A(void 0),i=A(!1);br(()=>{const g=setInterval(()=>{a(t)&&m(i,a(t).getReviewLoading(),!0)},100);return()=>clearInterval(g)});async function l(g){m(s,!0),m(n,null);try{const H={name:g.name,author:g.author||void 0,type:g.type||void 0,batch_size_liters:g.batch_size_liters,efficiency_percent:g.efficiency_percent,boil_time_minutes:g.boil_time_minutes,og:g.og,fg:g.fg,abv:g.abv,ibu:g.ibu,color_srm:g.color_srm,notes:g.notes||void 0,yeast_name:g.yeast?.name,yeast_lab:g.yeast?.producer,yeast_product_id:g.yeast?.product_id,yeast_temp_min:g.yeast?.temp_low??void 0,yeast_temp_max:g.yeast?.temp_high??void 0,yeast_attenuation:g.yeast?.attenuation_low&&g.yeast?.attenuation_high?(g.yeast.attenuation_low+g.yeast.attenuation_high)/2:void 0,format_extensions:{fermentables:g.fermentables.map(N=>({id:N.id,name:N.name,amount_kg:N.amount_kg,color_lovibond:N.color_lovibond,potential_sg:N.potential_sg,type:N.type,origin:N.origin,maltster:N.maltster})),hops:g.hops.map(N=>({id:N.id,name:N.name,amount_grams:N.amount_grams,alpha_acid_percent:N.alpha_acid_percent,boil_time_minutes:N.boil_time_minutes,use:N.use,form:N.form,origin:N.origin,purpose:N.purpose}))}},De=await Cr(H);Cs(`/recipes/${De.id}`)}catch(H){m(n,H instanceof Error?H.message:"Failed to create recipe",!0),m(s,!1)}}function d(){Cs("/recipes")}var u=Cn();wr("1pes5m5",g=>{kr(()=>{xr.title="New Recipe | BrewSignal"})});var b=p(c(u),2),f=p(c(b),2),S=c(f);S.__click=d;var z=p(S,2);z.__click=()=>a(t)?.review();var L=c(z);{var q=g=>{var H=Rn();rt(),k(g,H)},Y=g=>{var H=$n();rt(),k(g,H)};B(L,g=>{a(i)?g(q):g(Y,!1)})}o(z);var de=p(z,2);de.__click=()=>a(t)?.save();var Te=c(de);{var be=g=>{var H=Tn();rt(),k(g,H)},Pe=g=>{var H=gr("Save Recipe");k(g,H)};B(Te,g=>{a(s)?g(be):g(Pe,!1)})}o(de),o(f),o(b);var W=p(b,2);{var le=g=>{var H=An(),De=p(c(H),2),N=c(De,!0);o(De),o(H),C(()=>R(N,a(n))),k(g,H)};B(W,g=>{a(n)&&g(le)})}var Ae=p(W,2);{var Je=g=>{var H=Bn();k(g,H)};B(Ae,g=>{a(s)&&g(Je)})}var we=p(Ae,2);yr(zn(we,{onSave:l,onCancel:d}),g=>m(t,g,!0),()=>a(t)),o(u),C(()=>{z.disabled=a(i),de.disabled=a(s)}),k(r,u),Nt()}jt(["click"]);export{Wn as component};
