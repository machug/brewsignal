import{d as Ga,f as v,a as o,s as _,c as js,t as Ja}from"../chunks/BPY3LF1i.js";import{a as Ka,s as n,p as ct,az as Ot,h as e,o as Wa,g as Ya,c as a,A as Xa,u as Lt,ax as Za,d as l,r as t,f as ne,e as s,t as b,n as He}from"../chunks/WzhiZOZ9.js";import{e as vt,i as dt}from"../chunks/DnC7am1E.js";import{i as h}from"../chunks/DTo_ih-i.js";import{h as el}from"../chunks/BJzfFUzm.js";import{s as V,r as B}from"../chunks/D5Ox4mlS.js";import{s as O}from"../chunks/BYYdgBsh.js";import{b as z}from"../chunks/Cw-VE3R0.js";import{i as sl,s as tl,b as ht}from"../chunks/BX-VZZUc.js";import{c as f,f as al,u as Xe}from"../chunks/Dhf-mfqW.js";var ll=v('<div class="loading-state svelte-hj1sc2"><div class="loading-spinner svelte-hj1sc2"></div> <span class="svelte-hj1sc2">Loading system information...</span></div>'),il=v('<span class="ai-chip svelte-hj1sc2"><span class="ai-dot svelte-hj1sc2"></span> <span class="ai-tops svelte-hj1sc2"> </span></span>'),nl=v('<span class="ai-unavailable svelte-hj1sc2">Not detected</span>'),ol=v('<option class="svelte-hj1sc2"> </option>'),rl=v('<select class="mini-select svelte-hj1sc2"><option class="svelte-hj1sc2">3</option><option class="svelte-hj1sc2">5</option><option class="svelte-hj1sc2">10</option><option class="svelte-hj1sc2">15</option><option class="svelte-hj1sc2">20</option></select>'),cl=v('<span class="error-msg svelte-hj1sc2"> </span>'),vl=v('<span class="success-msg svelte-hj1sc2">Saved</span>'),dl=v('<div class="section-content svelte-hj1sc2"><div class="settings-grid svelte-hj1sc2"><div class="setting-group svelte-hj1sc2"><label class="setting-label svelte-hj1sc2">Temperature</label> <div class="toggle-group svelte-hj1sc2"><button type="button">°C</button> <button type="button">°F</button></div></div> <div class="setting-group svelte-hj1sc2"><label class="setting-label svelte-hj1sc2">Gravity</label> <div class="toggle-group triple svelte-hj1sc2"><button type="button">SG</button> <button type="button">°P</button> <button type="button">°Bx</button></div></div> <div class="setting-group svelte-hj1sc2"><label class="setting-label svelte-hj1sc2">Min Signal</label> <div class="input-group svelte-hj1sc2"><input type="number" min="-100" max="0" class="num-input svelte-hj1sc2"/> <span class="input-unit svelte-hj1sc2">dBm</span></div></div> <div class="setting-group svelte-hj1sc2"><label class="setting-label svelte-hj1sc2">Timezone</label> <select class="select-input svelte-hj1sc2"></select></div></div> <div class="settings-divider svelte-hj1sc2"></div> <div class="toggle-settings svelte-hj1sc2"><div class="toggle-setting svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Reading Smoothing</span> <span class="toggle-desc svelte-hj1sc2">Average readings to reduce noise</span></div> <div class="toggle-controls svelte-hj1sc2"><!> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div></div> <div class="toggle-setting svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Identify by MAC</span> <span class="toggle-desc svelte-hj1sc2">Use MAC address instead of broadcast ID</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div></div> <div class="section-actions svelte-hj1sc2"><button type="button" class="save-btn svelte-hj1sc2"> </button> <!> <!></div></div>'),hl=v('<span class="status-pill connected svelte-hj1sc2">Connected</span>'),ul=v('<span class="status-pill disconnected svelte-hj1sc2">Disconnected</span>'),pl=v("<span> </span>"),_l=v('<div class="inline-setting svelte-hj1sc2"><label class="svelte-hj1sc2">Alert when forecast differs by more than</label> <div class="input-group compact svelte-hj1sc2"><input type="number" min="1" max="15" step="0.5" class="num-input svelte-hj1sc2"/> <span class="input-unit svelte-hj1sc2">°C</span></div></div>'),ml=v('<div class="subsection svelte-hj1sc2"><h3 class="svelte-hj1sc2">Weather Alerts</h3> <div class="toggle-setting svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Enable Alerts</span> <span class="toggle-desc svelte-hj1sc2">Notify when forecast may affect fermentation</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div> <!></div>'),fl=v('<div class="control-defaults svelte-hj1sc2"><div class="inline-setting svelte-hj1sc2"><label class="svelte-hj1sc2">Default target</label> <div class="input-group compact svelte-hj1sc2"><input type="number" step="0.5" class="num-input svelte-hj1sc2"/> <span class="input-unit svelte-hj1sc2"> </span></div></div> <div class="inline-setting svelte-hj1sc2"><label class="svelte-hj1sc2">Hysteresis</label> <div class="input-group compact svelte-hj1sc2"><input type="number" class="num-input svelte-hj1sc2"/> <span class="input-unit svelte-hj1sc2"> </span></div></div></div>'),jl=v('<div class="subsection svelte-hj1sc2"><h3 class="svelte-hj1sc2">Temperature Control</h3> <div class="toggle-setting svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Enable Control</span> <span class="toggle-desc svelte-hj1sc2">Automatically manage heaters for batches</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div> <!></div>'),gl=v('<div class="form-grid svelte-hj1sc2"><div class="form-field full svelte-hj1sc2"><label for="ha-url" class="svelte-hj1sc2">Home Assistant URL</label> <input id="ha-url" type="url" placeholder="http://192.168.1.100:8123" class="svelte-hj1sc2"/></div> <div class="form-field full svelte-hj1sc2"><label for="ha-token" class="svelte-hj1sc2">Access Token</label> <input id="ha-token" type="password" placeholder="Long-lived access token" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="ha-ambient-temp" class="svelte-hj1sc2">Ambient Temp Entity</label> <input id="ha-ambient-temp" type="text" placeholder="sensor.xxx_temperature" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="ha-ambient-humidity" class="svelte-hj1sc2">Ambient Humidity</label> <input id="ha-ambient-humidity" type="text" placeholder="sensor.xxx_humidity" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="ha-chamber-temp" class="svelte-hj1sc2">Chamber Temp</label> <input id="ha-chamber-temp" type="text" placeholder="sensor.chamber_temperature" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="ha-chamber-humidity" class="svelte-hj1sc2">Chamber Humidity</label> <input id="ha-chamber-humidity" type="text" placeholder="sensor.chamber_humidity" class="svelte-hj1sc2"/></div> <div class="form-field full svelte-hj1sc2"><label for="ha-weather" class="svelte-hj1sc2">Weather Entity</label> <input id="ha-weather" type="text" placeholder="weather.home" class="svelte-hj1sc2"/></div></div> <div class="inline-actions svelte-hj1sc2"><button type="button" class="test-btn svelte-hj1sc2"> </button> <!></div> <!> <!>',1),bl=v('<span class="error-msg svelte-hj1sc2"> </span>'),yl=v('<span class="success-msg svelte-hj1sc2">Saved</span>'),kl=v('<div class="section-content svelte-hj1sc2"><div class="toggle-setting prominent svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Enable Integration</span> <span class="toggle-desc svelte-hj1sc2">Connect to Home Assistant for environmental data and control</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div> <!> <div class="section-actions svelte-hj1sc2"><button type="button" class="save-btn svelte-hj1sc2"> </button> <!> <!></div></div>'),wl=v('<span class="status-pill enabled svelte-hj1sc2">Enabled</span>'),xl=v('<option class="svelte-hj1sc2"> </option>'),Tl=v('<option class="svelte-hj1sc2"> </option>'),Sl=v('<p class="ai-detected svelte-hj1sc2"> </p>'),Ml=v('<p class="warning svelte-hj1sc2">AI HAT+ not detected. Ensure hardware is installed and drivers loaded.</p>'),Al=v('<div class="info-box hailo svelte-hj1sc2"><h4 class="svelte-hj1sc2">Hailo AI HAT+ Setup</h4> <!> <p class="svelte-hj1sc2">Uses <a href="https://www.raspberrypi.com/documentation/computers/ai.html" target="_blank" rel="noopener" class="svelte-hj1sc2">hailo-ollama</a> for hardware-accelerated inference.</p> <ol class="svelte-hj1sc2"><li class="svelte-hj1sc2">Install Hailo drivers: <code class="svelte-hj1sc2">sudo apt install hailo-all</code></li> <li class="svelte-hj1sc2">Install AI packages: <code class="svelte-hj1sc2">sudo apt install hailo-ai-sw-suite</code></li> <li class="svelte-hj1sc2">Download model zoo from <a href="https://www.raspberrypi.com/documentation/computers/ai.html#model-zoo" target="_blank" rel="noopener" class="svelte-hj1sc2">RPi docs</a></li> <li class="svelte-hj1sc2">Start server: <code class="svelte-hj1sc2">hailo-ollama</code> (runs on port 8000)</li></ol> <p class="hint svelte-hj1sc2">Models like Qwen2 1.5B and Llama 3.2 1B are optimized for Hailo-10H.</p></div> <div class="form-field full svelte-hj1sc2"><label for="ai-url" class="svelte-hj1sc2">Hailo-Ollama URL</label> <input id="ai-url" type="text" placeholder="http://localhost:8000" class="svelte-hj1sc2"/></div>',1),Cl=v('<p class="hint svelte-hj1sc2">For local AI on Pi, select <strong class="svelte-hj1sc2">Hailo AI HAT+</strong> provider instead.</p>'),ql=v(`<p class="svelte-hj1sc2"><strong class="svelte-hj1sc2">Remote Ollama (Recommended)</strong> — Run Ollama on a PC/Mac with GPU for fast responses.</p> <ol class="svelte-hj1sc2"><li class="svelte-hj1sc2">Install from <a href="https://ollama.ai/download" target="_blank" rel="noopener" class="svelte-hj1sc2">ollama.ai</a></li> <li class="svelte-hj1sc2">Run: <code class="svelte-hj1sc2">OLLAMA_HOST=0.0.0.0 ollama serve</code></li> <li class="svelte-hj1sc2">Pull a model: <code class="svelte-hj1sc2">ollama pull llama3:8b</code></li> <li class="svelte-hj1sc2">Enter the remote machine's IP below</li></ol> <!>`,1),Hl=v('<p class="gpu-detected svelte-hj1sc2"><strong class="svelte-hj1sc2">GPU detected:</strong> <!></p> <p class="svelte-hj1sc2">Local Ollama is recommended for this system.</p> <ol class="svelte-hj1sc2"><li class="svelte-hj1sc2">Install from <a href="https://ollama.ai/download" target="_blank" rel="noopener" class="svelte-hj1sc2">ollama.ai</a></li> <li class="svelte-hj1sc2">Pull a model: <code class="svelte-hj1sc2">ollama pull llama3:8b</code></li> <li class="svelte-hj1sc2">Keep the default URL (localhost)</li></ol>',1),Pl=v('<ol class="svelte-hj1sc2"><li class="svelte-hj1sc2">Install from <a href="https://ollama.ai/download" target="_blank" rel="noopener" class="svelte-hj1sc2">ollama.ai</a></li> <li class="svelte-hj1sc2">Pull a model: <code class="svelte-hj1sc2">ollama pull llama3:8b</code></li></ol> <p class="hint svelte-hj1sc2">For remote Ollama, run: <code class="svelte-hj1sc2">OLLAMA_HOST=0.0.0.0 ollama serve</code></p>',1),Il=v('<div class="info-box svelte-hj1sc2"><h4 class="svelte-hj1sc2">Ollama Setup</h4> <!></div> <div class="form-field full svelte-hj1sc2"><label for="ai-url" class="svelte-hj1sc2">Ollama URL</label> <input id="ai-url" type="text" placeholder="http://localhost:11434" class="svelte-hj1sc2"/></div>',1),Bl=v('<span class="field-hint success svelte-hj1sc2">API key detected from environment</span>'),zl=v('<div class="form-field full svelte-hj1sc2"><label for="ai-key" class="svelte-hj1sc2">API Key</label> <input id="ai-key" type="password" class="svelte-hj1sc2"/> <!></div>'),El=v('<span class="test-result success svelte-hj1sc2"> </span>'),Ol=v('<span class="test-result svelte-hj1sc2"> </span>'),Ll=v('<div class="form-grid svelte-hj1sc2"><div class="form-field svelte-hj1sc2"><label for="ai-provider" class="svelte-hj1sc2">Provider</label> <select id="ai-provider" class="svelte-hj1sc2"></select></div> <div class="form-field svelte-hj1sc2"><label for="ai-model" class="svelte-hj1sc2">Model</label> <select id="ai-model" class="svelte-hj1sc2"><option class="svelte-hj1sc2">Default</option><!></select></div></div> <!> <details class="advanced-settings svelte-hj1sc2"><summary class="svelte-hj1sc2">Advanced Settings</summary> <div class="form-grid svelte-hj1sc2"><div class="form-field svelte-hj1sc2"><label for="ai-temp" class="svelte-hj1sc2">Temperature</label> <input id="ai-temp" type="number" min="0" max="2" step="0.1" class="svelte-hj1sc2"/> <span class="field-hint svelte-hj1sc2">Higher = more creative</span></div> <div class="form-field svelte-hj1sc2"><label for="ai-tokens" class="svelte-hj1sc2">Max Tokens</label> <input id="ai-tokens" type="number" min="100" max="8000" step="100" class="svelte-hj1sc2"/></div></div></details> <div class="inline-actions svelte-hj1sc2"><button type="button" class="test-btn svelte-hj1sc2"> </button> <!></div>',1),Fl=v('<span class="error-msg svelte-hj1sc2"> </span>'),Rl=v('<span class="success-msg svelte-hj1sc2">Saved</span>'),Ul=v(`<div class="section-content svelte-hj1sc2"><p class="section-intro svelte-hj1sc2">Get AI-powered help with recipe creation, fermentation troubleshooting, and brewing advice.
							Use a local model for privacy or connect to cloud providers.</p> <div class="toggle-setting prominent svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Enable AI Assistant</span> <span class="toggle-desc svelte-hj1sc2">Activate brewing AI features</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div> <!> <div class="section-actions svelte-hj1sc2"><button type="button" class="save-btn svelte-hj1sc2"> </button> <!> <!></div></div>`),Nl=v('<span class="status-pill enabled svelte-hj1sc2">Enabled</span>'),Dl=v("<span> </span>"),Vl=v('<div class="form-grid svelte-hj1sc2"><div class="form-field svelte-hj1sc2"><label for="mqtt-host" class="svelte-hj1sc2">Broker Host</label> <input id="mqtt-host" type="text" placeholder="192.168.1.100 or localhost" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="mqtt-port" class="svelte-hj1sc2">Port</label> <input id="mqtt-port" type="number" min="1" max="65535" placeholder="1883" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="mqtt-username" class="svelte-hj1sc2">Username</label> <input id="mqtt-username" type="text" placeholder="Optional" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="mqtt-password" class="svelte-hj1sc2">Password</label> <input id="mqtt-password" type="password" placeholder="Optional" class="svelte-hj1sc2"/></div> <div class="form-field full svelte-hj1sc2"><label for="mqtt-prefix" class="svelte-hj1sc2">Topic Prefix</label> <input id="mqtt-prefix" type="text" placeholder="brewsignal" class="svelte-hj1sc2"/> <span class="field-hint svelte-hj1sc2"> </span></div></div> <div class="info-box svelte-hj1sc2"><h4 class="svelte-hj1sc2">Home Assistant Setup</h4> <p class="svelte-hj1sc2">Ensure your Home Assistant has MQTT integration configured (typically via Mosquitto add-on).</p> <p class="svelte-hj1sc2">BrewSignal publishes discovery messages to <code class="svelte-hj1sc2">homeassistant/sensor/...</code> so entities appear automatically.</p> <p class="hint svelte-hj1sc2">Sensors: gravity, temperature, ABV, status, days fermenting. Binary sensors: heater/cooler active.</p></div> <div class="inline-actions svelte-hj1sc2"><button type="button" class="test-btn svelte-hj1sc2"> </button> <!></div>',1),$l=v('<span class="error-msg svelte-hj1sc2"> </span>'),Ql=v('<span class="success-msg svelte-hj1sc2">Saved</span>'),Gl=v(`<div class="section-content svelte-hj1sc2"><p class="section-intro svelte-hj1sc2">Publish batch fermentation data to an MQTT broker for Home Assistant auto-discovery.
							Sensors are created automatically when batches start fermenting.</p> <div class="toggle-setting prominent svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Enable MQTT Publishing</span> <span class="toggle-desc svelte-hj1sc2">Send batch data to MQTT broker</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div> <!> <div class="section-actions svelte-hj1sc2"><button type="button" class="save-btn svelte-hj1sc2"> </button> <!> <!></div></div>`),Jl=v('<span class="storage-badge svelte-hj1sc2"> </span>'),Kl=v('<button type="button" class="danger-btn svelte-hj1sc2"> </button>'),Wl=v('<p class="cleanup-result svelte-hj1sc2"> </p>'),Yl=v('<div class="section-content svelte-hj1sc2"><div class="storage-stats svelte-hj1sc2"><div class="stat svelte-hj1sc2"><span class="stat-value svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Total Readings</span></div> <div class="stat svelte-hj1sc2"><span class="stat-value svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Database Size</span></div></div> <div class="cleanup-section svelte-hj1sc2"><p class="svelte-hj1sc2">Remove old readings to free storage. This action is permanent.</p> <div class="cleanup-controls svelte-hj1sc2"><label class="svelte-hj1sc2">Keep readings from last</label> <div class="input-group compact svelte-hj1sc2"><input type="number" min="1" max="365" class="num-input svelte-hj1sc2"/> <span class="input-unit svelte-hj1sc2">days</span></div> <button type="button" class="secondary-btn svelte-hj1sc2"> </button> <!></div> <!></div></div>'),Xl=v('<div class="section-content svelte-hj1sc2"><p class="warning-text svelte-hj1sc2">These actions affect the entire system. Ensure all work is saved.</p> <div class="power-actions svelte-hj1sc2"><button type="button" class="warning-btn svelte-hj1sc2"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-hj1sc2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" class="svelte-hj1sc2"></path></svg> </button> <button type="button" class="danger-btn large svelte-hj1sc2"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-hj1sc2"><path stroke-linecap="round" stroke-linejoin="round" d="M5.636 5.636a9 9 0 1012.728 0M12 3v9" class="svelte-hj1sc2"></path></svg> </button></div></div>'),Zl=v('<header class="status-banner svelte-hj1sc2"><div class="status-grid svelte-hj1sc2"><div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Hostname</span> <span class="status-value svelte-hj1sc2"> </span></div> <div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Version</span> <span class="status-value svelte-hj1sc2"> </span></div> <div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Uptime</span> <span class="status-value svelte-hj1sc2"> </span></div> <div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">IP Address</span> <span class="status-value svelte-hj1sc2"> </span></div> <div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Readings</span> <span class="status-value svelte-hj1sc2"> </span></div> <div><span class="status-label svelte-hj1sc2">AI Accelerator</span> <span class="status-value svelte-hj1sc2"><!></span></div></div></header> <nav class="quick-links svelte-hj1sc2"><a href="/devices" class="quick-link svelte-hj1sc2"><svg class="icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" class="svelte-hj1sc2"></path></svg> <span class="svelte-hj1sc2">Devices</span></a> <a href="/calibration" class="quick-link svelte-hj1sc2"><svg class="icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-hj1sc2"></path></svg> <span class="svelte-hj1sc2">Calibration</span></a> <a href="/logging" class="quick-link svelte-hj1sc2"><svg class="icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-hj1sc2"></path></svg> <span class="svelte-hj1sc2">Logging</span></a> <a href="/system/maintenance" class="quick-link svelte-hj1sc2"><svg class="icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" class="svelte-hj1sc2"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-hj1sc2"></path></svg> <span class="svelte-hj1sc2">Maintenance</span></a></nav> <div class="settings-container svelte-hj1sc2"><section class="settings-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">Display & Units</h2></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section> <section class="settings-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">Home Assistant</h2> <!></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section> <section class="settings-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">AI Brewing Assistant</h2> <!></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section> <section class="settings-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M8.288 15.038a5.25 5.25 0 017.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 011.06 0z" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">MQTT Publishing</h2> <!></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section> <section class="settings-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">Storage & Cleanup</h2> <!></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section> <section class="settings-section danger-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M5.636 5.636a9 9 0 1012.728 0M12 3v9" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">Power Controls</h2></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section></div>',1),ei=v('<div class="system-page svelte-hj1sc2"><!></div>');function di(Ft,Rt){Ka(Rt,!0);let se=n(null),Se=n(null),Me=n(null),ut=n(ct([])),Ze=n(""),pt=n(!0),U=n(null),Ue=n("C"),Pe=n("sg"),gs=n(-100),ze=n(!1),bs=n(5),Ne=n(!1),ys=n(!1),ks=n(null),ws=n(!1),De=n(30),ye=n(null),ke=n(!1),Ve=n(""),$e=n(""),xs=n(""),Ts=n(""),Ss=n(""),Ms=n(""),es=n(""),As=n(!1),Ee=n(null),_t=n(null),Cs=n(!1),qs=n(null),Hs=n(!1),Qe=n(!1),Us=n(68),Ns=n(1),Ge=n(!1),Ds=n(3),Ae=n(!1),we=n("local"),ss=n(""),Je=n(""),Oe=n(""),ts=n(.7),as=n(2e3),Ps=n(!1),Is=n(null),Bs=n(!1),zs=n(!1),Le=n(null),Vs=n(ct([])),$s=n(ct([])),Qs=n(!1),Ce=n(!1),Ke=n(""),ls=n(1883),is=n(""),ns=n(""),We=n("brewsignal"),Es=n(!1),Os=n(null),Ls=n(!1),Fs=n(!1),Fe=n(null),L=n("display"),Re=Lt(()=>f.config.temp_units==="C"),mt=Lt(()=>e(Re)?"°C":"°F");function Ut(i){return e(Re)?al(i):i}function Ye(i){a(L,e(L)===i?null:i,!0)}async function Nt(){try{const i=await fetch("/api/system/info");i.ok&&a(se,await i.json(),!0)}catch(i){console.error("Failed to load system info:",i)}}async function ft(){try{const i=await fetch("/api/system/storage");i.ok&&a(Se,await i.json(),!0)}catch(i){console.error("Failed to load storage stats:",i)}}async function Dt(){try{const i=await fetch("/api/system/ai-accelerator");i.ok&&a(Me,await i.json(),!0)}catch(i){console.error("Failed to load AI accelerator status:",i)}}async function Vt(){try{const[i,q]=await Promise.all([fetch("/api/system/timezones"),fetch("/api/system/timezone")]);if(i.ok){const oe=await i.json();a(ut,oe.timezones||[],!0)}if(q.ok){const oe=await q.json();a(Ze,oe.timezone||"UTC",!0)}}catch(i){console.error("Failed to load timezones:",i)}}function jt(){a(Ue,f.config.temp_units,!0),a(Pe,f.config.sg_units,!0),a(gs,f.config.min_rssi,!0),a(ze,f.config.smoothing_enabled,!0),a(bs,f.config.smoothing_samples,!0),a(Ne,f.config.id_by_mac,!0),a(ke,f.config.ha_enabled,!0),a(Ve,f.config.ha_url,!0),a($e,f.config.ha_token,!0),a(xs,f.config.ha_ambient_temp_entity_id,!0),a(Ts,f.config.ha_ambient_humidity_entity_id,!0),a(Ss,f.config.ha_chamber_temp_entity_id,!0),a(Ms,f.config.ha_chamber_humidity_entity_id,!0),a(es,f.config.ha_weather_entity_id,!0),a(Qe,f.config.temp_control_enabled,!0),a(Us,Math.round(Ut(f.config.temp_target)*2)/2),a(Ns,f.config.temp_units==="C"?Math.round(f.config.temp_hysteresis*(5/9)*100)/100:f.config.temp_hysteresis,!0),a(Ge,f.config.weather_alerts_enabled,!0),a(Ds,f.config.alert_temp_threshold,!0),a(Ae,f.config.ai_enabled??!1,!0),a(we,f.config.ai_provider??"local",!0),a(ss,f.config.ai_model??"",!0),a(Je,f.config.ai_api_key??"",!0),a(Oe,f.config.ai_base_url??"",!0),a(ts,f.config.ai_temperature??.7,!0),a(as,f.config.ai_max_tokens??2e3,!0),a(Ce,f.config.mqtt_enabled??!1,!0),a(Ke,f.config.mqtt_host??"",!0),a(ls,f.config.mqtt_port??1883,!0),a(is,f.config.mqtt_username??"",!0),a(ns,f.config.mqtt_password??"",!0),a(We,f.config.mqtt_topic_prefix??"brewsignal",!0)}async function $t(){try{const i=await fetch("/api/assistant/providers");i.ok&&a(Vs,await i.json(),!0)}catch(i){console.error("Failed to load AI providers:",i)}}async function Qt(i){try{const q=await fetch(`/api/assistant/models/${i}`);if(q.ok){const oe=await q.json();a($s,oe.models,!0)}}catch(q){console.error("Failed to load AI models:",q),a($s,[],!0)}}async function Gt(){try{const i=await fetch("/api/assistant/status");if(i.ok){const q=await i.json();a(Qs,q.has_env_api_key??!1,!0)}}catch(i){console.error("Failed to load AI status:",i)}}async function Jt(){a(Ps,!0),a(Is,null),a(Bs,!1);try{await Xe({ai_enabled:e(Ae),ai_provider:e(we),ai_model:e(ss),ai_api_key:e(Je),ai_base_url:e(Oe),ai_temperature:e(ts),ai_max_tokens:e(as)}),a(Bs,!0),setTimeout(()=>a(Bs,!1),3e3)}catch(i){a(Is,i instanceof Error?i.message:"Failed to save AI settings",!0)}finally{a(Ps,!1)}}async function Kt(){a(zs,!0),a(Le,null);try{await Xe({ai_enabled:e(Ae),ai_provider:e(we),ai_model:e(ss),ai_api_key:e(Je),ai_base_url:e(Oe),ai_temperature:e(ts),ai_max_tokens:e(as)});const q=await(await fetch("/api/assistant/test",{method:"POST"})).json();a(Le,q,!0)}catch(i){a(Le,{success:!1,error:i instanceof Error?i.message:"Connection test failed"},!0)}finally{a(zs,!1)}}async function Wt(){a(Es,!0),a(Os,null),a(Ls,!1);try{const i=await Xe({mqtt_enabled:e(Ce),mqtt_host:e(Ke),mqtt_port:e(ls),mqtt_username:e(is),mqtt_password:e(ns),mqtt_topic_prefix:e(We)});i.success?(a(Ls,!0),setTimeout(()=>a(Ls,!1),3e3)):a(Os,i.error||"Failed to save settings",!0)}finally{a(Es,!1)}}async function Yt(){a(Fs,!0),a(Fe,null);try{await Xe({mqtt_enabled:e(Ce),mqtt_host:e(Ke),mqtt_port:e(ls),mqtt_username:e(is),mqtt_password:e(ns),mqtt_topic_prefix:e(We)});const i=await fetch("/api/mqtt/test",{method:"POST"});i.ok?a(Fe,await i.json(),!0):a(Fe,{success:!1,message:"Request failed"},!0)}catch{a(Fe,{success:!1,message:"Network error"},!0)}finally{a(Fs,!1)}}Ot(()=>{e(we)&&Qt(e(we))});async function Xt(){a(ys,!0),a(ks,null),a(ws,!1);try{const i=await Xe({temp_units:e(Ue),sg_units:e(Pe),min_rssi:e(gs),smoothing_enabled:e(ze),smoothing_samples:e(bs),id_by_mac:e(Ne)});i.success?(a(ws,!0),setTimeout(()=>a(ws,!1),3e3)):a(ks,i.error||"Failed to save settings",!0)}finally{a(ys,!1)}}async function Zt(){a(Cs,!0),a(qs,null),a(Hs,!1);try{const i=await Xe({ha_enabled:e(ke),ha_url:e(Ve),ha_token:e($e),ha_ambient_temp_entity_id:e(xs),ha_ambient_humidity_entity_id:e(Ts),ha_chamber_temp_entity_id:e(Ss),ha_chamber_humidity_entity_id:e(Ms),ha_weather_entity_id:e(es)});i.success?(a(Hs,!0),setTimeout(()=>a(Hs,!1),3e3),await bt()):a(qs,i.error||"Failed to save settings",!0)}finally{a(Cs,!1)}}async function ea(i){a(U,"timezone");try{(await fetch("/api/system/timezone",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:i})})).ok&&a(Ze,i,!0)}catch(q){console.error("Failed to set timezone:",q)}finally{a(U,null)}}async function sa(){a(U,"cleanup-preview");try{const i=await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(De),confirm:!1})});i.ok&&a(ye,await i.json(),!0)}catch(i){console.error("Failed to preview cleanup:",i)}finally{a(U,null)}}async function ta(){if(!(!e(ye)||e(ye).readings_to_delete===0)&&confirm(`Delete ${e(ye).readings_to_delete.toLocaleString()} readings older than ${e(De)} days?`)){a(U,"cleanup");try{(await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(De),confirm:!0})})).ok&&(a(ye,null),await ft())}catch(i){console.error("Failed to execute cleanup:",i)}finally{a(U,null)}}}async function aa(){if(confirm("Are you sure you want to reboot the system? The UI will be unavailable until restart completes.")){a(U,"reboot");try{await fetch("/api/system/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(i){console.error("Reboot command failed:",i)}finally{a(U,null)}}}async function la(){if(confirm("Are you sure you want to shut down the system? You will need physical access to restart.")){a(U,"shutdown");try{await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(i){console.error("Shutdown command failed:",i)}finally{a(U,null)}}}function ia(i){if(!i)return"Unknown";const q=Math.floor(i/86400),oe=Math.floor(i%86400/3600),os=Math.floor(i%3600/60),qe=[];return q>0&&qe.push(`${q}d`),oe>0&&qe.push(`${oe}h`),os>0&&qe.push(`${os}m`),qe.length>0?qe.join(" "):"< 1m"}function gt(i){return!Number.isFinite(i)||i<0?"0 B":i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(1)} KB`:`${(i/(1024*1024)).toFixed(1)} MB`}function Gs(i){return i.toLocaleString()}async function na(){a(As,!0),a(Ee,null);try{const i=await fetch("/api/ha/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(Ve),token:e($e)})});i.ok?a(Ee,await i.json(),!0):a(Ee,{success:!1,message:"Request failed"},!0)}catch{a(Ee,{success:!1,message:"Network error"},!0)}finally{a(As,!1)}}async function bt(){try{const i=await fetch("/api/ha/status");i.ok&&a(_t,await i.json(),!0)}catch(i){console.error("Failed to load HA status:",i)}}Wa(async()=>{await Promise.all([Nt(),ft(),Dt(),Vt(),bt(),$t(),Gt()]),jt(),a(pt,!1)}),Ot(()=>{f.loaded&&jt()});var Js=ei();el("hj1sc2",i=>{Xa(()=>{Za.title="System | BrewSignal"})});var oa=l(Js);{var ra=i=>{var q=ll();o(i,q)},ca=i=>{var q=Zl(),oe=ne(q),os=l(oe),qe=l(os),yt=s(l(qe),2),va=l(yt,!0);t(yt),t(qe);var Ks=s(qe,2),kt=s(l(Ks),2),da=l(kt);t(kt),t(Ks);var Ws=s(Ks,2),wt=s(l(Ws),2),ha=l(wt,!0);t(wt),t(Ws);var Ys=s(Ws,2),xt=s(l(Ys),2),ua=l(xt,!0);t(xt),t(Ys);var Xs=s(Ys,2),Tt=s(l(Xs),2),pa=l(Tt,!0);t(Tt),t(Xs);var Zs=s(Xs,2);let St;var Mt=s(l(Zs),2),_a=l(Mt);{var ma=c=>{var d=il(),k=s(l(d)),j=s(k),H=l(j);t(j),t(d),b(()=>{_(k,` ${e(Me).device.architecture??""} `),_(H,`${e(Me).device.tops??""} TOPS`)}),o(c,d)},fa=c=>{var d=nl();o(c,d)};h(_a,c=>{e(Me)?.available&&e(Me).device?c(ma):c(fa,!1)})}t(Mt),t(Zs),t(os),t(oe);var At=s(oe,4),et=l(At),rs=l(et);rs.__click=()=>Ye("display");var ja=s(l(rs),2);let Ct;t(rs);var ga=s(rs,2);{var ba=c=>{var d=dl(),k=l(d),j=l(k),H=s(l(j),2),E=l(H);let te;E.__click=()=>a(Ue,"C");var Y=s(E,2);let P;Y.__click=()=>a(Ue,"F"),t(H),t(j);var re=s(j,2),J=s(l(re),2),ae=l(J);let ue;ae.__click=()=>a(Pe,"sg");var K=s(ae,2);let u;K.__click=()=>a(Pe,"plato");var y=s(K,2);let I;y.__click=()=>a(Pe,"brix"),t(J),t(re);var Q=s(re,2),X=s(l(Q),2),x=l(X);B(x),He(2),t(X),t(Q);var S=s(Q,2),M=s(l(S),2);M.__change=r=>ea(r.currentTarget.value),vt(M,21,()=>e(ut),dt,(r,p)=>{var m=ol(),g=l(m,!0);t(m);var T={};b(()=>{_(g,e(p)),T!==(T=e(p))&&(m.value=(m.__value=e(p))??"")}),o(r,m)}),t(M);var ce;sl(M),t(S),t(k);var Z=s(k,4),pe=l(Z),_e=s(l(pe),2),le=l(_e);{var me=r=>{var p=rl(),m=l(p);m.value=m.__value=3;var g=s(m);g.value=g.__value=5;var T=s(g);T.value=T.__value=10;var R=s(T);R.value=R.__value=15;var $=s(R);$.value=$.__value=20,t(p),ht(p,()=>e(bs),N=>a(bs,N)),o(r,p)};h(le,r=>{e(ze)&&r(me)})}var ve=s(le,2);let fe;ve.__click=()=>a(ze,!e(ze)),t(_e),t(pe);var ee=s(pe,2),de=s(l(ee),2);let ie;de.__click=()=>a(Ne,!e(Ne)),t(ee),t(Z);var he=s(Z,2),A=l(he);A.__click=Xt;var xe=l(A,!0);t(A);var Te=s(A,2);{var w=r=>{var p=cl(),m=l(p,!0);t(p),b(()=>_(m,e(ks))),o(r,p)};h(Te,r=>{e(ks)&&r(w)})}var F=s(Te,2);{var C=r=>{var p=vl();o(r,p)};h(F,r=>{e(ws)&&r(C)})}t(he),t(d),b(()=>{te=O(E,1,"toggle-btn svelte-hj1sc2",null,te,{active:e(Ue)==="C"}),P=O(Y,1,"toggle-btn svelte-hj1sc2",null,P,{active:e(Ue)==="F"}),ue=O(ae,1,"toggle-btn svelte-hj1sc2",null,ue,{active:e(Pe)==="sg"}),u=O(K,1,"toggle-btn svelte-hj1sc2",null,u,{active:e(Pe)==="plato"}),I=O(y,1,"toggle-btn svelte-hj1sc2",null,I,{active:e(Pe)==="brix"}),M.disabled=e(U)==="timezone",ce!==(ce=e(Ze))&&(M.value=(M.__value=e(Ze))??"",tl(M,e(Ze))),fe=O(ve,1,"switch svelte-hj1sc2",null,fe,{on:e(ze)}),V(ve,"aria-pressed",e(ze)),ie=O(de,1,"switch svelte-hj1sc2",null,ie,{on:e(Ne)}),V(de,"aria-pressed",e(Ne)),A.disabled=e(ys),_(xe,e(ys)?"Saving...":"Save Changes")}),z(x,()=>e(gs),r=>a(gs,r)),o(c,d)};h(ga,c=>{e(L)==="display"&&c(ba)})}t(et);var st=s(et,2),cs=l(st);cs.__click=()=>Ye("homeassistant");var tt=l(cs),ya=s(l(tt),4);{var ka=c=>{var d=hl();o(c,d)},wa=c=>{var d=js(),k=ne(d);{var j=H=>{var E=ul();o(H,E)};h(k,H=>{e(ke)&&H(j)},!0)}o(c,d)};h(ya,c=>{e(_t)?.connected?c(ka):c(wa,!1)})}t(tt);var xa=s(tt,2);let qt;t(cs);var Ta=s(cs,2);{var Sa=c=>{var d=kl(),k=l(d),j=s(l(k),2);let H;j.__click=()=>a(ke,!e(ke)),t(k);var E=s(k,2);{var te=u=>{var y=gl(),I=ne(y),Q=l(I),X=s(l(Q),2);B(X),t(Q);var x=s(Q,2),S=s(l(x),2);B(S),t(x);var M=s(x,2),ce=s(l(M),2);B(ce),t(M);var Z=s(M,2),pe=s(l(Z),2);B(pe),t(Z);var _e=s(Z,2),le=s(l(_e),2);B(le),t(_e);var me=s(_e,2),ve=s(l(me),2);B(ve),t(me);var fe=s(me,2),ee=s(l(fe),2);B(ee),t(fe),t(I);var de=s(I,2),ie=l(de);ie.__click=na;var he=l(ie,!0);t(ie);var A=s(ie,2);{var xe=r=>{var p=pl();let m;var g=l(p,!0);t(p),b(()=>{m=O(p,1,"test-result svelte-hj1sc2",null,m,{success:e(Ee).success}),_(g,e(Ee).message)}),o(r,p)};h(A,r=>{e(Ee)&&r(xe)})}t(de);var Te=s(de,2);{var w=r=>{var p=ml(),m=s(l(p),2),g=s(l(m),2);let T;g.__click=()=>a(Ge,!e(Ge)),t(m);var R=s(m,2);{var $=N=>{var W=_l(),je=s(l(W),2),G=l(je);B(G),He(2),t(je),t(W),z(G,()=>e(Ds),D=>a(Ds,D)),o(N,W)};h(R,N=>{e(Ge)&&N($)})}t(p),b(()=>{T=O(g,1,"switch svelte-hj1sc2",null,T,{on:e(Ge)}),V(g,"aria-pressed",e(Ge))}),o(r,p)};h(Te,r=>{e(ke)&&e(es)&&r(w)})}var F=s(Te,2);{var C=r=>{var p=jl(),m=s(l(p),2),g=s(l(m),2);let T;g.__click=()=>a(Qe,!e(Qe)),t(m);var R=s(m,2);{var $=N=>{var W=fl(),je=l(W),G=s(l(je),2),D=l(G);B(D);var Ie=s(D,2),ps=l(Ie,!0);t(Ie),t(G),t(je);var Be=s(je,2),ge=s(l(Be),2),be=l(ge);B(be);var _s=s(be,2),Rs=l(_s);t(_s),t(ge),t(Be),t(W),b(()=>{V(D,"min",e(Re)?0:32),V(D,"max",e(Re)?38:100),_(ps,e(mt)),V(be,"min",e(Re)?.3:.5),V(be,"max",e(Re)?5.5:10),V(be,"step",e(Re)?.25:.5),_(Rs,`±${e(mt)??""}`)}),z(D,()=>e(Us),ms=>a(Us,ms)),z(be,()=>e(Ns),ms=>a(Ns,ms)),o(N,W)};h(R,N=>{e(Qe)&&N($)})}t(p),b(()=>{T=O(g,1,"switch svelte-hj1sc2",null,T,{on:e(Qe)}),V(g,"aria-pressed",e(Qe))}),o(r,p)};h(F,r=>{e(ke)&&r(C)})}b(()=>{ie.disabled=e(As)||!e(Ve)||!e($e),_(he,e(As)?"Testing...":"Test Connection")}),z(X,()=>e(Ve),r=>a(Ve,r)),z(S,()=>e($e),r=>a($e,r)),z(ce,()=>e(xs),r=>a(xs,r)),z(pe,()=>e(Ts),r=>a(Ts,r)),z(le,()=>e(Ss),r=>a(Ss,r)),z(ve,()=>e(Ms),r=>a(Ms,r)),z(ee,()=>e(es),r=>a(es,r)),o(u,y)};h(E,u=>{e(ke)&&u(te)})}var Y=s(E,2),P=l(Y);P.__click=Zt;var re=l(P,!0);t(P);var J=s(P,2);{var ae=u=>{var y=bl(),I=l(y,!0);t(y),b(()=>_(I,e(qs))),o(u,y)};h(J,u=>{e(qs)&&u(ae)})}var ue=s(J,2);{var K=u=>{var y=yl();o(u,y)};h(ue,u=>{e(Hs)&&u(K)})}t(Y),t(d),b(()=>{H=O(j,1,"switch svelte-hj1sc2",null,H,{on:e(ke)}),V(j,"aria-pressed",e(ke)),P.disabled=e(Cs),_(re,e(Cs)?"Saving...":"Save HA Settings")}),o(c,d)};h(Ta,c=>{e(L)==="homeassistant"&&c(Sa)})}t(st);var at=s(st,2),vs=l(at);vs.__click=()=>Ye("ai");var lt=l(vs),Ma=s(l(lt),4);{var Aa=c=>{var d=wl();o(c,d)};h(Ma,c=>{e(Ae)&&c(Aa)})}t(lt);var Ca=s(lt,2);let Ht;t(vs);var qa=s(vs,2);{var Ha=c=>{var d=Ul(),k=s(l(d),2),j=s(l(k),2);let H;j.__click=()=>a(Ae,!e(Ae)),t(k);var E=s(k,2);{var te=u=>{var y=Ll(),I=ne(y),Q=l(I),X=s(l(Q),2);vt(X,21,()=>e(Vs),dt,(w,F)=>{var C=xl(),r=l(C,!0);t(C);var p={};b(()=>{_(r,e(F).name),p!==(p=e(F).id)&&(C.value=(C.__value=e(F).id)??"")}),o(w,C)}),t(X),t(Q);var x=s(Q,2),S=s(l(x),2),M=l(S);M.value=M.__value="";var ce=s(M);vt(ce,17,()=>e($s),dt,(w,F)=>{var C=Tl(),r=l(C,!0);t(C);var p={};b(()=>{_(r,e(F).name),p!==(p=e(F).id)&&(C.value=(C.__value=e(F).id)??"")}),o(w,C)}),t(S),t(x),t(I);var Z=s(I,2);{var pe=w=>{var F=Al(),C=ne(F),r=s(l(C),2);{var p=R=>{var $=Sl(),N=l($);t($),b(()=>_(N,`✓ AI HAT+ 2 detected (${e(Me).device?.tops??""} TOPS)`)),o(R,$)},m=R=>{var $=Ml();o(R,$)};h(r,R=>{e(Me)?.available?R(p):R(m,!1)})}He(6),t(C);var g=s(C,2),T=s(l(g),2);B(T),t(g),z(T,()=>e(Oe),R=>a(Oe,R)),o(w,F)},_e=w=>{var F=js(),C=ne(F);{var r=m=>{var g=Il(),T=ne(g),R=s(l(T),2);{var $=G=>{var D=ql(),Ie=s(ne(D),4);{var ps=Be=>{var ge=Cl();o(Be,ge)};h(Ie,Be=>{e(Me)?.available&&Be(ps)})}o(G,D)},N=G=>{var D=js(),Ie=ne(D);{var ps=ge=>{var be=Hl(),_s=ne(be),Rs=s(l(_s)),ms=s(Rs);{var $a=fs=>{var Et=Ja();b(Qa=>_(Et,`(${Qa??""} GB VRAM)`),[()=>(e(se).platform.gpu.vram_mb/1024).toFixed(0)]),o(fs,Et)};h(ms,fs=>{e(se).platform.gpu.vram_mb&&fs($a)})}t(_s),He(4),b(fs=>_(Rs,` ${fs??""} `),[()=>e(se).platform.gpu.name??e(se).platform.gpu.vendor.toUpperCase()]),o(ge,be)},Be=ge=>{var be=Pl();He(2),o(ge,be)};h(Ie,ge=>{e(se)?.platform?.gpu?.vendor==="nvidia"||e(se)?.platform?.gpu?.vendor==="amd"||e(se)?.platform?.gpu?.vendor==="apple"?ge(ps):ge(Be,!1)},!0)}o(G,D)};h(R,G=>{e(se)?.platform?.is_raspberry_pi?G($):G(N,!1)})}t(T);var W=s(T,2),je=s(l(W),2);B(je),t(W),z(je,()=>e(Oe),G=>a(Oe,G)),o(m,g)},p=m=>{var g=js(),T=ne(g);{var R=$=>{var N=zl(),W=s(l(N),2);B(W);var je=s(W,2);{var G=D=>{var Ie=Bl();o(D,Ie)};h(je,D=>{e(Qs)&&!e(Je)&&D(G)})}t(N),b(()=>V(W,"placeholder",e(Qs)?"(using environment variable)":"sk-...")),z(W,()=>e(Je),D=>a(Je,D)),o($,N)};h(T,$=>{e(Vs).find(N=>N.id===e(we))?.requires_api_key&&$(R)},!0)}o(m,g)};h(C,m=>{e(we)==="local"?m(r):m(p,!1)},!0)}o(w,F)};h(Z,w=>{e(we)==="hailo"?w(pe):w(_e,!1)})}var le=s(Z,2),me=s(l(le),2),ve=l(me),fe=s(l(ve),2);B(fe),He(2),t(ve);var ee=s(ve,2),de=s(l(ee),2);B(de),t(ee),t(me),t(le);var ie=s(le,2),he=l(ie);he.__click=Kt;var A=l(he,!0);t(he);var xe=s(he,2);{var Te=w=>{var F=js(),C=ne(F);{var r=m=>{var g=El(),T=l(g);t(g),b(()=>_(T,`Connected! "${e(Le).response??""}"`)),o(m,g)},p=m=>{var g=Ol(),T=l(g,!0);t(g),b(()=>_(T,e(Le).error)),o(m,g)};h(C,m=>{e(Le).success?m(r):m(p,!1)})}o(w,F)};h(xe,w=>{e(Le)&&w(Te)})}t(ie),b(()=>{he.disabled=e(zs),_(A,e(zs)?"Testing...":"Test Connection")}),ht(X,()=>e(we),w=>a(we,w)),ht(S,()=>e(ss),w=>a(ss,w)),z(fe,()=>e(ts),w=>a(ts,w)),z(de,()=>e(as),w=>a(as,w)),o(u,y)};h(E,u=>{e(Ae)&&u(te)})}var Y=s(E,2),P=l(Y);P.__click=Jt;var re=l(P,!0);t(P);var J=s(P,2);{var ae=u=>{var y=Fl(),I=l(y,!0);t(y),b(()=>_(I,e(Is))),o(u,y)};h(J,u=>{e(Is)&&u(ae)})}var ue=s(J,2);{var K=u=>{var y=Rl();o(u,y)};h(ue,u=>{e(Bs)&&u(K)})}t(Y),t(d),b(()=>{H=O(j,1,"switch svelte-hj1sc2",null,H,{on:e(Ae)}),V(j,"aria-pressed",e(Ae)),P.disabled=e(Ps),_(re,e(Ps)?"Saving...":"Save AI Settings")}),o(c,d)};h(qa,c=>{e(L)==="ai"&&c(Ha)})}t(at);var it=s(at,2),ds=l(it);ds.__click=()=>Ye("mqtt");var nt=l(ds),Pa=s(l(nt),4);{var Ia=c=>{var d=Nl();o(c,d)};h(Pa,c=>{e(Ce)&&c(Ia)})}t(nt);var Ba=s(nt,2);let Pt;t(ds);var za=s(ds,2);{var Ea=c=>{var d=Gl(),k=s(l(d),2),j=s(l(k),2);let H;j.__click=()=>a(Ce,!e(Ce)),t(k);var E=s(k,2);{var te=u=>{var y=Vl(),I=ne(y),Q=l(I),X=s(l(Q),2);B(X),t(Q);var x=s(Q,2),S=s(l(x),2);B(S),t(x);var M=s(x,2),ce=s(l(M),2);B(ce),t(M);var Z=s(M,2),pe=s(l(Z),2);B(pe),t(Z);var _e=s(Z,2),le=s(l(_e),2);B(le);var me=s(le,2),ve=l(me);t(me),t(_e),t(I);var fe=s(I,4),ee=l(fe);ee.__click=Yt;var de=l(ee,!0);t(ee);var ie=s(ee,2);{var he=A=>{var xe=Dl();let Te;var w=l(xe,!0);t(xe),b(()=>{Te=O(xe,1,"test-result svelte-hj1sc2",null,Te,{success:e(Fe).success}),_(w,e(Fe).message)}),o(A,xe)};h(ie,A=>{e(Fe)&&A(he)})}t(fe),b(()=>{_(ve,`Topics: ${(e(We)||"brewsignal")??""}/batch/<id>/gravity, temperature, etc.`),ee.disabled=e(Fs)||!e(Ke),_(de,e(Fs)?"Testing...":"Test Connection")}),z(X,()=>e(Ke),A=>a(Ke,A)),z(S,()=>e(ls),A=>a(ls,A)),z(ce,()=>e(is),A=>a(is,A)),z(pe,()=>e(ns),A=>a(ns,A)),z(le,()=>e(We),A=>a(We,A)),o(u,y)};h(E,u=>{e(Ce)&&u(te)})}var Y=s(E,2),P=l(Y);P.__click=Wt;var re=l(P,!0);t(P);var J=s(P,2);{var ae=u=>{var y=$l(),I=l(y,!0);t(y),b(()=>_(I,e(Os))),o(u,y)};h(J,u=>{e(Os)&&u(ae)})}var ue=s(J,2);{var K=u=>{var y=Ql();o(u,y)};h(ue,u=>{e(Ls)&&u(K)})}t(Y),t(d),b(()=>{H=O(j,1,"switch svelte-hj1sc2",null,H,{on:e(Ce)}),V(j,"aria-pressed",e(Ce)),P.disabled=e(Es),_(re,e(Es)?"Saving...":"Save MQTT Settings")}),o(c,d)};h(za,c=>{e(L)==="mqtt"&&c(Ea)})}t(it);var ot=s(it,2),hs=l(ot);hs.__click=()=>Ye("storage");var rt=l(hs),Oa=s(l(rt),4);{var La=c=>{var d=Jl(),k=l(d,!0);t(d),b(j=>_(k,j),[()=>gt(e(Se).estimated_size_bytes)]),o(c,d)};h(Oa,c=>{e(Se)&&c(La)})}t(rt);var Fa=s(rt,2);let It;t(hs);var Ra=s(hs,2);{var Ua=c=>{var d=Yl(),k=l(d),j=l(k),H=l(j),E=l(H,!0);t(H),He(2),t(j);var te=s(j,2),Y=l(te),P=l(Y,!0);t(Y),He(2),t(te),t(k);var re=s(k,2),J=s(l(re),2),ae=s(l(J),2),ue=l(ae);B(ue),He(2),t(ae);var K=s(ae,2);K.__click=sa;var u=l(K,!0);t(K);var y=s(K,2);{var I=x=>{var S=Kl();S.__click=ta;var M=l(S,!0);t(S),b(ce=>{S.disabled=e(U)!==null,_(M,ce)},[()=>e(U)==="cleanup"?"Deleting...":`Delete ${Gs(e(ye).readings_to_delete)}`]),o(x,S)};h(y,x=>{e(ye)&&e(ye).readings_to_delete>0&&x(I)})}t(J);var Q=s(J,2);{var X=x=>{var S=Wl(),M=l(S);t(S),b(()=>_(M,`No readings older than ${e(De)??""} days.`)),o(x,S)};h(Q,x=>{e(ye)&&e(ye).readings_to_delete===0&&x(X)})}t(re),t(d),b((x,S)=>{_(E,x),_(P,S),K.disabled=e(U)!==null,_(u,e(U)==="cleanup-preview"?"Checking...":"Preview")},[()=>e(Se)?Gs(e(Se).total_readings):"—",()=>e(Se)?gt(e(Se).estimated_size_bytes):"—"]),z(ue,()=>e(De),x=>a(De,x)),o(c,d)};h(Ra,c=>{e(L)==="storage"&&c(Ua)})}t(ot);var Bt=s(ot,2),us=l(Bt);us.__click=()=>Ye("power");var Na=s(l(us),2);let zt;t(us);var Da=s(us,2);{var Va=c=>{var d=Xl(),k=s(l(d),2),j=l(k);j.__click=aa;var H=s(l(j));t(j);var E=s(j,2);E.__click=la;var te=s(l(E));t(E),t(k),t(d),b(()=>{j.disabled=e(U)!==null,_(H,` ${e(U)==="reboot"?"Rebooting...":"Reboot"}`),E.disabled=e(U)!==null,_(te,` ${e(U)==="shutdown"?"Shutting down...":"Shutdown"}`)}),o(c,d)};h(Da,c=>{e(L)==="power"&&c(Va)})}t(Bt),t(At),b((c,d)=>{_(va,e(se)?.hostname??"Unknown"),_(da,`v${e(se)?.version??"?"??""}`),_(ha,c),_(ua,e(se)?.ip_addresses?.[0]??"Unknown"),_(pa,d),St=O(Zs,1,"status-item ai-status svelte-hj1sc2",null,St,{active:e(Me)?.available}),V(rs,"aria-expanded",e(L)==="display"),Ct=O(ja,0,"chevron svelte-hj1sc2",null,Ct,{rotated:e(L)==="display"}),V(cs,"aria-expanded",e(L)==="homeassistant"),qt=O(xa,0,"chevron svelte-hj1sc2",null,qt,{rotated:e(L)==="homeassistant"}),V(vs,"aria-expanded",e(L)==="ai"),Ht=O(Ca,0,"chevron svelte-hj1sc2",null,Ht,{rotated:e(L)==="ai"}),V(ds,"aria-expanded",e(L)==="mqtt"),Pt=O(Ba,0,"chevron svelte-hj1sc2",null,Pt,{rotated:e(L)==="mqtt"}),V(hs,"aria-expanded",e(L)==="storage"),It=O(Fa,0,"chevron svelte-hj1sc2",null,It,{rotated:e(L)==="storage"}),V(us,"aria-expanded",e(L)==="power"),zt=O(Na,0,"chevron svelte-hj1sc2",null,zt,{rotated:e(L)==="power"})},[()=>ia(e(se)?.uptime_seconds??null),()=>e(Se)?Gs(e(Se).total_readings):"—"]),o(i,q)};h(oa,i=>{e(pt)?i(ra):i(ca,!1)})}t(Js),o(Ft,Js),Ya()}Ga(["click","change"]);export{di as component};
