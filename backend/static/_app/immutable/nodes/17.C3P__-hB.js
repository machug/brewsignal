import{d as Za,f as d,a as o,s as j,t as Ce,h as Lt,c as Bt}from"../chunks/Bkky6kvZ.js";import{a as $a,s as c,p as Ns,az as Dt,h as e,o as ei,g as si,c as a,A as ti,e as s,d as i,u as Vs,ax as ai,r as t,n as H,t as x,f as ge}from"../chunks/813s5maz.js";import{e as Js,i as Gs}from"../chunks/j9QCVC2i.js";import{i as u}from"../chunks/Bf7HnLem.js";import{h as ii}from"../chunks/BgIwEmqo.js";import{r as P,s as Y}from"../chunks/UKAZQVVw.js";import{s as J}from"../chunks/LBYG0Yba.js";import{b as U}from"../chunks/Bjks-vZK.js";import{i as ni,s as li,b as Ks}from"../chunks/D4jp30Ch.js";import{c as b,f as ri,u as Ae,a as oi}from"../chunks/CbPjToI1.js";var ci=d('<div class="loading-state svelte-hj1sc2"><div class="loading-spinner svelte-hj1sc2"></div> <span class="svelte-hj1sc2">Loading system information...</span></div>'),vi=d('<div class="info-grid svelte-hj1sc2"><div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Hostname</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Version</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Uptime</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">IP Address</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div></div>'),di=d('<p class="text-muted svelte-hj1sc2">Unable to load system information</p>'),pi=d('<div class="setting-row sub-setting svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Smoothing Samples</span> <span class="setting-description svelte-hj1sc2">Number of readings to average</span></div> <select class="select-input-sm svelte-hj1sc2"><option class="svelte-hj1sc2">3</option><option class="svelte-hj1sc2">5</option><option class="svelte-hj1sc2">10</option><option class="svelte-hj1sc2">15</option><option class="svelte-hj1sc2">20</option></select></div>'),hi=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),ui=d('<p class="config-error svelte-hj1sc2"> </p>'),_i=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),fi=d('<option class="svelte-hj1sc2"> </option>'),gi=d('<div class="loading-spinner-small svelte-hj1sc2"></div>'),mi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Connection Status</span></div> <span> </span></div>'),ji=d("<span> </span>"),bi=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),yi=d('<p class="config-error svelte-hj1sc2"> </p>'),wi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),ki=d('<!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Home Assistant URL</span> <span class="setting-description svelte-hj1sc2">e.g., http://192.168.1.100:8123</span></div> <input type="url" placeholder="http://homeassistant.local:8123" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Access Token</span> <span class="setting-description svelte-hj1sc2">Long-lived access token from HA profile</span></div> <input type="password" placeholder="Enter token..." class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Test Connection</span></div> <div class="test-connection svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Temp Entity</span> <span class="setting-description svelte-hj1sc2">e.g., sensor.fermenter_room_temperature</span></div> <input type="text" placeholder="sensor.xxx_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Optional humidity sensor</span></div> <input type="text" placeholder="sensor.xxx_humidity" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Weather Entity</span> <span class="setting-description svelte-hj1sc2">For forecast display, e.g., weather.home</span></div> <input type="text" placeholder="weather.home" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Chamber Temperature Entity</span> <span class="setting-description svelte-hj1sc2">Temperature sensor inside fermentation chamber</span></div> <input type="text" placeholder="sensor.chamber_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Chamber Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Humidity sensor inside fermentation chamber</span></div> <input type="text" placeholder="sensor.chamber_humidity" class="input-field svelte-hj1sc2"/></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>',1),xi=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Si=d('<p class="config-error svelte-hj1sc2"> </p>'),Ti=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Ci=d(`<p class="section-note svelte-hj1sc2">Configure heater switches per batch. These are the default settings used when a batch doesn't specify its own.</p> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Default Target Temperature</span> <span class="setting-description svelte-hj1sc2"> </span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" step="0.5" class="input-field input-number svelte-hj1sc2"/> <span class="unit svelte-hj1sc2"> </span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Default Hysteresis</span> <span class="setting-description svelte-hj1sc2"> </span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" class="input-field input-number svelte-hj1sc2"/> <span class="unit svelte-hj1sc2"> </span></div></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>`,1),Ai=d('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Temperature Control</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Temperature Control</span> <span class="setting-description svelte-hj1sc2">Automatically control heaters for batches</span></div> <button type="button" aria-label="Toggle temperature control"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div>'),Mi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Alert Threshold</span> <span class="setting-description svelte-hj1sc2">Alert when forecast differs from target by this amount (°C)</span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" min="1" max="15" step="0.5" class="input-field-sm svelte-hj1sc2"/> <span class="unit svelte-hj1sc2">°C</span></div></div> <p class="setting-hint mt-2 svelte-hj1sc2">Alerts are generated when the forecast high or low temperatures differ from your target fermentation temperature by more than the threshold.</p>',1),Ii=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Ei=d('<p class="config-error svelte-hj1sc2"> </p>'),zi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Fi=d('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Weather Alerts</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Weather Alerts</span> <span class="setting-description svelte-hj1sc2">Get alerts when forecast temps may affect fermentation</span></div> <button type="button" aria-label="Toggle weather alerts"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div>'),Hi=d('<option class="svelte-hj1sc2"> </option>'),Pi=d(`<div class="ollama-setup-guide svelte-hj1sc2"><h4 class="setup-guide-title svelte-hj1sc2">Setup Ollama (3 steps)</h4> <ol class="setup-steps svelte-hj1sc2"><li class="svelte-hj1sc2"><strong class="svelte-hj1sc2">Install Ollama</strong> <p class="svelte-hj1sc2">Download and install from <a href="https://ollama.ai/download" target="_blank" rel="noopener" class="svelte-hj1sc2">ollama.ai/download</a></p> <code class="setup-code svelte-hj1sc2">curl -fsSL https://ollama.ai/install.sh | sh</code></li> <li class="svelte-hj1sc2"><strong class="svelte-hj1sc2">Pull a model</strong> <p class="svelte-hj1sc2">Download a model (phi3:mini recommended for Pi)</p> <code class="setup-code svelte-hj1sc2">ollama pull phi3:mini</code></li> <li class="svelte-hj1sc2"><strong class="svelte-hj1sc2">Verify it's running</strong> <p class="svelte-hj1sc2">Ollama runs on port 11434 by default</p> <code class="setup-code svelte-hj1sc2">ollama list</code></li></ol> <p class="setup-note svelte-hj1sc2">Running Ollama on a different machine? Update the URL below to point to that server (e.g., http://192.168.1.100:11434)</p></div>`),Ui=d('<a target="_blank" rel="noopener" class="text-amber-400 hover:underline ml-1 svelte-hj1sc2">Get API key →</a>'),Ri=d('<p class="setting-hint mb-3 svelte-hj1sc2"> <!></p>'),Oi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">API Key</span> <span class="setting-description svelte-hj1sc2"> </span></div> <input type="password" placeholder="sk-..." class="input-field svelte-hj1sc2"/></div>'),Bi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ollama URL</span> <span class="setting-description svelte-hj1sc2">URL of your Ollama server</span></div> <input type="text" placeholder="http://localhost:11434" class="input-field svelte-hj1sc2"/></div>'),Di=d('<option class="svelte-hj1sc2"> </option>'),Li=d('<p class="setting-hint mb-3 svelte-hj1sc2"> </p>'),Ni=d('<span class="loading-dot svelte-hj1sc2"></span> Testing...',1),Vi=d('<p class="config-success mt-2 svelte-hj1sc2"> </p>'),Ji=d('<p class="config-error mt-2 svelte-hj1sc2"> </p>'),Gi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Provider</span> <span class="setting-description svelte-hj1sc2">Choose where to run the AI model</span></div> <select class="input-field input-select svelte-hj1sc2"></select></div> <!> <!> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Model</span> <span class="setting-description svelte-hj1sc2">AI model to use</span></div> <select class="input-field input-select svelte-hj1sc2"><option class="svelte-hj1sc2">Default</option><!></select></div> <!> <details class="mt-4 svelte-hj1sc2"><summary class="cursor-pointer text-zinc-400 hover:text-zinc-200 svelte-hj1sc2">Advanced Settings</summary> <div class="mt-3 space-y-3 svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature</span> <span class="setting-description svelte-hj1sc2">Higher = more creative, lower = more focused</span></div> <input type="number" min="0" max="2" step="0.1" class="input-field input-number svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Max Tokens</span> <span class="setting-description svelte-hj1sc2">Maximum response length</span></div> <input type="number" min="100" max="8000" step="100" class="input-field input-number svelte-hj1sc2"/></div></div></details> <div class="mt-4 svelte-hj1sc2"><button type="button" class="btn-secondary svelte-hj1sc2"><!></button> <!></div>',1),Ki=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Wi=d('<p class="config-error svelte-hj1sc2"> </p>'),qi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Yi=d('<div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Total Readings</span></div> <div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Estimated Size</span></div>',1),Qi=d('<p class="text-muted svelte-hj1sc2">Unable to load storage stats</p>'),Xi=d('<button type="button" class="btn-danger-sm svelte-hj1sc2"> </button>'),Zi=d('<p class="cleanup-message svelte-hj1sc2"> </p>'),$i=d('<span class="loading-dot svelte-hj1sc2"></span> Rebooting...',1),en=Lt('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" class="svelte-hj1sc2"></path></svg> Reboot System',1),sn=d('<span class="loading-dot svelte-hj1sc2"></span> Shutting down...',1),tn=Lt('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" class="svelte-hj1sc2"></path></svg> Shutdown System',1),an=d(`<div class="grid gap-6 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">System Information</h2></div> <div class="card-body svelte-hj1sc2"><!></div></div> <div class="grid gap-6 md:grid-cols-2 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Application Settings</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature Units</span> <span class="setting-description svelte-hj1sc2">Display temperature in Celsius or Fahrenheit</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">°C</button> <button type="button">°F</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Gravity Units</span> <span class="setting-description svelte-hj1sc2">Display gravity as SG, Plato, or Brix</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">SG</button> <button type="button">°P</button> <button type="button">°Bx</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Minimum RSSI</span> <span class="setting-description svelte-hj1sc2">Ignore readings below this signal strength</span></div> <div class="rssi-input svelte-hj1sc2"><input type="number" min="-100" max="0" class="input-field-sm svelte-hj1sc2"/> <span class="input-suffix svelte-hj1sc2">dBm</span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Reading Smoothing</span> <span class="setting-description svelte-hj1sc2">Average multiple readings to reduce noise</span></div> <button type="button" aria-label="Toggle reading smoothing"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Identify by MAC</span> <span class="setting-description svelte-hj1sc2">Use MAC address instead of broadcast ID</span></div> <button type="button" aria-label="Toggle identify by MAC address"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Timezone</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description svelte-hj1sc2">Current timezone: <span class="font-mono text-[var(--accent)] svelte-hj1sc2"> </span></p> <div class="timezone-selector svelte-hj1sc2"><select class="select-input svelte-hj1sc2"></select> <!></div></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Home Assistant</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Integration</span> <span class="setting-description svelte-hj1sc2">Connect to Home Assistant for ambient temp and control</span></div> <button type="button" aria-label="Enable Home Assistant integration"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div> <!> <!> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">AI Brewing Assistant</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description mb-4 svelte-hj1sc2">Enable an AI assistant to help with recipe creation, fermentation troubleshooting, and brewing advice.
						Use a local model (Ollama) for free and private operation, or connect to cloud providers.</p> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable AI Assistant</span> <span class="setting-description svelte-hj1sc2">Turn on AI-powered brewing features</span></div> <button type="button" aria-label="Toggle AI assistant"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Storage & Data Cleanup</h2></div> <div class="card-body svelte-hj1sc2"><div class="storage-grid svelte-hj1sc2"><div class="storage-stats svelte-hj1sc2"><!></div> <div class="cleanup-section svelte-hj1sc2"><p class="section-description mb-3 svelte-hj1sc2">Remove old readings to free up storage. Readings older than the specified days will be permanently deleted.</p> <div class="cleanup-controls svelte-hj1sc2"><div class="cleanup-input-group svelte-hj1sc2"><label for="retention-days" class="svelte-hj1sc2">Keep readings from last</label> <input id="retention-days" type="number" min="1" max="365" class="input-field-sm svelte-hj1sc2"/> <span class="svelte-hj1sc2">days</span></div> <div class="cleanup-actions svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <!></div></div></div></div> <div class="card danger-zone svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Power Controls</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description danger-text svelte-hj1sc2">These actions will affect the entire system. Make sure you have saved any pending work.</p> <div class="power-buttons svelte-hj1sc2"><button type="button" class="btn-warning svelte-hj1sc2"><!></button> <button type="button" class="btn-danger svelte-hj1sc2"><!></button></div></div></div></div>`),nn=d('<div class="page-container svelte-hj1sc2"><div class="page-header svelte-hj1sc2"><h1 class="page-title svelte-hj1sc2">System</h1> <p class="page-description svelte-hj1sc2">System settings, device management, and power controls</p> <div class="header-actions svelte-hj1sc2"><a href="/devices" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" class="svelte-hj1sc2"></path></svg> Devices</a> <a href="/calibration" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-hj1sc2"></path></svg> Calibration</a> <a href="/logging" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-hj1sc2"></path></svg> Logging</a> <a href="/system/maintenance" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" class="svelte-hj1sc2"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-hj1sc2"></path></svg> Data Maintenance</a></div></div> <!></div>');function fn(Nt,Vt){$a(Vt,!0);let ce=c(null),Ve=c(null),Ws=c(Ns([])),me=c(""),qs=c(!0),M=c(null),je=c("C"),re=c("sg"),Je=c(-100),ve=c(!1),Ge=c(5),be=c(!1),Ke=c(!1),We=c(null),qe=c(!1),ye=c(30),Z=c(null),te=c(!1),we=c(""),ke=c(""),Ye=c(""),Qe=c(""),Xe=c(""),Ze=c(""),Me=c(""),$e=c(!1),de=c(null),es=c(null),ss=c(!1),ts=c(null),as=c(!1),pe=c(!1),is=c(68),Ie=c(1),ns=c(!1),ls=c(null),rs=c(!1),he=c(!1),os=c(3),cs=c(!1),vs=c(null),ds=c(!1),oe=c(!1),L=c("local"),ue=c(""),Ee=c(""),ze=c(""),Fe=c(.7),He=c(2e3),ps=c(!1),hs=c(null),us=c(!1),_s=c(!1),_e=c(null),xe=c(Ns([])),Pe=c(Ns([])),ae=Vs(()=>b.config.temp_units==="C"),fs=Vs(()=>e(ae)?"°C":"°F");function Jt(l){return e(ae)?oi(l):l}function Gt(l){return e(ae)?ri(l):l}async function Kt(){try{const l=await fetch("/api/system/info");l.ok&&a(ce,await l.json(),!0)}catch(l){console.error("Failed to load system info:",l)}}async function Ys(){try{const l=await fetch("/api/system/storage");l.ok&&a(Ve,await l.json(),!0)}catch(l){console.error("Failed to load storage stats:",l)}}async function Wt(){try{const[l,T]=await Promise.all([fetch("/api/system/timezones"),fetch("/api/system/timezone")]);if(l.ok){const R=await l.json();a(Ws,R.timezones||[],!0)}if(T.ok){const R=await T.json();a(me,R.timezone||"UTC",!0)}}catch(l){console.error("Failed to load timezones:",l)}}function Qs(){a(je,b.config.temp_units,!0),a(re,b.config.sg_units,!0),a(Je,b.config.min_rssi,!0),a(ve,b.config.smoothing_enabled,!0),a(Ge,b.config.smoothing_samples,!0),a(be,b.config.id_by_mac,!0),a(te,b.config.ha_enabled,!0),a(we,b.config.ha_url,!0),a(ke,b.config.ha_token,!0),a(Ye,b.config.ha_ambient_temp_entity_id,!0),a(Qe,b.config.ha_ambient_humidity_entity_id,!0),a(Xe,b.config.ha_chamber_temp_entity_id,!0),a(Ze,b.config.ha_chamber_humidity_entity_id,!0),a(Me,b.config.ha_weather_entity_id,!0),a(pe,b.config.temp_control_enabled,!0),a(is,Math.round(Gt(b.config.temp_target)*2)/2),a(Ie,b.config.temp_units==="C"?Math.round(b.config.temp_hysteresis*(5/9)*100)/100:b.config.temp_hysteresis,!0),a(he,b.config.weather_alerts_enabled,!0),a(os,b.config.alert_temp_threshold,!0),a(oe,b.config.ai_enabled??!1,!0),a(L,b.config.ai_provider??"local",!0),a(ue,b.config.ai_model??"",!0),a(Ee,b.config.ai_api_key??"",!0),a(ze,b.config.ai_base_url??"",!0),a(Fe,b.config.ai_temperature??.7,!0),a(He,b.config.ai_max_tokens??2e3,!0)}async function qt(){try{const l=await fetch("/api/assistant/providers");l.ok&&a(xe,await l.json(),!0)}catch(l){console.error("Failed to load AI providers:",l)}}async function Yt(l){try{const T=await fetch(`/api/assistant/models/${l}`);if(T.ok){const R=await T.json();a(Pe,R.models,!0)}}catch(T){console.error("Failed to load AI models:",T),a(Pe,[],!0)}}async function Qt(){a(ps,!0),a(hs,null),a(us,!1);try{await Ae({ai_enabled:e(oe),ai_provider:e(L),ai_model:e(ue),ai_api_key:e(Ee),ai_base_url:e(ze),ai_temperature:e(Fe),ai_max_tokens:e(He)}),a(us,!0),setTimeout(()=>a(us,!1),3e3)}catch(l){a(hs,l instanceof Error?l.message:"Failed to save AI settings",!0)}finally{a(ps,!1)}}async function Xt(){a(_s,!0),a(_e,null);try{await Ae({ai_enabled:e(oe),ai_provider:e(L),ai_model:e(ue),ai_api_key:e(Ee),ai_base_url:e(ze),ai_temperature:e(Fe),ai_max_tokens:e(He)});const T=await(await fetch("/api/assistant/test",{method:"POST"})).json();a(_e,T,!0)}catch(l){a(_e,{success:!1,error:l instanceof Error?l.message:"Connection test failed"},!0)}finally{a(_s,!1)}}Dt(()=>{e(L)&&Yt(e(L))});async function Zt(){a(Ke,!0),a(We,null),a(qe,!1);try{const l=await Ae({temp_units:e(je),sg_units:e(re),min_rssi:e(Je),smoothing_enabled:e(ve),smoothing_samples:e(Ge),id_by_mac:e(be)});l.success?(a(qe,!0),setTimeout(()=>a(qe,!1),3e3)):a(We,l.error||"Failed to save settings",!0)}finally{a(Ke,!1)}}async function $t(){a(ss,!0),a(ts,null),a(as,!1);try{const l=await Ae({ha_enabled:e(te),ha_url:e(we),ha_token:e(ke),ha_ambient_temp_entity_id:e(Ye),ha_ambient_humidity_entity_id:e(Qe),ha_chamber_temp_entity_id:e(Xe),ha_chamber_humidity_entity_id:e(Ze),ha_weather_entity_id:e(Me)});l.success?(a(as,!0),setTimeout(()=>a(as,!1),3e3),await Zs()):a(ts,l.error||"Failed to save settings",!0)}finally{a(ss,!1)}}async function ea(){a(ns,!0),a(ls,null),a(rs,!1);try{const l=Jt(e(is)),T=e(ae)?e(Ie)*(9/5):e(Ie),R=await Ae({temp_control_enabled:e(pe),temp_target:l,temp_hysteresis:T});R.success?(a(rs,!0),setTimeout(()=>a(rs,!1),3e3)):a(ls,R.error||"Failed to save settings",!0)}finally{a(ns,!1)}}async function sa(){a(cs,!0),a(vs,null),a(ds,!1);try{const l=await Ae({weather_alerts_enabled:e(he),alert_temp_threshold:e(os)});l.success?(a(ds,!0),setTimeout(()=>a(ds,!1),3e3)):a(vs,l.error||"Failed to save settings",!0)}finally{a(cs,!1)}}async function ta(l){a(M,"timezone");try{(await fetch("/api/system/timezone",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:l})})).ok&&a(me,l,!0)}catch(T){console.error("Failed to set timezone:",T)}finally{a(M,null)}}async function aa(){a(M,"cleanup-preview");try{const l=await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(ye),confirm:!1})});l.ok&&a(Z,await l.json(),!0)}catch(l){console.error("Failed to preview cleanup:",l)}finally{a(M,null)}}async function ia(){if(!(!e(Z)||e(Z).readings_to_delete===0)&&confirm(`Delete ${e(Z).readings_to_delete.toLocaleString()} readings older than ${e(ye)} days?`)){a(M,"cleanup");try{(await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(ye),confirm:!0})})).ok&&(a(Z,null),await Ys())}catch(l){console.error("Failed to execute cleanup:",l)}finally{a(M,null)}}}async function na(){if(confirm("Are you sure you want to reboot the system? The UI will be unavailable until restart completes.")){a(M,"reboot");try{await fetch("/api/system/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(l){console.error("Reboot command failed:",l)}finally{a(M,null)}}}async function la(){if(confirm("Are you sure you want to shut down the system? You will need physical access to restart.")){a(M,"shutdown");try{await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(l){console.error("Shutdown command failed:",l)}finally{a(M,null)}}}function ra(l){if(!l)return"Unknown";const T=Math.floor(l/86400),R=Math.floor(l%86400/3600),Ue=Math.floor(l%3600/60),fe=[];return T>0&&fe.push(`${T}d`),R>0&&fe.push(`${R}h`),Ue>0&&fe.push(`${Ue}m`),fe.length>0?fe.join(" "):"< 1m"}function oa(l){return!Number.isFinite(l)||l<0?"0 B":l<1024?`${l} B`:l<1024*1024?`${(l/1024).toFixed(1)} KB`:`${(l/(1024*1024)).toFixed(1)} MB`}function Xs(l){return l.toLocaleString()}async function ca(){a($e,!0),a(de,null);try{const l=await fetch("/api/ha/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(we),token:e(ke)})});l.ok?a(de,await l.json(),!0):a(de,{success:!1,message:"Request failed"},!0)}catch{a(de,{success:!1,message:"Network error"},!0)}finally{a($e,!1)}}async function Zs(){try{const l=await fetch("/api/ha/status");l.ok&&a(es,await l.json(),!0)}catch(l){console.error("Failed to load HA status:",l)}}ei(async()=>{await Promise.all([Kt(),Ys(),Wt(),Zs(),qt()]),Qs(),a(qs,!1)}),Dt(()=>{b.loaded&&Qs()});var ms=nn();ii("hj1sc2",l=>{ti(()=>{ai.title="System | BrewSignal"})});var va=s(i(ms),2);{var da=l=>{var T=ci();o(l,T)},pa=l=>{var T=an(),R=i(T),Ue=s(i(R),2),fe=i(Ue);{var ha=n=>{var r=vi(),f=i(r),w=s(i(f),2),S=i(w,!0);t(w),t(f);var A=s(f,2),I=s(i(A),2),F=i(I);t(I),t(A);var E=s(A,2),z=s(i(E),2),O=i(z,!0);t(z),t(E);var D=s(E,2),N=s(i(D),2),G=i(N,!0);t(N),t(D),t(r),x(K=>{j(S,e(ce).hostname),j(F,`v${e(ce).version??""}`),j(O,K),j(G,e(ce).ip_addresses.length>0?e(ce).ip_addresses[0]:"Unknown")},[()=>ra(e(ce).uptime_seconds)]),o(n,r)},ua=n=>{var r=di();o(n,r)};u(fe,n=>{e(ce)?n(ha):n(ua,!1)})}t(Ue),t(R);var js=s(R,2),bs=i(js),$s=s(i(bs),2),ys=i($s),et=s(i(ys),2),ws=i(et);let st;ws.__click=()=>a(je,"C");var tt=s(ws,2);let at;tt.__click=()=>a(je,"F"),t(et),t(ys);var ks=s(ys,2),it=s(i(ks),2),xs=i(it);let nt;xs.__click=()=>a(re,"sg");var Ss=s(xs,2);let lt;Ss.__click=()=>a(re,"plato");var rt=s(Ss,2);let ot;rt.__click=()=>a(re,"brix"),t(it),t(ks);var Ts=s(ks,2),ct=s(i(Ts),2),vt=i(ct);P(vt),H(2),t(ct),t(Ts);var Cs=s(Ts,2),As=s(i(Cs),2);let dt;As.__click=()=>a(ve,!e(ve)),t(Cs);var pt=s(Cs,2);{var _a=n=>{var r=pi(),f=s(i(r),2),w=i(f);w.value=w.__value=3;var S=s(w);S.value=S.__value=5;var A=s(S);A.value=A.__value=10;var I=s(A);I.value=I.__value=15;var F=s(I);F.value=F.__value=20,t(f),t(r),Ks(f,()=>e(Ge),E=>a(Ge,E)),o(n,r)};u(pt,n=>{e(ve)&&n(_a)})}var Ms=s(pt,2),Is=s(i(Ms),2);let ht;Is.__click=()=>a(be,!e(be)),t(Ms);var ut=s(Ms,2),Re=i(ut);Re.__click=Zt;var fa=i(Re);{var ga=n=>{var r=hi();H(),o(n,r)},ma=n=>{var r=Ce("Save Settings");o(n,r)};u(fa,n=>{e(Ke)?n(ga):n(ma,!1)})}t(Re);var _t=s(Re,2);{var ja=n=>{var r=ui(),f=i(r,!0);t(r),x(()=>j(f,e(We))),o(n,r)};u(_t,n=>{e(We)&&n(ja)})}var ba=s(_t,2);{var ya=n=>{var r=_i();o(n,r)};u(ba,n=>{e(qe)&&n(ya)})}t(ut),t($s),t(bs);var ft=s(bs,2),gt=s(i(ft),2),Es=i(gt),mt=s(i(Es)),wa=i(mt,!0);t(mt),t(Es);var jt=s(Es,2),ie=i(jt);ie.__change=n=>ta(n.currentTarget.value),Js(ie,21,()=>e(Ws),Gs,(n,r)=>{var f=fi(),w=i(f,!0);t(f);var S={};x(()=>{j(w,e(r)),S!==(S=e(r))&&(f.value=(f.__value=e(r))??"")}),o(n,f)}),t(ie);var bt;ni(ie);var ka=s(ie,2);{var xa=n=>{var r=gi();o(n,r)};u(ka,n=>{e(M)==="timezone"&&n(xa)})}t(jt),t(gt),t(ft),t(js);var zs=s(js,2),yt=s(i(zs),2),Fs=i(yt),Hs=s(i(Fs),2);let wt;Hs.__click=()=>a(te,!e(te)),t(Fs);var Sa=s(Fs,2);{var Ta=n=>{var r=ki(),f=ge(r);{var w=v=>{var g=mi(),h=s(i(g),2);let m;var se=i(h,!0);t(h),t(g),x(()=>{m=J(h,1,"status-badge svelte-hj1sc2",null,m,{connected:e(es).connected}),j(se,e(es).connected?"Connected":"Disconnected")}),o(v,g)};u(f,v=>{e(es)&&v(w)})}var S=s(f,2),A=s(i(S),2);P(A),t(S);var I=s(S,2),F=s(i(I),2);P(F),t(I);var E=s(I,2),z=s(i(E),2),O=i(z);O.__click=ca;var D=i(O,!0);t(O);var N=s(O,2);{var G=v=>{var g=ji();let h;var m=i(g,!0);t(g),x(()=>{h=J(g,1,"test-result svelte-hj1sc2",null,h,{success:e(de).success}),j(m,e(de).message)}),o(v,g)};u(N,v=>{e(de)&&v(G)})}t(z),t(E);var K=s(E,2),V=s(i(K),2);P(V),t(K);var $=s(K,2),k=s(i($),2);P(k),t($);var C=s($,2),B=s(i(C),2);P(B),t(C);var W=s(C,2),ee=s(i(W),2);P(ee),t(W);var Q=s(W,2),q=s(i(Q),2);P(q),t(Q);var X=s(Q,2),ne=i(X);ne.__click=$t;var Se=i(ne);{var le=v=>{var g=bi();H(),o(v,g)},Le=v=>{var g=Ce("Save HA Settings");o(v,g)};u(Se,v=>{e(ss)?v(le):v(Le,!1)})}t(ne);var Te=s(ne,2);{var p=v=>{var g=yi(),h=i(g,!0);t(g),x(()=>j(h,e(ts))),o(v,g)};u(Te,v=>{e(ts)&&v(p)})}var _=s(Te,2);{var y=v=>{var g=wi();o(v,g)};u(_,v=>{e(as)&&v(y)})}t(X),x(()=>{O.disabled=e($e)||!e(we)||!e(ke),j(D,e($e)?"Testing...":"Test"),ne.disabled=e(ss)}),U(A,()=>e(we),v=>a(we,v)),U(F,()=>e(ke),v=>a(ke,v)),U(V,()=>e(Ye),v=>a(Ye,v)),U(k,()=>e(Qe),v=>a(Qe,v)),U(B,()=>e(Me),v=>a(Me,v)),U(ee,()=>e(Xe),v=>a(Xe,v)),U(q,()=>e(Ze),v=>a(Ze,v)),o(n,r)};u(Sa,n=>{e(te)&&n(Ta)})}t(yt),t(zs);var kt=s(zs,2);{var Ca=n=>{var r=Ai(),f=s(i(r),2),w=i(f),S=s(i(w),2);let A;S.__click=()=>a(pe,!e(pe)),t(w);var I=s(w,2);{var F=E=>{var z=Ci(),O=s(ge(z),2),D=i(O),N=s(i(D),2),G=i(N);t(N),t(D);var K=s(D,2),V=i(K);P(V);var $=s(V,2),k=i($,!0);t($),t(K),t(O);var C=s(O,2),B=i(C),W=s(i(B),2),ee=i(W);t(W),t(B);var Q=s(B,2),q=i(Q);P(q);var X=s(q,2),ne=i(X,!0);t(X),t(Q),t(C);var Se=s(C,2),le=i(Se);le.__click=ea;var Le=i(le);{var Te=h=>{var m=xi();H(),o(h,m)},p=h=>{var m=Ce("Save Control Settings");o(h,m)};u(Le,h=>{e(ns)?h(Te):h(p,!1)})}t(le);var _=s(le,2);{var y=h=>{var m=Si(),se=i(m,!0);t(m),x(()=>j(se,e(ls))),o(h,m)};u(_,h=>{e(ls)&&h(y)})}var v=s(_,2);{var g=h=>{var m=Ti();o(h,m)};u(v,h=>{e(rs)&&h(g)})}t(Se),x(()=>{j(G,`Desired fermentation temperature (${e(fs)??""})`),Y(V,"min",e(ae)?0:32),Y(V,"max",e(ae)?38:100),j(k,e(fs)),j(ee,`± tolerance before triggering (${e(fs)??""})`),Y(q,"min",e(ae)?.3:.5),Y(q,"max",e(ae)?5.5:10),Y(q,"step",e(ae)?.25:.5),j(ne,e(fs)),le.disabled=e(ns)}),U(V,()=>e(is),h=>a(is,h)),U(q,()=>e(Ie),h=>a(Ie,h)),o(E,z)};u(I,E=>{e(pe)&&E(F)})}t(f),t(r),x(()=>{A=J(S,1,"toggle svelte-hj1sc2",null,A,{active:e(pe)}),Y(S,"aria-pressed",e(pe))}),o(n,r)};u(kt,n=>{e(te)&&n(Ca)})}var xt=s(kt,2);{var Aa=n=>{var r=Fi(),f=s(i(r),2),w=i(f),S=s(i(w),2);let A;S.__click=()=>a(he,!e(he)),t(w);var I=s(w,2);{var F=k=>{var C=Mi(),B=ge(C),W=s(i(B),2),ee=i(W);P(ee),H(2),t(W),t(B),H(2),U(ee,()=>e(os),Q=>a(os,Q)),o(k,C)};u(I,k=>{e(he)&&k(F)})}var E=s(I,2),z=i(E);z.__click=sa;var O=i(z);{var D=k=>{var C=Ii();H(),o(k,C)},N=k=>{var C=Ce("Save Alert Settings");o(k,C)};u(O,k=>{e(cs)?k(D):k(N,!1)})}t(z);var G=s(z,2);{var K=k=>{var C=Ei(),B=i(C,!0);t(C),x(()=>j(B,e(vs))),o(k,C)};u(G,k=>{e(vs)&&k(K)})}var V=s(G,2);{var $=k=>{var C=zi();o(k,C)};u(V,k=>{e(ds)&&k($)})}t(E),t(f),t(r),x(()=>{A=J(S,1,"toggle svelte-hj1sc2",null,A,{active:e(he)}),Y(S,"aria-pressed",e(he)),z.disabled=e(cs)}),o(n,r)};u(xt,n=>{e(te)&&e(Me)&&n(Aa)})}var Ps=s(xt,2),St=s(i(Ps),2),Us=s(i(St),2),Rs=s(i(Us),2);let Tt;Rs.__click=()=>a(oe,!e(oe)),t(Us);var Ct=s(Us,2);{var Ma=n=>{var r=Gi(),f=ge(r),w=s(i(f),2);Js(w,21,()=>e(xe),Gs,(p,_)=>{var y=Hi(),v=i(y,!0);t(y);var g={};x(()=>{j(v,e(_).name),g!==(g=e(_).id)&&(y.value=(y.__value=e(_).id)??"")}),o(p,y)}),t(w),t(f);var S=s(f,2);{var A=p=>{var _=Pi();o(p,_)},I=p=>{var _=Bt(),y=ge(_);{var v=g=>{const h=Vs(()=>e(xe).find(Ne=>Ne.id===e(L)));var m=Ri(),se=i(m),Qa=s(se);{var Xa=Ne=>{var Ot=Ui();x(()=>Y(Ot,"href",e(h).setup_url)),o(Ne,Ot)};u(Qa,Ne=>{e(h)?.setup_url&&Ne(Xa)})}t(m),x(()=>j(se,`${e(h)?.description??""} `)),o(g,m)};u(y,g=>{e(xe).find(h=>h.id===e(L))&&g(v)},!0)}o(p,_)};u(S,p=>{e(L)==="local"?p(A):p(I,!1)})}var F=s(S,2);{var E=p=>{var _=Oi(),y=i(_),v=s(i(y),2),g=i(v);t(v),t(y);var h=s(y,2);P(h),t(_),x(m=>j(g,`Your API key for ${m??""}`),[()=>e(xe).find(m=>m.id===e(L))?.name]),U(h,()=>e(Ee),m=>a(Ee,m)),o(p,_)};u(F,p=>{e(xe).find(_=>_.id===e(L))?.requires_api_key&&p(E)})}var z=s(F,2);{var O=p=>{var _=Bi(),y=s(i(_),2);P(y),t(_),U(y,()=>e(ze),v=>a(ze,v)),o(p,_)};u(z,p=>{e(L)==="local"&&p(O)})}var D=s(z,2),N=s(i(D),2),G=i(N);G.value=G.__value="";var K=s(G);Js(K,17,()=>e(Pe),Gs,(p,_)=>{var y=Di(),v=i(y,!0);t(y);var g={};x(()=>{j(v,e(_).name),g!==(g=e(_).id)&&(y.value=(y.__value=e(_).id)??"")}),o(p,y)}),t(N),t(D);var V=s(D,2);{var $=p=>{var _=Li(),y=i(_,!0);t(_),x(v=>j(y,v),[()=>e(Pe).find(v=>v.id===e(ue))?.description]),o(p,_)};u(V,p=>{e(Pe).find(_=>_.id===e(ue))&&p($)})}var k=s(V,2),C=s(i(k),2),B=i(C),W=s(i(B),2);P(W),t(B);var ee=s(B,2),Q=s(i(ee),2);P(Q),t(ee),t(C),t(k);var q=s(k,2),X=i(q);X.__click=Xt;var ne=i(X);{var Se=p=>{var _=Ni();H(),o(p,_)},le=p=>{var _=Ce("Test Connection");o(p,_)};u(ne,p=>{e(_s)?p(Se):p(le,!1)})}t(X);var Le=s(X,2);{var Te=p=>{var _=Bt(),y=ge(_);{var v=h=>{var m=Vi(),se=i(m);t(m),x(()=>j(se,`Connected! Response: "${e(_e).response??""}"`)),o(h,m)},g=h=>{var m=Ji(),se=i(m,!0);t(m),x(()=>j(se,e(_e).error)),o(h,m)};u(y,h=>{e(_e).success?h(v):h(g,!1)})}o(p,_)};u(Le,p=>{e(_e)&&p(Te)})}t(q),x(()=>X.disabled=e(_s)),Ks(w,()=>e(L),p=>a(L,p)),Ks(N,()=>e(ue),p=>a(ue,p)),U(W,()=>e(Fe),p=>a(Fe,p)),U(Q,()=>e(He),p=>a(He,p)),o(n,r)};u(Ct,n=>{e(oe)&&n(Ma)})}var At=s(Ct,2),Oe=i(At);Oe.__click=Qt;var Ia=i(Oe);{var Ea=n=>{var r=Ki();H(),o(n,r)},za=n=>{var r=Ce("Save AI Settings");o(n,r)};u(Ia,n=>{e(ps)?n(Ea):n(za,!1)})}t(Oe);var Mt=s(Oe,2);{var Fa=n=>{var r=Wi(),f=i(r,!0);t(r),x(()=>j(f,e(hs))),o(n,r)};u(Mt,n=>{e(hs)&&n(Fa)})}var Ha=s(Mt,2);{var Pa=n=>{var r=qi();o(n,r)};u(Ha,n=>{e(us)&&n(Pa)})}t(At),t(St),t(Ps);var Os=s(Ps,2),It=s(i(Os),2),Et=i(It),Bs=i(Et),Ua=i(Bs);{var Ra=n=>{var r=Yi(),f=ge(r),w=i(f),S=i(w,!0);t(w),H(2),t(f);var A=s(f,2),I=i(A),F=i(I,!0);t(I),H(2),t(A),x((E,z)=>{j(S,E),j(F,z)},[()=>Xs(e(Ve).total_readings),()=>oa(e(Ve).estimated_size_bytes)]),o(n,r)},Oa=n=>{var r=Qi();o(n,r)};u(Ua,n=>{e(Ve)?n(Ra):n(Oa,!1)})}t(Bs);var zt=s(Bs,2),Ds=s(i(zt),2),Ls=i(Ds),Ft=s(i(Ls),2);P(Ft),H(2),t(Ls);var Ht=s(Ls,2),Be=i(Ht);Be.__click=aa;var Ba=i(Be,!0);t(Be);var Da=s(Be,2);{var La=n=>{var r=Xi();r.__click=ia;var f=i(r,!0);t(r),x(w=>{r.disabled=e(M)!==null,j(f,w)},[()=>e(M)==="cleanup"?"Deleting...":`Delete ${Xs(e(Z).readings_to_delete)} readings`]),o(n,r)};u(Da,n=>{e(Z)&&e(Z).readings_to_delete>0&&n(La)})}t(Ht),t(Ds);var Na=s(Ds,2);{var Va=n=>{var r=Zi(),f=i(r);t(r),x(()=>j(f,`No readings older than ${e(ye)??""} days found.`)),o(n,r)};u(Na,n=>{e(Z)&&e(Z).readings_to_delete===0&&n(Va)})}t(zt),t(Et),t(It),t(Os);var Pt=s(Os,2),Ut=s(i(Pt),2),Rt=s(i(Ut),2),De=i(Rt);De.__click=na;var Ja=i(De);{var Ga=n=>{var r=$i();H(),o(n,r)},Ka=n=>{var r=en();H(),o(n,r)};u(Ja,n=>{e(M)==="reboot"?n(Ga):n(Ka,!1)})}t(De);var gs=s(De,2);gs.__click=la;var Wa=i(gs);{var qa=n=>{var r=sn();H(),o(n,r)},Ya=n=>{var r=tn();H(),o(n,r)};u(Wa,n=>{e(M)==="shutdown"?n(qa):n(Ya,!1)})}t(gs),t(Rt),t(Ut),t(Pt),t(T),x(()=>{st=J(ws,1,"unit-btn svelte-hj1sc2",null,st,{active:e(je)==="C"}),at=J(tt,1,"unit-btn svelte-hj1sc2",null,at,{active:e(je)==="F"}),nt=J(xs,1,"unit-btn svelte-hj1sc2",null,nt,{active:e(re)==="sg"}),lt=J(Ss,1,"unit-btn svelte-hj1sc2",null,lt,{active:e(re)==="plato"}),ot=J(rt,1,"unit-btn svelte-hj1sc2",null,ot,{active:e(re)==="brix"}),dt=J(As,1,"toggle svelte-hj1sc2",null,dt,{active:e(ve)}),Y(As,"aria-pressed",e(ve)),ht=J(Is,1,"toggle svelte-hj1sc2",null,ht,{active:e(be)}),Y(Is,"aria-pressed",e(be)),Re.disabled=e(Ke),j(wa,e(me)),ie.disabled=e(M)==="timezone",bt!==(bt=e(me))&&(ie.value=(ie.__value=e(me))??"",li(ie,e(me))),wt=J(Hs,1,"toggle svelte-hj1sc2",null,wt,{active:e(te)}),Y(Hs,"aria-pressed",e(te)),Tt=J(Rs,1,"toggle svelte-hj1sc2",null,Tt,{active:e(oe)}),Y(Rs,"aria-pressed",e(oe)),Oe.disabled=e(ps),Be.disabled=e(M)!==null,j(Ba,e(M)==="cleanup-preview"?"Checking...":"Preview"),De.disabled=e(M)!==null,gs.disabled=e(M)!==null}),U(vt,()=>e(Je),n=>a(Je,n)),U(Ft,()=>e(ye),n=>a(ye,n)),o(l,T)};u(va,l=>{e(qs)?l(da):l(pa,!1)})}t(ms),o(Nt,ms),si()}Za(["click","change"]);export{fn as component};
