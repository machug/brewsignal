import{d as ya,f as v,a as r,s as _,c as xs,t as ka}from"../chunks/BPY3LF1i.js";import{a as wa,s as o,p as Ks,az as bt,h as e,o as xa,g as Ca,c as l,A as Sa,u as yt,ax as Aa,d as a,r as t,f as he,e as s,t as b,n as Me}from"../chunks/WzhiZOZ9.js";import{e as Ws,i as Ys}from"../chunks/DnC7am1E.js";import{i as p}from"../chunks/DTo_ih-i.js";import{h as Ma}from"../chunks/BJzfFUzm.js";import{s as F,r as V}from"../chunks/D5Ox4mlS.js";import{s as E}from"../chunks/BYYdgBsh.js";import{b as q}from"../chunks/Cw-VE3R0.js";import{i as Ta,s as Ha,b as Qs}from"../chunks/BX-VZZUc.js";import{c as f,f as Ia,u as Cs}from"../chunks/DHBlVBC1.js";var Pa=v('<div class="loading-state svelte-hj1sc2"><div class="loading-spinner svelte-hj1sc2"></div> <span class="svelte-hj1sc2">Loading system information...</span></div>'),Ba=v('<span class="ai-chip svelte-hj1sc2"><span class="ai-dot svelte-hj1sc2"></span> <span class="ai-tops svelte-hj1sc2"> </span></span>'),za=v('<span class="ai-unavailable svelte-hj1sc2">Not detected</span>'),La=v('<option class="svelte-hj1sc2"> </option>'),Ea=v('<select class="mini-select svelte-hj1sc2"><option class="svelte-hj1sc2">3</option><option class="svelte-hj1sc2">5</option><option class="svelte-hj1sc2">10</option><option class="svelte-hj1sc2">15</option><option class="svelte-hj1sc2">20</option></select>'),Oa=v('<span class="error-msg svelte-hj1sc2"> </span>'),Fa=v('<span class="success-msg svelte-hj1sc2">Saved</span>'),Ra=v('<div class="section-content svelte-hj1sc2"><div class="settings-grid svelte-hj1sc2"><div class="setting-group svelte-hj1sc2"><label class="setting-label svelte-hj1sc2">Temperature</label> <div class="toggle-group svelte-hj1sc2"><button type="button">°C</button> <button type="button">°F</button></div></div> <div class="setting-group svelte-hj1sc2"><label class="setting-label svelte-hj1sc2">Gravity</label> <div class="toggle-group triple svelte-hj1sc2"><button type="button">SG</button> <button type="button">°P</button> <button type="button">°Bx</button></div></div> <div class="setting-group svelte-hj1sc2"><label class="setting-label svelte-hj1sc2">Min Signal</label> <div class="input-group svelte-hj1sc2"><input type="number" min="-100" max="0" class="num-input svelte-hj1sc2"/> <span class="input-unit svelte-hj1sc2">dBm</span></div></div> <div class="setting-group svelte-hj1sc2"><label class="setting-label svelte-hj1sc2">Timezone</label> <select class="select-input svelte-hj1sc2"></select></div></div> <div class="settings-divider svelte-hj1sc2"></div> <div class="toggle-settings svelte-hj1sc2"><div class="toggle-setting svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Reading Smoothing</span> <span class="toggle-desc svelte-hj1sc2">Average readings to reduce noise</span></div> <div class="toggle-controls svelte-hj1sc2"><!> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div></div> <div class="toggle-setting svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Identify by MAC</span> <span class="toggle-desc svelte-hj1sc2">Use MAC address instead of broadcast ID</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div></div> <div class="section-actions svelte-hj1sc2"><button type="button" class="save-btn svelte-hj1sc2"> </button> <!> <!></div></div>'),Ua=v('<span class="status-pill connected svelte-hj1sc2">Connected</span>'),Na=v('<span class="status-pill disconnected svelte-hj1sc2">Disconnected</span>'),Da=v("<span> </span>"),$a=v('<div class="inline-setting svelte-hj1sc2"><label class="svelte-hj1sc2">Alert when forecast differs by more than</label> <div class="input-group compact svelte-hj1sc2"><input type="number" min="1" max="15" step="0.5" class="num-input svelte-hj1sc2"/> <span class="input-unit svelte-hj1sc2">°C</span></div></div>'),Va=v('<div class="subsection svelte-hj1sc2"><h3 class="svelte-hj1sc2">Weather Alerts</h3> <div class="toggle-setting svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Enable Alerts</span> <span class="toggle-desc svelte-hj1sc2">Notify when forecast may affect fermentation</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div> <!></div>'),qa=v('<div class="control-defaults svelte-hj1sc2"><div class="inline-setting svelte-hj1sc2"><label class="svelte-hj1sc2">Default target</label> <div class="input-group compact svelte-hj1sc2"><input type="number" step="0.5" class="num-input svelte-hj1sc2"/> <span class="input-unit svelte-hj1sc2"> </span></div></div> <div class="inline-setting svelte-hj1sc2"><label class="svelte-hj1sc2">Hysteresis</label> <div class="input-group compact svelte-hj1sc2"><input type="number" class="num-input svelte-hj1sc2"/> <span class="input-unit svelte-hj1sc2"> </span></div></div></div>'),Ga=v('<div class="subsection svelte-hj1sc2"><h3 class="svelte-hj1sc2">Temperature Control</h3> <div class="toggle-setting svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Enable Control</span> <span class="toggle-desc svelte-hj1sc2">Automatically manage heaters for batches</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div> <!></div>'),Ja=v('<div class="form-grid svelte-hj1sc2"><div class="form-field full svelte-hj1sc2"><label for="ha-url" class="svelte-hj1sc2">Home Assistant URL</label> <input id="ha-url" type="url" placeholder="http://192.168.1.100:8123" class="svelte-hj1sc2"/></div> <div class="form-field full svelte-hj1sc2"><label for="ha-token" class="svelte-hj1sc2">Access Token</label> <input id="ha-token" type="password" placeholder="Long-lived access token" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="ha-ambient-temp" class="svelte-hj1sc2">Ambient Temp Entity</label> <input id="ha-ambient-temp" type="text" placeholder="sensor.xxx_temperature" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="ha-ambient-humidity" class="svelte-hj1sc2">Ambient Humidity</label> <input id="ha-ambient-humidity" type="text" placeholder="sensor.xxx_humidity" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="ha-chamber-temp" class="svelte-hj1sc2">Chamber Temp</label> <input id="ha-chamber-temp" type="text" placeholder="sensor.chamber_temperature" class="svelte-hj1sc2"/></div> <div class="form-field svelte-hj1sc2"><label for="ha-chamber-humidity" class="svelte-hj1sc2">Chamber Humidity</label> <input id="ha-chamber-humidity" type="text" placeholder="sensor.chamber_humidity" class="svelte-hj1sc2"/></div> <div class="form-field full svelte-hj1sc2"><label for="ha-weather" class="svelte-hj1sc2">Weather Entity</label> <input id="ha-weather" type="text" placeholder="weather.home" class="svelte-hj1sc2"/></div></div> <div class="inline-actions svelte-hj1sc2"><button type="button" class="test-btn svelte-hj1sc2"> </button> <!></div> <!> <!>',1),Ka=v('<span class="error-msg svelte-hj1sc2"> </span>'),Wa=v('<span class="success-msg svelte-hj1sc2">Saved</span>'),Ya=v('<div class="section-content svelte-hj1sc2"><div class="toggle-setting prominent svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Enable Integration</span> <span class="toggle-desc svelte-hj1sc2">Connect to Home Assistant for environmental data and control</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div> <!> <div class="section-actions svelte-hj1sc2"><button type="button" class="save-btn svelte-hj1sc2"> </button> <!> <!></div></div>'),Qa=v('<span class="status-pill enabled svelte-hj1sc2">Enabled</span>'),Xa=v('<option class="svelte-hj1sc2"> </option>'),Za=v('<option class="svelte-hj1sc2"> </option>'),el=v('<span class="ai-detected svelte-hj1sc2"> </span>'),sl=v(`<p class="svelte-hj1sc2"><strong class="svelte-hj1sc2">Option 1: Remote (Recommended)</strong> — Run Ollama on a PC/Mac with GPU for fast responses.</p> <ol class="svelte-hj1sc2"><li class="svelte-hj1sc2">Install from <a href="https://ollama.ai/download" target="_blank" rel="noopener" class="svelte-hj1sc2">ollama.ai</a></li> <li class="svelte-hj1sc2">Run: <code class="svelte-hj1sc2">OLLAMA_HOST=0.0.0.0 ollama serve</code></li> <li class="svelte-hj1sc2">Pull a model: <code class="svelte-hj1sc2">ollama pull llama3:8b</code></li> <li class="svelte-hj1sc2">Enter the remote machine's IP below</li></ol> <p class="svelte-hj1sc2"><strong class="svelte-hj1sc2">Option 2: Local on Pi</strong> — Requires <a href="https://www.raspberrypi.com/products/ai-hat-plus-2/" target="_blank" rel="noopener" class="svelte-hj1sc2">AI HAT+</a> for acceptable speed. <!></p>`,1),tl=v('<p class="gpu-detected svelte-hj1sc2"><strong class="svelte-hj1sc2">GPU detected:</strong> <!></p> <p class="svelte-hj1sc2">Local Ollama is recommended for this system.</p> <ol class="svelte-hj1sc2"><li class="svelte-hj1sc2">Install from <a href="https://ollama.ai/download" target="_blank" rel="noopener" class="svelte-hj1sc2">ollama.ai</a></li> <li class="svelte-hj1sc2">Pull a model: <code class="svelte-hj1sc2">ollama pull llama3:8b</code></li> <li class="svelte-hj1sc2">Keep the default URL (localhost)</li></ol>',1),al=v('<ol class="svelte-hj1sc2"><li class="svelte-hj1sc2">Install from <a href="https://ollama.ai/download" target="_blank" rel="noopener" class="svelte-hj1sc2">ollama.ai</a></li> <li class="svelte-hj1sc2">Pull a model: <code class="svelte-hj1sc2">ollama pull llama3:8b</code></li></ol> <p class="hint svelte-hj1sc2">For remote Ollama, run: <code class="svelte-hj1sc2">OLLAMA_HOST=0.0.0.0 ollama serve</code></p>',1),ll=v('<div class="info-box svelte-hj1sc2"><h4 class="svelte-hj1sc2">Ollama Setup</h4> <!></div> <div class="form-field full svelte-hj1sc2"><label for="ai-url" class="svelte-hj1sc2">Ollama URL</label> <input id="ai-url" type="text" placeholder="http://localhost:11434" class="svelte-hj1sc2"/></div>',1),nl=v('<span class="field-hint success svelte-hj1sc2">API key detected from environment</span>'),il=v('<div class="form-field full svelte-hj1sc2"><label for="ai-key" class="svelte-hj1sc2">API Key</label> <input id="ai-key" type="password" class="svelte-hj1sc2"/> <!></div>'),ol=v('<span class="test-result success svelte-hj1sc2"> </span>'),rl=v('<span class="test-result svelte-hj1sc2"> </span>'),cl=v('<div class="form-grid svelte-hj1sc2"><div class="form-field svelte-hj1sc2"><label for="ai-provider" class="svelte-hj1sc2">Provider</label> <select id="ai-provider" class="svelte-hj1sc2"></select></div> <div class="form-field svelte-hj1sc2"><label for="ai-model" class="svelte-hj1sc2">Model</label> <select id="ai-model" class="svelte-hj1sc2"><option class="svelte-hj1sc2">Default</option><!></select></div></div> <!> <details class="advanced-settings svelte-hj1sc2"><summary class="svelte-hj1sc2">Advanced Settings</summary> <div class="form-grid svelte-hj1sc2"><div class="form-field svelte-hj1sc2"><label for="ai-temp" class="svelte-hj1sc2">Temperature</label> <input id="ai-temp" type="number" min="0" max="2" step="0.1" class="svelte-hj1sc2"/> <span class="field-hint svelte-hj1sc2">Higher = more creative</span></div> <div class="form-field svelte-hj1sc2"><label for="ai-tokens" class="svelte-hj1sc2">Max Tokens</label> <input id="ai-tokens" type="number" min="100" max="8000" step="100" class="svelte-hj1sc2"/></div></div></details> <div class="inline-actions svelte-hj1sc2"><button type="button" class="test-btn svelte-hj1sc2"> </button> <!></div>',1),vl=v('<span class="error-msg svelte-hj1sc2"> </span>'),dl=v('<span class="success-msg svelte-hj1sc2">Saved</span>'),hl=v(`<div class="section-content svelte-hj1sc2"><p class="section-intro svelte-hj1sc2">Get AI-powered help with recipe creation, fermentation troubleshooting, and brewing advice.
							Use a local model for privacy or connect to cloud providers.</p> <div class="toggle-setting prominent svelte-hj1sc2"><div class="toggle-info svelte-hj1sc2"><span class="toggle-label svelte-hj1sc2">Enable AI Assistant</span> <span class="toggle-desc svelte-hj1sc2">Activate brewing AI features</span></div> <button type="button"><span class="switch-thumb svelte-hj1sc2"></span></button></div> <!> <div class="section-actions svelte-hj1sc2"><button type="button" class="save-btn svelte-hj1sc2"> </button> <!> <!></div></div>`),ul=v('<span class="storage-badge svelte-hj1sc2"> </span>'),pl=v('<button type="button" class="danger-btn svelte-hj1sc2"> </button>'),_l=v('<p class="cleanup-result svelte-hj1sc2"> </p>'),ml=v('<div class="section-content svelte-hj1sc2"><div class="storage-stats svelte-hj1sc2"><div class="stat svelte-hj1sc2"><span class="stat-value svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Total Readings</span></div> <div class="stat svelte-hj1sc2"><span class="stat-value svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Database Size</span></div></div> <div class="cleanup-section svelte-hj1sc2"><p class="svelte-hj1sc2">Remove old readings to free storage. This action is permanent.</p> <div class="cleanup-controls svelte-hj1sc2"><label class="svelte-hj1sc2">Keep readings from last</label> <div class="input-group compact svelte-hj1sc2"><input type="number" min="1" max="365" class="num-input svelte-hj1sc2"/> <span class="input-unit svelte-hj1sc2">days</span></div> <button type="button" class="secondary-btn svelte-hj1sc2"> </button> <!></div> <!></div></div>'),fl=v('<div class="section-content svelte-hj1sc2"><p class="warning-text svelte-hj1sc2">These actions affect the entire system. Ensure all work is saved.</p> <div class="power-actions svelte-hj1sc2"><button type="button" class="warning-btn svelte-hj1sc2"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-hj1sc2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" class="svelte-hj1sc2"></path></svg> </button> <button type="button" class="danger-btn large svelte-hj1sc2"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-hj1sc2"><path stroke-linecap="round" stroke-linejoin="round" d="M5.636 5.636a9 9 0 1012.728 0M12 3v9" class="svelte-hj1sc2"></path></svg> </button></div></div>'),jl=v('<header class="status-banner svelte-hj1sc2"><div class="status-grid svelte-hj1sc2"><div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Hostname</span> <span class="status-value svelte-hj1sc2"> </span></div> <div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Version</span> <span class="status-value svelte-hj1sc2"> </span></div> <div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Uptime</span> <span class="status-value svelte-hj1sc2"> </span></div> <div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">IP Address</span> <span class="status-value svelte-hj1sc2"> </span></div> <div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Readings</span> <span class="status-value svelte-hj1sc2"> </span></div> <div><span class="status-label svelte-hj1sc2">AI Accelerator</span> <span class="status-value svelte-hj1sc2"><!></span></div></div></header> <nav class="quick-links svelte-hj1sc2"><a href="/devices" class="quick-link svelte-hj1sc2"><svg class="icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" class="svelte-hj1sc2"></path></svg> <span class="svelte-hj1sc2">Devices</span></a> <a href="/calibration" class="quick-link svelte-hj1sc2"><svg class="icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-hj1sc2"></path></svg> <span class="svelte-hj1sc2">Calibration</span></a> <a href="/logging" class="quick-link svelte-hj1sc2"><svg class="icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-hj1sc2"></path></svg> <span class="svelte-hj1sc2">Logging</span></a> <a href="/system/maintenance" class="quick-link svelte-hj1sc2"><svg class="icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" class="svelte-hj1sc2"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-hj1sc2"></path></svg> <span class="svelte-hj1sc2">Maintenance</span></a></nav> <div class="settings-container svelte-hj1sc2"><section class="settings-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">Display & Units</h2></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section> <section class="settings-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">Home Assistant</h2> <!></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section> <section class="settings-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">AI Brewing Assistant</h2> <!></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section> <section class="settings-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">Storage & Cleanup</h2> <!></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section> <section class="settings-section danger-section svelte-hj1sc2"><button type="button" class="section-header svelte-hj1sc2"><div class="section-title-group svelte-hj1sc2"><svg class="section-icon svelte-hj1sc2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M5.636 5.636a9 9 0 1012.728 0M12 3v9" class="svelte-hj1sc2"></path></svg> <h2 class="svelte-hj1sc2">Power Controls</h2></div> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-hj1sc2"></path></svg></button> <!></section></div>',1),gl=v('<div class="system-page svelte-hj1sc2"><!></div>');function Hl(kt,wt){wa(wt,!0);let G=o(null),ue=o(null),ye=o(null),Xs=o(Ks([])),$e=o(""),Zs=o(!0),I=o(null),Le=o("C"),ke=o("sg"),ls=o(-100),Te=o(!1),ns=o(5),Ee=o(!1),is=o(!1),os=o(null),rs=o(!1),Oe=o(30),le=o(null),ne=o(!1),Fe=o(""),Re=o(""),cs=o(""),vs=o(""),ds=o(""),hs=o(""),Ve=o(""),us=o(!1),He=o(null),et=o(null),ps=o(!1),_s=o(null),ms=o(!1),Ue=o(!1),Ss=o(68),As=o(1),Ne=o(!1),Ms=o(3),pe=o(!1),_e=o("local"),qe=o(""),De=o(""),Ge=o(""),Je=o(.7),Ke=o(2e3),fs=o(!1),js=o(null),gs=o(!1),bs=o(!1),Ie=o(null),Ts=o(Ks([])),Hs=o(Ks([])),Is=o(!1),O=o("display"),Pe=yt(()=>f.config.temp_units==="C"),st=yt(()=>e(Pe)?"°C":"°F");function xt(n){return e(Pe)?Ia(n):n}function We(n){l(O,e(O)===n?null:n,!0)}async function Ct(){try{const n=await fetch("/api/system/info");n.ok&&l(G,await n.json(),!0)}catch(n){console.error("Failed to load system info:",n)}}async function tt(){try{const n=await fetch("/api/system/storage");n.ok&&l(ue,await n.json(),!0)}catch(n){console.error("Failed to load storage stats:",n)}}async function St(){try{const n=await fetch("/api/system/ai-accelerator");n.ok&&l(ye,await n.json(),!0)}catch(n){console.error("Failed to load AI accelerator status:",n)}}async function At(){try{const[n,x]=await Promise.all([fetch("/api/system/timezones"),fetch("/api/system/timezone")]);if(n.ok){const W=await n.json();l(Xs,W.timezones||[],!0)}if(x.ok){const W=await x.json();l($e,W.timezone||"UTC",!0)}}catch(n){console.error("Failed to load timezones:",n)}}function at(){l(Le,f.config.temp_units,!0),l(ke,f.config.sg_units,!0),l(ls,f.config.min_rssi,!0),l(Te,f.config.smoothing_enabled,!0),l(ns,f.config.smoothing_samples,!0),l(Ee,f.config.id_by_mac,!0),l(ne,f.config.ha_enabled,!0),l(Fe,f.config.ha_url,!0),l(Re,f.config.ha_token,!0),l(cs,f.config.ha_ambient_temp_entity_id,!0),l(vs,f.config.ha_ambient_humidity_entity_id,!0),l(ds,f.config.ha_chamber_temp_entity_id,!0),l(hs,f.config.ha_chamber_humidity_entity_id,!0),l(Ve,f.config.ha_weather_entity_id,!0),l(Ue,f.config.temp_control_enabled,!0),l(Ss,Math.round(xt(f.config.temp_target)*2)/2),l(As,f.config.temp_units==="C"?Math.round(f.config.temp_hysteresis*(5/9)*100)/100:f.config.temp_hysteresis,!0),l(Ne,f.config.weather_alerts_enabled,!0),l(Ms,f.config.alert_temp_threshold,!0),l(pe,f.config.ai_enabled??!1,!0),l(_e,f.config.ai_provider??"local",!0),l(qe,f.config.ai_model??"",!0),l(De,f.config.ai_api_key??"",!0),l(Ge,f.config.ai_base_url??"",!0),l(Je,f.config.ai_temperature??.7,!0),l(Ke,f.config.ai_max_tokens??2e3,!0)}async function Mt(){try{const n=await fetch("/api/assistant/providers");n.ok&&l(Ts,await n.json(),!0)}catch(n){console.error("Failed to load AI providers:",n)}}async function Tt(n){try{const x=await fetch(`/api/assistant/models/${n}`);if(x.ok){const W=await x.json();l(Hs,W.models,!0)}}catch(x){console.error("Failed to load AI models:",x),l(Hs,[],!0)}}async function Ht(){try{const n=await fetch("/api/assistant/status");if(n.ok){const x=await n.json();l(Is,x.has_env_api_key??!1,!0)}}catch(n){console.error("Failed to load AI status:",n)}}async function It(){l(fs,!0),l(js,null),l(gs,!1);try{await Cs({ai_enabled:e(pe),ai_provider:e(_e),ai_model:e(qe),ai_api_key:e(De),ai_base_url:e(Ge),ai_temperature:e(Je),ai_max_tokens:e(Ke)}),l(gs,!0),setTimeout(()=>l(gs,!1),3e3)}catch(n){l(js,n instanceof Error?n.message:"Failed to save AI settings",!0)}finally{l(fs,!1)}}async function Pt(){l(bs,!0),l(Ie,null);try{await Cs({ai_enabled:e(pe),ai_provider:e(_e),ai_model:e(qe),ai_api_key:e(De),ai_base_url:e(Ge),ai_temperature:e(Je),ai_max_tokens:e(Ke)});const x=await(await fetch("/api/assistant/test",{method:"POST"})).json();l(Ie,x,!0)}catch(n){l(Ie,{success:!1,error:n instanceof Error?n.message:"Connection test failed"},!0)}finally{l(bs,!1)}}bt(()=>{e(_e)&&Tt(e(_e))});async function Bt(){l(is,!0),l(os,null),l(rs,!1);try{const n=await Cs({temp_units:e(Le),sg_units:e(ke),min_rssi:e(ls),smoothing_enabled:e(Te),smoothing_samples:e(ns),id_by_mac:e(Ee)});n.success?(l(rs,!0),setTimeout(()=>l(rs,!1),3e3)):l(os,n.error||"Failed to save settings",!0)}finally{l(is,!1)}}async function zt(){l(ps,!0),l(_s,null),l(ms,!1);try{const n=await Cs({ha_enabled:e(ne),ha_url:e(Fe),ha_token:e(Re),ha_ambient_temp_entity_id:e(cs),ha_ambient_humidity_entity_id:e(vs),ha_chamber_temp_entity_id:e(ds),ha_chamber_humidity_entity_id:e(hs),ha_weather_entity_id:e(Ve)});n.success?(l(ms,!0),setTimeout(()=>l(ms,!1),3e3),await nt()):l(_s,n.error||"Failed to save settings",!0)}finally{l(ps,!1)}}async function Lt(n){l(I,"timezone");try{(await fetch("/api/system/timezone",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:n})})).ok&&l($e,n,!0)}catch(x){console.error("Failed to set timezone:",x)}finally{l(I,null)}}async function Et(){l(I,"cleanup-preview");try{const n=await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(Oe),confirm:!1})});n.ok&&l(le,await n.json(),!0)}catch(n){console.error("Failed to preview cleanup:",n)}finally{l(I,null)}}async function Ot(){if(!(!e(le)||e(le).readings_to_delete===0)&&confirm(`Delete ${e(le).readings_to_delete.toLocaleString()} readings older than ${e(Oe)} days?`)){l(I,"cleanup");try{(await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(Oe),confirm:!0})})).ok&&(l(le,null),await tt())}catch(n){console.error("Failed to execute cleanup:",n)}finally{l(I,null)}}}async function Ft(){if(confirm("Are you sure you want to reboot the system? The UI will be unavailable until restart completes.")){l(I,"reboot");try{await fetch("/api/system/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(n){console.error("Reboot command failed:",n)}finally{l(I,null)}}}async function Rt(){if(confirm("Are you sure you want to shut down the system? You will need physical access to restart.")){l(I,"shutdown");try{await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(n){console.error("Shutdown command failed:",n)}finally{l(I,null)}}}function Ut(n){if(!n)return"Unknown";const x=Math.floor(n/86400),W=Math.floor(n%86400/3600),Ye=Math.floor(n%3600/60),me=[];return x>0&&me.push(`${x}d`),W>0&&me.push(`${W}h`),Ye>0&&me.push(`${Ye}m`),me.length>0?me.join(" "):"< 1m"}function lt(n){return!Number.isFinite(n)||n<0?"0 B":n<1024?`${n} B`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/(1024*1024)).toFixed(1)} MB`}function Ps(n){return n.toLocaleString()}async function Nt(){l(us,!0),l(He,null);try{const n=await fetch("/api/ha/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(Fe),token:e(Re)})});n.ok?l(He,await n.json(),!0):l(He,{success:!1,message:"Request failed"},!0)}catch{l(He,{success:!1,message:"Network error"},!0)}finally{l(us,!1)}}async function nt(){try{const n=await fetch("/api/ha/status");n.ok&&l(et,await n.json(),!0)}catch(n){console.error("Failed to load HA status:",n)}}xa(async()=>{await Promise.all([Ct(),tt(),St(),At(),nt(),Mt(),Ht()]),at(),l(Zs,!1)}),bt(()=>{f.loaded&&at()});var Bs=gl();Ma("hj1sc2",n=>{Sa(()=>{Aa.title="System | BrewSignal"})});var Dt=a(Bs);{var $t=n=>{var x=Pa();r(n,x)},Vt=n=>{var x=jl(),W=he(x),Ye=a(W),me=a(Ye),it=s(a(me),2),qt=a(it,!0);t(it),t(me);var zs=s(me,2),ot=s(a(zs),2),Gt=a(ot);t(ot),t(zs);var Ls=s(zs,2),rt=s(a(Ls),2),Jt=a(rt,!0);t(rt),t(Ls);var Es=s(Ls,2),ct=s(a(Es),2),Kt=a(ct,!0);t(ct),t(Es);var Os=s(Es,2),vt=s(a(Os),2),Wt=a(vt,!0);t(vt),t(Os);var Fs=s(Os,2);let dt;var ht=s(a(Fs),2),Yt=a(ht);{var Qt=c=>{var h=Ba(),k=s(a(h)),j=s(k),P=a(j);t(j),t(h),b(()=>{_(k,` ${e(ye).device.architecture??""} `),_(P,`${e(ye).device.tops??""} TOPS`)}),r(c,h)},Xt=c=>{var h=za();r(c,h)};p(Yt,c=>{e(ye)?.available&&e(ye).device?c(Qt):c(Xt,!1)})}t(ht),t(Fs),t(Ye),t(W);var ut=s(W,4),Rs=a(ut),Qe=a(Rs);Qe.__click=()=>We("display");var Zt=s(a(Qe),2);let pt;t(Qe);var ea=s(Qe,2);{var sa=c=>{var h=Ra(),k=a(h),j=a(k),P=s(a(j),2),B=a(P);let X;B.__click=()=>l(Le,"C");var Z=s(B,2);let R;Z.__click=()=>l(Le,"F"),t(P),t(j);var ie=s(j,2),Y=s(a(ie),2),ee=a(Y);let fe;ee.__click=()=>l(ke,"sg");var J=s(ee,2);let g;J.__click=()=>l(ke,"plato");var C=s(J,2);let U;C.__click=()=>l(ke,"brix"),t(Y),t(ie);var K=s(ie,2),se=s(a(K),2),S=a(se);V(S),Me(2),t(se),t(K);var A=s(K,2),T=s(a(A),2);T.__change=i=>Lt(i.currentTarget.value),Ws(T,21,()=>e(Xs),Ys,(i,d)=>{var u=La(),m=a(u,!0);t(u);var M={};b(()=>{_(m,e(d)),M!==(M=e(d))&&(u.value=(u.__value=e(d))??"")}),r(i,u)}),t(T);var je;Ta(T),t(A),t(k);var oe=s(k,4),we=a(oe),xe=s(a(we),2),ge=a(xe);{var Ce=i=>{var d=Ea(),u=a(d);u.value=u.__value=3;var m=s(u);m.value=m.__value=5;var M=s(m);M.value=M.__value=10;var z=s(M);z.value=z.__value=15;var L=s(z);L.value=L.__value=20,t(d),Qs(d,()=>e(ns),N=>l(ns,N)),r(i,d)};p(ge,i=>{e(Te)&&i(Ce)})}var re=s(ge,2);let Se;re.__click=()=>l(Te,!e(Te)),t(xe),t(we);var Ae=s(we,2),ce=s(a(Ae),2);let te;ce.__click=()=>l(Ee,!e(Ee)),t(Ae),t(oe);var ve=s(oe,2),be=a(ve);be.__click=Bt;var ts=a(be,!0);t(be);var Be=s(be,2);{var y=i=>{var d=Oa(),u=a(d,!0);t(d),b(()=>_(u,e(os))),r(i,d)};p(Be,i=>{e(os)&&i(y)})}var H=s(Be,2);{var w=i=>{var d=Fa();r(i,d)};p(H,i=>{e(rs)&&i(w)})}t(ve),t(h),b(()=>{X=E(B,1,"toggle-btn svelte-hj1sc2",null,X,{active:e(Le)==="C"}),R=E(Z,1,"toggle-btn svelte-hj1sc2",null,R,{active:e(Le)==="F"}),fe=E(ee,1,"toggle-btn svelte-hj1sc2",null,fe,{active:e(ke)==="sg"}),g=E(J,1,"toggle-btn svelte-hj1sc2",null,g,{active:e(ke)==="plato"}),U=E(C,1,"toggle-btn svelte-hj1sc2",null,U,{active:e(ke)==="brix"}),T.disabled=e(I)==="timezone",je!==(je=e($e))&&(T.value=(T.__value=e($e))??"",Ha(T,e($e))),Se=E(re,1,"switch svelte-hj1sc2",null,Se,{on:e(Te)}),F(re,"aria-pressed",e(Te)),te=E(ce,1,"switch svelte-hj1sc2",null,te,{on:e(Ee)}),F(ce,"aria-pressed",e(Ee)),be.disabled=e(is),_(ts,e(is)?"Saving...":"Save Changes")}),q(S,()=>e(ls),i=>l(ls,i)),r(c,h)};p(ea,c=>{e(O)==="display"&&c(sa)})}t(Rs);var Us=s(Rs,2),Xe=a(Us);Xe.__click=()=>We("homeassistant");var Ns=a(Xe),ta=s(a(Ns),4);{var aa=c=>{var h=Ua();r(c,h)},la=c=>{var h=xs(),k=he(h);{var j=P=>{var B=Na();r(P,B)};p(k,P=>{e(ne)&&P(j)},!0)}r(c,h)};p(ta,c=>{e(et)?.connected?c(aa):c(la,!1)})}t(Ns);var na=s(Ns,2);let _t;t(Xe);var ia=s(Xe,2);{var oa=c=>{var h=Ya(),k=a(h),j=s(a(k),2);let P;j.__click=()=>l(ne,!e(ne)),t(k);var B=s(k,2);{var X=g=>{var C=Ja(),U=he(C),K=a(U),se=s(a(K),2);V(se),t(K);var S=s(K,2),A=s(a(S),2);V(A),t(S);var T=s(S,2),je=s(a(T),2);V(je),t(T);var oe=s(T,2),we=s(a(oe),2);V(we),t(oe);var xe=s(oe,2),ge=s(a(xe),2);V(ge),t(xe);var Ce=s(xe,2),re=s(a(Ce),2);V(re),t(Ce);var Se=s(Ce,2),Ae=s(a(Se),2);V(Ae),t(Se),t(U);var ce=s(U,2),te=a(ce);te.__click=Nt;var ve=a(te,!0);t(te);var be=s(te,2);{var ts=i=>{var d=Da();let u;var m=a(d,!0);t(d),b(()=>{u=E(d,1,"test-result svelte-hj1sc2",null,u,{success:e(He).success}),_(m,e(He).message)}),r(i,d)};p(be,i=>{e(He)&&i(ts)})}t(ce);var Be=s(ce,2);{var y=i=>{var d=Va(),u=s(a(d),2),m=s(a(u),2);let M;m.__click=()=>l(Ne,!e(Ne)),t(u);var z=s(u,2);{var L=N=>{var ae=$a(),de=s(a(ae),2),D=a(de);V(D),Me(2),t(de),t(ae),q(D,()=>e(Ms),$=>l(Ms,$)),r(N,ae)};p(z,N=>{e(Ne)&&N(L)})}t(d),b(()=>{M=E(m,1,"switch svelte-hj1sc2",null,M,{on:e(Ne)}),F(m,"aria-pressed",e(Ne))}),r(i,d)};p(Be,i=>{e(ne)&&e(Ve)&&i(y)})}var H=s(Be,2);{var w=i=>{var d=Ga(),u=s(a(d),2),m=s(a(u),2);let M;m.__click=()=>l(Ue,!e(Ue)),t(u);var z=s(u,2);{var L=N=>{var ae=qa(),de=a(ae),D=s(a(de),2),$=a(D);V($);var ze=s($,2),ys=a(ze,!0);t(ze),t(D),t(de);var ks=s(de,2),ws=s(a(ks),2),Q=a(ws);V(Q);var as=s(Q,2),Gs=a(as);t(as),t(ws),t(ks),t(ae),b(()=>{F($,"min",e(Pe)?0:32),F($,"max",e(Pe)?38:100),_(ys,e(st)),F(Q,"min",e(Pe)?.3:.5),F(Q,"max",e(Pe)?5.5:10),F(Q,"step",e(Pe)?.25:.5),_(Gs,`±${e(st)??""}`)}),q($,()=>e(Ss),Js=>l(Ss,Js)),q(Q,()=>e(As),Js=>l(As,Js)),r(N,ae)};p(z,N=>{e(Ue)&&N(L)})}t(d),b(()=>{M=E(m,1,"switch svelte-hj1sc2",null,M,{on:e(Ue)}),F(m,"aria-pressed",e(Ue))}),r(i,d)};p(H,i=>{e(ne)&&i(w)})}b(()=>{te.disabled=e(us)||!e(Fe)||!e(Re),_(ve,e(us)?"Testing...":"Test Connection")}),q(se,()=>e(Fe),i=>l(Fe,i)),q(A,()=>e(Re),i=>l(Re,i)),q(je,()=>e(cs),i=>l(cs,i)),q(we,()=>e(vs),i=>l(vs,i)),q(ge,()=>e(ds),i=>l(ds,i)),q(re,()=>e(hs),i=>l(hs,i)),q(Ae,()=>e(Ve),i=>l(Ve,i)),r(g,C)};p(B,g=>{e(ne)&&g(X)})}var Z=s(B,2),R=a(Z);R.__click=zt;var ie=a(R,!0);t(R);var Y=s(R,2);{var ee=g=>{var C=Ka(),U=a(C,!0);t(C),b(()=>_(U,e(_s))),r(g,C)};p(Y,g=>{e(_s)&&g(ee)})}var fe=s(Y,2);{var J=g=>{var C=Wa();r(g,C)};p(fe,g=>{e(ms)&&g(J)})}t(Z),t(h),b(()=>{P=E(j,1,"switch svelte-hj1sc2",null,P,{on:e(ne)}),F(j,"aria-pressed",e(ne)),R.disabled=e(ps),_(ie,e(ps)?"Saving...":"Save HA Settings")}),r(c,h)};p(ia,c=>{e(O)==="homeassistant"&&c(oa)})}t(Us);var Ds=s(Us,2),Ze=a(Ds);Ze.__click=()=>We("ai");var $s=a(Ze),ra=s(a($s),4);{var ca=c=>{var h=Qa();r(c,h)};p(ra,c=>{e(pe)&&c(ca)})}t($s);var va=s($s,2);let mt;t(Ze);var da=s(Ze,2);{var ha=c=>{var h=hl(),k=s(a(h),2),j=s(a(k),2);let P;j.__click=()=>l(pe,!e(pe)),t(k);var B=s(k,2);{var X=g=>{var C=cl(),U=he(C),K=a(U),se=s(a(K),2);Ws(se,21,()=>e(Ts),Ys,(y,H)=>{var w=Xa(),i=a(w,!0);t(w);var d={};b(()=>{_(i,e(H).name),d!==(d=e(H).id)&&(w.value=(w.__value=e(H).id)??"")}),r(y,w)}),t(se),t(K);var S=s(K,2),A=s(a(S),2),T=a(A);T.value=T.__value="";var je=s(T);Ws(je,17,()=>e(Hs),Ys,(y,H)=>{var w=Za(),i=a(w,!0);t(w);var d={};b(()=>{_(i,e(H).name),d!==(d=e(H).id)&&(w.value=(w.__value=e(H).id)??"")}),r(y,w)}),t(A),t(S),t(U);var oe=s(U,2);{var we=y=>{var H=ll(),w=he(H),i=s(a(w),2);{var d=z=>{var L=sl(),N=s(he(L),4),ae=s(a(N),4);{var de=D=>{var $=el(),ze=a($);t($),b(()=>_(ze,`✓ AI HAT+ detected (${e(ye).device?.tops??""} TOPS)`)),r(D,$)};p(ae,D=>{e(ye)?.available&&D(de)})}t(N),r(z,L)},u=z=>{var L=xs(),N=he(L);{var ae=D=>{var $=tl(),ze=he($),ys=s(a(ze)),ks=s(ys);{var ws=Q=>{var as=ka();b(Gs=>_(as,`(${Gs??""} GB VRAM)`),[()=>(e(G).platform.gpu.vram_mb/1024).toFixed(0)]),r(Q,as)};p(ks,Q=>{e(G).platform.gpu.vram_mb&&Q(ws)})}t(ze),Me(4),b(Q=>_(ys,` ${Q??""} `),[()=>e(G).platform.gpu.name??e(G).platform.gpu.vendor.toUpperCase()]),r(D,$)},de=D=>{var $=al();Me(2),r(D,$)};p(N,D=>{e(G)?.platform?.gpu?.vendor==="nvidia"||e(G)?.platform?.gpu?.vendor==="amd"||e(G)?.platform?.gpu?.vendor==="apple"?D(ae):D(de,!1)},!0)}r(z,L)};p(i,z=>{e(G)?.platform?.is_raspberry_pi?z(d):z(u,!1)})}t(w);var m=s(w,2),M=s(a(m),2);V(M),t(m),q(M,()=>e(Ge),z=>l(Ge,z)),r(y,H)},xe=y=>{var H=xs(),w=he(H);{var i=d=>{var u=il(),m=s(a(u),2);V(m);var M=s(m,2);{var z=L=>{var N=nl();r(L,N)};p(M,L=>{e(Is)&&!e(De)&&L(z)})}t(u),b(()=>F(m,"placeholder",e(Is)?"(using environment variable)":"sk-...")),q(m,()=>e(De),L=>l(De,L)),r(d,u)};p(w,d=>{e(Ts).find(u=>u.id===e(_e))?.requires_api_key&&d(i)},!0)}r(y,H)};p(oe,y=>{e(_e)==="local"?y(we):y(xe,!1)})}var ge=s(oe,2),Ce=s(a(ge),2),re=a(Ce),Se=s(a(re),2);V(Se),Me(2),t(re);var Ae=s(re,2),ce=s(a(Ae),2);V(ce),t(Ae),t(Ce),t(ge);var te=s(ge,2),ve=a(te);ve.__click=Pt;var be=a(ve,!0);t(ve);var ts=s(ve,2);{var Be=y=>{var H=xs(),w=he(H);{var i=u=>{var m=ol(),M=a(m);t(m),b(()=>_(M,`Connected! "${e(Ie).response??""}"`)),r(u,m)},d=u=>{var m=rl(),M=a(m,!0);t(m),b(()=>_(M,e(Ie).error)),r(u,m)};p(w,u=>{e(Ie).success?u(i):u(d,!1)})}r(y,H)};p(ts,y=>{e(Ie)&&y(Be)})}t(te),b(()=>{ve.disabled=e(bs),_(be,e(bs)?"Testing...":"Test Connection")}),Qs(se,()=>e(_e),y=>l(_e,y)),Qs(A,()=>e(qe),y=>l(qe,y)),q(Se,()=>e(Je),y=>l(Je,y)),q(ce,()=>e(Ke),y=>l(Ke,y)),r(g,C)};p(B,g=>{e(pe)&&g(X)})}var Z=s(B,2),R=a(Z);R.__click=It;var ie=a(R,!0);t(R);var Y=s(R,2);{var ee=g=>{var C=vl(),U=a(C,!0);t(C),b(()=>_(U,e(js))),r(g,C)};p(Y,g=>{e(js)&&g(ee)})}var fe=s(Y,2);{var J=g=>{var C=dl();r(g,C)};p(fe,g=>{e(gs)&&g(J)})}t(Z),t(h),b(()=>{P=E(j,1,"switch svelte-hj1sc2",null,P,{on:e(pe)}),F(j,"aria-pressed",e(pe)),R.disabled=e(fs),_(ie,e(fs)?"Saving...":"Save AI Settings")}),r(c,h)};p(da,c=>{e(O)==="ai"&&c(ha)})}t(Ds);var Vs=s(Ds,2),es=a(Vs);es.__click=()=>We("storage");var qs=a(es),ua=s(a(qs),4);{var pa=c=>{var h=ul(),k=a(h,!0);t(h),b(j=>_(k,j),[()=>lt(e(ue).estimated_size_bytes)]),r(c,h)};p(ua,c=>{e(ue)&&c(pa)})}t(qs);var _a=s(qs,2);let ft;t(es);var ma=s(es,2);{var fa=c=>{var h=ml(),k=a(h),j=a(k),P=a(j),B=a(P,!0);t(P),Me(2),t(j);var X=s(j,2),Z=a(X),R=a(Z,!0);t(Z),Me(2),t(X),t(k);var ie=s(k,2),Y=s(a(ie),2),ee=s(a(Y),2),fe=a(ee);V(fe),Me(2),t(ee);var J=s(ee,2);J.__click=Et;var g=a(J,!0);t(J);var C=s(J,2);{var U=S=>{var A=pl();A.__click=Ot;var T=a(A,!0);t(A),b(je=>{A.disabled=e(I)!==null,_(T,je)},[()=>e(I)==="cleanup"?"Deleting...":`Delete ${Ps(e(le).readings_to_delete)}`]),r(S,A)};p(C,S=>{e(le)&&e(le).readings_to_delete>0&&S(U)})}t(Y);var K=s(Y,2);{var se=S=>{var A=_l(),T=a(A);t(A),b(()=>_(T,`No readings older than ${e(Oe)??""} days.`)),r(S,A)};p(K,S=>{e(le)&&e(le).readings_to_delete===0&&S(se)})}t(ie),t(h),b((S,A)=>{_(B,S),_(R,A),J.disabled=e(I)!==null,_(g,e(I)==="cleanup-preview"?"Checking...":"Preview")},[()=>e(ue)?Ps(e(ue).total_readings):"—",()=>e(ue)?lt(e(ue).estimated_size_bytes):"—"]),q(fe,()=>e(Oe),S=>l(Oe,S)),r(c,h)};p(ma,c=>{e(O)==="storage"&&c(fa)})}t(Vs);var jt=s(Vs,2),ss=a(jt);ss.__click=()=>We("power");var ja=s(a(ss),2);let gt;t(ss);var ga=s(ss,2);{var ba=c=>{var h=fl(),k=s(a(h),2),j=a(k);j.__click=Ft;var P=s(a(j));t(j);var B=s(j,2);B.__click=Rt;var X=s(a(B));t(B),t(k),t(h),b(()=>{j.disabled=e(I)!==null,_(P,` ${e(I)==="reboot"?"Rebooting...":"Reboot"}`),B.disabled=e(I)!==null,_(X,` ${e(I)==="shutdown"?"Shutting down...":"Shutdown"}`)}),r(c,h)};p(ga,c=>{e(O)==="power"&&c(ba)})}t(jt),t(ut),b((c,h)=>{_(qt,e(G)?.hostname??"Unknown"),_(Gt,`v${e(G)?.version??"?"??""}`),_(Jt,c),_(Kt,e(G)?.ip_addresses?.[0]??"Unknown"),_(Wt,h),dt=E(Fs,1,"status-item ai-status svelte-hj1sc2",null,dt,{active:e(ye)?.available}),F(Qe,"aria-expanded",e(O)==="display"),pt=E(Zt,0,"chevron svelte-hj1sc2",null,pt,{rotated:e(O)==="display"}),F(Xe,"aria-expanded",e(O)==="homeassistant"),_t=E(na,0,"chevron svelte-hj1sc2",null,_t,{rotated:e(O)==="homeassistant"}),F(Ze,"aria-expanded",e(O)==="ai"),mt=E(va,0,"chevron svelte-hj1sc2",null,mt,{rotated:e(O)==="ai"}),F(es,"aria-expanded",e(O)==="storage"),ft=E(_a,0,"chevron svelte-hj1sc2",null,ft,{rotated:e(O)==="storage"}),F(ss,"aria-expanded",e(O)==="power"),gt=E(ja,0,"chevron svelte-hj1sc2",null,gt,{rotated:e(O)==="power"})},[()=>Ut(e(G)?.uptime_seconds??null),()=>e(ue)?Ps(e(ue).total_readings):"—"]),r(n,x)};p(Dt,n=>{e(Zs)?n($t):n(Vt,!1)})}t(Bs),r(kt,Bs),Ca()}ya(["click","change"]);export{Hl as component};
