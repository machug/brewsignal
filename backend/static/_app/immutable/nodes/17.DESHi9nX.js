import{d as ei,f as d,a as o,s as j,t as Ie,h as Jt,c as Nt}from"../chunks/Bkky6kvZ.js";import{a as si,s as c,p as Gs,az as Vt,h as e,o as ti,g as ai,c as t,A as ii,e as s,d as i,u as Ks,ax as ni,r as a,n as H,t as x,f as ve}from"../chunks/813s5maz.js";import{e as Ws,i as Ys}from"../chunks/j9QCVC2i.js";import{i as u}from"../chunks/Bf7HnLem.js";import{h as li}from"../chunks/BgIwEmqo.js";import{r as P,s as J}from"../chunks/UKAZQVVw.js";import{s as G}from"../chunks/LBYG0Yba.js";import{b as U}from"../chunks/Bjks-vZK.js";import{i as ri,s as oi,b as qs}from"../chunks/D4jp30Ch.js";import{c as b,f as ci,u as Ee,a as vi}from"../chunks/CbPjToI1.js";var di=d('<div class="loading-state svelte-hj1sc2"><div class="loading-spinner svelte-hj1sc2"></div> <span class="svelte-hj1sc2">Loading system information...</span></div>'),pi=d('<div class="info-grid svelte-hj1sc2"><div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Hostname</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Version</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Uptime</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">IP Address</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div></div>'),hi=d('<p class="text-muted svelte-hj1sc2">Unable to load system information</p>'),ui=d('<div class="setting-row sub-setting svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Smoothing Samples</span> <span class="setting-description svelte-hj1sc2">Number of readings to average</span></div> <select class="select-input-sm svelte-hj1sc2"><option class="svelte-hj1sc2">3</option><option class="svelte-hj1sc2">5</option><option class="svelte-hj1sc2">10</option><option class="svelte-hj1sc2">15</option><option class="svelte-hj1sc2">20</option></select></div>'),_i=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),fi=d('<p class="config-error svelte-hj1sc2"> </p>'),gi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),mi=d('<option class="svelte-hj1sc2"> </option>'),ji=d('<div class="loading-spinner-small svelte-hj1sc2"></div>'),bi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Connection Status</span></div> <span> </span></div>'),yi=d("<span> </span>"),wi=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),ki=d('<p class="config-error svelte-hj1sc2"> </p>'),xi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Si=d('<!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Home Assistant URL</span> <span class="setting-description svelte-hj1sc2">e.g., http://192.168.1.100:8123</span></div> <input type="url" placeholder="http://homeassistant.local:8123" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Access Token</span> <span class="setting-description svelte-hj1sc2">Long-lived access token from HA profile</span></div> <input type="password" placeholder="Enter token..." class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Test Connection</span></div> <div class="test-connection svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Temp Entity</span> <span class="setting-description svelte-hj1sc2">e.g., sensor.fermenter_room_temperature</span></div> <input type="text" placeholder="sensor.xxx_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Optional humidity sensor</span></div> <input type="text" placeholder="sensor.xxx_humidity" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Weather Entity</span> <span class="setting-description svelte-hj1sc2">For forecast display, e.g., weather.home</span></div> <input type="text" placeholder="weather.home" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Chamber Temperature Entity</span> <span class="setting-description svelte-hj1sc2">Temperature sensor inside fermentation chamber</span></div> <input type="text" placeholder="sensor.chamber_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Chamber Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Humidity sensor inside fermentation chamber</span></div> <input type="text" placeholder="sensor.chamber_humidity" class="input-field svelte-hj1sc2"/></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>',1),Ti=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Ci=d('<p class="config-error svelte-hj1sc2"> </p>'),Ai=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Mi=d(`<p class="section-note svelte-hj1sc2">Configure heater switches per batch. These are the default settings used when a batch doesn't specify its own.</p> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Default Target Temperature</span> <span class="setting-description svelte-hj1sc2"> </span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" step="0.5" class="input-field input-number svelte-hj1sc2"/> <span class="unit svelte-hj1sc2"> </span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Default Hysteresis</span> <span class="setting-description svelte-hj1sc2"> </span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" class="input-field input-number svelte-hj1sc2"/> <span class="unit svelte-hj1sc2"> </span></div></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>`,1),Ii=d('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Temperature Control</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Temperature Control</span> <span class="setting-description svelte-hj1sc2">Automatically control heaters for batches</span></div> <button type="button" aria-label="Toggle temperature control"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div>'),Ei=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Alert Threshold</span> <span class="setting-description svelte-hj1sc2">Alert when forecast differs from target by this amount (°C)</span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" min="1" max="15" step="0.5" class="input-field-sm svelte-hj1sc2"/> <span class="unit svelte-hj1sc2">°C</span></div></div> <p class="setting-hint mt-2 svelte-hj1sc2">Alerts are generated when the forecast high or low temperatures differ from your target fermentation temperature by more than the threshold.</p>',1),zi=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Fi=d('<p class="config-error svelte-hj1sc2"> </p>'),Hi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Pi=d('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Weather Alerts</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Weather Alerts</span> <span class="setting-description svelte-hj1sc2">Get alerts when forecast temps may affect fermentation</span></div> <button type="button" aria-label="Toggle weather alerts"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div>'),Ui=d('<option class="svelte-hj1sc2"> </option>'),Ri=d(`<div class="ollama-setup-guide svelte-hj1sc2"><h4 class="setup-guide-title svelte-hj1sc2">Setup Ollama (3 steps)</h4> <ol class="setup-steps svelte-hj1sc2"><li class="svelte-hj1sc2"><strong class="svelte-hj1sc2">Install Ollama</strong> <p class="svelte-hj1sc2">Download and install from <a href="https://ollama.ai/download" target="_blank" rel="noopener" class="svelte-hj1sc2">ollama.ai/download</a></p> <code class="setup-code svelte-hj1sc2">curl -fsSL https://ollama.ai/install.sh | sh</code></li> <li class="svelte-hj1sc2"><strong class="svelte-hj1sc2">Pull a model</strong> <p class="svelte-hj1sc2">Download a model (phi3:mini recommended for Pi)</p> <code class="setup-code svelte-hj1sc2">ollama pull phi3:mini</code></li> <li class="svelte-hj1sc2"><strong class="svelte-hj1sc2">Verify it's running</strong> <p class="svelte-hj1sc2">Ollama runs on port 11434 by default</p> <code class="setup-code svelte-hj1sc2">ollama list</code></li></ol> <p class="setup-note svelte-hj1sc2">Running Ollama on a different machine? Update the URL below to point to that server (e.g., http://192.168.1.100:11434)</p></div>`),Oi=d('<a target="_blank" rel="noopener" class="text-amber-400 hover:underline ml-1 svelte-hj1sc2">Get API key →</a>'),Bi=d('<p class="setting-hint mb-3 svelte-hj1sc2"> <!></p>'),Di=d('<div class="env-key-notice svelte-hj1sc2"><span class="env-key-icon svelte-hj1sc2">✓</span> <span class="svelte-hj1sc2">API key detected from environment variable. You can override it by entering a key above.</span></div>'),Li=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">API Key</span> <span class="setting-description svelte-hj1sc2"> </span></div> <input type="password" class="input-field svelte-hj1sc2"/></div> <!>',1),Ni=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ollama URL</span> <span class="setting-description svelte-hj1sc2">URL of your Ollama server</span></div> <input type="text" placeholder="http://localhost:11434" class="input-field svelte-hj1sc2"/></div>'),Vi=d('<option class="svelte-hj1sc2"> </option>'),Ji=d('<p class="setting-hint mb-3 svelte-hj1sc2"> </p>'),Gi=d('<span class="loading-dot svelte-hj1sc2"></span> Testing...',1),Ki=d('<p class="config-success mt-2 svelte-hj1sc2"> </p>'),Wi=d('<p class="config-error mt-2 svelte-hj1sc2"> </p>'),Yi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Provider</span> <span class="setting-description svelte-hj1sc2">Choose where to run the AI model</span></div> <select class="input-field input-select svelte-hj1sc2"></select></div> <!> <!> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Model</span> <span class="setting-description svelte-hj1sc2">AI model to use</span></div> <select class="input-field input-select svelte-hj1sc2"><option class="svelte-hj1sc2">Default</option><!></select></div> <!> <details class="mt-4 svelte-hj1sc2"><summary class="cursor-pointer text-zinc-400 hover:text-zinc-200 svelte-hj1sc2">Advanced Settings</summary> <div class="mt-3 space-y-3 svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature</span> <span class="setting-description svelte-hj1sc2">Higher = more creative, lower = more focused</span></div> <input type="number" min="0" max="2" step="0.1" class="input-field input-number svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Max Tokens</span> <span class="setting-description svelte-hj1sc2">Maximum response length</span></div> <input type="number" min="100" max="8000" step="100" class="input-field input-number svelte-hj1sc2"/></div></div></details> <div class="mt-4 svelte-hj1sc2"><button type="button" class="btn-secondary svelte-hj1sc2"><!></button> <!></div>',1),qi=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Qi=d('<p class="config-error svelte-hj1sc2"> </p>'),Xi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Zi=d('<div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Total Readings</span></div> <div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Estimated Size</span></div>',1),$i=d('<p class="text-muted svelte-hj1sc2">Unable to load storage stats</p>'),en=d('<button type="button" class="btn-danger-sm svelte-hj1sc2"> </button>'),sn=d('<p class="cleanup-message svelte-hj1sc2"> </p>'),tn=d('<span class="loading-dot svelte-hj1sc2"></span> Rebooting...',1),an=Jt('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" class="svelte-hj1sc2"></path></svg> Reboot System',1),nn=d('<span class="loading-dot svelte-hj1sc2"></span> Shutting down...',1),ln=Jt('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" class="svelte-hj1sc2"></path></svg> Shutdown System',1),rn=d(`<div class="grid gap-6 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">System Information</h2></div> <div class="card-body svelte-hj1sc2"><!></div></div> <div class="grid gap-6 md:grid-cols-2 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Application Settings</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature Units</span> <span class="setting-description svelte-hj1sc2">Display temperature in Celsius or Fahrenheit</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">°C</button> <button type="button">°F</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Gravity Units</span> <span class="setting-description svelte-hj1sc2">Display gravity as SG, Plato, or Brix</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">SG</button> <button type="button">°P</button> <button type="button">°Bx</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Minimum RSSI</span> <span class="setting-description svelte-hj1sc2">Ignore readings below this signal strength</span></div> <div class="rssi-input svelte-hj1sc2"><input type="number" min="-100" max="0" class="input-field-sm svelte-hj1sc2"/> <span class="input-suffix svelte-hj1sc2">dBm</span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Reading Smoothing</span> <span class="setting-description svelte-hj1sc2">Average multiple readings to reduce noise</span></div> <button type="button" aria-label="Toggle reading smoothing"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Identify by MAC</span> <span class="setting-description svelte-hj1sc2">Use MAC address instead of broadcast ID</span></div> <button type="button" aria-label="Toggle identify by MAC address"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Timezone</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description svelte-hj1sc2">Current timezone: <span class="font-mono text-[var(--accent)] svelte-hj1sc2"> </span></p> <div class="timezone-selector svelte-hj1sc2"><select class="select-input svelte-hj1sc2"></select> <!></div></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Home Assistant</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Integration</span> <span class="setting-description svelte-hj1sc2">Connect to Home Assistant for ambient temp and control</span></div> <button type="button" aria-label="Enable Home Assistant integration"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div> <!> <!> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">AI Brewing Assistant</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description mb-4 svelte-hj1sc2">Enable an AI assistant to help with recipe creation, fermentation troubleshooting, and brewing advice.
						Use a local model (Ollama) for free and private operation, or connect to cloud providers.</p> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable AI Assistant</span> <span class="setting-description svelte-hj1sc2">Turn on AI-powered brewing features</span></div> <button type="button" aria-label="Toggle AI assistant"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Storage & Data Cleanup</h2></div> <div class="card-body svelte-hj1sc2"><div class="storage-grid svelte-hj1sc2"><div class="storage-stats svelte-hj1sc2"><!></div> <div class="cleanup-section svelte-hj1sc2"><p class="section-description mb-3 svelte-hj1sc2">Remove old readings to free up storage. Readings older than the specified days will be permanently deleted.</p> <div class="cleanup-controls svelte-hj1sc2"><div class="cleanup-input-group svelte-hj1sc2"><label for="retention-days" class="svelte-hj1sc2">Keep readings from last</label> <input id="retention-days" type="number" min="1" max="365" class="input-field-sm svelte-hj1sc2"/> <span class="svelte-hj1sc2">days</span></div> <div class="cleanup-actions svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <!></div></div></div></div> <div class="card danger-zone svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Power Controls</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description danger-text svelte-hj1sc2">These actions will affect the entire system. Make sure you have saved any pending work.</p> <div class="power-buttons svelte-hj1sc2"><button type="button" class="btn-warning svelte-hj1sc2"><!></button> <button type="button" class="btn-danger svelte-hj1sc2"><!></button></div></div></div></div>`),on=d('<div class="page-container svelte-hj1sc2"><div class="page-header svelte-hj1sc2"><h1 class="page-title svelte-hj1sc2">System</h1> <p class="page-description svelte-hj1sc2">System settings, device management, and power controls</p> <div class="header-actions svelte-hj1sc2"><a href="/devices" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" class="svelte-hj1sc2"></path></svg> Devices</a> <a href="/calibration" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-hj1sc2"></path></svg> Calibration</a> <a href="/logging" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-hj1sc2"></path></svg> Logging</a> <a href="/system/maintenance" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" class="svelte-hj1sc2"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-hj1sc2"></path></svg> Data Maintenance</a></div></div> <!></div>');function jn(Gt,Kt){si(Kt,!0);let de=c(null),Je=c(null),Qs=c(Gs([])),be=c(""),Xs=c(!0),M=c(null),ye=c("C"),oe=c("sg"),Ge=c(-100),pe=c(!1),Ke=c(5),we=c(!1),We=c(!1),Ye=c(null),qe=c(!1),ke=c(30),ee=c(null),ae=c(!1),xe=c(""),Se=c(""),Qe=c(""),Xe=c(""),Ze=c(""),$e=c(""),ze=c(""),es=c(!1),he=c(null),ss=c(null),ts=c(!1),as=c(null),is=c(!1),ue=c(!1),ns=c(68),Fe=c(1),ls=c(!1),rs=c(null),os=c(!1),_e=c(!1),cs=c(3),vs=c(!1),ds=c(null),ps=c(!1),ce=c(!1),L=c("local"),fe=c(""),Te=c(""),He=c(""),Pe=c(.7),Ue=c(2e3),hs=c(!1),us=c(null),_s=c(!1),fs=c(!1),ge=c(null),Ce=c(Gs([])),Re=c(Gs([])),js=c(!1),ie=Ks(()=>b.config.temp_units==="C"),gs=Ks(()=>e(ie)?"°C":"°F");function Wt(n){return e(ie)?vi(n):n}function Yt(n){return e(ie)?ci(n):n}async function qt(){try{const n=await fetch("/api/system/info");n.ok&&t(de,await n.json(),!0)}catch(n){console.error("Failed to load system info:",n)}}async function Zs(){try{const n=await fetch("/api/system/storage");n.ok&&t(Je,await n.json(),!0)}catch(n){console.error("Failed to load storage stats:",n)}}async function Qt(){try{const[n,S]=await Promise.all([fetch("/api/system/timezones"),fetch("/api/system/timezone")]);if(n.ok){const R=await n.json();t(Qs,R.timezones||[],!0)}if(S.ok){const R=await S.json();t(be,R.timezone||"UTC",!0)}}catch(n){console.error("Failed to load timezones:",n)}}function $s(){t(ye,b.config.temp_units,!0),t(oe,b.config.sg_units,!0),t(Ge,b.config.min_rssi,!0),t(pe,b.config.smoothing_enabled,!0),t(Ke,b.config.smoothing_samples,!0),t(we,b.config.id_by_mac,!0),t(ae,b.config.ha_enabled,!0),t(xe,b.config.ha_url,!0),t(Se,b.config.ha_token,!0),t(Qe,b.config.ha_ambient_temp_entity_id,!0),t(Xe,b.config.ha_ambient_humidity_entity_id,!0),t(Ze,b.config.ha_chamber_temp_entity_id,!0),t($e,b.config.ha_chamber_humidity_entity_id,!0),t(ze,b.config.ha_weather_entity_id,!0),t(ue,b.config.temp_control_enabled,!0),t(ns,Math.round(Yt(b.config.temp_target)*2)/2),t(Fe,b.config.temp_units==="C"?Math.round(b.config.temp_hysteresis*(5/9)*100)/100:b.config.temp_hysteresis,!0),t(_e,b.config.weather_alerts_enabled,!0),t(cs,b.config.alert_temp_threshold,!0),t(ce,b.config.ai_enabled??!1,!0),t(L,b.config.ai_provider??"local",!0),t(fe,b.config.ai_model??"",!0),t(Te,b.config.ai_api_key??"",!0),t(He,b.config.ai_base_url??"",!0),t(Pe,b.config.ai_temperature??.7,!0),t(Ue,b.config.ai_max_tokens??2e3,!0)}async function Xt(){try{const n=await fetch("/api/assistant/providers");n.ok&&t(Ce,await n.json(),!0)}catch(n){console.error("Failed to load AI providers:",n)}}async function Zt(n){try{const S=await fetch(`/api/assistant/models/${n}`);if(S.ok){const R=await S.json();t(Re,R.models,!0)}}catch(S){console.error("Failed to load AI models:",S),t(Re,[],!0)}}async function $t(){try{const n=await fetch("/api/assistant/status");if(n.ok){const S=await n.json();t(js,S.has_env_api_key??!1,!0)}}catch(n){console.error("Failed to load AI status:",n)}}async function ea(){t(hs,!0),t(us,null),t(_s,!1);try{await Ee({ai_enabled:e(ce),ai_provider:e(L),ai_model:e(fe),ai_api_key:e(Te),ai_base_url:e(He),ai_temperature:e(Pe),ai_max_tokens:e(Ue)}),t(_s,!0),setTimeout(()=>t(_s,!1),3e3)}catch(n){t(us,n instanceof Error?n.message:"Failed to save AI settings",!0)}finally{t(hs,!1)}}async function sa(){t(fs,!0),t(ge,null);try{await Ee({ai_enabled:e(ce),ai_provider:e(L),ai_model:e(fe),ai_api_key:e(Te),ai_base_url:e(He),ai_temperature:e(Pe),ai_max_tokens:e(Ue)});const S=await(await fetch("/api/assistant/test",{method:"POST"})).json();t(ge,S,!0)}catch(n){t(ge,{success:!1,error:n instanceof Error?n.message:"Connection test failed"},!0)}finally{t(fs,!1)}}Vt(()=>{e(L)&&Zt(e(L))});async function ta(){t(We,!0),t(Ye,null),t(qe,!1);try{const n=await Ee({temp_units:e(ye),sg_units:e(oe),min_rssi:e(Ge),smoothing_enabled:e(pe),smoothing_samples:e(Ke),id_by_mac:e(we)});n.success?(t(qe,!0),setTimeout(()=>t(qe,!1),3e3)):t(Ye,n.error||"Failed to save settings",!0)}finally{t(We,!1)}}async function aa(){t(ts,!0),t(as,null),t(is,!1);try{const n=await Ee({ha_enabled:e(ae),ha_url:e(xe),ha_token:e(Se),ha_ambient_temp_entity_id:e(Qe),ha_ambient_humidity_entity_id:e(Xe),ha_chamber_temp_entity_id:e(Ze),ha_chamber_humidity_entity_id:e($e),ha_weather_entity_id:e(ze)});n.success?(t(is,!0),setTimeout(()=>t(is,!1),3e3),await st()):t(as,n.error||"Failed to save settings",!0)}finally{t(ts,!1)}}async function ia(){t(ls,!0),t(rs,null),t(os,!1);try{const n=Wt(e(ns)),S=e(ie)?e(Fe)*(9/5):e(Fe),R=await Ee({temp_control_enabled:e(ue),temp_target:n,temp_hysteresis:S});R.success?(t(os,!0),setTimeout(()=>t(os,!1),3e3)):t(rs,R.error||"Failed to save settings",!0)}finally{t(ls,!1)}}async function na(){t(vs,!0),t(ds,null),t(ps,!1);try{const n=await Ee({weather_alerts_enabled:e(_e),alert_temp_threshold:e(cs)});n.success?(t(ps,!0),setTimeout(()=>t(ps,!1),3e3)):t(ds,n.error||"Failed to save settings",!0)}finally{t(vs,!1)}}async function la(n){t(M,"timezone");try{(await fetch("/api/system/timezone",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:n})})).ok&&t(be,n,!0)}catch(S){console.error("Failed to set timezone:",S)}finally{t(M,null)}}async function ra(){t(M,"cleanup-preview");try{const n=await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(ke),confirm:!1})});n.ok&&t(ee,await n.json(),!0)}catch(n){console.error("Failed to preview cleanup:",n)}finally{t(M,null)}}async function oa(){if(!(!e(ee)||e(ee).readings_to_delete===0)&&confirm(`Delete ${e(ee).readings_to_delete.toLocaleString()} readings older than ${e(ke)} days?`)){t(M,"cleanup");try{(await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(ke),confirm:!0})})).ok&&(t(ee,null),await Zs())}catch(n){console.error("Failed to execute cleanup:",n)}finally{t(M,null)}}}async function ca(){if(confirm("Are you sure you want to reboot the system? The UI will be unavailable until restart completes.")){t(M,"reboot");try{await fetch("/api/system/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(n){console.error("Reboot command failed:",n)}finally{t(M,null)}}}async function va(){if(confirm("Are you sure you want to shut down the system? You will need physical access to restart.")){t(M,"shutdown");try{await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(n){console.error("Shutdown command failed:",n)}finally{t(M,null)}}}function da(n){if(!n)return"Unknown";const S=Math.floor(n/86400),R=Math.floor(n%86400/3600),Oe=Math.floor(n%3600/60),me=[];return S>0&&me.push(`${S}d`),R>0&&me.push(`${R}h`),Oe>0&&me.push(`${Oe}m`),me.length>0?me.join(" "):"< 1m"}function pa(n){return!Number.isFinite(n)||n<0?"0 B":n<1024?`${n} B`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/(1024*1024)).toFixed(1)} MB`}function et(n){return n.toLocaleString()}async function ha(){t(es,!0),t(he,null);try{const n=await fetch("/api/ha/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(xe),token:e(Se)})});n.ok?t(he,await n.json(),!0):t(he,{success:!1,message:"Request failed"},!0)}catch{t(he,{success:!1,message:"Network error"},!0)}finally{t(es,!1)}}async function st(){try{const n=await fetch("/api/ha/status");n.ok&&t(ss,await n.json(),!0)}catch(n){console.error("Failed to load HA status:",n)}}ti(async()=>{await Promise.all([qt(),Zs(),Qt(),st(),Xt(),$t()]),$s(),t(Xs,!1)}),Vt(()=>{b.loaded&&$s()});var bs=on();li("hj1sc2",n=>{ii(()=>{ni.title="System | BrewSignal"})});var ua=s(i(bs),2);{var _a=n=>{var S=di();o(n,S)},fa=n=>{var S=rn(),R=i(S),Oe=s(i(R),2),me=i(Oe);{var ga=l=>{var r=pi(),f=i(r),w=s(i(f),2),T=i(w,!0);a(w),a(f);var A=s(f,2),I=s(i(A),2),F=i(I);a(I),a(A);var E=s(A,2),z=s(i(E),2),O=i(z,!0);a(z),a(E);var D=s(E,2),N=s(i(D),2),K=i(N,!0);a(N),a(D),a(r),x(W=>{j(T,e(de).hostname),j(F,`v${e(de).version??""}`),j(O,W),j(K,e(de).ip_addresses.length>0?e(de).ip_addresses[0]:"Unknown")},[()=>da(e(de).uptime_seconds)]),o(l,r)},ma=l=>{var r=hi();o(l,r)};u(me,l=>{e(de)?l(ga):l(ma,!1)})}a(Oe),a(R);var ys=s(R,2),ws=i(ys),tt=s(i(ws),2),ks=i(tt),at=s(i(ks),2),xs=i(at);let it;xs.__click=()=>t(ye,"C");var nt=s(xs,2);let lt;nt.__click=()=>t(ye,"F"),a(at),a(ks);var Ss=s(ks,2),rt=s(i(Ss),2),Ts=i(rt);let ot;Ts.__click=()=>t(oe,"sg");var Cs=s(Ts,2);let ct;Cs.__click=()=>t(oe,"plato");var vt=s(Cs,2);let dt;vt.__click=()=>t(oe,"brix"),a(rt),a(Ss);var As=s(Ss,2),pt=s(i(As),2),ht=i(pt);P(ht),H(2),a(pt),a(As);var Ms=s(As,2),Is=s(i(Ms),2);let ut;Is.__click=()=>t(pe,!e(pe)),a(Ms);var _t=s(Ms,2);{var ja=l=>{var r=ui(),f=s(i(r),2),w=i(f);w.value=w.__value=3;var T=s(w);T.value=T.__value=5;var A=s(T);A.value=A.__value=10;var I=s(A);I.value=I.__value=15;var F=s(I);F.value=F.__value=20,a(f),a(r),qs(f,()=>e(Ke),E=>t(Ke,E)),o(l,r)};u(_t,l=>{e(pe)&&l(ja)})}var Es=s(_t,2),zs=s(i(Es),2);let ft;zs.__click=()=>t(we,!e(we)),a(Es);var gt=s(Es,2),Be=i(gt);Be.__click=ta;var ba=i(Be);{var ya=l=>{var r=_i();H(),o(l,r)},wa=l=>{var r=Ie("Save Settings");o(l,r)};u(ba,l=>{e(We)?l(ya):l(wa,!1)})}a(Be);var mt=s(Be,2);{var ka=l=>{var r=fi(),f=i(r,!0);a(r),x(()=>j(f,e(Ye))),o(l,r)};u(mt,l=>{e(Ye)&&l(ka)})}var xa=s(mt,2);{var Sa=l=>{var r=gi();o(l,r)};u(xa,l=>{e(qe)&&l(Sa)})}a(gt),a(tt),a(ws);var jt=s(ws,2),bt=s(i(jt),2),Fs=i(bt),yt=s(i(Fs)),Ta=i(yt,!0);a(yt),a(Fs);var wt=s(Fs,2),ne=i(wt);ne.__change=l=>la(l.currentTarget.value),Ws(ne,21,()=>e(Qs),Ys,(l,r)=>{var f=mi(),w=i(f,!0);a(f);var T={};x(()=>{j(w,e(r)),T!==(T=e(r))&&(f.value=(f.__value=e(r))??"")}),o(l,f)}),a(ne);var kt;ri(ne);var Ca=s(ne,2);{var Aa=l=>{var r=ji();o(l,r)};u(Ca,l=>{e(M)==="timezone"&&l(Aa)})}a(wt),a(bt),a(jt),a(ys);var Hs=s(ys,2),xt=s(i(Hs),2),Ps=i(xt),Us=s(i(Ps),2);let St;Us.__click=()=>t(ae,!e(ae)),a(Ps);var Ma=s(Ps,2);{var Ia=l=>{var r=Si(),f=ve(r);{var w=v=>{var g=bi(),h=s(i(g),2);let m;var Q=i(h,!0);a(h),a(g),x(()=>{m=G(h,1,"status-badge svelte-hj1sc2",null,m,{connected:e(ss).connected}),j(Q,e(ss).connected?"Connected":"Disconnected")}),o(v,g)};u(f,v=>{e(ss)&&v(w)})}var T=s(f,2),A=s(i(T),2);P(A),a(T);var I=s(T,2),F=s(i(I),2);P(F),a(I);var E=s(I,2),z=s(i(E),2),O=i(z);O.__click=ha;var D=i(O,!0);a(O);var N=s(O,2);{var K=v=>{var g=yi();let h;var m=i(g,!0);a(g),x(()=>{h=G(g,1,"test-result svelte-hj1sc2",null,h,{success:e(he).success}),j(m,e(he).message)}),o(v,g)};u(N,v=>{e(he)&&v(K)})}a(z),a(E);var W=s(E,2),V=s(i(W),2);P(V),a(W);var se=s(W,2),k=s(i(se),2);P(k),a(se);var C=s(se,2),B=s(i(C),2);P(B),a(C);var Y=s(C,2),te=s(i(Y),2);P(te),a(Y);var X=s(Y,2),q=s(i(X),2);P(q),a(X);var Z=s(X,2),le=i(Z);le.__click=aa;var Ae=i(le);{var re=v=>{var g=wi();H(),o(v,g)},Ve=v=>{var g=Ie("Save HA Settings");o(v,g)};u(Ae,v=>{e(ts)?v(re):v(Ve,!1)})}a(le);var Me=s(le,2);{var p=v=>{var g=ki(),h=i(g,!0);a(g),x(()=>j(h,e(as))),o(v,g)};u(Me,v=>{e(as)&&v(p)})}var _=s(Me,2);{var y=v=>{var g=xi();o(v,g)};u(_,v=>{e(is)&&v(y)})}a(Z),x(()=>{O.disabled=e(es)||!e(xe)||!e(Se),j(D,e(es)?"Testing...":"Test"),le.disabled=e(ts)}),U(A,()=>e(xe),v=>t(xe,v)),U(F,()=>e(Se),v=>t(Se,v)),U(V,()=>e(Qe),v=>t(Qe,v)),U(k,()=>e(Xe),v=>t(Xe,v)),U(B,()=>e(ze),v=>t(ze,v)),U(te,()=>e(Ze),v=>t(Ze,v)),U(q,()=>e($e),v=>t($e,v)),o(l,r)};u(Ma,l=>{e(ae)&&l(Ia)})}a(xt),a(Hs);var Tt=s(Hs,2);{var Ea=l=>{var r=Ii(),f=s(i(r),2),w=i(f),T=s(i(w),2);let A;T.__click=()=>t(ue,!e(ue)),a(w);var I=s(w,2);{var F=E=>{var z=Mi(),O=s(ve(z),2),D=i(O),N=s(i(D),2),K=i(N);a(N),a(D);var W=s(D,2),V=i(W);P(V);var se=s(V,2),k=i(se,!0);a(se),a(W),a(O);var C=s(O,2),B=i(C),Y=s(i(B),2),te=i(Y);a(Y),a(B);var X=s(B,2),q=i(X);P(q);var Z=s(q,2),le=i(Z,!0);a(Z),a(X),a(C);var Ae=s(C,2),re=i(Ae);re.__click=ia;var Ve=i(re);{var Me=h=>{var m=Ti();H(),o(h,m)},p=h=>{var m=Ie("Save Control Settings");o(h,m)};u(Ve,h=>{e(ls)?h(Me):h(p,!1)})}a(re);var _=s(re,2);{var y=h=>{var m=Ci(),Q=i(m,!0);a(m),x(()=>j(Q,e(rs))),o(h,m)};u(_,h=>{e(rs)&&h(y)})}var v=s(_,2);{var g=h=>{var m=Ai();o(h,m)};u(v,h=>{e(os)&&h(g)})}a(Ae),x(()=>{j(K,`Desired fermentation temperature (${e(gs)??""})`),J(V,"min",e(ie)?0:32),J(V,"max",e(ie)?38:100),j(k,e(gs)),j(te,`± tolerance before triggering (${e(gs)??""})`),J(q,"min",e(ie)?.3:.5),J(q,"max",e(ie)?5.5:10),J(q,"step",e(ie)?.25:.5),j(le,e(gs)),re.disabled=e(ls)}),U(V,()=>e(ns),h=>t(ns,h)),U(q,()=>e(Fe),h=>t(Fe,h)),o(E,z)};u(I,E=>{e(ue)&&E(F)})}a(f),a(r),x(()=>{A=G(T,1,"toggle svelte-hj1sc2",null,A,{active:e(ue)}),J(T,"aria-pressed",e(ue))}),o(l,r)};u(Tt,l=>{e(ae)&&l(Ea)})}var Ct=s(Tt,2);{var za=l=>{var r=Pi(),f=s(i(r),2),w=i(f),T=s(i(w),2);let A;T.__click=()=>t(_e,!e(_e)),a(w);var I=s(w,2);{var F=k=>{var C=Ei(),B=ve(C),Y=s(i(B),2),te=i(Y);P(te),H(2),a(Y),a(B),H(2),U(te,()=>e(cs),X=>t(cs,X)),o(k,C)};u(I,k=>{e(_e)&&k(F)})}var E=s(I,2),z=i(E);z.__click=na;var O=i(z);{var D=k=>{var C=zi();H(),o(k,C)},N=k=>{var C=Ie("Save Alert Settings");o(k,C)};u(O,k=>{e(vs)?k(D):k(N,!1)})}a(z);var K=s(z,2);{var W=k=>{var C=Fi(),B=i(C,!0);a(C),x(()=>j(B,e(ds))),o(k,C)};u(K,k=>{e(ds)&&k(W)})}var V=s(K,2);{var se=k=>{var C=Hi();o(k,C)};u(V,k=>{e(ps)&&k(se)})}a(E),a(f),a(r),x(()=>{A=G(T,1,"toggle svelte-hj1sc2",null,A,{active:e(_e)}),J(T,"aria-pressed",e(_e)),z.disabled=e(vs)}),o(l,r)};u(Ct,l=>{e(ae)&&e(ze)&&l(za)})}var Rs=s(Ct,2),At=s(i(Rs),2),Os=s(i(At),2),Bs=s(i(Os),2);let Mt;Bs.__click=()=>t(ce,!e(ce)),a(Os);var It=s(Os,2);{var Fa=l=>{var r=Yi(),f=ve(r),w=s(i(f),2);Ws(w,21,()=>e(Ce),Ys,(p,_)=>{var y=Ui(),v=i(y,!0);a(y);var g={};x(()=>{j(v,e(_).name),g!==(g=e(_).id)&&(y.value=(y.__value=e(_).id)??"")}),o(p,y)}),a(w),a(f);var T=s(f,2);{var A=p=>{var _=Ri();o(p,_)},I=p=>{var _=Nt(),y=ve(_);{var v=g=>{const h=Ks(()=>e(Ce).find(je=>je.id===e(L)));var m=Bi(),Q=i(m),Js=s(Q);{var $=je=>{var Lt=Oi();x(()=>J(Lt,"href",e(h).setup_url)),o(je,Lt)};u(Js,je=>{e(h)?.setup_url&&je($)})}a(m),x(()=>j(Q,`${e(h)?.description??""} `)),o(g,m)};u(y,g=>{e(Ce).find(h=>h.id===e(L))&&g(v)},!0)}o(p,_)};u(T,p=>{e(L)==="local"?p(A):p(I,!1)})}var F=s(T,2);{var E=p=>{var _=Li(),y=ve(_),v=i(y),g=s(i(v),2),h=i(g);a(g),a(v);var m=s(v,2);P(m),a(y);var Q=s(y,2);{var Js=$=>{var je=Di();o($,je)};u(Q,$=>{e(js)&&!e(Te)&&$(Js)})}x($=>{j(h,`Your API key for ${$??""}`),J(m,"placeholder",e(js)?"(using environment variable)":"sk-...")},[()=>e(Ce).find($=>$.id===e(L))?.name]),U(m,()=>e(Te),$=>t(Te,$)),o(p,_)};u(F,p=>{e(Ce).find(_=>_.id===e(L))?.requires_api_key&&p(E)})}var z=s(F,2);{var O=p=>{var _=Ni(),y=s(i(_),2);P(y),a(_),U(y,()=>e(He),v=>t(He,v)),o(p,_)};u(z,p=>{e(L)==="local"&&p(O)})}var D=s(z,2),N=s(i(D),2),K=i(N);K.value=K.__value="";var W=s(K);Ws(W,17,()=>e(Re),Ys,(p,_)=>{var y=Vi(),v=i(y,!0);a(y);var g={};x(()=>{j(v,e(_).name),g!==(g=e(_).id)&&(y.value=(y.__value=e(_).id)??"")}),o(p,y)}),a(N),a(D);var V=s(D,2);{var se=p=>{var _=Ji(),y=i(_,!0);a(_),x(v=>j(y,v),[()=>e(Re).find(v=>v.id===e(fe))?.description]),o(p,_)};u(V,p=>{e(Re).find(_=>_.id===e(fe))&&p(se)})}var k=s(V,2),C=s(i(k),2),B=i(C),Y=s(i(B),2);P(Y),a(B);var te=s(B,2),X=s(i(te),2);P(X),a(te),a(C),a(k);var q=s(k,2),Z=i(q);Z.__click=sa;var le=i(Z);{var Ae=p=>{var _=Gi();H(),o(p,_)},re=p=>{var _=Ie("Test Connection");o(p,_)};u(le,p=>{e(fs)?p(Ae):p(re,!1)})}a(Z);var Ve=s(Z,2);{var Me=p=>{var _=Nt(),y=ve(_);{var v=h=>{var m=Ki(),Q=i(m);a(m),x(()=>j(Q,`Connected! Response: "${e(ge).response??""}"`)),o(h,m)},g=h=>{var m=Wi(),Q=i(m,!0);a(m),x(()=>j(Q,e(ge).error)),o(h,m)};u(y,h=>{e(ge).success?h(v):h(g,!1)})}o(p,_)};u(Ve,p=>{e(ge)&&p(Me)})}a(q),x(()=>Z.disabled=e(fs)),qs(w,()=>e(L),p=>t(L,p)),qs(N,()=>e(fe),p=>t(fe,p)),U(Y,()=>e(Pe),p=>t(Pe,p)),U(X,()=>e(Ue),p=>t(Ue,p)),o(l,r)};u(It,l=>{e(ce)&&l(Fa)})}var Et=s(It,2),De=i(Et);De.__click=ea;var Ha=i(De);{var Pa=l=>{var r=qi();H(),o(l,r)},Ua=l=>{var r=Ie("Save AI Settings");o(l,r)};u(Ha,l=>{e(hs)?l(Pa):l(Ua,!1)})}a(De);var zt=s(De,2);{var Ra=l=>{var r=Qi(),f=i(r,!0);a(r),x(()=>j(f,e(us))),o(l,r)};u(zt,l=>{e(us)&&l(Ra)})}var Oa=s(zt,2);{var Ba=l=>{var r=Xi();o(l,r)};u(Oa,l=>{e(_s)&&l(Ba)})}a(Et),a(At),a(Rs);var Ds=s(Rs,2),Ft=s(i(Ds),2),Ht=i(Ft),Ls=i(Ht),Da=i(Ls);{var La=l=>{var r=Zi(),f=ve(r),w=i(f),T=i(w,!0);a(w),H(2),a(f);var A=s(f,2),I=i(A),F=i(I,!0);a(I),H(2),a(A),x((E,z)=>{j(T,E),j(F,z)},[()=>et(e(Je).total_readings),()=>pa(e(Je).estimated_size_bytes)]),o(l,r)},Na=l=>{var r=$i();o(l,r)};u(Da,l=>{e(Je)?l(La):l(Na,!1)})}a(Ls);var Pt=s(Ls,2),Ns=s(i(Pt),2),Vs=i(Ns),Ut=s(i(Vs),2);P(Ut),H(2),a(Vs);var Rt=s(Vs,2),Le=i(Rt);Le.__click=ra;var Va=i(Le,!0);a(Le);var Ja=s(Le,2);{var Ga=l=>{var r=en();r.__click=oa;var f=i(r,!0);a(r),x(w=>{r.disabled=e(M)!==null,j(f,w)},[()=>e(M)==="cleanup"?"Deleting...":`Delete ${et(e(ee).readings_to_delete)} readings`]),o(l,r)};u(Ja,l=>{e(ee)&&e(ee).readings_to_delete>0&&l(Ga)})}a(Rt),a(Ns);var Ka=s(Ns,2);{var Wa=l=>{var r=sn(),f=i(r);a(r),x(()=>j(f,`No readings older than ${e(ke)??""} days found.`)),o(l,r)};u(Ka,l=>{e(ee)&&e(ee).readings_to_delete===0&&l(Wa)})}a(Pt),a(Ht),a(Ft),a(Ds);var Ot=s(Ds,2),Bt=s(i(Ot),2),Dt=s(i(Bt),2),Ne=i(Dt);Ne.__click=ca;var Ya=i(Ne);{var qa=l=>{var r=tn();H(),o(l,r)},Qa=l=>{var r=an();H(),o(l,r)};u(Ya,l=>{e(M)==="reboot"?l(qa):l(Qa,!1)})}a(Ne);var ms=s(Ne,2);ms.__click=va;var Xa=i(ms);{var Za=l=>{var r=nn();H(),o(l,r)},$a=l=>{var r=ln();H(),o(l,r)};u(Xa,l=>{e(M)==="shutdown"?l(Za):l($a,!1)})}a(ms),a(Dt),a(Bt),a(Ot),a(S),x(()=>{it=G(xs,1,"unit-btn svelte-hj1sc2",null,it,{active:e(ye)==="C"}),lt=G(nt,1,"unit-btn svelte-hj1sc2",null,lt,{active:e(ye)==="F"}),ot=G(Ts,1,"unit-btn svelte-hj1sc2",null,ot,{active:e(oe)==="sg"}),ct=G(Cs,1,"unit-btn svelte-hj1sc2",null,ct,{active:e(oe)==="plato"}),dt=G(vt,1,"unit-btn svelte-hj1sc2",null,dt,{active:e(oe)==="brix"}),ut=G(Is,1,"toggle svelte-hj1sc2",null,ut,{active:e(pe)}),J(Is,"aria-pressed",e(pe)),ft=G(zs,1,"toggle svelte-hj1sc2",null,ft,{active:e(we)}),J(zs,"aria-pressed",e(we)),Be.disabled=e(We),j(Ta,e(be)),ne.disabled=e(M)==="timezone",kt!==(kt=e(be))&&(ne.value=(ne.__value=e(be))??"",oi(ne,e(be))),St=G(Us,1,"toggle svelte-hj1sc2",null,St,{active:e(ae)}),J(Us,"aria-pressed",e(ae)),Mt=G(Bs,1,"toggle svelte-hj1sc2",null,Mt,{active:e(ce)}),J(Bs,"aria-pressed",e(ce)),De.disabled=e(hs),Le.disabled=e(M)!==null,j(Va,e(M)==="cleanup-preview"?"Checking...":"Preview"),Ne.disabled=e(M)!==null,ms.disabled=e(M)!==null}),U(ht,()=>e(Ge),l=>t(Ge,l)),U(Ut,()=>e(ke),l=>t(ke,l)),o(n,S)};u(ua,n=>{e(Xs)?n(_a):n(fa,!1)})}a(bs),o(Gt,bs),ai()}ei(["click","change"]);export{jn as component};
