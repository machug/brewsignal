import{d as ti,f as d,a as o,s as m,t as Pe,h as Vt,c as Gt}from"../chunks/BPY3LF1i.js";import{a as ai,s as c,p as Ks,az as Jt,h as e,o as ii,g as li,c as i,A as ni,e as s,d as a,u as Ws,ax as ri,r as t,n as R,t as k,f as de}from"../chunks/WzhiZOZ9.js";import{e as qs,i as Ys}from"../chunks/DnC7am1E.js";import{i as h}from"../chunks/DTo_ih-i.js";import{h as oi}from"../chunks/BJzfFUzm.js";import{r as U,s as X}from"../chunks/D5Ox4mlS.js";import{s as Z}from"../chunks/BYYdgBsh.js";import{b as B}from"../chunks/Cw-VE3R0.js";import{i as ci,s as vi,b as Qs}from"../chunks/BX-VZZUc.js";import{c as b,f as di,u as Ee,a as pi}from"../chunks/Bg9PSRz2.js";var hi=d('<div class="loading-state svelte-hj1sc2"><div class="loading-spinner svelte-hj1sc2"></div> <span class="svelte-hj1sc2">Loading system information...</span></div>'),ui=d('<span class="text-muted svelte-hj1sc2"> </span>'),_i=d('<span class="flex items-center gap-2 svelte-hj1sc2"><span class="status-dot status-dot-active svelte-hj1sc2"></span> <!></span>'),fi=d('<span class="text-muted svelte-hj1sc2">Not detected</span>'),gi=d('<div class="info-grid svelte-hj1sc2"><div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Hostname</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Version</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Uptime</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">IP Address</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">AI Accelerator</span> <span class="info-value font-mono svelte-hj1sc2"><!></span></div></div>'),mi=d('<p class="text-muted svelte-hj1sc2">Unable to load system information</p>'),ji=d('<div class="setting-row sub-setting svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Smoothing Samples</span> <span class="setting-description svelte-hj1sc2">Number of readings to average</span></div> <select class="select-input-sm svelte-hj1sc2"><option class="svelte-hj1sc2">3</option><option class="svelte-hj1sc2">5</option><option class="svelte-hj1sc2">10</option><option class="svelte-hj1sc2">15</option><option class="svelte-hj1sc2">20</option></select></div>'),bi=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),yi=d('<p class="config-error svelte-hj1sc2"> </p>'),wi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),ki=d('<option class="svelte-hj1sc2"> </option>'),xi=d('<div class="loading-spinner-small svelte-hj1sc2"></div>'),Si=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Connection Status</span></div> <span> </span></div>'),Ai=d("<span> </span>"),Ti=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Ci=d('<p class="config-error svelte-hj1sc2"> </p>'),Mi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Ii=d('<!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Home Assistant URL</span> <span class="setting-description svelte-hj1sc2">e.g., http://192.168.1.100:8123</span></div> <input type="url" placeholder="http://homeassistant.local:8123" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Access Token</span> <span class="setting-description svelte-hj1sc2">Long-lived access token from HA profile</span></div> <input type="password" placeholder="Enter token..." class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Test Connection</span></div> <div class="test-connection svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Temp Entity</span> <span class="setting-description svelte-hj1sc2">e.g., sensor.fermenter_room_temperature</span></div> <input type="text" placeholder="sensor.xxx_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Optional humidity sensor</span></div> <input type="text" placeholder="sensor.xxx_humidity" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Weather Entity</span> <span class="setting-description svelte-hj1sc2">For forecast display, e.g., weather.home</span></div> <input type="text" placeholder="weather.home" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Chamber Temperature Entity</span> <span class="setting-description svelte-hj1sc2">Temperature sensor inside fermentation chamber</span></div> <input type="text" placeholder="sensor.chamber_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Chamber Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Humidity sensor inside fermentation chamber</span></div> <input type="text" placeholder="sensor.chamber_humidity" class="input-field svelte-hj1sc2"/></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>',1),Pi=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Ei=d('<p class="config-error svelte-hj1sc2"> </p>'),Fi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Hi=d(`<p class="section-note svelte-hj1sc2">Configure heater switches per batch. These are the default settings used when a batch doesn't specify its own.</p> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Default Target Temperature</span> <span class="setting-description svelte-hj1sc2"> </span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" step="0.5" class="input-field input-number svelte-hj1sc2"/> <span class="unit svelte-hj1sc2"> </span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Default Hysteresis</span> <span class="setting-description svelte-hj1sc2"> </span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" class="input-field input-number svelte-hj1sc2"/> <span class="unit svelte-hj1sc2"> </span></div></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>`,1),zi=d('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Temperature Control</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Temperature Control</span> <span class="setting-description svelte-hj1sc2">Automatically control heaters for batches</span></div> <button type="button" aria-label="Toggle temperature control"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div>'),Oi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Alert Threshold</span> <span class="setting-description svelte-hj1sc2">Alert when forecast differs from target by this amount (°C)</span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" min="1" max="15" step="0.5" class="input-field-sm svelte-hj1sc2"/> <span class="unit svelte-hj1sc2">°C</span></div></div> <p class="setting-hint mt-2 svelte-hj1sc2">Alerts are generated when the forecast high or low temperatures differ from your target fermentation temperature by more than the threshold.</p>',1),Ri=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Ui=d('<p class="config-error svelte-hj1sc2"> </p>'),Bi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Li=d('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Weather Alerts</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Weather Alerts</span> <span class="setting-description svelte-hj1sc2">Get alerts when forecast temps may affect fermentation</span></div> <button type="button" aria-label="Toggle weather alerts"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div>'),Di=d('<option class="svelte-hj1sc2"> </option>'),Ni=d(`<div class="ollama-setup-guide svelte-hj1sc2"><h4 class="setup-guide-title svelte-hj1sc2">Ollama Setup Options</h4> <div class="setup-option svelte-hj1sc2"><strong class="option-title svelte-hj1sc2">Option 1: Remote Ollama (Recommended)</strong> <p class="svelte-hj1sc2">Run Ollama on a PC/Mac with a GPU and connect over your network. Much faster and supports all features.</p> <ol class="setup-steps svelte-hj1sc2"><li class="svelte-hj1sc2">Install Ollama on your PC/Mac from <a href="https://ollama.ai/download" target="_blank" rel="noopener" class="svelte-hj1sc2">ollama.ai/download</a></li> <li class="svelte-hj1sc2">Set environment variable to allow network access: <code class="setup-code svelte-hj1sc2">OLLAMA_HOST=0.0.0.0 ollama serve</code></li> <li class="svelte-hj1sc2">Pull a model: <code class="setup-code-inline svelte-hj1sc2">ollama pull llama3:8b</code></li> <li class="svelte-hj1sc2">Enter your PC's IP in the URL field below (e.g., http://192.168.1.100:11434)</li></ol></div> <div class="setup-option svelte-hj1sc2"><strong class="option-title svelte-hj1sc2">Option 2: Local on Pi (Limited)</strong> <p class="svelte-hj1sc2">Running on Pi requires a <a href="https://www.raspberrypi.com/products/ai-hat-plus-2/" target="_blank" rel="noopener" class="svelte-hj1sc2">Raspberry Pi 5 with AI HAT+</a> for acceptable performance. Without AI acceleration, responses will be very slow.</p> <ol class="setup-steps svelte-hj1sc2"><li class="svelte-hj1sc2">Install: <code class="setup-code-inline svelte-hj1sc2">curl -fsSL https://ollama.ai/install.sh | sh</code></li> <li class="svelte-hj1sc2">Pull a small model: <code class="setup-code-inline svelte-hj1sc2">ollama pull smollm2:1.7b</code></li></ol></div></div>`),Gi=d('<a target="_blank" rel="noopener" class="text-amber-400 hover:underline ml-1 svelte-hj1sc2">Get API key →</a>'),Ji=d('<p class="setting-hint mb-3 svelte-hj1sc2"> <!></p>'),Vi=d('<div class="env-key-notice svelte-hj1sc2"><span class="env-key-icon svelte-hj1sc2">✓</span> <span class="svelte-hj1sc2">API key detected from environment variable. You can override it by entering a key above.</span></div>'),Ki=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">API Key</span> <span class="setting-description svelte-hj1sc2"> </span></div> <input type="password" class="input-field svelte-hj1sc2"/></div> <!>',1),Wi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ollama URL</span> <span class="setting-description svelte-hj1sc2">URL of your Ollama server</span></div> <input type="text" placeholder="http://localhost:11434" class="input-field svelte-hj1sc2"/></div>'),qi=d('<option class="svelte-hj1sc2"> </option>'),Yi=d('<p class="setting-hint mb-3 svelte-hj1sc2"> </p>'),Qi=d('<span class="loading-dot svelte-hj1sc2"></span> Testing...',1),Xi=d('<p class="config-success mt-2 svelte-hj1sc2"> </p>'),Zi=d('<p class="config-error mt-2 svelte-hj1sc2"> </p>'),$i=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Provider</span> <span class="setting-description svelte-hj1sc2">Choose where to run the AI model</span></div> <select class="input-field input-select svelte-hj1sc2"></select></div> <!> <!> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Model</span> <span class="setting-description svelte-hj1sc2">AI model to use</span></div> <select class="input-field input-select svelte-hj1sc2"><option class="svelte-hj1sc2">Default</option><!></select></div> <!> <details class="mt-4 svelte-hj1sc2"><summary class="cursor-pointer text-zinc-400 hover:text-zinc-200 svelte-hj1sc2">Advanced Settings</summary> <div class="mt-3 space-y-3 svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature</span> <span class="setting-description svelte-hj1sc2">Higher = more creative, lower = more focused</span></div> <input type="number" min="0" max="2" step="0.1" class="input-field input-number svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Max Tokens</span> <span class="setting-description svelte-hj1sc2">Maximum response length</span></div> <input type="number" min="100" max="8000" step="100" class="input-field input-number svelte-hj1sc2"/></div></div></details> <div class="mt-4 svelte-hj1sc2"><button type="button" class="btn-secondary svelte-hj1sc2"><!></button> <!></div>',1),el=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),sl=d('<p class="config-error svelte-hj1sc2"> </p>'),tl=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),al=d('<div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Total Readings</span></div> <div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Estimated Size</span></div>',1),il=d('<p class="text-muted svelte-hj1sc2">Unable to load storage stats</p>'),ll=d('<button type="button" class="btn-danger-sm svelte-hj1sc2"> </button>'),nl=d('<p class="cleanup-message svelte-hj1sc2"> </p>'),rl=d('<span class="loading-dot svelte-hj1sc2"></span> Rebooting...',1),ol=Vt('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" class="svelte-hj1sc2"></path></svg> Reboot System',1),cl=d('<span class="loading-dot svelte-hj1sc2"></span> Shutting down...',1),vl=Vt('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" class="svelte-hj1sc2"></path></svg> Shutdown System',1),dl=d(`<div class="grid gap-6 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">System Information</h2></div> <div class="card-body svelte-hj1sc2"><!></div></div> <div class="grid gap-6 md:grid-cols-2 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Application Settings</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature Units</span> <span class="setting-description svelte-hj1sc2">Display temperature in Celsius or Fahrenheit</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">°C</button> <button type="button">°F</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Gravity Units</span> <span class="setting-description svelte-hj1sc2">Display gravity as SG, Plato, or Brix</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">SG</button> <button type="button">°P</button> <button type="button">°Bx</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Minimum RSSI</span> <span class="setting-description svelte-hj1sc2">Ignore readings below this signal strength</span></div> <div class="rssi-input svelte-hj1sc2"><input type="number" min="-100" max="0" class="input-field-sm svelte-hj1sc2"/> <span class="input-suffix svelte-hj1sc2">dBm</span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Reading Smoothing</span> <span class="setting-description svelte-hj1sc2">Average multiple readings to reduce noise</span></div> <button type="button" aria-label="Toggle reading smoothing"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Identify by MAC</span> <span class="setting-description svelte-hj1sc2">Use MAC address instead of broadcast ID</span></div> <button type="button" aria-label="Toggle identify by MAC address"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Timezone</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description svelte-hj1sc2">Current timezone: <span class="font-mono text-[var(--accent)] svelte-hj1sc2"> </span></p> <div class="timezone-selector svelte-hj1sc2"><select class="select-input svelte-hj1sc2"></select> <!></div></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Home Assistant</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Integration</span> <span class="setting-description svelte-hj1sc2">Connect to Home Assistant for ambient temp and control</span></div> <button type="button" aria-label="Enable Home Assistant integration"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div> <!> <!> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">AI Brewing Assistant</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description mb-4 svelte-hj1sc2">Enable an AI assistant to help with recipe creation, fermentation troubleshooting, and brewing advice.
						Use a local model (Ollama) for free and private operation, or connect to cloud providers.</p> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable AI Assistant</span> <span class="setting-description svelte-hj1sc2">Turn on AI-powered brewing features</span></div> <button type="button" aria-label="Toggle AI assistant"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Storage & Data Cleanup</h2></div> <div class="card-body svelte-hj1sc2"><div class="storage-grid svelte-hj1sc2"><div class="storage-stats svelte-hj1sc2"><!></div> <div class="cleanup-section svelte-hj1sc2"><p class="section-description mb-3 svelte-hj1sc2">Remove old readings to free up storage. Readings older than the specified days will be permanently deleted.</p> <div class="cleanup-controls svelte-hj1sc2"><div class="cleanup-input-group svelte-hj1sc2"><label for="retention-days" class="svelte-hj1sc2">Keep readings from last</label> <input id="retention-days" type="number" min="1" max="365" class="input-field-sm svelte-hj1sc2"/> <span class="svelte-hj1sc2">days</span></div> <div class="cleanup-actions svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <!></div></div></div></div> <div class="card danger-zone svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Power Controls</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description danger-text svelte-hj1sc2">These actions will affect the entire system. Make sure you have saved any pending work.</p> <div class="power-buttons svelte-hj1sc2"><button type="button" class="btn-warning svelte-hj1sc2"><!></button> <button type="button" class="btn-danger svelte-hj1sc2"><!></button></div></div></div></div>`),pl=d('<div class="page-container svelte-hj1sc2"><div class="page-header svelte-hj1sc2"><h1 class="page-title svelte-hj1sc2">System</h1> <p class="page-description svelte-hj1sc2">System settings, device management, and power controls</p> <div class="header-actions svelte-hj1sc2"><a href="/devices" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" class="svelte-hj1sc2"></path></svg> Devices</a> <a href="/calibration" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-hj1sc2"></path></svg> Calibration</a> <a href="/logging" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-hj1sc2"></path></svg> Logging</a> <a href="/system/maintenance" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" class="svelte-hj1sc2"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-hj1sc2"></path></svg> Data Maintenance</a></div></div> <!></div>');function kl(Kt,Wt){ai(Wt,!0);let pe=c(null),Ve=c(null),ye=c(null),Xs=c(Ks([])),we=c(""),Zs=c(!0),I=c(null),ke=c("C"),oe=c("sg"),Ke=c(-100),he=c(!1),We=c(5),xe=c(!1),qe=c(!1),Ye=c(null),Qe=c(!1),Se=c(30),ae=c(null),ie=c(!1),Ae=c(""),Te=c(""),Xe=c(""),Ze=c(""),$e=c(""),es=c(""),Fe=c(""),ss=c(!1),ue=c(null),ts=c(null),as=c(!1),is=c(null),ls=c(!1),_e=c(!1),ns=c(68),He=c(1),rs=c(!1),os=c(null),cs=c(!1),fe=c(!1),vs=c(3),ds=c(!1),ps=c(null),hs=c(!1),ce=c(!1),V=c("local"),ge=c(""),Ce=c(""),ze=c(""),Oe=c(.7),Re=c(2e3),us=c(!1),_s=c(null),fs=c(!1),gs=c(!1),me=c(null),Me=c(Ks([])),Ue=c(Ks([])),bs=c(!1),le=Ws(()=>b.config.temp_units==="C"),ms=Ws(()=>e(le)?"°C":"°F");function qt(l){return e(le)?pi(l):l}function Yt(l){return e(le)?di(l):l}async function Qt(){try{const l=await fetch("/api/system/info");l.ok&&i(pe,await l.json(),!0)}catch(l){console.error("Failed to load system info:",l)}}async function $s(){try{const l=await fetch("/api/system/storage");l.ok&&i(Ve,await l.json(),!0)}catch(l){console.error("Failed to load storage stats:",l)}}async function Xt(){try{const l=await fetch("/api/system/ai-accelerator");l.ok&&i(ye,await l.json(),!0)}catch(l){console.error("Failed to load AI accelerator status:",l)}}async function Zt(){try{const[l,S]=await Promise.all([fetch("/api/system/timezones"),fetch("/api/system/timezone")]);if(l.ok){const L=await l.json();i(Xs,L.timezones||[],!0)}if(S.ok){const L=await S.json();i(we,L.timezone||"UTC",!0)}}catch(l){console.error("Failed to load timezones:",l)}}function et(){i(ke,b.config.temp_units,!0),i(oe,b.config.sg_units,!0),i(Ke,b.config.min_rssi,!0),i(he,b.config.smoothing_enabled,!0),i(We,b.config.smoothing_samples,!0),i(xe,b.config.id_by_mac,!0),i(ie,b.config.ha_enabled,!0),i(Ae,b.config.ha_url,!0),i(Te,b.config.ha_token,!0),i(Xe,b.config.ha_ambient_temp_entity_id,!0),i(Ze,b.config.ha_ambient_humidity_entity_id,!0),i($e,b.config.ha_chamber_temp_entity_id,!0),i(es,b.config.ha_chamber_humidity_entity_id,!0),i(Fe,b.config.ha_weather_entity_id,!0),i(_e,b.config.temp_control_enabled,!0),i(ns,Math.round(Yt(b.config.temp_target)*2)/2),i(He,b.config.temp_units==="C"?Math.round(b.config.temp_hysteresis*(5/9)*100)/100:b.config.temp_hysteresis,!0),i(fe,b.config.weather_alerts_enabled,!0),i(vs,b.config.alert_temp_threshold,!0),i(ce,b.config.ai_enabled??!1,!0),i(V,b.config.ai_provider??"local",!0),i(ge,b.config.ai_model??"",!0),i(Ce,b.config.ai_api_key??"",!0),i(ze,b.config.ai_base_url??"",!0),i(Oe,b.config.ai_temperature??.7,!0),i(Re,b.config.ai_max_tokens??2e3,!0)}async function $t(){try{const l=await fetch("/api/assistant/providers");l.ok&&i(Me,await l.json(),!0)}catch(l){console.error("Failed to load AI providers:",l)}}async function ea(l){try{const S=await fetch(`/api/assistant/models/${l}`);if(S.ok){const L=await S.json();i(Ue,L.models,!0)}}catch(S){console.error("Failed to load AI models:",S),i(Ue,[],!0)}}async function sa(){try{const l=await fetch("/api/assistant/status");if(l.ok){const S=await l.json();i(bs,S.has_env_api_key??!1,!0)}}catch(l){console.error("Failed to load AI status:",l)}}async function ta(){i(us,!0),i(_s,null),i(fs,!1);try{await Ee({ai_enabled:e(ce),ai_provider:e(V),ai_model:e(ge),ai_api_key:e(Ce),ai_base_url:e(ze),ai_temperature:e(Oe),ai_max_tokens:e(Re)}),i(fs,!0),setTimeout(()=>i(fs,!1),3e3)}catch(l){i(_s,l instanceof Error?l.message:"Failed to save AI settings",!0)}finally{i(us,!1)}}async function aa(){i(gs,!0),i(me,null);try{await Ee({ai_enabled:e(ce),ai_provider:e(V),ai_model:e(ge),ai_api_key:e(Ce),ai_base_url:e(ze),ai_temperature:e(Oe),ai_max_tokens:e(Re)});const S=await(await fetch("/api/assistant/test",{method:"POST"})).json();i(me,S,!0)}catch(l){i(me,{success:!1,error:l instanceof Error?l.message:"Connection test failed"},!0)}finally{i(gs,!1)}}Jt(()=>{e(V)&&ea(e(V))});async function ia(){i(qe,!0),i(Ye,null),i(Qe,!1);try{const l=await Ee({temp_units:e(ke),sg_units:e(oe),min_rssi:e(Ke),smoothing_enabled:e(he),smoothing_samples:e(We),id_by_mac:e(xe)});l.success?(i(Qe,!0),setTimeout(()=>i(Qe,!1),3e3)):i(Ye,l.error||"Failed to save settings",!0)}finally{i(qe,!1)}}async function la(){i(as,!0),i(is,null),i(ls,!1);try{const l=await Ee({ha_enabled:e(ie),ha_url:e(Ae),ha_token:e(Te),ha_ambient_temp_entity_id:e(Xe),ha_ambient_humidity_entity_id:e(Ze),ha_chamber_temp_entity_id:e($e),ha_chamber_humidity_entity_id:e(es),ha_weather_entity_id:e(Fe)});l.success?(i(ls,!0),setTimeout(()=>i(ls,!1),3e3),await tt()):i(is,l.error||"Failed to save settings",!0)}finally{i(as,!1)}}async function na(){i(rs,!0),i(os,null),i(cs,!1);try{const l=qt(e(ns)),S=e(le)?e(He)*(9/5):e(He),L=await Ee({temp_control_enabled:e(_e),temp_target:l,temp_hysteresis:S});L.success?(i(cs,!0),setTimeout(()=>i(cs,!1),3e3)):i(os,L.error||"Failed to save settings",!0)}finally{i(rs,!1)}}async function ra(){i(ds,!0),i(ps,null),i(hs,!1);try{const l=await Ee({weather_alerts_enabled:e(fe),alert_temp_threshold:e(vs)});l.success?(i(hs,!0),setTimeout(()=>i(hs,!1),3e3)):i(ps,l.error||"Failed to save settings",!0)}finally{i(ds,!1)}}async function oa(l){i(I,"timezone");try{(await fetch("/api/system/timezone",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:l})})).ok&&i(we,l,!0)}catch(S){console.error("Failed to set timezone:",S)}finally{i(I,null)}}async function ca(){i(I,"cleanup-preview");try{const l=await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(Se),confirm:!1})});l.ok&&i(ae,await l.json(),!0)}catch(l){console.error("Failed to preview cleanup:",l)}finally{i(I,null)}}async function va(){if(!(!e(ae)||e(ae).readings_to_delete===0)&&confirm(`Delete ${e(ae).readings_to_delete.toLocaleString()} readings older than ${e(Se)} days?`)){i(I,"cleanup");try{(await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(Se),confirm:!0})})).ok&&(i(ae,null),await $s())}catch(l){console.error("Failed to execute cleanup:",l)}finally{i(I,null)}}}async function da(){if(confirm("Are you sure you want to reboot the system? The UI will be unavailable until restart completes.")){i(I,"reboot");try{await fetch("/api/system/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(l){console.error("Reboot command failed:",l)}finally{i(I,null)}}}async function pa(){if(confirm("Are you sure you want to shut down the system? You will need physical access to restart.")){i(I,"shutdown");try{await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(l){console.error("Shutdown command failed:",l)}finally{i(I,null)}}}function ha(l){if(!l)return"Unknown";const S=Math.floor(l/86400),L=Math.floor(l%86400/3600),Be=Math.floor(l%3600/60),je=[];return S>0&&je.push(`${S}d`),L>0&&je.push(`${L}h`),Be>0&&je.push(`${Be}m`),je.length>0?je.join(" "):"< 1m"}function ua(l){return!Number.isFinite(l)||l<0?"0 B":l<1024?`${l} B`:l<1024*1024?`${(l/1024).toFixed(1)} KB`:`${(l/(1024*1024)).toFixed(1)} MB`}function st(l){return l.toLocaleString()}async function _a(){i(ss,!0),i(ue,null);try{const l=await fetch("/api/ha/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(Ae),token:e(Te)})});l.ok?i(ue,await l.json(),!0):i(ue,{success:!1,message:"Request failed"},!0)}catch{i(ue,{success:!1,message:"Network error"},!0)}finally{i(ss,!1)}}async function tt(){try{const l=await fetch("/api/ha/status");l.ok&&i(ts,await l.json(),!0)}catch(l){console.error("Failed to load HA status:",l)}}ii(async()=>{await Promise.all([Qt(),$s(),Xt(),Zt(),tt(),$t(),sa()]),et(),i(Zs,!1)}),Jt(()=>{b.loaded&&et()});var ys=pl();oi("hj1sc2",l=>{ni(()=>{ri.title="System | BrewSignal"})});var fa=s(a(ys),2);{var ga=l=>{var S=hi();o(l,S)},ma=l=>{var S=dl(),L=a(S),Be=s(a(L),2),je=a(Be);{var ja=n=>{var r=gi(),f=a(r),x=s(a(f),2),A=a(x,!0);t(x),t(f);var M=s(f,2),P=s(a(M),2),z=a(P);t(P),t(M);var E=s(M,2),F=s(a(E),2),D=a(F,!0);t(F),t(E);var N=s(E,2),K=s(a(N),2),$=a(K,!0);t(K),t(N);var W=s(N,2),O=s(a(W),2),ee=a(O);{var y=C=>{var H=_i(),q=s(a(H)),Y=s(q);{var J=G=>{var Q=ui(),ve=a(Q);t(Q),k(()=>m(ve,`(${e(ye).device.tops??""} TOPS)`)),o(G,Q)};h(Y,G=>{e(ye).device.tops>0&&G(J)})}t(H),k(()=>m(q,` ${e(ye).device.architecture??""} `)),o(C,H)},T=C=>{var H=fi();o(C,H)};h(ee,C=>{e(ye)?.available&&e(ye).device?C(y):C(T,!1)})}t(O),t(W),t(r),k(C=>{m(A,e(pe).hostname),m(z,`v${e(pe).version??""}`),m(D,C),m($,e(pe).ip_addresses.length>0?e(pe).ip_addresses[0]:"Unknown")},[()=>ha(e(pe).uptime_seconds)]),o(n,r)},ba=n=>{var r=mi();o(n,r)};h(je,n=>{e(pe)?n(ja):n(ba,!1)})}t(Be),t(L);var ws=s(L,2),ks=a(ws),at=s(a(ks),2),xs=a(at),it=s(a(xs),2),Ss=a(it);let lt;Ss.__click=()=>i(ke,"C");var nt=s(Ss,2);let rt;nt.__click=()=>i(ke,"F"),t(it),t(xs);var As=s(xs,2),ot=s(a(As),2),Ts=a(ot);let ct;Ts.__click=()=>i(oe,"sg");var Cs=s(Ts,2);let vt;Cs.__click=()=>i(oe,"plato");var dt=s(Cs,2);let pt;dt.__click=()=>i(oe,"brix"),t(ot),t(As);var Ms=s(As,2),ht=s(a(Ms),2),ut=a(ht);U(ut),R(2),t(ht),t(Ms);var Is=s(Ms,2),Ps=s(a(Is),2);let _t;Ps.__click=()=>i(he,!e(he)),t(Is);var ft=s(Is,2);{var ya=n=>{var r=ji(),f=s(a(r),2),x=a(f);x.value=x.__value=3;var A=s(x);A.value=A.__value=5;var M=s(A);M.value=M.__value=10;var P=s(M);P.value=P.__value=15;var z=s(P);z.value=z.__value=20,t(f),t(r),Qs(f,()=>e(We),E=>i(We,E)),o(n,r)};h(ft,n=>{e(he)&&n(ya)})}var Es=s(ft,2),Fs=s(a(Es),2);let gt;Fs.__click=()=>i(xe,!e(xe)),t(Es);var mt=s(Es,2),Le=a(mt);Le.__click=ia;var wa=a(Le);{var ka=n=>{var r=bi();R(),o(n,r)},xa=n=>{var r=Pe("Save Settings");o(n,r)};h(wa,n=>{e(qe)?n(ka):n(xa,!1)})}t(Le);var jt=s(Le,2);{var Sa=n=>{var r=yi(),f=a(r,!0);t(r),k(()=>m(f,e(Ye))),o(n,r)};h(jt,n=>{e(Ye)&&n(Sa)})}var Aa=s(jt,2);{var Ta=n=>{var r=wi();o(n,r)};h(Aa,n=>{e(Qe)&&n(Ta)})}t(mt),t(at),t(ks);var bt=s(ks,2),yt=s(a(bt),2),Hs=a(yt),wt=s(a(Hs)),Ca=a(wt,!0);t(wt),t(Hs);var kt=s(Hs,2),ne=a(kt);ne.__change=n=>oa(n.currentTarget.value),qs(ne,21,()=>e(Xs),Ys,(n,r)=>{var f=ki(),x=a(f,!0);t(f);var A={};k(()=>{m(x,e(r)),A!==(A=e(r))&&(f.value=(f.__value=e(r))??"")}),o(n,f)}),t(ne);var xt;ci(ne);var Ma=s(ne,2);{var Ia=n=>{var r=xi();o(n,r)};h(Ma,n=>{e(I)==="timezone"&&n(Ia)})}t(kt),t(yt),t(bt),t(ws);var zs=s(ws,2),St=s(a(zs),2),Os=a(St),Rs=s(a(Os),2);let At;Rs.__click=()=>i(ie,!e(ie)),t(Os);var Pa=s(Os,2);{var Ea=n=>{var r=Ii(),f=de(r);{var x=v=>{var g=Si(),u=s(a(g),2);let j;var se=a(u,!0);t(u),t(g),k(()=>{j=Z(u,1,"status-badge svelte-hj1sc2",null,j,{connected:e(ts).connected}),m(se,e(ts).connected?"Connected":"Disconnected")}),o(v,g)};h(f,v=>{e(ts)&&v(x)})}var A=s(f,2),M=s(a(A),2);U(M),t(A);var P=s(A,2),z=s(a(P),2);U(z),t(P);var E=s(P,2),F=s(a(E),2),D=a(F);D.__click=_a;var N=a(D,!0);t(D);var K=s(D,2);{var $=v=>{var g=Ai();let u;var j=a(g,!0);t(g),k(()=>{u=Z(g,1,"test-result svelte-hj1sc2",null,u,{success:e(ue).success}),m(j,e(ue).message)}),o(v,g)};h(K,v=>{e(ue)&&v($)})}t(F),t(E);var W=s(E,2),O=s(a(W),2);U(O),t(W);var ee=s(W,2),y=s(a(ee),2);U(y),t(ee);var T=s(ee,2),C=s(a(T),2);U(C),t(T);var H=s(T,2),q=s(a(H),2);U(q),t(H);var Y=s(H,2),J=s(a(Y),2);U(J),t(Y);var G=s(Y,2),Q=a(G);Q.__click=la;var ve=a(Q);{var re=v=>{var g=Ti();R(),o(v,g)},Je=v=>{var g=Pe("Save HA Settings");o(v,g)};h(ve,v=>{e(as)?v(re):v(Je,!1)})}t(Q);var Ie=s(Q,2);{var p=v=>{var g=Ci(),u=a(g,!0);t(g),k(()=>m(u,e(is))),o(v,g)};h(Ie,v=>{e(is)&&v(p)})}var _=s(Ie,2);{var w=v=>{var g=Mi();o(v,g)};h(_,v=>{e(ls)&&v(w)})}t(G),k(()=>{D.disabled=e(ss)||!e(Ae)||!e(Te),m(N,e(ss)?"Testing...":"Test"),Q.disabled=e(as)}),B(M,()=>e(Ae),v=>i(Ae,v)),B(z,()=>e(Te),v=>i(Te,v)),B(O,()=>e(Xe),v=>i(Xe,v)),B(y,()=>e(Ze),v=>i(Ze,v)),B(C,()=>e(Fe),v=>i(Fe,v)),B(q,()=>e($e),v=>i($e,v)),B(J,()=>e(es),v=>i(es,v)),o(n,r)};h(Pa,n=>{e(ie)&&n(Ea)})}t(St),t(zs);var Tt=s(zs,2);{var Fa=n=>{var r=zi(),f=s(a(r),2),x=a(f),A=s(a(x),2);let M;A.__click=()=>i(_e,!e(_e)),t(x);var P=s(x,2);{var z=E=>{var F=Hi(),D=s(de(F),2),N=a(D),K=s(a(N),2),$=a(K);t(K),t(N);var W=s(N,2),O=a(W);U(O);var ee=s(O,2),y=a(ee,!0);t(ee),t(W),t(D);var T=s(D,2),C=a(T),H=s(a(C),2),q=a(H);t(H),t(C);var Y=s(C,2),J=a(Y);U(J);var G=s(J,2),Q=a(G,!0);t(G),t(Y),t(T);var ve=s(T,2),re=a(ve);re.__click=na;var Je=a(re);{var Ie=u=>{var j=Pi();R(),o(u,j)},p=u=>{var j=Pe("Save Control Settings");o(u,j)};h(Je,u=>{e(rs)?u(Ie):u(p,!1)})}t(re);var _=s(re,2);{var w=u=>{var j=Ei(),se=a(j,!0);t(j),k(()=>m(se,e(os))),o(u,j)};h(_,u=>{e(os)&&u(w)})}var v=s(_,2);{var g=u=>{var j=Fi();o(u,j)};h(v,u=>{e(cs)&&u(g)})}t(ve),k(()=>{m($,`Desired fermentation temperature (${e(ms)??""})`),X(O,"min",e(le)?0:32),X(O,"max",e(le)?38:100),m(y,e(ms)),m(q,`± tolerance before triggering (${e(ms)??""})`),X(J,"min",e(le)?.3:.5),X(J,"max",e(le)?5.5:10),X(J,"step",e(le)?.25:.5),m(Q,e(ms)),re.disabled=e(rs)}),B(O,()=>e(ns),u=>i(ns,u)),B(J,()=>e(He),u=>i(He,u)),o(E,F)};h(P,E=>{e(_e)&&E(z)})}t(f),t(r),k(()=>{M=Z(A,1,"toggle svelte-hj1sc2",null,M,{active:e(_e)}),X(A,"aria-pressed",e(_e))}),o(n,r)};h(Tt,n=>{e(ie)&&n(Fa)})}var Ct=s(Tt,2);{var Ha=n=>{var r=Li(),f=s(a(r),2),x=a(f),A=s(a(x),2);let M;A.__click=()=>i(fe,!e(fe)),t(x);var P=s(x,2);{var z=y=>{var T=Oi(),C=de(T),H=s(a(C),2),q=a(H);U(q),R(2),t(H),t(C),R(2),B(q,()=>e(vs),Y=>i(vs,Y)),o(y,T)};h(P,y=>{e(fe)&&y(z)})}var E=s(P,2),F=a(E);F.__click=ra;var D=a(F);{var N=y=>{var T=Ri();R(),o(y,T)},K=y=>{var T=Pe("Save Alert Settings");o(y,T)};h(D,y=>{e(ds)?y(N):y(K,!1)})}t(F);var $=s(F,2);{var W=y=>{var T=Ui(),C=a(T,!0);t(T),k(()=>m(C,e(ps))),o(y,T)};h($,y=>{e(ps)&&y(W)})}var O=s($,2);{var ee=y=>{var T=Bi();o(y,T)};h(O,y=>{e(hs)&&y(ee)})}t(E),t(f),t(r),k(()=>{M=Z(A,1,"toggle svelte-hj1sc2",null,M,{active:e(fe)}),X(A,"aria-pressed",e(fe)),F.disabled=e(ds)}),o(n,r)};h(Ct,n=>{e(ie)&&e(Fe)&&n(Ha)})}var Us=s(Ct,2),Mt=s(a(Us),2),Bs=s(a(Mt),2),Ls=s(a(Bs),2);let It;Ls.__click=()=>i(ce,!e(ce)),t(Bs);var Pt=s(Bs,2);{var za=n=>{var r=$i(),f=de(r),x=s(a(f),2);qs(x,21,()=>e(Me),Ys,(p,_)=>{var w=Di(),v=a(w,!0);t(w);var g={};k(()=>{m(v,e(_).name),g!==(g=e(_).id)&&(w.value=(w.__value=e(_).id)??"")}),o(p,w)}),t(x),t(f);var A=s(f,2);{var M=p=>{var _=Ni();o(p,_)},P=p=>{var _=Gt(),w=de(_);{var v=g=>{const u=Ws(()=>e(Me).find(be=>be.id===e(V)));var j=Ji(),se=a(j),Vs=s(se);{var te=be=>{var Nt=Gi();k(()=>X(Nt,"href",e(u).setup_url)),o(be,Nt)};h(Vs,be=>{e(u)?.setup_url&&be(te)})}t(j),k(()=>m(se,`${e(u)?.description??""} `)),o(g,j)};h(w,g=>{e(Me).find(u=>u.id===e(V))&&g(v)},!0)}o(p,_)};h(A,p=>{e(V)==="local"?p(M):p(P,!1)})}var z=s(A,2);{var E=p=>{var _=Ki(),w=de(_),v=a(w),g=s(a(v),2),u=a(g);t(g),t(v);var j=s(v,2);U(j),t(w);var se=s(w,2);{var Vs=te=>{var be=Vi();o(te,be)};h(se,te=>{e(bs)&&!e(Ce)&&te(Vs)})}k(te=>{m(u,`Your API key for ${te??""}`),X(j,"placeholder",e(bs)?"(using environment variable)":"sk-...")},[()=>e(Me).find(te=>te.id===e(V))?.name]),B(j,()=>e(Ce),te=>i(Ce,te)),o(p,_)};h(z,p=>{e(Me).find(_=>_.id===e(V))?.requires_api_key&&p(E)})}var F=s(z,2);{var D=p=>{var _=Wi(),w=s(a(_),2);U(w),t(_),B(w,()=>e(ze),v=>i(ze,v)),o(p,_)};h(F,p=>{e(V)==="local"&&p(D)})}var N=s(F,2),K=s(a(N),2),$=a(K);$.value=$.__value="";var W=s($);qs(W,17,()=>e(Ue),Ys,(p,_)=>{var w=qi(),v=a(w,!0);t(w);var g={};k(()=>{m(v,e(_).name),g!==(g=e(_).id)&&(w.value=(w.__value=e(_).id)??"")}),o(p,w)}),t(K),t(N);var O=s(N,2);{var ee=p=>{var _=Yi(),w=a(_,!0);t(_),k(v=>m(w,v),[()=>e(Ue).find(v=>v.id===e(ge))?.description]),o(p,_)};h(O,p=>{e(Ue).find(_=>_.id===e(ge))&&p(ee)})}var y=s(O,2),T=s(a(y),2),C=a(T),H=s(a(C),2);U(H),t(C);var q=s(C,2),Y=s(a(q),2);U(Y),t(q),t(T),t(y);var J=s(y,2),G=a(J);G.__click=aa;var Q=a(G);{var ve=p=>{var _=Qi();R(),o(p,_)},re=p=>{var _=Pe("Test Connection");o(p,_)};h(Q,p=>{e(gs)?p(ve):p(re,!1)})}t(G);var Je=s(G,2);{var Ie=p=>{var _=Gt(),w=de(_);{var v=u=>{var j=Xi(),se=a(j);t(j),k(()=>m(se,`Connected! Response: "${e(me).response??""}"`)),o(u,j)},g=u=>{var j=Zi(),se=a(j,!0);t(j),k(()=>m(se,e(me).error)),o(u,j)};h(w,u=>{e(me).success?u(v):u(g,!1)})}o(p,_)};h(Je,p=>{e(me)&&p(Ie)})}t(J),k(()=>G.disabled=e(gs)),Qs(x,()=>e(V),p=>i(V,p)),Qs(K,()=>e(ge),p=>i(ge,p)),B(H,()=>e(Oe),p=>i(Oe,p)),B(Y,()=>e(Re),p=>i(Re,p)),o(n,r)};h(Pt,n=>{e(ce)&&n(za)})}var Et=s(Pt,2),De=a(Et);De.__click=ta;var Oa=a(De);{var Ra=n=>{var r=el();R(),o(n,r)},Ua=n=>{var r=Pe("Save AI Settings");o(n,r)};h(Oa,n=>{e(us)?n(Ra):n(Ua,!1)})}t(De);var Ft=s(De,2);{var Ba=n=>{var r=sl(),f=a(r,!0);t(r),k(()=>m(f,e(_s))),o(n,r)};h(Ft,n=>{e(_s)&&n(Ba)})}var La=s(Ft,2);{var Da=n=>{var r=tl();o(n,r)};h(La,n=>{e(fs)&&n(Da)})}t(Et),t(Mt),t(Us);var Ds=s(Us,2),Ht=s(a(Ds),2),zt=a(Ht),Ns=a(zt),Na=a(Ns);{var Ga=n=>{var r=al(),f=de(r),x=a(f),A=a(x,!0);t(x),R(2),t(f);var M=s(f,2),P=a(M),z=a(P,!0);t(P),R(2),t(M),k((E,F)=>{m(A,E),m(z,F)},[()=>st(e(Ve).total_readings),()=>ua(e(Ve).estimated_size_bytes)]),o(n,r)},Ja=n=>{var r=il();o(n,r)};h(Na,n=>{e(Ve)?n(Ga):n(Ja,!1)})}t(Ns);var Ot=s(Ns,2),Gs=s(a(Ot),2),Js=a(Gs),Rt=s(a(Js),2);U(Rt),R(2),t(Js);var Ut=s(Js,2),Ne=a(Ut);Ne.__click=ca;var Va=a(Ne,!0);t(Ne);var Ka=s(Ne,2);{var Wa=n=>{var r=ll();r.__click=va;var f=a(r,!0);t(r),k(x=>{r.disabled=e(I)!==null,m(f,x)},[()=>e(I)==="cleanup"?"Deleting...":`Delete ${st(e(ae).readings_to_delete)} readings`]),o(n,r)};h(Ka,n=>{e(ae)&&e(ae).readings_to_delete>0&&n(Wa)})}t(Ut),t(Gs);var qa=s(Gs,2);{var Ya=n=>{var r=nl(),f=a(r);t(r),k(()=>m(f,`No readings older than ${e(Se)??""} days found.`)),o(n,r)};h(qa,n=>{e(ae)&&e(ae).readings_to_delete===0&&n(Ya)})}t(Ot),t(zt),t(Ht),t(Ds);var Bt=s(Ds,2),Lt=s(a(Bt),2),Dt=s(a(Lt),2),Ge=a(Dt);Ge.__click=da;var Qa=a(Ge);{var Xa=n=>{var r=rl();R(),o(n,r)},Za=n=>{var r=ol();R(),o(n,r)};h(Qa,n=>{e(I)==="reboot"?n(Xa):n(Za,!1)})}t(Ge);var js=s(Ge,2);js.__click=pa;var $a=a(js);{var ei=n=>{var r=cl();R(),o(n,r)},si=n=>{var r=vl();R(),o(n,r)};h($a,n=>{e(I)==="shutdown"?n(ei):n(si,!1)})}t(js),t(Dt),t(Lt),t(Bt),t(S),k(()=>{lt=Z(Ss,1,"unit-btn svelte-hj1sc2",null,lt,{active:e(ke)==="C"}),rt=Z(nt,1,"unit-btn svelte-hj1sc2",null,rt,{active:e(ke)==="F"}),ct=Z(Ts,1,"unit-btn svelte-hj1sc2",null,ct,{active:e(oe)==="sg"}),vt=Z(Cs,1,"unit-btn svelte-hj1sc2",null,vt,{active:e(oe)==="plato"}),pt=Z(dt,1,"unit-btn svelte-hj1sc2",null,pt,{active:e(oe)==="brix"}),_t=Z(Ps,1,"toggle svelte-hj1sc2",null,_t,{active:e(he)}),X(Ps,"aria-pressed",e(he)),gt=Z(Fs,1,"toggle svelte-hj1sc2",null,gt,{active:e(xe)}),X(Fs,"aria-pressed",e(xe)),Le.disabled=e(qe),m(Ca,e(we)),ne.disabled=e(I)==="timezone",xt!==(xt=e(we))&&(ne.value=(ne.__value=e(we))??"",vi(ne,e(we))),At=Z(Rs,1,"toggle svelte-hj1sc2",null,At,{active:e(ie)}),X(Rs,"aria-pressed",e(ie)),It=Z(Ls,1,"toggle svelte-hj1sc2",null,It,{active:e(ce)}),X(Ls,"aria-pressed",e(ce)),De.disabled=e(us),Ne.disabled=e(I)!==null,m(Va,e(I)==="cleanup-preview"?"Checking...":"Preview"),Ge.disabled=e(I)!==null,js.disabled=e(I)!==null}),B(ut,()=>e(Ke),n=>i(Ke,n)),B(Rt,()=>e(Se),n=>i(Se,n)),o(l,S)};h(fa,l=>{e(Zs)?l(ga):l(ma,!1)})}t(ys),o(Kt,ys),li()}ti(["click","change"]);export{kl as component};
