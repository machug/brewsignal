import{d as ei,f as d,a as o,s as j,t as Ie,h as Jt,c as Nt}from"../chunks/Bkky6kvZ.js";import{a as si,s as c,p as Vs,az as Gt,h as e,o as ti,g as ai,c as t,A as ii,e as s,d as i,u as Ks,ax as li,r as a,n as z,t as x,f as ve}from"../chunks/813s5maz.js";import{e as Ws,i as qs}from"../chunks/j9QCVC2i.js";import{i as u}from"../chunks/Bf7HnLem.js";import{h as ni}from"../chunks/BgIwEmqo.js";import{r as F,s as J}from"../chunks/UKAZQVVw.js";import{s as V}from"../chunks/LBYG0Yba.js";import{b as O}from"../chunks/Bjks-vZK.js";import{i as ri,s as oi,b as Ys}from"../chunks/D4jp30Ch.js";import{c as b,f as ci,u as Pe,a as vi}from"../chunks/CbPjToI1.js";var di=d('<div class="loading-state svelte-hj1sc2"><div class="loading-spinner svelte-hj1sc2"></div> <span class="svelte-hj1sc2">Loading system information...</span></div>'),pi=d('<div class="info-grid svelte-hj1sc2"><div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Hostname</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Version</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Uptime</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">IP Address</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div></div>'),hi=d('<p class="text-muted svelte-hj1sc2">Unable to load system information</p>'),ui=d('<div class="setting-row sub-setting svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Smoothing Samples</span> <span class="setting-description svelte-hj1sc2">Number of readings to average</span></div> <select class="select-input-sm svelte-hj1sc2"><option class="svelte-hj1sc2">3</option><option class="svelte-hj1sc2">5</option><option class="svelte-hj1sc2">10</option><option class="svelte-hj1sc2">15</option><option class="svelte-hj1sc2">20</option></select></div>'),_i=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),fi=d('<p class="config-error svelte-hj1sc2"> </p>'),gi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),mi=d('<option class="svelte-hj1sc2"> </option>'),ji=d('<div class="loading-spinner-small svelte-hj1sc2"></div>'),bi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Connection Status</span></div> <span> </span></div>'),yi=d("<span> </span>"),wi=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),ki=d('<p class="config-error svelte-hj1sc2"> </p>'),xi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Si=d('<!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Home Assistant URL</span> <span class="setting-description svelte-hj1sc2">e.g., http://192.168.1.100:8123</span></div> <input type="url" placeholder="http://homeassistant.local:8123" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Access Token</span> <span class="setting-description svelte-hj1sc2">Long-lived access token from HA profile</span></div> <input type="password" placeholder="Enter token..." class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Test Connection</span></div> <div class="test-connection svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Temp Entity</span> <span class="setting-description svelte-hj1sc2">e.g., sensor.fermenter_room_temperature</span></div> <input type="text" placeholder="sensor.xxx_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Optional humidity sensor</span></div> <input type="text" placeholder="sensor.xxx_humidity" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Weather Entity</span> <span class="setting-description svelte-hj1sc2">For forecast display, e.g., weather.home</span></div> <input type="text" placeholder="weather.home" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Chamber Temperature Entity</span> <span class="setting-description svelte-hj1sc2">Temperature sensor inside fermentation chamber</span></div> <input type="text" placeholder="sensor.chamber_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Chamber Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Humidity sensor inside fermentation chamber</span></div> <input type="text" placeholder="sensor.chamber_humidity" class="input-field svelte-hj1sc2"/></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>',1),Ti=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Ai=d('<p class="config-error svelte-hj1sc2"> </p>'),Ci=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Mi=d(`<p class="section-note svelte-hj1sc2">Configure heater switches per batch. These are the default settings used when a batch doesn't specify its own.</p> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Default Target Temperature</span> <span class="setting-description svelte-hj1sc2"> </span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" step="0.5" class="input-field input-number svelte-hj1sc2"/> <span class="unit svelte-hj1sc2"> </span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Default Hysteresis</span> <span class="setting-description svelte-hj1sc2"> </span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" class="input-field input-number svelte-hj1sc2"/> <span class="unit svelte-hj1sc2"> </span></div></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>`,1),Ii=d('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Temperature Control</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Temperature Control</span> <span class="setting-description svelte-hj1sc2">Automatically control heaters for batches</span></div> <button type="button" aria-label="Toggle temperature control"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div>'),Pi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Alert Threshold</span> <span class="setting-description svelte-hj1sc2">Alert when forecast differs from target by this amount (°C)</span></div> <div class="input-with-unit svelte-hj1sc2"><input type="number" min="1" max="15" step="0.5" class="input-field-sm svelte-hj1sc2"/> <span class="unit svelte-hj1sc2">°C</span></div></div> <p class="setting-hint mt-2 svelte-hj1sc2">Alerts are generated when the forecast high or low temperatures differ from your target fermentation temperature by more than the threshold.</p>',1),Ei=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Hi=d('<p class="config-error svelte-hj1sc2"> </p>'),zi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Fi=d('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Weather Alerts</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Weather Alerts</span> <span class="setting-description svelte-hj1sc2">Get alerts when forecast temps may affect fermentation</span></div> <button type="button" aria-label="Toggle weather alerts"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div>'),Oi=d('<option class="svelte-hj1sc2"> </option>'),Ri=d(`<div class="ollama-setup-guide svelte-hj1sc2"><h4 class="setup-guide-title svelte-hj1sc2">Ollama Setup Options</h4> <div class="setup-option svelte-hj1sc2"><strong class="option-title svelte-hj1sc2">Option 1: Remote Ollama (Recommended)</strong> <p class="svelte-hj1sc2">Run Ollama on a PC/Mac with a GPU and connect over your network. Much faster and supports all features.</p> <ol class="setup-steps svelte-hj1sc2"><li class="svelte-hj1sc2">Install Ollama on your PC/Mac from <a href="https://ollama.ai/download" target="_blank" rel="noopener" class="svelte-hj1sc2">ollama.ai/download</a></li> <li class="svelte-hj1sc2">Set environment variable to allow network access: <code class="setup-code svelte-hj1sc2">OLLAMA_HOST=0.0.0.0 ollama serve</code></li> <li class="svelte-hj1sc2">Pull a model: <code class="setup-code-inline svelte-hj1sc2">ollama pull llama3:8b</code></li> <li class="svelte-hj1sc2">Enter your PC's IP in the URL field below (e.g., http://192.168.1.100:11434)</li></ol></div> <div class="setup-option svelte-hj1sc2"><strong class="option-title svelte-hj1sc2">Option 2: Local on Pi (Limited)</strong> <p class="svelte-hj1sc2">Running on Pi requires a <a href="https://www.raspberrypi.com/products/ai-hat-plus-2/" target="_blank" rel="noopener" class="svelte-hj1sc2">Raspberry Pi 5 with AI HAT+</a> for acceptable performance. Without AI acceleration, responses will be very slow.</p> <ol class="setup-steps svelte-hj1sc2"><li class="svelte-hj1sc2">Install: <code class="setup-code-inline svelte-hj1sc2">curl -fsSL https://ollama.ai/install.sh | sh</code></li> <li class="svelte-hj1sc2">Pull a small model: <code class="setup-code-inline svelte-hj1sc2">ollama pull smollm2:1.7b</code></li></ol></div></div>`),Ui=d('<a target="_blank" rel="noopener" class="text-amber-400 hover:underline ml-1 svelte-hj1sc2">Get API key →</a>'),Bi=d('<p class="setting-hint mb-3 svelte-hj1sc2"> <!></p>'),Li=d('<div class="env-key-notice svelte-hj1sc2"><span class="env-key-icon svelte-hj1sc2">✓</span> <span class="svelte-hj1sc2">API key detected from environment variable. You can override it by entering a key above.</span></div>'),Di=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">API Key</span> <span class="setting-description svelte-hj1sc2"> </span></div> <input type="password" class="input-field svelte-hj1sc2"/></div> <!>',1),Ni=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ollama URL</span> <span class="setting-description svelte-hj1sc2">URL of your Ollama server</span></div> <input type="text" placeholder="http://localhost:11434" class="input-field svelte-hj1sc2"/></div>'),Gi=d('<option class="svelte-hj1sc2"> </option>'),Ji=d('<p class="setting-hint mb-3 svelte-hj1sc2"> </p>'),Vi=d('<span class="loading-dot svelte-hj1sc2"></span> Testing...',1),Ki=d('<p class="config-success mt-2 svelte-hj1sc2"> </p>'),Wi=d('<p class="config-error mt-2 svelte-hj1sc2"> </p>'),qi=d('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Provider</span> <span class="setting-description svelte-hj1sc2">Choose where to run the AI model</span></div> <select class="input-field input-select svelte-hj1sc2"></select></div> <!> <!> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Model</span> <span class="setting-description svelte-hj1sc2">AI model to use</span></div> <select class="input-field input-select svelte-hj1sc2"><option class="svelte-hj1sc2">Default</option><!></select></div> <!> <details class="mt-4 svelte-hj1sc2"><summary class="cursor-pointer text-zinc-400 hover:text-zinc-200 svelte-hj1sc2">Advanced Settings</summary> <div class="mt-3 space-y-3 svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature</span> <span class="setting-description svelte-hj1sc2">Higher = more creative, lower = more focused</span></div> <input type="number" min="0" max="2" step="0.1" class="input-field input-number svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Max Tokens</span> <span class="setting-description svelte-hj1sc2">Maximum response length</span></div> <input type="number" min="100" max="8000" step="100" class="input-field input-number svelte-hj1sc2"/></div></div></details> <div class="mt-4 svelte-hj1sc2"><button type="button" class="btn-secondary svelte-hj1sc2"><!></button> <!></div>',1),Yi=d('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Qi=d('<p class="config-error svelte-hj1sc2"> </p>'),Xi=d('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Zi=d('<div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Total Readings</span></div> <div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Estimated Size</span></div>',1),$i=d('<p class="text-muted svelte-hj1sc2">Unable to load storage stats</p>'),el=d('<button type="button" class="btn-danger-sm svelte-hj1sc2"> </button>'),sl=d('<p class="cleanup-message svelte-hj1sc2"> </p>'),tl=d('<span class="loading-dot svelte-hj1sc2"></span> Rebooting...',1),al=Jt('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" class="svelte-hj1sc2"></path></svg> Reboot System',1),il=d('<span class="loading-dot svelte-hj1sc2"></span> Shutting down...',1),ll=Jt('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" class="svelte-hj1sc2"></path></svg> Shutdown System',1),nl=d(`<div class="grid gap-6 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">System Information</h2></div> <div class="card-body svelte-hj1sc2"><!></div></div> <div class="grid gap-6 md:grid-cols-2 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Application Settings</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature Units</span> <span class="setting-description svelte-hj1sc2">Display temperature in Celsius or Fahrenheit</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">°C</button> <button type="button">°F</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Gravity Units</span> <span class="setting-description svelte-hj1sc2">Display gravity as SG, Plato, or Brix</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">SG</button> <button type="button">°P</button> <button type="button">°Bx</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Minimum RSSI</span> <span class="setting-description svelte-hj1sc2">Ignore readings below this signal strength</span></div> <div class="rssi-input svelte-hj1sc2"><input type="number" min="-100" max="0" class="input-field-sm svelte-hj1sc2"/> <span class="input-suffix svelte-hj1sc2">dBm</span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Reading Smoothing</span> <span class="setting-description svelte-hj1sc2">Average multiple readings to reduce noise</span></div> <button type="button" aria-label="Toggle reading smoothing"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Identify by MAC</span> <span class="setting-description svelte-hj1sc2">Use MAC address instead of broadcast ID</span></div> <button type="button" aria-label="Toggle identify by MAC address"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Timezone</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description svelte-hj1sc2">Current timezone: <span class="font-mono text-[var(--accent)] svelte-hj1sc2"> </span></p> <div class="timezone-selector svelte-hj1sc2"><select class="select-input svelte-hj1sc2"></select> <!></div></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Home Assistant</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Integration</span> <span class="setting-description svelte-hj1sc2">Connect to Home Assistant for ambient temp and control</span></div> <button type="button" aria-label="Enable Home Assistant integration"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div> <!> <!> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">AI Brewing Assistant</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description mb-4 svelte-hj1sc2">Enable an AI assistant to help with recipe creation, fermentation troubleshooting, and brewing advice.
						Use a local model (Ollama) for free and private operation, or connect to cloud providers.</p> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable AI Assistant</span> <span class="setting-description svelte-hj1sc2">Turn on AI-powered brewing features</span></div> <button type="button" aria-label="Toggle AI assistant"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Storage & Data Cleanup</h2></div> <div class="card-body svelte-hj1sc2"><div class="storage-grid svelte-hj1sc2"><div class="storage-stats svelte-hj1sc2"><!></div> <div class="cleanup-section svelte-hj1sc2"><p class="section-description mb-3 svelte-hj1sc2">Remove old readings to free up storage. Readings older than the specified days will be permanently deleted.</p> <div class="cleanup-controls svelte-hj1sc2"><div class="cleanup-input-group svelte-hj1sc2"><label for="retention-days" class="svelte-hj1sc2">Keep readings from last</label> <input id="retention-days" type="number" min="1" max="365" class="input-field-sm svelte-hj1sc2"/> <span class="svelte-hj1sc2">days</span></div> <div class="cleanup-actions svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <!></div></div></div></div> <div class="card danger-zone svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Power Controls</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description danger-text svelte-hj1sc2">These actions will affect the entire system. Make sure you have saved any pending work.</p> <div class="power-buttons svelte-hj1sc2"><button type="button" class="btn-warning svelte-hj1sc2"><!></button> <button type="button" class="btn-danger svelte-hj1sc2"><!></button></div></div></div></div>`),rl=d('<div class="page-container svelte-hj1sc2"><div class="page-header svelte-hj1sc2"><h1 class="page-title svelte-hj1sc2">System</h1> <p class="page-description svelte-hj1sc2">System settings, device management, and power controls</p> <div class="header-actions svelte-hj1sc2"><a href="/devices" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" class="svelte-hj1sc2"></path></svg> Devices</a> <a href="/calibration" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" class="svelte-hj1sc2"></path></svg> Calibration</a> <a href="/logging" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" class="svelte-hj1sc2"></path></svg> Logging</a> <a href="/system/maintenance" class="btn-secondary-link svelte-hj1sc2"><svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" class="svelte-hj1sc2"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-hj1sc2"></path></svg> Data Maintenance</a></div></div> <!></div>');function ml(Vt,Kt){si(Kt,!0);let de=c(null),Je=c(null),Qs=c(Vs([])),be=c(""),Xs=c(!0),M=c(null),ye=c("C"),oe=c("sg"),Ve=c(-100),pe=c(!1),Ke=c(5),we=c(!1),We=c(!1),qe=c(null),Ye=c(!1),ke=c(30),ee=c(null),ae=c(!1),xe=c(""),Se=c(""),Qe=c(""),Xe=c(""),Ze=c(""),$e=c(""),Ee=c(""),es=c(!1),he=c(null),ss=c(null),ts=c(!1),as=c(null),is=c(!1),ue=c(!1),ls=c(68),He=c(1),ns=c(!1),rs=c(null),os=c(!1),_e=c(!1),cs=c(3),vs=c(!1),ds=c(null),ps=c(!1),ce=c(!1),D=c("local"),fe=c(""),Te=c(""),ze=c(""),Fe=c(.7),Oe=c(2e3),hs=c(!1),us=c(null),_s=c(!1),fs=c(!1),ge=c(null),Ae=c(Vs([])),Re=c(Vs([])),js=c(!1),ie=Ks(()=>b.config.temp_units==="C"),gs=Ks(()=>e(ie)?"°C":"°F");function Wt(l){return e(ie)?vi(l):l}function qt(l){return e(ie)?ci(l):l}async function Yt(){try{const l=await fetch("/api/system/info");l.ok&&t(de,await l.json(),!0)}catch(l){console.error("Failed to load system info:",l)}}async function Zs(){try{const l=await fetch("/api/system/storage");l.ok&&t(Je,await l.json(),!0)}catch(l){console.error("Failed to load storage stats:",l)}}async function Qt(){try{const[l,S]=await Promise.all([fetch("/api/system/timezones"),fetch("/api/system/timezone")]);if(l.ok){const R=await l.json();t(Qs,R.timezones||[],!0)}if(S.ok){const R=await S.json();t(be,R.timezone||"UTC",!0)}}catch(l){console.error("Failed to load timezones:",l)}}function $s(){t(ye,b.config.temp_units,!0),t(oe,b.config.sg_units,!0),t(Ve,b.config.min_rssi,!0),t(pe,b.config.smoothing_enabled,!0),t(Ke,b.config.smoothing_samples,!0),t(we,b.config.id_by_mac,!0),t(ae,b.config.ha_enabled,!0),t(xe,b.config.ha_url,!0),t(Se,b.config.ha_token,!0),t(Qe,b.config.ha_ambient_temp_entity_id,!0),t(Xe,b.config.ha_ambient_humidity_entity_id,!0),t(Ze,b.config.ha_chamber_temp_entity_id,!0),t($e,b.config.ha_chamber_humidity_entity_id,!0),t(Ee,b.config.ha_weather_entity_id,!0),t(ue,b.config.temp_control_enabled,!0),t(ls,Math.round(qt(b.config.temp_target)*2)/2),t(He,b.config.temp_units==="C"?Math.round(b.config.temp_hysteresis*(5/9)*100)/100:b.config.temp_hysteresis,!0),t(_e,b.config.weather_alerts_enabled,!0),t(cs,b.config.alert_temp_threshold,!0),t(ce,b.config.ai_enabled??!1,!0),t(D,b.config.ai_provider??"local",!0),t(fe,b.config.ai_model??"",!0),t(Te,b.config.ai_api_key??"",!0),t(ze,b.config.ai_base_url??"",!0),t(Fe,b.config.ai_temperature??.7,!0),t(Oe,b.config.ai_max_tokens??2e3,!0)}async function Xt(){try{const l=await fetch("/api/assistant/providers");l.ok&&t(Ae,await l.json(),!0)}catch(l){console.error("Failed to load AI providers:",l)}}async function Zt(l){try{const S=await fetch(`/api/assistant/models/${l}`);if(S.ok){const R=await S.json();t(Re,R.models,!0)}}catch(S){console.error("Failed to load AI models:",S),t(Re,[],!0)}}async function $t(){try{const l=await fetch("/api/assistant/status");if(l.ok){const S=await l.json();t(js,S.has_env_api_key??!1,!0)}}catch(l){console.error("Failed to load AI status:",l)}}async function ea(){t(hs,!0),t(us,null),t(_s,!1);try{await Pe({ai_enabled:e(ce),ai_provider:e(D),ai_model:e(fe),ai_api_key:e(Te),ai_base_url:e(ze),ai_temperature:e(Fe),ai_max_tokens:e(Oe)}),t(_s,!0),setTimeout(()=>t(_s,!1),3e3)}catch(l){t(us,l instanceof Error?l.message:"Failed to save AI settings",!0)}finally{t(hs,!1)}}async function sa(){t(fs,!0),t(ge,null);try{await Pe({ai_enabled:e(ce),ai_provider:e(D),ai_model:e(fe),ai_api_key:e(Te),ai_base_url:e(ze),ai_temperature:e(Fe),ai_max_tokens:e(Oe)});const S=await(await fetch("/api/assistant/test",{method:"POST"})).json();t(ge,S,!0)}catch(l){t(ge,{success:!1,error:l instanceof Error?l.message:"Connection test failed"},!0)}finally{t(fs,!1)}}Gt(()=>{e(D)&&Zt(e(D))});async function ta(){t(We,!0),t(qe,null),t(Ye,!1);try{const l=await Pe({temp_units:e(ye),sg_units:e(oe),min_rssi:e(Ve),smoothing_enabled:e(pe),smoothing_samples:e(Ke),id_by_mac:e(we)});l.success?(t(Ye,!0),setTimeout(()=>t(Ye,!1),3e3)):t(qe,l.error||"Failed to save settings",!0)}finally{t(We,!1)}}async function aa(){t(ts,!0),t(as,null),t(is,!1);try{const l=await Pe({ha_enabled:e(ae),ha_url:e(xe),ha_token:e(Se),ha_ambient_temp_entity_id:e(Qe),ha_ambient_humidity_entity_id:e(Xe),ha_chamber_temp_entity_id:e(Ze),ha_chamber_humidity_entity_id:e($e),ha_weather_entity_id:e(Ee)});l.success?(t(is,!0),setTimeout(()=>t(is,!1),3e3),await st()):t(as,l.error||"Failed to save settings",!0)}finally{t(ts,!1)}}async function ia(){t(ns,!0),t(rs,null),t(os,!1);try{const l=Wt(e(ls)),S=e(ie)?e(He)*(9/5):e(He),R=await Pe({temp_control_enabled:e(ue),temp_target:l,temp_hysteresis:S});R.success?(t(os,!0),setTimeout(()=>t(os,!1),3e3)):t(rs,R.error||"Failed to save settings",!0)}finally{t(ns,!1)}}async function la(){t(vs,!0),t(ds,null),t(ps,!1);try{const l=await Pe({weather_alerts_enabled:e(_e),alert_temp_threshold:e(cs)});l.success?(t(ps,!0),setTimeout(()=>t(ps,!1),3e3)):t(ds,l.error||"Failed to save settings",!0)}finally{t(vs,!1)}}async function na(l){t(M,"timezone");try{(await fetch("/api/system/timezone",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:l})})).ok&&t(be,l,!0)}catch(S){console.error("Failed to set timezone:",S)}finally{t(M,null)}}async function ra(){t(M,"cleanup-preview");try{const l=await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(ke),confirm:!1})});l.ok&&t(ee,await l.json(),!0)}catch(l){console.error("Failed to preview cleanup:",l)}finally{t(M,null)}}async function oa(){if(!(!e(ee)||e(ee).readings_to_delete===0)&&confirm(`Delete ${e(ee).readings_to_delete.toLocaleString()} readings older than ${e(ke)} days?`)){t(M,"cleanup");try{(await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(ke),confirm:!0})})).ok&&(t(ee,null),await Zs())}catch(l){console.error("Failed to execute cleanup:",l)}finally{t(M,null)}}}async function ca(){if(confirm("Are you sure you want to reboot the system? The UI will be unavailable until restart completes.")){t(M,"reboot");try{await fetch("/api/system/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(l){console.error("Reboot command failed:",l)}finally{t(M,null)}}}async function va(){if(confirm("Are you sure you want to shut down the system? You will need physical access to restart.")){t(M,"shutdown");try{await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(l){console.error("Shutdown command failed:",l)}finally{t(M,null)}}}function da(l){if(!l)return"Unknown";const S=Math.floor(l/86400),R=Math.floor(l%86400/3600),Ue=Math.floor(l%3600/60),me=[];return S>0&&me.push(`${S}d`),R>0&&me.push(`${R}h`),Ue>0&&me.push(`${Ue}m`),me.length>0?me.join(" "):"< 1m"}function pa(l){return!Number.isFinite(l)||l<0?"0 B":l<1024?`${l} B`:l<1024*1024?`${(l/1024).toFixed(1)} KB`:`${(l/(1024*1024)).toFixed(1)} MB`}function et(l){return l.toLocaleString()}async function ha(){t(es,!0),t(he,null);try{const l=await fetch("/api/ha/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(xe),token:e(Se)})});l.ok?t(he,await l.json(),!0):t(he,{success:!1,message:"Request failed"},!0)}catch{t(he,{success:!1,message:"Network error"},!0)}finally{t(es,!1)}}async function st(){try{const l=await fetch("/api/ha/status");l.ok&&t(ss,await l.json(),!0)}catch(l){console.error("Failed to load HA status:",l)}}ti(async()=>{await Promise.all([Yt(),Zs(),Qt(),st(),Xt(),$t()]),$s(),t(Xs,!1)}),Gt(()=>{b.loaded&&$s()});var bs=rl();ni("hj1sc2",l=>{ii(()=>{li.title="System | BrewSignal"})});var ua=s(i(bs),2);{var _a=l=>{var S=di();o(l,S)},fa=l=>{var S=nl(),R=i(S),Ue=s(i(R),2),me=i(Ue);{var ga=n=>{var r=pi(),f=i(r),w=s(i(f),2),T=i(w,!0);a(w),a(f);var C=s(f,2),I=s(i(C),2),H=i(I);a(I),a(C);var P=s(C,2),E=s(i(P),2),U=i(E,!0);a(E),a(P);var L=s(P,2),N=s(i(L),2),K=i(N,!0);a(N),a(L),a(r),x(W=>{j(T,e(de).hostname),j(H,`v${e(de).version??""}`),j(U,W),j(K,e(de).ip_addresses.length>0?e(de).ip_addresses[0]:"Unknown")},[()=>da(e(de).uptime_seconds)]),o(n,r)},ma=n=>{var r=hi();o(n,r)};u(me,n=>{e(de)?n(ga):n(ma,!1)})}a(Ue),a(R);var ys=s(R,2),ws=i(ys),tt=s(i(ws),2),ks=i(tt),at=s(i(ks),2),xs=i(at);let it;xs.__click=()=>t(ye,"C");var lt=s(xs,2);let nt;lt.__click=()=>t(ye,"F"),a(at),a(ks);var Ss=s(ks,2),rt=s(i(Ss),2),Ts=i(rt);let ot;Ts.__click=()=>t(oe,"sg");var As=s(Ts,2);let ct;As.__click=()=>t(oe,"plato");var vt=s(As,2);let dt;vt.__click=()=>t(oe,"brix"),a(rt),a(Ss);var Cs=s(Ss,2),pt=s(i(Cs),2),ht=i(pt);F(ht),z(2),a(pt),a(Cs);var Ms=s(Cs,2),Is=s(i(Ms),2);let ut;Is.__click=()=>t(pe,!e(pe)),a(Ms);var _t=s(Ms,2);{var ja=n=>{var r=ui(),f=s(i(r),2),w=i(f);w.value=w.__value=3;var T=s(w);T.value=T.__value=5;var C=s(T);C.value=C.__value=10;var I=s(C);I.value=I.__value=15;var H=s(I);H.value=H.__value=20,a(f),a(r),Ys(f,()=>e(Ke),P=>t(Ke,P)),o(n,r)};u(_t,n=>{e(pe)&&n(ja)})}var Ps=s(_t,2),Es=s(i(Ps),2);let ft;Es.__click=()=>t(we,!e(we)),a(Ps);var gt=s(Ps,2),Be=i(gt);Be.__click=ta;var ba=i(Be);{var ya=n=>{var r=_i();z(),o(n,r)},wa=n=>{var r=Ie("Save Settings");o(n,r)};u(ba,n=>{e(We)?n(ya):n(wa,!1)})}a(Be);var mt=s(Be,2);{var ka=n=>{var r=fi(),f=i(r,!0);a(r),x(()=>j(f,e(qe))),o(n,r)};u(mt,n=>{e(qe)&&n(ka)})}var xa=s(mt,2);{var Sa=n=>{var r=gi();o(n,r)};u(xa,n=>{e(Ye)&&n(Sa)})}a(gt),a(tt),a(ws);var jt=s(ws,2),bt=s(i(jt),2),Hs=i(bt),yt=s(i(Hs)),Ta=i(yt,!0);a(yt),a(Hs);var wt=s(Hs,2),le=i(wt);le.__change=n=>na(n.currentTarget.value),Ws(le,21,()=>e(Qs),qs,(n,r)=>{var f=mi(),w=i(f,!0);a(f);var T={};x(()=>{j(w,e(r)),T!==(T=e(r))&&(f.value=(f.__value=e(r))??"")}),o(n,f)}),a(le);var kt;ri(le);var Aa=s(le,2);{var Ca=n=>{var r=ji();o(n,r)};u(Aa,n=>{e(M)==="timezone"&&n(Ca)})}a(wt),a(bt),a(jt),a(ys);var zs=s(ys,2),xt=s(i(zs),2),Fs=i(xt),Os=s(i(Fs),2);let St;Os.__click=()=>t(ae,!e(ae)),a(Fs);var Ma=s(Fs,2);{var Ia=n=>{var r=Si(),f=ve(r);{var w=v=>{var g=bi(),h=s(i(g),2);let m;var Q=i(h,!0);a(h),a(g),x(()=>{m=V(h,1,"status-badge svelte-hj1sc2",null,m,{connected:e(ss).connected}),j(Q,e(ss).connected?"Connected":"Disconnected")}),o(v,g)};u(f,v=>{e(ss)&&v(w)})}var T=s(f,2),C=s(i(T),2);F(C),a(T);var I=s(T,2),H=s(i(I),2);F(H),a(I);var P=s(I,2),E=s(i(P),2),U=i(E);U.__click=ha;var L=i(U,!0);a(U);var N=s(U,2);{var K=v=>{var g=yi();let h;var m=i(g,!0);a(g),x(()=>{h=V(g,1,"test-result svelte-hj1sc2",null,h,{success:e(he).success}),j(m,e(he).message)}),o(v,g)};u(N,v=>{e(he)&&v(K)})}a(E),a(P);var W=s(P,2),G=s(i(W),2);F(G),a(W);var se=s(W,2),k=s(i(se),2);F(k),a(se);var A=s(se,2),B=s(i(A),2);F(B),a(A);var q=s(A,2),te=s(i(q),2);F(te),a(q);var X=s(q,2),Y=s(i(X),2);F(Y),a(X);var Z=s(X,2),ne=i(Z);ne.__click=aa;var Ce=i(ne);{var re=v=>{var g=wi();z(),o(v,g)},Ge=v=>{var g=Ie("Save HA Settings");o(v,g)};u(Ce,v=>{e(ts)?v(re):v(Ge,!1)})}a(ne);var Me=s(ne,2);{var p=v=>{var g=ki(),h=i(g,!0);a(g),x(()=>j(h,e(as))),o(v,g)};u(Me,v=>{e(as)&&v(p)})}var _=s(Me,2);{var y=v=>{var g=xi();o(v,g)};u(_,v=>{e(is)&&v(y)})}a(Z),x(()=>{U.disabled=e(es)||!e(xe)||!e(Se),j(L,e(es)?"Testing...":"Test"),ne.disabled=e(ts)}),O(C,()=>e(xe),v=>t(xe,v)),O(H,()=>e(Se),v=>t(Se,v)),O(G,()=>e(Qe),v=>t(Qe,v)),O(k,()=>e(Xe),v=>t(Xe,v)),O(B,()=>e(Ee),v=>t(Ee,v)),O(te,()=>e(Ze),v=>t(Ze,v)),O(Y,()=>e($e),v=>t($e,v)),o(n,r)};u(Ma,n=>{e(ae)&&n(Ia)})}a(xt),a(zs);var Tt=s(zs,2);{var Pa=n=>{var r=Ii(),f=s(i(r),2),w=i(f),T=s(i(w),2);let C;T.__click=()=>t(ue,!e(ue)),a(w);var I=s(w,2);{var H=P=>{var E=Mi(),U=s(ve(E),2),L=i(U),N=s(i(L),2),K=i(N);a(N),a(L);var W=s(L,2),G=i(W);F(G);var se=s(G,2),k=i(se,!0);a(se),a(W),a(U);var A=s(U,2),B=i(A),q=s(i(B),2),te=i(q);a(q),a(B);var X=s(B,2),Y=i(X);F(Y);var Z=s(Y,2),ne=i(Z,!0);a(Z),a(X),a(A);var Ce=s(A,2),re=i(Ce);re.__click=ia;var Ge=i(re);{var Me=h=>{var m=Ti();z(),o(h,m)},p=h=>{var m=Ie("Save Control Settings");o(h,m)};u(Ge,h=>{e(ns)?h(Me):h(p,!1)})}a(re);var _=s(re,2);{var y=h=>{var m=Ai(),Q=i(m,!0);a(m),x(()=>j(Q,e(rs))),o(h,m)};u(_,h=>{e(rs)&&h(y)})}var v=s(_,2);{var g=h=>{var m=Ci();o(h,m)};u(v,h=>{e(os)&&h(g)})}a(Ce),x(()=>{j(K,`Desired fermentation temperature (${e(gs)??""})`),J(G,"min",e(ie)?0:32),J(G,"max",e(ie)?38:100),j(k,e(gs)),j(te,`± tolerance before triggering (${e(gs)??""})`),J(Y,"min",e(ie)?.3:.5),J(Y,"max",e(ie)?5.5:10),J(Y,"step",e(ie)?.25:.5),j(ne,e(gs)),re.disabled=e(ns)}),O(G,()=>e(ls),h=>t(ls,h)),O(Y,()=>e(He),h=>t(He,h)),o(P,E)};u(I,P=>{e(ue)&&P(H)})}a(f),a(r),x(()=>{C=V(T,1,"toggle svelte-hj1sc2",null,C,{active:e(ue)}),J(T,"aria-pressed",e(ue))}),o(n,r)};u(Tt,n=>{e(ae)&&n(Pa)})}var At=s(Tt,2);{var Ea=n=>{var r=Fi(),f=s(i(r),2),w=i(f),T=s(i(w),2);let C;T.__click=()=>t(_e,!e(_e)),a(w);var I=s(w,2);{var H=k=>{var A=Pi(),B=ve(A),q=s(i(B),2),te=i(q);F(te),z(2),a(q),a(B),z(2),O(te,()=>e(cs),X=>t(cs,X)),o(k,A)};u(I,k=>{e(_e)&&k(H)})}var P=s(I,2),E=i(P);E.__click=la;var U=i(E);{var L=k=>{var A=Ei();z(),o(k,A)},N=k=>{var A=Ie("Save Alert Settings");o(k,A)};u(U,k=>{e(vs)?k(L):k(N,!1)})}a(E);var K=s(E,2);{var W=k=>{var A=Hi(),B=i(A,!0);a(A),x(()=>j(B,e(ds))),o(k,A)};u(K,k=>{e(ds)&&k(W)})}var G=s(K,2);{var se=k=>{var A=zi();o(k,A)};u(G,k=>{e(ps)&&k(se)})}a(P),a(f),a(r),x(()=>{C=V(T,1,"toggle svelte-hj1sc2",null,C,{active:e(_e)}),J(T,"aria-pressed",e(_e)),E.disabled=e(vs)}),o(n,r)};u(At,n=>{e(ae)&&e(Ee)&&n(Ea)})}var Rs=s(At,2),Ct=s(i(Rs),2),Us=s(i(Ct),2),Bs=s(i(Us),2);let Mt;Bs.__click=()=>t(ce,!e(ce)),a(Us);var It=s(Us,2);{var Ha=n=>{var r=qi(),f=ve(r),w=s(i(f),2);Ws(w,21,()=>e(Ae),qs,(p,_)=>{var y=Oi(),v=i(y,!0);a(y);var g={};x(()=>{j(v,e(_).name),g!==(g=e(_).id)&&(y.value=(y.__value=e(_).id)??"")}),o(p,y)}),a(w),a(f);var T=s(f,2);{var C=p=>{var _=Ri();o(p,_)},I=p=>{var _=Nt(),y=ve(_);{var v=g=>{const h=Ks(()=>e(Ae).find(je=>je.id===e(D)));var m=Bi(),Q=i(m),Js=s(Q);{var $=je=>{var Dt=Ui();x(()=>J(Dt,"href",e(h).setup_url)),o(je,Dt)};u(Js,je=>{e(h)?.setup_url&&je($)})}a(m),x(()=>j(Q,`${e(h)?.description??""} `)),o(g,m)};u(y,g=>{e(Ae).find(h=>h.id===e(D))&&g(v)},!0)}o(p,_)};u(T,p=>{e(D)==="local"?p(C):p(I,!1)})}var H=s(T,2);{var P=p=>{var _=Di(),y=ve(_),v=i(y),g=s(i(v),2),h=i(g);a(g),a(v);var m=s(v,2);F(m),a(y);var Q=s(y,2);{var Js=$=>{var je=Li();o($,je)};u(Q,$=>{e(js)&&!e(Te)&&$(Js)})}x($=>{j(h,`Your API key for ${$??""}`),J(m,"placeholder",e(js)?"(using environment variable)":"sk-...")},[()=>e(Ae).find($=>$.id===e(D))?.name]),O(m,()=>e(Te),$=>t(Te,$)),o(p,_)};u(H,p=>{e(Ae).find(_=>_.id===e(D))?.requires_api_key&&p(P)})}var E=s(H,2);{var U=p=>{var _=Ni(),y=s(i(_),2);F(y),a(_),O(y,()=>e(ze),v=>t(ze,v)),o(p,_)};u(E,p=>{e(D)==="local"&&p(U)})}var L=s(E,2),N=s(i(L),2),K=i(N);K.value=K.__value="";var W=s(K);Ws(W,17,()=>e(Re),qs,(p,_)=>{var y=Gi(),v=i(y,!0);a(y);var g={};x(()=>{j(v,e(_).name),g!==(g=e(_).id)&&(y.value=(y.__value=e(_).id)??"")}),o(p,y)}),a(N),a(L);var G=s(L,2);{var se=p=>{var _=Ji(),y=i(_,!0);a(_),x(v=>j(y,v),[()=>e(Re).find(v=>v.id===e(fe))?.description]),o(p,_)};u(G,p=>{e(Re).find(_=>_.id===e(fe))&&p(se)})}var k=s(G,2),A=s(i(k),2),B=i(A),q=s(i(B),2);F(q),a(B);var te=s(B,2),X=s(i(te),2);F(X),a(te),a(A),a(k);var Y=s(k,2),Z=i(Y);Z.__click=sa;var ne=i(Z);{var Ce=p=>{var _=Vi();z(),o(p,_)},re=p=>{var _=Ie("Test Connection");o(p,_)};u(ne,p=>{e(fs)?p(Ce):p(re,!1)})}a(Z);var Ge=s(Z,2);{var Me=p=>{var _=Nt(),y=ve(_);{var v=h=>{var m=Ki(),Q=i(m);a(m),x(()=>j(Q,`Connected! Response: "${e(ge).response??""}"`)),o(h,m)},g=h=>{var m=Wi(),Q=i(m,!0);a(m),x(()=>j(Q,e(ge).error)),o(h,m)};u(y,h=>{e(ge).success?h(v):h(g,!1)})}o(p,_)};u(Ge,p=>{e(ge)&&p(Me)})}a(Y),x(()=>Z.disabled=e(fs)),Ys(w,()=>e(D),p=>t(D,p)),Ys(N,()=>e(fe),p=>t(fe,p)),O(q,()=>e(Fe),p=>t(Fe,p)),O(X,()=>e(Oe),p=>t(Oe,p)),o(n,r)};u(It,n=>{e(ce)&&n(Ha)})}var Pt=s(It,2),Le=i(Pt);Le.__click=ea;var za=i(Le);{var Fa=n=>{var r=Yi();z(),o(n,r)},Oa=n=>{var r=Ie("Save AI Settings");o(n,r)};u(za,n=>{e(hs)?n(Fa):n(Oa,!1)})}a(Le);var Et=s(Le,2);{var Ra=n=>{var r=Qi(),f=i(r,!0);a(r),x(()=>j(f,e(us))),o(n,r)};u(Et,n=>{e(us)&&n(Ra)})}var Ua=s(Et,2);{var Ba=n=>{var r=Xi();o(n,r)};u(Ua,n=>{e(_s)&&n(Ba)})}a(Pt),a(Ct),a(Rs);var Ls=s(Rs,2),Ht=s(i(Ls),2),zt=i(Ht),Ds=i(zt),La=i(Ds);{var Da=n=>{var r=Zi(),f=ve(r),w=i(f),T=i(w,!0);a(w),z(2),a(f);var C=s(f,2),I=i(C),H=i(I,!0);a(I),z(2),a(C),x((P,E)=>{j(T,P),j(H,E)},[()=>et(e(Je).total_readings),()=>pa(e(Je).estimated_size_bytes)]),o(n,r)},Na=n=>{var r=$i();o(n,r)};u(La,n=>{e(Je)?n(Da):n(Na,!1)})}a(Ds);var Ft=s(Ds,2),Ns=s(i(Ft),2),Gs=i(Ns),Ot=s(i(Gs),2);F(Ot),z(2),a(Gs);var Rt=s(Gs,2),De=i(Rt);De.__click=ra;var Ga=i(De,!0);a(De);var Ja=s(De,2);{var Va=n=>{var r=el();r.__click=oa;var f=i(r,!0);a(r),x(w=>{r.disabled=e(M)!==null,j(f,w)},[()=>e(M)==="cleanup"?"Deleting...":`Delete ${et(e(ee).readings_to_delete)} readings`]),o(n,r)};u(Ja,n=>{e(ee)&&e(ee).readings_to_delete>0&&n(Va)})}a(Rt),a(Ns);var Ka=s(Ns,2);{var Wa=n=>{var r=sl(),f=i(r);a(r),x(()=>j(f,`No readings older than ${e(ke)??""} days found.`)),o(n,r)};u(Ka,n=>{e(ee)&&e(ee).readings_to_delete===0&&n(Wa)})}a(Ft),a(zt),a(Ht),a(Ls);var Ut=s(Ls,2),Bt=s(i(Ut),2),Lt=s(i(Bt),2),Ne=i(Lt);Ne.__click=ca;var qa=i(Ne);{var Ya=n=>{var r=tl();z(),o(n,r)},Qa=n=>{var r=al();z(),o(n,r)};u(qa,n=>{e(M)==="reboot"?n(Ya):n(Qa,!1)})}a(Ne);var ms=s(Ne,2);ms.__click=va;var Xa=i(ms);{var Za=n=>{var r=il();z(),o(n,r)},$a=n=>{var r=ll();z(),o(n,r)};u(Xa,n=>{e(M)==="shutdown"?n(Za):n($a,!1)})}a(ms),a(Lt),a(Bt),a(Ut),a(S),x(()=>{it=V(xs,1,"unit-btn svelte-hj1sc2",null,it,{active:e(ye)==="C"}),nt=V(lt,1,"unit-btn svelte-hj1sc2",null,nt,{active:e(ye)==="F"}),ot=V(Ts,1,"unit-btn svelte-hj1sc2",null,ot,{active:e(oe)==="sg"}),ct=V(As,1,"unit-btn svelte-hj1sc2",null,ct,{active:e(oe)==="plato"}),dt=V(vt,1,"unit-btn svelte-hj1sc2",null,dt,{active:e(oe)==="brix"}),ut=V(Is,1,"toggle svelte-hj1sc2",null,ut,{active:e(pe)}),J(Is,"aria-pressed",e(pe)),ft=V(Es,1,"toggle svelte-hj1sc2",null,ft,{active:e(we)}),J(Es,"aria-pressed",e(we)),Be.disabled=e(We),j(Ta,e(be)),le.disabled=e(M)==="timezone",kt!==(kt=e(be))&&(le.value=(le.__value=e(be))??"",oi(le,e(be))),St=V(Os,1,"toggle svelte-hj1sc2",null,St,{active:e(ae)}),J(Os,"aria-pressed",e(ae)),Mt=V(Bs,1,"toggle svelte-hj1sc2",null,Mt,{active:e(ce)}),J(Bs,"aria-pressed",e(ce)),Le.disabled=e(hs),De.disabled=e(M)!==null,j(Ga,e(M)==="cleanup-preview"?"Checking...":"Preview"),Ne.disabled=e(M)!==null,ms.disabled=e(M)!==null}),O(ht,()=>e(Ve),n=>t(Ve,n)),O(Ot,()=>e(ke),n=>t(ke,n)),o(l,S)};u(ua,l=>{e(Xs)?l(_a):l(fa,!1)})}a(bs),o(Vt,bs),ai()}ei(["click","change"]);export{ml as component};
