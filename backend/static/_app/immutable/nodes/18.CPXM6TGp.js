import{d as Dt,f as _,a as p,s as h,c as Oe,e as St}from"../chunks/DZ15WIaR.js";import{a as Yt,s as x,p as We,o as $t,f as ge,d as o,c as r,g as s,t as k,i as e,h as Tt,e as jt,at as Bt,j as a,n as Ht,l as qe,k as Mt,aw as Pt}from"../chunks/CdgKpHHH.js";import{e as Ne,i as Rt}from"../chunks/Xm3Ul2fO.js";import{i as b}from"../chunks/CiVu40Aa.js";import{h as Et}from"../chunks/DwuO6wC8.js";import{r as j}from"../chunks/CnbDaB_W.js";import{s as tt}from"../chunks/CXy9Ft3Z.js";import{s as Ot}from"../chunks/DPM3yeI3.js";import{b as B,a as Wt}from"../chunks/DaMP4aMW.js";import{b as re}from"../chunks/DKHZoZvF.js";import{z as qt,g as Nt,A as zt,B as Qt,C as Vt}from"../chunks/B_gYxpKk.js";var Gt=_('<span class="strain-count svelte-1o4svxh"> </span>'),It=_("<option> </option>"),Jt=_('<div class="loading-state svelte-1o4svxh"><div class="spinner svelte-1o4svxh"></div> <p>Loading yeast strains...</p></div>'),Kt=_('<div class="error-state svelte-1o4svxh"><p class="error-message svelte-1o4svxh"> </p> <button type="button" class="retry-btn svelte-1o4svxh">Retry</button></div>'),Ut=_('<div class="empty-state svelte-1o4svxh"><div class="empty-icon svelte-1o4svxh">ðŸ§«</div> <h2 class="empty-title svelte-1o4svxh">No Yeast Strains</h2> <p class="empty-description svelte-1o4svxh">Click "Refresh DB" to load the yeast database</p></div>'),Xt=_('<div class="empty-state svelte-1o4svxh"><p class="empty-description svelte-1o4svxh">No yeasts match your filters</p></div>'),Zt=_('<button type="button" class="delete-btn svelte-1o4svxh" aria-label="Delete"><svg class="icon-sm svelte-1o4svxh" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),es=_('<span class="strain-type svelte-1o4svxh"> </span>'),ts=_('<span class="strain-form svelte-1o4svxh"> </span>'),ss=_('<span class="custom-badge svelte-1o4svxh">custom</span>'),as=_('<div class="spec svelte-1o4svxh"><span class="spec-label svelte-1o4svxh">Flocculation</span> <span class="spec-value svelte-1o4svxh"> </span></div>'),os=_('<p class="strain-description svelte-1o4svxh"> </p>'),ls=_('<div><div class="strain-header svelte-1o4svxh"><h3 class="strain-name svelte-1o4svxh"> </h3> <!></div> <div class="strain-meta svelte-1o4svxh"><!> <!> <!></div> <div class="strain-specs svelte-1o4svxh"><div class="spec svelte-1o4svxh"><span class="spec-label svelte-1o4svxh">Attenuation</span> <span class="spec-value svelte-1o4svxh"> </span></div> <div class="spec svelte-1o4svxh"><span class="spec-label svelte-1o4svxh">Temp Range</span> <span class="spec-value svelte-1o4svxh"> </span></div> <!></div> <!></div>'),rs=_('<div class="producer-group svelte-1o4svxh"><h2 class="producer-name svelte-1o4svxh"> <span class="producer-count svelte-1o4svxh"> </span></h2> <div class="strains-grid svelte-1o4svxh"></div></div>'),vs=_('<div class="strains-list svelte-1o4svxh"></div>'),is=_('<div class="modal-overlay svelte-1o4svxh" role="dialog" aria-modal="true"><div class="modal svelte-1o4svxh"><h2 class="modal-title svelte-1o4svxh">Add Custom Yeast</h2> <form class="modal-form svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-name" class="svelte-1o4svxh">Name *</label> <input id="yeast-name" type="text" required class="svelte-1o4svxh"/></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-producer" class="svelte-1o4svxh">Producer</label> <input id="yeast-producer" type="text" class="svelte-1o4svxh"/></div> <div class="form-group svelte-1o4svxh"><label for="yeast-type" class="svelte-1o4svxh">Type</label> <select id="yeast-type" class="svelte-1o4svxh"><option>Ale</option><option>Lager</option><option>Wine</option><option>Wild</option></select></div></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-form" class="svelte-1o4svxh">Form</label> <select id="yeast-form" class="svelte-1o4svxh"><option>Dry</option><option>Liquid</option><option>Slant</option></select></div> <div class="form-group svelte-1o4svxh"><label for="yeast-floc" class="svelte-1o4svxh">Flocculation</label> <select id="yeast-floc" class="svelte-1o4svxh"><option>Low</option><option>Medium</option><option>High</option><option>Very High</option></select></div></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-atten-low" class="svelte-1o4svxh">Attenuation Low (%)</label> <input id="yeast-atten-low" type="number" step="1" min="50" max="100" class="svelte-1o4svxh"/></div> <div class="form-group svelte-1o4svxh"><label for="yeast-atten-high" class="svelte-1o4svxh">Attenuation High (%)</label> <input id="yeast-atten-high" type="number" step="1" min="50" max="100" class="svelte-1o4svxh"/></div></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-temp-low" class="svelte-1o4svxh">Temp Low (Â°C)</label> <input id="yeast-temp-low" type="number" step="0.5" min="0" max="40" class="svelte-1o4svxh"/></div> <div class="form-group svelte-1o4svxh"><label for="yeast-temp-high" class="svelte-1o4svxh">Temp High (Â°C)</label> <input id="yeast-temp-high" type="number" step="0.5" min="0" max="40" class="svelte-1o4svxh"/></div></div> <div class="form-group svelte-1o4svxh"><label for="yeast-desc" class="svelte-1o4svxh">Description</label> <textarea id="yeast-desc" rows="3" class="svelte-1o4svxh"></textarea></div> <div class="modal-actions svelte-1o4svxh"><button type="button" class="btn-cancel svelte-1o4svxh">Cancel</button> <button type="submit" class="btn-submit svelte-1o4svxh"> </button></div></form></div></div>'),ns=_('<div class="modal-overlay svelte-1o4svxh" role="dialog" aria-modal="true"><div class="modal svelte-1o4svxh"><h2 class="modal-title svelte-1o4svxh">Delete Yeast?</h2> <p class="modal-text svelte-1o4svxh"> </p> <div class="modal-actions svelte-1o4svxh"><button type="button" class="btn-cancel svelte-1o4svxh">Cancel</button> <button type="button" class="btn-delete svelte-1o4svxh"> </button></div></div></div>'),ds=_('<div class="page-container svelte-1o4svxh"><div class="page-header svelte-1o4svxh"><div class="header-left svelte-1o4svxh"><h1 class="page-title svelte-1o4svxh">Yeast Library</h1> <!></div> <div class="header-actions svelte-1o4svxh"><button type="button" class="refresh-btn svelte-1o4svxh"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> </button> <button type="button" class="add-btn svelte-1o4svxh"><svg class="icon svelte-1o4svxh" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"></path></svg> Add Custom</button></div></div> <div class="filters-bar svelte-1o4svxh"><input type="text" placeholder="Search yeasts..." class="search-input svelte-1o4svxh"/> <select class="filter-select svelte-1o4svxh"><option>All Types</option><option>Ale</option><option>Lager</option><option>Wine</option><option>Wild</option></select> <select class="filter-select svelte-1o4svxh"><option>All Producers</option><!></select> <label class="custom-toggle svelte-1o4svxh"><input type="checkbox" class="svelte-1o4svxh"/> <span>Custom only</span></label></div> <!></div> <!> <!>',1);function ws(st,at){Yt(at,!0);let A=x(We([])),ze=x(We([])),ve=x(!0),H=x(null),z=x(""),ie=x(""),ne=x(""),we=x(!1),K=x(!1),d=x(We({name:"",producer:"",type:"ale",form:"dry",attenuation_low:void 0,attenuation_high:void 0,temp_low:void 0,temp_high:void 0,flocculation:"medium",description:""})),de=x(!1),U=x(!1),L=x(null),ce=x(!1),ke=qe(()=>()=>e(A).filter(t=>{const l=!e(z)||t.name.toLowerCase().includes(e(z).toLowerCase())||t.producer?.toLowerCase().includes(e(z).toLowerCase())||t.product_id?.toLowerCase().includes(e(z).toLowerCase()),i=!e(ie)||t.type===e(ie),m=!e(ne)||t.producer===e(ne),g=!e(we)||t.is_custom;return l&&i&&m&&g})),ot=qe(()=>()=>{const t={};for(const l of e(ke)()){const i=l.producer||"Other";t[i]||(t[i]=[]),t[i].push(l)}return Object.fromEntries(Object.entries(t).sort(([l],[i])=>l.localeCompare(i)))});async function Ce(){r(ve,!0),r(H,null);try{const[t,l]=await Promise.all([Nt({limit:500}),zt()]);r(A,t,!0),r(ze,l.producers,!0)}catch(t){r(H,t instanceof Error?t.message:"Failed to load yeast strains",!0)}finally{r(ve,!1)}}async function lt(){if(e(d).name.trim()){r(de,!0);try{const t=await Qt(e(d));r(A,[t,...e(A)],!0),r(K,!1),r(d,{name:"",producer:"",type:"ale",form:"dry",attenuation_low:void 0,attenuation_high:void 0,temp_low:void 0,temp_high:void 0,flocculation:"medium",description:""},!0)}catch(t){r(H,t instanceof Error?t.message:"Failed to add yeast",!0)}finally{r(de,!1)}}}async function rt(){if(e(L)){r(ce,!0);try{await Vt(e(L).id),r(A,e(A).filter(t=>t.id!==e(L).id),!0),r(L,null)}catch(t){r(H,t instanceof Error?t.message:"Failed to delete yeast",!0)}finally{r(ce,!1)}}}async function vt(){r(U,!0);try{const t=await qt();await Ce()}catch(t){r(H,t instanceof Error?t.message:"Failed to refresh yeast database",!0)}finally{r(U,!1)}}function it(t,l){return t==null&&l==null?"--":t!=null&&l!=null?`${t.toFixed(0)}-${l.toFixed(0)}Â°C`:t!=null?`>${t.toFixed(0)}Â°C`:`<${l.toFixed(0)}Â°C`}function nt(t,l){return t==null&&l==null?"--":t!=null&&l!=null?t===l?`${t.toFixed(0)}%`:`${t.toFixed(0)}-${l.toFixed(0)}%`:t!=null?`>${t.toFixed(0)}%`:`<${l.toFixed(0)}%`}function dt(t){switch(t){case"ale":return"var(--positive)";case"lager":return"var(--info)";case"wine":return"var(--warning)";case"wild":return"var(--negative)";default:return"var(--text-secondary)"}}$t(Ce);var Qe=ds();Et("1o4svxh",t=>{jt(()=>{Bt.title="Yeast Library | BrewSignal"})});var Fe=ge(Qe),Ae=o(Fe),Le=o(Ae),ct=s(o(Le),2);{var ut=t=>{var l=Gt(),i=o(l);a(l),k(m=>h(i,`${m??""} of ${e(A).length??""}`),[()=>e(ke)().length]),p(t,l)};b(ct,t=>{!e(ve)&&e(A).length>0&&t(ut)})}a(Le);var Ve=s(Le,2),X=o(Ve);X.__click=vt;var Ge=o(X);let Ie;var pt=s(Ge);a(X);var _t=s(X,2);_t.__click=()=>r(K,!0),a(Ve),a(Ae);var De=s(Ae,2),Se=o(De);j(Se);var ue=s(Se,2),Ye=o(ue);Ye.value=Ye.__value="";var $e=s(Ye);$e.value=$e.__value="ale";var Te=s($e);Te.value=Te.__value="lager";var je=s(Te);je.value=je.__value="wine";var Je=s(je);Je.value=Je.__value="wild",a(ue);var pe=s(ue,2),Be=o(pe);Be.value=Be.__value="";var ht=s(Be);Ne(ht,17,()=>e(ze),Rt,(t,l)=>{var i=It(),m=o(i,!0);a(i);var g={};k(()=>{h(m,e(l)),g!==(g=e(l))&&(i.value=(i.__value=e(l))??"")}),p(t,i)}),a(pe);var Ke=s(pe,2),Ue=o(Ke);j(Ue),Ht(2),a(Ke),a(De);var mt=s(De,2);{var ft=t=>{var l=Jt();p(t,l)},xt=t=>{var l=Oe(),i=ge(l);{var m=w=>{var y=Kt(),f=o(y),S=o(f,!0);a(f);var Y=s(f,2);Y.__click=Ce,a(y),k(()=>h(S,e(H))),p(w,y)},g=w=>{var y=Oe(),f=ge(y);{var S=C=>{var $=Ut();p(C,$)},Y=C=>{var $=Oe(),Z=ge($);{var ee=F=>{var D=Xt();p(F,D)},_e=F=>{var D=vs();Ne(D,21,()=>Object.entries(e(ot)()),([M,Q])=>M,(M,Q)=>{var V=qe(()=>Pt(e(Q),2));let he=()=>e(V)[0],te=()=>e(V)[1];var P=rs(),R=o(P),G=o(R),I=s(G),me=o(I);a(I),a(R);var J=s(R,2);Ne(J,21,te,E=>E.id,(E,u)=>{var O=ls();let se;var W=o(O),q=o(W),fe=o(q,!0);a(q);var xe=s(q,2);{var ye=n=>{var c=Zt();c.__click=()=>r(L,e(u),!0),p(n,c)};b(xe,n=>{e(u).is_custom&&n(ye)})}a(W);var N=s(W,2),ae=o(N);{var be=n=>{var c=es(),T=o(c,!0);a(c),k(Ee=>{Ot(c,`color: ${Ee??""}`),h(T,e(u).type)},[()=>dt(e(u).type)]),p(n,c)};b(ae,n=>{e(u).type&&n(be)})}var oe=s(ae,2);{var le=n=>{var c=ts(),T=o(c,!0);a(c),k(()=>h(T,e(u).form)),p(n,c)};b(oe,n=>{e(u).form&&n(le)})}var He=s(oe,2);{var v=n=>{var c=ss();p(n,c)};b(He,n=>{e(u).is_custom&&n(v)})}a(N);var Me=s(N,2),Pe=o(Me),Ze=s(o(Pe),2),wt=o(Ze,!0);a(Ze),a(Pe);var Re=s(Pe,2),et=s(o(Re),2),kt=o(et,!0);a(et),a(Re);var Ct=s(Re,2);{var Ft=n=>{var c=as(),T=s(o(c),2),Ee=o(T,!0);a(T),a(c),k(()=>h(Ee,e(u).flocculation)),p(n,c)};b(Ct,n=>{e(u).flocculation&&n(Ft)})}a(Me);var At=s(Me,2);{var Lt=n=>{var c=os(),T=o(c,!0);a(c),k(()=>h(T,e(u).description)),p(n,c)};b(At,n=>{e(u).description&&n(Lt)})}a(O),k((n,c)=>{se=tt(O,1,"strain-card svelte-1o4svxh",null,se,{custom:e(u).is_custom}),h(fe,e(u).name),h(wt,n),h(kt,c)},[()=>nt(e(u).attenuation_low,e(u).attenuation_high),()=>it(e(u).temp_low,e(u).temp_high)]),p(E,O)}),a(J),a(P),k(()=>{h(G,`${he()??""} `),h(me,`(${te().length??""})`)}),p(M,P)}),a(D),p(F,D)};b(Z,F=>{e(ke)().length===0?F(ee):F(_e,!1)},!0)}p(C,$)};b(f,C=>{e(A).length===0?C(S):C(Y,!1)},!0)}p(w,y)};b(i,w=>{e(H)?w(m):w(g,!1)},!0)}p(t,l)};b(mt,t=>{e(ve)?t(ft):t(xt,!1)})}a(Fe);var Xe=s(Fe,2);{var yt=t=>{var l=is();l.__click=()=>r(K,!1);var i=o(l);i.__click=v=>v.stopPropagation();var m=s(o(i),2),g=o(m),w=s(o(g),2);j(w),a(g);var y=s(g,2),f=o(y),S=s(o(f),2);j(S),a(f);var Y=s(f,2),C=s(o(Y),2),$=o(C);$.value=$.__value="ale";var Z=s($);Z.value=Z.__value="lager";var ee=s(Z);ee.value=ee.__value="wine";var _e=s(ee);_e.value=_e.__value="wild",a(C),a(Y),a(y);var F=s(y,2),D=o(F),M=s(o(D),2),Q=o(M);Q.value=Q.__value="dry";var V=s(Q);V.value=V.__value="liquid";var he=s(V);he.value=he.__value="slant",a(M),a(D);var te=s(D,2),P=s(o(te),2),R=o(P);R.value=R.__value="low";var G=s(R);G.value=G.__value="medium";var I=s(G);I.value=I.__value="high";var me=s(I);me.value=me.__value="very high",a(P),a(te),a(F);var J=s(F,2),E=o(J),u=s(o(E),2);j(u),a(E);var O=s(E,2),se=s(o(O),2);j(se),a(O),a(J);var W=s(J,2),q=o(W),fe=s(o(q),2);j(fe),a(q);var xe=s(q,2),ye=s(o(xe),2);j(ye),a(xe),a(W);var N=s(W,2),ae=s(o(N),2);Mt(ae),a(N);var be=s(N,2),oe=o(be);oe.__click=()=>r(K,!1);var le=s(oe,2),He=o(le,!0);a(le),a(be),a(m),a(i),a(l),k(v=>{le.disabled=v,h(He,e(de)?"Adding...":"Add Yeast")},[()=>e(de)||!e(d).name.trim()]),St("submit",m,v=>{v.preventDefault(),lt()}),B(w,()=>e(d).name,v=>e(d).name=v),B(S,()=>e(d).producer,v=>e(d).producer=v),re(C,()=>e(d).type,v=>e(d).type=v),re(M,()=>e(d).form,v=>e(d).form=v),re(P,()=>e(d).flocculation,v=>e(d).flocculation=v),B(u,()=>e(d).attenuation_low,v=>e(d).attenuation_low=v),B(se,()=>e(d).attenuation_high,v=>e(d).attenuation_high=v),B(fe,()=>e(d).temp_low,v=>e(d).temp_low=v),B(ye,()=>e(d).temp_high,v=>e(d).temp_high=v),B(ae,()=>e(d).description,v=>e(d).description=v),p(t,l)};b(Xe,t=>{e(K)&&t(yt)})}var bt=s(Xe,2);{var gt=t=>{var l=ns();l.__click=()=>r(L,null);var i=o(l);i.__click=Y=>Y.stopPropagation();var m=s(o(i),2),g=o(m);a(m);var w=s(m,2),y=o(w);y.__click=()=>r(L,null);var f=s(y,2);f.__click=rt;var S=o(f,!0);a(f),a(w),a(i),a(l),k(()=>{h(g,`Are you sure you want to delete "${e(L).name??""}"? This cannot be undone.`),f.disabled=e(ce),h(S,e(ce)?"Deleting...":"Delete")}),p(t,l)};b(bt,t=>{e(L)&&t(gt)})}k(()=>{X.disabled=e(U),Ie=tt(Ge,0,"icon svelte-1o4svxh",null,Ie,{spinning:e(U)}),h(pt,` ${e(U)?"Refreshing...":"Refresh DB"}`)}),B(Se,()=>e(z),t=>r(z,t)),re(ue,()=>e(ie),t=>r(ie,t)),re(pe,()=>e(ne),t=>r(ne,t)),Wt(Ue,()=>e(we),t=>r(we,t)),p(st,Qe),Tt()}Dt(["click"]);export{ws as component};
