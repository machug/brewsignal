import{d as Dt,f as _,a as p,s as h,c as Oe,e as St}from"../chunks/orbuQWWI.js";import{a as Yt,s as x,p as We,o as $t,f as ge,d as o,c as r,e as a,t as C,h as e,g as Tt,A as Pt,ax as Et,r as s,n as Ht,u as qe,i as Mt,ay as Rt}from"../chunks/pAodAtlG.js";import{e as Ne,i as jt}from"../chunks/0whDC7Rl.js";import{i as b}from"../chunks/ucc1DXe2.js";import{h as Bt}from"../chunks/DJBMpqSf.js";import{r as P}from"../chunks/CYuZshLQ.js";import{s as tt}from"../chunks/Cpbxxhlc.js";import{s as Ot}from"../chunks/C-5oeV0L.js";import{b as E,a as Wt}from"../chunks/Dh5hCwq1.js";import{b as re}from"../chunks/RboyDiSx.js";import{t as qt,g as Nt,x as Qt,C as Vt,F as zt}from"../chunks/BKVJalqB.js";var Gt=_('<span class="strain-count svelte-1o4svxh"> </span>'),It=_("<option> </option>"),Jt=_('<div class="loading-state svelte-1o4svxh"><div class="spinner svelte-1o4svxh"></div> <p>Loading yeast strains...</p></div>'),Kt=_('<div class="error-state svelte-1o4svxh"><p class="error-message svelte-1o4svxh"> </p> <button type="button" class="retry-btn svelte-1o4svxh">Retry</button></div>'),Ut=_('<div class="empty-state svelte-1o4svxh"><div class="empty-icon svelte-1o4svxh">ðŸ§«</div> <h2 class="empty-title svelte-1o4svxh">No Yeast Strains</h2> <p class="empty-description svelte-1o4svxh">Click "Refresh DB" to load the yeast database</p></div>'),Xt=_('<div class="empty-state svelte-1o4svxh"><p class="empty-description svelte-1o4svxh">No yeasts match your filters</p></div>'),Zt=_('<button type="button" class="delete-btn svelte-1o4svxh" aria-label="Delete"><svg class="icon-sm svelte-1o4svxh" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),ea=_('<span class="strain-type svelte-1o4svxh"> </span>'),ta=_('<span class="strain-form svelte-1o4svxh"> </span>'),aa=_('<span class="custom-badge svelte-1o4svxh">custom</span>'),sa=_('<div class="spec svelte-1o4svxh"><span class="spec-label svelte-1o4svxh">Flocculation</span> <span class="spec-value svelte-1o4svxh"> </span></div>'),oa=_('<p class="strain-description svelte-1o4svxh"> </p>'),la=_('<div><div class="strain-header svelte-1o4svxh"><h3 class="strain-name svelte-1o4svxh"> </h3> <!></div> <div class="strain-meta svelte-1o4svxh"><!> <!> <!></div> <div class="strain-specs svelte-1o4svxh"><div class="spec svelte-1o4svxh"><span class="spec-label svelte-1o4svxh">Attenuation</span> <span class="spec-value svelte-1o4svxh"> </span></div> <div class="spec svelte-1o4svxh"><span class="spec-label svelte-1o4svxh">Temp Range</span> <span class="spec-value svelte-1o4svxh"> </span></div> <!></div> <!></div>'),ra=_('<div class="producer-group svelte-1o4svxh"><h2 class="producer-name svelte-1o4svxh"> <span class="producer-count svelte-1o4svxh"> </span></h2> <div class="strains-grid svelte-1o4svxh"></div></div>'),va=_('<div class="strains-list svelte-1o4svxh"></div>'),ia=_('<div class="modal-overlay svelte-1o4svxh" role="presentation"><div class="modal svelte-1o4svxh" role="dialog" aria-modal="true" aria-labelledby="add-yeast-modal-title" tabindex="-1"><h2 id="add-yeast-modal-title" class="modal-title svelte-1o4svxh">Add Custom Yeast</h2> <form class="modal-form svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-name" class="svelte-1o4svxh">Name *</label> <input id="yeast-name" type="text" required class="svelte-1o4svxh"/></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-producer" class="svelte-1o4svxh">Producer</label> <input id="yeast-producer" type="text" class="svelte-1o4svxh"/></div> <div class="form-group svelte-1o4svxh"><label for="yeast-type" class="svelte-1o4svxh">Type</label> <select id="yeast-type" class="svelte-1o4svxh"><option>Ale</option><option>Lager</option><option>Wine</option><option>Wild</option></select></div></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-form" class="svelte-1o4svxh">Form</label> <select id="yeast-form" class="svelte-1o4svxh"><option>Dry</option><option>Liquid</option><option>Slant</option></select></div> <div class="form-group svelte-1o4svxh"><label for="yeast-floc" class="svelte-1o4svxh">Flocculation</label> <select id="yeast-floc" class="svelte-1o4svxh"><option>Low</option><option>Medium</option><option>High</option><option>Very High</option></select></div></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-atten-low" class="svelte-1o4svxh">Attenuation Low (%)</label> <input id="yeast-atten-low" type="number" step="1" min="50" max="100" class="svelte-1o4svxh"/></div> <div class="form-group svelte-1o4svxh"><label for="yeast-atten-high" class="svelte-1o4svxh">Attenuation High (%)</label> <input id="yeast-atten-high" type="number" step="1" min="50" max="100" class="svelte-1o4svxh"/></div></div> <div class="form-row svelte-1o4svxh"><div class="form-group svelte-1o4svxh"><label for="yeast-temp-low" class="svelte-1o4svxh">Temp Low (Â°C)</label> <input id="yeast-temp-low" type="number" step="0.5" min="0" max="40" class="svelte-1o4svxh"/></div> <div class="form-group svelte-1o4svxh"><label for="yeast-temp-high" class="svelte-1o4svxh">Temp High (Â°C)</label> <input id="yeast-temp-high" type="number" step="0.5" min="0" max="40" class="svelte-1o4svxh"/></div></div> <div class="form-group svelte-1o4svxh"><label for="yeast-desc" class="svelte-1o4svxh">Description</label> <textarea id="yeast-desc" rows="3" class="svelte-1o4svxh"></textarea></div> <div class="modal-actions svelte-1o4svxh"><button type="button" class="btn-cancel svelte-1o4svxh">Cancel</button> <button type="submit" class="btn-submit svelte-1o4svxh"> </button></div></form></div></div>'),na=_('<div class="modal-overlay svelte-1o4svxh" role="presentation"><div class="modal svelte-1o4svxh" role="dialog" aria-modal="true" aria-labelledby="delete-yeast-title" tabindex="-1"><h2 id="delete-yeast-title" class="modal-title svelte-1o4svxh">Delete Yeast?</h2> <p class="modal-text svelte-1o4svxh"> </p> <div class="modal-actions svelte-1o4svxh"><button type="button" class="btn-cancel svelte-1o4svxh">Cancel</button> <button type="button" class="btn-delete svelte-1o4svxh"> </button></div></div></div>'),da=_('<div class="page-container svelte-1o4svxh"><div class="page-header svelte-1o4svxh"><div class="header-left svelte-1o4svxh"><h1 class="page-title svelte-1o4svxh">Yeast Library</h1> <!></div> <div class="header-actions svelte-1o4svxh"><button type="button" class="refresh-btn svelte-1o4svxh"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> </button> <button type="button" class="add-btn svelte-1o4svxh"><svg class="icon svelte-1o4svxh" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"></path></svg> Add Custom</button></div></div> <div class="filters-bar svelte-1o4svxh"><input type="text" placeholder="Search yeasts..." class="search-input svelte-1o4svxh"/> <select class="filter-select svelte-1o4svxh"><option>All Types</option><option>Ale</option><option>Lager</option><option>Wine</option><option>Wild</option></select> <select class="filter-select svelte-1o4svxh"><option>All Producers</option><!></select> <label class="custom-toggle svelte-1o4svxh"><input type="checkbox" class="svelte-1o4svxh"/> <span>Custom only</span></label></div> <!></div> <!> <!>',1);function wa(at,st){Yt(st,!0);let D=x(We([])),Qe=x(We([])),ve=x(!0),H=x(null),Q=x(""),ie=x(""),ne=x(""),we=x(!1),V=x(!1),d=x(We({name:"",producer:"",type:"ale",form:"dry",attenuation_low:void 0,attenuation_high:void 0,temp_low:void 0,temp_high:void 0,flocculation:"medium",description:""})),de=x(!1),U=x(!1),F=x(null),ce=x(!1),ke=qe(()=>()=>e(D).filter(t=>{const l=!e(Q)||t.name.toLowerCase().includes(e(Q).toLowerCase())||t.producer?.toLowerCase().includes(e(Q).toLowerCase())||t.product_id?.toLowerCase().includes(e(Q).toLowerCase()),i=!e(ie)||t.type===e(ie),m=!e(ne)||t.producer===e(ne),g=!e(we)||t.is_custom;return l&&i&&m&&g})),ot=qe(()=>()=>{const t={};for(const l of e(ke)()){const i=l.producer||"Other";t[i]||(t[i]=[]),t[i].push(l)}return Object.fromEntries(Object.entries(t).sort(([l],[i])=>l.localeCompare(i)))});async function Ce(){r(ve,!0),r(H,null);try{const[t,l]=await Promise.all([Nt({limit:500}),Qt()]);r(D,t,!0),r(Qe,l.producers,!0)}catch(t){r(H,t instanceof Error?t.message:"Failed to load yeast strains",!0)}finally{r(ve,!1)}}async function lt(){if(e(d).name.trim()){r(de,!0);try{const t=await Vt(e(d));r(D,[t,...e(D)],!0),r(V,!1),r(d,{name:"",producer:"",type:"ale",form:"dry",attenuation_low:void 0,attenuation_high:void 0,temp_low:void 0,temp_high:void 0,flocculation:"medium",description:""},!0)}catch(t){r(H,t instanceof Error?t.message:"Failed to add yeast",!0)}finally{r(de,!1)}}}async function rt(){if(e(F)){r(ce,!0);try{await zt(e(F).id),r(D,e(D).filter(t=>t.id!==e(F).id),!0),r(F,null)}catch(t){r(H,t instanceof Error?t.message:"Failed to delete yeast",!0)}finally{r(ce,!1)}}}async function vt(){r(U,!0);try{const t=await qt();await Ce()}catch(t){r(H,t instanceof Error?t.message:"Failed to refresh yeast database",!0)}finally{r(U,!1)}}function it(t,l){return t==null&&l==null?"--":t!=null&&l!=null?`${t.toFixed(0)}-${l.toFixed(0)}Â°C`:t!=null?`>${t.toFixed(0)}Â°C`:`<${l.toFixed(0)}Â°C`}function nt(t,l){return t==null&&l==null?"--":t!=null&&l!=null?t===l?`${t.toFixed(0)}%`:`${t.toFixed(0)}-${l.toFixed(0)}%`:t!=null?`>${t.toFixed(0)}%`:`<${l.toFixed(0)}%`}function dt(t){switch(t){case"ale":return"var(--positive)";case"lager":return"var(--info)";case"wine":return"var(--warning)";case"wild":return"var(--negative)";default:return"var(--text-secondary)"}}$t(Ce);var Ve=da();Bt("1o4svxh",t=>{Pt(()=>{Et.title="Yeast Library | BrewSignal"})});var Fe=ge(Ve),Ae=o(Fe),Le=o(Ae),ct=a(o(Le),2);{var ut=t=>{var l=Gt(),i=o(l);s(l),C(m=>h(i,`${m??""} of ${e(D).length??""}`),[()=>e(ke)().length]),p(t,l)};b(ct,t=>{!e(ve)&&e(D).length>0&&t(ut)})}s(Le);var ze=a(Le,2),X=o(ze);X.__click=vt;var Ge=o(X);let Ie;var pt=a(Ge);s(X);var _t=a(X,2);_t.__click=()=>r(V,!0),s(ze),s(Ae);var De=a(Ae,2),Se=o(De);P(Se);var ue=a(Se,2),Ye=o(ue);Ye.value=Ye.__value="";var $e=a(Ye);$e.value=$e.__value="ale";var Te=a($e);Te.value=Te.__value="lager";var Pe=a(Te);Pe.value=Pe.__value="wine";var Je=a(Pe);Je.value=Je.__value="wild",s(ue);var pe=a(ue,2),Ee=o(pe);Ee.value=Ee.__value="";var ht=a(Ee);Ne(ht,17,()=>e(Qe),jt,(t,l)=>{var i=It(),m=o(i,!0);s(i);var g={};C(()=>{h(m,e(l)),g!==(g=e(l))&&(i.value=(i.__value=e(l))??"")}),p(t,i)}),s(pe);var Ke=a(pe,2),Ue=o(Ke);P(Ue),Ht(2),s(Ke),s(De);var mt=a(De,2);{var ft=t=>{var l=Jt();p(t,l)},xt=t=>{var l=Oe(),i=ge(l);{var m=w=>{var y=Kt(),f=o(y),Y=o(f,!0);s(f);var k=a(f,2);k.__click=Ce,s(y),C(()=>h(Y,e(H))),p(w,y)},g=w=>{var y=Oe(),f=ge(y);{var Y=A=>{var $=Ut();p(A,$)},k=A=>{var $=Oe(),Z=ge($);{var ee=L=>{var S=Xt();p(L,S)},_e=L=>{var S=va();Ne(S,21,()=>Object.entries(e(ot)()),([M,z])=>M,(M,z)=>{var G=qe(()=>Rt(e(z),2));let he=()=>e(G)[0],te=()=>e(G)[1];var R=ra(),j=o(R),I=o(j),J=a(I),me=o(J);s(J),s(j);var K=a(j,2);Ne(K,21,te,B=>B.id,(B,u)=>{var O=la();let ae;var W=o(O),q=o(W),fe=o(q,!0);s(q);var xe=a(q,2);{var ye=n=>{var c=Zt();c.__click=()=>r(F,e(u),!0),p(n,c)};b(xe,n=>{e(u).is_custom&&n(ye)})}s(W);var N=a(W,2),se=o(N);{var be=n=>{var c=ea(),T=o(c,!0);s(c),C(Be=>{Ot(c,`color: ${Be??""}`),h(T,e(u).type)},[()=>dt(e(u).type)]),p(n,c)};b(se,n=>{e(u).type&&n(be)})}var oe=a(se,2);{var le=n=>{var c=ta(),T=o(c,!0);s(c),C(()=>h(T,e(u).form)),p(n,c)};b(oe,n=>{e(u).form&&n(le)})}var He=a(oe,2);{var v=n=>{var c=aa();p(n,c)};b(He,n=>{e(u).is_custom&&n(v)})}s(N);var Me=a(N,2),Re=o(Me),Ze=a(o(Re),2),wt=o(Ze,!0);s(Ze),s(Re);var je=a(Re,2),et=a(o(je),2),kt=o(et,!0);s(et),s(je);var Ct=a(je,2);{var Ft=n=>{var c=sa(),T=a(o(c),2),Be=o(T,!0);s(T),s(c),C(()=>h(Be,e(u).flocculation)),p(n,c)};b(Ct,n=>{e(u).flocculation&&n(Ft)})}s(Me);var At=a(Me,2);{var Lt=n=>{var c=oa(),T=o(c,!0);s(c),C(()=>h(T,e(u).description)),p(n,c)};b(At,n=>{e(u).description&&n(Lt)})}s(O),C((n,c)=>{ae=tt(O,1,"strain-card svelte-1o4svxh",null,ae,{custom:e(u).is_custom}),h(fe,e(u).name),h(wt,n),h(kt,c)},[()=>nt(e(u).attenuation_low,e(u).attenuation_high),()=>it(e(u).temp_low,e(u).temp_high)]),p(B,O)}),s(K),s(R),C(()=>{h(I,`${he()??""} `),h(me,`(${te().length??""})`)}),p(M,R)}),s(S),p(L,S)};b(Z,L=>{e(ke)().length===0?L(ee):L(_e,!1)},!0)}p(A,$)};b(f,A=>{e(D).length===0?A(Y):A(k,!1)},!0)}p(w,y)};b(i,w=>{e(H)?w(m):w(g,!1)},!0)}p(t,l)};b(mt,t=>{e(ve)?t(ft):t(xt,!1)})}s(Fe);var Xe=a(Fe,2);{var yt=t=>{var l=ia();l.__click=()=>r(V,!1),l.__keydown=v=>v.key==="Escape"&&r(V,!1);var i=o(l);i.__click=v=>v.stopPropagation(),i.__keydown=v=>v.stopPropagation();var m=a(o(i),2),g=o(m),w=a(o(g),2);P(w),s(g);var y=a(g,2),f=o(y),Y=a(o(f),2);P(Y),s(f);var k=a(f,2),A=a(o(k),2),$=o(A);$.value=$.__value="ale";var Z=a($);Z.value=Z.__value="lager";var ee=a(Z);ee.value=ee.__value="wine";var _e=a(ee);_e.value=_e.__value="wild",s(A),s(k),s(y);var L=a(y,2),S=o(L),M=a(o(S),2),z=o(M);z.value=z.__value="dry";var G=a(z);G.value=G.__value="liquid";var he=a(G);he.value=he.__value="slant",s(M),s(S);var te=a(S,2),R=a(o(te),2),j=o(R);j.value=j.__value="low";var I=a(j);I.value=I.__value="medium";var J=a(I);J.value=J.__value="high";var me=a(J);me.value=me.__value="very high",s(R),s(te),s(L);var K=a(L,2),B=o(K),u=a(o(B),2);P(u),s(B);var O=a(B,2),ae=a(o(O),2);P(ae),s(O),s(K);var W=a(K,2),q=o(W),fe=a(o(q),2);P(fe),s(q);var xe=a(q,2),ye=a(o(xe),2);P(ye),s(xe),s(W);var N=a(W,2),se=a(o(N),2);Mt(se),s(N);var be=a(N,2),oe=o(be);oe.__click=()=>r(V,!1);var le=a(oe,2),He=o(le,!0);s(le),s(be),s(m),s(i),s(l),C(v=>{le.disabled=v,h(He,e(de)?"Adding...":"Add Yeast")},[()=>e(de)||!e(d).name.trim()]),St("submit",m,v=>{v.preventDefault(),lt()}),E(w,()=>e(d).name,v=>e(d).name=v),E(Y,()=>e(d).producer,v=>e(d).producer=v),re(A,()=>e(d).type,v=>e(d).type=v),re(M,()=>e(d).form,v=>e(d).form=v),re(R,()=>e(d).flocculation,v=>e(d).flocculation=v),E(u,()=>e(d).attenuation_low,v=>e(d).attenuation_low=v),E(ae,()=>e(d).attenuation_high,v=>e(d).attenuation_high=v),E(fe,()=>e(d).temp_low,v=>e(d).temp_low=v),E(ye,()=>e(d).temp_high,v=>e(d).temp_high=v),E(se,()=>e(d).description,v=>e(d).description=v),p(t,l)};b(Xe,t=>{e(V)&&t(yt)})}var bt=a(Xe,2);{var gt=t=>{var l=na();l.__click=()=>r(F,null),l.__keydown=k=>k.key==="Escape"&&r(F,null);var i=o(l);i.__click=k=>k.stopPropagation(),i.__keydown=k=>k.stopPropagation();var m=a(o(i),2),g=o(m);s(m);var w=a(m,2),y=o(w);y.__click=()=>r(F,null);var f=a(y,2);f.__click=rt;var Y=o(f,!0);s(f),s(w),s(i),s(l),C(()=>{h(g,`Are you sure you want to delete "${e(F).name??""}"? This cannot be undone.`),f.disabled=e(ce),h(Y,e(ce)?"Deleting...":"Delete")}),p(t,l)};b(bt,t=>{e(F)&&t(gt)})}C(()=>{X.disabled=e(U),Ie=tt(Ge,0,"icon svelte-1o4svxh",null,Ie,{spinning:e(U)}),h(pt,` ${e(U)?"Refreshing...":"Refresh DB"}`)}),E(Se,()=>e(Q),t=>r(Q,t)),re(ue,()=>e(ie),t=>r(ie,t)),re(pe,()=>e(ne),t=>r(ne,t)),Wt(Ue,()=>e(we),t=>r(we,t)),p(at,Ve),Tt()}Dt(["click","keydown"]);export{wa as component};
