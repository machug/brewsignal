import{d as ds,c as Kn,a as Me,f as Oe,s as ke,e as ki}from"../chunks/BQ88CgEU.js";import{o as Or,R as Nr,b7 as Gr,b as Ir,ah as ps,ar as Fl,c as d,ai as Ke,aj as hs,al as E,an as k,ak as V,ao as Ie,as as _t,s as re,at as Pl,p as wn,ap as Ti,aL as zr,aq as Ws,e as Vr,am as Br}from"../chunks/CGXqq0_G.js";import{e as jn,i as os}from"../chunks/payu-7ZH.js";import{B as Hr,i as ft}from"../chunks/ziKwUJ4R.js";import{h as Wr}from"../chunks/BP8qDDK3.js";import{s as Ml}from"../chunks/DqcjHxzZ.js";import{t as Mi}from"../chunks/DThvY6M2.js";import{w as Gn}from"../chunks/BwsdUUZq.js";import{r as Wn,s as bn}from"../chunks/D2zVhfuI.js";import{s as Un}from"../chunks/BSw_pJTS.js";import{b as Ei,a as Os}from"../chunks/D6uZGgMj.js";import{b as ea}from"../chunks/C39ACuyu.js";import{p as Jn}from"../chunks/B3wItnqC.js";import{c as is,d as xn,b as ta,g as Ai,e as Ur}from"../chunks/Dq6yox8V.js";import{T as qr,o as Yr,q as Kr,s as jr,t as Jr,u as Zr,v as Qr,g as $r}from"../chunks/DnjU_VlB.js";import{i as Xr,s as eo}from"../chunks/C5J5lxM1.js";function to(e,l,a){Or&&Nr();var n=new Hr(e),i=!Gr();Ir(()=>{var u=l();i&&u!==null&&typeof u=="object"&&(u={}),n.ensure(u,a)})}const lo=!0,Gt="u-",no="uplot",so=Gt+"hz",ao=Gt+"vt",io=Gt+"title",ro=Gt+"wrap",oo=Gt+"under",co=Gt+"over",uo=Gt+"axis",Xl=Gt+"off",fo=Gt+"select",po=Gt+"cursor-x",ho=Gt+"cursor-y",vo=Gt+"cursor-pt",mo=Gt+"legend",go=Gt+"live",_o=Gt+"inline",wo=Gt+"series",xo=Gt+"marker",Ia=Gt+"label",bo=Gt+"value",Vn="width",Bn="height",In="top",za="bottom",gn="left",Ns="right",la="#000",Va=la+"0",Gs="mousemove",Ba="mousedown",Is="mouseup",Ha="mouseenter",Wa="mouseleave",Ua="dblclick",yo="resize",So="scroll",qa="change",cs="dppxchange",na="--",En=typeof window<"u",Us=En?document:null,yn=En?window:null,ko=En?navigator:null;let He,ns;function qs(){let e=devicePixelRatio;He!=e&&(He=e,ns&&Ks(qa,ns,qs),ns=matchMedia(`(min-resolution: ${He-.001}dppx) and (max-resolution: ${He+.001}dppx)`),en(qa,ns,qs),yn.dispatchEvent(new CustomEvent(cs)))}function ol(e,l){if(l!=null){let a=e.classList;!a.contains(l)&&a.add(l)}}function Ys(e,l){let a=e.classList;a.contains(l)&&a.remove(l)}function it(e,l,a){e.style[l]=a+"px"}function Sl(e,l,a,n){let i=Us.createElement(e);return l!=null&&ol(i,l),a?.insertBefore(i,n),i}function ml(e,l){return Sl("div",e,l)}const Ya=new WeakMap;function Ll(e,l,a,n,i){let u="translate("+l+"px,"+a+"px)",c=Ya.get(e);u!=c&&(e.style.transform=u,Ya.set(e,u),l<0||a<0||l>n||a>i?ol(e,Xl):Ys(e,Xl))}const Ka=new WeakMap;function ja(e,l,a){let n=l+a,i=Ka.get(e);n!=i&&(Ka.set(e,n),e.style.background=l,e.style.borderColor=a)}const Ja=new WeakMap;function Za(e,l,a,n){let i=l+""+a,u=Ja.get(e);i!=u&&(Ja.set(e,i),e.style.height=a+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-a/2+"px":0)}const sa={passive:!0},To={...sa,capture:!0};function en(e,l,a,n){l.addEventListener(e,a,n?To:sa)}function Ks(e,l,a,n){l.removeEventListener(e,a,sa)}En&&qs();function kl(e,l,a,n){let i;a=a||0,n=n||l.length-1;let u=n<=2147483647;for(;n-a>1;)i=u?a+n>>1:cl((a+n)/2),l[i]<e?a=i:n=i;return e-l[a]<=l[n]-e?a:n}function Ci(e){return(a,n,i)=>{let u=-1,c=-1;for(let p=n;p<=i;p++)if(e(a[p])){u=p;break}for(let p=i;p>=n;p--)if(e(a[p])){c=p;break}return[u,c]}}const Di=e=>e!=null,Li=e=>e!=null&&e>0,vs=Ci(Di),Mo=Ci(Li);function Eo(e,l,a,n=0,i=!1){let u=i?Mo:vs,c=i?Li:Di;[l,a]=u(e,l,a);let p=e[l],h=e[l];if(l>-1)if(n==1)p=e[l],h=e[a];else if(n==-1)p=e[a],h=e[l];else for(let v=l;v<=a;v++){let S=e[v];c(S)&&(S<p?p=S:S>h&&(h=S))}return[p??$e,h??-$e]}function ms(e,l,a,n){let i=Xa(e),u=Xa(l);e==l&&(i==-1?(e*=a,l/=a):(e/=a,l*=a));let c=a==10?Ol:Pi,p=i==1?cl:gl,h=u==1?gl:cl,v=p(c(Nt(e))),S=h(c(Nt(l))),g=Sn(a,v),_=Sn(a,S);return a==10&&(v<0&&(g=Xe(g,-v)),S<0&&(_=Xe(_,-S))),n||a==2?(e=g*i,l=_*u):(e=Ni(e,g),l=gs(l,_)),[e,l]}function aa(e,l,a,n){let i=ms(e,l,a,n);return e==0&&(i[0]=0),l==0&&(i[1]=0),i}const ia=.1,Qa={mode:3,pad:ia},qn={pad:0,soft:null,mode:0},Ao={min:qn,max:qn};function us(e,l,a,n){return _s(a)?$a(e,l,a):(qn.pad=a,qn.soft=n?0:null,qn.mode=n?3:0,$a(e,l,Ao))}function ze(e,l){return e??l}function Co(e,l,a){for(l=ze(l,0),a=ze(a,e.length-1);l<=a;){if(e[l]!=null)return!0;l++}return!1}function $a(e,l,a){let n=a.min,i=a.max,u=ze(n.pad,0),c=ze(i.pad,0),p=ze(n.hard,-$e),h=ze(i.hard,$e),v=ze(n.soft,$e),S=ze(i.soft,-$e),g=ze(n.mode,0),_=ze(i.mode,0),N=l-e,T=Ol(N),Y=el(Nt(e),Nt(l)),ee=Ol(Y),ne=Nt(ee-T);(N<1e-24||ne>10)&&(N=0,(e==0||l==0)&&(N=1e-24,g==2&&v!=$e&&(u=0),_==2&&S!=-$e&&(c=0)));let y=N||Y||1e3,K=Ol(y),L=Sn(10,cl(K)),F=y*(N==0?e==0?.1:1:u),C=Xe(Ni(e-F,L/10),24),se=e>=v&&(g==1||g==3&&C<=v||g==2&&C>=v)?v:$e,Q=el(p,C<se&&e>=se?se:Tl(se,C)),$=y*(N==0?l==0?.1:1:c),ae=Xe(gs(l+$,L/10),24),w=l<=S&&(_==1||_==3&&ae>=S||_==2&&ae<=S)?S:-$e,I=Tl(h,ae>w&&l<=w?w:el(w,ae));return Q==I&&Q==0&&(I=100),[Q,I]}const Do=new Intl.NumberFormat(En?ko.language:"en-US"),ra=e=>Do.format(e),ul=Math,rs=ul.PI,Nt=ul.abs,cl=ul.floor,Ot=ul.round,gl=ul.ceil,Tl=ul.min,el=ul.max,Sn=ul.pow,Xa=ul.sign,Ol=ul.log10,Pi=ul.log2,Lo=(e,l=1)=>ul.sinh(e)*l,zs=(e,l=1)=>ul.asinh(e/l),$e=1/0;function ei(e){return(Ol((e^e>>31)-(e>>31))|0)+1}function js(e,l,a){return Tl(el(e,l),a)}function Ri(e){return typeof e=="function"}function De(e){return Ri(e)?e:()=>e}const Po=()=>{},Fi=e=>e,Oi=(e,l)=>l,Ro=e=>null,ti=e=>!0,li=(e,l)=>e==l,Fo=/\.\d*?(?=9{6,}|0{6,})/gm,tn=e=>{if(Ii(e)||Ul.has(e))return e;const l=`${e}`,a=l.match(Fo);if(a==null)return e;let n=a[0].length-1;if(l.indexOf("e-")!=-1){let[i,u]=l.split("e");return+`${tn(i)}e${u}`}return Xe(e,n)};function Ql(e,l){return tn(Xe(tn(e/l))*l)}function gs(e,l){return tn(gl(tn(e/l))*l)}function Ni(e,l){return tn(cl(tn(e/l))*l)}function Xe(e,l=0){if(Ii(e))return e;let a=10**l,n=e*a*(1+Number.EPSILON);return Ot(n)/a}const Ul=new Map;function Gi(e){return((""+e).split(".")[1]||"").length}function Zn(e,l,a,n){let i=[],u=n.map(Gi);for(let c=l;c<a;c++){let p=Nt(c),h=Xe(Sn(e,c),p);for(let v=0;v<n.length;v++){let S=e==10?+`${n[v]}e${c}`:n[v]*h,g=(c>=0?0:p)+(c>=u[v]?0:u[v]),_=e==10?S:Xe(S,g);i.push(_),Ul.set(_,g)}}return i}const Yn={},oa=[],kn=[null,null],Wl=Array.isArray,Ii=Number.isInteger,Oo=e=>e===void 0;function ni(e){return typeof e=="string"}function _s(e){let l=!1;if(e!=null){let a=e.constructor;l=a==null||a==Object}return l}function No(e){return e!=null&&typeof e=="object"}const Go=Object.getPrototypeOf(Uint8Array),zi="__proto__";function Tn(e,l=_s){let a;if(Wl(e)){let n=e.find(i=>i!=null);if(Wl(n)||l(n)){a=Array(e.length);for(let i=0;i<e.length;i++)a[i]=Tn(e[i],l)}else a=e.slice()}else if(e instanceof Go)a=e.slice();else if(l(e)){a={};for(let n in e)n!=zi&&(a[n]=Tn(e[n],l))}else a=e;return a}function At(e){let l=arguments;for(let a=1;a<l.length;a++){let n=l[a];for(let i in n)i!=zi&&(_s(e[i])?At(e[i],Tn(n[i])):e[i]=Tn(n[i]))}return e}const Io=0,zo=1,Vo=2;function Bo(e,l,a){for(let n=0,i,u=-1;n<l.length;n++){let c=l[n];if(c>u){for(i=c-1;i>=0&&e[i]==null;)e[i--]=null;for(i=c+1;i<a&&e[i]==null;)e[u=i++]=null}}}function Ho(e,l){if(qo(e)){let c=e[0].slice();for(let p=1;p<e.length;p++)c.push(...e[p].slice(1));return Yo(c[0])||(c=Uo(c)),c}let a=new Set;for(let c=0;c<e.length;c++){let h=e[c][0],v=h.length;for(let S=0;S<v;S++)a.add(h[S])}let n=[Array.from(a).sort((c,p)=>c-p)],i=n[0].length,u=new Map;for(let c=0;c<i;c++)u.set(n[0][c],c);for(let c=0;c<e.length;c++){let p=e[c],h=p[0];for(let v=1;v<p.length;v++){let S=p[v],g=Array(i).fill(void 0),_=l?l[c][v]:zo,N=[];for(let T=0;T<S.length;T++){let Y=S[T],ee=u.get(h[T]);Y===null?_!=Io&&(g[ee]=Y,_==Vo&&N.push(ee)):g[ee]=Y}Bo(g,N,i),n.push(g)}}return n}const Wo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Uo(e){let l=e[0],a=l.length,n=Array(a);for(let u=0;u<n.length;u++)n[u]=u;n.sort((u,c)=>l[u]-l[c]);let i=[];for(let u=0;u<e.length;u++){let c=e[u],p=Array(a);for(let h=0;h<a;h++)p[h]=c[n[h]];i.push(p)}return i}function qo(e){let l=e[0][0],a=l.length;for(let n=1;n<e.length;n++){let i=e[n][0];if(i.length!=a)return!1;if(i!=l){for(let u=0;u<a;u++)if(i[u]!=l[u])return!1}}return!0}function Yo(e,l=100){const a=e.length;if(a<=1)return!0;let n=0,i=a-1;for(;n<=i&&e[n]==null;)n++;for(;i>=n&&e[i]==null;)i--;if(i<=n)return!0;const u=el(1,cl((i-n+1)/l));for(let c=e[n],p=n+u;p<=i;p+=u){const h=e[p];if(h!=null){if(h<=c)return!1;c=h}}return!0}const Vi=["January","February","March","April","May","June","July","August","September","October","November","December"],Bi=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Hi(e){return e.slice(0,3)}const Ko=Bi.map(Hi),jo=Vi.map(Hi),Jo={MMMM:Vi,MMM:jo,WWWW:Bi,WWW:Ko};function zn(e){return(e<10?"0":"")+e}function Zo(e){return(e<10?"00":e<100?"0":"")+e}const Qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>zn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>zn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>zn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>zn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>zn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Zo(e.getMilliseconds())};function ca(e,l){l=l||Jo;let a=[],n=/\{([a-z]+)\}|[^{]+/gi,i;for(;i=n.exec(e);)a.push(i[0][0]=="{"?Qo[i[1]]:i[0]);return u=>{let c="";for(let p=0;p<a.length;p++)c+=typeof a[p]=="string"?a[p]:a[p](u,l);return c}}const $o=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Xo(e,l){let a;return l=="UTC"||l=="Etc/UTC"?a=new Date(+e+e.getTimezoneOffset()*6e4):l==$o?a=e:(a=new Date(e.toLocaleString("en-US",{timeZone:l})),a.setMilliseconds(e.getMilliseconds())),a}const Wi=e=>e%1==0,fs=[1,2,2.5,5],ec=Zn(10,-32,0,fs),Ui=Zn(10,0,32,fs),tc=Ui.filter(Wi),$l=ec.concat(Ui),ua=`
`,qi="{YYYY}",si=ua+qi,Yi="{M}/{D}",Hn=ua+Yi,ss=Hn+"/{YY}",Ki="{aa}",lc="{h}:{mm}",_n=lc+Ki,ai=ua+_n,ii=":{ss}",We=null;function ji(e){let l=e*1e3,a=l*60,n=a*60,i=n*24,u=i*30,c=i*365,h=(e==1?Zn(10,0,3,fs).filter(Wi):Zn(10,-3,0,fs)).concat([l,l*5,l*10,l*15,l*30,a,a*5,a*10,a*15,a*30,n,n*2,n*3,n*4,n*6,n*8,n*12,i,i*2,i*3,i*4,i*5,i*6,i*7,i*8,i*9,i*10,i*15,u,u*2,u*3,u*4,u*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const v=[[c,qi,We,We,We,We,We,We,1],[i*28,"{MMM}",si,We,We,We,We,We,1],[i,Yi,si,We,We,We,We,We,1],[n,"{h}"+Ki,ss,We,Hn,We,We,We,1],[a,_n,ss,We,Hn,We,We,We,1],[l,ii,ss+" "+_n,We,Hn+" "+_n,We,ai,We,1],[e,ii+".{fff}",ss+" "+_n,We,Hn+" "+_n,We,ai,We,1]];function S(g){return(_,N,T,Y,ee,ne)=>{let y=[],K=ee>=c,L=ee>=u&&ee<c,F=g(T),C=Xe(F*e,3),se=Vs(F.getFullYear(),K?0:F.getMonth(),L||K?1:F.getDate()),Q=Xe(se*e,3);if(L||K){let $=L?ee/u:0,ae=K?ee/c:0,w=C==Q?C:Xe(Vs(se.getFullYear()+ae,se.getMonth()+$,1)*e,3),I=new Date(Ot(w/e)),G=I.getFullYear(),le=I.getMonth();for(let P=0;w<=Y;P++){let J=Vs(G+ae*P,le+$*P,1),A=J-g(Xe(J*e,3));w=Xe((+J+A)*e,3),w<=Y&&y.push(w)}}else{let $=ee>=i?i:ee,ae=cl(T)-cl(C),w=Q+ae+gs(C-Q,$);y.push(w);let I=g(w),G=I.getHours()+I.getMinutes()/a+I.getSeconds()/n,le=ee/n,P=_.axes[N]._space,J=ne/P;for(;w=Xe(w+ee,e==1?0:3),!(w>Y);)if(le>1){let A=cl(Xe(G+le,6))%24,ce=g(w).getHours()-A;ce>1&&(ce=-1),w-=ce*n,G=(G+le)%24;let ve=y[y.length-1];Xe((w-ve)/ee,3)*J>=.7&&y.push(w)}else y.push(w)}return y}}return[h,v,S]}const[nc,sc,ac]=ji(1),[ic,rc,oc]=ji(.001);Zn(2,-53,53,[1]);function ri(e,l){return e.map(a=>a.map((n,i)=>i==0||i==8||n==null?n:l(i==1||a[8]==0?n:a[1]+n)))}function oi(e,l){return(a,n,i,u,c)=>{let p=l.find(T=>c>=T[0])||l[l.length-1],h,v,S,g,_,N;return n.map(T=>{let Y=e(T),ee=Y.getFullYear(),ne=Y.getMonth(),y=Y.getDate(),K=Y.getHours(),L=Y.getMinutes(),F=Y.getSeconds(),C=ee!=h&&p[2]||ne!=v&&p[3]||y!=S&&p[4]||K!=g&&p[5]||L!=_&&p[6]||F!=N&&p[7]||p[1];return h=ee,v=ne,S=y,g=K,_=L,N=F,C(Y)})}}function cc(e,l){let a=ca(l);return(n,i,u,c,p)=>i.map(h=>a(e(h)))}function Vs(e,l,a){return new Date(e,l,a)}function ci(e,l){return l(e)}const uc="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ui(e,l){return(a,n,i,u)=>u==null?na:l(e(n))}function fc(e,l){let a=e.series[l];return a.width?a.stroke(e,l):a.points.width?a.points.stroke(e,l):null}function dc(e,l){return e.series[l].fill(e,l)}const pc={show:!0,live:!0,isolate:!1,mount:Po,markers:{show:!0,width:2,stroke:fc,fill:dc,dash:"solid"},idx:null,idxs:null,values:[]};function hc(e,l){let a=e.cursor.points,n=ml(),i=a.size(e,l);it(n,Vn,i),it(n,Bn,i);let u=i/-2;it(n,"marginLeft",u),it(n,"marginTop",u);let c=a.width(e,l,i);return c&&it(n,"borderWidth",c),n}function vc(e,l){let a=e.series[l].points;return a._fill||a._stroke}function mc(e,l){let a=e.series[l].points;return a._stroke||a._fill}function gc(e,l){return e.series[l].points.size}const Bs=[0,0];function _c(e,l,a){return Bs[0]=l,Bs[1]=a,Bs}function as(e,l,a,n=!0){return i=>{i.button==0&&(!n||i.target==l)&&a(i)}}function Hs(e,l,a,n=!0){return i=>{(!n||i.target==l)&&a(i)}}const wc={show:!0,x:!0,y:!0,lock:!1,move:_c,points:{one:!1,show:hc,size:gc,width:0,stroke:mc,fill:vc},bind:{mousedown:as,mouseup:as,click:as,dblclick:as,mousemove:Hs,mouseleave:Hs,mouseenter:Hs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,a,n,i)=>n-i,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ji={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},fa=At({},Ji,{filter:Oi}),Zi=At({},fa,{size:10}),Qi=At({},Ji,{show:!1}),da='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',$i="bold "+da,Xi=1.5,fi={show:!0,scale:"x",stroke:la,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:$i,side:2,grid:fa,ticks:Zi,border:Qi,font:da,lineGap:Xi,rotate:0},xc="Value",bc="Time",di={show:!0,scale:"x",auto:!1,sorted:1,min:$e,max:-$e,idxs:[]};function yc(e,l,a,n,i){return l.map(u=>u==null?"":ra(u))}function Sc(e,l,a,n,i,u,c){let p=[],h=Ul.get(i)||0;a=c?a:Xe(gs(a,i),h);for(let v=a;v<=n;v=Xe(v+i,h))p.push(Object.is(v,-0)?0:v);return p}function Js(e,l,a,n,i,u,c){const p=[],h=e.scales[e.axes[l].scale].log,v=h==10?Ol:Pi,S=cl(v(a));i=Sn(h,S),h==10&&(i=$l[kl(i,$l)]);let g=a,_=i*h;h==10&&(_=$l[kl(_,$l)]);do p.push(g),g=g+i,h==10&&!Ul.has(g)&&(g=Xe(g,Ul.get(i))),g>=_&&(i=g,_=i*h,h==10&&(_=$l[kl(_,$l)]));while(g<=n);return p}function kc(e,l,a,n,i,u,c){let h=e.scales[e.axes[l].scale].asinh,v=n>h?Js(e,l,el(h,a),n,i):[h],S=n>=0&&a<=0?[0]:[];return(a<-h?Js(e,l,el(h,-n),-a,i):[h]).reverse().map(_=>-_).concat(S,v)}const er=/./,Tc=/[12357]/,Mc=/[125]/,pi=/1/,Zs=(e,l,a,n)=>e.map((i,u)=>l==4&&i==0||u%n==0&&a.test(i.toExponential()[i<0?1:0])?i:null);function Ec(e,l,a,n,i){let u=e.axes[a],c=u.scale,p=e.scales[c],h=e.valToPos,v=u._space,S=h(10,c),g=h(9,c)-S>=v?er:h(7,c)-S>=v?Tc:h(5,c)-S>=v?Mc:pi;if(g==pi){let _=Nt(h(1,c)-S);if(_<v)return Zs(l.slice().reverse(),p.distr,g,gl(v/_)).reverse()}return Zs(l,p.distr,g,1)}function Ac(e,l,a,n,i){let u=e.axes[a],c=u.scale,p=u._space,h=e.valToPos,v=Nt(h(1,c)-h(2,c));return v<p?Zs(l.slice().reverse(),3,er,gl(p/v)).reverse():l}function Cc(e,l,a,n){return n==null?na:l==null?"":ra(l)}const hi={show:!0,scale:"y",stroke:la,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:$i,side:3,grid:fa,ticks:Zi,border:Qi,font:da,lineGap:Xi,rotate:0};function Dc(e,l){let a=3+(e||1)*2;return Xe(a*l,3)}function Lc(e,l){let{scale:a,idxs:n}=e.series[0],i=e._data[0],u=e.valToPos(i[n[0]],a,!0),c=e.valToPos(i[n[1]],a,!0),p=Nt(c-u),h=e.series[l],v=p/(h.points.space*He);return n[1]-n[0]<=v}const vi={scale:null,auto:!0,sorted:0,min:$e,max:-$e},tr=(e,l,a,n,i)=>i,mi={show:!0,auto:!0,sorted:0,gaps:tr,alpha:1,facets:[At({},vi,{scale:"x"}),At({},vi,{scale:"y"})]},gi={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:tr,alpha:1,points:{show:Lc,filter:null},values:null,min:$e,max:-$e,idxs:[],path:null,clip:null};function Pc(e,l,a,n,i){return a/10}const lr={time:lo,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Rc=At({},lr,{time:!1,ori:1}),_i={};function nr(e,l){let a=_i[e];return a||(a={key:e,plots:[],sub(n){a.plots.push(n)},unsub(n){a.plots=a.plots.filter(i=>i!=n)},pub(n,i,u,c,p,h,v){for(let S=0;S<a.plots.length;S++)a.plots[S]!=i&&a.plots[S].pub(n,i,u,c,p,h,v)}},e!=null&&(_i[e]=a)),a}const Mn=1,Qs=2;function ln(e,l,a){const n=e.mode,i=e.series[l],u=n==2?e._data[l]:e._data,c=e.scales,p=e.bbox;let h=u[0],v=n==2?u[1]:u[l],S=n==2?c[i.facets[0].scale]:c[e.series[0].scale],g=n==2?c[i.facets[1].scale]:c[i.scale],_=p.left,N=p.top,T=p.width,Y=p.height,ee=e.valToPosH,ne=e.valToPosV;return S.ori==0?a(i,h,v,S,g,ee,ne,_,N,T,Y,xs,An,ys,ar,rr):a(i,h,v,S,g,ne,ee,N,_,Y,T,bs,Cn,va,ir,or)}function pa(e,l){let a=0,n=0,i=ze(e.bands,oa);for(let u=0;u<i.length;u++){let c=i[u];c.series[0]==l?a=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[a,n==1?-1:n==2?1:n==3?2:0]}function Fc(e,l,a,n,i){let u=e.mode,c=e.series[l],p=u==2?c.facets[1].scale:c.scale,h=e.scales[p];return i==-1?h.min:i==1?h.max:h.distr==3?h.dir==1?h.min:h.max:0}function Nl(e,l,a,n,i,u){return ln(e,l,(c,p,h,v,S,g,_,N,T,Y,ee)=>{let ne=c.pxRound;const y=v.dir*(v.ori==0?1:-1),K=v.ori==0?An:Cn;let L,F;y==1?(L=a,F=n):(L=n,F=a);let C=ne(g(p[L],v,Y,N)),se=ne(_(h[L],S,ee,T)),Q=ne(g(p[F],v,Y,N)),$=ne(_(u==1?S.max:S.min,S,ee,T)),ae=new Path2D(i);return K(ae,Q,$),K(ae,C,$),K(ae,C,se),ae})}function ws(e,l,a,n,i,u){let c=null;if(e.length>0){c=new Path2D;const p=l==0?ys:va;let h=a;for(let g=0;g<e.length;g++){let _=e[g];if(_[1]>_[0]){let N=_[0]-h;N>0&&p(c,h,n,N,n+u),h=_[1]}}let v=a+i-h,S=10;v>0&&p(c,h,n-S/2,v,n+u+S)}return c}function Oc(e,l,a){let n=e[e.length-1];n&&n[0]==l?n[1]=a:e.push([l,a])}function ha(e,l,a,n,i,u,c){let p=[],h=e.length;for(let v=i==1?a:n;v>=a&&v<=n;v+=i)if(l[v]===null){let g=v,_=v;if(i==1)for(;++v<=n&&l[v]===null;)_=v;else for(;--v>=a&&l[v]===null;)_=v;let N=u(e[g]),T=_==g?N:u(e[_]),Y=g-i;N=c<=0&&Y>=0&&Y<h?u(e[Y]):N;let ne=_+i;T=c>=0&&ne>=0&&ne<h?u(e[ne]):T,T>=N&&p.push([N,T])}return p}function wi(e){return e==0?Fi:e==1?Ot:l=>Ql(l,e)}function sr(e){let l=e==0?xs:bs,a=e==0?(i,u,c,p,h,v)=>{i.arcTo(u,c,p,h,v)}:(i,u,c,p,h,v)=>{i.arcTo(c,u,h,p,v)},n=e==0?(i,u,c,p,h)=>{i.rect(u,c,p,h)}:(i,u,c,p,h)=>{i.rect(c,u,h,p)};return(i,u,c,p,h,v=0,S=0)=>{v==0&&S==0?n(i,u,c,p,h):(v=Tl(v,p/2,h/2),S=Tl(S,p/2,h/2),l(i,u+v,c),a(i,u+p,c,u+p,c+h,v),a(i,u+p,c+h,u,c+h,S),a(i,u,c+h,u,c,S),a(i,u,c,u+p,c,v),i.closePath())}}const xs=(e,l,a)=>{e.moveTo(l,a)},bs=(e,l,a)=>{e.moveTo(a,l)},An=(e,l,a)=>{e.lineTo(l,a)},Cn=(e,l,a)=>{e.lineTo(a,l)},ys=sr(0),va=sr(1),ar=(e,l,a,n,i,u)=>{e.arc(l,a,n,i,u)},ir=(e,l,a,n,i,u)=>{e.arc(a,l,n,i,u)},rr=(e,l,a,n,i,u,c)=>{e.bezierCurveTo(l,a,n,i,u,c)},or=(e,l,a,n,i,u,c)=>{e.bezierCurveTo(a,l,i,n,c,u)};function cr(e){return(l,a,n,i,u)=>ln(l,a,(c,p,h,v,S,g,_,N,T,Y,ee)=>{let{pxRound:ne,points:y}=c,K,L;v.ori==0?(K=xs,L=ar):(K=bs,L=ir);const F=Xe(y.width*He,3);let C=(y.size-y.width)/2*He,se=Xe(C*2,3),Q=new Path2D,$=new Path2D,{left:ae,top:w,width:I,height:G}=l.bbox;ys($,ae-se,w-se,I+se*2,G+se*2);const le=P=>{if(h[P]!=null){let J=ne(g(p[P],v,Y,N)),A=ne(_(h[P],S,ee,T));K(Q,J+C,A),L(Q,J,A,C,0,rs*2)}};if(u)u.forEach(le);else for(let P=n;P<=i;P++)le(P);return{stroke:F>0?Q:null,fill:Q,clip:$,flags:Mn|Qs}})}function ur(e){return(l,a,n,i,u,c)=>{n!=i&&(u!=n&&c!=n&&e(l,a,n),u!=i&&c!=i&&e(l,a,i),e(l,a,c))}}const Nc=ur(An),Gc=ur(Cn);function fr(e){const l=ze(e?.alignGaps,0);return(a,n,i,u)=>ln(a,n,(c,p,h,v,S,g,_,N,T,Y,ee)=>{[i,u]=vs(h,i,u);let ne=c.pxRound,y=G=>ne(g(G,v,Y,N)),K=G=>ne(_(G,S,ee,T)),L,F;v.ori==0?(L=An,F=Nc):(L=Cn,F=Gc);const C=v.dir*(v.ori==0?1:-1),se={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Mn},Q=se.stroke;let $=!1;if(u-i>=Y*4){let G=B=>a.posToVal(B,v.key,!0),le=null,P=null,J,A,Ce,ge=y(p[C==1?i:u]),ce=y(p[i]),ve=y(p[u]),oe=G(C==1?ce+1:ve-1);for(let B=C==1?i:u;B>=i&&B<=u;B+=C){let Ee=p[B],Le=(C==1?Ee<oe:Ee>oe)?ge:y(Ee),we=h[B];Le==ge?we!=null?(A=we,le==null?(L(Q,Le,K(A)),J=le=P=A):A<le?le=A:A>P&&(P=A)):we===null&&($=!0):(le!=null&&F(Q,ge,K(le),K(P),K(J),K(A)),we!=null?(A=we,L(Q,Le,K(A)),le=P=J=A):(le=P=null,we===null&&($=!0)),ge=Le,oe=G(ge+C))}le!=null&&le!=P&&Ce!=ge&&F(Q,ge,K(le),K(P),K(J),K(A))}else for(let G=C==1?i:u;G>=i&&G<=u;G+=C){let le=h[G];le===null?$=!0:le!=null&&L(Q,y(p[G]),K(le))}let[w,I]=pa(a,n);if(c.fill!=null||w!=0){let G=se.fill=new Path2D(Q),le=c.fillTo(a,n,c.min,c.max,w),P=K(le),J=y(p[i]),A=y(p[u]);C==-1&&([A,J]=[J,A]),L(G,A,P),L(G,J,P)}if(!c.spanGaps){let G=[];$&&G.push(...ha(p,h,i,u,C,y,l)),se.gaps=G=c.gaps(a,n,i,u,G),se.clip=ws(G,v.ori,N,T,Y,ee)}return I!=0&&(se.band=I==2?[Nl(a,n,i,u,Q,-1),Nl(a,n,i,u,Q,1)]:Nl(a,n,i,u,Q,I)),se})}function Ic(e){const l=ze(e.align,1),a=ze(e.ascDesc,!1),n=ze(e.alignGaps,0),i=ze(e.extend,!1);return(u,c,p,h)=>ln(u,c,(v,S,g,_,N,T,Y,ee,ne,y,K)=>{[p,h]=vs(g,p,h);let L=v.pxRound,{left:F,width:C}=u.bbox,se=ce=>L(T(ce,_,y,ee)),Q=ce=>L(Y(ce,N,K,ne)),$=_.ori==0?An:Cn;const ae={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Mn},w=ae.stroke,I=_.dir*(_.ori==0?1:-1);let G=Q(g[I==1?p:h]),le=se(S[I==1?p:h]),P=le,J=le;i&&l==-1&&(J=F,$(w,J,G)),$(w,le,G);for(let ce=I==1?p:h;ce>=p&&ce<=h;ce+=I){let ve=g[ce];if(ve==null)continue;let oe=se(S[ce]),B=Q(ve);l==1?$(w,oe,G):$(w,P,B),$(w,oe,B),G=B,P=oe}let A=P;i&&l==1&&(A=F+C,$(w,A,G));let[Ce,ge]=pa(u,c);if(v.fill!=null||Ce!=0){let ce=ae.fill=new Path2D(w),ve=v.fillTo(u,c,v.min,v.max,Ce),oe=Q(ve);$(ce,A,oe),$(ce,J,oe)}if(!v.spanGaps){let ce=[];ce.push(...ha(S,g,p,h,I,se,n));let ve=v.width*He/2,oe=a||l==1?ve:-ve,B=a||l==-1?-ve:ve;ce.forEach(Ee=>{Ee[0]+=oe,Ee[1]+=B}),ae.gaps=ce=v.gaps(u,c,p,h,ce),ae.clip=ws(ce,_.ori,ee,ne,y,K)}return ge!=0&&(ae.band=ge==2?[Nl(u,c,p,h,w,-1),Nl(u,c,p,h,w,1)]:Nl(u,c,p,h,w,ge)),ae})}function xi(e,l,a,n,i,u,c=$e){if(e.length>1){let p=null;for(let h=0,v=1/0;h<e.length;h++)if(l[h]!==void 0){if(p!=null){let S=Nt(e[h]-e[p]);S<v&&(v=S,c=Nt(a(e[h],n,i,u)-a(e[p],n,i,u)))}p=h}}return c}function zc(e){e=e||Yn;const l=ze(e.size,[.6,$e,1]),a=e.align||0,n=e.gap||0;let i=e.radius;i=i==null?[0,0]:typeof i=="number"?[i,0]:i;const u=De(i),c=1-l[0],p=ze(l[1],$e),h=ze(l[2],1),v=ze(e.disp,Yn),S=ze(e.each,N=>{}),{fill:g,stroke:_}=v;return(N,T,Y,ee)=>ln(N,T,(ne,y,K,L,F,C,se,Q,$,ae,w)=>{let I=ne.pxRound,G=a,le=n*He,P=p*He,J=h*He,A,Ce;L.ori==0?[A,Ce]=u(N,T):[Ce,A]=u(N,T);const ge=L.dir*(L.ori==0?1:-1);let ce=L.ori==0?ys:va,ve=L.ori==0?S:(z,Re,je,Dt,tl,Lt,qt)=>{S(z,Re,je,tl,Dt,qt,Lt)},oe=ze(N.bands,oa).find(z=>z.series[0]==T),B=oe!=null?oe.dir:0,Ee=ne.fillTo(N,T,ne.min,ne.max,B),lt=I(se(Ee,F,w,$)),Le,we,xt,et=ae,Pe=I(ne.width*He),Qe=!1,dt=null,ct=null,bt=null,kt=null;g!=null&&(Pe==0||_!=null)&&(Qe=!0,dt=g.values(N,T,Y,ee),ct=new Map,new Set(dt).forEach(z=>{z!=null&&ct.set(z,new Path2D)}),Pe>0&&(bt=_.values(N,T,Y,ee),kt=new Map,new Set(bt).forEach(z=>{z!=null&&kt.set(z,new Path2D)})));let{x0:xe,size:pt}=v;if(xe!=null&&pt!=null){G=1,y=xe.values(N,T,Y,ee),xe.unit==2&&(y=y.map(je=>N.posToVal(Q+je*ae,L.key,!0)));let z=pt.values(N,T,Y,ee);pt.unit==2?we=z[0]*ae:we=C(z[0],L,ae,Q)-C(0,L,ae,Q),et=xi(y,K,C,L,ae,Q,et),xt=et-we+le}else et=xi(y,K,C,L,ae,Q,et),xt=et*c+le,we=et-xt;xt<1&&(xt=0),Pe>=we/2&&(Pe=0),xt<5&&(I=Fi);let yt=xt>0,Ct=et-xt-(yt?Pe:0);we=I(js(Ct,J,P)),Le=(G==0?we/2:G==ge?0:we)-G*ge*((G==0?le/2:0)+(yt?Pe/2:0));const tt={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},jt=Qe?null:new Path2D;let It=null;if(oe!=null)It=N.data[oe.series[1]];else{let{y0:z,y1:Re}=v;z!=null&&Re!=null&&(K=Re.values(N,T,Y,ee),It=z.values(N,T,Y,ee))}let Ut=A*we,de=Ce*we;for(let z=ge==1?Y:ee;z>=Y&&z<=ee;z+=ge){let Re=K[z];if(Re==null)continue;if(It!=null){let vt=It[z]??0;if(Re-vt==0)continue;lt=se(vt,F,w,$)}let je=L.distr!=2||v!=null?y[z]:z,Dt=C(je,L,ae,Q),tl=se(ze(Re,Ee),F,w,$),Lt=I(Dt-Le),qt=I(el(tl,lt)),ht=I(Tl(tl,lt)),rt=qt-ht;if(Re!=null){let vt=Re<0?de:Ut,St=Re<0?Ut:de;Qe?(Pe>0&&bt[z]!=null&&ce(kt.get(bt[z]),Lt,ht+cl(Pe/2),we,el(0,rt-Pe),vt,St),dt[z]!=null&&ce(ct.get(dt[z]),Lt,ht+cl(Pe/2),we,el(0,rt-Pe),vt,St)):ce(jt,Lt,ht+cl(Pe/2),we,el(0,rt-Pe),vt,St),ve(N,T,z,Lt-Pe/2,ht,we+Pe,rt)}}return Pe>0?tt.stroke=Qe?kt:jt:Qe||(tt._fill=ne.width==0?ne._fill:ne._stroke??ne._fill,tt.width=0),tt.fill=Qe?ct:jt,tt})}function Vc(e,l){const a=ze(l?.alignGaps,0);return(n,i,u,c)=>ln(n,i,(p,h,v,S,g,_,N,T,Y,ee,ne)=>{[u,c]=vs(v,u,c);let y=p.pxRound,K=A=>y(_(A,S,ee,T)),L=A=>y(N(A,g,ne,Y)),F,C,se;S.ori==0?(F=xs,se=An,C=rr):(F=bs,se=Cn,C=or);const Q=S.dir*(S.ori==0?1:-1);let $=K(h[Q==1?u:c]),ae=$,w=[],I=[];for(let A=Q==1?u:c;A>=u&&A<=c;A+=Q)if(v[A]!=null){let ge=h[A],ce=K(ge);w.push(ae=ce),I.push(L(v[A]))}const G={stroke:e(w,I,F,se,C,y),fill:null,clip:null,band:null,gaps:null,flags:Mn},le=G.stroke;let[P,J]=pa(n,i);if(p.fill!=null||P!=0){let A=G.fill=new Path2D(le),Ce=p.fillTo(n,i,p.min,p.max,P),ge=L(Ce);se(A,ae,ge),se(A,$,ge)}if(!p.spanGaps){let A=[];A.push(...ha(h,v,u,c,Q,K,a)),G.gaps=A=p.gaps(n,i,u,c,A),G.clip=ws(A,S.ori,T,Y,ee,ne)}return J!=0&&(G.band=J==2?[Nl(n,i,u,c,le,-1),Nl(n,i,u,c,le,1)]:Nl(n,i,u,c,le,J)),G})}function Bc(e){return Vc(Hc,e)}function Hc(e,l,a,n,i,u){const c=e.length;if(c<2)return null;const p=new Path2D;if(a(p,e[0],l[0]),c==2)n(p,e[1],l[1]);else{let h=Array(c),v=Array(c-1),S=Array(c-1),g=Array(c-1);for(let _=0;_<c-1;_++)S[_]=l[_+1]-l[_],g[_]=e[_+1]-e[_],v[_]=S[_]/g[_];h[0]=v[0];for(let _=1;_<c-1;_++)v[_]===0||v[_-1]===0||v[_-1]>0!=v[_]>0?h[_]=0:(h[_]=3*(g[_-1]+g[_])/((2*g[_]+g[_-1])/v[_-1]+(g[_]+2*g[_-1])/v[_]),isFinite(h[_])||(h[_]=0));h[c-1]=v[c-2];for(let _=0;_<c-1;_++)i(p,e[_]+g[_]/3,l[_]+h[_]*g[_]/3,e[_+1]-g[_]/3,l[_+1]-h[_+1]*g[_]/3,e[_+1],l[_+1])}return p}const $s=new Set;function bi(){for(let e of $s)e.syncRect(!0)}En&&(en(yo,yn,bi),en(So,yn,bi,!0),en(cs,yn,()=>{wt.pxRatio=He}));const Wc=fr(),Uc=cr();function yi(e,l,a,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((u,c)=>Xs(u,c,l,a))}function qc(e,l){return e.map((a,n)=>n==0?{}:At({},l,a))}function Xs(e,l,a,n){return At({},l==0?a:n,e)}function dr(e,l,a){return l==null?kn:[l,a]}const Yc=dr;function Kc(e,l,a){return l==null?kn:us(l,a,ia,!0)}function pr(e,l,a,n){return l==null?kn:ms(l,a,e.scales[n].log,!1)}const jc=pr;function hr(e,l,a,n){return l==null?kn:aa(l,a,e.scales[n].log,!1)}const Jc=hr;function Zc(e,l,a,n,i){let u=el(ei(e),ei(l)),c=l-e,p=kl(i/n*c,a);do{let h=a[p],v=n*h/c;if(v>=i&&u+(h<5?Ul.get(h):0)<=17)return[h,v]}while(++p<a.length);return[0,0]}function Si(e){let l,a;return e=e.replace(/(\d+)px/,(n,i)=>(l=Ot((a=+i)*He))+"px"),[e,l,a]}function Qc(e){e.show&&[e.font,e.labelFont].forEach(l=>{let a=Xe(l[2]*He,1);l[0]=l[0].replace(/[0-9.]+px/,a+"px"),l[1]=a})}function wt(e,l,a){const n={mode:ze(e.mode,1)},i=n.mode;function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?u(t,s,r,o):c(t,s,r,o)}n.valToPosH=u,n.valToPosV=c;let h=!1;n.status=0;const v=n.root=ml(no);if(e.id!=null&&(v.id=e.id),ol(v,e.class),e.title){let t=ml(io,v);t.textContent=e.title}const S=Sl("canvas"),g=n.ctx=S.getContext("2d"),_=ml(ro,v);en("click",_,t=>{t.target===T&&(nt!=dn||ot!=pn)&&Kt.click(n,t)},!0);const N=n.under=ml(oo,_);_.appendChild(S);const T=n.over=ml(co,_);e=Tn(e);const Y=+ze(e.pxAlign,1),ee=wi(Y);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const ne=e.ms||.001,y=n.series=i==1?yi(e.series||[],di,gi,!1):qc(e.series||[null],mi),K=n.axes=yi(e.axes||[],fi,hi,!0),L=n.scales={},F=n.bands=e.bands||[];F.forEach(t=>{t.fill=De(t.fill||null),t.dir=ze(t.dir,-1)});const C=i==2?y[1].facets[0].scale:y[0].scale,se={axes:xr,series:vr},Q=(e.drawOrder||["axes","series"]).map(t=>se[t]);function $(t){const s=t.distr==3?r=>Ol(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>zs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:m}=t,x=m-f;return(o-f)/x}}function ae(t){let s=L[t];if(s==null){let r=(e.scales||Yn)[t]||Yn;if(r.from!=null){ae(r.from);let o=At({},L[r.from],r,{key:t});o.valToPct=$(o),L[t]=o}else{s=L[t]=At({},t==C?lr:Rc,r),s.key=t;let o=s.time,f=s.range,m=Wl(f);if((t!=C||i==2&&!o)&&(m&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Qa:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Qa:{mode:1,hard:f[1],soft:f[1]}},m=!1),!m&&_s(f))){let x=f;f=(M,R,W)=>R==null?kn:us(R,W,x)}s.range=De(f||(o?Yc:t==C?s.distr==3?jc:s.distr==4?Jc:dr:s.distr==3?pr:s.distr==4?hr:Kc)),s.auto=De(m?!1:s.auto),s.clamp=De(s.clamp||Pc),s._min=s._max=null,s.valToPct=$(s)}}}ae("x"),ae("y"),i==1&&y.forEach(t=>{ae(t.scale)}),K.forEach(t=>{ae(t.scale)});for(let t in e.scales)ae(t);const w=L[C],I=w.distr;let G,le;w.ori==0?(ol(v,so),G=u,le=c):(ol(v,ao),G=c,le=u);const P={};for(let t in L){let s=L[t];(s.min!=null||s.max!=null)&&(P[t]={min:s.min,max:s.max},s.min=s.max=null)}const J=e.tzDate||(t=>new Date(Ot(t/ne))),A=e.fmtDate||ca,Ce=ne==1?ac(J):oc(J),ge=oi(J,ri(ne==1?sc:rc,A)),ce=ui(J,ci(uc,A)),ve=[],oe=n.legend=At({},pc,e.legend),B=n.cursor=At({},wc,{drag:{y:i==2}},e.cursor),Ee=oe.show,lt=B.show,Le=oe.markers;oe.idxs=ve,Le.width=De(Le.width),Le.dash=De(Le.dash),Le.stroke=De(Le.stroke),Le.fill=De(Le.fill);let we,xt,et,Pe=[],Qe=[],dt,ct=!1,bt={};if(oe.live){const t=y[1]?y[1].values:null;ct=t!=null,dt=ct?t(n,1,0):{_:0};for(let s in dt)bt[s]=na}if(Ee)if(we=Sl("table",mo,v),et=Sl("tbody",null,we),oe.mount(n,we),ct){xt=Sl("thead",null,we,et);let t=Sl("tr",null,xt);Sl("th",null,t);for(var kt in dt)Sl("th",Ia,t).textContent=kt}else ol(we,_o),oe.live&&ol(we,go);const xe={show:!0},pt={show:!1};function yt(t,s){if(s==0&&(ct||!oe.live||i==2))return kn;let r=[],o=Sl("tr",wo,et,et.childNodes[s]);ol(o,t.class),t.show||ol(o,Xl);let f=Sl("th",null,o);if(Le.show){let M=ml(xo,f);if(s>0){let R=Le.width(n,s);R&&(M.style.border=R+"px "+Le.dash(n,s)+" "+Le.stroke(n,s)),M.style.background=Le.fill(n,s)}}let m=ml(Ia,f);t.label instanceof HTMLElement?m.appendChild(t.label):m.textContent=t.label,s>0&&(Le.show||(m.style.color=t.width>0?Le.stroke(n,s):Le.fill(n,s)),tt("click",f,M=>{if(B._lock)return;ll(M);let R=y.indexOf(t);if((M.ctrlKey||M.metaKey)!=oe.isolate){let W=y.some((q,X)=>X>0&&X!=R&&q.show);y.forEach((q,X)=>{X>0&&El(X,W?X==R?xe:pt:xe,!0,Et.setSeries)})}else El(R,{show:!t.show},!0,Et.setSeries)},!1),ue&&tt(Ha,f,M=>{B._lock||(ll(M),El(y.indexOf(t),vn,!0,Et.setSeries))},!1));for(var x in dt){let M=Sl("td",bo,o);M.textContent="--",r.push(M)}return[o,r]}const Ct=new Map;function tt(t,s,r,o=!0){const f=Ct.get(s)||{},m=B.bind[t](n,s,r,o);m&&(en(t,s,f[t]=m),Ct.set(s,f))}function jt(t,s,r){const o=Ct.get(s)||{};for(let f in o)(t==null||f==t)&&(Ks(f,s,o[f]),delete o[f]);t==null&&Ct.delete(s)}let It=0,Ut=0,de=0,z=0,Re=0,je=0,Dt=Re,tl=je,Lt=de,qt=z,ht=0,rt=0,vt=0,St=0;n.bbox={};let fl=!1,nl=!1,Yt=!1,Jt=!1,_l=!1,U=!1;function fe(t,s,r){(r||t!=n.width||s!=n.height)&&ye(t,s),on(!1),Yt=!0,nl=!0,cn()}function ye(t,s){n.width=It=de=t,n.height=Ut=z=s,Re=je=0,Zt(),sl();let r=n.bbox;ht=r.left=Ql(Re*He,.5),rt=r.top=Ql(je*He,.5),vt=r.width=Ql(de*He,.5),St=r.height=Ql(z*He,.5)}const Ue=3;function Pt(){let t=!1,s=0;for(;!t;){s++;let r=_r(s),o=wr(s);t=s==Ue||r&&o,t||(ye(n.width,n.height),nl=!0)}}function dl({width:t,height:s}){fe(t,s)}n.setSize=dl;function Zt(){let t=!1,s=!1,r=!1,o=!1;K.forEach((f,m)=>{if(f.show&&f._show){let{side:x,_size:M}=f,R=x%2,W=f.label!=null?f.labelSize:0,q=M+W;q>0&&(R?(de-=q,x==3?(Re+=q,o=!0):r=!0):(z-=q,x==0?(je+=q,t=!0):s=!0))}}),be[0]=t,be[1]=r,be[2]=s,be[3]=o,de-=Ne[1]+Ne[3],Re+=Ne[3],z-=Ne[2]+Ne[0],je+=Ne[0]}function sl(){let t=Re+de,s=je+z,r=Re,o=je;function f(m,x){switch(m){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}K.forEach((m,x)=>{if(m.show&&m._show){let M=m.side;m._pos=f(M,m._size),m.label!=null&&(m._lpos=f(M,m.labelSize))}})}if(B.dataIdx==null){let t=B.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=De(t.prox),o=t.bias??=0;B.dataIdx=(f,m,x,M)=>{if(m==0)return x;let R=x,W=r(f,m,x,M)??$e,q=W>=0&&W<$e,X=w.ori==0?de:z,_e=B.left,Be=l[0],Ge=l[m];if(s.has(Ge[x])){R=null;let Ae=null,he=null,ie;if(o==0||o==-1)for(ie=x;Ae==null&&ie-- >0;)s.has(Ge[ie])||(Ae=ie);if(o==0||o==1)for(ie=x;he==null&&ie++<Ge.length;)s.has(Ge[ie])||(he=ie);if(Ae!=null||he!=null)if(q){let at=Ae==null?-1/0:G(Be[Ae],w,X,0),mt=he==null?1/0:G(Be[he],w,X,0),Wt=_e-at,Ze=mt-_e;Wt<=Ze?Wt<=W&&(R=Ae):Ze<=W&&(R=he)}else R=he==null?Ae:Ae==null?he:x-Ae<=he-x?Ae:he}else q&&Nt(_e-G(Be[x],w,X,0))>W&&(R=null);return R}}const ll=t=>{B.event=t};B.idxs=ve,B._lock=!1;let D=B.points;D.show=De(D.show),D.size=De(D.size),D.stroke=De(D.stroke),D.width=De(D.width),D.fill=De(D.fill);const te=n.focus=At({},e.focus||{alpha:.3},B.focus),ue=te.prox>=0,Z=ue&&D.one;let H=[],O=[],b=[];function j(t,s){let r=D.show(n,s);if(r instanceof HTMLElement)return ol(r,vo),ol(r,t.class),Ll(r,-10,-10,de,z),T.insertBefore(r,H[s]),r}function me(t,s){if(i==1||s>0){let r=i==1&&L[t.scale].time,o=t.value;t.value=r?ni(o)?ui(J,ci(o,A)):o||ce:o||Cc,t.label=t.label||(r?bc:xc)}if(Z||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Wc||Ro,t.fillTo=De(t.fillTo||Fc),t.pxAlign=+ze(t.pxAlign,Y),t.pxRound=wi(t.pxAlign),t.stroke=De(t.stroke||null),t.fill=De(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Dc(el(1,t.width),1),o=t.points=At({},{size:r,width:el(1,r*.2),stroke:t.stroke,space:r*2,paths:Uc,_stroke:null,_fill:null},t.points);o.show=De(o.show),o.filter=De(o.filter),o.fill=De(o.fill),o.stroke=De(o.stroke),o.paths=De(o.paths),o.pxAlign=t.pxAlign}if(Ee){let r=yt(t,s);Pe.splice(s,0,r[0]),Qe.splice(s,0,r[1]),oe.values.push(null)}if(lt){ve.splice(s,0,null);let r=null;Z?s==0&&(r=j(t,s)):s>0&&(r=j(t,s)),H.splice(s,0,r),O.splice(s,0,0),b.splice(s,0,0)}Ht("addSeries",s)}function pe(t,s){s=s??y.length,t=i==1?Xs(t,s,di,gi):Xs(t,s,{},mi),y.splice(s,0,t),me(y[s],s)}n.addSeries=pe;function Fe(t){if(y.splice(t,1),Ee){oe.values.splice(t,1),Qe.splice(t,1);let s=Pe.splice(t,1)[0];jt(null,s.firstChild),s.remove()}lt&&(ve.splice(t,1),H.splice(t,1)[0].remove(),O.splice(t,1),b.splice(t,1)),Ht("delSeries",t)}n.delSeries=Fe;const be=[!1,!1,!1,!1];function qe(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=L[t.scale];o==null&&(t.scale=r?y[1].scale:C,o=L[t.scale]);let f=o.time;t.size=De(t.size),t.space=De(t.space),t.rotate=De(t.rotate),Wl(t.incrs)&&t.incrs.forEach(x=>{!Ul.has(x)&&Ul.set(x,Gi(x))}),t.incrs=De(t.incrs||(o.distr==2?tc:f?ne==1?nc:ic:$l)),t.splits=De(t.splits||(f&&o.distr==1?Ce:o.distr==3?Js:o.distr==4?kc:Sc)),t.stroke=De(t.stroke),t.grid.stroke=De(t.grid.stroke),t.ticks.stroke=De(t.ticks.stroke),t.border.stroke=De(t.border.stroke);let m=t.values;t.values=Wl(m)&&!Wl(m[0])?De(m):f?Wl(m)?oi(J,ri(m,A)):ni(m)?cc(J,m):m||ge:m||yc,t.filter=De(t.filter||(o.distr>=3&&o.log==10?Ec:o.distr==3&&o.log==2?Ac:Oi)),t.font=Si(t.font),t.labelFont=Si(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(be[s]=!0,t._el=ml(uo,_))}}function Je(t,s,r,o){let[f,m,x,M]=r,R=s%2,W=0;return R==0&&(M||m)&&(W=s==0&&!f||s==2&&!x?Ot(fi.size/3):0),R==1&&(f||x)&&(W=s==1&&!m||s==3&&!M?Ot(hi.size/2):0),W}const ut=n.padding=(e.padding||[Je,Je,Je,Je]).map(t=>De(ze(t,Je))),Ne=n._padding=ut.map((t,s)=>t(n,s,be,0));let Ve,Ye=null,Te=null;const Rt=i==1?y[0].idxs:null;let Tt=null,wl=!1;function pl(t,s){if(l=t??[],n.data=n._data=l,i==2){Ve=0;for(let r=1;r<y.length;r++)Ve+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Tt=l[0],Ve=Tt.length;let r=l;if(I==2){r=l.slice();let o=r[0]=Array(Ve);for(let f=0;f<Ve;f++)o[f]=f}n._data=l=r}if(on(!0),Ht("setData"),I==2&&(Yt=!0),s!==!1){let r=w;r.auto(n,wl)?Gl():Vl(C,r.min,r.max),Jt=Jt||B.left>=0,U=!0,cn()}}n.setData=pl;function Gl(){wl=!0;let t,s;i==1&&(Ve>0?(Ye=Rt[0]=0,Te=Rt[1]=Ve-1,t=l[0][Ye],s=l[0][Te],I==2?(t=Ye,s=Te):t==s&&(I==3?[t,s]=ms(t,t,w.log,!1):I==4?[t,s]=aa(t,t,w.log,!1):w.time?s=t+Ot(86400/ne):[t,s]=us(t,s,ia,!0))):(Ye=Rt[0]=t=null,Te=Rt[1]=s=null)),Vl(C,t,s)}let Se,Mt,Il,xl,nn,ql,sn,Yl,an,zt;function Dn(t,s,r,o,f,m){t??=Va,r??=oa,o??="butt",f??=Va,m??="round",t!=Se&&(g.strokeStyle=Se=t),f!=Mt&&(g.fillStyle=Mt=f),s!=Il&&(g.lineWidth=Il=s),m!=nn&&(g.lineJoin=nn=m),o!=ql&&(g.lineCap=ql=o),r!=xl&&g.setLineDash(xl=r)}function rn(t,s,r,o){s!=Mt&&(g.fillStyle=Mt=s),t!=sn&&(g.font=sn=t),r!=Yl&&(g.textAlign=Yl=r),o!=an&&(g.textBaseline=an=o)}function Kl(t,s,r,o,f=0){if(o.length>0&&t.auto(n,wl)&&(s==null||s.min==null)){let m=ze(Ye,0),x=ze(Te,o.length-1),M=r.min==null?Eo(o,m,x,f,t.distr==3):[r.min,r.max];t.min=Tl(t.min,r.min=M[0]),t.max=el(t.max,r.max=M[1])}}const Ln={min:null,max:null};function Qn(){for(let o in L){let f=L[o];P[o]==null&&(f.min==null||P[C]!=null&&f.auto(n,wl))&&(P[o]=Ln)}for(let o in L){let f=L[o];P[o]==null&&f.from!=null&&P[f.from]!=null&&(P[o]=Ln)}P[C]!=null&&on(!0);let t={};for(let o in P){let f=P[o];if(f!=null){let m=t[o]=Tn(L[o],No);if(f.min!=null)At(m,f);else if(o!=C||i==2)if(Ve==0&&m.from==null){let x=m.range(n,null,null,o);m.min=x[0],m.max=x[1]}else m.min=$e,m.max=-$e}}if(Ve>0){y.forEach((o,f)=>{if(i==1){let m=o.scale,x=P[m];if(x==null)return;let M=t[m];if(f==0){let R=M.range(n,M.min,M.max,m);M.min=R[0],M.max=R[1],Ye=kl(M.min,l[0]),Te=kl(M.max,l[0]),Te-Ye>1&&(l[0][Ye]<M.min&&Ye++,l[0][Te]>M.max&&Te--),o.min=Tt[Ye],o.max=Tt[Te]}else o.show&&o.auto&&Kl(M,x,o,l[f],o.sorted);o.idxs[0]=Ye,o.idxs[1]=Te}else if(f>0&&o.show&&o.auto){let[m,x]=o.facets,M=m.scale,R=x.scale,[W,q]=l[f],X=t[M],_e=t[R];X!=null&&Kl(X,P[M],m,W,m.sorted),_e!=null&&Kl(_e,P[R],x,q,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],m=P[o];if(f.from==null&&(m==null||m.min==null)){let x=f.range(n,f.min==$e?null:f.min,f.max==-$e?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let m=t[f.from];if(m.min==null)f.min=f.max=null;else{let x=f.range(n,m.min,m.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],m=L[o];if(m.min!=f.min||m.max!=f.max){m.min=f.min,m.max=f.max;let x=m.distr;m._min=x==3?Ol(m.min):x==4?zs(m.min,m.asinh):x==100?m.fwd(m.min):m.min,m._max=x==3?Ol(m.max):x==4?zs(m.max,m.asinh):x==100?m.fwd(m.max):m.max,s[o]=r=!0}}if(r){y.forEach((o,f)=>{i==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Yt=!0,Ht("setScale",o);lt&&B.left>=0&&(Jt=U=!0)}for(let o in P)P[o]=null}function Ft(t){let s=js(Ye-1,0,Ve-1),r=js(Te+1,0,Ve-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<Ve-1;)r++;return[s,r]}function vr(){if(Ve>0){let t=y.some(s=>s._focus)&&zt!=te.alpha;t&&(g.globalAlpha=zt=te.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(ma(r,!1),ma(r,!0),s._paths==null)){let o=zt;zt!=s.alpha&&(g.globalAlpha=zt=s.alpha);let f=i==2?[0,l[r][0].length-1]:Ft(l[r]);s._paths=s.paths(n,r,f[0],f[1]),zt!=o&&(g.globalAlpha=zt=o)}}),y.forEach((s,r)=>{if(r>0&&s.show){let o=zt;zt!=s.alpha&&(g.globalAlpha=zt=s.alpha),s._paths!=null&&ga(r,!1);{let f=s._paths!=null?s._paths.gaps:null,m=s.points.show(n,r,Ye,Te,f),x=s.points.filter(n,r,m,f);(m||x)&&(s.points._paths=s.points.paths(n,r,Ye,Te,x),ga(r,!0))}zt!=o&&(g.globalAlpha=zt=o),Ht("drawSeries",r)}}),t&&(g.globalAlpha=zt=1)}}function ma(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function ga(t,s){let r=s?y[t].points:y[t],{stroke:o,fill:f,clip:m,flags:x,_stroke:M=r._stroke,_fill:R=r._fill,_width:W=r.width}=r._paths;W=Xe(W*He,3);let q=null,X=W%2/2;s&&R==null&&(R=W>0?"#fff":M);let _e=r.pxAlign==1&&X>0;if(_e&&g.translate(X,X),!s){let Be=ht-W/2,Ge=rt-W/2,Ae=vt+W,he=St+W;q=new Path2D,q.rect(Be,Ge,Ae,he)}s?Ss(M,W,r.dash,r.cap,R,o,f,x,m):mr(t,M,W,r.dash,r.cap,R,o,f,x,q,m),_e&&g.translate(-X,-X)}function mr(t,s,r,o,f,m,x,M,R,W,q){let X=!1;R!=0&&F.forEach((_e,Be)=>{if(_e.series[0]==t){let Ge=y[_e.series[1]],Ae=l[_e.series[1]],he=(Ge._paths||Yn).band;Wl(he)&&(he=_e.dir==1?he[0]:he[1]);let ie,at=null;Ge.show&&he&&Co(Ae,Ye,Te)?(at=_e.fill(n,Be)||m,ie=Ge._paths.clip):he=null,Ss(s,r,o,f,at,x,M,R,W,q,ie,he),X=!0}}),X||Ss(s,r,o,f,m,x,M,R,W,q)}const _a=Mn|Qs;function Ss(t,s,r,o,f,m,x,M,R,W,q,X){Dn(t,s,r,o,f),(R||W||X)&&(g.save(),R&&g.clip(R),W&&g.clip(W)),X?(M&_a)==_a?(g.clip(X),q&&g.clip(q),Xn(f,x),$n(t,m,s)):M&Qs?(Xn(f,x),g.clip(X),$n(t,m,s)):M&Mn&&(g.save(),g.clip(X),q&&g.clip(q),Xn(f,x),g.restore(),$n(t,m,s)):(Xn(f,x),$n(t,m,s)),(R||W||X)&&g.restore()}function $n(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{g.strokeStyle=Se=f,g.stroke(o)}):s!=null&&t&&g.stroke(s))}function Xn(t,s){s instanceof Map?s.forEach((r,o)=>{g.fillStyle=Mt=o,g.fill(r)}):s!=null&&t&&g.fill(s)}function gr(t,s,r,o){let f=K[t],m;if(o<=0)m=[0,0];else{let x=f._space=f.space(n,t,s,r,o),M=f._incrs=f.incrs(n,t,s,r,o,x);m=Zc(s,r,M,o,x)}return f._found=m}function ks(t,s,r,o,f,m,x,M,R,W){let q=x%2/2;Y==1&&g.translate(q,q),Dn(M,x,R,W,M),g.beginPath();let X,_e,Be,Ge,Ae=f+(o==0||o==3?-m:m);r==0?(_e=f,Ge=Ae):(X=f,Be=Ae);for(let he=0;he<t.length;he++)s[he]!=null&&(r==0?X=Be=t[he]:_e=Ge=t[he],g.moveTo(X,_e),g.lineTo(Be,Ge));g.stroke(),Y==1&&g.translate(-q,-q)}function _r(t){let s=!0;return K.forEach((r,o)=>{if(!r.show)return;let f=L[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,on(!1));return}else r._show||(s=!1,r._show=!0,on(!1));let m=r.side,x=m%2,{min:M,max:R}=f,[W,q]=gr(o,M,R,x==0?de:z);if(q==0)return;let X=f.distr==2,_e=r._splits=r.splits(n,o,M,R,W,q,X),Be=f.distr==2?_e.map(ie=>Tt[ie]):_e,Ge=f.distr==2?Tt[_e[1]]-Tt[_e[0]]:W,Ae=r._values=r.values(n,r.filter(n,Be,o,q,Ge),o,q,Ge);r._rotate=m==2?r.rotate(n,Ae,o,q):0;let he=r._size;r._size=gl(r.size(n,Ae,o,t)),he!=null&&r._size!=he&&(s=!1)}),s}function wr(t){let s=!0;return ut.forEach((r,o)=>{let f=r(n,o,be,t);f!=Ne[o]&&(s=!1),Ne[o]=f}),s}function xr(){for(let t=0;t<K.length;t++){let s=K[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,m,x=s.stroke(n,t),M=r==0||r==3?-1:1,[R,W]=s._found;if(s.label!=null){let $t=s.labelGap*M,rl=Ot((s._lpos+$t)*He);rn(s.labelFont[0],x,"center",r==2?In:za),g.save(),o==1?(f=m=0,g.translate(rl,Ot(rt+St/2)),g.rotate((r==3?-rs:rs)/2)):(f=Ot(ht+vt/2),m=rl);let Zl=Ri(s.label)?s.label(n,t,R,W):s.label;g.fillText(Zl,f,m),g.restore()}if(W==0)continue;let q=L[s.scale],X=o==0?vt:St,_e=o==0?ht:rt,Be=s._splits,Ge=q.distr==2?Be.map($t=>Tt[$t]):Be,Ae=q.distr==2?Tt[Be[1]]-Tt[Be[0]]:R,he=s.ticks,ie=s.border,at=he.show?he.size:0,mt=Ot(at*He),Wt=Ot((s.alignTo==2?s._size-at-s.gap:s.gap)*He),Ze=s._rotate*-rs/180,gt=ee(s._pos*He),al=(mt+Wt)*M,Qt=gt+al;m=o==0?Qt:0,f=o==1?Qt:0;let hl=s.font[0],bl=s.align==1?gn:s.align==2?Ns:Ze>0?gn:Ze<0?Ns:o==0?"center":r==3?Ns:gn,Cl=Ze||o==1?"middle":r==2?In:za;rn(hl,x,bl,Cl);let il=s.font[1]*s.lineGap,vl=Be.map($t=>ee(p($t,q,X,_e))),yl=s._values;for(let $t=0;$t<yl.length;$t++){let rl=yl[$t];if(rl!=null){o==0?f=vl[$t]:m=vl[$t],rl=""+rl;let Zl=rl.indexOf(`
`)==-1?[rl]:rl.split(/\n/gm);for(let Xt=0;Xt<Zl.length;Xt++){let Ga=Zl[Xt];Ze?(g.save(),g.translate(f,m+Xt*il),g.rotate(Ze),g.fillText(Ga,0,0),g.restore()):g.fillText(Ga,f,m+Xt*il)}}}he.show&&ks(vl,he.filter(n,Ge,t,W,Ae),o,r,gt,mt,Xe(he.width*He,3),he.stroke(n,t),he.dash,he.cap);let Dl=s.grid;Dl.show&&ks(vl,Dl.filter(n,Ge,t,W,Ae),o,o==0?2:1,o==0?rt:ht,o==0?St:vt,Xe(Dl.width*He,3),Dl.stroke(n,t),Dl.dash,Dl.cap),ie.show&&ks([gt],[1],o==0?1:0,o==0?1:2,o==1?rt:ht,o==1?St:vt,Xe(ie.width*He,3),ie.stroke(n,t),ie.dash,ie.cap)}Ht("drawAxes")}function on(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(i==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let es=!1,Ts=!1,Pn=[];function br(){Ts=!1;for(let t=0;t<Pn.length;t++)Ht(...Pn[t]);Pn.length=0}function cn(){es||(Wo(wa),es=!0)}function yr(t,s=!1){es=!0,Ts=s,t(n),wa(),s&&Pn.length>0&&queueMicrotask(br)}n.batch=yr;function wa(){if(fl&&(Qn(),fl=!1),Yt&&(Pt(),Yt=!1),nl){if(it(N,gn,Re),it(N,In,je),it(N,Vn,de),it(N,Bn,z),it(T,gn,Re),it(T,In,je),it(T,Vn,de),it(T,Bn,z),it(_,Vn,It),it(_,Bn,Ut),S.width=Ot(It*He),S.height=Ot(Ut*He),K.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let m=f===3||f===0?r:0,x=f%2==1;it(t,x?"left":"top",o-m),it(t,x?"width":"height",r),it(t,x?"top":"left",x?je:Re),it(t,x?"height":"width",x?z:de),Ys(t,Xl)}else ol(t,Xl)}),Se=Mt=Il=nn=ql=sn=Yl=an=xl=null,zt=1,On(!0),Re!=Dt||je!=tl||de!=Lt||z!=qt){on(!1);let t=de/Lt,s=z/qt;if(lt&&!Jt&&B.left>=0){B.left*=t,B.top*=s,un&&Ll(un,Ot(B.left),0,de,z),fn&&Ll(fn,0,Ot(B.top),de,z);for(let r=0;r<H.length;r++){let o=H[r];o!=null&&(O[r]*=t,b[r]*=s,Ll(o,gl(O[r]),gl(b[r]),de,z))}}if(st.show&&!_l&&st.left>=0&&st.width>0){st.left*=t,st.width*=t,st.top*=s,st.height*=s;for(let r in Ls)it(hn,r,st[r])}Dt=Re,tl=je,Lt=de,qt=z}Ht("setSize"),nl=!1}It>0&&Ut>0&&(g.clearRect(0,0,S.width,S.height),Ht("drawClear"),Q.forEach(t=>t()),Ht("draw")),st.show&&_l&&(ts(st),_l=!1),lt&&Jt&&(Jl(null,!0,!1),Jt=!1),oe.show&&oe.live&&U&&(Cs(),U=!1),h||(h=!0,n.status=1,Ht("ready")),wl=!1,es=!1}n.redraw=(t,s)=>{Yt=s||!1,t!==!1?Vl(C,w.min,w.max):cn()};function Ms(t,s){let r=L[t];if(r.from==null){if(Ve==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(Ve>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==C&&r.distr==2&&Ve>0&&(s.min=kl(s.min,l[0]),s.max=kl(s.max,l[0]),s.min==s.max&&s.max++),P[t]=s,fl=!0,cn()}}n.setScale=Ms;let Es,As,un,fn,xa,ba,dn,pn,ya,Sa,nt,ot,zl=!1;const Kt=B.drag;let Vt=Kt.x,Bt=Kt.y;lt&&(B.x&&(Es=ml(po,T)),B.y&&(As=ml(ho,T)),w.ori==0?(un=Es,fn=As):(un=As,fn=Es),nt=B.left,ot=B.top);const st=n.select=At({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),hn=st.show?ml(fo,st.over?T:N):null;function ts(t,s){if(st.show){for(let r in t)st[r]=t[r],r in Ls&&it(hn,r,t[r]);s!==!1&&Ht("setSelect")}}n.setSelect=ts;function Sr(t){if(y[t].show)Ee&&Ys(Pe[t],Xl);else if(Ee&&ol(Pe[t],Xl),lt){let r=Z?H[0]:H[t];r!=null&&Ll(r,-10,-10,de,z)}}function Vl(t,s,r){Ms(t,{min:s,max:r})}function El(t,s,r,o){s.focus!=null&&Ar(t),s.show!=null&&y.forEach((f,m)=>{m>0&&(t==m||t==null)&&(f.show=s.show,Sr(m),i==2?(Vl(f.facets[0].scale,null,null),Vl(f.facets[1].scale,null,null)):Vl(f.scale,null,null),cn())}),r!==!1&&Ht("setSeries",t,s),o&&Nn("setSeries",n,t,s)}n.setSeries=El;function kr(t,s){At(F[t],s)}function Tr(t,s){t.fill=De(t.fill||null),t.dir=ze(t.dir,-1),s=s??F.length,F.splice(s,0,t)}function Mr(t){t==null?F.length=0:F.splice(t,1)}n.addBand=Tr,n.setBand=kr,n.delBand=Mr;function Er(t,s){y[t].alpha=s,lt&&H[t]!=null&&(H[t].style.opacity=s),Ee&&Pe[t]&&(Pe[t].style.opacity=s)}let Rl,Bl,jl;const vn={focus:!0};function Ar(t){if(t!=jl){let s=t==null,r=te.alpha!=1;y.forEach((o,f)=>{if(i==1||f>0){let m=s||f==0||f==t;o._focus=s?null:m,r&&Er(f,m?1:te.alpha)}}),jl=t,r&&cn()}}Ee&&ue&&tt(Wa,we,t=>{B._lock||(ll(t),jl!=null&&El(null,vn,!0,Et.setSeries))});function Al(t,s,r){let o=L[s];r&&(t=t/He-(o.ori==1?je:Re));let f=de;o.ori==1&&(f=z,t=f-t),o.dir==-1&&(t=f-t);let m=o._min,x=o._max,M=t/f,R=m+(x-m)*M,W=o.distr;return W==3?Sn(10,R):W==4?Lo(R,o.asinh):W==100?o.bwd(R):R}function Cr(t,s){let r=Al(t,C,s);return kl(r,l[0],Ye,Te)}n.valToIdx=t=>kl(t,l[0]),n.posToIdx=Cr,n.posToVal=Al,n.valToPos=(t,s,r)=>L[s].ori==0?u(t,L[s],r?vt:de,r?ht:0):c(t,L[s],r?St:z,r?rt:0),n.setCursor=(t,s,r)=>{nt=t.left,ot=t.top,Jl(null,s,r)};function ka(t,s){it(hn,gn,st.left=t),it(hn,Vn,st.width=s)}function Ta(t,s){it(hn,In,st.top=t),it(hn,Bn,st.height=s)}let Rn=w.ori==0?ka:Ta,Fn=w.ori==1?ka:Ta;function Dr(){if(Ee&&oe.live)for(let t=i==2?1:0;t<y.length;t++){if(t==0&&ct)continue;let s=oe.values[t],r=0;for(let o in s)Qe[t][r++].firstChild.nodeValue=s[o]}}function Cs(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{ve[o]=r}):Oo(t.idx)||ve.fill(t.idx),oe.idx=ve[0]),Ee&&oe.live){for(let r=0;r<y.length;r++)(r>0||i==1&&!ct)&&Lr(r,ve[r]);Dr()}U=!1,s!==!1&&Ht("setLegend")}n.setLegend=Cs;function Lr(t,s){let r=y[t],o=t==0&&I==2?Tt:l[t],f;ct?f=r.values(n,t,s)??bt:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?bt:{_:f}),oe.values[t]=f}function Jl(t,s,r){ya=nt,Sa=ot,[nt,ot]=B.move(n,nt,ot),B.left=nt,B.top=ot,lt&&(un&&Ll(un,Ot(nt),0,de,z),fn&&Ll(fn,0,Ot(ot),de,z));let o,f=Ye>Te;Rl=$e,Bl=null;let m=w.ori==0?de:z,x=w.ori==1?de:z;if(nt<0||Ve==0||f){o=B.idx=null;for(let M=0;M<y.length;M++){let R=H[M];R!=null&&Ll(R,-10,-10,de,z)}ue&&El(null,vn,!0,t==null&&Et.setSeries),oe.live&&(ve.fill(o),U=!0)}else{let M,R,W;i==1&&(M=w.ori==0?nt:ot,R=Al(M,C),o=B.idx=kl(R,l[0],Ye,Te),W=G(l[0][o],w,m,0));let q=-10,X=-10,_e=0,Be=0,Ge=!0,Ae="",he="";for(let ie=i==2?1:0;ie<y.length;ie++){let at=y[ie],mt=ve[ie],Wt=mt==null?null:i==1?l[ie][mt]:l[ie][1][mt],Ze=B.dataIdx(n,ie,o,R),gt=Ze==null?null:i==1?l[ie][Ze]:l[ie][1][Ze];if(U=U||gt!=Wt||Ze!=mt,ve[ie]=Ze,ie>0&&at.show){let al=Ze==null?-10:Ze==o?W:G(i==1?l[0][Ze]:l[ie][0][Ze],w,m,0),Qt=gt==null?-10:le(gt,i==1?L[at.scale]:L[at.facets[1].scale],x,0);if(ue&&gt!=null){let hl=w.ori==1?nt:ot,bl=Nt(te.dist(n,ie,Ze,Qt,hl));if(bl<Rl){let Cl=te.bias;if(Cl!=0){let il=Al(hl,at.scale),vl=gt>=0?1:-1,yl=il>=0?1:-1;yl==vl&&(yl==1?Cl==1?gt>=il:gt<=il:Cl==1?gt<=il:gt>=il)&&(Rl=bl,Bl=ie)}else Rl=bl,Bl=ie}}if(U||Z){let hl,bl;w.ori==0?(hl=al,bl=Qt):(hl=Qt,bl=al);let Cl,il,vl,yl,Dl,$t,rl=!0,Zl=D.bbox;if(Zl!=null){rl=!1;let Xt=Zl(n,ie);vl=Xt.left,yl=Xt.top,Cl=Xt.width,il=Xt.height}else vl=hl,yl=bl,Cl=il=D.size(n,ie);if($t=D.fill(n,ie),Dl=D.stroke(n,ie),Z)ie==Bl&&Rl<=te.prox&&(q=vl,X=yl,_e=Cl,Be=il,Ge=rl,Ae=$t,he=Dl);else{let Xt=H[ie];Xt!=null&&(O[ie]=vl,b[ie]=yl,Za(Xt,Cl,il,rl),ja(Xt,$t,Dl),Ll(Xt,gl(vl),gl(yl),de,z))}}}}if(Z){let ie=te.prox,at=jl==null?Rl<=ie:Rl>ie||Bl!=jl;if(U||at){let mt=H[0];mt!=null&&(O[0]=q,b[0]=X,Za(mt,_e,Be,Ge),ja(mt,Ae,he),Ll(mt,gl(q),gl(X),de,z))}}}if(st.show&&zl)if(t!=null){let[M,R]=Et.scales,[W,q]=Et.match,[X,_e]=t.cursor.sync.scales,Be=t.cursor.drag;if(Vt=Be._x,Bt=Be._y,Vt||Bt){let{left:Ge,top:Ae,width:he,height:ie}=t.select,at=t.scales[X].ori,mt=t.posToVal,Wt,Ze,gt,al,Qt,hl=M!=null&&W(M,X),bl=R!=null&&q(R,_e);hl&&Vt?(at==0?(Wt=Ge,Ze=he):(Wt=Ae,Ze=ie),gt=L[M],al=G(mt(Wt,X),gt,m,0),Qt=G(mt(Wt+Ze,X),gt,m,0),Rn(Tl(al,Qt),Nt(Qt-al))):Rn(0,m),bl&&Bt?(at==1?(Wt=Ge,Ze=he):(Wt=Ae,Ze=ie),gt=L[R],al=le(mt(Wt,_e),gt,x,0),Qt=le(mt(Wt+Ze,_e),gt,x,0),Fn(Tl(al,Qt),Nt(Qt-al))):Fn(0,x)}else Ps()}else{let M=Nt(ya-xa),R=Nt(Sa-ba);if(w.ori==1){let _e=M;M=R,R=_e}Vt=Kt.x&&M>=Kt.dist,Bt=Kt.y&&R>=Kt.dist;let W=Kt.uni;W!=null?Vt&&Bt&&(Vt=M>=W,Bt=R>=W,!Vt&&!Bt&&(R>M?Bt=!0:Vt=!0)):Kt.x&&Kt.y&&(Vt||Bt)&&(Vt=Bt=!0);let q,X;Vt&&(w.ori==0?(q=dn,X=nt):(q=pn,X=ot),Rn(Tl(q,X),Nt(X-q)),Bt||Fn(0,x)),Bt&&(w.ori==1?(q=dn,X=nt):(q=pn,X=ot),Fn(Tl(q,X),Nt(X-q)),Vt||Rn(0,m)),!Vt&&!Bt&&(Rn(0,0),Fn(0,0))}if(Kt._x=Vt,Kt._y=Bt,t==null){if(r){if(Na!=null){let[M,R]=Et.scales;Et.values[0]=M!=null?Al(w.ori==0?nt:ot,M):null,Et.values[1]=R!=null?Al(w.ori==1?nt:ot,R):null}Nn(Gs,n,nt,ot,de,z,o)}if(ue){let M=r&&Et.setSeries,R=te.prox;jl==null?Rl<=R&&El(Bl,vn,!0,M):Rl>R?El(null,vn,!0,M):Bl!=jl&&El(Bl,vn,!0,M)}}U&&(oe.idx=o,Cs()),s!==!1&&Ht("setCursor")}let Hl=null;Object.defineProperty(n,"rect",{get(){return Hl==null&&On(!1),Hl}});function On(t=!1){t?Hl=null:(Hl=T.getBoundingClientRect(),Ht("syncRect",Hl))}function Ma(t,s,r,o,f,m,x){B._lock||zl&&t!=null&&t.movementX==0&&t.movementY==0||(Ds(t,s,r,o,f,m,x,!1,t!=null),t!=null?Jl(null,!0,!0):Jl(s,!0,!1))}function Ds(t,s,r,o,f,m,x,M,R){if(Hl==null&&On(!1),ll(t),t!=null)r=t.clientX-Hl.left,o=t.clientY-Hl.top;else{if(r<0||o<0){nt=-10,ot=-10;return}let[W,q]=Et.scales,X=s.cursor.sync,[_e,Be]=X.values,[Ge,Ae]=X.scales,[he,ie]=Et.match,at=s.axes[0].side%2==1,mt=w.ori==0?de:z,Wt=w.ori==1?de:z,Ze=at?m:f,gt=at?f:m,al=at?o:r,Qt=at?r:o;if(Ge!=null?r=he(W,Ge)?p(_e,L[W],mt,0):-10:r=mt*(al/Ze),Ae!=null?o=ie(q,Ae)?p(Be,L[q],Wt,0):-10:o=Wt*(Qt/gt),w.ori==1){let hl=r;r=o,o=hl}}R&&(s==null||s.cursor.event.type==Gs)&&((r<=1||r>=de-1)&&(r=Ql(r,de)),(o<=1||o>=z-1)&&(o=Ql(o,z))),M?(xa=r,ba=o,[dn,pn]=B.move(n,r,o)):(nt=r,ot=o)}const Ls={width:0,height:0,left:0,top:0};function Ps(){ts(Ls,!1)}let Ea,Aa,Ca,Da;function La(t,s,r,o,f,m,x){zl=!0,Vt=Bt=Kt._x=Kt._y=!1,Ds(t,s,r,o,f,m,x,!0,!1),t!=null&&(tt(Is,Us,Pa,!1),Nn(Ba,n,dn,pn,de,z,null));let{left:M,top:R,width:W,height:q}=st;Ea=M,Aa=R,Ca=W,Da=q}function Pa(t,s,r,o,f,m,x){zl=Kt._x=Kt._y=!1,Ds(t,s,r,o,f,m,x,!1,!0);let{left:M,top:R,width:W,height:q}=st,X=W>0||q>0,_e=Ea!=M||Aa!=R||Ca!=W||Da!=q;if(X&&_e&&ts(st),Kt.setScale&&X&&_e){let Be=M,Ge=W,Ae=R,he=q;if(w.ori==1&&(Be=R,Ge=q,Ae=M,he=W),Vt&&Vl(C,Al(Be,C),Al(Be+Ge,C)),Bt)for(let ie in L){let at=L[ie];ie!=C&&at.from==null&&at.min!=$e&&Vl(ie,Al(Ae+he,ie),Al(Ae,ie))}Ps()}else B.lock&&(B._lock=!B._lock,Jl(s,!0,t!=null));t!=null&&(jt(Is,Us),Nn(Is,n,nt,ot,de,z,null))}function Pr(t,s,r,o,f,m,x){if(B._lock)return;ll(t);let M=zl;if(zl){let R=!0,W=!0,q=10,X,_e;w.ori==0?(X=Vt,_e=Bt):(X=Bt,_e=Vt),X&&_e&&(R=nt<=q||nt>=de-q,W=ot<=q||ot>=z-q),X&&R&&(nt=nt<dn?0:de),_e&&W&&(ot=ot<pn?0:z),Jl(null,!0,!0),zl=!1}nt=-10,ot=-10,ve.fill(null),Jl(null,!0,!0),M&&(zl=M)}function Ra(t,s,r,o,f,m,x){B._lock||(ll(t),Gl(),Ps(),t!=null&&Nn(Ua,n,nt,ot,de,z,null))}function Fa(){K.forEach(Qc),fe(n.width,n.height,!0)}en(cs,yn,Fa);const mn={};mn.mousedown=La,mn.mousemove=Ma,mn.mouseup=Pa,mn.dblclick=Ra,mn.setSeries=(t,s,r,o)=>{let f=Et.match[2];r=f(n,s,r),r!=-1&&El(r,o,!0,!1)},lt&&(tt(Ba,T,La),tt(Gs,T,Ma),tt(Ha,T,t=>{ll(t),On(!1)}),tt(Wa,T,Pr),tt(Ua,T,Ra),$s.add(n),n.syncRect=On);const ls=n.hooks=e.hooks||{};function Ht(t,s,r){Ts?Pn.push([t,s,r]):t in ls&&ls[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)ls[s]=(ls[s]||[]).concat(t.hooks[s])});const Oa=(t,s,r)=>r,Et=At({key:null,setSeries:!1,filters:{pub:ti,sub:ti},scales:[C,y[1]?y[1].scale:null],match:[li,li,Oa],values:[null,null]},B.sync);Et.match.length==2&&Et.match.push(Oa),B.sync=Et;const Na=Et.key,Rs=nr(Na);function Nn(t,s,r,o,f,m,x){Et.filters.pub(t,s,r,o,f,m,x)&&Rs.pub(t,s,r,o,f,m,x)}Rs.sub(n);function Rr(t,s,r,o,f,m,x){Et.filters.sub(t,s,r,o,f,m,x)&&mn[t](null,s,r,o,f,m,x)}n.pub=Rr;function Fr(){Rs.unsub(n),$s.delete(n),Ct.clear(),Ks(cs,yn,Fa),v.remove(),we?.remove(),Ht("destroy")}n.destroy=Fr;function Fs(){Ht("init",e,l),pl(l||e.data,!1),P[C]?Ms(C,P[C]):Gl(),_l=st.show&&(st.width>0||st.height>0),Jt=U=!0,fe(e.width,e.height)}return y.forEach(me),K.forEach(qe),a?a instanceof HTMLElement?(a.appendChild(v),Fs()):a(n,Fs):Fs(),n}wt.assign=At;wt.fmtNum=ra;wt.rangeNum=us;wt.rangeLog=ms;wt.rangeAsinh=aa;wt.orient=ln;wt.pxRatio=He;wt.join=Ho;wt.fmtDate=ca,wt.tzDate=Xo;wt.sync=nr;{wt.addGap=Oc,wt.clipGaps=ws;let e=wt.paths={points:cr};e.linear=fr,e.stepped=Ic,e.bars=zc,e.spline=Bc}var $c=Oe('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xc=Oe('<span class="estimated-badge svelte-3wi8ix">est</span>'),eu=Oe('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),tu=Oe('<span class="estimated-badge svelte-3wi8ix">est</span>'),lu=Oe("<span> </span> <!>",1),nu=Oe('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),su=Oe('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),au=Oe('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function iu(e,l){ps(l,!0);const a=.5,n=1.2,i=0,u=100;function c(w,I){const G=[...w].sort((A,Ce)=>A-Ce),le=I/100*(G.length-1),P=Math.floor(le),J=Math.ceil(le);return P===J?G[P]:G[P]+(G[J]-G[P])*(le-P)}let p=Jn(l,"trend",3,null),h=Ie(!1),v=Ie(""),S=Ie(null),g=Ke(()=>is.config.temp_units==="C"),_=Ke(Ai),N=Ke(ta),T=Ke(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(xe=>xe.status!=="invalid");if(w.length===0)return null;const I=[...w].sort((xe,pt)=>new Date(xe.timestamp).getTime()-new Date(pt.timestamp).getTime()),G=I[0],le=I[I.length-1],P=I.map(xe=>xe.sg_calibrated??xe.sg_raw).filter(xe=>xe!==null&&xe>=a&&xe<=n),J=I.map(xe=>xe.temp_calibrated??xe.temp_raw).filter(xe=>xe!==null&&xe>=i&&xe<=u);if(P.length===0)return null;const A=P[P.length-1],Ce=P[0],ge=c(P,95),ce=c(P,5),ve=new Date(G.timestamp).getTime(),oe=new Date(le.timestamp).getTime(),Ee=(oe-ve)/(1e3*60*60*24),lt=Ee>0?(A-Ce)/Ee:0;let Le=null,we=null,xt=null,et=null;if(J.length>0){const xe=J[J.length-1],pt=J.reduce((tt,jt)=>tt+jt,0)/J.length,yt=c(J,95),Ct=c(J,5);Le=d(g)?xe:xe*9/5+32,we=d(g)?pt:pt*9/5+32,xt=d(g)?yt:yt*9/5+32,et=d(g)?Ct:Ct*9/5+32}let Pe=0;const Qe=.001;for(let xe=P.length-2;xe>=0;xe--)if(Math.abs(P[xe]-A)>Qe){const pt=new Date(I[xe+1].timestamp).getTime();Pe=(oe-pt)/(1e3*60*60*24);break}let dt=null,ct=null;const bt=l.originalGravity??ge,kt=l.originalGravity===null;return bt>1&&bt>A&&(dt=(bt-A)/(bt-1)*100,ct=(bt-A)*131.25),{currentSg:A,firstSg:Ce,highSg:ge,lowSg:ce,currentTemp:Le,avgTemp:we,highTemp:xt,lowTemp:et,fermRate:lt,durationDays:Ee,daysAtCurrentSg:Pe,apparentAttenuation:dt,abv:ct,ogIsEstimated:kt,effectiveOg:bt}});function Y(){re(v,l.originalGravity?.toFixed(3)??"",!0),re(h,!0),setTimeout(()=>d(S)?.focus(),0)}function ee(){const w=d(v).trim();if(!w)l.onOgChange?.(null);else{const I=parseFloat(w);!isNaN(I)&&I>=.99&&I<=1.2&&l.onOgChange?.(I)}re(h,!1)}function ne(w){w.key==="Enter"?ee():w.key==="Escape"&&re(h,!1)}function y(w){return xn(w)}function K(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function L(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function F(w){return w===null?"--":w.toFixed(1)}function C(w){return w===null?"--":`${w.toFixed(1)}%`}var se=Kn(),Q=Fl(se);{var $=w=>{var I=su(),G=E(I),le=E(G),P=E(le),J=E(P,!0);k(P);var A=V(P,2),Ce=V(E(A),2),ge=E(Ce,!0);k(Ce),k(A);var ce=V(A,2),ve=V(E(ce),2),oe=E(ve,!0);k(ve),k(ce);var B=V(ce,2),Ee=V(E(B),2),lt=E(Ee,!0);k(Ee),k(B);var Le=V(B,2),we=V(E(Le),2),xt=E(we,!0);k(we),k(Le),k(le);var et=V(le,2),Pe=V(E(et),2),Qe=V(E(Pe),2),dt=E(Qe,!0),ct=V(dt),bt=E(ct,!0);k(ct),k(Qe),k(Pe);var kt=V(Pe,2),xe=V(E(kt),2),pt=E(xe,!0),yt=V(pt),Ct=E(yt,!0);k(yt),k(xe),k(kt);var tt=V(kt,2),jt=V(E(tt),2),It=E(jt,!0),Ut=V(It),de=E(Ut,!0);k(Ut),k(jt),k(tt);var z=V(tt,2),Re=V(E(z),2),je=E(Re,!0),Dt=V(je),tl=E(Dt,!0);k(Dt),k(Re),k(z),k(et),k(G);var Lt=V(G,2),qt=E(Lt),ht=V(E(qt),2);let rt;var vt=E(ht);k(ht),k(qt);var St=V(qt,2),fl=V(E(St),2),nl=E(fl,!0);k(fl),k(St);var Yt=V(St,2),Jt=V(E(Yt),2),_l=E(Jt,!0);k(Jt),k(Yt);var U=V(Yt,2),fe=V(E(U),2);{var ye=Z=>{var H=$c();Wn(H),H.__keydown=ne,ea(H,O=>re(S,O),()=>d(S)),ki("blur",H,ee),Ei(H,()=>d(v),O=>re(v,O)),Me(Z,H)},Ue=Z=>{var H=Kn(),O=Fl(H);{var b=me=>{var pe=eu();pe.__click=Y;var Fe=E(pe);let be;var qe=E(Fe,!0);k(Fe);var Je=V(Fe,2);{var ut=Ne=>{var Ve=Xc();Me(Ne,Ve)};ft(Je,Ne=>{d(T).ogIsEstimated&&Ne(ut)})}Pl(2),k(pe),_t(Ne=>{bn(pe,"title",d(T).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),be=Ml(Fe,1,"stat-value svelte-3wi8ix",null,be,{estimated:d(T).ogIsEstimated}),ke(qe,Ne)},[()=>y(d(T).effectiveOg)]),Me(me,pe)},j=me=>{var pe=lu(),Fe=Fl(pe);let be;var qe=E(Fe,!0);k(Fe);var Je=V(Fe,2);{var ut=Ne=>{var Ve=tu();Me(Ne,Ve)};ft(Je,Ne=>{d(T).ogIsEstimated&&Ne(ut)})}_t(Ne=>{be=Ml(Fe,1,"stat-value svelte-3wi8ix",null,be,{estimated:d(T).ogIsEstimated}),ke(qe,Ne)},[()=>y(d(T).effectiveOg)]),Me(me,pe)};ft(O,me=>{l.onOgChange?me(b):me(j,!1)},!0)}Me(Z,H)};ft(fe,Z=>{l.onOgChange&&d(h)?Z(ye):Z(Ue,!1)})}k(U);var Pt=V(U,2),dl=V(E(Pt),2),Zt=E(dl,!0);k(dl),k(Pt);var sl=V(Pt,2),ll=V(E(sl),2),D=E(ll,!0);k(ll),k(sl);var te=V(sl,2);{var ue=Z=>{var H=nu(),O=V(E(H),2),b=E(O,!0);k(O),Pl(2),k(H),_t((j,me)=>{bn(H,"title",`Estimated time until target FG (R=${j??""})`),ke(b,me)},[()=>p().r2.toFixed(2),()=>L(p().daysToFg)]),Me(Z,H)};ft(te,Z=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&Z(ue)})}k(Lt),k(I),_t((Z,H,O,b,j,me,pe,Fe,be,qe,Je,ut,Ne)=>{ke(J,d(N)==="SG"?"Gravity":d(N)==="P"?"Plato":"Brix"),ke(ge,Z),ke(oe,H),ke(lt,O),ke(xt,b),ke(dt,j),ke(bt,d(_)),ke(pt,me),ke(Ct,d(_)),ke(It,pe),ke(de,d(_)),ke(je,Fe),ke(tl,d(_)),rt=Ml(ht,1,"stat-value rate svelte-3wi8ix",null,rt,{fermenting:d(T).fermRate<0}),ke(vt,`${be??""}/day`),ke(nl,qe),ke(_l,Je),ke(Zt,ut),ke(D,Ne)},[()=>y(d(T).currentSg),()=>y(d(T).firstSg),()=>y(d(T).highSg),()=>y(d(T).lowSg),()=>F(d(T).currentTemp),()=>F(d(T).avgTemp),()=>F(d(T).highTemp),()=>F(d(T).lowTemp),()=>K(d(T).fermRate),()=>L(d(T).durationDays),()=>L(d(T).daysAtCurrentSg),()=>C(d(T).apparentAttenuation),()=>C(d(T).abv)]),Me(w,I)},ae=w=>{var I=au();Me(w,I)};ft(Q,w=>{d(T)?w($):w(ae,!1)})}Me(e,se),hs()}ds(["keydown","click"]);var ru=Oe('<button type="button"> </button>'),ou=Oe("<option> </option>"),cu=Oe('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),uu=Oe('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),fu=Oe('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),du=Oe('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Filtered SG</span></label> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Filtered Temp</span></label> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Anomalies</span></label></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function pu(e,l){ps(l,!0);const a="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let i=Ke(()=>is.config.smoothing_enabled),u=Ke(()=>is.config.smoothing_samples),c=Ie("UTC"),p=Ie(0),h=Ie(3),v=Jn(l,"deviceColor",3,"BLACK"),S=Jn(l,"originalGravity",3,null),g=Ke(()=>is.config.temp_units==="C"),_=Ke(ta),N,T=null,Y=Ie(!0),ee=Ie(null),ne=Ie(24),y=Ie(wn([])),K=Ie(wn([])),L=Ie(wn([])),F=Ie(null),C=Ie(null);const se={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},Q="#facc15",$="rgba(250, 204, 21, 0.3)",ae="#71717a",w="#a1a1aa",I="rgba(255, 255, 255, 0.04)",G="#22d3ee",le="#a78bfa",P="rgba(250, 204, 21, 0.5)",J="brewsignal_chart_trend_enabled";let A=Ie(!0);const Ce="brewsignal_chart_show_filtered_sg",ge="brewsignal_chart_show_filtered_temp";let ce=Ie(!1),ve=Ie(!1);const oe="brewsignal_chart_show_anomaly_markers";let B=Ie(!1),Ee=Ie(wn([]));function lt(D,te,ue=1.01){const Z=[];for(let Te=0;Te<D.length;Te++)te[Te]!==null&&Z.push([D[Te],te[Te]]);if(Z.length<10)return null;const H=Z.length;let O=0,b=0,j=0,me=0;for(const[Te,Rt]of Z)O+=Te,b+=Rt,j+=Te*Rt,me+=Te*Te;const pe=H*me-O*O;if(Math.abs(pe)<1e-10)return null;const Fe=(H*j-O*b)/pe,be=(b-Fe*O)/H,qe=b/H;let Je=0,ut=0;for(const[Te,Rt]of Z){const Tt=Fe*Te+be;Je+=(Rt-Tt)**2,ut+=(Rt-qe)**2}const Ne=ut>0?1-Je/ut:0;let Ve=null,Ye=null;if(Fe<0&&Ne>.3){const Te=D[D.length-1],Rt=(ue-be)/Fe;Rt>Te&&(Ye=(Rt-Te)/(1440*60),Ye>0&&Ye<60?Ve=ue:Ye=null)}return{slope:Fe,intercept:be,r2:Ne,predictedFg:Ve,daysToFg:Ye}}function Le(D,te){return D.map(ue=>te.slope*ue+te.intercept)}function we(D,te,ue){const Z=new Date(D*1e3);try{return ue?Z.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:te}):Z.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:te})}catch(H){return console.warn("Invalid timezone:",te,H),ue?Z.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):Z.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function xt(D,te,ue){const Z=Q,H=se[v()]||w;return{width:D,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[O=>{const b=O.cursor.idx;if(b==null)return;const j=O.root.querySelector(".u-legend");if(!j)return;let me="";if(d(B)&&d(Ee).length>0){const pe=O.data[0][b];if(pe!=null){const be=d(Ee).find(qe=>Math.abs(qe.timestamp-pe)<300);if(be){const qe=be.anomalyScore?.toFixed(3)??"N/A",Je=be.anomalyReasons??"Unknown";me=`
										<div style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid var(--border-subtle);">
											<div style="color: #ef4444; font-weight: 600; margin-bottom: 0.25rem;"> ANOMALY</div>
											<div style="color: var(--text-muted);">Score: ${qe}</div>
											<div style="color: var(--text-muted); margin-top: 0.25rem; max-width: 200px; white-space: normal;">${Je}</div>
										</div>
									`}}}if(j.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`,me){const pe=j.querySelectorAll(".u-series");if(pe.length>0){pe[pe.length-1];const Fe=j.querySelector(".anomaly-info");Fe&&Fe.remove();const be=document.createElement("div");be.className="anomaly-info",be.innerHTML=me,j.appendChild(be)}}else{const pe=j.querySelector(".anomaly-info");pe&&pe.remove()}}],draw:[O=>{if(!d(B)||d(Ee).length===0)return;const b=O.ctx,{left:j,top:me,width:pe,height:Fe}=O.bbox;b.save();for(const be of d(Ee)){if(be.sgValue===null)continue;const qe=O.valToPos(be.timestamp,"x",!0),Je=O.valToPos(be.sgValue,"sg",!0);if(qe>=j&&qe<=j+pe&&Je>=me&&Je<=me+Fe){b.fillStyle="#ef4444",b.strokeStyle="#991b1b",b.lineWidth=1.5;const ut=8;b.beginPath(),b.moveTo(qe,Je-ut),b.lineTo(qe-ut*.866,Je+ut*.5),b.lineTo(qe+ut*.866,Je+ut*.5),b.closePath(),b.fill(),b.stroke(),b.fillStyle="#ffffff",b.font="bold 8px sans-serif",b.textAlign="center",b.textBaseline="middle",b.fillText("!",qe,Je)}}b.restore()}]},scales:{x:{time:!0},sg:{auto:!0,range:(O,b,j)=>{const me=(j-b)*.1||.005;return[b-me,j+me]}},temp:{auto:!0,range:(O,b,j)=>{const me=j-b,pe=10;if(me<pe){const be=(j+b)/2;return[be-pe/2,be+pe/2]}const Fe=me*.1;return[b-Fe,j+Fe]}}},axes:[{stroke:ae,grid:{stroke:I,width:1},ticks:{stroke:I,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(O,b)=>b.map(j=>we(j,ue,d(ne)<=24))},{scale:"sg",stroke:Z,grid:{stroke:I,width:1},ticks:{stroke:I,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(O,b)=>b.map(j=>xn(j)),side:3},{scale:"temp",stroke:H,grid:{show:!1},ticks:{stroke:I,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(O,b)=>b.map(j=>j.toFixed(0)+""),side:1}],series:[{value:(O,b)=>we(b,ue,!1)+" "+we(b,ue,!0)},{label:d(_)==="SG"?"Gravity":d(_)==="P"?"Plato":"Brix",scale:"sg",stroke:Z,width:2,value:(O,b)=>b!==null?xn(b):"--",fill:(O,b)=>{const j=O.ctx.createLinearGradient(0,O.bbox.top,0,O.bbox.top+O.bbox.height);return j.addColorStop(0,$),j.addColorStop(1,"transparent"),j},points:{show:!1},paths:wt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:H,width:1.5,dash:[4,4],value:(O,b)=>b!==null?b.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:G,width:1.5,dash:[2,4],value:(O,b)=>b!==null?b.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Chamber",scale:"temp",stroke:le,width:1.5,dash:[4,2],value:(O,b)=>b!==null?b.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Filtered SG",show:d(ce),scale:"sg",stroke:Z,width:1.5,dash:[2,2],value:(O,b)=>b!==null?xn(b):"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Filtered Temp",show:d(ve),scale:"temp",stroke:H,width:1,dash:[2,2],value:(O,b)=>b!==null?b.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:P,width:2,dash:[8,4],value:(O,b)=>b!==null?xn(b):"--",points:{show:!1},show:d(A)}]}}function et(D,te){if(te<=1)return D;const ue=[];for(let Z=0;Z<D.length;Z++){const H=[],O=Math.floor(te/2);for(let b=Math.max(0,Z-O);b<=Math.min(D.length-1,Z+O);b++){const j=D[b];j!==null&&H.push(j)}H.length>0?ue.push(H.reduce((b,j)=>b+j,0)/H.length):ue.push(null)}return ue}function Pe(D,te,ue,Z,H,O,b,j,me,pe,Fe){if(D.length<=Fe)return[D,te,ue,Z,H,O,b,j,me,pe];const be=Math.ceil(D.length/Fe),qe=[],Je=[],ut=[],Ne=[],Ve=[],Ye=[],Te=[],Rt=[],Tt=[],wl=[];for(let pl=0;pl<D.length;pl+=be){const Gl=Math.min(pl+be,D.length);let Se=0,Mt=0,Il=0,xl=0,nn=0,ql=0,sn=0,Yl=0,an=0,zt=0,Dn=0,rn=0,Kl=!1,Ln=null,Qn=null;for(let Ft=pl;Ft<Gl;Ft++)te[Ft]!==null&&(Se+=te[Ft],Mt++),ue[Ft]!==null&&(Il+=ue[Ft],xl++),Z[Ft]!==null&&(nn+=Z[Ft],ql++),H[Ft]!==null&&(sn+=H[Ft],Yl++),O[Ft]!==null&&(an+=O[Ft],zt++),b[Ft]!==null&&(Dn+=b[Ft],rn++),j[Ft]&&!Kl&&(Kl=!0,Ln=me[Ft],Qn=pe[Ft]);qe.push(D[Math.floor((pl+Gl-1)/2)]),Je.push(Mt>0?Se/Mt:null),ut.push(xl>0?Il/xl:null),Ne.push(ql>0?nn/ql:null),Ve.push(Yl>0?sn/Yl:null),Ye.push(zt>0?an/zt:null),Te.push(rn>0?Dn/rn:null),Rt.push(Kl),Tt.push(Ln),wl.push(Qn)}return[qe,Je,ut,Ne,Ve,Ye,Te,Rt,Tt,wl]}function Qe(D){return!D.endsWith("Z")&&!D.match(/[+-]\d{2}:\d{2}$/)&&(D=D+"Z"),new Date(D).getTime()/1e3}function dt(D,te,ue){if(D.length===0||te.length===0)return te.map(()=>null);const Z=[...D].sort((b,j)=>Qe(b.timestamp)-Qe(j.timestamp)),H=Z.map(b=>Qe(b.timestamp)),O=Z.map(b=>b.temperature===null?null:ue?b.temperature:b.temperature*9/5+32);return te.map(b=>{let j=null,me=null;for(let pe=0;pe<H.length;pe++)if(H[pe]<=b&&(j={time:H[pe],temp:O[pe]}),H[pe]>=b&&me===null){me={time:H[pe],temp:O[pe]};break}if(j&&me&&j.temp!==null&&me.temp!==null){if(j.time===me.time)return j.temp;const pe=(b-j.time)/(me.time-j.time);return j.temp+pe*(me.temp-j.temp)}return j!==null&&j.temp!==null?j.temp:me!==null&&me.temp!==null?me.temp:null})}function ct(D,te,ue,Z){const H=[...D].reverse();let O=[],b=[],j=[];const me=[],pe=[],Fe=[];for(const Se of H){const Mt=Qe(Se.timestamp);O.push(Mt);const Il=Se.sg_calibrated??Se.sg_raw;b.push(Il),me.push(Se.is_anomaly??!1),pe.push(Se.anomaly_score??null),Fe.push(Se.anomaly_reasons??null);const xl=Se.temp_calibrated??Se.temp_raw;xl!==null?j.push(Z?xl:xl*9/5+32):j.push(null)}let be=dt(te,O,Z),qe=dt(ue,O,Z);const Je=new Map(H.filter(Se=>Se.sg_filtered!==null&&Se.sg_filtered!==void 0).map(Se=>[Qe(Se.timestamp),Se.sg_filtered])),ut=new Map(H.filter(Se=>Se.temp_filtered!==null&&Se.temp_filtered!==void 0).map(Se=>[Qe(Se.timestamp),Se.temp_filtered]));let Ne=O.map(Se=>{const Mt=Je.get(Se);return Mt!==void 0?Mt:null}),Ve=O.map(Se=>{const Mt=ut.get(Se);return Mt!=null?Z?Mt:Mt*9/5+32:null});d(i)&&d(u)>1&&(b=et(b,d(u)),j=et(j,d(u)),be=et(be,d(u)),qe=et(qe,d(u)));const Ye=500;let Te,Rt,Tt;[O,b,j,be,qe,Ne,Ve,Te,Rt,Tt]=Pe(O,b,j,be,qe,Ne,Ve,me,pe,Fe,Ye);const wl=[];for(let Se=0;Se<O.length;Se++)Te[Se]&&b[Se]!==null&&wl.push({timestamp:O[Se],sgValue:b[Se],anomalyScore:Rt[Se],anomalyReasons:Tt[Se]});re(Ee,wl,!0);const pl=lt(O,b);re(F,pl,!0);const Gl=pl?Le(O,pl):O.map(()=>null);return[O,b,j,be,qe,Ne,Ve,Gl]}const bt=3e4;async function kt(D=!1){const ue=Date.now()-d(p);if(!(!D&&d(p)>0&&ue<bt)){re(Y,!0),re(ee,null);try{if(!d(C)){const Z=await Yr(l.batchId);re(C,Z.device_id??null,!0)}if(d(C)){const[Z,H,O]=await Promise.all([Kr(d(C),d(ne)),jr(d(ne)).catch(()=>[]),Jr(d(ne)).catch(()=>[])]);re(y,Z,!0),re(K,H,!0),re(L,O,!0),xe()}else re(y,[],!0),re(K,[],!0),re(L,[],!0),re(ee,"No device assigned to this batch")}catch(Z){re(ee,Z instanceof Error?Z.message:"Failed to load data",!0)}finally{re(p,Date.now(),!0),re(Y,!1)}}}function xe(){if(!N||d(y).length===0)return;const D=ct(d(y),d(K),d(L),d(g)),te=xt(N.clientWidth,d(g),d(c));T&&T.destroy(),T=new wt(te,D,N)}function pt(){T&&N&&T.setSize({width:N.clientWidth,height:220})}let yt=null;function Ct(){if(yt&&(clearInterval(yt),yt=null),d(h)>0){const D=d(h)*60*1e3;yt=setInterval(()=>{d(Y)||kt(!1)},D)}}Ti(async()=>{const D=localStorage.getItem(a);if(D!==null){const O=parseInt(D,10);Number.isNaN(O)||re(h,O,!0)}const te=localStorage.getItem(J);te!==null&&re(A,te==="true");const ue=localStorage.getItem(Ce);ue!==null&&re(ce,ue==="true");const Z=localStorage.getItem(ge);Z!==null&&re(ve,Z==="true");const H=localStorage.getItem(oe);H!==null&&re(B,H==="true");try{const O=await fetch("/api/system/timezone");if(O.ok){const b=await O.json();re(c,b.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await kt(!0),window.addEventListener("resize",pt),Ct()}),zr(()=>{T?.destroy(),window.removeEventListener("resize",pt),yt&&clearInterval(yt)}),Ws(()=>{d(g)!==void 0&&d(y).length>0&&N&&xe()}),Ws(()=>{d(i),d(u),d(y).length>0&&N&&xe()});function tt(D){const te=Number(D.target.value);re(h,te,!0),localStorage.setItem(a,String(te)),Ct(),kt(!0)}function jt(){re(A,!d(A)),localStorage.setItem(J,String(d(A))),xe()}function It(){d(y).length>0&&N&&xe()}var Ut=du(),de=E(Ut),z=E(de);jn(z,21,()=>qr,os,(D,te)=>{var ue=ru();let Z;ue.__click=()=>{d(ne)!==d(te).hours&&(re(ne,d(te).hours,!0),kt(!0))};var H=E(ue,!0);k(ue),_t(()=>{Z=Ml(ue,1,"range-btn svelte-12kwequ",null,Z,{active:d(ne)===d(te).hours}),ke(H,d(te).label)}),Me(D,ue)}),k(z);var Re=V(z,2),je=E(Re),Dt=V(E(je),2);Dt.__change=tt,jn(Dt,21,()=>n,os,(D,te)=>{var ue=ou(),Z=E(ue,!0);k(ue);var H={};_t(()=>{ke(Z,d(te).label),H!==(H=d(te).value)&&(ue.value=(ue.__value=d(te).value)??"")}),Me(D,ue)}),k(Dt);var tl;Xr(Dt),k(je);var Lt=V(je,2),qt=V(E(Lt),2),ht=E(qt);Pl(2),k(qt);var rt=V(qt,4);let vt;rt.__click=jt;var St=E(rt);Un(St,"background: rgba(250, 204, 21, 0.5);"),Pl(2),k(rt);var fl=V(rt,2),nl=E(fl);Wn(nl),nl.__change=()=>{localStorage.setItem(Ce,String(d(ce))),It()},Pl(2),k(fl);var Yt=V(fl,2),Jt=E(Yt);Wn(Jt),Jt.__change=()=>{localStorage.setItem(ge,String(d(ve))),It()},Pl(2),k(Yt);var _l=V(Yt,2),U=E(_l);Wn(U),U.__change=()=>{localStorage.setItem(oe,String(d(B))),It()},Pl(2),k(_l),k(Lt),k(Re),k(de);var fe=V(de,2),ye=E(fe);{var Ue=D=>{var te=cu();Me(D,te)};ft(ye,D=>{d(Y)&&D(Ue)})}var Pt=V(ye,2);{var dl=D=>{var te=uu(),ue=V(E(te),2);ue.__click=()=>kt(!0),k(te),Me(D,te)},Zt=D=>{var te=Kn(),ue=Fl(te);{var Z=H=>{var O=fu();Me(H,O)};ft(ue,H=>{d(y).length===0&&H(Z)},!0)}Me(D,te)};ft(Pt,D=>{d(ee)?D(dl):D(Zt,!1)})}k(fe),ea(fe,D=>N=D,()=>N);var sl=V(fe,2);{var ll=D=>{{let te=Ke(()=>d(F)?{predictedFg:d(F).predictedFg,daysToFg:d(F).daysToFg,r2:d(F).r2}:null);iu(D,{get readings(){return d(y)},get originalGravity(){return S()},get trend(){return d(te)}})}};ft(sl,D=>{d(y).length>0&&D(ll)})}k(Ut),_t(()=>{tl!==(tl=d(h))&&(Dt.value=(Dt.__value=d(h))??"",eo(Dt,d(h))),Un(ht,`background: ${(se[v()]||"var(--text-secondary)")??""};`),vt=Ml(rt,1,"legend-item legend-toggle svelte-12kwequ",null,vt,{"legend-disabled":!d(A)}),bn(rt,"title",d(A)?"Hide trend line":"Show trend line")}),Os(nl,()=>d(ce),D=>re(ce,D)),Os(Jt,()=>d(ve),D=>re(ve,D)),Os(U,()=>d(B),D=>re(B,D)),Me(e,Ut),hs()}ds(["click","change"]);var hu=Oe('<span class="error-message svelte-1k5rb4o"> </span>'),vu=Oe('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),mu=Oe('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),gu=Oe('<div class="w-1 rounded-sm transition-all"></div>'),_u=Oe('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),wu=Oe(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),xu=Oe('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),bu=Oe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),yu=Oe("<div><!></div>"),Su=Oe('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),ku=Oe('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function Tu(e,l){ps(l,!0);let a=Jn(l,"expanded",3,!1),n=Jn(l,"wide",3,!1),i=Ke(()=>l.batch.device_id?Mi.tilts.get(l.batch.device_id)??null:null),u=Ke(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),c=Ke(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=Ke(()=>l.progress?.temperature?.current??null),h=Ke(()=>d(i)?.color??"BLACK"),v=Ke(()=>d(i)?.rssi??null),S=Ke(()=>d(i)?.paired??!0),g=Ke(()=>d(i)?.last_seen??new Date().toISOString()),_=Ke(()=>d(i)?.sg_raw??d(c)),N=Ke(()=>d(i)?.temp_raw??d(p)),T=Ie(!1);Ws(()=>{a()&&!d(T)&&re(T,!0)});let Y=Ie(!1),ee=Ie(""),ne=Ie(null),y=Ie(!1),K=Ie(null);function L(){re(ee,d(u),!0),re(Y,!0),re(K,null),setTimeout(()=>d(ne)?.focus(),0)}async function F(){if(d(y))return;const U=d(ee).trim();if(!U||U===d(u)){re(Y,!1),re(K,null);return}re(y,!0),re(K,null);try{await Zr(l.batch.id,{name:U}),re(Y,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(fe){console.error("Failed to update batch name:",fe),re(K,fe instanceof Error?fe.message:"Failed to save batch name",!0)}finally{re(y,!1)}}function C(U){U.key==="Enter"?F():U.key==="Escape"&&re(Y,!1)}let se=Ke(Ai),Q=Ke(ta);const $={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function ae(U){return xn(U)}function w(U){return Ur(U)}function I(U){return U>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:U>=-60?{bars:3,color:"var(--positive)",label:"Good"}:U>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function G(U){const fe=Math.floor((Date.now()-new Date(U).getTime())/1e3);if(fe<10)return"just now";if(fe<60)return`${fe}s ago`;const ye=Math.floor(fe/60);if(ye<60)return`${ye}m ago`;const Ue=Math.floor(ye/60);return Ue<24?`${Ue}h ago`:`${Math.floor(Ue/24)}d ago`}let le=Ke(()=>$[d(h)]||"var(--tilt-black)"),P=Ke(()=>d(v)!==null?I(d(v)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),J=Ke(()=>G(d(g)));var A=ku();let Ce;var ge=E(A),ce=V(ge,2),ve=E(ce),oe=E(ve),B=E(oe);{var Ee=U=>{var fe=vu(),ye=E(fe);Wn(ye),ye.__keydown=C;let Ue;ea(ye,Zt=>re(ne,Zt),()=>d(ne));var Pt=V(ye,2);{var dl=Zt=>{var sl=hu(),ll=E(sl,!0);k(sl),_t(()=>ke(ll,d(K))),Me(Zt,sl)};ft(Pt,Zt=>{d(K)&&Zt(dl)})}k(fe),_t(()=>{ye.disabled=d(y),Ue=Ml(ye,1,"beer-name-input svelte-1k5rb4o",null,Ue,{error:d(K)})}),ki("blur",ye,F),Ei(ye,()=>d(ee),Zt=>re(ee,Zt)),Me(U,fe)},lt=U=>{var fe=mu();fe.__click=L;var ye=E(fe),Ue=E(ye,!0);k(ye),Pl(2),k(fe),_t(()=>ke(Ue,d(u))),Me(U,fe)};ft(B,U=>{d(Y)?U(Ee):U(lt,!1)})}var Le=V(B,2),we=E(Le),xt=V(we,2),et=E(xt,!0);k(xt),k(Le),k(oe);var Pe=V(oe,2),Qe=E(Pe),dt=E(Qe);jn(dt,20,()=>Array(4),os,(U,fe,ye)=>{var Ue=gu();_t(()=>Un(Ue,`
									height: ${8+ye*4}px;
									background: ${(ye<d(P).bars?d(P).color:"var(--bg-hover)")??""};
									opacity: ${ye<d(P).bars?1:.4};
								`)),Me(U,Ue)}),k(dt);var ct=V(dt,2),bt=E(ct);k(ct),k(Qe);var kt=V(Qe,2);{var xe=U=>{var fe=_u();Me(U,fe)};ft(kt,U=>{d(S)||U(xe)})}k(Pe),k(ve);var pt=V(ve,2),yt=E(pt),Ct=E(yt),tt=E(Ct,!0),jt=V(tt),It=E(jt,!0);k(jt),k(Ct);var Ut=V(Ct,2),de=E(Ut,!0);k(Ut),k(yt);var z=V(yt,2),Re=E(z),je=E(Re);{var Dt=U=>{var fe=wu(),ye=Fl(fe,!0),Ue=V(ye),Pt=E(Ue,!0);k(Ue),_t(dl=>{ke(ye,dl),ke(Pt,d(se))},[()=>w(d(p))]),Me(U,fe)},tl=U=>{var fe=xu(),ye=V(Fl(fe)),Ue=E(ye,!0);k(ye),_t(()=>ke(Ue,d(se))),Me(U,fe)};ft(je,U=>{d(p)!==null?U(Dt):U(tl,!1)})}k(Re),Pl(2),k(z),k(pt);var Lt=V(pt,2);{var qt=U=>{var fe=bu(),ye=V(E(fe),2),Ue=E(ye,!0);k(ye);var Pt=V(ye,4),dl=E(Pt);k(Pt),k(fe),_t((Zt,sl)=>{ke(Ue,Zt),ke(dl,`${sl??""}${d(se)??""}`)},[()=>ae(d(_)),()=>d(N)!==null?w(d(N)):"--"]),Me(U,fe)};ft(Lt,U=>{(d(c)!==d(_)||d(p)!==d(N))&&d(i)&&U(qt)})}var ht=V(Lt,2);{var rt=U=>{var fe=yu();let ye;var Ue=E(fe);to(Ue,()=>l.batch.id,Pt=>{pu(Pt,{get batchId(){return l.batch.id},get deviceColor(){return d(h)},get originalGravity(){return l.batch.measured_og}})}),k(fe),_t(()=>ye=Ml(fe,1,"chart-section svelte-1k5rb4o",null,ye,{hidden:!a()})),Me(U,fe)};ft(ht,U=>{d(T)&&U(rt)})}var vt=V(ht,2),St=E(vt),fl=E(St);k(St);var nl=V(St,2),Yt=E(nl),Jt=V(Yt,2);{var _l=U=>{var fe=Su();fe.__click=function(...Pt){l.onToggleExpand?.apply(this,Pt)};var ye=E(fe);let Ue;k(fe),_t(()=>{bn(fe,"aria-label",a()?"Collapse chart":"Expand chart"),Ue=Ml(ye,0,"w-4 h-4 transition-transform",null,Ue,{"rotate-180":a()})}),Me(U,fe)};ft(Jt,U=>{l.onToggleExpand&&U(_l)})}Pl(2),k(nl),k(vt),k(ce),k(A),_t(U=>{Ce=Ml(A,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,Ce,{expanded:a(),wide:n()}),Un(ge,`background: ${d(le)??""};`),Un(we,`background: ${d(le)??""};`),ke(et,d(h)),bn(Qe,"title",`${d(P).label??""} signal (${d(v)??"N/A"??""} dBm)`),ke(bt,`${d(v)??"N/A"??""} dBm`),ke(tt,U),ke(It,d(Q)!=="SG"?d(Q):""),ke(de,d(Q)==="SG"?"Gravity":d(Q)==="P"?"Plato":"Brix"),ke(fl,`Updated ${d(J)??""}`),bn(Yt,"href",`/batches/${l.batch.id??""}`)},[()=>ae(d(c))]),Me(e,A),hs()}ds(["keydown","click"]);var Mu=Oe('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Eu=Oe('<div class="alerts-list svelte-1uha8ag"></div>'),Au=Oe('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Cu=Oe('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Du=Oe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Lu=Oe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Pu=Oe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Ru=Oe("<div></div>"),Fu=Oe("<!> <!>",1);function Qu(e,l){ps(l,!0);let a=Ie(!1),n=Ie(!1),i=Ie(wn([])),u=Ie(wn(new Map)),c=Ie(!0),p=Ie(null);Ti(async()=>{const F=localStorage.getItem("brewsignal_alerts_dismissed"),C=localStorage.getItem("brewsignal_alerts_dismissed_time");F==="true"&&C&&Date.now()-parseInt(C,10)<360*60*1e3&&re(a,!0),await h()});async function h(){re(c,!0),re(p,null);try{const F=await Qr();re(i,F.filter($=>$.status==="fermenting"||$.status==="conditioning"),!0);const C=d(i).map(async $=>{try{const ae=await $r($.id);return[$.id,ae]}catch{return null}}),se=await Promise.all(C),Q=new Map;for(const $ of se)$&&Q.set($[0],$[1]);re(u,Q,!0)}catch(F){re(p,F instanceof Error?F.message:"Failed to load batches",!0)}finally{re(c,!1)}}let v=Ke(()=>new Map(d(i).filter(F=>F.device_id&&(F.status==="fermenting"||F.status==="conditioning")).map(F=>[F.device_id,F.id]))),S=Ke(()=>{const F=new Map(d(u));for(const[C,se]of d(v)){const Q=Mi.tilts.get(C);if(Q){const $=F.get(se)||{batch_id:se,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}};F.set(se,{...$,measured:{...$.measured,current_sg:Q.sg},temperature:{...$.temperature,current:Q.temp,status:$.temperature.yeast_min!==void 0&&$.temperature.yeast_max!==void 0?Q.temp<$.temperature.yeast_min?"too_cold":Q.temp>$.temperature.yeast_max?"too_hot":"in_range":$.temperature.status}})}}return F}),g=Ie(null);function _(F){re(g,d(g)===F?null:F,!0)}function N(){re(a,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function T(){re(n,!d(n))}var Y=Fu();Wr("1uha8ag",F=>{Vr(()=>{Br.title="Dashboard | BrewSignal"})});var ee=Fl(Y);{var ne=F=>{var C=Cu(),se=E(C),Q=E(se),$=V(E(Q),4),ae=E($,!0);k($),k(Q);var w=V(Q,2);w.__click=N,k(se);var I=V(se,2);{var G=J=>{var A=Eu();jn(A,21,()=>Gn.alerts,os,(Ce,ge)=>{var ce=Mu();let ve;var oe=E(ce),B=E(oe);k(oe);var Ee=V(oe,2),lt=E(Ee,!0);k(Ee),k(ce),_t(()=>{ve=Ml(ce,1,"alert-item svelte-1uha8ag",null,ve,{warning:d(ge).level==="warning",critical:d(ge).level==="critical"}),ke(B,`${d(ge).day??""}:`),ke(lt,d(ge).message)}),Me(Ce,ce)}),k(A),Me(J,A)};ft(I,J=>{d(n)||J(G)})}var le=V(I,2);{var P=J=>{var A=Au();A.__click=T;var Ce=E(A,!0);k(A),_t(()=>ke(Ce,d(n)?`Show ${Gn.alerts.length} alerts`:"Show less")),Me(J,A)};ft(le,J=>{Gn.alerts.length>3&&J(P)})}k(C),_t(()=>ke(ae,Gn.alerts.length)),Me(F,C)};ft(ee,F=>{Gn.alerts.length>0&&!d(a)&&F(ne)})}var y=V(ee,2);{var K=F=>{var C=Du();Me(F,C)},L=F=>{var C=Kn(),se=Fl(C);{var Q=ae=>{var w=Lu(),I=V(E(w),4),G=E(I,!0);k(I),k(w),_t(()=>ke(G,d(p))),Me(ae,w)},$=ae=>{var w=Kn(),I=Fl(w);{var G=P=>{var J=Pu();Me(P,J)},le=P=>{var J=Ru();let A;jn(J,21,()=>d(i),Ce=>Ce.id,(Ce,ge)=>{{let ce=Ke(()=>d(S).get(d(ge).id)),ve=Ke(()=>d(g)===d(ge).id),oe=Ke(()=>d(i).length===1);Tu(Ce,{get batch(){return d(ge)},get progress(){return d(ce)},get expanded(){return d(ve)},get wide(){return d(oe)},onToggleExpand:()=>_(d(ge).id),onBatchUpdated:h})}}),k(J),_t(()=>A=Ml(J,1,"tilt-grid svelte-1uha8ag",null,A,{"single-tilt":d(i).length===1})),Me(P,J)};ft(I,P=>{d(i).length===0?P(G):P(le,!1)},!0)}Me(ae,w)};ft(se,ae=>{d(p)?ae(Q):ae($,!1)},!0)}Me(F,C)};ft(y,F=>{d(c)?F(K):F(L,!1)})}Me(e,Y),hs()}ds(["click"]);export{Qu as component};
