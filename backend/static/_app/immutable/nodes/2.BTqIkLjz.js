import{d as ss,c as Vn,a as Te,f as Oe,s as Se,e as yi}from"../chunks/BQ88CgEU.js";import{o as Or,R as Nr,b7 as Gr,b as Ir,ah as as,ar as Ll,c as d,ai as Ye,aj as is,al as E,an as k,ak as V,ao as Ge,as as _t,s as oe,at as Cl,p as pn,ap as Si,aL as zr,aq as Is,e as Vr,am as Br}from"../chunks/CGXqq0_G.js";import{e as Bn,i as es}from"../chunks/payu-7ZH.js";import{B as Hr,i as ft}from"../chunks/ziKwUJ4R.js";import{h as Wr}from"../chunks/BP8qDDK3.js";import{s as yl}from"../chunks/DqcjHxzZ.js";import{t as ki}from"../chunks/DThvY6M2.js";import{w as Dn}from"../chunks/BwsdUUZq.js";import{r as Nn,s as vn}from"../chunks/D2zVhfuI.js";import{s as Gn}from"../chunks/BSw_pJTS.js";import{b as Ti,a as Ds}from"../chunks/D6uZGgMj.js";import{b as Js}from"../chunks/C39ACuyu.js";import{p as Hn}from"../chunks/B3wItnqC.js";import{c as $n,d as hn,b as Zs,g as Mi,e as Ur}from"../chunks/Dq6yox8V.js";import{T as qr,o as Yr,q as Kr,s as jr,t as Jr,u as Zr,v as Qr,g as $r}from"../chunks/DnjU_VlB.js";import{i as Xr,s as eo}from"../chunks/C5J5lxM1.js";function to(e,l,a){Or&&Nr();var n=new Hr(e),i=!Gr();Ir(()=>{var u=l();i&&u!==null&&typeof u=="object"&&(u={}),n.ensure(u,a)})}const lo=!0,Ft="u-",no="uplot",so=Ft+"hz",ao=Ft+"vt",io=Ft+"title",ro=Ft+"wrap",oo=Ft+"under",co=Ft+"over",uo=Ft+"axis",Jl=Ft+"off",fo=Ft+"select",po=Ft+"cursor-x",ho=Ft+"cursor-y",vo=Ft+"cursor-pt",mo=Ft+"legend",go=Ft+"live",_o=Ft+"inline",wo=Ft+"series",xo=Ft+"marker",Na=Ft+"label",bo=Ft+"value",Rn="width",Fn="height",Ln="top",Ga="bottom",fn="left",Ls="right",Qs="#000",Ia=Qs+"0",Ps="mousemove",za="mousedown",Rs="mouseup",Va="mouseenter",Ba="mouseleave",Ha="dblclick",yo="resize",So="scroll",Wa="change",ts="dppxchange",$s="--",bn=typeof window<"u",zs=bn?document:null,mn=bn?window:null,ko=bn?navigator:null;let Ve,Jn;function Vs(){let e=devicePixelRatio;Ve!=e&&(Ve=e,Jn&&Hs(Wa,Jn,Vs),Jn=matchMedia(`(min-resolution: ${Ve-.001}dppx) and (max-resolution: ${Ve+.001}dppx)`),Zl(Wa,Jn,Vs),mn.dispatchEvent(new CustomEvent(ts)))}function rl(e,l){if(l!=null){let a=e.classList;!a.contains(l)&&a.add(l)}}function Bs(e,l){let a=e.classList;a.contains(l)&&a.remove(l)}function rt(e,l,a){e.style[l]=a+"px"}function wl(e,l,a,n){let i=zs.createElement(e);return l!=null&&rl(i,l),a?.insertBefore(i,n),i}function hl(e,l){return wl("div",e,l)}const Ua=new WeakMap;function Al(e,l,a,n,i){let u="translate("+l+"px,"+a+"px)",c=Ua.get(e);u!=c&&(e.style.transform=u,Ua.set(e,u),l<0||a<0||l>n||a>i?rl(e,Jl):Bs(e,Jl))}const qa=new WeakMap;function Ya(e,l,a){let n=l+a,i=qa.get(e);n!=i&&(qa.set(e,n),e.style.background=l,e.style.borderColor=a)}const Ka=new WeakMap;function ja(e,l,a,n){let i=l+""+a,u=Ka.get(e);i!=u&&(Ka.set(e,i),e.style.height=a+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-a/2+"px":0)}const Xs={passive:!0},To={...Xs,capture:!0};function Zl(e,l,a,n){l.addEventListener(e,a,n?To:Xs)}function Hs(e,l,a,n){l.removeEventListener(e,a,Xs)}bn&&Vs();function xl(e,l,a,n){let i;a=a||0,n=n||l.length-1;let u=n<=2147483647;for(;n-a>1;)i=u?a+n>>1:ol((a+n)/2),l[i]<e?a=i:n=i;return e-l[a]<=l[n]-e?a:n}function Ei(e){return(a,n,i)=>{let u=-1,c=-1;for(let p=n;p<=i;p++)if(e(a[p])){u=p;break}for(let p=i;p>=n;p--)if(e(a[p])){c=p;break}return[u,c]}}const Ai=e=>e!=null,Ci=e=>e!=null&&e>0,rs=Ei(Ai),Mo=Ei(Ci);function Eo(e,l,a,n=0,i=!1){let u=i?Mo:rs,c=i?Ci:Ai;[l,a]=u(e,l,a);let p=e[l],h=e[l];if(l>-1)if(n==1)p=e[l],h=e[a];else if(n==-1)p=e[a],h=e[l];else for(let v=l;v<=a;v++){let S=e[v];c(S)&&(S<p?p=S:S>h&&(h=S))}return[p??Qe,h??-Qe]}function os(e,l,a,n){let i=Qa(e),u=Qa(l);e==l&&(i==-1?(e*=a,l/=a):(e/=a,l*=a));let c=a==10?Pl:Di,p=i==1?ol:vl,h=u==1?vl:ol,v=p(c(Rt(e))),S=h(c(Rt(l))),g=gn(a,v),_=gn(a,S);return a==10&&(v<0&&(g=$e(g,-v)),S<0&&(_=$e(_,-S))),n||a==2?(e=g*i,l=_*u):(e=Fi(e,g),l=cs(l,_)),[e,l]}function ea(e,l,a,n){let i=os(e,l,a,n);return e==0&&(i[0]=0),l==0&&(i[1]=0),i}const ta=.1,Ja={mode:3,pad:ta},In={pad:0,soft:null,mode:0},Ao={min:In,max:In};function ls(e,l,a,n){return us(a)?Za(e,l,a):(In.pad=a,In.soft=n?0:null,In.mode=n?3:0,Za(e,l,Ao))}function Ie(e,l){return e??l}function Co(e,l,a){for(l=Ie(l,0),a=Ie(a,e.length-1);l<=a;){if(e[l]!=null)return!0;l++}return!1}function Za(e,l,a){let n=a.min,i=a.max,u=Ie(n.pad,0),c=Ie(i.pad,0),p=Ie(n.hard,-Qe),h=Ie(i.hard,Qe),v=Ie(n.soft,Qe),S=Ie(i.soft,-Qe),g=Ie(n.mode,0),_=Ie(i.mode,0),N=l-e,T=Pl(N),Y=Qt(Rt(e),Rt(l)),ee=Pl(Y),ne=Rt(ee-T);(N<1e-24||ne>10)&&(N=0,(e==0||l==0)&&(N=1e-24,g==2&&v!=Qe&&(u=0),_==2&&S!=-Qe&&(c=0)));let b=N||Y||1e3,K=Pl(b),L=gn(10,ol(K)),F=b*(N==0?e==0?.1:1:u),C=$e(Fi(e-F,L/10),24),ae=e>=v&&(g==1||g==3&&C<=v||g==2&&C>=v)?v:Qe,Q=Qt(p,C<ae&&e>=ae?ae:bl(ae,C)),$=b*(N==0?l==0?.1:1:c),ie=$e(cs(l+$,L/10),24),w=l<=S&&(_==1||_==3&&ie>=S||_==2&&ie<=S)?S:-Qe,I=bl(h,ie>w&&l<=w?w:Qt(w,ie));return Q==I&&Q==0&&(I=100),[Q,I]}const Do=new Intl.NumberFormat(bn?ko.language:"en-US"),la=e=>Do.format(e),cl=Math,Xn=cl.PI,Rt=cl.abs,ol=cl.floor,Pt=cl.round,vl=cl.ceil,bl=cl.min,Qt=cl.max,gn=cl.pow,Qa=cl.sign,Pl=cl.log10,Di=cl.log2,Lo=(e,l=1)=>cl.sinh(e)*l,Fs=(e,l=1)=>cl.asinh(e/l),Qe=1/0;function $a(e){return(Pl((e^e>>31)-(e>>31))|0)+1}function Ws(e,l,a){return bl(Qt(e,l),a)}function Li(e){return typeof e=="function"}function De(e){return Li(e)?e:()=>e}const Po=()=>{},Pi=e=>e,Ri=(e,l)=>l,Ro=e=>null,Xa=e=>!0,ei=(e,l)=>e==l,Fo=/\.\d*?(?=9{6,}|0{6,})/gm,Ql=e=>{if(Ni(e)||zl.has(e))return e;const l=`${e}`,a=l.match(Fo);if(a==null)return e;let n=a[0].length-1;if(l.indexOf("e-")!=-1){let[i,u]=l.split("e");return+`${Ql(i)}e${u}`}return $e(e,n)};function Kl(e,l){return Ql($e(Ql(e/l))*l)}function cs(e,l){return Ql(vl(Ql(e/l))*l)}function Fi(e,l){return Ql(ol(Ql(e/l))*l)}function $e(e,l=0){if(Ni(e))return e;let a=10**l,n=e*a*(1+Number.EPSILON);return Pt(n)/a}const zl=new Map;function Oi(e){return((""+e).split(".")[1]||"").length}function Wn(e,l,a,n){let i=[],u=n.map(Oi);for(let c=l;c<a;c++){let p=Rt(c),h=$e(gn(e,c),p);for(let v=0;v<n.length;v++){let S=e==10?+`${n[v]}e${c}`:n[v]*h,g=(c>=0?0:p)+(c>=u[v]?0:u[v]),_=e==10?S:$e(S,g);i.push(_),zl.set(_,g)}}return i}const zn={},na=[],_n=[null,null],Il=Array.isArray,Ni=Number.isInteger,Oo=e=>e===void 0;function ti(e){return typeof e=="string"}function us(e){let l=!1;if(e!=null){let a=e.constructor;l=a==null||a==Object}return l}function No(e){return e!=null&&typeof e=="object"}const Go=Object.getPrototypeOf(Uint8Array),Gi="__proto__";function wn(e,l=us){let a;if(Il(e)){let n=e.find(i=>i!=null);if(Il(n)||l(n)){a=Array(e.length);for(let i=0;i<e.length;i++)a[i]=wn(e[i],l)}else a=e.slice()}else if(e instanceof Go)a=e.slice();else if(l(e)){a={};for(let n in e)n!=Gi&&(a[n]=wn(e[n],l))}else a=e;return a}function Et(e){let l=arguments;for(let a=1;a<l.length;a++){let n=l[a];for(let i in n)i!=Gi&&(us(e[i])?Et(e[i],wn(n[i])):e[i]=wn(n[i]))}return e}const Io=0,zo=1,Vo=2;function Bo(e,l,a){for(let n=0,i,u=-1;n<l.length;n++){let c=l[n];if(c>u){for(i=c-1;i>=0&&e[i]==null;)e[i--]=null;for(i=c+1;i<a&&e[i]==null;)e[u=i++]=null}}}function Ho(e,l){if(qo(e)){let c=e[0].slice();for(let p=1;p<e.length;p++)c.push(...e[p].slice(1));return Yo(c[0])||(c=Uo(c)),c}let a=new Set;for(let c=0;c<e.length;c++){let h=e[c][0],v=h.length;for(let S=0;S<v;S++)a.add(h[S])}let n=[Array.from(a).sort((c,p)=>c-p)],i=n[0].length,u=new Map;for(let c=0;c<i;c++)u.set(n[0][c],c);for(let c=0;c<e.length;c++){let p=e[c],h=p[0];for(let v=1;v<p.length;v++){let S=p[v],g=Array(i).fill(void 0),_=l?l[c][v]:zo,N=[];for(let T=0;T<S.length;T++){let Y=S[T],ee=u.get(h[T]);Y===null?_!=Io&&(g[ee]=Y,_==Vo&&N.push(ee)):g[ee]=Y}Bo(g,N,i),n.push(g)}}return n}const Wo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Uo(e){let l=e[0],a=l.length,n=Array(a);for(let u=0;u<n.length;u++)n[u]=u;n.sort((u,c)=>l[u]-l[c]);let i=[];for(let u=0;u<e.length;u++){let c=e[u],p=Array(a);for(let h=0;h<a;h++)p[h]=c[n[h]];i.push(p)}return i}function qo(e){let l=e[0][0],a=l.length;for(let n=1;n<e.length;n++){let i=e[n][0];if(i.length!=a)return!1;if(i!=l){for(let u=0;u<a;u++)if(i[u]!=l[u])return!1}}return!0}function Yo(e,l=100){const a=e.length;if(a<=1)return!0;let n=0,i=a-1;for(;n<=i&&e[n]==null;)n++;for(;i>=n&&e[i]==null;)i--;if(i<=n)return!0;const u=Qt(1,ol((i-n+1)/l));for(let c=e[n],p=n+u;p<=i;p+=u){const h=e[p];if(h!=null){if(h<=c)return!1;c=h}}return!0}const Ii=["January","February","March","April","May","June","July","August","September","October","November","December"],zi=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Vi(e){return e.slice(0,3)}const Ko=zi.map(Vi),jo=Ii.map(Vi),Jo={MMMM:Ii,MMM:jo,WWWW:zi,WWW:Ko};function Pn(e){return(e<10?"0":"")+e}function Zo(e){return(e<10?"00":e<100?"0":"")+e}const Qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>Pn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>Pn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>Pn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>Pn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>Pn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Zo(e.getMilliseconds())};function sa(e,l){l=l||Jo;let a=[],n=/\{([a-z]+)\}|[^{]+/gi,i;for(;i=n.exec(e);)a.push(i[0][0]=="{"?Qo[i[1]]:i[0]);return u=>{let c="";for(let p=0;p<a.length;p++)c+=typeof a[p]=="string"?a[p]:a[p](u,l);return c}}const $o=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Xo(e,l){let a;return l=="UTC"||l=="Etc/UTC"?a=new Date(+e+e.getTimezoneOffset()*6e4):l==$o?a=e:(a=new Date(e.toLocaleString("en-US",{timeZone:l})),a.setMilliseconds(e.getMilliseconds())),a}const Bi=e=>e%1==0,ns=[1,2,2.5,5],ec=Wn(10,-32,0,ns),Hi=Wn(10,0,32,ns),tc=Hi.filter(Bi),jl=ec.concat(Hi),aa=`
`,Wi="{YYYY}",li=aa+Wi,Ui="{M}/{D}",On=aa+Ui,Zn=On+"/{YY}",qi="{aa}",lc="{h}:{mm}",dn=lc+qi,ni=aa+dn,si=":{ss}",He=null;function Yi(e){let l=e*1e3,a=l*60,n=a*60,i=n*24,u=i*30,c=i*365,h=(e==1?Wn(10,0,3,ns).filter(Bi):Wn(10,-3,0,ns)).concat([l,l*5,l*10,l*15,l*30,a,a*5,a*10,a*15,a*30,n,n*2,n*3,n*4,n*6,n*8,n*12,i,i*2,i*3,i*4,i*5,i*6,i*7,i*8,i*9,i*10,i*15,u,u*2,u*3,u*4,u*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const v=[[c,Wi,He,He,He,He,He,He,1],[i*28,"{MMM}",li,He,He,He,He,He,1],[i,Ui,li,He,He,He,He,He,1],[n,"{h}"+qi,Zn,He,On,He,He,He,1],[a,dn,Zn,He,On,He,He,He,1],[l,si,Zn+" "+dn,He,On+" "+dn,He,ni,He,1],[e,si+".{fff}",Zn+" "+dn,He,On+" "+dn,He,ni,He,1]];function S(g){return(_,N,T,Y,ee,ne)=>{let b=[],K=ee>=c,L=ee>=u&&ee<c,F=g(T),C=$e(F*e,3),ae=Os(F.getFullYear(),K?0:F.getMonth(),L||K?1:F.getDate()),Q=$e(ae*e,3);if(L||K){let $=L?ee/u:0,ie=K?ee/c:0,w=C==Q?C:$e(Os(ae.getFullYear()+ie,ae.getMonth()+$,1)*e,3),I=new Date(Pt(w/e)),G=I.getFullYear(),le=I.getMonth();for(let P=0;w<=Y;P++){let J=Os(G+ie*P,le+$*P,1),A=J-g($e(J*e,3));w=$e((+J+A)*e,3),w<=Y&&b.push(w)}}else{let $=ee>=i?i:ee,ie=ol(T)-ol(C),w=Q+ie+cs(C-Q,$);b.push(w);let I=g(w),G=I.getHours()+I.getMinutes()/a+I.getSeconds()/n,le=ee/n,P=_.axes[N]._space,J=ne/P;for(;w=$e(w+ee,e==1?0:3),!(w>Y);)if(le>1){let A=ol($e(G+le,6))%24,ue=g(w).getHours()-A;ue>1&&(ue=-1),w-=ue*n,G=(G+le)%24;let me=b[b.length-1];$e((w-me)/ee,3)*J>=.7&&b.push(w)}else b.push(w)}return b}}return[h,v,S]}const[nc,sc,ac]=Yi(1),[ic,rc,oc]=Yi(.001);Wn(2,-53,53,[1]);function ai(e,l){return e.map(a=>a.map((n,i)=>i==0||i==8||n==null?n:l(i==1||a[8]==0?n:a[1]+n)))}function ii(e,l){return(a,n,i,u,c)=>{let p=l.find(T=>c>=T[0])||l[l.length-1],h,v,S,g,_,N;return n.map(T=>{let Y=e(T),ee=Y.getFullYear(),ne=Y.getMonth(),b=Y.getDate(),K=Y.getHours(),L=Y.getMinutes(),F=Y.getSeconds(),C=ee!=h&&p[2]||ne!=v&&p[3]||b!=S&&p[4]||K!=g&&p[5]||L!=_&&p[6]||F!=N&&p[7]||p[1];return h=ee,v=ne,S=b,g=K,_=L,N=F,C(Y)})}}function cc(e,l){let a=sa(l);return(n,i,u,c,p)=>i.map(h=>a(e(h)))}function Os(e,l,a){return new Date(e,l,a)}function ri(e,l){return l(e)}const uc="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function oi(e,l){return(a,n,i,u)=>u==null?$s:l(e(n))}function fc(e,l){let a=e.series[l];return a.width?a.stroke(e,l):a.points.width?a.points.stroke(e,l):null}function dc(e,l){return e.series[l].fill(e,l)}const pc={show:!0,live:!0,isolate:!1,mount:Po,markers:{show:!0,width:2,stroke:fc,fill:dc,dash:"solid"},idx:null,idxs:null,values:[]};function hc(e,l){let a=e.cursor.points,n=hl(),i=a.size(e,l);rt(n,Rn,i),rt(n,Fn,i);let u=i/-2;rt(n,"marginLeft",u),rt(n,"marginTop",u);let c=a.width(e,l,i);return c&&rt(n,"borderWidth",c),n}function vc(e,l){let a=e.series[l].points;return a._fill||a._stroke}function mc(e,l){let a=e.series[l].points;return a._stroke||a._fill}function gc(e,l){return e.series[l].points.size}const Ns=[0,0];function _c(e,l,a){return Ns[0]=l,Ns[1]=a,Ns}function Qn(e,l,a,n=!0){return i=>{i.button==0&&(!n||i.target==l)&&a(i)}}function Gs(e,l,a,n=!0){return i=>{(!n||i.target==l)&&a(i)}}const wc={show:!0,x:!0,y:!0,lock:!1,move:_c,points:{one:!1,show:hc,size:gc,width:0,stroke:mc,fill:vc},bind:{mousedown:Qn,mouseup:Qn,click:Qn,dblclick:Qn,mousemove:Gs,mouseleave:Gs,mouseenter:Gs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,a,n,i)=>n-i,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ki={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ia=Et({},Ki,{filter:Ri}),ji=Et({},ia,{size:10}),Ji=Et({},Ki,{show:!1}),ra='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Zi="bold "+ra,Qi=1.5,ci={show:!0,scale:"x",stroke:Qs,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Zi,side:2,grid:ia,ticks:ji,border:Ji,font:ra,lineGap:Qi,rotate:0},xc="Value",bc="Time",ui={show:!0,scale:"x",auto:!1,sorted:1,min:Qe,max:-Qe,idxs:[]};function yc(e,l,a,n,i){return l.map(u=>u==null?"":la(u))}function Sc(e,l,a,n,i,u,c){let p=[],h=zl.get(i)||0;a=c?a:$e(cs(a,i),h);for(let v=a;v<=n;v=$e(v+i,h))p.push(Object.is(v,-0)?0:v);return p}function Us(e,l,a,n,i,u,c){const p=[],h=e.scales[e.axes[l].scale].log,v=h==10?Pl:Di,S=ol(v(a));i=gn(h,S),h==10&&(i=jl[xl(i,jl)]);let g=a,_=i*h;h==10&&(_=jl[xl(_,jl)]);do p.push(g),g=g+i,h==10&&!zl.has(g)&&(g=$e(g,zl.get(i))),g>=_&&(i=g,_=i*h,h==10&&(_=jl[xl(_,jl)]));while(g<=n);return p}function kc(e,l,a,n,i,u,c){let h=e.scales[e.axes[l].scale].asinh,v=n>h?Us(e,l,Qt(h,a),n,i):[h],S=n>=0&&a<=0?[0]:[];return(a<-h?Us(e,l,Qt(h,-n),-a,i):[h]).reverse().map(_=>-_).concat(S,v)}const $i=/./,Tc=/[12357]/,Mc=/[125]/,fi=/1/,qs=(e,l,a,n)=>e.map((i,u)=>l==4&&i==0||u%n==0&&a.test(i.toExponential()[i<0?1:0])?i:null);function Ec(e,l,a,n,i){let u=e.axes[a],c=u.scale,p=e.scales[c],h=e.valToPos,v=u._space,S=h(10,c),g=h(9,c)-S>=v?$i:h(7,c)-S>=v?Tc:h(5,c)-S>=v?Mc:fi;if(g==fi){let _=Rt(h(1,c)-S);if(_<v)return qs(l.slice().reverse(),p.distr,g,vl(v/_)).reverse()}return qs(l,p.distr,g,1)}function Ac(e,l,a,n,i){let u=e.axes[a],c=u.scale,p=u._space,h=e.valToPos,v=Rt(h(1,c)-h(2,c));return v<p?qs(l.slice().reverse(),3,$i,vl(p/v)).reverse():l}function Cc(e,l,a,n){return n==null?$s:l==null?"":la(l)}const di={show:!0,scale:"y",stroke:Qs,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Zi,side:3,grid:ia,ticks:ji,border:Ji,font:ra,lineGap:Qi,rotate:0};function Dc(e,l){let a=3+(e||1)*2;return $e(a*l,3)}function Lc(e,l){let{scale:a,idxs:n}=e.series[0],i=e._data[0],u=e.valToPos(i[n[0]],a,!0),c=e.valToPos(i[n[1]],a,!0),p=Rt(c-u),h=e.series[l],v=p/(h.points.space*Ve);return n[1]-n[0]<=v}const pi={scale:null,auto:!0,sorted:0,min:Qe,max:-Qe},Xi=(e,l,a,n,i)=>i,hi={show:!0,auto:!0,sorted:0,gaps:Xi,alpha:1,facets:[Et({},pi,{scale:"x"}),Et({},pi,{scale:"y"})]},vi={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Xi,alpha:1,points:{show:Lc,filter:null},values:null,min:Qe,max:-Qe,idxs:[],path:null,clip:null};function Pc(e,l,a,n,i){return a/10}const er={time:lo,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Rc=Et({},er,{time:!1,ori:1}),mi={};function tr(e,l){let a=mi[e];return a||(a={key:e,plots:[],sub(n){a.plots.push(n)},unsub(n){a.plots=a.plots.filter(i=>i!=n)},pub(n,i,u,c,p,h,v){for(let S=0;S<a.plots.length;S++)a.plots[S]!=i&&a.plots[S].pub(n,i,u,c,p,h,v)}},e!=null&&(mi[e]=a)),a}const xn=1,Ys=2;function $l(e,l,a){const n=e.mode,i=e.series[l],u=n==2?e._data[l]:e._data,c=e.scales,p=e.bbox;let h=u[0],v=n==2?u[1]:u[l],S=n==2?c[i.facets[0].scale]:c[e.series[0].scale],g=n==2?c[i.facets[1].scale]:c[i.scale],_=p.left,N=p.top,T=p.width,Y=p.height,ee=e.valToPosH,ne=e.valToPosV;return S.ori==0?a(i,h,v,S,g,ee,ne,_,N,T,Y,ds,yn,hs,nr,ar):a(i,h,v,S,g,ne,ee,N,_,Y,T,ps,Sn,ua,sr,ir)}function oa(e,l){let a=0,n=0,i=Ie(e.bands,na);for(let u=0;u<i.length;u++){let c=i[u];c.series[0]==l?a=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[a,n==1?-1:n==2?1:n==3?2:0]}function Fc(e,l,a,n,i){let u=e.mode,c=e.series[l],p=u==2?c.facets[1].scale:c.scale,h=e.scales[p];return i==-1?h.min:i==1?h.max:h.distr==3?h.dir==1?h.min:h.max:0}function Rl(e,l,a,n,i,u){return $l(e,l,(c,p,h,v,S,g,_,N,T,Y,ee)=>{let ne=c.pxRound;const b=v.dir*(v.ori==0?1:-1),K=v.ori==0?yn:Sn;let L,F;b==1?(L=a,F=n):(L=n,F=a);let C=ne(g(p[L],v,Y,N)),ae=ne(_(h[L],S,ee,T)),Q=ne(g(p[F],v,Y,N)),$=ne(_(u==1?S.max:S.min,S,ee,T)),ie=new Path2D(i);return K(ie,Q,$),K(ie,C,$),K(ie,C,ae),ie})}function fs(e,l,a,n,i,u){let c=null;if(e.length>0){c=new Path2D;const p=l==0?hs:ua;let h=a;for(let g=0;g<e.length;g++){let _=e[g];if(_[1]>_[0]){let N=_[0]-h;N>0&&p(c,h,n,N,n+u),h=_[1]}}let v=a+i-h,S=10;v>0&&p(c,h,n-S/2,v,n+u+S)}return c}function Oc(e,l,a){let n=e[e.length-1];n&&n[0]==l?n[1]=a:e.push([l,a])}function ca(e,l,a,n,i,u,c){let p=[],h=e.length;for(let v=i==1?a:n;v>=a&&v<=n;v+=i)if(l[v]===null){let g=v,_=v;if(i==1)for(;++v<=n&&l[v]===null;)_=v;else for(;--v>=a&&l[v]===null;)_=v;let N=u(e[g]),T=_==g?N:u(e[_]),Y=g-i;N=c<=0&&Y>=0&&Y<h?u(e[Y]):N;let ne=_+i;T=c>=0&&ne>=0&&ne<h?u(e[ne]):T,T>=N&&p.push([N,T])}return p}function gi(e){return e==0?Pi:e==1?Pt:l=>Kl(l,e)}function lr(e){let l=e==0?ds:ps,a=e==0?(i,u,c,p,h,v)=>{i.arcTo(u,c,p,h,v)}:(i,u,c,p,h,v)=>{i.arcTo(c,u,h,p,v)},n=e==0?(i,u,c,p,h)=>{i.rect(u,c,p,h)}:(i,u,c,p,h)=>{i.rect(c,u,h,p)};return(i,u,c,p,h,v=0,S=0)=>{v==0&&S==0?n(i,u,c,p,h):(v=bl(v,p/2,h/2),S=bl(S,p/2,h/2),l(i,u+v,c),a(i,u+p,c,u+p,c+h,v),a(i,u+p,c+h,u,c+h,S),a(i,u,c+h,u,c,S),a(i,u,c,u+p,c,v),i.closePath())}}const ds=(e,l,a)=>{e.moveTo(l,a)},ps=(e,l,a)=>{e.moveTo(a,l)},yn=(e,l,a)=>{e.lineTo(l,a)},Sn=(e,l,a)=>{e.lineTo(a,l)},hs=lr(0),ua=lr(1),nr=(e,l,a,n,i,u)=>{e.arc(l,a,n,i,u)},sr=(e,l,a,n,i,u)=>{e.arc(a,l,n,i,u)},ar=(e,l,a,n,i,u,c)=>{e.bezierCurveTo(l,a,n,i,u,c)},ir=(e,l,a,n,i,u,c)=>{e.bezierCurveTo(a,l,i,n,c,u)};function rr(e){return(l,a,n,i,u)=>$l(l,a,(c,p,h,v,S,g,_,N,T,Y,ee)=>{let{pxRound:ne,points:b}=c,K,L;v.ori==0?(K=ds,L=nr):(K=ps,L=sr);const F=$e(b.width*Ve,3);let C=(b.size-b.width)/2*Ve,ae=$e(C*2,3),Q=new Path2D,$=new Path2D,{left:ie,top:w,width:I,height:G}=l.bbox;hs($,ie-ae,w-ae,I+ae*2,G+ae*2);const le=P=>{if(h[P]!=null){let J=ne(g(p[P],v,Y,N)),A=ne(_(h[P],S,ee,T));K(Q,J+C,A),L(Q,J,A,C,0,Xn*2)}};if(u)u.forEach(le);else for(let P=n;P<=i;P++)le(P);return{stroke:F>0?Q:null,fill:Q,clip:$,flags:xn|Ys}})}function or(e){return(l,a,n,i,u,c)=>{n!=i&&(u!=n&&c!=n&&e(l,a,n),u!=i&&c!=i&&e(l,a,i),e(l,a,c))}}const Nc=or(yn),Gc=or(Sn);function cr(e){const l=Ie(e?.alignGaps,0);return(a,n,i,u)=>$l(a,n,(c,p,h,v,S,g,_,N,T,Y,ee)=>{[i,u]=rs(h,i,u);let ne=c.pxRound,b=G=>ne(g(G,v,Y,N)),K=G=>ne(_(G,S,ee,T)),L,F;v.ori==0?(L=yn,F=Nc):(L=Sn,F=Gc);const C=v.dir*(v.ori==0?1:-1),ae={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:xn},Q=ae.stroke;let $=!1;if(u-i>=Y*4){let G=B=>a.posToVal(B,v.key,!0),le=null,P=null,J,A,Ce,_e=b(p[C==1?i:u]),ue=b(p[i]),me=b(p[u]),ce=G(C==1?ue+1:me-1);for(let B=C==1?i:u;B>=i&&B<=u;B+=C){let Me=p[B],Le=(C==1?Me<ce:Me>ce)?_e:b(Me),xe=h[B];Le==_e?xe!=null?(A=xe,le==null?(L(Q,Le,K(A)),J=le=P=A):A<le?le=A:A>P&&(P=A)):xe===null&&($=!0):(le!=null&&F(Q,_e,K(le),K(P),K(J),K(A)),xe!=null?(A=xe,L(Q,Le,K(A)),le=P=J=A):(le=P=null,xe===null&&($=!0)),_e=Le,ce=G(_e+C))}le!=null&&le!=P&&Ce!=_e&&F(Q,_e,K(le),K(P),K(J),K(A))}else for(let G=C==1?i:u;G>=i&&G<=u;G+=C){let le=h[G];le===null?$=!0:le!=null&&L(Q,b(p[G]),K(le))}let[w,I]=oa(a,n);if(c.fill!=null||w!=0){let G=ae.fill=new Path2D(Q),le=c.fillTo(a,n,c.min,c.max,w),P=K(le),J=b(p[i]),A=b(p[u]);C==-1&&([A,J]=[J,A]),L(G,A,P),L(G,J,P)}if(!c.spanGaps){let G=[];$&&G.push(...ca(p,h,i,u,C,b,l)),ae.gaps=G=c.gaps(a,n,i,u,G),ae.clip=fs(G,v.ori,N,T,Y,ee)}return I!=0&&(ae.band=I==2?[Rl(a,n,i,u,Q,-1),Rl(a,n,i,u,Q,1)]:Rl(a,n,i,u,Q,I)),ae})}function Ic(e){const l=Ie(e.align,1),a=Ie(e.ascDesc,!1),n=Ie(e.alignGaps,0),i=Ie(e.extend,!1);return(u,c,p,h)=>$l(u,c,(v,S,g,_,N,T,Y,ee,ne,b,K)=>{[p,h]=rs(g,p,h);let L=v.pxRound,{left:F,width:C}=u.bbox,ae=ue=>L(T(ue,_,b,ee)),Q=ue=>L(Y(ue,N,K,ne)),$=_.ori==0?yn:Sn;const ie={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:xn},w=ie.stroke,I=_.dir*(_.ori==0?1:-1);let G=Q(g[I==1?p:h]),le=ae(S[I==1?p:h]),P=le,J=le;i&&l==-1&&(J=F,$(w,J,G)),$(w,le,G);for(let ue=I==1?p:h;ue>=p&&ue<=h;ue+=I){let me=g[ue];if(me==null)continue;let ce=ae(S[ue]),B=Q(me);l==1?$(w,ce,G):$(w,P,B),$(w,ce,B),G=B,P=ce}let A=P;i&&l==1&&(A=F+C,$(w,A,G));let[Ce,_e]=oa(u,c);if(v.fill!=null||Ce!=0){let ue=ie.fill=new Path2D(w),me=v.fillTo(u,c,v.min,v.max,Ce),ce=Q(me);$(ue,A,ce),$(ue,J,ce)}if(!v.spanGaps){let ue=[];ue.push(...ca(S,g,p,h,I,ae,n));let me=v.width*Ve/2,ce=a||l==1?me:-me,B=a||l==-1?-me:me;ue.forEach(Me=>{Me[0]+=ce,Me[1]+=B}),ie.gaps=ue=v.gaps(u,c,p,h,ue),ie.clip=fs(ue,_.ori,ee,ne,b,K)}return _e!=0&&(ie.band=_e==2?[Rl(u,c,p,h,w,-1),Rl(u,c,p,h,w,1)]:Rl(u,c,p,h,w,_e)),ie})}function _i(e,l,a,n,i,u,c=Qe){if(e.length>1){let p=null;for(let h=0,v=1/0;h<e.length;h++)if(l[h]!==void 0){if(p!=null){let S=Rt(e[h]-e[p]);S<v&&(v=S,c=Rt(a(e[h],n,i,u)-a(e[p],n,i,u)))}p=h}}return c}function zc(e){e=e||zn;const l=Ie(e.size,[.6,Qe,1]),a=e.align||0,n=e.gap||0;let i=e.radius;i=i==null?[0,0]:typeof i=="number"?[i,0]:i;const u=De(i),c=1-l[0],p=Ie(l[1],Qe),h=Ie(l[2],1),v=Ie(e.disp,zn),S=Ie(e.each,N=>{}),{fill:g,stroke:_}=v;return(N,T,Y,ee)=>$l(N,T,(ne,b,K,L,F,C,ae,Q,$,ie,w)=>{let I=ne.pxRound,G=a,le=n*Ve,P=p*Ve,J=h*Ve,A,Ce;L.ori==0?[A,Ce]=u(N,T):[Ce,A]=u(N,T);const _e=L.dir*(L.ori==0?1:-1);let ue=L.ori==0?hs:ua,me=L.ori==0?S:(z,Re,Ke,Ct,$t,Dt,Ht)=>{S(z,Re,Ke,$t,Ct,Ht,Dt)},ce=Ie(N.bands,na).find(z=>z.series[0]==T),B=ce!=null?ce.dir:0,Me=ne.fillTo(N,T,ne.min,ne.max,B),tt=I(ae(Me,F,w,$)),Le,xe,xt,Xe=ie,Pe=I(ne.width*Ve),Ze=!1,dt=null,ut=null,bt=null,kt=null;g!=null&&(Pe==0||_!=null)&&(Ze=!0,dt=g.values(N,T,Y,ee),ut=new Map,new Set(dt).forEach(z=>{z!=null&&ut.set(z,new Path2D)}),Pe>0&&(bt=_.values(N,T,Y,ee),kt=new Map,new Set(bt).forEach(z=>{z!=null&&kt.set(z,new Path2D)})));let{x0:be,size:pt}=v;if(be!=null&&pt!=null){G=1,b=be.values(N,T,Y,ee),be.unit==2&&(b=b.map(Ke=>N.posToVal(Q+Ke*ie,L.key,!0)));let z=pt.values(N,T,Y,ee);pt.unit==2?xe=z[0]*ie:xe=C(z[0],L,ie,Q)-C(0,L,ie,Q),Xe=_i(b,K,C,L,ie,Q,Xe),xt=Xe-xe+le}else Xe=_i(b,K,C,L,ie,Q,Xe),xt=Xe*c+le,xe=Xe-xt;xt<1&&(xt=0),Pe>=xe/2&&(Pe=0),xt<5&&(I=Pi);let yt=xt>0,At=Xe-xt-(yt?Pe:0);xe=I(Ws(At,J,P)),Le=(G==0?xe/2:G==_e?0:xe)-G*_e*((G==0?le/2:0)+(yt?Pe/2:0));const et={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},qt=Ze?null:new Path2D;let Ot=null;if(ce!=null)Ot=N.data[ce.series[1]];else{let{y0:z,y1:Re}=v;z!=null&&Re!=null&&(K=Re.values(N,T,Y,ee),Ot=z.values(N,T,Y,ee))}let Bt=A*xe,he=Ce*xe;for(let z=_e==1?Y:ee;z>=Y&&z<=ee;z+=_e){let Re=K[z];if(Re==null)continue;if(Ot!=null){let vt=Ot[z]??0;if(Re-vt==0)continue;tt=ae(vt,F,w,$)}let Ke=L.distr!=2||v!=null?b[z]:z,Ct=C(Ke,L,ie,Q),$t=ae(Ie(Re,Me),F,w,$),Dt=I(Ct-Le),Ht=I(Qt($t,tt)),ht=I(bl($t,tt)),ot=Ht-ht;if(Re!=null){let vt=Re<0?he:Bt,St=Re<0?Bt:he;Ze?(Pe>0&&bt[z]!=null&&ue(kt.get(bt[z]),Dt,ht+ol(Pe/2),xe,Qt(0,ot-Pe),vt,St),dt[z]!=null&&ue(ut.get(dt[z]),Dt,ht+ol(Pe/2),xe,Qt(0,ot-Pe),vt,St)):ue(qt,Dt,ht+ol(Pe/2),xe,Qt(0,ot-Pe),vt,St),me(N,T,z,Dt-Pe/2,ht,xe+Pe,ot)}}return Pe>0?et.stroke=Ze?kt:qt:Ze||(et._fill=ne.width==0?ne._fill:ne._stroke??ne._fill,et.width=0),et.fill=Ze?ut:qt,et})}function Vc(e,l){const a=Ie(l?.alignGaps,0);return(n,i,u,c)=>$l(n,i,(p,h,v,S,g,_,N,T,Y,ee,ne)=>{[u,c]=rs(v,u,c);let b=p.pxRound,K=A=>b(_(A,S,ee,T)),L=A=>b(N(A,g,ne,Y)),F,C,ae;S.ori==0?(F=ds,ae=yn,C=ar):(F=ps,ae=Sn,C=ir);const Q=S.dir*(S.ori==0?1:-1);let $=K(h[Q==1?u:c]),ie=$,w=[],I=[];for(let A=Q==1?u:c;A>=u&&A<=c;A+=Q)if(v[A]!=null){let _e=h[A],ue=K(_e);w.push(ie=ue),I.push(L(v[A]))}const G={stroke:e(w,I,F,ae,C,b),fill:null,clip:null,band:null,gaps:null,flags:xn},le=G.stroke;let[P,J]=oa(n,i);if(p.fill!=null||P!=0){let A=G.fill=new Path2D(le),Ce=p.fillTo(n,i,p.min,p.max,P),_e=L(Ce);ae(A,ie,_e),ae(A,$,_e)}if(!p.spanGaps){let A=[];A.push(...ca(h,v,u,c,Q,K,a)),G.gaps=A=p.gaps(n,i,u,c,A),G.clip=fs(A,S.ori,T,Y,ee,ne)}return J!=0&&(G.band=J==2?[Rl(n,i,u,c,le,-1),Rl(n,i,u,c,le,1)]:Rl(n,i,u,c,le,J)),G})}function Bc(e){return Vc(Hc,e)}function Hc(e,l,a,n,i,u){const c=e.length;if(c<2)return null;const p=new Path2D;if(a(p,e[0],l[0]),c==2)n(p,e[1],l[1]);else{let h=Array(c),v=Array(c-1),S=Array(c-1),g=Array(c-1);for(let _=0;_<c-1;_++)S[_]=l[_+1]-l[_],g[_]=e[_+1]-e[_],v[_]=S[_]/g[_];h[0]=v[0];for(let _=1;_<c-1;_++)v[_]===0||v[_-1]===0||v[_-1]>0!=v[_]>0?h[_]=0:(h[_]=3*(g[_-1]+g[_])/((2*g[_]+g[_-1])/v[_-1]+(g[_]+2*g[_-1])/v[_]),isFinite(h[_])||(h[_]=0));h[c-1]=v[c-2];for(let _=0;_<c-1;_++)i(p,e[_]+g[_]/3,l[_]+h[_]*g[_]/3,e[_+1]-g[_]/3,l[_+1]-h[_+1]*g[_]/3,e[_+1],l[_+1])}return p}const Ks=new Set;function wi(){for(let e of Ks)e.syncRect(!0)}bn&&(Zl(yo,mn,wi),Zl(So,mn,wi,!0),Zl(ts,mn,()=>{wt.pxRatio=Ve}));const Wc=cr(),Uc=rr();function xi(e,l,a,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((u,c)=>js(u,c,l,a))}function qc(e,l){return e.map((a,n)=>n==0?{}:Et({},l,a))}function js(e,l,a,n){return Et({},l==0?a:n,e)}function ur(e,l,a){return l==null?_n:[l,a]}const Yc=ur;function Kc(e,l,a){return l==null?_n:ls(l,a,ta,!0)}function fr(e,l,a,n){return l==null?_n:os(l,a,e.scales[n].log,!1)}const jc=fr;function dr(e,l,a,n){return l==null?_n:ea(l,a,e.scales[n].log,!1)}const Jc=dr;function Zc(e,l,a,n,i){let u=Qt($a(e),$a(l)),c=l-e,p=xl(i/n*c,a);do{let h=a[p],v=n*h/c;if(v>=i&&u+(h<5?zl.get(h):0)<=17)return[h,v]}while(++p<a.length);return[0,0]}function bi(e){let l,a;return e=e.replace(/(\d+)px/,(n,i)=>(l=Pt((a=+i)*Ve))+"px"),[e,l,a]}function Qc(e){e.show&&[e.font,e.labelFont].forEach(l=>{let a=$e(l[2]*Ve,1);l[0]=l[0].replace(/[0-9.]+px/,a+"px"),l[1]=a})}function wt(e,l,a){const n={mode:Ie(e.mode,1)},i=n.mode;function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?u(t,s,r,o):c(t,s,r,o)}n.valToPosH=u,n.valToPosV=c;let h=!1;n.status=0;const v=n.root=hl(no);if(e.id!=null&&(v.id=e.id),rl(v,e.class),e.title){let t=hl(io,v);t.textContent=e.title}const S=wl("canvas"),g=n.ctx=S.getContext("2d"),_=hl(ro,v);Zl("click",_,t=>{t.target===T&&(st!=an||ct!=rn)&&Ut.click(n,t)},!0);const N=n.under=hl(oo,_);_.appendChild(S);const T=n.over=hl(co,_);e=wn(e);const Y=+Ie(e.pxAlign,1),ee=gi(Y);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const ne=e.ms||.001,b=n.series=i==1?xi(e.series||[],ui,vi,!1):qc(e.series||[null],hi),K=n.axes=xi(e.axes||[],ci,di,!0),L=n.scales={},F=n.bands=e.bands||[];F.forEach(t=>{t.fill=De(t.fill||null),t.dir=Ie(t.dir,-1)});const C=i==2?b[1].facets[0].scale:b[0].scale,ae={axes:xr,series:vr},Q=(e.drawOrder||["axes","series"]).map(t=>ae[t]);function $(t){const s=t.distr==3?r=>Pl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Fs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:m}=t,x=m-f;return(o-f)/x}}function ie(t){let s=L[t];if(s==null){let r=(e.scales||zn)[t]||zn;if(r.from!=null){ie(r.from);let o=Et({},L[r.from],r,{key:t});o.valToPct=$(o),L[t]=o}else{s=L[t]=Et({},t==C?er:Rc,r),s.key=t;let o=s.time,f=s.range,m=Il(f);if((t!=C||i==2&&!o)&&(m&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ja:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ja:{mode:1,hard:f[1],soft:f[1]}},m=!1),!m&&us(f))){let x=f;f=(M,R,W)=>R==null?_n:ls(R,W,x)}s.range=De(f||(o?Yc:t==C?s.distr==3?jc:s.distr==4?Jc:ur:s.distr==3?fr:s.distr==4?dr:Kc)),s.auto=De(m?!1:s.auto),s.clamp=De(s.clamp||Pc),s._min=s._max=null,s.valToPct=$(s)}}}ie("x"),ie("y"),i==1&&b.forEach(t=>{ie(t.scale)}),K.forEach(t=>{ie(t.scale)});for(let t in e.scales)ie(t);const w=L[C],I=w.distr;let G,le;w.ori==0?(rl(v,so),G=u,le=c):(rl(v,ao),G=c,le=u);const P={};for(let t in L){let s=L[t];(s.min!=null||s.max!=null)&&(P[t]={min:s.min,max:s.max},s.min=s.max=null)}const J=e.tzDate||(t=>new Date(Pt(t/ne))),A=e.fmtDate||sa,Ce=ne==1?ac(J):oc(J),_e=ii(J,ai(ne==1?sc:rc,A)),ue=oi(J,ri(uc,A)),me=[],ce=n.legend=Et({},pc,e.legend),B=n.cursor=Et({},wc,{drag:{y:i==2}},e.cursor),Me=ce.show,tt=B.show,Le=ce.markers;ce.idxs=me,Le.width=De(Le.width),Le.dash=De(Le.dash),Le.stroke=De(Le.stroke),Le.fill=De(Le.fill);let xe,xt,Xe,Pe=[],Ze=[],dt,ut=!1,bt={};if(ce.live){const t=b[1]?b[1].values:null;ut=t!=null,dt=ut?t(n,1,0):{_:0};for(let s in dt)bt[s]=$s}if(Me)if(xe=wl("table",mo,v),Xe=wl("tbody",null,xe),ce.mount(n,xe),ut){xt=wl("thead",null,xe,Xe);let t=wl("tr",null,xt);wl("th",null,t);for(var kt in dt)wl("th",Na,t).textContent=kt}else rl(xe,_o),ce.live&&rl(xe,go);const be={show:!0},pt={show:!1};function yt(t,s){if(s==0&&(ut||!ce.live||i==2))return _n;let r=[],o=wl("tr",wo,Xe,Xe.childNodes[s]);rl(o,t.class),t.show||rl(o,Jl);let f=wl("th",null,o);if(Le.show){let M=hl(xo,f);if(s>0){let R=Le.width(n,s);R&&(M.style.border=R+"px "+Le.dash(n,s)+" "+Le.stroke(n,s)),M.style.background=Le.fill(n,s)}}let m=hl(Na,f);t.label instanceof HTMLElement?m.appendChild(t.label):m.textContent=t.label,s>0&&(Le.show||(m.style.color=t.width>0?Le.stroke(n,s):Le.fill(n,s)),et("click",f,M=>{if(B._lock)return;Xt(M);let R=b.indexOf(t);if((M.ctrlKey||M.metaKey)!=ce.isolate){let W=b.some((q,X)=>X>0&&X!=R&&q.show);b.forEach((q,X)=>{X>0&&kl(X,W?X==R?be:pt:be,!0,Mt.setSeries)})}else kl(R,{show:!t.show},!0,Mt.setSeries)},!1),fe&&et(Va,f,M=>{B._lock||(Xt(M),kl(b.indexOf(t),cn,!0,Mt.setSeries))},!1));for(var x in dt){let M=wl("td",bo,o);M.textContent="--",r.push(M)}return[o,r]}const At=new Map;function et(t,s,r,o=!0){const f=At.get(s)||{},m=B.bind[t](n,s,r,o);m&&(Zl(t,s,f[t]=m),At.set(s,f))}function qt(t,s,r){const o=At.get(s)||{};for(let f in o)(t==null||f==t)&&(Hs(f,s,o[f]),delete o[f]);t==null&&At.delete(s)}let Ot=0,Bt=0,he=0,z=0,Re=0,Ke=0,Ct=Re,$t=Ke,Dt=he,Ht=z,ht=0,ot=0,vt=0,St=0;n.bbox={};let ul=!1,tl=!1,Wt=!1,Yt=!1,ml=!1,U=!1;function de(t,s,r){(r||t!=n.width||s!=n.height)&&ye(t,s),tn(!1),Wt=!0,tl=!0,ln()}function ye(t,s){n.width=Ot=he=t,n.height=Bt=z=s,Re=Ke=0,Kt(),ll();let r=n.bbox;ht=r.left=Kl(Re*Ve,.5),ot=r.top=Kl(Ke*Ve,.5),vt=r.width=Kl(he*Ve,.5),St=r.height=Kl(z*Ve,.5)}const We=3;function Lt(){let t=!1,s=0;for(;!t;){s++;let r=_r(s),o=wr(s);t=s==We||r&&o,t||(ye(n.width,n.height),tl=!0)}}function fl({width:t,height:s}){de(t,s)}n.setSize=fl;function Kt(){let t=!1,s=!1,r=!1,o=!1;K.forEach((f,m)=>{if(f.show&&f._show){let{side:x,_size:M}=f,R=x%2,W=f.label!=null?f.labelSize:0,q=M+W;q>0&&(R?(he-=q,x==3?(Re+=q,o=!0):r=!0):(z-=q,x==0?(Ke+=q,t=!0):s=!0))}}),ke[0]=t,ke[1]=r,ke[2]=s,ke[3]=o,he-=Ue[1]+Ue[3],Re+=Ue[3],z-=Ue[2]+Ue[0],Ke+=Ue[0]}function ll(){let t=Re+he,s=Ke+z,r=Re,o=Ke;function f(m,x){switch(m){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}K.forEach((m,x)=>{if(m.show&&m._show){let M=m.side;m._pos=f(M,m._size),m.label!=null&&(m._lpos=f(M,m.labelSize))}})}if(B.dataIdx==null){let t=B.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=De(t.prox),o=t.bias??=0;B.dataIdx=(f,m,x,M)=>{if(m==0)return x;let R=x,W=r(f,m,x,M)??Qe,q=W>=0&&W<Qe,X=w.ori==0?he:z,we=B.left,ze=l[0],Ne=l[m];if(s.has(Ne[x])){R=null;let Ae=null,ve=null,re;if(o==0||o==-1)for(re=x;Ae==null&&re-- >0;)s.has(Ne[re])||(Ae=re);if(o==0||o==1)for(re=x;ve==null&&re++<Ne.length;)s.has(Ne[re])||(ve=re);if(Ae!=null||ve!=null)if(q){let it=Ae==null?-1/0:G(ze[Ae],w,X,0),mt=ve==null?1/0:G(ze[ve],w,X,0),Vt=we-it,Je=mt-we;Vt<=Je?Vt<=W&&(R=Ae):Je<=W&&(R=ve)}else R=ve==null?Ae:Ae==null?ve:x-Ae<=ve-x?Ae:ve}else q&&Rt(we-G(ze[x],w,X,0))>W&&(R=null);return R}}const Xt=t=>{B.event=t};B.idxs=me,B._lock=!1;let D=B.points;D.show=De(D.show),D.size=De(D.size),D.stroke=De(D.stroke),D.width=De(D.width),D.fill=De(D.fill);const te=n.focus=Et({},e.focus||{alpha:.3},B.focus),fe=te.prox>=0,Z=fe&&D.one;let H=[],O=[],y=[];function j(t,s){let r=D.show(n,s);if(r instanceof HTMLElement)return rl(r,vo),rl(r,t.class),Al(r,-10,-10,he,z),T.insertBefore(r,H[s]),r}function ge(t,s){if(i==1||s>0){let r=i==1&&L[t.scale].time,o=t.value;t.value=r?ti(o)?oi(J,ri(o,A)):o||ue:o||Cc,t.label=t.label||(r?bc:xc)}if(Z||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Wc||Ro,t.fillTo=De(t.fillTo||Fc),t.pxAlign=+Ie(t.pxAlign,Y),t.pxRound=gi(t.pxAlign),t.stroke=De(t.stroke||null),t.fill=De(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Dc(Qt(1,t.width),1),o=t.points=Et({},{size:r,width:Qt(1,r*.2),stroke:t.stroke,space:r*2,paths:Uc,_stroke:null,_fill:null},t.points);o.show=De(o.show),o.filter=De(o.filter),o.fill=De(o.fill),o.stroke=De(o.stroke),o.paths=De(o.paths),o.pxAlign=t.pxAlign}if(Me){let r=yt(t,s);Pe.splice(s,0,r[0]),Ze.splice(s,0,r[1]),ce.values.push(null)}if(tt){me.splice(s,0,null);let r=null;Z?s==0&&(r=j(t,s)):s>0&&(r=j(t,s)),H.splice(s,0,r),O.splice(s,0,0),y.splice(s,0,0)}zt("addSeries",s)}function pe(t,s){s=s??b.length,t=i==1?js(t,s,ui,vi):js(t,s,{},hi),b.splice(s,0,t),ge(b[s],s)}n.addSeries=pe;function Ee(t){if(b.splice(t,1),Me){ce.values.splice(t,1),Ze.splice(t,1);let s=Pe.splice(t,1)[0];qt(null,s.firstChild),s.remove()}tt&&(me.splice(t,1),H.splice(t,1)[0].remove(),O.splice(t,1),y.splice(t,1)),zt("delSeries",t)}n.delSeries=Ee;const ke=[!1,!1,!1,!1];function lt(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=L[t.scale];o==null&&(t.scale=r?b[1].scale:C,o=L[t.scale]);let f=o.time;t.size=De(t.size),t.space=De(t.space),t.rotate=De(t.rotate),Il(t.incrs)&&t.incrs.forEach(x=>{!zl.has(x)&&zl.set(x,Oi(x))}),t.incrs=De(t.incrs||(o.distr==2?tc:f?ne==1?nc:ic:jl)),t.splits=De(t.splits||(f&&o.distr==1?Ce:o.distr==3?Us:o.distr==4?kc:Sc)),t.stroke=De(t.stroke),t.grid.stroke=De(t.grid.stroke),t.ticks.stroke=De(t.ticks.stroke),t.border.stroke=De(t.border.stroke);let m=t.values;t.values=Il(m)&&!Il(m[0])?De(m):f?Il(m)?ii(J,ai(m,A)):ti(m)?cc(J,m):m||_e:m||yc,t.filter=De(t.filter||(o.distr>=3&&o.log==10?Ec:o.distr==3&&o.log==2?Ac:Ri)),t.font=bi(t.font),t.labelFont=bi(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(ke[s]=!0,t._el=hl(uo,_))}}function Be(t,s,r,o){let[f,m,x,M]=r,R=s%2,W=0;return R==0&&(M||m)&&(W=s==0&&!f||s==2&&!x?Pt(ci.size/3):0),R==1&&(f||x)&&(W=s==1&&!m||s==3&&!M?Pt(di.size/2):0),W}const nt=n.padding=(e.padding||[Be,Be,Be,Be]).map(t=>De(Ie(t,Be))),Ue=n._padding=nt.map((t,s)=>t(n,s,ke,0));let Fe,qe=null,se=null;const je=i==1?b[0].idxs:null;let Tt=null,nl=!1;function kn(t,s){if(l=t??[],n.data=n._data=l,i==2){Fe=0;for(let r=1;r<b.length;r++)Fe+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Tt=l[0],Fe=Tt.length;let r=l;if(I==2){r=l.slice();let o=r[0]=Array(Fe);for(let f=0;f<Fe;f++)o[f]=f}n._data=l=r}if(tn(!0),zt("setData"),I==2&&(Wt=!0),s!==!1){let r=w;r.auto(n,nl)?Vl():Ol(C,r.min,r.max),Yt=Yt||B.left>=0,U=!0,ln()}}n.setData=kn;function Vl(){nl=!0;let t,s;i==1&&(Fe>0?(qe=je[0]=0,se=je[1]=Fe-1,t=l[0][qe],s=l[0][se],I==2?(t=qe,s=se):t==s&&(I==3?[t,s]=os(t,t,w.log,!1):I==4?[t,s]=ea(t,t,w.log,!1):w.time?s=t+Pt(86400/ne):[t,s]=ls(t,s,ta,!0))):(qe=je[0]=t=null,se=je[1]=s=null)),Ol(C,t,s)}let Bl,Sl,Xl,Hl,en,Wl,Nt,vs,ms,el;function fa(t,s,r,o,f,m){t??=Ia,r??=na,o??="butt",f??=Ia,m??="round",t!=Bl&&(g.strokeStyle=Bl=t),f!=Sl&&(g.fillStyle=Sl=f),s!=Xl&&(g.lineWidth=Xl=s),m!=en&&(g.lineJoin=en=m),o!=Wl&&(g.lineCap=Wl=o),r!=Hl&&g.setLineDash(Hl=r)}function da(t,s,r,o){s!=Sl&&(g.fillStyle=Sl=s),t!=Nt&&(g.font=Nt=t),r!=vs&&(g.textAlign=vs=r),o!=ms&&(g.textBaseline=ms=o)}function gs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,nl)&&(s==null||s.min==null)){let m=Ie(qe,0),x=Ie(se,o.length-1),M=r.min==null?Eo(o,m,x,f,t.distr==3):[r.min,r.max];t.min=bl(t.min,r.min=M[0]),t.max=Qt(t.max,r.max=M[1])}}const pa={min:null,max:null};function pr(){for(let o in L){let f=L[o];P[o]==null&&(f.min==null||P[C]!=null&&f.auto(n,nl))&&(P[o]=pa)}for(let o in L){let f=L[o];P[o]==null&&f.from!=null&&P[f.from]!=null&&(P[o]=pa)}P[C]!=null&&tn(!0);let t={};for(let o in P){let f=P[o];if(f!=null){let m=t[o]=wn(L[o],No);if(f.min!=null)Et(m,f);else if(o!=C||i==2)if(Fe==0&&m.from==null){let x=m.range(n,null,null,o);m.min=x[0],m.max=x[1]}else m.min=Qe,m.max=-Qe}}if(Fe>0){b.forEach((o,f)=>{if(i==1){let m=o.scale,x=P[m];if(x==null)return;let M=t[m];if(f==0){let R=M.range(n,M.min,M.max,m);M.min=R[0],M.max=R[1],qe=xl(M.min,l[0]),se=xl(M.max,l[0]),se-qe>1&&(l[0][qe]<M.min&&qe++,l[0][se]>M.max&&se--),o.min=Tt[qe],o.max=Tt[se]}else o.show&&o.auto&&gs(M,x,o,l[f],o.sorted);o.idxs[0]=qe,o.idxs[1]=se}else if(f>0&&o.show&&o.auto){let[m,x]=o.facets,M=m.scale,R=x.scale,[W,q]=l[f],X=t[M],we=t[R];X!=null&&gs(X,P[M],m,W,m.sorted),we!=null&&gs(we,P[R],x,q,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],m=P[o];if(f.from==null&&(m==null||m.min==null)){let x=f.range(n,f.min==Qe?null:f.min,f.max==-Qe?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let m=t[f.from];if(m.min==null)f.min=f.max=null;else{let x=f.range(n,m.min,m.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],m=L[o];if(m.min!=f.min||m.max!=f.max){m.min=f.min,m.max=f.max;let x=m.distr;m._min=x==3?Pl(m.min):x==4?Fs(m.min,m.asinh):x==100?m.fwd(m.min):m.min,m._max=x==3?Pl(m.max):x==4?Fs(m.max,m.asinh):x==100?m.fwd(m.max):m.max,s[o]=r=!0}}if(r){b.forEach((o,f)=>{i==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Wt=!0,zt("setScale",o);tt&&B.left>=0&&(Yt=U=!0)}for(let o in P)P[o]=null}function hr(t){let s=Ws(qe-1,0,Fe-1),r=Ws(se+1,0,Fe-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<Fe-1;)r++;return[s,r]}function vr(){if(Fe>0){let t=b.some(s=>s._focus)&&el!=te.alpha;t&&(g.globalAlpha=el=te.alpha),b.forEach((s,r)=>{if(r>0&&s.show&&(ha(r,!1),ha(r,!0),s._paths==null)){let o=el;el!=s.alpha&&(g.globalAlpha=el=s.alpha);let f=i==2?[0,l[r][0].length-1]:hr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),el!=o&&(g.globalAlpha=el=o)}}),b.forEach((s,r)=>{if(r>0&&s.show){let o=el;el!=s.alpha&&(g.globalAlpha=el=s.alpha),s._paths!=null&&va(r,!1);{let f=s._paths!=null?s._paths.gaps:null,m=s.points.show(n,r,qe,se,f),x=s.points.filter(n,r,m,f);(m||x)&&(s.points._paths=s.points.paths(n,r,qe,se,x),va(r,!0))}el!=o&&(g.globalAlpha=el=o),zt("drawSeries",r)}}),t&&(g.globalAlpha=el=1)}}function ha(t,s){let r=s?b[t].points:b[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function va(t,s){let r=s?b[t].points:b[t],{stroke:o,fill:f,clip:m,flags:x,_stroke:M=r._stroke,_fill:R=r._fill,_width:W=r.width}=r._paths;W=$e(W*Ve,3);let q=null,X=W%2/2;s&&R==null&&(R=W>0?"#fff":M);let we=r.pxAlign==1&&X>0;if(we&&g.translate(X,X),!s){let ze=ht-W/2,Ne=ot-W/2,Ae=vt+W,ve=St+W;q=new Path2D,q.rect(ze,Ne,Ae,ve)}s?_s(M,W,r.dash,r.cap,R,o,f,x,m):mr(t,M,W,r.dash,r.cap,R,o,f,x,q,m),we&&g.translate(-X,-X)}function mr(t,s,r,o,f,m,x,M,R,W,q){let X=!1;R!=0&&F.forEach((we,ze)=>{if(we.series[0]==t){let Ne=b[we.series[1]],Ae=l[we.series[1]],ve=(Ne._paths||zn).band;Il(ve)&&(ve=we.dir==1?ve[0]:ve[1]);let re,it=null;Ne.show&&ve&&Co(Ae,qe,se)?(it=we.fill(n,ze)||m,re=Ne._paths.clip):ve=null,_s(s,r,o,f,it,x,M,R,W,q,re,ve),X=!0}}),X||_s(s,r,o,f,m,x,M,R,W,q)}const ma=xn|Ys;function _s(t,s,r,o,f,m,x,M,R,W,q,X){fa(t,s,r,o,f),(R||W||X)&&(g.save(),R&&g.clip(R),W&&g.clip(W)),X?(M&ma)==ma?(g.clip(X),q&&g.clip(q),qn(f,x),Un(t,m,s)):M&Ys?(qn(f,x),g.clip(X),Un(t,m,s)):M&xn&&(g.save(),g.clip(X),q&&g.clip(q),qn(f,x),g.restore(),Un(t,m,s)):(qn(f,x),Un(t,m,s)),(R||W||X)&&g.restore()}function Un(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{g.strokeStyle=Bl=f,g.stroke(o)}):s!=null&&t&&g.stroke(s))}function qn(t,s){s instanceof Map?s.forEach((r,o)=>{g.fillStyle=Sl=o,g.fill(r)}):s!=null&&t&&g.fill(s)}function gr(t,s,r,o){let f=K[t],m;if(o<=0)m=[0,0];else{let x=f._space=f.space(n,t,s,r,o),M=f._incrs=f.incrs(n,t,s,r,o,x);m=Zc(s,r,M,o,x)}return f._found=m}function ws(t,s,r,o,f,m,x,M,R,W){let q=x%2/2;Y==1&&g.translate(q,q),fa(M,x,R,W,M),g.beginPath();let X,we,ze,Ne,Ae=f+(o==0||o==3?-m:m);r==0?(we=f,Ne=Ae):(X=f,ze=Ae);for(let ve=0;ve<t.length;ve++)s[ve]!=null&&(r==0?X=ze=t[ve]:we=Ne=t[ve],g.moveTo(X,we),g.lineTo(ze,Ne));g.stroke(),Y==1&&g.translate(-q,-q)}function _r(t){let s=!0;return K.forEach((r,o)=>{if(!r.show)return;let f=L[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,tn(!1));return}else r._show||(s=!1,r._show=!0,tn(!1));let m=r.side,x=m%2,{min:M,max:R}=f,[W,q]=gr(o,M,R,x==0?he:z);if(q==0)return;let X=f.distr==2,we=r._splits=r.splits(n,o,M,R,W,q,X),ze=f.distr==2?we.map(re=>Tt[re]):we,Ne=f.distr==2?Tt[we[1]]-Tt[we[0]]:W,Ae=r._values=r.values(n,r.filter(n,ze,o,q,Ne),o,q,Ne);r._rotate=m==2?r.rotate(n,Ae,o,q):0;let ve=r._size;r._size=vl(r.size(n,Ae,o,t)),ve!=null&&r._size!=ve&&(s=!1)}),s}function wr(t){let s=!0;return nt.forEach((r,o)=>{let f=r(n,o,ke,t);f!=Ue[o]&&(s=!1),Ue[o]=f}),s}function xr(){for(let t=0;t<K.length;t++){let s=K[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,m,x=s.stroke(n,t),M=r==0||r==3?-1:1,[R,W]=s._found;if(s.label!=null){let Jt=s.labelGap*M,il=Pt((s._lpos+Jt)*Ve);da(s.labelFont[0],x,"center",r==2?Ln:Ga),g.save(),o==1?(f=m=0,g.translate(il,Pt(ot+St/2)),g.rotate((r==3?-Xn:Xn)/2)):(f=Pt(ht+vt/2),m=il);let Yl=Li(s.label)?s.label(n,t,R,W):s.label;g.fillText(Yl,f,m),g.restore()}if(W==0)continue;let q=L[s.scale],X=o==0?vt:St,we=o==0?ht:ot,ze=s._splits,Ne=q.distr==2?ze.map(Jt=>Tt[Jt]):ze,Ae=q.distr==2?Tt[ze[1]]-Tt[ze[0]]:R,ve=s.ticks,re=s.border,it=ve.show?ve.size:0,mt=Pt(it*Ve),Vt=Pt((s.alignTo==2?s._size-it-s.gap:s.gap)*Ve),Je=s._rotate*-Xn/180,gt=ee(s._pos*Ve),sl=(mt+Vt)*M,jt=gt+sl;m=o==0?jt:0,f=o==1?jt:0;let dl=s.font[0],gl=s.align==1?fn:s.align==2?Ls:Je>0?fn:Je<0?Ls:o==0?"center":r==3?Ls:fn,Ml=Je||o==1?"middle":r==2?Ln:Ga;da(dl,x,gl,Ml);let al=s.font[1]*s.lineGap,pl=ze.map(Jt=>ee(p(Jt,q,X,we))),_l=s._values;for(let Jt=0;Jt<_l.length;Jt++){let il=_l[Jt];if(il!=null){o==0?f=pl[Jt]:m=pl[Jt],il=""+il;let Yl=il.indexOf(`
`)==-1?[il]:il.split(/\n/gm);for(let Zt=0;Zt<Yl.length;Zt++){let Oa=Yl[Zt];Je?(g.save(),g.translate(f,m+Zt*al),g.rotate(Je),g.fillText(Oa,0,0),g.restore()):g.fillText(Oa,f,m+Zt*al)}}}ve.show&&ws(pl,ve.filter(n,Ne,t,W,Ae),o,r,gt,mt,$e(ve.width*Ve,3),ve.stroke(n,t),ve.dash,ve.cap);let El=s.grid;El.show&&ws(pl,El.filter(n,Ne,t,W,Ae),o,o==0?2:1,o==0?ot:ht,o==0?St:vt,$e(El.width*Ve,3),El.stroke(n,t),El.dash,El.cap),re.show&&ws([gt],[1],o==0?1:0,o==0?1:2,o==1?ot:ht,o==1?St:vt,$e(re.width*Ve,3),re.stroke(n,t),re.dash,re.cap)}zt("drawAxes")}function tn(t){b.forEach((s,r)=>{r>0&&(s._paths=null,t&&(i==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Yn=!1,xs=!1,Tn=[];function br(){xs=!1;for(let t=0;t<Tn.length;t++)zt(...Tn[t]);Tn.length=0}function ln(){Yn||(Wo(ga),Yn=!0)}function yr(t,s=!1){Yn=!0,xs=s,t(n),ga(),s&&Tn.length>0&&queueMicrotask(br)}n.batch=yr;function ga(){if(ul&&(pr(),ul=!1),Wt&&(Lt(),Wt=!1),tl){if(rt(N,fn,Re),rt(N,Ln,Ke),rt(N,Rn,he),rt(N,Fn,z),rt(T,fn,Re),rt(T,Ln,Ke),rt(T,Rn,he),rt(T,Fn,z),rt(_,Rn,Ot),rt(_,Fn,Bt),S.width=Pt(Ot*Ve),S.height=Pt(Bt*Ve),K.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let m=f===3||f===0?r:0,x=f%2==1;rt(t,x?"left":"top",o-m),rt(t,x?"width":"height",r),rt(t,x?"top":"left",x?Ke:Re),rt(t,x?"height":"width",x?z:he),Bs(t,Jl)}else rl(t,Jl)}),Bl=Sl=Xl=en=Wl=Nt=vs=ms=Hl=null,el=1,An(!0),Re!=Ct||Ke!=$t||he!=Dt||z!=Ht){tn(!1);let t=he/Dt,s=z/Ht;if(tt&&!Yt&&B.left>=0){B.left*=t,B.top*=s,nn&&Al(nn,Pt(B.left),0,he,z),sn&&Al(sn,0,Pt(B.top),he,z);for(let r=0;r<H.length;r++){let o=H[r];o!=null&&(O[r]*=t,y[r]*=s,Al(o,vl(O[r]),vl(y[r]),he,z))}}if(at.show&&!ml&&at.left>=0&&at.width>0){at.left*=t,at.width*=t,at.top*=s,at.height*=s;for(let r in Ms)rt(on,r,at[r])}Ct=Re,$t=Ke,Dt=he,Ht=z}zt("setSize"),tl=!1}Ot>0&&Bt>0&&(g.clearRect(0,0,S.width,S.height),zt("drawClear"),Q.forEach(t=>t()),zt("draw")),at.show&&ml&&(Kn(at),ml=!1),tt&&Yt&&(ql(null,!0,!1),Yt=!1),ce.show&&ce.live&&U&&(ks(),U=!1),h||(h=!0,n.status=1,zt("ready")),nl=!1,Yn=!1}n.redraw=(t,s)=>{Wt=s||!1,t!==!1?Ol(C,w.min,w.max):ln()};function bs(t,s){let r=L[t];if(r.from==null){if(Fe==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(Fe>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==C&&r.distr==2&&Fe>0&&(s.min=xl(s.min,l[0]),s.max=xl(s.max,l[0]),s.min==s.max&&s.max++),P[t]=s,ul=!0,ln()}}n.setScale=bs;let ys,Ss,nn,sn,_a,wa,an,rn,xa,ba,st,ct,Fl=!1;const Ut=B.drag;let Gt=Ut.x,It=Ut.y;tt&&(B.x&&(ys=hl(po,T)),B.y&&(Ss=hl(ho,T)),w.ori==0?(nn=ys,sn=Ss):(nn=Ss,sn=ys),st=B.left,ct=B.top);const at=n.select=Et({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),on=at.show?hl(fo,at.over?T:N):null;function Kn(t,s){if(at.show){for(let r in t)at[r]=t[r],r in Ms&&rt(on,r,t[r]);s!==!1&&zt("setSelect")}}n.setSelect=Kn;function Sr(t){if(b[t].show)Me&&Bs(Pe[t],Jl);else if(Me&&rl(Pe[t],Jl),tt){let r=Z?H[0]:H[t];r!=null&&Al(r,-10,-10,he,z)}}function Ol(t,s,r){bs(t,{min:s,max:r})}function kl(t,s,r,o){s.focus!=null&&Ar(t),s.show!=null&&b.forEach((f,m)=>{m>0&&(t==m||t==null)&&(f.show=s.show,Sr(m),i==2?(Ol(f.facets[0].scale,null,null),Ol(f.facets[1].scale,null,null)):Ol(f.scale,null,null),ln())}),r!==!1&&zt("setSeries",t,s),o&&Cn("setSeries",n,t,s)}n.setSeries=kl;function kr(t,s){Et(F[t],s)}function Tr(t,s){t.fill=De(t.fill||null),t.dir=Ie(t.dir,-1),s=s??F.length,F.splice(s,0,t)}function Mr(t){t==null?F.length=0:F.splice(t,1)}n.addBand=Tr,n.setBand=kr,n.delBand=Mr;function Er(t,s){b[t].alpha=s,tt&&H[t]!=null&&(H[t].style.opacity=s),Me&&Pe[t]&&(Pe[t].style.opacity=s)}let Dl,Nl,Ul;const cn={focus:!0};function Ar(t){if(t!=Ul){let s=t==null,r=te.alpha!=1;b.forEach((o,f)=>{if(i==1||f>0){let m=s||f==0||f==t;o._focus=s?null:m,r&&Er(f,m?1:te.alpha)}}),Ul=t,r&&ln()}}Me&&fe&&et(Ba,xe,t=>{B._lock||(Xt(t),Ul!=null&&kl(null,cn,!0,Mt.setSeries))});function Tl(t,s,r){let o=L[s];r&&(t=t/Ve-(o.ori==1?Ke:Re));let f=he;o.ori==1&&(f=z,t=f-t),o.dir==-1&&(t=f-t);let m=o._min,x=o._max,M=t/f,R=m+(x-m)*M,W=o.distr;return W==3?gn(10,R):W==4?Lo(R,o.asinh):W==100?o.bwd(R):R}function Cr(t,s){let r=Tl(t,C,s);return xl(r,l[0],qe,se)}n.valToIdx=t=>xl(t,l[0]),n.posToIdx=Cr,n.posToVal=Tl,n.valToPos=(t,s,r)=>L[s].ori==0?u(t,L[s],r?vt:he,r?ht:0):c(t,L[s],r?St:z,r?ot:0),n.setCursor=(t,s,r)=>{st=t.left,ct=t.top,ql(null,s,r)};function ya(t,s){rt(on,fn,at.left=t),rt(on,Rn,at.width=s)}function Sa(t,s){rt(on,Ln,at.top=t),rt(on,Fn,at.height=s)}let Mn=w.ori==0?ya:Sa,En=w.ori==1?ya:Sa;function Dr(){if(Me&&ce.live)for(let t=i==2?1:0;t<b.length;t++){if(t==0&&ut)continue;let s=ce.values[t],r=0;for(let o in s)Ze[t][r++].firstChild.nodeValue=s[o]}}function ks(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{me[o]=r}):Oo(t.idx)||me.fill(t.idx),ce.idx=me[0]),Me&&ce.live){for(let r=0;r<b.length;r++)(r>0||i==1&&!ut)&&Lr(r,me[r]);Dr()}U=!1,s!==!1&&zt("setLegend")}n.setLegend=ks;function Lr(t,s){let r=b[t],o=t==0&&I==2?Tt:l[t],f;ut?f=r.values(n,t,s)??bt:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?bt:{_:f}),ce.values[t]=f}function ql(t,s,r){xa=st,ba=ct,[st,ct]=B.move(n,st,ct),B.left=st,B.top=ct,tt&&(nn&&Al(nn,Pt(st),0,he,z),sn&&Al(sn,0,Pt(ct),he,z));let o,f=qe>se;Dl=Qe,Nl=null;let m=w.ori==0?he:z,x=w.ori==1?he:z;if(st<0||Fe==0||f){o=B.idx=null;for(let M=0;M<b.length;M++){let R=H[M];R!=null&&Al(R,-10,-10,he,z)}fe&&kl(null,cn,!0,t==null&&Mt.setSeries),ce.live&&(me.fill(o),U=!0)}else{let M,R,W;i==1&&(M=w.ori==0?st:ct,R=Tl(M,C),o=B.idx=xl(R,l[0],qe,se),W=G(l[0][o],w,m,0));let q=-10,X=-10,we=0,ze=0,Ne=!0,Ae="",ve="";for(let re=i==2?1:0;re<b.length;re++){let it=b[re],mt=me[re],Vt=mt==null?null:i==1?l[re][mt]:l[re][1][mt],Je=B.dataIdx(n,re,o,R),gt=Je==null?null:i==1?l[re][Je]:l[re][1][Je];if(U=U||gt!=Vt||Je!=mt,me[re]=Je,re>0&&it.show){let sl=Je==null?-10:Je==o?W:G(i==1?l[0][Je]:l[re][0][Je],w,m,0),jt=gt==null?-10:le(gt,i==1?L[it.scale]:L[it.facets[1].scale],x,0);if(fe&&gt!=null){let dl=w.ori==1?st:ct,gl=Rt(te.dist(n,re,Je,jt,dl));if(gl<Dl){let Ml=te.bias;if(Ml!=0){let al=Tl(dl,it.scale),pl=gt>=0?1:-1,_l=al>=0?1:-1;_l==pl&&(_l==1?Ml==1?gt>=al:gt<=al:Ml==1?gt<=al:gt>=al)&&(Dl=gl,Nl=re)}else Dl=gl,Nl=re}}if(U||Z){let dl,gl;w.ori==0?(dl=sl,gl=jt):(dl=jt,gl=sl);let Ml,al,pl,_l,El,Jt,il=!0,Yl=D.bbox;if(Yl!=null){il=!1;let Zt=Yl(n,re);pl=Zt.left,_l=Zt.top,Ml=Zt.width,al=Zt.height}else pl=dl,_l=gl,Ml=al=D.size(n,re);if(Jt=D.fill(n,re),El=D.stroke(n,re),Z)re==Nl&&Dl<=te.prox&&(q=pl,X=_l,we=Ml,ze=al,Ne=il,Ae=Jt,ve=El);else{let Zt=H[re];Zt!=null&&(O[re]=pl,y[re]=_l,ja(Zt,Ml,al,il),Ya(Zt,Jt,El),Al(Zt,vl(pl),vl(_l),he,z))}}}}if(Z){let re=te.prox,it=Ul==null?Dl<=re:Dl>re||Nl!=Ul;if(U||it){let mt=H[0];mt!=null&&(O[0]=q,y[0]=X,ja(mt,we,ze,Ne),Ya(mt,Ae,ve),Al(mt,vl(q),vl(X),he,z))}}}if(at.show&&Fl)if(t!=null){let[M,R]=Mt.scales,[W,q]=Mt.match,[X,we]=t.cursor.sync.scales,ze=t.cursor.drag;if(Gt=ze._x,It=ze._y,Gt||It){let{left:Ne,top:Ae,width:ve,height:re}=t.select,it=t.scales[X].ori,mt=t.posToVal,Vt,Je,gt,sl,jt,dl=M!=null&&W(M,X),gl=R!=null&&q(R,we);dl&&Gt?(it==0?(Vt=Ne,Je=ve):(Vt=Ae,Je=re),gt=L[M],sl=G(mt(Vt,X),gt,m,0),jt=G(mt(Vt+Je,X),gt,m,0),Mn(bl(sl,jt),Rt(jt-sl))):Mn(0,m),gl&&It?(it==1?(Vt=Ne,Je=ve):(Vt=Ae,Je=re),gt=L[R],sl=le(mt(Vt,we),gt,x,0),jt=le(mt(Vt+Je,we),gt,x,0),En(bl(sl,jt),Rt(jt-sl))):En(0,x)}else Es()}else{let M=Rt(xa-_a),R=Rt(ba-wa);if(w.ori==1){let we=M;M=R,R=we}Gt=Ut.x&&M>=Ut.dist,It=Ut.y&&R>=Ut.dist;let W=Ut.uni;W!=null?Gt&&It&&(Gt=M>=W,It=R>=W,!Gt&&!It&&(R>M?It=!0:Gt=!0)):Ut.x&&Ut.y&&(Gt||It)&&(Gt=It=!0);let q,X;Gt&&(w.ori==0?(q=an,X=st):(q=rn,X=ct),Mn(bl(q,X),Rt(X-q)),It||En(0,x)),It&&(w.ori==1?(q=an,X=st):(q=rn,X=ct),En(bl(q,X),Rt(X-q)),Gt||Mn(0,m)),!Gt&&!It&&(Mn(0,0),En(0,0))}if(Ut._x=Gt,Ut._y=It,t==null){if(r){if(Fa!=null){let[M,R]=Mt.scales;Mt.values[0]=M!=null?Tl(w.ori==0?st:ct,M):null,Mt.values[1]=R!=null?Tl(w.ori==1?st:ct,R):null}Cn(Ps,n,st,ct,he,z,o)}if(fe){let M=r&&Mt.setSeries,R=te.prox;Ul==null?Dl<=R&&kl(Nl,cn,!0,M):Dl>R?kl(null,cn,!0,M):Nl!=Ul&&kl(Nl,cn,!0,M)}}U&&(ce.idx=o,ks()),s!==!1&&zt("setCursor")}let Gl=null;Object.defineProperty(n,"rect",{get(){return Gl==null&&An(!1),Gl}});function An(t=!1){t?Gl=null:(Gl=T.getBoundingClientRect(),zt("syncRect",Gl))}function ka(t,s,r,o,f,m,x){B._lock||Fl&&t!=null&&t.movementX==0&&t.movementY==0||(Ts(t,s,r,o,f,m,x,!1,t!=null),t!=null?ql(null,!0,!0):ql(s,!0,!1))}function Ts(t,s,r,o,f,m,x,M,R){if(Gl==null&&An(!1),Xt(t),t!=null)r=t.clientX-Gl.left,o=t.clientY-Gl.top;else{if(r<0||o<0){st=-10,ct=-10;return}let[W,q]=Mt.scales,X=s.cursor.sync,[we,ze]=X.values,[Ne,Ae]=X.scales,[ve,re]=Mt.match,it=s.axes[0].side%2==1,mt=w.ori==0?he:z,Vt=w.ori==1?he:z,Je=it?m:f,gt=it?f:m,sl=it?o:r,jt=it?r:o;if(Ne!=null?r=ve(W,Ne)?p(we,L[W],mt,0):-10:r=mt*(sl/Je),Ae!=null?o=re(q,Ae)?p(ze,L[q],Vt,0):-10:o=Vt*(jt/gt),w.ori==1){let dl=r;r=o,o=dl}}R&&(s==null||s.cursor.event.type==Ps)&&((r<=1||r>=he-1)&&(r=Kl(r,he)),(o<=1||o>=z-1)&&(o=Kl(o,z))),M?(_a=r,wa=o,[an,rn]=B.move(n,r,o)):(st=r,ct=o)}const Ms={width:0,height:0,left:0,top:0};function Es(){Kn(Ms,!1)}let Ta,Ma,Ea,Aa;function Ca(t,s,r,o,f,m,x){Fl=!0,Gt=It=Ut._x=Ut._y=!1,Ts(t,s,r,o,f,m,x,!0,!1),t!=null&&(et(Rs,zs,Da,!1),Cn(za,n,an,rn,he,z,null));let{left:M,top:R,width:W,height:q}=at;Ta=M,Ma=R,Ea=W,Aa=q}function Da(t,s,r,o,f,m,x){Fl=Ut._x=Ut._y=!1,Ts(t,s,r,o,f,m,x,!1,!0);let{left:M,top:R,width:W,height:q}=at,X=W>0||q>0,we=Ta!=M||Ma!=R||Ea!=W||Aa!=q;if(X&&we&&Kn(at),Ut.setScale&&X&&we){let ze=M,Ne=W,Ae=R,ve=q;if(w.ori==1&&(ze=R,Ne=q,Ae=M,ve=W),Gt&&Ol(C,Tl(ze,C),Tl(ze+Ne,C)),It)for(let re in L){let it=L[re];re!=C&&it.from==null&&it.min!=Qe&&Ol(re,Tl(Ae+ve,re),Tl(Ae,re))}Es()}else B.lock&&(B._lock=!B._lock,ql(s,!0,t!=null));t!=null&&(qt(Rs,zs),Cn(Rs,n,st,ct,he,z,null))}function Pr(t,s,r,o,f,m,x){if(B._lock)return;Xt(t);let M=Fl;if(Fl){let R=!0,W=!0,q=10,X,we;w.ori==0?(X=Gt,we=It):(X=It,we=Gt),X&&we&&(R=st<=q||st>=he-q,W=ct<=q||ct>=z-q),X&&R&&(st=st<an?0:he),we&&W&&(ct=ct<rn?0:z),ql(null,!0,!0),Fl=!1}st=-10,ct=-10,me.fill(null),ql(null,!0,!0),M&&(Fl=M)}function La(t,s,r,o,f,m,x){B._lock||(Xt(t),Vl(),Es(),t!=null&&Cn(Ha,n,st,ct,he,z,null))}function Pa(){K.forEach(Qc),de(n.width,n.height,!0)}Zl(ts,mn,Pa);const un={};un.mousedown=Ca,un.mousemove=ka,un.mouseup=Da,un.dblclick=La,un.setSeries=(t,s,r,o)=>{let f=Mt.match[2];r=f(n,s,r),r!=-1&&kl(r,o,!0,!1)},tt&&(et(za,T,Ca),et(Ps,T,ka),et(Va,T,t=>{Xt(t),An(!1)}),et(Ba,T,Pr),et(Ha,T,La),Ks.add(n),n.syncRect=An);const jn=n.hooks=e.hooks||{};function zt(t,s,r){xs?Tn.push([t,s,r]):t in jn&&jn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)jn[s]=(jn[s]||[]).concat(t.hooks[s])});const Ra=(t,s,r)=>r,Mt=Et({key:null,setSeries:!1,filters:{pub:Xa,sub:Xa},scales:[C,b[1]?b[1].scale:null],match:[ei,ei,Ra],values:[null,null]},B.sync);Mt.match.length==2&&Mt.match.push(Ra),B.sync=Mt;const Fa=Mt.key,As=tr(Fa);function Cn(t,s,r,o,f,m,x){Mt.filters.pub(t,s,r,o,f,m,x)&&As.pub(t,s,r,o,f,m,x)}As.sub(n);function Rr(t,s,r,o,f,m,x){Mt.filters.sub(t,s,r,o,f,m,x)&&un[t](null,s,r,o,f,m,x)}n.pub=Rr;function Fr(){As.unsub(n),Ks.delete(n),At.clear(),Hs(ts,mn,Pa),v.remove(),xe?.remove(),zt("destroy")}n.destroy=Fr;function Cs(){zt("init",e,l),kn(l||e.data,!1),P[C]?bs(C,P[C]):Vl(),ml=at.show&&(at.width>0||at.height>0),Yt=U=!0,de(e.width,e.height)}return b.forEach(ge),K.forEach(lt),a?a instanceof HTMLElement?(a.appendChild(v),Cs()):a(n,Cs):Cs(),n}wt.assign=Et;wt.fmtNum=la;wt.rangeNum=ls;wt.rangeLog=os;wt.rangeAsinh=ea;wt.orient=$l;wt.pxRatio=Ve;wt.join=Ho;wt.fmtDate=sa,wt.tzDate=Xo;wt.sync=tr;{wt.addGap=Oc,wt.clipGaps=fs;let e=wt.paths={points:rr};e.linear=cr,e.stepped=Ic,e.bars=zc,e.spline=Bc}var $c=Oe('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xc=Oe('<span class="estimated-badge svelte-3wi8ix">est</span>'),eu=Oe('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),tu=Oe('<span class="estimated-badge svelte-3wi8ix">est</span>'),lu=Oe("<span> </span> <!>",1),nu=Oe('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),su=Oe('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),au=Oe('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function iu(e,l){as(l,!0);const a=.5,n=1.2,i=0,u=100;function c(w,I){const G=[...w].sort((A,Ce)=>A-Ce),le=I/100*(G.length-1),P=Math.floor(le),J=Math.ceil(le);return P===J?G[P]:G[P]+(G[J]-G[P])*(le-P)}let p=Hn(l,"trend",3,null),h=Ge(!1),v=Ge(""),S=Ge(null),g=Ye(()=>$n.config.temp_units==="C"),_=Ye(Mi),N=Ye(Zs),T=Ye(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(be=>be.status!=="invalid");if(w.length===0)return null;const I=[...w].sort((be,pt)=>new Date(be.timestamp).getTime()-new Date(pt.timestamp).getTime()),G=I[0],le=I[I.length-1],P=I.map(be=>be.sg_calibrated??be.sg_raw).filter(be=>be!==null&&be>=a&&be<=n),J=I.map(be=>be.temp_calibrated??be.temp_raw).filter(be=>be!==null&&be>=i&&be<=u);if(P.length===0)return null;const A=P[P.length-1],Ce=P[0],_e=c(P,95),ue=c(P,5),me=new Date(G.timestamp).getTime(),ce=new Date(le.timestamp).getTime(),Me=(ce-me)/(1e3*60*60*24),tt=Me>0?(A-Ce)/Me:0;let Le=null,xe=null,xt=null,Xe=null;if(J.length>0){const be=J[J.length-1],pt=J.reduce((et,qt)=>et+qt,0)/J.length,yt=c(J,95),At=c(J,5);Le=d(g)?be:be*9/5+32,xe=d(g)?pt:pt*9/5+32,xt=d(g)?yt:yt*9/5+32,Xe=d(g)?At:At*9/5+32}let Pe=0;const Ze=.001;for(let be=P.length-2;be>=0;be--)if(Math.abs(P[be]-A)>Ze){const pt=new Date(I[be+1].timestamp).getTime();Pe=(ce-pt)/(1e3*60*60*24);break}let dt=null,ut=null;const bt=l.originalGravity??_e,kt=l.originalGravity===null;return bt>1&&bt>A&&(dt=(bt-A)/(bt-1)*100,ut=(bt-A)*131.25),{currentSg:A,firstSg:Ce,highSg:_e,lowSg:ue,currentTemp:Le,avgTemp:xe,highTemp:xt,lowTemp:Xe,fermRate:tt,durationDays:Me,daysAtCurrentSg:Pe,apparentAttenuation:dt,abv:ut,ogIsEstimated:kt,effectiveOg:bt}});function Y(){oe(v,l.originalGravity?.toFixed(3)??"",!0),oe(h,!0),setTimeout(()=>d(S)?.focus(),0)}function ee(){const w=d(v).trim();if(!w)l.onOgChange?.(null);else{const I=parseFloat(w);!isNaN(I)&&I>=.99&&I<=1.2&&l.onOgChange?.(I)}oe(h,!1)}function ne(w){w.key==="Enter"?ee():w.key==="Escape"&&oe(h,!1)}function b(w){return hn(w)}function K(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function L(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function F(w){return w===null?"--":w.toFixed(1)}function C(w){return w===null?"--":`${w.toFixed(1)}%`}var ae=Vn(),Q=Ll(ae);{var $=w=>{var I=su(),G=E(I),le=E(G),P=E(le),J=E(P,!0);k(P);var A=V(P,2),Ce=V(E(A),2),_e=E(Ce,!0);k(Ce),k(A);var ue=V(A,2),me=V(E(ue),2),ce=E(me,!0);k(me),k(ue);var B=V(ue,2),Me=V(E(B),2),tt=E(Me,!0);k(Me),k(B);var Le=V(B,2),xe=V(E(Le),2),xt=E(xe,!0);k(xe),k(Le),k(le);var Xe=V(le,2),Pe=V(E(Xe),2),Ze=V(E(Pe),2),dt=E(Ze,!0),ut=V(dt),bt=E(ut,!0);k(ut),k(Ze),k(Pe);var kt=V(Pe,2),be=V(E(kt),2),pt=E(be,!0),yt=V(pt),At=E(yt,!0);k(yt),k(be),k(kt);var et=V(kt,2),qt=V(E(et),2),Ot=E(qt,!0),Bt=V(Ot),he=E(Bt,!0);k(Bt),k(qt),k(et);var z=V(et,2),Re=V(E(z),2),Ke=E(Re,!0),Ct=V(Ke),$t=E(Ct,!0);k(Ct),k(Re),k(z),k(Xe),k(G);var Dt=V(G,2),Ht=E(Dt),ht=V(E(Ht),2);let ot;var vt=E(ht);k(ht),k(Ht);var St=V(Ht,2),ul=V(E(St),2),tl=E(ul,!0);k(ul),k(St);var Wt=V(St,2),Yt=V(E(Wt),2),ml=E(Yt,!0);k(Yt),k(Wt);var U=V(Wt,2),de=V(E(U),2);{var ye=Z=>{var H=$c();Nn(H),H.__keydown=ne,Js(H,O=>oe(S,O),()=>d(S)),yi("blur",H,ee),Ti(H,()=>d(v),O=>oe(v,O)),Te(Z,H)},We=Z=>{var H=Vn(),O=Ll(H);{var y=ge=>{var pe=eu();pe.__click=Y;var Ee=E(pe);let ke;var lt=E(Ee,!0);k(Ee);var Be=V(Ee,2);{var nt=Ue=>{var Fe=Xc();Te(Ue,Fe)};ft(Be,Ue=>{d(T).ogIsEstimated&&Ue(nt)})}Cl(2),k(pe),_t(Ue=>{vn(pe,"title",d(T).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),ke=yl(Ee,1,"stat-value svelte-3wi8ix",null,ke,{estimated:d(T).ogIsEstimated}),Se(lt,Ue)},[()=>b(d(T).effectiveOg)]),Te(ge,pe)},j=ge=>{var pe=lu(),Ee=Ll(pe);let ke;var lt=E(Ee,!0);k(Ee);var Be=V(Ee,2);{var nt=Ue=>{var Fe=tu();Te(Ue,Fe)};ft(Be,Ue=>{d(T).ogIsEstimated&&Ue(nt)})}_t(Ue=>{ke=yl(Ee,1,"stat-value svelte-3wi8ix",null,ke,{estimated:d(T).ogIsEstimated}),Se(lt,Ue)},[()=>b(d(T).effectiveOg)]),Te(ge,pe)};ft(O,ge=>{l.onOgChange?ge(y):ge(j,!1)},!0)}Te(Z,H)};ft(de,Z=>{l.onOgChange&&d(h)?Z(ye):Z(We,!1)})}k(U);var Lt=V(U,2),fl=V(E(Lt),2),Kt=E(fl,!0);k(fl),k(Lt);var ll=V(Lt,2),Xt=V(E(ll),2),D=E(Xt,!0);k(Xt),k(ll);var te=V(ll,2);{var fe=Z=>{var H=nu(),O=V(E(H),2),y=E(O,!0);k(O),Cl(2),k(H),_t((j,ge)=>{vn(H,"title",`Estimated time until target FG (R=${j??""})`),Se(y,ge)},[()=>p().r2.toFixed(2),()=>L(p().daysToFg)]),Te(Z,H)};ft(te,Z=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&Z(fe)})}k(Dt),k(I),_t((Z,H,O,y,j,ge,pe,Ee,ke,lt,Be,nt,Ue)=>{Se(J,d(N)==="SG"?"Gravity":d(N)==="P"?"Plato":"Brix"),Se(_e,Z),Se(ce,H),Se(tt,O),Se(xt,y),Se(dt,j),Se(bt,d(_)),Se(pt,ge),Se(At,d(_)),Se(Ot,pe),Se(he,d(_)),Se(Ke,Ee),Se($t,d(_)),ot=yl(ht,1,"stat-value rate svelte-3wi8ix",null,ot,{fermenting:d(T).fermRate<0}),Se(vt,`${ke??""}/day`),Se(tl,lt),Se(ml,Be),Se(Kt,nt),Se(D,Ue)},[()=>b(d(T).currentSg),()=>b(d(T).firstSg),()=>b(d(T).highSg),()=>b(d(T).lowSg),()=>F(d(T).currentTemp),()=>F(d(T).avgTemp),()=>F(d(T).highTemp),()=>F(d(T).lowTemp),()=>K(d(T).fermRate),()=>L(d(T).durationDays),()=>L(d(T).daysAtCurrentSg),()=>C(d(T).apparentAttenuation),()=>C(d(T).abv)]),Te(w,I)},ie=w=>{var I=au();Te(w,I)};ft(Q,w=>{d(T)?w($):w(ie,!1)})}Te(e,ae),is()}ss(["keydown","click"]);var ru=Oe('<button type="button"> </button>'),ou=Oe("<option> </option>"),cu=Oe('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),uu=Oe('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),fu=Oe('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),du=Oe('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Filtered SG</span></label> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Filtered Temp</span></label> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Anomalies</span></label></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function pu(e,l){as(l,!0);const a="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let i=Ye(()=>$n.config.smoothing_enabled),u=Ye(()=>$n.config.smoothing_samples),c=Ge("UTC"),p=Ge(0),h=Ge(3),v=Hn(l,"deviceColor",3,"BLACK"),S=Hn(l,"originalGravity",3,null),g=Ye(()=>$n.config.temp_units==="C"),_=Ye(Zs),N,T=null,Y=Ge(!0),ee=Ge(null),ne=Ge(24),b=Ge(pn([])),K=Ge(pn([])),L=Ge(pn([])),F=Ge(null),C=Ge(null);const ae={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},Q="#facc15",$="rgba(250, 204, 21, 0.3)",ie="#71717a",w="#a1a1aa",I="rgba(255, 255, 255, 0.04)",G="#22d3ee",le="#a78bfa",P="rgba(250, 204, 21, 0.5)",J="brewsignal_chart_trend_enabled";let A=Ge(!0);const Ce="brewsignal_chart_show_filtered_sg",_e="brewsignal_chart_show_filtered_temp";let ue=Ge(!1),me=Ge(!1);const ce="brewsignal_chart_show_anomaly_markers";let B=Ge(!1),Me=Ge(pn([]));function tt(D,te,fe=1.01){const Z=[];for(let se=0;se<D.length;se++)te[se]!==null&&Z.push([D[se],te[se]]);if(Z.length<10)return null;const H=Z.length;let O=0,y=0,j=0,ge=0;for(const[se,je]of Z)O+=se,y+=je,j+=se*je,ge+=se*se;const pe=H*ge-O*O;if(Math.abs(pe)<1e-10)return null;const Ee=(H*j-O*y)/pe,ke=(y-Ee*O)/H,lt=y/H;let Be=0,nt=0;for(const[se,je]of Z){const Tt=Ee*se+ke;Be+=(je-Tt)**2,nt+=(je-lt)**2}const Ue=nt>0?1-Be/nt:0;let Fe=null,qe=null;if(Ee<0&&Ue>.3){const se=D[D.length-1],je=(fe-ke)/Ee;je>se&&(qe=(je-se)/(1440*60),qe>0&&qe<60?Fe=fe:qe=null)}return{slope:Ee,intercept:ke,r2:Ue,predictedFg:Fe,daysToFg:qe}}function Le(D,te){return D.map(fe=>te.slope*fe+te.intercept)}function xe(D,te,fe){const Z=new Date(D*1e3);try{return fe?Z.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:te}):Z.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:te})}catch(H){return console.warn("Invalid timezone:",te,H),fe?Z.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):Z.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function xt(D,te,fe){const Z=Q,H=ae[v()]||w;return{width:D,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[O=>{const y=O.cursor.idx;if(y==null)return;const j=O.root.querySelector(".u-legend");if(!j)return;let ge="";if(d(B)&&d(Me).length>0){const pe=O.data[0][y];if(pe!=null){const ke=d(Me).find(lt=>Math.abs(lt.timestamp-pe)<300);if(ke){const lt=ke.anomalyScore?.toFixed(3)??"N/A",Be=ke.anomalyReasons??"Unknown";ge=`
										<div style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid var(--border-subtle);">
											<div style="color: #ef4444; font-weight: 600; margin-bottom: 0.25rem;"> ANOMALY</div>
											<div style="color: var(--text-muted);">Score: ${lt}</div>
											<div style="color: var(--text-muted); margin-top: 0.25rem; max-width: 200px; white-space: normal;">${Be}</div>
										</div>
									`}}}if(j.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`,ge){const pe=j.querySelectorAll(".u-series");if(pe.length>0){pe[pe.length-1];const Ee=j.querySelector(".anomaly-info");Ee&&Ee.remove();const ke=document.createElement("div");ke.className="anomaly-info",ke.innerHTML=ge,j.appendChild(ke)}}else{const pe=j.querySelector(".anomaly-info");pe&&pe.remove()}}],draw:[O=>{if(!d(B)||d(Me).length===0)return;const y=O.ctx,{left:j,top:ge,width:pe,height:Ee}=O.bbox;y.save();for(const ke of d(Me)){if(ke.sgValue===null)continue;const lt=O.valToPos(ke.timestamp,"x",!0),Be=O.valToPos(ke.sgValue,"sg",!0);if(lt>=j&&lt<=j+pe&&Be>=ge&&Be<=ge+Ee){y.fillStyle="#ef4444",y.strokeStyle="#991b1b",y.lineWidth=1.5;const nt=8;y.beginPath(),y.moveTo(lt,Be-nt),y.lineTo(lt-nt*.866,Be+nt*.5),y.lineTo(lt+nt*.866,Be+nt*.5),y.closePath(),y.fill(),y.stroke(),y.fillStyle="#ffffff",y.font="bold 8px sans-serif",y.textAlign="center",y.textBaseline="middle",y.fillText("!",lt,Be)}}y.restore()}]},scales:{x:{time:!0},sg:{auto:!0,range:(O,y,j)=>{const ge=(j-y)*.1||.005;return[y-ge,j+ge]}},temp:{auto:!0,range:(O,y,j)=>{const ge=j-y,pe=10;if(ge<pe){const ke=(j+y)/2;return[ke-pe/2,ke+pe/2]}const Ee=ge*.1;return[y-Ee,j+Ee]}}},axes:[{stroke:ie,grid:{stroke:I,width:1},ticks:{stroke:I,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(O,y)=>y.map(j=>xe(j,fe,d(ne)<=24))},{scale:"sg",stroke:Z,grid:{stroke:I,width:1},ticks:{stroke:I,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(O,y)=>y.map(j=>hn(j)),side:3},{scale:"temp",stroke:H,grid:{show:!1},ticks:{stroke:I,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(O,y)=>y.map(j=>j.toFixed(0)+""),side:1}],series:[{value:(O,y)=>xe(y,fe,!1)+" "+xe(y,fe,!0)},{label:d(_)==="SG"?"Gravity":d(_)==="P"?"Plato":"Brix",scale:"sg",stroke:Z,width:2,value:(O,y)=>y!==null?hn(y):"--",fill:(O,y)=>{const j=O.ctx.createLinearGradient(0,O.bbox.top,0,O.bbox.top+O.bbox.height);return j.addColorStop(0,$),j.addColorStop(1,"transparent"),j},points:{show:!1},paths:wt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:H,width:1.5,dash:[4,4],value:(O,y)=>y!==null?y.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:G,width:1.5,dash:[2,4],value:(O,y)=>y!==null?y.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Chamber",scale:"temp",stroke:le,width:1.5,dash:[4,2],value:(O,y)=>y!==null?y.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Filtered SG",show:d(ue),scale:"sg",stroke:Z,width:1.5,dash:[2,2],value:(O,y)=>y!==null?hn(y):"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Filtered Temp",show:d(me),scale:"temp",stroke:H,width:1,dash:[2,2],value:(O,y)=>y!==null?y.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:P,width:2,dash:[8,4],value:(O,y)=>y!==null?hn(y):"--",points:{show:!1},show:d(A)}]}}function Xe(D,te){if(te<=1)return D;const fe=[];for(let Z=0;Z<D.length;Z++){const H=[],O=Math.floor(te/2);for(let y=Math.max(0,Z-O);y<=Math.min(D.length-1,Z+O);y++){const j=D[y];j!==null&&H.push(j)}H.length>0?fe.push(H.reduce((y,j)=>y+j,0)/H.length):fe.push(null)}return fe}function Pe(D,te,fe,Z,H,O,y,j){if(D.length<=j)return[D,te,fe,Z,H,O,y];const ge=Math.ceil(D.length/j),pe=[],Ee=[],ke=[],lt=[],Be=[],nt=[],Ue=[];for(let Fe=0;Fe<D.length;Fe+=ge){const qe=Math.min(Fe+ge,D.length);let se=0,je=0,Tt=0,nl=0,kn=0,Vl=0,Bl=0,Sl=0,Xl=0,Hl=0,en=0,Wl=0;for(let Nt=Fe;Nt<qe;Nt++)te[Nt]!==null&&(se+=te[Nt],je++),fe[Nt]!==null&&(Tt+=fe[Nt],nl++),Z[Nt]!==null&&(kn+=Z[Nt],Vl++),H[Nt]!==null&&(Bl+=H[Nt],Sl++),O[Nt]!==null&&(Xl+=O[Nt],Hl++),y[Nt]!==null&&(en+=y[Nt],Wl++);pe.push(D[Math.floor((Fe+qe-1)/2)]),Ee.push(je>0?se/je:null),ke.push(nl>0?Tt/nl:null),lt.push(Vl>0?kn/Vl:null),Be.push(Sl>0?Bl/Sl:null),nt.push(Hl>0?Xl/Hl:null),Ue.push(Wl>0?en/Wl:null)}return[pe,Ee,ke,lt,Be,nt,Ue]}function Ze(D){return!D.endsWith("Z")&&!D.match(/[+-]\d{2}:\d{2}$/)&&(D=D+"Z"),new Date(D).getTime()/1e3}function dt(D,te,fe){if(D.length===0||te.length===0)return te.map(()=>null);const Z=[...D].sort((y,j)=>Ze(y.timestamp)-Ze(j.timestamp)),H=Z.map(y=>Ze(y.timestamp)),O=Z.map(y=>y.temperature===null?null:fe?y.temperature:y.temperature*9/5+32);return te.map(y=>{let j=null,ge=null;for(let pe=0;pe<H.length;pe++)if(H[pe]<=y&&(j={time:H[pe],temp:O[pe]}),H[pe]>=y&&ge===null){ge={time:H[pe],temp:O[pe]};break}if(j&&ge&&j.temp!==null&&ge.temp!==null){if(j.time===ge.time)return j.temp;const pe=(y-j.time)/(ge.time-j.time);return j.temp+pe*(ge.temp-j.temp)}return j!==null&&j.temp!==null?j.temp:ge!==null&&ge.temp!==null?ge.temp:null})}function ut(D,te,fe,Z){const H=[...D].reverse();let O=[],y=[],j=[];const ge=[];for(const se of H){const je=Ze(se.timestamp);O.push(je);const Tt=se.sg_calibrated??se.sg_raw;y.push(Tt),se.is_anomaly&&ge.push({timestamp:je,sgValue:Tt,anomalyScore:se.anomaly_score??null,anomalyReasons:se.anomaly_reasons??null});const nl=se.temp_calibrated??se.temp_raw;nl!==null?j.push(Z?nl:nl*9/5+32):j.push(null)}oe(Me,ge,!0);let pe=dt(te,O,Z),Ee=dt(fe,O,Z);const ke=new Map(H.filter(se=>se.sg_filtered!==null&&se.sg_filtered!==void 0).map(se=>[Ze(se.timestamp),se.sg_filtered])),lt=new Map(H.filter(se=>se.temp_filtered!==null&&se.temp_filtered!==void 0).map(se=>[Ze(se.timestamp),se.temp_filtered]));let Be=O.map(se=>{const je=ke.get(se);return je!==void 0?je:null}),nt=O.map(se=>{const je=lt.get(se);return je!=null?Z?je:je*9/5+32:null});d(i)&&d(u)>1&&(y=Xe(y,d(u)),j=Xe(j,d(u)),pe=Xe(pe,d(u)),Ee=Xe(Ee,d(u))),[O,y,j,pe,Ee,Be,nt]=Pe(O,y,j,pe,Ee,Be,nt,500);const Fe=tt(O,y);oe(F,Fe,!0);const qe=Fe?Le(O,Fe):O.map(()=>null);return[O,y,j,pe,Ee,Be,nt,qe]}const bt=3e4;async function kt(D=!1){const fe=Date.now()-d(p);if(!(!D&&d(p)>0&&fe<bt)){oe(Y,!0),oe(ee,null);try{if(!d(C)){const Z=await Yr(l.batchId);oe(C,Z.device_id??null,!0)}if(d(C)){const[Z,H,O]=await Promise.all([Kr(d(C),d(ne)),jr(d(ne)).catch(()=>[]),Jr(d(ne)).catch(()=>[])]);oe(b,Z,!0),oe(K,H,!0),oe(L,O,!0),be()}else oe(b,[],!0),oe(K,[],!0),oe(L,[],!0),oe(ee,"No device assigned to this batch")}catch(Z){oe(ee,Z instanceof Error?Z.message:"Failed to load data",!0)}finally{oe(p,Date.now(),!0),oe(Y,!1)}}}function be(){if(!N||d(b).length===0)return;const D=ut(d(b),d(K),d(L),d(g)),te=xt(N.clientWidth,d(g),d(c));T&&T.destroy(),T=new wt(te,D,N)}function pt(){T&&N&&T.setSize({width:N.clientWidth,height:220})}let yt=null;function At(){if(yt&&(clearInterval(yt),yt=null),d(h)>0){const D=d(h)*60*1e3;yt=setInterval(()=>{d(Y)||kt(!1)},D)}}Si(async()=>{const D=localStorage.getItem(a);if(D!==null){const O=parseInt(D,10);Number.isNaN(O)||oe(h,O,!0)}const te=localStorage.getItem(J);te!==null&&oe(A,te==="true");const fe=localStorage.getItem(Ce);fe!==null&&oe(ue,fe==="true");const Z=localStorage.getItem(_e);Z!==null&&oe(me,Z==="true");const H=localStorage.getItem(ce);H!==null&&oe(B,H==="true");try{const O=await fetch("/api/system/timezone");if(O.ok){const y=await O.json();oe(c,y.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await kt(!0),window.addEventListener("resize",pt),At()}),zr(()=>{T?.destroy(),window.removeEventListener("resize",pt),yt&&clearInterval(yt)}),Is(()=>{d(g)!==void 0&&d(b).length>0&&N&&be()}),Is(()=>{d(i),d(u),d(b).length>0&&N&&be()});function et(D){const te=Number(D.target.value);oe(h,te,!0),localStorage.setItem(a,String(te)),At(),kt(!0)}function qt(){oe(A,!d(A)),localStorage.setItem(J,String(d(A))),be()}function Ot(){d(b).length>0&&N&&be()}var Bt=du(),he=E(Bt),z=E(he);Bn(z,21,()=>qr,es,(D,te)=>{var fe=ru();let Z;fe.__click=()=>{d(ne)!==d(te).hours&&(oe(ne,d(te).hours,!0),kt(!0))};var H=E(fe,!0);k(fe),_t(()=>{Z=yl(fe,1,"range-btn svelte-12kwequ",null,Z,{active:d(ne)===d(te).hours}),Se(H,d(te).label)}),Te(D,fe)}),k(z);var Re=V(z,2),Ke=E(Re),Ct=V(E(Ke),2);Ct.__change=et,Bn(Ct,21,()=>n,es,(D,te)=>{var fe=ou(),Z=E(fe,!0);k(fe);var H={};_t(()=>{Se(Z,d(te).label),H!==(H=d(te).value)&&(fe.value=(fe.__value=d(te).value)??"")}),Te(D,fe)}),k(Ct);var $t;Xr(Ct),k(Ke);var Dt=V(Ke,2),Ht=V(E(Dt),2),ht=E(Ht);Cl(2),k(Ht);var ot=V(Ht,4);let vt;ot.__click=qt;var St=E(ot);Gn(St,"background: rgba(250, 204, 21, 0.5);"),Cl(2),k(ot);var ul=V(ot,2),tl=E(ul);Nn(tl),tl.__change=()=>{localStorage.setItem(Ce,String(d(ue))),Ot()},Cl(2),k(ul);var Wt=V(ul,2),Yt=E(Wt);Nn(Yt),Yt.__change=()=>{localStorage.setItem(_e,String(d(me))),Ot()},Cl(2),k(Wt);var ml=V(Wt,2),U=E(ml);Nn(U),U.__change=()=>{localStorage.setItem(ce,String(d(B))),Ot()},Cl(2),k(ml),k(Dt),k(Re),k(he);var de=V(he,2),ye=E(de);{var We=D=>{var te=cu();Te(D,te)};ft(ye,D=>{d(Y)&&D(We)})}var Lt=V(ye,2);{var fl=D=>{var te=uu(),fe=V(E(te),2);fe.__click=()=>kt(!0),k(te),Te(D,te)},Kt=D=>{var te=Vn(),fe=Ll(te);{var Z=H=>{var O=fu();Te(H,O)};ft(fe,H=>{d(b).length===0&&H(Z)},!0)}Te(D,te)};ft(Lt,D=>{d(ee)?D(fl):D(Kt,!1)})}k(de),Js(de,D=>N=D,()=>N);var ll=V(de,2);{var Xt=D=>{{let te=Ye(()=>d(F)?{predictedFg:d(F).predictedFg,daysToFg:d(F).daysToFg,r2:d(F).r2}:null);iu(D,{get readings(){return d(b)},get originalGravity(){return S()},get trend(){return d(te)}})}};ft(ll,D=>{d(b).length>0&&D(Xt)})}k(Bt),_t(()=>{$t!==($t=d(h))&&(Ct.value=(Ct.__value=d(h))??"",eo(Ct,d(h))),Gn(ht,`background: ${(ae[v()]||"var(--text-secondary)")??""};`),vt=yl(ot,1,"legend-item legend-toggle svelte-12kwequ",null,vt,{"legend-disabled":!d(A)}),vn(ot,"title",d(A)?"Hide trend line":"Show trend line")}),Ds(tl,()=>d(ue),D=>oe(ue,D)),Ds(Yt,()=>d(me),D=>oe(me,D)),Ds(U,()=>d(B),D=>oe(B,D)),Te(e,Bt),is()}ss(["click","change"]);var hu=Oe('<span class="error-message svelte-1k5rb4o"> </span>'),vu=Oe('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),mu=Oe('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),gu=Oe('<div class="w-1 rounded-sm transition-all"></div>'),_u=Oe('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),wu=Oe(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),xu=Oe('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),bu=Oe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),yu=Oe("<div><!></div>"),Su=Oe('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),ku=Oe('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function Tu(e,l){as(l,!0);let a=Hn(l,"expanded",3,!1),n=Hn(l,"wide",3,!1),i=Ye(()=>l.batch.device_id?ki.tilts.get(l.batch.device_id)??null:null),u=Ye(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),c=Ye(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=Ye(()=>l.progress?.temperature?.current??null),h=Ye(()=>d(i)?.color??"BLACK"),v=Ye(()=>d(i)?.rssi??null),S=Ye(()=>d(i)?.paired??!0),g=Ye(()=>d(i)?.last_seen??new Date().toISOString()),_=Ye(()=>d(i)?.sg_raw??d(c)),N=Ye(()=>d(i)?.temp_raw??d(p)),T=Ge(!1);Is(()=>{a()&&!d(T)&&oe(T,!0)});let Y=Ge(!1),ee=Ge(""),ne=Ge(null),b=Ge(!1),K=Ge(null);function L(){oe(ee,d(u),!0),oe(Y,!0),oe(K,null),setTimeout(()=>d(ne)?.focus(),0)}async function F(){if(d(b))return;const U=d(ee).trim();if(!U||U===d(u)){oe(Y,!1),oe(K,null);return}oe(b,!0),oe(K,null);try{await Zr(l.batch.id,{name:U}),oe(Y,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(de){console.error("Failed to update batch name:",de),oe(K,de instanceof Error?de.message:"Failed to save batch name",!0)}finally{oe(b,!1)}}function C(U){U.key==="Enter"?F():U.key==="Escape"&&oe(Y,!1)}let ae=Ye(Mi),Q=Ye(Zs);const $={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function ie(U){return hn(U)}function w(U){return Ur(U)}function I(U){return U>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:U>=-60?{bars:3,color:"var(--positive)",label:"Good"}:U>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function G(U){const de=Math.floor((Date.now()-new Date(U).getTime())/1e3);if(de<10)return"just now";if(de<60)return`${de}s ago`;const ye=Math.floor(de/60);if(ye<60)return`${ye}m ago`;const We=Math.floor(ye/60);return We<24?`${We}h ago`:`${Math.floor(We/24)}d ago`}let le=Ye(()=>$[d(h)]||"var(--tilt-black)"),P=Ye(()=>d(v)!==null?I(d(v)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),J=Ye(()=>G(d(g)));var A=ku();let Ce;var _e=E(A),ue=V(_e,2),me=E(ue),ce=E(me),B=E(ce);{var Me=U=>{var de=vu(),ye=E(de);Nn(ye),ye.__keydown=C;let We;Js(ye,Kt=>oe(ne,Kt),()=>d(ne));var Lt=V(ye,2);{var fl=Kt=>{var ll=hu(),Xt=E(ll,!0);k(ll),_t(()=>Se(Xt,d(K))),Te(Kt,ll)};ft(Lt,Kt=>{d(K)&&Kt(fl)})}k(de),_t(()=>{ye.disabled=d(b),We=yl(ye,1,"beer-name-input svelte-1k5rb4o",null,We,{error:d(K)})}),yi("blur",ye,F),Ti(ye,()=>d(ee),Kt=>oe(ee,Kt)),Te(U,de)},tt=U=>{var de=mu();de.__click=L;var ye=E(de),We=E(ye,!0);k(ye),Cl(2),k(de),_t(()=>Se(We,d(u))),Te(U,de)};ft(B,U=>{d(Y)?U(Me):U(tt,!1)})}var Le=V(B,2),xe=E(Le),xt=V(xe,2),Xe=E(xt,!0);k(xt),k(Le),k(ce);var Pe=V(ce,2),Ze=E(Pe),dt=E(Ze);Bn(dt,20,()=>Array(4),es,(U,de,ye)=>{var We=gu();_t(()=>Gn(We,`
									height: ${8+ye*4}px;
									background: ${(ye<d(P).bars?d(P).color:"var(--bg-hover)")??""};
									opacity: ${ye<d(P).bars?1:.4};
								`)),Te(U,We)}),k(dt);var ut=V(dt,2),bt=E(ut);k(ut),k(Ze);var kt=V(Ze,2);{var be=U=>{var de=_u();Te(U,de)};ft(kt,U=>{d(S)||U(be)})}k(Pe),k(me);var pt=V(me,2),yt=E(pt),At=E(yt),et=E(At,!0),qt=V(et),Ot=E(qt,!0);k(qt),k(At);var Bt=V(At,2),he=E(Bt,!0);k(Bt),k(yt);var z=V(yt,2),Re=E(z),Ke=E(Re);{var Ct=U=>{var de=wu(),ye=Ll(de,!0),We=V(ye),Lt=E(We,!0);k(We),_t(fl=>{Se(ye,fl),Se(Lt,d(ae))},[()=>w(d(p))]),Te(U,de)},$t=U=>{var de=xu(),ye=V(Ll(de)),We=E(ye,!0);k(ye),_t(()=>Se(We,d(ae))),Te(U,de)};ft(Ke,U=>{d(p)!==null?U(Ct):U($t,!1)})}k(Re),Cl(2),k(z),k(pt);var Dt=V(pt,2);{var Ht=U=>{var de=bu(),ye=V(E(de),2),We=E(ye,!0);k(ye);var Lt=V(ye,4),fl=E(Lt);k(Lt),k(de),_t((Kt,ll)=>{Se(We,Kt),Se(fl,`${ll??""}${d(ae)??""}`)},[()=>ie(d(_)),()=>d(N)!==null?w(d(N)):"--"]),Te(U,de)};ft(Dt,U=>{(d(c)!==d(_)||d(p)!==d(N))&&d(i)&&U(Ht)})}var ht=V(Dt,2);{var ot=U=>{var de=yu();let ye;var We=E(de);to(We,()=>l.batch.id,Lt=>{pu(Lt,{get batchId(){return l.batch.id},get deviceColor(){return d(h)},get originalGravity(){return l.batch.measured_og}})}),k(de),_t(()=>ye=yl(de,1,"chart-section svelte-1k5rb4o",null,ye,{hidden:!a()})),Te(U,de)};ft(ht,U=>{d(T)&&U(ot)})}var vt=V(ht,2),St=E(vt),ul=E(St);k(St);var tl=V(St,2),Wt=E(tl),Yt=V(Wt,2);{var ml=U=>{var de=Su();de.__click=function(...Lt){l.onToggleExpand?.apply(this,Lt)};var ye=E(de);let We;k(de),_t(()=>{vn(de,"aria-label",a()?"Collapse chart":"Expand chart"),We=yl(ye,0,"w-4 h-4 transition-transform",null,We,{"rotate-180":a()})}),Te(U,de)};ft(Yt,U=>{l.onToggleExpand&&U(ml)})}Cl(2),k(tl),k(vt),k(ue),k(A),_t(U=>{Ce=yl(A,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,Ce,{expanded:a(),wide:n()}),Gn(_e,`background: ${d(le)??""};`),Gn(xe,`background: ${d(le)??""};`),Se(Xe,d(h)),vn(Ze,"title",`${d(P).label??""} signal (${d(v)??"N/A"??""} dBm)`),Se(bt,`${d(v)??"N/A"??""} dBm`),Se(et,U),Se(Ot,d(Q)!=="SG"?d(Q):""),Se(he,d(Q)==="SG"?"Gravity":d(Q)==="P"?"Plato":"Brix"),Se(ul,`Updated ${d(J)??""}`),vn(Wt,"href",`/batches/${l.batch.id??""}`)},[()=>ie(d(c))]),Te(e,A),is()}ss(["keydown","click"]);var Mu=Oe('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Eu=Oe('<div class="alerts-list svelte-1uha8ag"></div>'),Au=Oe('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Cu=Oe('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Du=Oe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Lu=Oe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Pu=Oe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Ru=Oe("<div></div>"),Fu=Oe("<!> <!>",1);function Qu(e,l){as(l,!0);let a=Ge(!1),n=Ge(!1),i=Ge(pn([])),u=Ge(pn(new Map)),c=Ge(!0),p=Ge(null);Si(async()=>{const F=localStorage.getItem("brewsignal_alerts_dismissed"),C=localStorage.getItem("brewsignal_alerts_dismissed_time");F==="true"&&C&&Date.now()-parseInt(C,10)<360*60*1e3&&oe(a,!0),await h()});async function h(){oe(c,!0),oe(p,null);try{const F=await Qr();oe(i,F.filter($=>$.status==="fermenting"||$.status==="conditioning"),!0);const C=d(i).map(async $=>{try{const ie=await $r($.id);return[$.id,ie]}catch{return null}}),ae=await Promise.all(C),Q=new Map;for(const $ of ae)$&&Q.set($[0],$[1]);oe(u,Q,!0)}catch(F){oe(p,F instanceof Error?F.message:"Failed to load batches",!0)}finally{oe(c,!1)}}let v=Ye(()=>new Map(d(i).filter(F=>F.device_id&&(F.status==="fermenting"||F.status==="conditioning")).map(F=>[F.device_id,F.id]))),S=Ye(()=>{const F=new Map(d(u));for(const[C,ae]of d(v)){const Q=ki.tilts.get(C);if(Q){const $=F.get(ae)||{batch_id:ae,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}};F.set(ae,{...$,measured:{...$.measured,current_sg:Q.sg},temperature:{...$.temperature,current:Q.temp,status:$.temperature.yeast_min!==void 0&&$.temperature.yeast_max!==void 0?Q.temp<$.temperature.yeast_min?"too_cold":Q.temp>$.temperature.yeast_max?"too_hot":"in_range":$.temperature.status}})}}return F}),g=Ge(null);function _(F){oe(g,d(g)===F?null:F,!0)}function N(){oe(a,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function T(){oe(n,!d(n))}var Y=Fu();Wr("1uha8ag",F=>{Vr(()=>{Br.title="Dashboard | BrewSignal"})});var ee=Ll(Y);{var ne=F=>{var C=Cu(),ae=E(C),Q=E(ae),$=V(E(Q),4),ie=E($,!0);k($),k(Q);var w=V(Q,2);w.__click=N,k(ae);var I=V(ae,2);{var G=J=>{var A=Eu();Bn(A,21,()=>Dn.alerts,es,(Ce,_e)=>{var ue=Mu();let me;var ce=E(ue),B=E(ce);k(ce);var Me=V(ce,2),tt=E(Me,!0);k(Me),k(ue),_t(()=>{me=yl(ue,1,"alert-item svelte-1uha8ag",null,me,{warning:d(_e).level==="warning",critical:d(_e).level==="critical"}),Se(B,`${d(_e).day??""}:`),Se(tt,d(_e).message)}),Te(Ce,ue)}),k(A),Te(J,A)};ft(I,J=>{d(n)||J(G)})}var le=V(I,2);{var P=J=>{var A=Au();A.__click=T;var Ce=E(A,!0);k(A),_t(()=>Se(Ce,d(n)?`Show ${Dn.alerts.length} alerts`:"Show less")),Te(J,A)};ft(le,J=>{Dn.alerts.length>3&&J(P)})}k(C),_t(()=>Se(ie,Dn.alerts.length)),Te(F,C)};ft(ee,F=>{Dn.alerts.length>0&&!d(a)&&F(ne)})}var b=V(ee,2);{var K=F=>{var C=Du();Te(F,C)},L=F=>{var C=Vn(),ae=Ll(C);{var Q=ie=>{var w=Lu(),I=V(E(w),4),G=E(I,!0);k(I),k(w),_t(()=>Se(G,d(p))),Te(ie,w)},$=ie=>{var w=Vn(),I=Ll(w);{var G=P=>{var J=Pu();Te(P,J)},le=P=>{var J=Ru();let A;Bn(J,21,()=>d(i),Ce=>Ce.id,(Ce,_e)=>{{let ue=Ye(()=>d(S).get(d(_e).id)),me=Ye(()=>d(g)===d(_e).id),ce=Ye(()=>d(i).length===1);Tu(Ce,{get batch(){return d(_e)},get progress(){return d(ue)},get expanded(){return d(me)},get wide(){return d(ce)},onToggleExpand:()=>_(d(_e).id),onBatchUpdated:h})}}),k(J),_t(()=>A=yl(J,1,"tilt-grid svelte-1uha8ag",null,A,{"single-tilt":d(i).length===1})),Te(P,J)};ft(I,P=>{d(i).length===0?P(G):P(le,!1)},!0)}Te(ie,w)};ft(ae,ie=>{d(p)?ie(Q):ie($,!1)},!0)}Te(F,C)};ft(b,F=>{d(c)?F(K):F(L,!1)})}Te(e,Y),is()}ss(["click"]);export{Qu as component};
