import{d as Qn,c as Ln,a as xe,f as De,s as _e,e as xa}from"../chunks/BQ88CgEU.js";import{o as Fr,R as Or,b7 as Nr,b as Gr,ah as Xn,ar as kl,c as d,ai as Be,aj as $n,al as C,an as A,ak as W,ao as Ne,as as ht,s as re,at as Hl,p as Bl,ap as ba,aL as zr,aq as Un,e as Vr,am as Ir}from"../chunks/CGXqq0_G.js";import{e as Pn,i as Kn}from"../chunks/payu-7ZH.js";import{B as Br,i as rt}from"../chunks/ziKwUJ4R.js";import{h as Hr}from"../chunks/BP8qDDK3.js";import{s as ml}from"../chunks/DqcjHxzZ.js";import{t as ya}from"../chunks/DThvY6M2.js";import{w as bn}from"../chunks/BwsdUUZq.js";import{r as Sa,s as sn}from"../chunks/D2zVhfuI.js";import{s as Mn}from"../chunks/BSw_pJTS.js";import{b as ka}from"../chunks/CL9D8AtU.js";import{b as qs}from"../chunks/C39ACuyu.js";import{p as an}from"../chunks/B3wItnqC.js";import{c as Yn,d as An,b as Ks,g as Ta,e as Wr}from"../chunks/Dq6yox8V.js";import{T as Ur,o as Yr,q as qr,s as Kr,t as jr,u as Jr,v as Zr,w as Qr,g as Xr}from"../chunks/CIWF638Y.js";import{i as $r,s as eo}from"../chunks/C5J5lxM1.js";function to(e,l,i){Fr&&Or();var n=new Br(e),a=!Nr();Gr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const lo=!0,Ct="u-",no="uplot",so=Ct+"hz",io=Ct+"vt",ao=Ct+"title",ro=Ct+"wrap",oo=Ct+"under",uo=Ct+"over",co=Ct+"axis",Il=Ct+"off",fo=Ct+"select",po=Ct+"cursor-x",ho=Ct+"cursor-y",vo=Ct+"cursor-pt",go=Ct+"legend",mo=Ct+"live",_o=Ct+"inline",wo=Ct+"series",xo=Ct+"marker",Fi=Ct+"label",bo=Ct+"value",kn="width",Tn="height",yn="top",Oi="bottom",ln="left",Cs="right",js="#000",Ni=js+"0",Ds="mousemove",Gi="mousedown",Ls="mouseup",zi="mouseenter",Vi="mouseleave",Ii="dblclick",yo="resize",So="scroll",Bi="change",jn="dppxchange",Js="--",dn=typeof window<"u",Ns=dn?document:null,rn=dn?window:null,ko=dn?navigator:null;let Oe,Bn;function Gs(){let e=devicePixelRatio;Oe!=e&&(Oe=e,Bn&&Vs(Bi,Bn,Gs),Bn=matchMedia(`(min-resolution: ${Oe-.001}dppx) and (max-resolution: ${Oe+.001}dppx)`),Wl(Bi,Bn,Gs),rn.dispatchEvent(new CustomEvent(jn)))}function tl(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function zs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function et(e,l,i){e.style[l]=i+"px"}function hl(e,l,i,n){let a=Ns.createElement(e);return l!=null&&tl(a,l),i?.insertBefore(a,n),a}function rl(e,l){return hl("div",e,l)}const Hi=new WeakMap;function yl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Hi.get(e);c!=u&&(e.style.transform=c,Hi.set(e,c),l<0||i<0||l>n||i>a?tl(e,Il):zs(e,Il))}const Wi=new WeakMap;function Ui(e,l,i){let n=l+i,a=Wi.get(e);n!=a&&(Wi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Yi=new WeakMap;function qi(e,l,i,n){let a=l+""+i,c=Yi.get(e);a!=c&&(Yi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Zs={passive:!0},To={...Zs,capture:!0};function Wl(e,l,i,n){l.addEventListener(e,i,n?To:Zs)}function Vs(e,l,i,n){l.removeEventListener(e,i,Zs)}dn&&Gs();function vl(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:ll((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ea(e){return(i,n,a)=>{let c=-1,u=-1;for(let p=n;p<=a;p++)if(e(i[p])){c=p;break}for(let p=a;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const Ma=e=>e!=null,Aa=e=>e!=null&&e>0,es=Ea(Ma),Eo=Ea(Aa);function Mo(e,l,i,n=0,a=!1){let c=a?Eo:es,u=a?Aa:Ma;[l,i]=c(e,l,i);let p=e[l],h=e[l];if(l>-1)if(n==1)p=e[l],h=e[i];else if(n==-1)p=e[i],h=e[l];else for(let v=l;v<=i;v++){let S=e[v];u(S)&&(S<p?p=S:S>h&&(h=S))}return[p??qe,h??-qe]}function ts(e,l,i,n){let a=Ji(e),c=Ji(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?Tl:Ca,p=a==1?ll:ol,h=c==1?ol:ll,v=p(u(At(e))),S=h(u(At(l))),m=on(i,v),_=on(i,S);return i==10&&(v<0&&(m=Ke(m,-v)),S<0&&(_=Ke(_,-S))),n||i==2?(e=m*a,l=_*c):(e=Ra(e,m),l=ls(l,_)),[e,l]}function Qs(e,l,i,n){let a=ts(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Xs=.1,Ki={mode:3,pad:Xs},Cn={pad:0,soft:null,mode:0},Ao={min:Cn,max:Cn};function Jn(e,l,i,n){return ns(i)?ji(e,l,i):(Cn.pad=i,Cn.soft=n?0:null,Cn.mode=n?3:0,ji(e,l,Ao))}function Re(e,l){return e??l}function Co(e,l,i){for(l=Re(l,0),i=Re(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function ji(e,l,i){let n=i.min,a=i.max,c=Re(n.pad,0),u=Re(a.pad,0),p=Re(n.hard,-qe),h=Re(a.hard,qe),v=Re(n.soft,qe),S=Re(a.soft,-qe),m=Re(n.mode,0),_=Re(a.mode,0),H=l-e,k=Tl(H),q=jt(At(e),At(l)),$=Tl(q),se=At($-k);(H<1e-24||se>10)&&(H=0,(e==0||l==0)&&(H=1e-24,m==2&&v!=qe&&(c=0),_==2&&S!=-qe&&(u=0)));let y=H||q||1e3,K=Tl(y),D=on(10,ll(K)),P=y*(H==0?e==0?.1:1:c),L=Ke(Ra(e-P,D/10),24),ne=e>=v&&(m==1||m==3&&L<=v||m==2&&L>=v)?v:qe,ee=jt(p,L<ne&&e>=ne?ne:gl(ne,L)),J=y*(H==0?l==0?.1:1:u),te=Ke(ls(l+J,D/10),24),w=l<=S&&(_==1||_==3&&te>=S||_==2&&te<=S)?S:-qe,I=gl(h,te>w&&l<=w?w:jt(w,te));return ee==I&&ee==0&&(I=100),[ee,I]}const Do=new Intl.NumberFormat(dn?ko.language:"en-US"),$s=e=>Do.format(e),nl=Math,qn=nl.PI,At=nl.abs,ll=nl.floor,Mt=nl.round,ol=nl.ceil,gl=nl.min,jt=nl.max,on=nl.pow,Ji=nl.sign,Tl=nl.log10,Ca=nl.log2,Lo=(e,l=1)=>nl.sinh(e)*l,Ps=(e,l=1)=>nl.asinh(e/l),qe=1/0;function Zi(e){return(Tl((e^e>>31)-(e>>31))|0)+1}function Is(e,l,i){return gl(jt(e,l),i)}function Da(e){return typeof e=="function"}function Te(e){return Da(e)?e:()=>e}const Po=()=>{},La=e=>e,Pa=(e,l)=>l,Ro=e=>null,Qi=e=>!0,Xi=(e,l)=>e==l,Fo=/\.\d*?(?=9{6,}|0{6,})/gm,Ul=e=>{if(Oa(e)||Rl.has(e))return e;const l=`${e}`,i=l.match(Fo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Ul(a)}e${c}`}return Ke(e,n)};function zl(e,l){return Ul(Ke(Ul(e/l))*l)}function ls(e,l){return Ul(ol(Ul(e/l))*l)}function Ra(e,l){return Ul(ll(Ul(e/l))*l)}function Ke(e,l=0){if(Oa(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return Mt(n)/i}const Rl=new Map;function Fa(e){return((""+e).split(".")[1]||"").length}function Rn(e,l,i,n){let a=[],c=n.map(Fa);for(let u=l;u<i;u++){let p=At(u),h=Ke(on(e,u),p);for(let v=0;v<n.length;v++){let S=e==10?+`${n[v]}e${u}`:n[v]*h,m=(u>=0?0:p)+(u>=c[v]?0:c[v]),_=e==10?S:Ke(S,m);a.push(_),Rl.set(_,m)}}return a}const Dn={},ei=[],un=[null,null],Pl=Array.isArray,Oa=Number.isInteger,Oo=e=>e===void 0;function $i(e){return typeof e=="string"}function ns(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function No(e){return e!=null&&typeof e=="object"}const Go=Object.getPrototypeOf(Uint8Array),Na="__proto__";function cn(e,l=ns){let i;if(Pl(e)){let n=e.find(a=>a!=null);if(Pl(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=cn(e[a],l)}else i=e.slice()}else if(e instanceof Go)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Na&&(i[n]=cn(e[n],l))}else i=e;return i}function bt(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Na&&(ns(e[a])?bt(e[a],cn(n[a])):e[a]=cn(n[a]))}return e}const zo=0,Vo=1,Io=2;function Bo(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Ho(e,l){if(Yo(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return qo(u[0])||(u=Uo(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let h=e[u][0],v=h.length;for(let S=0;S<v;S++)i.add(h[S])}let n=[Array.from(i).sort((u,p)=>u-p)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],h=p[0];for(let v=1;v<p.length;v++){let S=p[v],m=Array(a).fill(void 0),_=l?l[u][v]:Vo,H=[];for(let k=0;k<S.length;k++){let q=S[k],$=c.get(h[k]);q===null?_!=zo&&(m[$]=q,_==Io&&H.push($)):m[$]=q}Bo(m,H,a),n.push(m)}}return n}const Wo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Uo(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let h=0;h<i;h++)p[h]=u[n[h]];a.push(p)}return a}function Yo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function qo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=jt(1,ll((a-n+1)/l));for(let u=e[n],p=n+c;p<=a;p+=c){const h=e[p];if(h!=null){if(h<=u)return!1;u=h}}return!0}const Ga=["January","February","March","April","May","June","July","August","September","October","November","December"],za=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Va(e){return e.slice(0,3)}const Ko=za.map(Va),jo=Ga.map(Va),Jo={MMMM:Ga,MMM:jo,WWWW:za,WWW:Ko};function Sn(e){return(e<10?"0":"")+e}function Zo(e){return(e<10?"00":e<100?"0":"")+e}const Qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>Sn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>Sn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>Sn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>Sn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>Sn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Zo(e.getMilliseconds())};function ti(e,l){l=l||Jo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?Qo[a[1]]:a[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Xo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function $o(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Xo?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ia=e=>e%1==0,Zn=[1,2,2.5,5],eu=Rn(10,-32,0,Zn),Ba=Rn(10,0,32,Zn),tu=Ba.filter(Ia),Vl=eu.concat(Ba),li=`
`,Ha="{YYYY}",ea=li+Ha,Wa="{M}/{D}",En=li+Wa,Hn=En+"/{YY}",Ua="{aa}",lu="{h}:{mm}",nn=lu+Ua,ta=li+nn,la=":{ss}",ze=null;function Ya(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,h=(e==1?Rn(10,0,3,Zn).filter(Ia):Rn(10,-3,0,Zn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const v=[[u,Ha,ze,ze,ze,ze,ze,ze,1],[a*28,"{MMM}",ea,ze,ze,ze,ze,ze,1],[a,Wa,ea,ze,ze,ze,ze,ze,1],[n,"{h}"+Ua,Hn,ze,En,ze,ze,ze,1],[i,nn,Hn,ze,En,ze,ze,ze,1],[l,la,Hn+" "+nn,ze,En+" "+nn,ze,ta,ze,1],[e,la+".{fff}",Hn+" "+nn,ze,En+" "+nn,ze,ta,ze,1]];function S(m){return(_,H,k,q,$,se)=>{let y=[],K=$>=u,D=$>=c&&$<u,P=m(k),L=Ke(P*e,3),ne=Rs(P.getFullYear(),K?0:P.getMonth(),D||K?1:P.getDate()),ee=Ke(ne*e,3);if(D||K){let J=D?$/c:0,te=K?$/u:0,w=L==ee?L:Ke(Rs(ne.getFullYear()+te,ne.getMonth()+J,1)*e,3),I=new Date(Mt(w/e)),N=I.getFullYear(),le=I.getMonth();for(let O=0;w<=q;O++){let Z=Rs(N+te*O,le+J*O,1),R=Z-m(Ke(Z*e,3));w=Ke((+Z+R)*e,3),w<=q&&y.push(w)}}else{let J=$>=a?a:$,te=ll(k)-ll(L),w=ee+te+ls(L-ee,J);y.push(w);let I=m(w),N=I.getHours()+I.getMinutes()/i+I.getSeconds()/n,le=$/n,O=_.axes[H]._space,Z=se/O;for(;w=Ke(w+$,e==1?0:3),!(w>q);)if(le>1){let R=ll(Ke(N+le,6))%24,ue=m(w).getHours()-R;ue>1&&(ue=-1),w-=ue*n,N=(N+le)%24;let ge=y[y.length-1];Ke((w-ge)/$,3)*Z>=.7&&y.push(w)}else y.push(w)}return y}}return[h,v,S]}const[nu,su,iu]=Ya(1),[au,ru,ou]=Ya(.001);Rn(2,-53,53,[1]);function na(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function sa(e,l){return(i,n,a,c,u)=>{let p=l.find(k=>u>=k[0])||l[l.length-1],h,v,S,m,_,H;return n.map(k=>{let q=e(k),$=q.getFullYear(),se=q.getMonth(),y=q.getDate(),K=q.getHours(),D=q.getMinutes(),P=q.getSeconds(),L=$!=h&&p[2]||se!=v&&p[3]||y!=S&&p[4]||K!=m&&p[5]||D!=_&&p[6]||P!=H&&p[7]||p[1];return h=$,v=se,S=y,m=K,_=D,H=P,L(q)})}}function uu(e,l){let i=ti(l);return(n,a,c,u,p)=>a.map(h=>i(e(h)))}function Rs(e,l,i){return new Date(e,l,i)}function ia(e,l){return l(e)}const cu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function aa(e,l){return(i,n,a,c)=>c==null?Js:l(e(n))}function fu(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function du(e,l){return e.series[l].fill(e,l)}const pu={show:!0,live:!0,isolate:!1,mount:Po,markers:{show:!0,width:2,stroke:fu,fill:du,dash:"solid"},idx:null,idxs:null,values:[]};function hu(e,l){let i=e.cursor.points,n=rl(),a=i.size(e,l);et(n,kn,a),et(n,Tn,a);let c=a/-2;et(n,"marginLeft",c),et(n,"marginTop",c);let u=i.width(e,l,a);return u&&et(n,"borderWidth",u),n}function vu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function gu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function mu(e,l){return e.series[l].points.size}const Fs=[0,0];function _u(e,l,i){return Fs[0]=l,Fs[1]=i,Fs}function Wn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Os(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const wu={show:!0,x:!0,y:!0,lock:!1,move:_u,points:{one:!1,show:hu,size:mu,width:0,stroke:gu,fill:vu},bind:{mousedown:Wn,mouseup:Wn,click:Wn,dblclick:Wn,mousemove:Os,mouseleave:Os,mouseenter:Os},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},qa={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ni=bt({},qa,{filter:Pa}),Ka=bt({},ni,{size:10}),ja=bt({},qa,{show:!1}),si='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ja="bold "+si,Za=1.5,ra={show:!0,scale:"x",stroke:js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ja,side:2,grid:ni,ticks:Ka,border:ja,font:si,lineGap:Za,rotate:0},xu="Value",bu="Time",oa={show:!0,scale:"x",auto:!1,sorted:1,min:qe,max:-qe,idxs:[]};function yu(e,l,i,n,a){return l.map(c=>c==null?"":$s(c))}function Su(e,l,i,n,a,c,u){let p=[],h=Rl.get(a)||0;i=u?i:Ke(ls(i,a),h);for(let v=i;v<=n;v=Ke(v+a,h))p.push(Object.is(v,-0)?0:v);return p}function Bs(e,l,i,n,a,c,u){const p=[],h=e.scales[e.axes[l].scale].log,v=h==10?Tl:Ca,S=ll(v(i));a=on(h,S),h==10&&(a=Vl[vl(a,Vl)]);let m=i,_=a*h;h==10&&(_=Vl[vl(_,Vl)]);do p.push(m),m=m+a,h==10&&!Rl.has(m)&&(m=Ke(m,Rl.get(a))),m>=_&&(a=m,_=a*h,h==10&&(_=Vl[vl(_,Vl)]));while(m<=n);return p}function ku(e,l,i,n,a,c,u){let h=e.scales[e.axes[l].scale].asinh,v=n>h?Bs(e,l,jt(h,i),n,a):[h],S=n>=0&&i<=0?[0]:[];return(i<-h?Bs(e,l,jt(h,-n),-i,a):[h]).reverse().map(_=>-_).concat(S,v)}const Qa=/./,Tu=/[12357]/,Eu=/[125]/,ua=/1/,Hs=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Mu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=e.scales[u],h=e.valToPos,v=c._space,S=h(10,u),m=h(9,u)-S>=v?Qa:h(7,u)-S>=v?Tu:h(5,u)-S>=v?Eu:ua;if(m==ua){let _=At(h(1,u)-S);if(_<v)return Hs(l.slice().reverse(),p.distr,m,ol(v/_)).reverse()}return Hs(l,p.distr,m,1)}function Au(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=c._space,h=e.valToPos,v=At(h(1,u)-h(2,u));return v<p?Hs(l.slice().reverse(),3,Qa,ol(p/v)).reverse():l}function Cu(e,l,i,n){return n==null?Js:l==null?"":$s(l)}const ca={show:!0,scale:"y",stroke:js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ja,side:3,grid:ni,ticks:Ka,border:ja,font:si,lineGap:Za,rotate:0};function Du(e,l){let i=3+(e||1)*2;return Ke(i*l,3)}function Lu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),p=At(u-c),h=e.series[l],v=p/(h.points.space*Oe);return n[1]-n[0]<=v}const fa={scale:null,auto:!0,sorted:0,min:qe,max:-qe},Xa=(e,l,i,n,a)=>a,da={show:!0,auto:!0,sorted:0,gaps:Xa,alpha:1,facets:[bt({},fa,{scale:"x"}),bt({},fa,{scale:"y"})]},pa={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Xa,alpha:1,points:{show:Lu,filter:null},values:null,min:qe,max:-qe,idxs:[],path:null,clip:null};function Pu(e,l,i,n,a){return i/10}const $a={time:lo,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Ru=bt({},$a,{time:!1,ori:1}),ha={};function er(e,l){let i=ha[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,p,h,v){for(let S=0;S<i.plots.length;S++)i.plots[S]!=a&&i.plots[S].pub(n,a,c,u,p,h,v)}},e!=null&&(ha[e]=i)),i}const fn=1,Ws=2;function Yl(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let h=c[0],v=n==2?c[1]:c[l],S=n==2?u[a.facets[0].scale]:u[e.series[0].scale],m=n==2?u[a.facets[1].scale]:u[a.scale],_=p.left,H=p.top,k=p.width,q=p.height,$=e.valToPosH,se=e.valToPosV;return S.ori==0?i(a,h,v,S,m,$,se,_,H,k,q,is,pn,rs,lr,sr):i(a,h,v,S,m,se,$,H,_,q,k,as,hn,ri,nr,ir)}function ii(e,l){let i=0,n=0,a=Re(e.bands,ei);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Fu(e,l,i,n,a){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,h=e.scales[p];return a==-1?h.min:a==1?h.max:h.distr==3?h.dir==1?h.min:h.max:0}function El(e,l,i,n,a,c){return Yl(e,l,(u,p,h,v,S,m,_,H,k,q,$)=>{let se=u.pxRound;const y=v.dir*(v.ori==0?1:-1),K=v.ori==0?pn:hn;let D,P;y==1?(D=i,P=n):(D=n,P=i);let L=se(m(p[D],v,q,H)),ne=se(_(h[D],S,$,k)),ee=se(m(p[P],v,q,H)),J=se(_(c==1?S.max:S.min,S,$,k)),te=new Path2D(a);return K(te,ee,J),K(te,L,J),K(te,L,ne),te})}function ss(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?rs:ri;let h=i;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let H=_[0]-h;H>0&&p(u,h,n,H,n+c),h=_[1]}}let v=i+a-h,S=10;v>0&&p(u,h,n-S/2,v,n+c+S)}return u}function Ou(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ai(e,l,i,n,a,c,u){let p=[],h=e.length;for(let v=a==1?i:n;v>=i&&v<=n;v+=a)if(l[v]===null){let m=v,_=v;if(a==1)for(;++v<=n&&l[v]===null;)_=v;else for(;--v>=i&&l[v]===null;)_=v;let H=c(e[m]),k=_==m?H:c(e[_]),q=m-a;H=u<=0&&q>=0&&q<h?c(e[q]):H;let se=_+a;k=u>=0&&se>=0&&se<h?c(e[se]):k,k>=H&&p.push([H,k])}return p}function va(e){return e==0?La:e==1?Mt:l=>zl(l,e)}function tr(e){let l=e==0?is:as,i=e==0?(a,c,u,p,h,v)=>{a.arcTo(c,u,p,h,v)}:(a,c,u,p,h,v)=>{a.arcTo(u,c,h,p,v)},n=e==0?(a,c,u,p,h)=>{a.rect(c,u,p,h)}:(a,c,u,p,h)=>{a.rect(u,c,h,p)};return(a,c,u,p,h,v=0,S=0)=>{v==0&&S==0?n(a,c,u,p,h):(v=gl(v,p/2,h/2),S=gl(S,p/2,h/2),l(a,c+v,u),i(a,c+p,u,c+p,u+h,v),i(a,c+p,u+h,c,u+h,S),i(a,c,u+h,c,u,S),i(a,c,u,c+p,u,v),a.closePath())}}const is=(e,l,i)=>{e.moveTo(l,i)},as=(e,l,i)=>{e.moveTo(i,l)},pn=(e,l,i)=>{e.lineTo(l,i)},hn=(e,l,i)=>{e.lineTo(i,l)},rs=tr(0),ri=tr(1),lr=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},nr=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},sr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},ir=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function ar(e){return(l,i,n,a,c)=>Yl(l,i,(u,p,h,v,S,m,_,H,k,q,$)=>{let{pxRound:se,points:y}=u,K,D;v.ori==0?(K=is,D=lr):(K=as,D=nr);const P=Ke(y.width*Oe,3);let L=(y.size-y.width)/2*Oe,ne=Ke(L*2,3),ee=new Path2D,J=new Path2D,{left:te,top:w,width:I,height:N}=l.bbox;rs(J,te-ne,w-ne,I+ne*2,N+ne*2);const le=O=>{if(h[O]!=null){let Z=se(m(p[O],v,q,H)),R=se(_(h[O],S,$,k));K(ee,Z+L,R),D(ee,Z,R,L,0,qn*2)}};if(c)c.forEach(le);else for(let O=n;O<=a;O++)le(O);return{stroke:P>0?ee:null,fill:ee,clip:J,flags:fn|Ws}})}function rr(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Nu=rr(pn),Gu=rr(hn);function or(e){const l=Re(e?.alignGaps,0);return(i,n,a,c)=>Yl(i,n,(u,p,h,v,S,m,_,H,k,q,$)=>{[a,c]=es(h,a,c);let se=u.pxRound,y=N=>se(m(N,v,q,H)),K=N=>se(_(N,S,$,k)),D,P;v.ori==0?(D=pn,P=Nu):(D=hn,P=Gu);const L=v.dir*(v.ori==0?1:-1),ne={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:fn},ee=ne.stroke;let J=!1;if(c-a>=q*4){let N=U=>i.posToVal(U,v.key,!0),le=null,O=null,Z,R,me,de=y(p[L==1?a:c]),ue=y(p[a]),ge=y(p[c]),oe=N(L==1?ue+1:ge-1);for(let U=L==1?a:c;U>=a&&U<=c;U+=L){let Ee=p[U],Ce=(L==1?Ee<oe:Ee>oe)?de:y(Ee),he=h[U];Ce==de?he!=null?(R=he,le==null?(D(ee,Ce,K(R)),Z=le=O=R):R<le?le=R:R>O&&(O=R)):he===null&&(J=!0):(le!=null&&P(ee,de,K(le),K(O),K(Z),K(R)),he!=null?(R=he,D(ee,Ce,K(R)),le=O=Z=R):(le=O=null,he===null&&(J=!0)),de=Ce,oe=N(de+L))}le!=null&&le!=O&&me!=de&&P(ee,de,K(le),K(O),K(Z),K(R))}else for(let N=L==1?a:c;N>=a&&N<=c;N+=L){let le=h[N];le===null?J=!0:le!=null&&D(ee,y(p[N]),K(le))}let[w,I]=ii(i,n);if(u.fill!=null||w!=0){let N=ne.fill=new Path2D(ee),le=u.fillTo(i,n,u.min,u.max,w),O=K(le),Z=y(p[a]),R=y(p[c]);L==-1&&([R,Z]=[Z,R]),D(N,R,O),D(N,Z,O)}if(!u.spanGaps){let N=[];J&&N.push(...ai(p,h,a,c,L,y,l)),ne.gaps=N=u.gaps(i,n,a,c,N),ne.clip=ss(N,v.ori,H,k,q,$)}return I!=0&&(ne.band=I==2?[El(i,n,a,c,ee,-1),El(i,n,a,c,ee,1)]:El(i,n,a,c,ee,I)),ne})}function zu(e){const l=Re(e.align,1),i=Re(e.ascDesc,!1),n=Re(e.alignGaps,0),a=Re(e.extend,!1);return(c,u,p,h)=>Yl(c,u,(v,S,m,_,H,k,q,$,se,y,K)=>{[p,h]=es(m,p,h);let D=v.pxRound,{left:P,width:L}=c.bbox,ne=ue=>D(k(ue,_,y,$)),ee=ue=>D(q(ue,H,K,se)),J=_.ori==0?pn:hn;const te={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:fn},w=te.stroke,I=_.dir*(_.ori==0?1:-1);let N=ee(m[I==1?p:h]),le=ne(S[I==1?p:h]),O=le,Z=le;a&&l==-1&&(Z=P,J(w,Z,N)),J(w,le,N);for(let ue=I==1?p:h;ue>=p&&ue<=h;ue+=I){let ge=m[ue];if(ge==null)continue;let oe=ne(S[ue]),U=ee(ge);l==1?J(w,oe,N):J(w,O,U),J(w,oe,U),N=U,O=oe}let R=O;a&&l==1&&(R=P+L,J(w,R,N));let[me,de]=ii(c,u);if(v.fill!=null||me!=0){let ue=te.fill=new Path2D(w),ge=v.fillTo(c,u,v.min,v.max,me),oe=ee(ge);J(ue,R,oe),J(ue,Z,oe)}if(!v.spanGaps){let ue=[];ue.push(...ai(S,m,p,h,I,ne,n));let ge=v.width*Oe/2,oe=i||l==1?ge:-ge,U=i||l==-1?-ge:ge;ue.forEach(Ee=>{Ee[0]+=oe,Ee[1]+=U}),te.gaps=ue=v.gaps(c,u,p,h,ue),te.clip=ss(ue,_.ori,$,se,y,K)}return de!=0&&(te.band=de==2?[El(c,u,p,h,w,-1),El(c,u,p,h,w,1)]:El(c,u,p,h,w,de)),te})}function ga(e,l,i,n,a,c,u=qe){if(e.length>1){let p=null;for(let h=0,v=1/0;h<e.length;h++)if(l[h]!==void 0){if(p!=null){let S=At(e[h]-e[p]);S<v&&(v=S,u=At(i(e[h],n,a,c)-i(e[p],n,a,c)))}p=h}}return u}function Vu(e){e=e||Dn;const l=Re(e.size,[.6,qe,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=Te(a),u=1-l[0],p=Re(l[1],qe),h=Re(l[2],1),v=Re(e.disp,Dn),S=Re(e.each,H=>{}),{fill:m,stroke:_}=v;return(H,k,q,$)=>Yl(H,k,(se,y,K,D,P,L,ne,ee,J,te,w)=>{let I=se.pxRound,N=i,le=n*Oe,O=p*Oe,Z=h*Oe,R,me;D.ori==0?[R,me]=c(H,k):[me,R]=c(H,k);const de=D.dir*(D.ori==0?1:-1);let ue=D.ori==0?rs:ri,ge=D.ori==0?S:(V,Ae,Ue,Pt,Jt,Bt,Rt)=>{S(V,Ae,Ue,Jt,Pt,Rt,Bt)},oe=Re(H.bands,ei).find(V=>V.series[0]==k),U=oe!=null?oe.dir:0,Ee=se.fillTo(H,k,se.min,se.max,U),Ve=I(ne(Ee,P,w,J)),Ce,he,ot,tt=te,Me=I(se.width*Oe),st=!1,ut=null,je=null,He=null,Dt=null;m!=null&&(Me==0||_!=null)&&(st=!0,ut=m.values(H,k,q,$),je=new Map,new Set(ut).forEach(V=>{V!=null&&je.set(V,new Path2D)}),Me>0&&(He=_.values(H,k,q,$),Dt=new Map,new Set(He).forEach(V=>{V!=null&&Dt.set(V,new Path2D)})));let{x0:we,size:St}=v;if(we!=null&&St!=null){N=1,y=we.values(H,k,q,$),we.unit==2&&(y=y.map(Ue=>H.posToVal(ee+Ue*te,D.key,!0)));let V=St.values(H,k,q,$);St.unit==2?he=V[0]*te:he=L(V[0],D,te,ee)-L(0,D,te,ee),tt=ga(y,K,L,D,te,ee,tt),ot=tt-he+le}else tt=ga(y,K,L,D,te,ee,tt),ot=tt*u+le,he=tt-ot;ot<1&&(ot=0),Me>=he/2&&(Me=0),ot<5&&(I=La);let Ut=ot>0,_t=tt-ot-(Ut?Me:0);he=I(Is(_t,Z,O)),Ce=(N==0?he/2:N==de?0:he)-N*de*((N==0?le/2:0)+(Ut?Me/2:0));const Ie={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Lt=st?null:new Path2D;let kt=null;if(oe!=null)kt=H.data[oe.series[1]];else{let{y0:V,y1:Ae}=v;V!=null&&Ae!=null&&(K=Ae.values(H,k,q,$),kt=V.values(H,k,q,$))}let vt=R*he,fe=me*he;for(let V=de==1?q:$;V>=q&&V<=$;V+=de){let Ae=K[V];if(Ae==null)continue;if(kt!=null){let gt=kt[V]??0;if(Ae-gt==0)continue;Ve=ne(gt,P,w,J)}let Ue=D.distr!=2||v!=null?y[V]:V,Pt=L(Ue,D,te,ee),Jt=ne(Re(Ae,Ee),P,w,J),Bt=I(Pt-Ce),Rt=I(jt(Jt,Ve)),it=I(gl(Jt,Ve)),Tt=Rt-it;if(Ae!=null){let gt=Ae<0?fe:vt,Et=Ae<0?vt:fe;st?(Me>0&&He[V]!=null&&ue(Dt.get(He[V]),Bt,it+ll(Me/2),he,jt(0,Tt-Me),gt,Et),ut[V]!=null&&ue(je.get(ut[V]),Bt,it+ll(Me/2),he,jt(0,Tt-Me),gt,Et)):ue(Lt,Bt,it+ll(Me/2),he,jt(0,Tt-Me),gt,Et),ge(H,k,V,Bt-Me/2,it,he+Me,Tt)}}return Me>0?Ie.stroke=st?Dt:Lt:st||(Ie._fill=se.width==0?se._fill:se._stroke??se._fill,Ie.width=0),Ie.fill=st?je:Lt,Ie})}function Iu(e,l){const i=Re(l?.alignGaps,0);return(n,a,c,u)=>Yl(n,a,(p,h,v,S,m,_,H,k,q,$,se)=>{[c,u]=es(v,c,u);let y=p.pxRound,K=R=>y(_(R,S,$,k)),D=R=>y(H(R,m,se,q)),P,L,ne;S.ori==0?(P=is,ne=pn,L=sr):(P=as,ne=hn,L=ir);const ee=S.dir*(S.ori==0?1:-1);let J=K(h[ee==1?c:u]),te=J,w=[],I=[];for(let R=ee==1?c:u;R>=c&&R<=u;R+=ee)if(v[R]!=null){let de=h[R],ue=K(de);w.push(te=ue),I.push(D(v[R]))}const N={stroke:e(w,I,P,ne,L,y),fill:null,clip:null,band:null,gaps:null,flags:fn},le=N.stroke;let[O,Z]=ii(n,a);if(p.fill!=null||O!=0){let R=N.fill=new Path2D(le),me=p.fillTo(n,a,p.min,p.max,O),de=D(me);ne(R,te,de),ne(R,J,de)}if(!p.spanGaps){let R=[];R.push(...ai(h,v,c,u,ee,K,i)),N.gaps=R=p.gaps(n,a,c,u,R),N.clip=ss(R,S.ori,k,q,$,se)}return Z!=0&&(N.band=Z==2?[El(n,a,c,u,le,-1),El(n,a,c,u,le,1)]:El(n,a,c,u,le,Z)),N})}function Bu(e){return Iu(Hu,e)}function Hu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let h=Array(u),v=Array(u-1),S=Array(u-1),m=Array(u-1);for(let _=0;_<u-1;_++)S[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],v[_]=S[_]/m[_];h[0]=v[0];for(let _=1;_<u-1;_++)v[_]===0||v[_-1]===0||v[_-1]>0!=v[_]>0?h[_]=0:(h[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/v[_-1]+(m[_]+2*m[_-1])/v[_]),isFinite(h[_])||(h[_]=0));h[u-1]=v[u-2];for(let _=0;_<u-1;_++)a(p,e[_]+m[_]/3,l[_]+h[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-h[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const Us=new Set;function ma(){for(let e of Us)e.syncRect(!0)}dn&&(Wl(yo,rn,ma),Wl(So,rn,ma,!0),Wl(jn,rn,()=>{yt.pxRatio=Oe}));const Wu=or(),Uu=ar();function _a(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ys(c,u,l,i))}function Yu(e,l){return e.map((i,n)=>n==0?{}:bt({},l,i))}function Ys(e,l,i,n){return bt({},l==0?i:n,e)}function ur(e,l,i){return l==null?un:[l,i]}const qu=ur;function Ku(e,l,i){return l==null?un:Jn(l,i,Xs,!0)}function cr(e,l,i,n){return l==null?un:ts(l,i,e.scales[n].log,!1)}const ju=cr;function fr(e,l,i,n){return l==null?un:Qs(l,i,e.scales[n].log,!1)}const Ju=fr;function Zu(e,l,i,n,a){let c=jt(Zi(e),Zi(l)),u=l-e,p=vl(a/n*u,i);do{let h=i[p],v=n*h/u;if(v>=a&&c+(h<5?Rl.get(h):0)<=17)return[h,v]}while(++p<i.length);return[0,0]}function wa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=Mt((i=+a)*Oe))+"px"),[e,l,i]}function Qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ke(l[2]*Oe,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function yt(e,l,i){const n={mode:Re(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let h=!1;n.status=0;const v=n.root=rl(no);if(e.id!=null&&(v.id=e.id),tl(v,e.class),e.title){let t=rl(ao,v);t.textContent=e.title}const S=hl("canvas"),m=n.ctx=S.getContext("2d"),_=rl(ro,v);Wl("click",_,t=>{t.target===k&&(Qe!=Ql||nt!=Xl)&&Wt.click(n,t)},!0);const H=n.under=rl(oo,_);_.appendChild(S);const k=n.over=rl(uo,_);e=cn(e);const q=+Re(e.pxAlign,1),$=va(q);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const se=e.ms||.001,y=n.series=a==1?_a(e.series||[],oa,pa,!1):Yu(e.series||[null],da),K=n.axes=_a(e.axes||[],ra,ca,!0),D=n.scales={},P=n.bands=e.bands||[];P.forEach(t=>{t.fill=Te(t.fill||null),t.dir=Re(t.dir,-1)});const L=a==2?y[1].facets[0].scale:y[0].scale,ne={axes:wr,series:hr},ee=(e.drawOrder||["axes","series"]).map(t=>ne[t]);function J(t){const s=t.distr==3?r=>Tl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Ps(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:g}=t,x=g-f;return(o-f)/x}}function te(t){let s=D[t];if(s==null){let r=(e.scales||Dn)[t]||Dn;if(r.from!=null){te(r.from);let o=bt({},D[r.from],r,{key:t});o.valToPct=J(o),D[t]=o}else{s=D[t]=bt({},t==L?$a:Ru,r),s.key=t;let o=s.time,f=s.range,g=Pl(f);if((t!=L||a==2&&!o)&&(g&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ki:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ki:{mode:1,hard:f[1],soft:f[1]}},g=!1),!g&&ns(f))){let x=f;f=(M,F,Y)=>F==null?un:Jn(F,Y,x)}s.range=Te(f||(o?qu:t==L?s.distr==3?ju:s.distr==4?Ju:ur:s.distr==3?cr:s.distr==4?fr:Ku)),s.auto=Te(g?!1:s.auto),s.clamp=Te(s.clamp||Pu),s._min=s._max=null,s.valToPct=J(s)}}}te("x"),te("y"),a==1&&y.forEach(t=>{te(t.scale)}),K.forEach(t=>{te(t.scale)});for(let t in e.scales)te(t);const w=D[L],I=w.distr;let N,le;w.ori==0?(tl(v,so),N=c,le=u):(tl(v,io),N=u,le=c);const O={};for(let t in D){let s=D[t];(s.min!=null||s.max!=null)&&(O[t]={min:s.min,max:s.max},s.min=s.max=null)}const Z=e.tzDate||(t=>new Date(Mt(t/se))),R=e.fmtDate||ti,me=se==1?iu(Z):ou(Z),de=sa(Z,na(se==1?su:ru,R)),ue=aa(Z,ia(cu,R)),ge=[],oe=n.legend=bt({},pu,e.legend),U=n.cursor=bt({},wu,{drag:{y:a==2}},e.cursor),Ee=oe.show,Ve=U.show,Ce=oe.markers;oe.idxs=ge,Ce.width=Te(Ce.width),Ce.dash=Te(Ce.dash),Ce.stroke=Te(Ce.stroke),Ce.fill=Te(Ce.fill);let he,ot,tt,Me=[],st=[],ut,je=!1,He={};if(oe.live){const t=y[1]?y[1].values:null;je=t!=null,ut=je?t(n,1,0):{_:0};for(let s in ut)He[s]=Js}if(Ee)if(he=hl("table",go,v),tt=hl("tbody",null,he),oe.mount(n,he),je){ot=hl("thead",null,he,tt);let t=hl("tr",null,ot);hl("th",null,t);for(var Dt in ut)hl("th",Fi,t).textContent=Dt}else tl(he,_o),oe.live&&tl(he,mo);const we={show:!0},St={show:!1};function Ut(t,s){if(s==0&&(je||!oe.live||a==2))return un;let r=[],o=hl("tr",wo,tt,tt.childNodes[s]);tl(o,t.class),t.show||tl(o,Il);let f=hl("th",null,o);if(Ce.show){let M=rl(xo,f);if(s>0){let F=Ce.width(n,s);F&&(M.style.border=F+"px "+Ce.dash(n,s)+" "+Ce.stroke(n,s)),M.style.background=Ce.fill(n,s)}}let g=rl(Fi,f);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(Ce.show||(g.style.color=t.width>0?Ce.stroke(n,s):Ce.fill(n,s)),Ie("click",f,M=>{if(U._lock)return;Le(M);let F=y.indexOf(t);if((M.ctrlKey||M.metaKey)!=oe.isolate){let Y=y.some((j,X)=>X>0&&X!=F&&j.show);y.forEach((j,X)=>{X>0&&_l(X,Y?X==F?we:St:we,!0,xt.setSeries)})}else _l(F,{show:!t.show},!0,xt.setSeries)},!1),wt&&Ie(zi,f,M=>{U._lock||(Le(M),_l(y.indexOf(t),en,!0,xt.setSeries))},!1));for(var x in ut){let M=hl("td",bo,o);M.textContent="--",r.push(M)}return[o,r]}const _t=new Map;function Ie(t,s,r,o=!0){const f=_t.get(s)||{},g=U.bind[t](n,s,r,o);g&&(Wl(t,s,f[t]=g),_t.set(s,f))}function Lt(t,s,r){const o=_t.get(s)||{};for(let f in o)(t==null||f==t)&&(Vs(f,s,o[f]),delete o[f]);t==null&&_t.delete(s)}let kt=0,vt=0,fe=0,V=0,Ae=0,Ue=0,Pt=Ae,Jt=Ue,Bt=fe,Rt=V,it=0,Tt=0,gt=0,Et=0;n.bbox={};let ul=!1,sl=!1,Zt=!1,z=!1,Q=!1,B=!1;function ie(t,s,r){(r||t!=n.width||s!=n.height)&&T(t,s),Kl(!1),Zt=!0,sl=!0,jl()}function T(t,s){n.width=kt=fe=t,n.height=vt=V=s,Ae=Ue=0,ve(),be();let r=n.bbox;it=r.left=zl(Ae*Oe,.5),Tt=r.top=zl(Ue*Oe,.5),gt=r.width=zl(fe*Oe,.5),Et=r.height=zl(V*Oe,.5)}const E=3;function b(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=_r(s);t=s==E||r&&o,t||(T(n.width,n.height),sl=!0)}}function G({width:t,height:s}){ie(t,s)}n.setSize=G;function ve(){let t=!1,s=!1,r=!1,o=!1;K.forEach((f,g)=>{if(f.show&&f._show){let{side:x,_size:M}=f,F=x%2,Y=f.label!=null?f.labelSize:0,j=M+Y;j>0&&(F?(fe-=j,x==3?(Ae+=j,o=!0):r=!0):(V-=j,x==0?(Ue+=j,t=!0):s=!0))}}),Ze[0]=t,Ze[1]=r,Ze[2]=s,Ze[3]=o,fe-=ft[1]+ft[3],Ae+=ft[3],V-=ft[2]+ft[0],Ue+=ft[0]}function be(){let t=Ae+fe,s=Ue+V,r=Ae,o=Ue;function f(g,x){switch(g){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}K.forEach((g,x)=>{if(g.show&&g._show){let M=g.side;g._pos=f(M,g._size),g.label!=null&&(g._lpos=f(M,g.labelSize))}})}if(U.dataIdx==null){let t=U.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Te(t.prox),o=t.bias??=0;U.dataIdx=(f,g,x,M)=>{if(g==0)return x;let F=x,Y=r(f,g,x,M)??qe,j=Y>=0&&Y<qe,X=w.ori==0?fe:V,pe=U.left,Fe=l[0],Pe=l[g];if(s.has(Pe[x])){F=null;let Se=null,ce=null,ae;if(o==0||o==-1)for(ae=x;Se==null&&ae-- >0;)s.has(Pe[ae])||(Se=ae);if(o==0||o==1)for(ae=x;ce==null&&ae++<Pe.length;)s.has(Pe[ae])||(ce=ae);if(Se!=null||ce!=null)if(j){let $e=Se==null?-1/0:N(Fe[Se],w,X,0),dt=ce==null?1/0:N(Fe[ce],w,X,0),It=pe-$e,We=dt-pe;It<=We?It<=Y&&(F=Se):We<=Y&&(F=ce)}else F=ce==null?Se:Se==null?ce:x-Se<=ce-x?Se:ce}else j&&At(pe-N(Fe[x],w,X,0))>Y&&(F=null);return F}}const Le=t=>{U.event=t};U.idxs=ge,U._lock=!1;let ye=U.points;ye.show=Te(ye.show),ye.size=Te(ye.size),ye.stroke=Te(ye.stroke),ye.width=Te(ye.width),ye.fill=Te(ye.fill);const lt=n.focus=bt({},e.focus||{alpha:.3},U.focus),wt=lt.prox>=0,Ge=wt&&ye.one;let ke=[],at=[],ct=[];function Ye(t,s){let r=ye.show(n,s);if(r instanceof HTMLElement)return tl(r,vo),tl(r,t.class),yl(r,-10,-10,fe,V),k.insertBefore(r,ke[s]),r}function Je(t,s){if(a==1||s>0){let r=a==1&&D[t.scale].time,o=t.value;t.value=r?$i(o)?aa(Z,ia(o,R)):o||ue:o||Cu,t.label=t.label||(r?bu:xu)}if(Ge||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Wu||Ro,t.fillTo=Te(t.fillTo||Fu),t.pxAlign=+Re(t.pxAlign,q),t.pxRound=va(t.pxAlign),t.stroke=Te(t.stroke||null),t.fill=Te(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Du(jt(1,t.width),1),o=t.points=bt({},{size:r,width:jt(1,r*.2),stroke:t.stroke,space:r*2,paths:Uu,_stroke:null,_fill:null},t.points);o.show=Te(o.show),o.filter=Te(o.filter),o.fill=Te(o.fill),o.stroke=Te(o.stroke),o.paths=Te(o.paths),o.pxAlign=t.pxAlign}if(Ee){let r=Ut(t,s);Me.splice(s,0,r[0]),st.splice(s,0,r[1]),oe.values.push(null)}if(Ve){ge.splice(s,0,null);let r=null;Ge?s==0&&(r=Ye(t,s)):s>0&&(r=Ye(t,s)),ke.splice(s,0,r),at.splice(s,0,0),ct.splice(s,0,0)}Vt("addSeries",s)}function Ft(t,s){s=s??y.length,t=a==1?Ys(t,s,oa,pa):Ys(t,s,{},da),y.splice(s,0,t),Je(y[s],s)}n.addSeries=Ft;function Ht(t){if(y.splice(t,1),Ee){oe.values.splice(t,1),st.splice(t,1);let s=Me.splice(t,1)[0];Lt(null,s.firstChild),s.remove()}Ve&&(ge.splice(t,1),ke.splice(t,1)[0].remove(),at.splice(t,1),ct.splice(t,1)),Vt("delSeries",t)}n.delSeries=Ht;const Ze=[!1,!1,!1,!1];function Fl(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=D[t.scale];o==null&&(t.scale=r?y[1].scale:L,o=D[t.scale]);let f=o.time;t.size=Te(t.size),t.space=Te(t.space),t.rotate=Te(t.rotate),Pl(t.incrs)&&t.incrs.forEach(x=>{!Rl.has(x)&&Rl.set(x,Fa(x))}),t.incrs=Te(t.incrs||(o.distr==2?tu:f?se==1?nu:au:Vl)),t.splits=Te(t.splits||(f&&o.distr==1?me:o.distr==3?Bs:o.distr==4?ku:Su)),t.stroke=Te(t.stroke),t.grid.stroke=Te(t.grid.stroke),t.ticks.stroke=Te(t.ticks.stroke),t.border.stroke=Te(t.border.stroke);let g=t.values;t.values=Pl(g)&&!Pl(g[0])?Te(g):f?Pl(g)?sa(Z,na(g,R)):$i(g)?uu(Z,g):g||de:g||yu,t.filter=Te(t.filter||(o.distr>=3&&o.log==10?Mu:o.distr==3&&o.log==2?Au:Pa)),t.font=wa(t.font),t.labelFont=wa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(Ze[s]=!0,t._el=rl(co,_))}}function cl(t,s,r,o){let[f,g,x,M]=r,F=s%2,Y=0;return F==0&&(M||g)&&(Y=s==0&&!f||s==2&&!x?Mt(ra.size/3):0),F==1&&(f||x)&&(Y=s==1&&!g||s==3&&!M?Mt(ca.size/2):0),Y}const Ml=n.padding=(e.padding||[cl,cl,cl,cl]).map(t=>Te(Re(t,cl))),ft=n._padding=Ml.map((t,s)=>t(n,s,Ze,0));let mt,Ot=null,Nt=null;const Fn=a==1?y[0].idxs:null;let fl=null,vn=!1;function oi(t,s){if(l=t??[],n.data=n._data=l,a==2){mt=0;for(let r=1;r<y.length;r++)mt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),fl=l[0],mt=fl.length;let r=l;if(I==2){r=l.slice();let o=r[0]=Array(mt);for(let f=0;f<mt;f++)o[f]=f}n._data=l=r}if(Kl(!0),Vt("setData"),I==2&&(Zt=!0),s!==!1){let r=w;r.auto(n,vn)?os():Cl(L,r.min,r.max),z=z||U.left>=0,B=!0,jl()}}n.setData=oi;function os(){vn=!0;let t,s;a==1&&(mt>0?(Ot=Fn[0]=0,Nt=Fn[1]=mt-1,t=l[0][Ot],s=l[0][Nt],I==2?(t=Ot,s=Nt):t==s&&(I==3?[t,s]=ts(t,t,w.log,!1):I==4?[t,s]=Qs(t,t,w.log,!1):w.time?s=t+Mt(86400/se):[t,s]=Jn(t,s,Xs,!0))):(Ot=Fn[0]=t=null,Nt=Fn[1]=s=null)),Cl(L,t,s)}let On,ql,us,cs,fs,ds,ps,hs,vs,Qt;function ui(t,s,r,o,f,g){t??=Ni,r??=ei,o??="butt",f??=Ni,g??="round",t!=On&&(m.strokeStyle=On=t),f!=ql&&(m.fillStyle=ql=f),s!=us&&(m.lineWidth=us=s),g!=fs&&(m.lineJoin=fs=g),o!=ds&&(m.lineCap=ds=o),r!=cs&&m.setLineDash(cs=r)}function ci(t,s,r,o){s!=ql&&(m.fillStyle=ql=s),t!=ps&&(m.font=ps=t),r!=hs&&(m.textAlign=hs=r),o!=vs&&(m.textBaseline=vs=o)}function gs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,vn)&&(s==null||s.min==null)){let g=Re(Ot,0),x=Re(Nt,o.length-1),M=r.min==null?Mo(o,g,x,f,t.distr==3):[r.min,r.max];t.min=gl(t.min,r.min=M[0]),t.max=jt(t.max,r.max=M[1])}}const fi={min:null,max:null};function dr(){for(let o in D){let f=D[o];O[o]==null&&(f.min==null||O[L]!=null&&f.auto(n,vn))&&(O[o]=fi)}for(let o in D){let f=D[o];O[o]==null&&f.from!=null&&O[f.from]!=null&&(O[o]=fi)}O[L]!=null&&Kl(!0);let t={};for(let o in O){let f=O[o];if(f!=null){let g=t[o]=cn(D[o],No);if(f.min!=null)bt(g,f);else if(o!=L||a==2)if(mt==0&&g.from==null){let x=g.range(n,null,null,o);g.min=x[0],g.max=x[1]}else g.min=qe,g.max=-qe}}if(mt>0){y.forEach((o,f)=>{if(a==1){let g=o.scale,x=O[g];if(x==null)return;let M=t[g];if(f==0){let F=M.range(n,M.min,M.max,g);M.min=F[0],M.max=F[1],Ot=vl(M.min,l[0]),Nt=vl(M.max,l[0]),Nt-Ot>1&&(l[0][Ot]<M.min&&Ot++,l[0][Nt]>M.max&&Nt--),o.min=fl[Ot],o.max=fl[Nt]}else o.show&&o.auto&&gs(M,x,o,l[f],o.sorted);o.idxs[0]=Ot,o.idxs[1]=Nt}else if(f>0&&o.show&&o.auto){let[g,x]=o.facets,M=g.scale,F=x.scale,[Y,j]=l[f],X=t[M],pe=t[F];X!=null&&gs(X,O[M],g,Y,g.sorted),pe!=null&&gs(pe,O[F],x,j,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],g=O[o];if(f.from==null&&(g==null||g.min==null)){let x=f.range(n,f.min==qe?null:f.min,f.max==-qe?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let g=t[f.from];if(g.min==null)f.min=f.max=null;else{let x=f.range(n,g.min,g.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],g=D[o];if(g.min!=f.min||g.max!=f.max){g.min=f.min,g.max=f.max;let x=g.distr;g._min=x==3?Tl(g.min):x==4?Ps(g.min,g.asinh):x==100?g.fwd(g.min):g.min,g._max=x==3?Tl(g.max):x==4?Ps(g.max,g.asinh):x==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){y.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Zt=!0,Vt("setScale",o);Ve&&U.left>=0&&(z=B=!0)}for(let o in O)O[o]=null}function pr(t){let s=Is(Ot-1,0,mt-1),r=Is(Nt+1,0,mt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<mt-1;)r++;return[s,r]}function hr(){if(mt>0){let t=y.some(s=>s._focus)&&Qt!=lt.alpha;t&&(m.globalAlpha=Qt=lt.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(di(r,!1),di(r,!0),s._paths==null)){let o=Qt;Qt!=s.alpha&&(m.globalAlpha=Qt=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Qt!=o&&(m.globalAlpha=Qt=o)}}),y.forEach((s,r)=>{if(r>0&&s.show){let o=Qt;Qt!=s.alpha&&(m.globalAlpha=Qt=s.alpha),s._paths!=null&&pi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,Ot,Nt,f),x=s.points.filter(n,r,g,f);(g||x)&&(s.points._paths=s.points.paths(n,r,Ot,Nt,x),pi(r,!0))}Qt!=o&&(m.globalAlpha=Qt=o),Vt("drawSeries",r)}}),t&&(m.globalAlpha=Qt=1)}}function di(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function pi(t,s){let r=s?y[t].points:y[t],{stroke:o,fill:f,clip:g,flags:x,_stroke:M=r._stroke,_fill:F=r._fill,_width:Y=r.width}=r._paths;Y=Ke(Y*Oe,3);let j=null,X=Y%2/2;s&&F==null&&(F=Y>0?"#fff":M);let pe=r.pxAlign==1&&X>0;if(pe&&m.translate(X,X),!s){let Fe=it-Y/2,Pe=Tt-Y/2,Se=gt+Y,ce=Et+Y;j=new Path2D,j.rect(Fe,Pe,Se,ce)}s?ms(M,Y,r.dash,r.cap,F,o,f,x,g):vr(t,M,Y,r.dash,r.cap,F,o,f,x,j,g),pe&&m.translate(-X,-X)}function vr(t,s,r,o,f,g,x,M,F,Y,j){let X=!1;F!=0&&P.forEach((pe,Fe)=>{if(pe.series[0]==t){let Pe=y[pe.series[1]],Se=l[pe.series[1]],ce=(Pe._paths||Dn).band;Pl(ce)&&(ce=pe.dir==1?ce[0]:ce[1]);let ae,$e=null;Pe.show&&ce&&Co(Se,Ot,Nt)?($e=pe.fill(n,Fe)||g,ae=Pe._paths.clip):ce=null,ms(s,r,o,f,$e,x,M,F,Y,j,ae,ce),X=!0}}),X||ms(s,r,o,f,g,x,M,F,Y,j)}const hi=fn|Ws;function ms(t,s,r,o,f,g,x,M,F,Y,j,X){ui(t,s,r,o,f),(F||Y||X)&&(m.save(),F&&m.clip(F),Y&&m.clip(Y)),X?(M&hi)==hi?(m.clip(X),j&&m.clip(j),Gn(f,x),Nn(t,g,s)):M&Ws?(Gn(f,x),m.clip(X),Nn(t,g,s)):M&fn&&(m.save(),m.clip(X),j&&m.clip(j),Gn(f,x),m.restore(),Nn(t,g,s)):(Gn(f,x),Nn(t,g,s)),(F||Y||X)&&m.restore()}function Nn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=On=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function Gn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=ql=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function gr(t,s,r,o){let f=K[t],g;if(o<=0)g=[0,0];else{let x=f._space=f.space(n,t,s,r,o),M=f._incrs=f.incrs(n,t,s,r,o,x);g=Zu(s,r,M,o,x)}return f._found=g}function _s(t,s,r,o,f,g,x,M,F,Y){let j=x%2/2;q==1&&m.translate(j,j),ui(M,x,F,Y,M),m.beginPath();let X,pe,Fe,Pe,Se=f+(o==0||o==3?-g:g);r==0?(pe=f,Pe=Se):(X=f,Fe=Se);for(let ce=0;ce<t.length;ce++)s[ce]!=null&&(r==0?X=Fe=t[ce]:pe=Pe=t[ce],m.moveTo(X,pe),m.lineTo(Fe,Pe));m.stroke(),q==1&&m.translate(-j,-j)}function mr(t){let s=!0;return K.forEach((r,o)=>{if(!r.show)return;let f=D[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Kl(!1));return}else r._show||(s=!1,r._show=!0,Kl(!1));let g=r.side,x=g%2,{min:M,max:F}=f,[Y,j]=gr(o,M,F,x==0?fe:V);if(j==0)return;let X=f.distr==2,pe=r._splits=r.splits(n,o,M,F,Y,j,X),Fe=f.distr==2?pe.map(ae=>fl[ae]):pe,Pe=f.distr==2?fl[pe[1]]-fl[pe[0]]:Y,Se=r._values=r.values(n,r.filter(n,Fe,o,j,Pe),o,j,Pe);r._rotate=g==2?r.rotate(n,Se,o,j):0;let ce=r._size;r._size=ol(r.size(n,Se,o,t)),ce!=null&&r._size!=ce&&(s=!1)}),s}function _r(t){let s=!0;return Ml.forEach((r,o)=>{let f=r(n,o,Ze,t);f!=ft[o]&&(s=!1),ft[o]=f}),s}function wr(){for(let t=0;t<K.length;t++){let s=K[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,g,x=s.stroke(n,t),M=r==0||r==3?-1:1,[F,Y]=s._found;if(s.label!=null){let qt=s.labelGap*M,el=Mt((s._lpos+qt)*Oe);ci(s.labelFont[0],x,"center",r==2?yn:Oi),m.save(),o==1?(f=g=0,m.translate(el,Mt(Tt+Et/2)),m.rotate((r==3?-qn:qn)/2)):(f=Mt(it+gt/2),g=el);let Gl=Da(s.label)?s.label(n,t,F,Y):s.label;m.fillText(Gl,f,g),m.restore()}if(Y==0)continue;let j=D[s.scale],X=o==0?gt:Et,pe=o==0?it:Tt,Fe=s._splits,Pe=j.distr==2?Fe.map(qt=>fl[qt]):Fe,Se=j.distr==2?fl[Fe[1]]-fl[Fe[0]]:F,ce=s.ticks,ae=s.border,$e=ce.show?ce.size:0,dt=Mt($e*Oe),It=Mt((s.alignTo==2?s._size-$e-s.gap:s.gap)*Oe),We=s._rotate*-qn/180,pt=$(s._pos*Oe),Xt=(dt+It)*M,Yt=pt+Xt;g=o==0?Yt:0,f=o==1?Yt:0;let il=s.font[0],dl=s.align==1?ln:s.align==2?Cs:We>0?ln:We<0?Cs:o==0?"center":r==3?Cs:ln,xl=We||o==1?"middle":r==2?yn:Oi;ci(il,x,dl,xl);let $t=s.font[1]*s.lineGap,al=Fe.map(qt=>$(p(qt,j,X,pe))),pl=s._values;for(let qt=0;qt<pl.length;qt++){let el=pl[qt];if(el!=null){o==0?f=al[qt]:g=al[qt],el=""+el;let Gl=el.indexOf(`
`)==-1?[el]:el.split(/\n/gm);for(let Kt=0;Kt<Gl.length;Kt++){let Ri=Gl[Kt];We?(m.save(),m.translate(f,g+Kt*$t),m.rotate(We),m.fillText(Ri,0,0),m.restore()):m.fillText(Ri,f,g+Kt*$t)}}}ce.show&&_s(al,ce.filter(n,Pe,t,Y,Se),o,r,pt,dt,Ke(ce.width*Oe,3),ce.stroke(n,t),ce.dash,ce.cap);let bl=s.grid;bl.show&&_s(al,bl.filter(n,Pe,t,Y,Se),o,o==0?2:1,o==0?Tt:it,o==0?Et:gt,Ke(bl.width*Oe,3),bl.stroke(n,t),bl.dash,bl.cap),ae.show&&_s([pt],[1],o==0?1:0,o==0?1:2,o==1?Tt:it,o==1?Et:gt,Ke(ae.width*Oe,3),ae.stroke(n,t),ae.dash,ae.cap)}Vt("drawAxes")}function Kl(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let zn=!1,ws=!1,gn=[];function xr(){ws=!1;for(let t=0;t<gn.length;t++)Vt(...gn[t]);gn.length=0}function jl(){zn||(Wo(vi),zn=!0)}function br(t,s=!1){zn=!0,ws=s,t(n),vi(),s&&gn.length>0&&queueMicrotask(xr)}n.batch=br;function vi(){if(ul&&(dr(),ul=!1),Zt&&(b(),Zt=!1),sl){if(et(H,ln,Ae),et(H,yn,Ue),et(H,kn,fe),et(H,Tn,V),et(k,ln,Ae),et(k,yn,Ue),et(k,kn,fe),et(k,Tn,V),et(_,kn,kt),et(_,Tn,vt),S.width=Mt(kt*Oe),S.height=Mt(vt*Oe),K.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let g=f===3||f===0?r:0,x=f%2==1;et(t,x?"left":"top",o-g),et(t,x?"width":"height",r),et(t,x?"top":"left",x?Ue:Ae),et(t,x?"height":"width",x?V:fe),zs(t,Il)}else tl(t,Il)}),On=ql=us=fs=ds=ps=hs=vs=cs=null,Qt=1,wn(!0),Ae!=Pt||Ue!=Jt||fe!=Bt||V!=Rt){Kl(!1);let t=fe/Bt,s=V/Rt;if(Ve&&!z&&U.left>=0){U.left*=t,U.top*=s,Jl&&yl(Jl,Mt(U.left),0,fe,V),Zl&&yl(Zl,0,Mt(U.top),fe,V);for(let r=0;r<ke.length;r++){let o=ke[r];o!=null&&(at[r]*=t,ct[r]*=s,yl(o,ol(at[r]),ol(ct[r]),fe,V))}}if(Xe.show&&!Q&&Xe.left>=0&&Xe.width>0){Xe.left*=t,Xe.width*=t,Xe.top*=s,Xe.height*=s;for(let r in Ts)et($l,r,Xe[r])}Pt=Ae,Jt=Ue,Bt=fe,Rt=V}Vt("setSize"),sl=!1}kt>0&&vt>0&&(m.clearRect(0,0,S.width,S.height),Vt("drawClear"),ee.forEach(t=>t()),Vt("draw")),Xe.show&&Q&&(Vn(Xe),Q=!1),Ve&&z&&(Nl(null,!0,!1),z=!1),oe.show&&oe.live&&B&&(Ss(),B=!1),h||(h=!0,n.status=1,Vt("ready")),vn=!1,zn=!1}n.redraw=(t,s)=>{Zt=s||!1,t!==!1?Cl(L,w.min,w.max):jl()};function xs(t,s){let r=D[t];if(r.from==null){if(mt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(mt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==L&&r.distr==2&&mt>0&&(s.min=vl(s.min,l[0]),s.max=vl(s.max,l[0]),s.min==s.max&&s.max++),O[t]=s,ul=!0,jl()}}n.setScale=xs;let bs,ys,Jl,Zl,gi,mi,Ql,Xl,_i,wi,Qe,nt,Al=!1;const Wt=U.drag;let Gt=Wt.x,zt=Wt.y;Ve&&(U.x&&(bs=rl(po,k)),U.y&&(ys=rl(ho,k)),w.ori==0?(Jl=bs,Zl=ys):(Jl=ys,Zl=bs),Qe=U.left,nt=U.top);const Xe=n.select=bt({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),$l=Xe.show?rl(fo,Xe.over?k:H):null;function Vn(t,s){if(Xe.show){for(let r in t)Xe[r]=t[r],r in Ts&&et($l,r,t[r]);s!==!1&&Vt("setSelect")}}n.setSelect=Vn;function yr(t){if(y[t].show)Ee&&zs(Me[t],Il);else if(Ee&&tl(Me[t],Il),Ve){let r=Ge?ke[0]:ke[t];r!=null&&yl(r,-10,-10,fe,V)}}function Cl(t,s,r){xs(t,{min:s,max:r})}function _l(t,s,r,o){s.focus!=null&&Mr(t),s.show!=null&&y.forEach((f,g)=>{g>0&&(t==g||t==null)&&(f.show=s.show,yr(g),a==2?(Cl(f.facets[0].scale,null,null),Cl(f.facets[1].scale,null,null)):Cl(f.scale,null,null),jl())}),r!==!1&&Vt("setSeries",t,s),o&&xn("setSeries",n,t,s)}n.setSeries=_l;function Sr(t,s){bt(P[t],s)}function kr(t,s){t.fill=Te(t.fill||null),t.dir=Re(t.dir,-1),s=s??P.length,P.splice(s,0,t)}function Tr(t){t==null?P.length=0:P.splice(t,1)}n.addBand=kr,n.setBand=Sr,n.delBand=Tr;function Er(t,s){y[t].alpha=s,Ve&&ke[t]!=null&&(ke[t].style.opacity=s),Ee&&Me[t]&&(Me[t].style.opacity=s)}let Sl,Dl,Ol;const en={focus:!0};function Mr(t){if(t!=Ol){let s=t==null,r=lt.alpha!=1;y.forEach((o,f)=>{if(a==1||f>0){let g=s||f==0||f==t;o._focus=s?null:g,r&&Er(f,g?1:lt.alpha)}}),Ol=t,r&&jl()}}Ee&&wt&&Ie(Vi,he,t=>{U._lock||(Le(t),Ol!=null&&_l(null,en,!0,xt.setSeries))});function wl(t,s,r){let o=D[s];r&&(t=t/Oe-(o.ori==1?Ue:Ae));let f=fe;o.ori==1&&(f=V,t=f-t),o.dir==-1&&(t=f-t);let g=o._min,x=o._max,M=t/f,F=g+(x-g)*M,Y=o.distr;return Y==3?on(10,F):Y==4?Lo(F,o.asinh):Y==100?o.bwd(F):F}function Ar(t,s){let r=wl(t,L,s);return vl(r,l[0],Ot,Nt)}n.valToIdx=t=>vl(t,l[0]),n.posToIdx=Ar,n.posToVal=wl,n.valToPos=(t,s,r)=>D[s].ori==0?c(t,D[s],r?gt:fe,r?it:0):u(t,D[s],r?Et:V,r?Tt:0),n.setCursor=(t,s,r)=>{Qe=t.left,nt=t.top,Nl(null,s,r)};function xi(t,s){et($l,ln,Xe.left=t),et($l,kn,Xe.width=s)}function bi(t,s){et($l,yn,Xe.top=t),et($l,Tn,Xe.height=s)}let mn=w.ori==0?xi:bi,_n=w.ori==1?xi:bi;function Cr(){if(Ee&&oe.live)for(let t=a==2?1:0;t<y.length;t++){if(t==0&&je)continue;let s=oe.values[t],r=0;for(let o in s)st[t][r++].firstChild.nodeValue=s[o]}}function Ss(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{ge[o]=r}):Oo(t.idx)||ge.fill(t.idx),oe.idx=ge[0]),Ee&&oe.live){for(let r=0;r<y.length;r++)(r>0||a==1&&!je)&&Dr(r,ge[r]);Cr()}B=!1,s!==!1&&Vt("setLegend")}n.setLegend=Ss;function Dr(t,s){let r=y[t],o=t==0&&I==2?fl:l[t],f;je?f=r.values(n,t,s)??He:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?He:{_:f}),oe.values[t]=f}function Nl(t,s,r){_i=Qe,wi=nt,[Qe,nt]=U.move(n,Qe,nt),U.left=Qe,U.top=nt,Ve&&(Jl&&yl(Jl,Mt(Qe),0,fe,V),Zl&&yl(Zl,0,Mt(nt),fe,V));let o,f=Ot>Nt;Sl=qe,Dl=null;let g=w.ori==0?fe:V,x=w.ori==1?fe:V;if(Qe<0||mt==0||f){o=U.idx=null;for(let M=0;M<y.length;M++){let F=ke[M];F!=null&&yl(F,-10,-10,fe,V)}wt&&_l(null,en,!0,t==null&&xt.setSeries),oe.live&&(ge.fill(o),B=!0)}else{let M,F,Y;a==1&&(M=w.ori==0?Qe:nt,F=wl(M,L),o=U.idx=vl(F,l[0],Ot,Nt),Y=N(l[0][o],w,g,0));let j=-10,X=-10,pe=0,Fe=0,Pe=!0,Se="",ce="";for(let ae=a==2?1:0;ae<y.length;ae++){let $e=y[ae],dt=ge[ae],It=dt==null?null:a==1?l[ae][dt]:l[ae][1][dt],We=U.dataIdx(n,ae,o,F),pt=We==null?null:a==1?l[ae][We]:l[ae][1][We];if(B=B||pt!=It||We!=dt,ge[ae]=We,ae>0&&$e.show){let Xt=We==null?-10:We==o?Y:N(a==1?l[0][We]:l[ae][0][We],w,g,0),Yt=pt==null?-10:le(pt,a==1?D[$e.scale]:D[$e.facets[1].scale],x,0);if(wt&&pt!=null){let il=w.ori==1?Qe:nt,dl=At(lt.dist(n,ae,We,Yt,il));if(dl<Sl){let xl=lt.bias;if(xl!=0){let $t=wl(il,$e.scale),al=pt>=0?1:-1,pl=$t>=0?1:-1;pl==al&&(pl==1?xl==1?pt>=$t:pt<=$t:xl==1?pt<=$t:pt>=$t)&&(Sl=dl,Dl=ae)}else Sl=dl,Dl=ae}}if(B||Ge){let il,dl;w.ori==0?(il=Xt,dl=Yt):(il=Yt,dl=Xt);let xl,$t,al,pl,bl,qt,el=!0,Gl=ye.bbox;if(Gl!=null){el=!1;let Kt=Gl(n,ae);al=Kt.left,pl=Kt.top,xl=Kt.width,$t=Kt.height}else al=il,pl=dl,xl=$t=ye.size(n,ae);if(qt=ye.fill(n,ae),bl=ye.stroke(n,ae),Ge)ae==Dl&&Sl<=lt.prox&&(j=al,X=pl,pe=xl,Fe=$t,Pe=el,Se=qt,ce=bl);else{let Kt=ke[ae];Kt!=null&&(at[ae]=al,ct[ae]=pl,qi(Kt,xl,$t,el),Ui(Kt,qt,bl),yl(Kt,ol(al),ol(pl),fe,V))}}}}if(Ge){let ae=lt.prox,$e=Ol==null?Sl<=ae:Sl>ae||Dl!=Ol;if(B||$e){let dt=ke[0];dt!=null&&(at[0]=j,ct[0]=X,qi(dt,pe,Fe,Pe),Ui(dt,Se,ce),yl(dt,ol(j),ol(X),fe,V))}}}if(Xe.show&&Al)if(t!=null){let[M,F]=xt.scales,[Y,j]=xt.match,[X,pe]=t.cursor.sync.scales,Fe=t.cursor.drag;if(Gt=Fe._x,zt=Fe._y,Gt||zt){let{left:Pe,top:Se,width:ce,height:ae}=t.select,$e=t.scales[X].ori,dt=t.posToVal,It,We,pt,Xt,Yt,il=M!=null&&Y(M,X),dl=F!=null&&j(F,pe);il&&Gt?($e==0?(It=Pe,We=ce):(It=Se,We=ae),pt=D[M],Xt=N(dt(It,X),pt,g,0),Yt=N(dt(It+We,X),pt,g,0),mn(gl(Xt,Yt),At(Yt-Xt))):mn(0,g),dl&&zt?($e==1?(It=Pe,We=ce):(It=Se,We=ae),pt=D[F],Xt=le(dt(It,pe),pt,x,0),Yt=le(dt(It+We,pe),pt,x,0),_n(gl(Xt,Yt),At(Yt-Xt))):_n(0,x)}else Es()}else{let M=At(_i-gi),F=At(wi-mi);if(w.ori==1){let pe=M;M=F,F=pe}Gt=Wt.x&&M>=Wt.dist,zt=Wt.y&&F>=Wt.dist;let Y=Wt.uni;Y!=null?Gt&&zt&&(Gt=M>=Y,zt=F>=Y,!Gt&&!zt&&(F>M?zt=!0:Gt=!0)):Wt.x&&Wt.y&&(Gt||zt)&&(Gt=zt=!0);let j,X;Gt&&(w.ori==0?(j=Ql,X=Qe):(j=Xl,X=nt),mn(gl(j,X),At(X-j)),zt||_n(0,x)),zt&&(w.ori==1?(j=Ql,X=Qe):(j=Xl,X=nt),_n(gl(j,X),At(X-j)),Gt||mn(0,g)),!Gt&&!zt&&(mn(0,0),_n(0,0))}if(Wt._x=Gt,Wt._y=zt,t==null){if(r){if(Pi!=null){let[M,F]=xt.scales;xt.values[0]=M!=null?wl(w.ori==0?Qe:nt,M):null,xt.values[1]=F!=null?wl(w.ori==1?Qe:nt,F):null}xn(Ds,n,Qe,nt,fe,V,o)}if(wt){let M=r&&xt.setSeries,F=lt.prox;Ol==null?Sl<=F&&_l(Dl,en,!0,M):Sl>F?_l(null,en,!0,M):Dl!=Ol&&_l(Dl,en,!0,M)}}B&&(oe.idx=o,Ss()),s!==!1&&Vt("setCursor")}let Ll=null;Object.defineProperty(n,"rect",{get(){return Ll==null&&wn(!1),Ll}});function wn(t=!1){t?Ll=null:(Ll=k.getBoundingClientRect(),Vt("syncRect",Ll))}function yi(t,s,r,o,f,g,x){U._lock||Al&&t!=null&&t.movementX==0&&t.movementY==0||(ks(t,s,r,o,f,g,x,!1,t!=null),t!=null?Nl(null,!0,!0):Nl(s,!0,!1))}function ks(t,s,r,o,f,g,x,M,F){if(Ll==null&&wn(!1),Le(t),t!=null)r=t.clientX-Ll.left,o=t.clientY-Ll.top;else{if(r<0||o<0){Qe=-10,nt=-10;return}let[Y,j]=xt.scales,X=s.cursor.sync,[pe,Fe]=X.values,[Pe,Se]=X.scales,[ce,ae]=xt.match,$e=s.axes[0].side%2==1,dt=w.ori==0?fe:V,It=w.ori==1?fe:V,We=$e?g:f,pt=$e?f:g,Xt=$e?o:r,Yt=$e?r:o;if(Pe!=null?r=ce(Y,Pe)?p(pe,D[Y],dt,0):-10:r=dt*(Xt/We),Se!=null?o=ae(j,Se)?p(Fe,D[j],It,0):-10:o=It*(Yt/pt),w.ori==1){let il=r;r=o,o=il}}F&&(s==null||s.cursor.event.type==Ds)&&((r<=1||r>=fe-1)&&(r=zl(r,fe)),(o<=1||o>=V-1)&&(o=zl(o,V))),M?(gi=r,mi=o,[Ql,Xl]=U.move(n,r,o)):(Qe=r,nt=o)}const Ts={width:0,height:0,left:0,top:0};function Es(){Vn(Ts,!1)}let Si,ki,Ti,Ei;function Mi(t,s,r,o,f,g,x){Al=!0,Gt=zt=Wt._x=Wt._y=!1,ks(t,s,r,o,f,g,x,!0,!1),t!=null&&(Ie(Ls,Ns,Ai,!1),xn(Gi,n,Ql,Xl,fe,V,null));let{left:M,top:F,width:Y,height:j}=Xe;Si=M,ki=F,Ti=Y,Ei=j}function Ai(t,s,r,o,f,g,x){Al=Wt._x=Wt._y=!1,ks(t,s,r,o,f,g,x,!1,!0);let{left:M,top:F,width:Y,height:j}=Xe,X=Y>0||j>0,pe=Si!=M||ki!=F||Ti!=Y||Ei!=j;if(X&&pe&&Vn(Xe),Wt.setScale&&X&&pe){let Fe=M,Pe=Y,Se=F,ce=j;if(w.ori==1&&(Fe=F,Pe=j,Se=M,ce=Y),Gt&&Cl(L,wl(Fe,L),wl(Fe+Pe,L)),zt)for(let ae in D){let $e=D[ae];ae!=L&&$e.from==null&&$e.min!=qe&&Cl(ae,wl(Se+ce,ae),wl(Se,ae))}Es()}else U.lock&&(U._lock=!U._lock,Nl(s,!0,t!=null));t!=null&&(Lt(Ls,Ns),xn(Ls,n,Qe,nt,fe,V,null))}function Lr(t,s,r,o,f,g,x){if(U._lock)return;Le(t);let M=Al;if(Al){let F=!0,Y=!0,j=10,X,pe;w.ori==0?(X=Gt,pe=zt):(X=zt,pe=Gt),X&&pe&&(F=Qe<=j||Qe>=fe-j,Y=nt<=j||nt>=V-j),X&&F&&(Qe=Qe<Ql?0:fe),pe&&Y&&(nt=nt<Xl?0:V),Nl(null,!0,!0),Al=!1}Qe=-10,nt=-10,ge.fill(null),Nl(null,!0,!0),M&&(Al=M)}function Ci(t,s,r,o,f,g,x){U._lock||(Le(t),os(),Es(),t!=null&&xn(Ii,n,Qe,nt,fe,V,null))}function Di(){K.forEach(Qu),ie(n.width,n.height,!0)}Wl(jn,rn,Di);const tn={};tn.mousedown=Mi,tn.mousemove=yi,tn.mouseup=Ai,tn.dblclick=Ci,tn.setSeries=(t,s,r,o)=>{let f=xt.match[2];r=f(n,s,r),r!=-1&&_l(r,o,!0,!1)},Ve&&(Ie(Gi,k,Mi),Ie(Ds,k,yi),Ie(zi,k,t=>{Le(t),wn(!1)}),Ie(Vi,k,Lr),Ie(Ii,k,Ci),Us.add(n),n.syncRect=wn);const In=n.hooks=e.hooks||{};function Vt(t,s,r){ws?gn.push([t,s,r]):t in In&&In[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)In[s]=(In[s]||[]).concat(t.hooks[s])});const Li=(t,s,r)=>r,xt=bt({key:null,setSeries:!1,filters:{pub:Qi,sub:Qi},scales:[L,y[1]?y[1].scale:null],match:[Xi,Xi,Li],values:[null,null]},U.sync);xt.match.length==2&&xt.match.push(Li),U.sync=xt;const Pi=xt.key,Ms=er(Pi);function xn(t,s,r,o,f,g,x){xt.filters.pub(t,s,r,o,f,g,x)&&Ms.pub(t,s,r,o,f,g,x)}Ms.sub(n);function Pr(t,s,r,o,f,g,x){xt.filters.sub(t,s,r,o,f,g,x)&&tn[t](null,s,r,o,f,g,x)}n.pub=Pr;function Rr(){Ms.unsub(n),Us.delete(n),_t.clear(),Vs(jn,rn,Di),v.remove(),he?.remove(),Vt("destroy")}n.destroy=Rr;function As(){Vt("init",e,l),oi(l||e.data,!1),O[L]?xs(L,O[L]):os(),Q=Xe.show&&(Xe.width>0||Xe.height>0),z=B=!0,ie(e.width,e.height)}return y.forEach(Je),K.forEach(Fl),i?i instanceof HTMLElement?(i.appendChild(v),As()):i(n,As):As(),n}yt.assign=bt;yt.fmtNum=$s;yt.rangeNum=Jn;yt.rangeLog=ts;yt.rangeAsinh=Qs;yt.orient=Yl;yt.pxRatio=Oe;yt.join=Ho;yt.fmtDate=ti,yt.tzDate=$o;yt.sync=er;{yt.addGap=Ou,yt.clipGaps=ss;let e=yt.paths={points:ar};e.linear=or,e.stepped=zu,e.bars=Vu,e.spline=Bu}var Xu=De('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),$u=De('<span class="estimated-badge svelte-3wi8ix">est</span>'),ec=De('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),tc=De('<span class="estimated-badge svelte-3wi8ix">est</span>'),lc=De("<span> </span> <!>",1),nc=De('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),sc=De('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),ic=De('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function ac(e,l){Xn(l,!0);const i=.5,n=1.2,a=0,c=100;function u(w,I){const N=[...w].sort((R,me)=>R-me),le=I/100*(N.length-1),O=Math.floor(le),Z=Math.ceil(le);return O===Z?N[O]:N[O]+(N[Z]-N[O])*(le-O)}let p=an(l,"trend",3,null),h=Ne(!1),v=Ne(""),S=Ne(null),m=Be(()=>Yn.config.temp_units==="C"),_=Be(Ta),H=Be(Ks),k=Be(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(we=>we.status!=="invalid");if(w.length===0)return null;const I=[...w].sort((we,St)=>new Date(we.timestamp).getTime()-new Date(St.timestamp).getTime()),N=I[0],le=I[I.length-1],O=I.map(we=>we.sg_calibrated??we.sg_raw).filter(we=>we!==null&&we>=i&&we<=n),Z=I.map(we=>we.temp_calibrated??we.temp_raw).filter(we=>we!==null&&we>=a&&we<=c);if(O.length===0)return null;const R=O[O.length-1],me=O[0],de=u(O,95),ue=u(O,5),ge=new Date(N.timestamp).getTime(),oe=new Date(le.timestamp).getTime(),Ee=(oe-ge)/(1e3*60*60*24),Ve=Ee>0?(R-me)/Ee:0;let Ce=null,he=null,ot=null,tt=null;if(Z.length>0){const we=Z[Z.length-1],St=Z.reduce((Ie,Lt)=>Ie+Lt,0)/Z.length,Ut=u(Z,95),_t=u(Z,5);Ce=d(m)?we:we*9/5+32,he=d(m)?St:St*9/5+32,ot=d(m)?Ut:Ut*9/5+32,tt=d(m)?_t:_t*9/5+32}let Me=0;const st=.001;for(let we=O.length-2;we>=0;we--)if(Math.abs(O[we]-R)>st){const St=new Date(I[we+1].timestamp).getTime();Me=(oe-St)/(1e3*60*60*24);break}let ut=null,je=null;const He=l.originalGravity??de,Dt=l.originalGravity===null;return He>1&&He>R&&(ut=(He-R)/(He-1)*100,je=(He-R)*131.25),{currentSg:R,firstSg:me,highSg:de,lowSg:ue,currentTemp:Ce,avgTemp:he,highTemp:ot,lowTemp:tt,fermRate:Ve,durationDays:Ee,daysAtCurrentSg:Me,apparentAttenuation:ut,abv:je,ogIsEstimated:Dt,effectiveOg:He}});function q(){re(v,l.originalGravity?.toFixed(3)??"",!0),re(h,!0),setTimeout(()=>d(S)?.focus(),0)}function $(){const w=d(v).trim();if(!w)l.onOgChange?.(null);else{const I=parseFloat(w);!isNaN(I)&&I>=.99&&I<=1.2&&l.onOgChange?.(I)}re(h,!1)}function se(w){w.key==="Enter"?$():w.key==="Escape"&&re(h,!1)}function y(w){return An(w)}function K(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function D(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function P(w){return w===null?"--":w.toFixed(1)}function L(w){return w===null?"--":`${w.toFixed(1)}%`}var ne=Ln(),ee=kl(ne);{var J=w=>{var I=sc(),N=C(I),le=C(N),O=C(le),Z=C(O,!0);A(O);var R=W(O,2),me=W(C(R),2),de=C(me,!0);A(me),A(R);var ue=W(R,2),ge=W(C(ue),2),oe=C(ge,!0);A(ge),A(ue);var U=W(ue,2),Ee=W(C(U),2),Ve=C(Ee,!0);A(Ee),A(U);var Ce=W(U,2),he=W(C(Ce),2),ot=C(he,!0);A(he),A(Ce),A(le);var tt=W(le,2),Me=W(C(tt),2),st=W(C(Me),2),ut=C(st,!0),je=W(ut),He=C(je,!0);A(je),A(st),A(Me);var Dt=W(Me,2),we=W(C(Dt),2),St=C(we,!0),Ut=W(St),_t=C(Ut,!0);A(Ut),A(we),A(Dt);var Ie=W(Dt,2),Lt=W(C(Ie),2),kt=C(Lt,!0),vt=W(kt),fe=C(vt,!0);A(vt),A(Lt),A(Ie);var V=W(Ie,2),Ae=W(C(V),2),Ue=C(Ae,!0),Pt=W(Ue),Jt=C(Pt,!0);A(Pt),A(Ae),A(V),A(tt),A(N);var Bt=W(N,2),Rt=C(Bt),it=W(C(Rt),2);let Tt;var gt=C(it);A(it),A(Rt);var Et=W(Rt,2),ul=W(C(Et),2),sl=C(ul,!0);A(ul),A(Et);var Zt=W(Et,2),z=W(C(Zt),2),Q=C(z,!0);A(z),A(Zt);var B=W(Zt,2),ie=W(C(B),2);{var T=Ge=>{var ke=Xu();Sa(ke),ke.__keydown=se,qs(ke,at=>re(S,at),()=>d(S)),xa("blur",ke,$),ka(ke,()=>d(v),at=>re(v,at)),xe(Ge,ke)},E=Ge=>{var ke=Ln(),at=kl(ke);{var ct=Je=>{var Ft=ec();Ft.__click=q;var Ht=C(Ft);let Ze;var Fl=C(Ht,!0);A(Ht);var cl=W(Ht,2);{var Ml=ft=>{var mt=$u();xe(ft,mt)};rt(cl,ft=>{d(k).ogIsEstimated&&ft(Ml)})}Hl(2),A(Ft),ht(ft=>{sn(Ft,"title",d(k).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Ze=ml(Ht,1,"stat-value svelte-3wi8ix",null,Ze,{estimated:d(k).ogIsEstimated}),_e(Fl,ft)},[()=>y(d(k).effectiveOg)]),xe(Je,Ft)},Ye=Je=>{var Ft=lc(),Ht=kl(Ft);let Ze;var Fl=C(Ht,!0);A(Ht);var cl=W(Ht,2);{var Ml=ft=>{var mt=tc();xe(ft,mt)};rt(cl,ft=>{d(k).ogIsEstimated&&ft(Ml)})}ht(ft=>{Ze=ml(Ht,1,"stat-value svelte-3wi8ix",null,Ze,{estimated:d(k).ogIsEstimated}),_e(Fl,ft)},[()=>y(d(k).effectiveOg)]),xe(Je,Ft)};rt(at,Je=>{l.onOgChange?Je(ct):Je(Ye,!1)},!0)}xe(Ge,ke)};rt(ie,Ge=>{l.onOgChange&&d(h)?Ge(T):Ge(E,!1)})}A(B);var b=W(B,2),G=W(C(b),2),ve=C(G,!0);A(G),A(b);var be=W(b,2),Le=W(C(be),2),ye=C(Le,!0);A(Le),A(be);var lt=W(be,2);{var wt=Ge=>{var ke=nc(),at=W(C(ke),2),ct=C(at,!0);A(at),Hl(2),A(ke),ht((Ye,Je)=>{sn(ke,"title",`Estimated time until target FG (R=${Ye??""})`),_e(ct,Je)},[()=>p().r2.toFixed(2),()=>D(p().daysToFg)]),xe(Ge,ke)};rt(lt,Ge=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&Ge(wt)})}A(Bt),A(I),ht((Ge,ke,at,ct,Ye,Je,Ft,Ht,Ze,Fl,cl,Ml,ft)=>{_e(Z,d(H)==="SG"?"Gravity":d(H)==="P"?"Plato":"Brix"),_e(de,Ge),_e(oe,ke),_e(Ve,at),_e(ot,ct),_e(ut,Ye),_e(He,d(_)),_e(St,Je),_e(_t,d(_)),_e(kt,Ft),_e(fe,d(_)),_e(Ue,Ht),_e(Jt,d(_)),Tt=ml(it,1,"stat-value rate svelte-3wi8ix",null,Tt,{fermenting:d(k).fermRate<0}),_e(gt,`${Ze??""}/day`),_e(sl,Fl),_e(Q,cl),_e(ve,Ml),_e(ye,ft)},[()=>y(d(k).currentSg),()=>y(d(k).firstSg),()=>y(d(k).highSg),()=>y(d(k).lowSg),()=>P(d(k).currentTemp),()=>P(d(k).avgTemp),()=>P(d(k).highTemp),()=>P(d(k).lowTemp),()=>K(d(k).fermRate),()=>D(d(k).durationDays),()=>D(d(k).daysAtCurrentSg),()=>L(d(k).apparentAttenuation),()=>L(d(k).abv)]),xe(w,I)},te=w=>{var I=ic();xe(w,I)};rt(ee,w=>{d(k)?w(J):w(te,!1)})}xe(e,ne),$n()}Qn(["keydown","click"]);var rc=De('<button type="button"> </button>'),oc=De("<option> </option>"),uc=De('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),cc=De('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),fc=De('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),dc=De('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function pc(e,l){Xn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Be(()=>Yn.config.smoothing_enabled),c=Be(()=>Yn.config.smoothing_samples),u=Ne("UTC"),p=Ne(0),h=Ne(3),v=an(l,"deviceColor",3,"BLACK"),S=an(l,"originalGravity",3,null),m=an(l,"controlEvents",19,()=>[]),_=Be(()=>Yn.config.temp_units==="C"),H=Be(Ks),k,q=null,$=Ne(!0),se=Ne(null),y=Ne(24),K=Ne(Bl([])),D=Ne(Bl([])),P=Ne(Bl([])),L=Ne(null),ne=Ne(null);const ee={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},J="#facc15",te="rgba(250, 204, 21, 0.3)",w="#71717a",I="#a1a1aa",N="rgba(255, 255, 255, 0.04)",le="#22d3ee",O="#a78bfa",Z="rgba(250, 204, 21, 0.5)",R="brewsignal_chart_trend_enabled";let me=Ne(!0),de=Ne(Bl([]));function ue(z,Q,B=1.01){const ie=[];for(let Ye=0;Ye<z.length;Ye++)Q[Ye]!==null&&ie.push([z[Ye],Q[Ye]]);if(ie.length<10)return null;const T=ie.length;let E=0,b=0,G=0,ve=0;for(const[Ye,Je]of ie)E+=Ye,b+=Je,G+=Ye*Je,ve+=Ye*Ye;const be=T*ve-E*E;if(Math.abs(be)<1e-10)return null;const Le=(T*G-E*b)/be,ye=(b-Le*E)/T,lt=b/T;let wt=0,Ge=0;for(const[Ye,Je]of ie){const Ft=Le*Ye+ye;wt+=(Je-Ft)**2,Ge+=(Je-lt)**2}const ke=Ge>0?1-wt/Ge:0;let at=null,ct=null;if(Le<0&&ke>.3){const Ye=z[z.length-1],Je=(B-ye)/Le;Je>Ye&&(ct=(Je-Ye)/(1440*60),ct>0&&ct<60?at=B:ct=null)}return{slope:Le,intercept:ye,r2:ke,predictedFg:at,daysToFg:ct}}function ge(z){const Q=[];let B=null,ie=null;for(const E of z){const b=he(E.timestamp);E.action==="heat_on"?B=b:E.action==="heat_off"&&B!==null?(Q.push({type:"heating",startTime:B,endTime:b}),B=null):E.action==="cool_on"?ie=b:E.action==="cool_off"&&ie!==null&&(Q.push({type:"cooling",startTime:ie,endTime:b}),ie=null)}const T=Date.now()/1e3;return B!==null&&Q.push({type:"heating",startTime:B,endTime:T}),ie!==null&&Q.push({type:"cooling",startTime:ie,endTime:T}),Q}function oe(z,Q){return z.map(B=>Q.slope*B+Q.intercept)}function U(z,Q,B){const ie=new Date(z*1e3);try{return B?ie.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:Q}):ie.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:Q})}catch(T){return console.warn("Invalid timezone:",Q,T),B?ie.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):ie.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function Ee(z,Q,B){const ie=J,T=ee[v()]||I;return{width:z,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[E=>{const b=E.cursor.idx;if(b==null)return;const G=E.root.querySelector(".u-legend");G&&(G.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`)}]},scales:{x:{time:!0},sg:{auto:!0,range:(E,b,G)=>{const ve=(G-b)*.1||.005;return[b-ve,G+ve]}},temp:{auto:!0,range:(E,b,G)=>{const ve=G-b,be=10;if(ve<be){const ye=(G+b)/2;return[ye-be/2,ye+be/2]}const Le=ve*.1;return[b-Le,G+Le]}}},axes:[{stroke:w,grid:{stroke:N,width:1},ticks:{stroke:N,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(E,b)=>b.map(G=>U(G,B,d(y)<=24))},{scale:"sg",stroke:ie,grid:{stroke:N,width:1},ticks:{stroke:N,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(E,b)=>b.map(G=>An(G)),side:3},{scale:"temp",stroke:T,grid:{show:!1},ticks:{stroke:N,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(E,b)=>b.map(G=>G.toFixed(0)+""),side:1}],series:[{value:(E,b)=>U(b,B,!1)+" "+U(b,B,!0)},{label:d(H)==="SG"?"Gravity":d(H)==="P"?"Plato":"Brix",scale:"sg",stroke:ie,width:2,value:(E,b)=>b!==null?An(b):"--",fill:(E,b)=>{const G=E.ctx.createLinearGradient(0,E.bbox.top,0,E.bbox.top+E.bbox.height);return G.addColorStop(0,te),G.addColorStop(1,"transparent"),G},points:{show:!1},paths:yt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:T,width:1.5,dash:[4,4],value:(E,b)=>b!==null?b.toFixed(1)+"":"--",points:{show:!1},paths:yt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:le,width:1.5,dash:[2,4],value:(E,b)=>b!==null?b.toFixed(1)+"":"--",points:{show:!1},paths:yt.paths.spline?.()},{label:"Chamber",scale:"temp",stroke:O,width:1.5,dash:[4,2],value:(E,b)=>b!==null?b.toFixed(1)+"":"--",points:{show:!1},paths:yt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:Z,width:2,dash:[8,4],value:(E,b)=>b!==null?An(b):"--",points:{show:!1},show:d(me)}]}}function Ve(z,Q){if(Q<=1)return z;const B=[];for(let ie=0;ie<z.length;ie++){const T=[],E=Math.floor(Q/2);for(let b=Math.max(0,ie-E);b<=Math.min(z.length-1,ie+E);b++){const G=z[b];G!==null&&T.push(G)}T.length>0?B.push(T.reduce((b,G)=>b+G,0)/T.length):B.push(null)}return B}function Ce(z,Q,B,ie,T,E){if(z.length<=E)return[z,Q,B,ie,T];const b=Math.ceil(z.length/E),G=[],ve=[],be=[],Le=[],ye=[];for(let lt=0;lt<z.length;lt+=b){const wt=Math.min(lt+b,z.length);let Ge=0,ke=0,at=0,ct=0,Ye=0,Je=0,Ft=0,Ht=0;for(let Ze=lt;Ze<wt;Ze++)Q[Ze]!==null&&(Ge+=Q[Ze],ke++),B[Ze]!==null&&(at+=B[Ze],ct++),ie[Ze]!==null&&(Ye+=ie[Ze],Je++),T[Ze]!==null&&(Ft+=T[Ze],Ht++);G.push(z[Math.floor((lt+wt-1)/2)]),ve.push(ke>0?Ge/ke:null),be.push(ct>0?at/ct:null),Le.push(Je>0?Ye/Je:null),ye.push(Ht>0?Ft/Ht:null)}return[G,ve,be,Le,ye]}function he(z){return!z.endsWith("Z")&&!z.match(/[+-]\d{2}:\d{2}$/)&&(z=z+"Z"),new Date(z).getTime()/1e3}function ot(z,Q,B){if(z.length===0||Q.length===0)return Q.map(()=>null);const ie=[...z].sort((b,G)=>he(b.timestamp)-he(G.timestamp)),T=ie.map(b=>he(b.timestamp)),E=ie.map(b=>b.temperature===null?null:B?b.temperature:b.temperature*9/5+32);return Q.map(b=>{let G=null,ve=null;for(let be=0;be<T.length;be++)if(T[be]<=b&&(G={time:T[be],temp:E[be]}),T[be]>=b&&ve===null){ve={time:T[be],temp:E[be]};break}if(G&&ve&&G.temp!==null&&ve.temp!==null){if(G.time===ve.time)return G.temp;const be=(b-G.time)/(ve.time-G.time);return G.temp+be*(ve.temp-G.temp)}return G!==null&&G.temp!==null?G.temp:ve!==null&&ve.temp!==null?ve.temp:null})}function tt(z,Q,B,ie){const T=[...z].reverse();let E=[],b=[],G=[];for(const wt of T){E.push(he(wt.timestamp)),b.push(wt.sg_calibrated??wt.sg_raw);const Ge=wt.temp_calibrated??wt.temp_raw;Ge!==null?G.push(ie?Ge:Ge*9/5+32):G.push(null)}let ve=ot(Q,E,ie),be=ot(B,E,ie);d(a)&&d(c)>1&&(b=Ve(b,d(c)),G=Ve(G,d(c)),ve=Ve(ve,d(c)),be=Ve(be,d(c))),[E,b,G,ve,be]=Ce(E,b,G,ve,be,500);const ye=ue(E,b);re(L,ye,!0);const lt=ye?oe(E,ye):E.map(()=>null);return[E,b,G,ve,be,lt]}const Me=3e4;async function st(z=!1){const B=Date.now()-d(p);if(!(!z&&d(p)>0&&B<Me)){re($,!0),re(se,null);try{if(!d(ne)){const ie=await Yr(l.batchId);re(ne,ie.device_id??null,!0)}if(d(ne)){const[ie,T,E]=await Promise.all([qr(d(ne),d(y),l.batchId),Kr(d(y)).catch(()=>[]),jr(d(y)).catch(()=>[])]);re(K,ie,!0),re(D,T,!0),re(P,E,!0),ut()}else re(K,[],!0),re(D,[],!0),re(P,[],!0),re(se,"No device assigned to this batch")}catch(ie){re(se,ie instanceof Error?ie.message:"Failed to load data",!0)}finally{re(p,Date.now(),!0),re($,!1)}}}function ut(){if(!k||d(K).length===0)return;const z=tt(d(K),d(D),d(P),d(_)),Q=Ee(k.clientWidth,d(_),d(u));q&&q.destroy(),q=new yt(Q,z,k)}function je(){q&&k&&q.setSize({width:k.clientWidth,height:220})}let He=null;function Dt(){if(He&&(clearInterval(He),He=null),d(h)>0){const z=d(h)*60*1e3;He=setInterval(()=>{d($)||st(!1)},z)}}ba(async()=>{const z=localStorage.getItem(i);if(z!==null){const B=parseInt(z,10);Number.isNaN(B)||re(h,B,!0)}const Q=localStorage.getItem(R);Q!==null&&re(me,Q==="true");try{const B=await fetch("/api/system/timezone");if(B.ok){const ie=await B.json();re(u,ie.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await st(!0),window.addEventListener("resize",je),Dt()}),zr(()=>{q?.destroy(),window.removeEventListener("resize",je),He&&clearInterval(He)}),Un(()=>{m()&&m().length>0?re(de,ge(m()),!0):re(de,[],!0)}),Un(()=>{d(_)!==void 0&&d(K).length>0&&k&&ut()}),Un(()=>{d(a),d(c),d(K).length>0&&k&&ut()});function we(z){const Q=Number(z.target.value);re(h,Q,!0),localStorage.setItem(i,String(Q)),Dt(),st(!0)}function St(){re(me,!d(me)),localStorage.setItem(R,String(d(me))),q&&q.setSeries(4,{show:d(me)})}var Ut=dc(),_t=C(Ut),Ie=C(_t);Pn(Ie,21,()=>Ur,Kn,(z,Q)=>{var B=rc();let ie;B.__click=()=>{d(y)!==d(Q).hours&&(re(y,d(Q).hours,!0),st(!0))};var T=C(B,!0);A(B),ht(()=>{ie=ml(B,1,"range-btn svelte-12kwequ",null,ie,{active:d(y)===d(Q).hours}),_e(T,d(Q).label)}),xe(z,B)}),A(Ie);var Lt=W(Ie,2),kt=C(Lt),vt=W(C(kt),2);vt.__change=we,Pn(vt,21,()=>n,Kn,(z,Q)=>{var B=oc(),ie=C(B,!0);A(B);var T={};ht(()=>{_e(ie,d(Q).label),T!==(T=d(Q).value)&&(B.value=(B.__value=d(Q).value)??"")}),xe(z,B)}),A(vt);var fe;$r(vt),A(kt);var V=W(kt,2),Ae=W(C(V),2),Ue=C(Ae);Hl(2),A(Ae);var Pt=W(Ae,4);let Jt;Pt.__click=St;var Bt=C(Pt);Mn(Bt,"background: rgba(250, 204, 21, 0.5);"),Hl(2),A(Pt),A(V),A(Lt),A(_t);var Rt=W(_t,2),it=C(Rt);{var Tt=z=>{var Q=uc();xe(z,Q)};rt(it,z=>{d($)&&z(Tt)})}var gt=W(it,2);{var Et=z=>{var Q=cc(),B=W(C(Q),2);B.__click=()=>st(!0),A(Q),xe(z,Q)},ul=z=>{var Q=Ln(),B=kl(Q);{var ie=T=>{var E=fc();xe(T,E)};rt(B,T=>{d(K).length===0&&T(ie)},!0)}xe(z,Q)};rt(gt,z=>{d(se)?z(Et):z(ul,!1)})}A(Rt),qs(Rt,z=>k=z,()=>k);var sl=W(Rt,2);{var Zt=z=>{{let Q=Be(()=>d(L)?{predictedFg:d(L).predictedFg,daysToFg:d(L).daysToFg,r2:d(L).r2}:null);ac(z,{get readings(){return d(K)},get originalGravity(){return S()},get trend(){return d(Q)}})}};rt(sl,z=>{d(K).length>0&&z(Zt)})}A(Ut),ht(()=>{fe!==(fe=d(h))&&(vt.value=(vt.__value=d(h))??"",eo(vt,d(h))),Mn(Ue,`background: ${(ee[v()]||"var(--text-secondary)")??""};`),Jt=ml(Pt,1,"legend-item legend-toggle svelte-12kwequ",null,Jt,{"legend-disabled":!d(me)}),sn(Pt,"title",d(me)?"Hide trend line":"Show trend line")}),xe(e,Ut),$n()}Qn(["click","change"]);var hc=De('<span class="error-message svelte-1k5rb4o"> </span>'),vc=De('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),gc=De('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),mc=De('<div class="w-1 rounded-sm transition-all"></div>'),_c=De('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),wc=De(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),xc=De('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),bc=De('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),yc=De("<div><!></div>"),Sc=De('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),kc=De('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function Tc(e,l){Xn(l,!0);let i=an(l,"expanded",3,!1),n=an(l,"wide",3,!1),a=Be(()=>l.batch.device_id?ya.tilts.get(l.batch.device_id)??null:null),c=Be(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),u=Be(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=Be(()=>l.progress?.temperature?.current??null),h=Be(()=>d(a)?.color??"BLACK"),v=Be(()=>d(a)?.rssi??null),S=Be(()=>d(a)?.paired??!0),m=Be(()=>d(a)?.last_seen??new Date().toISOString()),_=Be(()=>d(a)?.sg_raw??d(u)),H=Be(()=>d(a)?.temp_raw??d(p)),k=Ne(!1),q=Ne(Bl([])),$=Ne(!1);Un(()=>{i()&&!d(k)&&(re(k,!0),d($)||Jr(l.batch.id,168).then(T=>{re(q,T,!0),re($,!0)}).catch(T=>{console.error("Failed to fetch control events:",T),re(q,[],!0),re($,!0)}))});let se=Ne(!1),y=Ne(""),K=Ne(null),D=Ne(!1),P=Ne(null);function L(){re(y,d(c),!0),re(se,!0),re(P,null),setTimeout(()=>d(K)?.focus(),0)}async function ne(){if(d(D))return;const T=d(y).trim();if(!T||T===d(c)){re(se,!1),re(P,null);return}re(D,!0),re(P,null);try{await Zr(l.batch.id,{name:T}),re(se,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(E){console.error("Failed to update batch name:",E),re(P,E instanceof Error?E.message:"Failed to save batch name",!0)}finally{re(D,!1)}}function ee(T){T.key==="Enter"?ne():T.key==="Escape"&&re(se,!1)}let J=Be(Ta),te=Be(Ks);const w={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function I(T){return An(T)}function N(T){return Wr(T)}function le(T){return T>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:T>=-60?{bars:3,color:"var(--positive)",label:"Good"}:T>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function O(T){const E=Math.floor((Date.now()-new Date(T).getTime())/1e3);if(E<10)return"just now";if(E<60)return`${E}s ago`;const b=Math.floor(E/60);if(b<60)return`${b}m ago`;const G=Math.floor(b/60);return G<24?`${G}h ago`:`${Math.floor(G/24)}d ago`}let Z=Be(()=>w[d(h)]||"var(--tilt-black)"),R=Be(()=>d(v)!==null?le(d(v)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),me=Be(()=>O(d(m)));var de=kc();let ue;var ge=C(de),oe=W(ge,2),U=C(oe),Ee=C(U),Ve=C(Ee);{var Ce=T=>{var E=vc(),b=C(E);Sa(b),b.__keydown=ee;let G;qs(b,Le=>re(K,Le),()=>d(K));var ve=W(b,2);{var be=Le=>{var ye=hc(),lt=C(ye,!0);A(ye),ht(()=>_e(lt,d(P))),xe(Le,ye)};rt(ve,Le=>{d(P)&&Le(be)})}A(E),ht(()=>{b.disabled=d(D),G=ml(b,1,"beer-name-input svelte-1k5rb4o",null,G,{error:d(P)})}),xa("blur",b,ne),ka(b,()=>d(y),Le=>re(y,Le)),xe(T,E)},he=T=>{var E=gc();E.__click=L;var b=C(E),G=C(b,!0);A(b),Hl(2),A(E),ht(()=>_e(G,d(c))),xe(T,E)};rt(Ve,T=>{d(se)?T(Ce):T(he,!1)})}var ot=W(Ve,2),tt=C(ot),Me=W(tt,2),st=C(Me,!0);A(Me),A(ot),A(Ee);var ut=W(Ee,2),je=C(ut),He=C(je);Pn(He,20,()=>Array(4),Kn,(T,E,b)=>{var G=mc();ht(()=>Mn(G,`
									height: ${8+b*4}px;
									background: ${(b<d(R).bars?d(R).color:"var(--bg-hover)")??""};
									opacity: ${b<d(R).bars?1:.4};
								`)),xe(T,G)}),A(He);var Dt=W(He,2),we=C(Dt);A(Dt),A(je);var St=W(je,2);{var Ut=T=>{var E=_c();xe(T,E)};rt(St,T=>{d(S)||T(Ut)})}A(ut),A(U);var _t=W(U,2),Ie=C(_t),Lt=C(Ie),kt=C(Lt,!0),vt=W(kt),fe=C(vt,!0);A(vt),A(Lt);var V=W(Lt,2),Ae=C(V,!0);A(V),A(Ie);var Ue=W(Ie,2),Pt=C(Ue),Jt=C(Pt);{var Bt=T=>{var E=wc(),b=kl(E,!0),G=W(b),ve=C(G,!0);A(G),ht(be=>{_e(b,be),_e(ve,d(J))},[()=>N(d(p))]),xe(T,E)},Rt=T=>{var E=xc(),b=W(kl(E)),G=C(b,!0);A(b),ht(()=>_e(G,d(J))),xe(T,E)};rt(Jt,T=>{d(p)!==null?T(Bt):T(Rt,!1)})}A(Pt),Hl(2),A(Ue),A(_t);var it=W(_t,2);{var Tt=T=>{var E=bc(),b=W(C(E),2),G=C(b,!0);A(b);var ve=W(b,4),be=C(ve);A(ve),A(E),ht((Le,ye)=>{_e(G,Le),_e(be,`${ye??""}${d(J)??""}`)},[()=>I(d(_)),()=>d(H)!==null?N(d(H)):"--"]),xe(T,E)};rt(it,T=>{(d(u)!==d(_)||d(p)!==d(H))&&d(a)&&T(Tt)})}var gt=W(it,2);{var Et=T=>{var E=yc();let b;var G=C(E);to(G,()=>l.batch.id,ve=>{pc(ve,{get batchId(){return l.batch.id},get deviceColor(){return d(h)},get originalGravity(){return l.batch.measured_og},get controlEvents(){return d(q)}})}),A(E),ht(()=>b=ml(E,1,"chart-section svelte-1k5rb4o",null,b,{hidden:!i()})),xe(T,E)};rt(gt,T=>{d(k)&&T(Et)})}var ul=W(gt,2),sl=C(ul),Zt=C(sl);A(sl);var z=W(sl,2),Q=C(z),B=W(Q,2);{var ie=T=>{var E=Sc();E.__click=function(...ve){l.onToggleExpand?.apply(this,ve)};var b=C(E);let G;A(E),ht(()=>{sn(E,"aria-label",i()?"Collapse chart":"Expand chart"),G=ml(b,0,"w-4 h-4 transition-transform",null,G,{"rotate-180":i()})}),xe(T,E)};rt(B,T=>{l.onToggleExpand&&T(ie)})}Hl(2),A(z),A(ul),A(oe),A(de),ht(T=>{ue=ml(de,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,ue,{expanded:i(),wide:n()}),Mn(ge,`background: ${d(Z)??""};`),Mn(tt,`background: ${d(Z)??""};`),_e(st,d(h)),sn(je,"title",`${d(R).label??""} signal (${d(v)??"N/A"??""} dBm)`),_e(we,`${d(v)??"N/A"??""} dBm`),_e(kt,T),_e(fe,d(te)!=="SG"?d(te):""),_e(Ae,d(te)==="SG"?"Gravity":d(te)==="P"?"Plato":"Brix"),_e(Zt,`Updated ${d(me)??""}`),sn(Q,"href",`/batches/${l.batch.id??""}`)},[()=>I(d(u))]),xe(e,de),$n()}Qn(["keydown","click"]);var Ec=De('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Mc=De('<div class="alerts-list svelte-1uha8ag"></div>'),Ac=De('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Cc=De('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Dc=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Lc=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Pc=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Rc=De("<div></div>"),Fc=De("<!> <!>",1);function Qc(e,l){Xn(l,!0);let i=Ne(!1),n=Ne(!1),a=Ne(Bl([])),c=Ne(Bl(new Map)),u=Ne(!0),p=Ne(null);ba(async()=>{const P=localStorage.getItem("brewsignal_alerts_dismissed"),L=localStorage.getItem("brewsignal_alerts_dismissed_time");P==="true"&&L&&Date.now()-parseInt(L,10)<360*60*1e3&&re(i,!0),await h()});async function h(){re(u,!0),re(p,null);try{const P=await Qr();re(a,P.filter(J=>J.status==="fermenting"||J.status==="conditioning"),!0);const L=d(a).map(async J=>{try{const te=await Xr(J.id);return[J.id,te]}catch{return null}}),ne=await Promise.all(L),ee=new Map;for(const J of ne)J&&ee.set(J[0],J[1]);re(c,ee,!0)}catch(P){re(p,P instanceof Error?P.message:"Failed to load batches",!0)}finally{re(u,!1)}}let v=Be(()=>new Map(d(a).filter(P=>P.device_id&&(P.status==="fermenting"||P.status==="conditioning")).map(P=>[P.device_id,P.id]))),S=Be(()=>{const P=new Map(d(c));for(const[L,ne]of d(v)){const ee=ya.tilts.get(L);if(ee){const J=P.get(ne)||{batch_id:ne,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}};P.set(ne,{...J,measured:{...J.measured,current_sg:ee.sg},temperature:{...J.temperature,current:ee.temp,status:J.temperature.yeast_min!==void 0&&J.temperature.yeast_max!==void 0?ee.temp<J.temperature.yeast_min?"too_cold":ee.temp>J.temperature.yeast_max?"too_hot":"in_range":J.temperature.status}})}}return P}),m=Ne(null);function _(P){re(m,d(m)===P?null:P,!0)}function H(){re(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function k(){re(n,!d(n))}var q=Fc();Hr("1uha8ag",P=>{Vr(()=>{Ir.title="Dashboard | BrewSignal"})});var $=kl(q);{var se=P=>{var L=Cc(),ne=C(L),ee=C(ne),J=W(C(ee),4),te=C(J,!0);A(J),A(ee);var w=W(ee,2);w.__click=H,A(ne);var I=W(ne,2);{var N=Z=>{var R=Mc();Pn(R,21,()=>bn.alerts,Kn,(me,de)=>{var ue=Ec();let ge;var oe=C(ue),U=C(oe);A(oe);var Ee=W(oe,2),Ve=C(Ee,!0);A(Ee),A(ue),ht(()=>{ge=ml(ue,1,"alert-item svelte-1uha8ag",null,ge,{warning:d(de).level==="warning",critical:d(de).level==="critical"}),_e(U,`${d(de).day??""}:`),_e(Ve,d(de).message)}),xe(me,ue)}),A(R),xe(Z,R)};rt(I,Z=>{d(n)||Z(N)})}var le=W(I,2);{var O=Z=>{var R=Ac();R.__click=k;var me=C(R,!0);A(R),ht(()=>_e(me,d(n)?`Show ${bn.alerts.length} alerts`:"Show less")),xe(Z,R)};rt(le,Z=>{bn.alerts.length>3&&Z(O)})}A(L),ht(()=>_e(te,bn.alerts.length)),xe(P,L)};rt($,P=>{bn.alerts.length>0&&!d(i)&&P(se)})}var y=W($,2);{var K=P=>{var L=Dc();xe(P,L)},D=P=>{var L=Ln(),ne=kl(L);{var ee=te=>{var w=Lc(),I=W(C(w),4),N=C(I,!0);A(I),A(w),ht(()=>_e(N,d(p))),xe(te,w)},J=te=>{var w=Ln(),I=kl(w);{var N=O=>{var Z=Pc();xe(O,Z)},le=O=>{var Z=Rc();let R;Pn(Z,21,()=>d(a),me=>me.id,(me,de)=>{{let ue=Be(()=>d(S).get(d(de).id)),ge=Be(()=>d(m)===d(de).id),oe=Be(()=>d(a).length===1);Tc(me,{get batch(){return d(de)},get progress(){return d(ue)},get expanded(){return d(ge)},get wide(){return d(oe)},onToggleExpand:()=>_(d(de).id),onBatchUpdated:h})}}),A(Z),ht(()=>R=ml(Z,1,"tilt-grid svelte-1uha8ag",null,R,{"single-tilt":d(a).length===1})),xe(O,Z)};rt(I,O=>{d(a).length===0?O(N):O(le,!1)},!0)}xe(te,w)};rt(ne,te=>{d(p)?te(ee):te(J,!1)},!0)}xe(P,L)};rt(y,P=>{d(u)?P(K):P(D,!1)})}xe(e,q),$n()}Qn(["click"]);export{Qc as component};
