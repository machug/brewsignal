import{d as Ms,f as Fe,s as Ye,a as Ae,c as wi,e as Lr,t as Cr}from"../chunks/CFOZdz7i.js";import{ab as Es,ac as at,p as bi,ad as uo,s as He,aD as Pr,ae as as,g as L,am as Jt,ah as te,aj as K,al as dt,ag as xe,an as il,af as Ds,ak as Mn,V as Rr,ai as Fr}from"../chunks/DNJZA-dt.js";import{e as on,i as En}from"../chunks/CpBggV5R.js";import{i as ot}from"../chunks/BO1qSlwS.js";import{c as Sn,f as zr,s as xi,g as co,d as Vr,r as Nr,h as Wr}from"../chunks/5cCizkKl.js";import{s as un}from"../chunks/DmZ1uaxI.js";import{u as Or,c as Hr,d as Gr,a as Kt}from"../chunks/CLxvjUC1.js";import{s as kn}from"../chunks/yxveMfi8.js";import{b as Br}from"../chunks/Hs0hQ20N.js";import{b as fo,p as yi}from"../chunks/D2iJ0C1G.js";const Ir=!0,Qe="u-",Ur="uplot",Yr=Qe+"hz",jr=Qe+"vt",Kr=Qe+"title",qr=Qe+"wrap",Jr=Qe+"under",Zr=Qe+"over",Qr=Qe+"axis",vl=Qe+"off",$r=Qe+"select",Xr=Qe+"cursor-x",ea=Qe+"cursor-y",ta=Qe+"cursor-pt",la=Qe+"legend",na=Qe+"live",sa=Qe+"inline",ia=Qe+"series",oa=Qe+"marker",Si=Qe+"label",ra=Qe+"value",ln="width",nn="height",en="top",ki="bottom",Nl="left",us="right",As="#000",Ti=As+"0",cs="mousemove",Mi="mousedown",fs="mouseup",Ei="mouseenter",Di="mouseleave",Ai="dblclick",aa="resize",ua="scroll",Li="change",Dn="dppxchange",Ls="--",Ul=typeof window<"u",gs=Ul?document:null,Ol=Ul?window:null,ca=Ul?navigator:null;let Me,bn;function vs(){let e=devicePixelRatio;Me!=e&&(Me=e,bn&&ws(Li,bn,vs),bn=matchMedia(`(min-resolution: ${Me-.001}dppx) and (max-resolution: ${Me+.001}dppx)`),_l(Li,bn,vs),Ol.dispatchEvent(new CustomEvent(Dn)))}function xt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function _s(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Oe(e,l,i){e.style[l]=i+"px"}function Nt(e,l,i,n){let o=gs.createElement(e);return l!=null&&xt(o,l),i?.insertBefore(o,n),o}function Lt(e,l){return Nt("div",e,l)}const Ci=new WeakMap;function qt(e,l,i,n,o){let c="translate("+l+"px,"+i+"px)",u=Ci.get(e);c!=u&&(e.style.transform=c,Ci.set(e,c),l<0||i<0||l>n||i>o?xt(e,vl):_s(e,vl))}const Pi=new WeakMap;function Ri(e,l,i){let n=l+i,o=Pi.get(e);n!=o&&(Pi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Fi=new WeakMap;function zi(e,l,i,n){let o=l+""+i,c=Fi.get(e);o!=c&&(Fi.set(e,o),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Cs={passive:!0},fa={...Cs,capture:!0};function _l(e,l,i,n){l.addEventListener(e,i,n?fa:Cs)}function ws(e,l,i,n){l.removeEventListener(e,i,Cs)}Ul&&vs();function Wt(e,l,i,n){let o;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)o=c?i+n>>1:yt((i+n)/2),l[o]<e?i=o:n=o;return e-l[i]<=l[n]-e?i:n}function po(e){return(i,n,o)=>{let c=-1,u=-1;for(let d=n;d<=o;d++)if(e(i[d])){c=d;break}for(let d=o;d>=n;d--)if(e(i[d])){u=d;break}return[c,u]}}const ho=e=>e!=null,mo=e=>e!=null&&e>0,Cn=po(ho),da=po(mo);function pa(e,l,i,n=0,o=!1){let c=o?da:Cn,u=o?mo:ho;[l,i]=c(e,l,i);let d=e[l],p=e[l];if(l>-1)if(n==1)d=e[l],p=e[i];else if(n==-1)d=e[i],p=e[l];else for(let m=l;m<=i;m++){let w=e[m];u(w)&&(w<d?d=w:w>p&&(p=w))}return[d??Pe,p??-Pe]}function Pn(e,l,i,n){let o=Wi(e),c=Wi(l);e==l&&(o==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?Qt:go,d=o==1?yt:Ct,p=c==1?Ct:yt,m=d(u(Je(e))),w=p(u(Je(l))),g=Hl(i,m),v=Hl(i,w);return i==10&&(m<0&&(g=Re(g,-m)),w<0&&(v=Re(v,-w))),n||i==2?(e=g*o,l=v*c):(e=bo(e,g),l=Rn(l,v)),[e,l]}function Ps(e,l,i,n){let o=Pn(e,l,i,n);return e==0&&(o[0]=0),l==0&&(o[1]=0),o}const Rs=.1,Vi={mode:3,pad:Rs},rn={pad:0,soft:null,mode:0},ha={min:rn,max:rn};function An(e,l,i,n){return Fn(i)?Ni(e,l,i):(rn.pad=i,rn.soft=n?0:null,rn.mode=n?3:0,Ni(e,l,ha))}function ke(e,l){return e??l}function ma(e,l,i){for(l=ke(l,0),i=ke(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ni(e,l,i){let n=i.min,o=i.max,c=ke(n.pad,0),u=ke(o.pad,0),d=ke(n.hard,-Pe),p=ke(o.hard,Pe),m=ke(n.soft,Pe),w=ke(o.soft,-Pe),g=ke(n.mode,0),v=ke(o.mode,0),N=l-e,R=Qt(N),q=pt(Je(e),Je(l)),X=Qt(q),le=Je(X-R);(N<1e-24||le>10)&&(N=0,(e==0||l==0)&&(N=1e-24,g==2&&m!=Pe&&(c=0),v==2&&w!=-Pe&&(u=0)));let y=N||q||1e3,Y=Qt(y),T=Hl(10,yt(Y)),ue=y*(N==0?e==0?.1:1:c),b=Re(bo(e-ue,T/10),24),G=e>=m&&(g==1||g==3&&b<=m||g==2&&b>=m)?m:Pe,W=pt(d,b<G&&e>=G?G:Ot(G,b)),J=y*(N==0?l==0?.1:1:u),ee=Re(Rn(l+J,T/10),24),k=l<=w&&(v==1||v==3&&ee>=w||v==2&&ee<=w)?w:-Pe,ne=Ot(p,ee>k&&l<=k?k:pt(k,ee));return W==ne&&W==0&&(ne=100),[W,ne]}const ga=new Intl.NumberFormat(Ul?ca.language:"en-US"),Fs=e=>ga.format(e),St=Math,Tn=St.PI,Je=St.abs,yt=St.floor,qe=St.round,Ct=St.ceil,Ot=St.min,pt=St.max,Hl=St.pow,Wi=St.sign,Qt=St.log10,go=St.log2,va=(e,l=1)=>St.sinh(e)*l,ds=(e,l=1)=>St.asinh(e/l),Pe=1/0;function Oi(e){return(Qt((e^e>>31)-(e>>31))|0)+1}function bs(e,l,i){return Ot(pt(e,l),i)}function vo(e){return typeof e=="function"}function be(e){return vo(e)?e:()=>e}const _a=()=>{},_o=e=>e,wo=(e,l)=>l,wa=e=>null,Hi=e=>!0,Gi=(e,l)=>e==l,ba=/\.\d*?(?=9{6,}|0{6,})/gm,wl=e=>{if(yo(e)||ol.has(e))return e;const l=`${e}`,i=l.match(ba);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[o,c]=l.split("e");return+`${wl(o)}e${c}`}return Re(e,n)};function ml(e,l){return wl(Re(wl(e/l))*l)}function Rn(e,l){return wl(Ct(wl(e/l))*l)}function bo(e,l){return wl(yt(wl(e/l))*l)}function Re(e,l=0){if(yo(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return qe(n)/i}const ol=new Map;function xo(e){return((""+e).split(".")[1]||"").length}function cn(e,l,i,n){let o=[],c=n.map(xo);for(let u=l;u<i;u++){let d=Je(u),p=Re(Hl(e,u),d);for(let m=0;m<n.length;m++){let w=e==10?+`${n[m]}e${u}`:n[m]*p,g=(u>=0?0:d)+(u>=c[m]?0:c[m]),v=e==10?w:Re(w,g);o.push(v),ol.set(v,g)}}return o}const an={},zs=[],Gl=[null,null],sl=Array.isArray,yo=Number.isInteger,xa=e=>e===void 0;function Bi(e){return typeof e=="string"}function Fn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function ya(e){return e!=null&&typeof e=="object"}const Sa=Object.getPrototypeOf(Uint8Array),So="__proto__";function Bl(e,l=Fn){let i;if(sl(e)){let n=e.find(o=>o!=null);if(sl(n)||l(n)){i=Array(e.length);for(let o=0;o<e.length;o++)i[o]=Bl(e[o],l)}else i=e.slice()}else if(e instanceof Sa)i=e.slice();else if(l(e)){i={};for(let n in e)n!=So&&(i[n]=Bl(e[n],l))}else i=e;return i}function Ke(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let o in n)o!=So&&(Fn(e[o])?Ke(e[o],Bl(n[o])):e[o]=Bl(n[o]))}return e}const ka=0,Ta=1,Ma=2;function Ea(e,l,i){for(let n=0,o,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(o=u-1;o>=0&&e[o]==null;)e[o--]=null;for(o=u+1;o<i&&e[o]==null;)e[c=o++]=null}}}function Da(e,l){if(Ca(e)){let u=e[0].slice();for(let d=1;d<e.length;d++)u.push(...e[d].slice(1));return Pa(u[0])||(u=La(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let p=e[u][0],m=p.length;for(let w=0;w<m;w++)i.add(p[w])}let n=[Array.from(i).sort((u,d)=>u-d)],o=n[0].length,c=new Map;for(let u=0;u<o;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let d=e[u],p=d[0];for(let m=1;m<d.length;m++){let w=d[m],g=Array(o).fill(void 0),v=l?l[u][m]:Ta,N=[];for(let R=0;R<w.length;R++){let q=w[R],X=c.get(p[R]);q===null?v!=ka&&(g[X]=q,v==Ma&&N.push(X)):g[X]=q}Ea(g,N,o),n.push(g)}}return n}const Aa=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function La(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let o=[];for(let c=0;c<e.length;c++){let u=e[c],d=Array(i);for(let p=0;p<i;p++)d[p]=u[n[p]];o.push(d)}return o}function Ca(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let o=e[n][0];if(o.length!=i)return!1;if(o!=l){for(let c=0;c<i;c++)if(o[c]!=l[c])return!1}}return!0}function Pa(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,o=i-1;for(;n<=o&&e[n]==null;)n++;for(;o>=n&&e[o]==null;)o--;if(o<=n)return!0;const c=pt(1,yt((o-n+1)/l));for(let u=e[n],d=n+c;d<=o;d+=c){const p=e[d];if(p!=null){if(p<=u)return!1;u=p}}return!0}const ko=["January","February","March","April","May","June","July","August","September","October","November","December"],To=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Mo(e){return e.slice(0,3)}const Ra=To.map(Mo),Fa=ko.map(Mo),za={MMMM:ko,MMM:Fa,WWWW:To,WWW:Ra};function tn(e){return(e<10?"0":"")+e}function Va(e){return(e<10?"00":e<100?"0":"")+e}const Na={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>tn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>tn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>tn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>tn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>tn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Va(e.getMilliseconds())};function Vs(e,l){l=l||za;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,o;for(;o=n.exec(e);)i.push(o[0][0]=="{"?Na[o[1]]:o[0]);return c=>{let u="";for(let d=0;d<i.length;d++)u+=typeof i[d]=="string"?i[d]:i[d](c,l);return u}}const Wa=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Oa(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Wa?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Eo=e=>e%1==0,Ln=[1,2,2.5,5],Ha=cn(10,-32,0,Ln),Do=cn(10,0,32,Ln),Ga=Do.filter(Eo),gl=Ha.concat(Do),Ns=`
`,Ao="{YYYY}",Ii=Ns+Ao,Lo="{M}/{D}",sn=Ns+Lo,xn=sn+"/{YY}",Co="{aa}",Ba="{h}:{mm}",Wl=Ba+Co,Ui=Ns+Wl,Yi=":{ss}",De=null;function Po(e){let l=e*1e3,i=l*60,n=i*60,o=n*24,c=o*30,u=o*365,p=(e==1?cn(10,0,3,Ln).filter(Eo):cn(10,-3,0,Ln)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,o,o*2,o*3,o*4,o*5,o*6,o*7,o*8,o*9,o*10,o*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const m=[[u,Ao,De,De,De,De,De,De,1],[o*28,"{MMM}",Ii,De,De,De,De,De,1],[o,Lo,Ii,De,De,De,De,De,1],[n,"{h}"+Co,xn,De,sn,De,De,De,1],[i,Wl,xn,De,sn,De,De,De,1],[l,Yi,xn+" "+Wl,De,sn+" "+Wl,De,Ui,De,1],[e,Yi+".{fff}",xn+" "+Wl,De,sn+" "+Wl,De,Ui,De,1]];function w(g){return(v,N,R,q,X,le)=>{let y=[],Y=X>=u,T=X>=c&&X<u,ue=g(R),b=Re(ue*e,3),G=ps(ue.getFullYear(),Y?0:ue.getMonth(),T||Y?1:ue.getDate()),W=Re(G*e,3);if(T||Y){let J=T?X/c:0,ee=Y?X/u:0,k=b==W?b:Re(ps(G.getFullYear()+ee,G.getMonth()+J,1)*e,3),ne=new Date(qe(k/e)),F=ne.getFullYear(),A=ne.getMonth();for(let M=0;k<=q;M++){let se=ps(F+ee*M,A+J*M,1),D=se-g(Re(se*e,3));k=Re((+se+D)*e,3),k<=q&&y.push(k)}}else{let J=X>=o?o:X,ee=yt(R)-yt(b),k=W+ee+Rn(b-W,J);y.push(k);let ne=g(k),F=ne.getHours()+ne.getMinutes()/i+ne.getSeconds()/n,A=X/n,M=v.axes[N]._space,se=le/M;for(;k=Re(k+X,e==1?0:3),!(k>q);)if(A>1){let D=yt(Re(F+A,6))%24,re=g(k).getHours()-D;re>1&&(re=-1),k-=re*n,F=(F+A)%24;let ie=y[y.length-1];Re((k-ie)/X,3)*se>=.7&&y.push(k)}else y.push(k)}return y}}return[p,m,w]}const[Ia,Ua,Ya]=Po(1),[ja,Ka,qa]=Po(.001);cn(2,-53,53,[1]);function ji(e,l){return e.map(i=>i.map((n,o)=>o==0||o==8||n==null?n:l(o==1||i[8]==0?n:i[1]+n)))}function Ki(e,l){return(i,n,o,c,u)=>{let d=l.find(R=>u>=R[0])||l[l.length-1],p,m,w,g,v,N;return n.map(R=>{let q=e(R),X=q.getFullYear(),le=q.getMonth(),y=q.getDate(),Y=q.getHours(),T=q.getMinutes(),ue=q.getSeconds(),b=X!=p&&d[2]||le!=m&&d[3]||y!=w&&d[4]||Y!=g&&d[5]||T!=v&&d[6]||ue!=N&&d[7]||d[1];return p=X,m=le,w=y,g=Y,v=T,N=ue,b(q)})}}function Ja(e,l){let i=Vs(l);return(n,o,c,u,d)=>o.map(p=>i(e(p)))}function ps(e,l,i){return new Date(e,l,i)}function qi(e,l){return l(e)}const Za="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Ji(e,l){return(i,n,o,c)=>c==null?Ls:l(e(n))}function Qa(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function $a(e,l){return e.series[l].fill(e,l)}const Xa={show:!0,live:!0,isolate:!1,mount:_a,markers:{show:!0,width:2,stroke:Qa,fill:$a,dash:"solid"},idx:null,idxs:null,values:[]};function eu(e,l){let i=e.cursor.points,n=Lt(),o=i.size(e,l);Oe(n,ln,o),Oe(n,nn,o);let c=o/-2;Oe(n,"marginLeft",c),Oe(n,"marginTop",c);let u=i.width(e,l,o);return u&&Oe(n,"borderWidth",u),n}function tu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function lu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function nu(e,l){return e.series[l].points.size}const hs=[0,0];function su(e,l,i){return hs[0]=l,hs[1]=i,hs}function yn(e,l,i,n=!0){return o=>{o.button==0&&(!n||o.target==l)&&i(o)}}function ms(e,l,i,n=!0){return o=>{(!n||o.target==l)&&i(o)}}const iu={show:!0,x:!0,y:!0,lock:!1,move:su,points:{one:!1,show:eu,size:nu,width:0,stroke:lu,fill:tu},bind:{mousedown:yn,mouseup:yn,click:yn,dblclick:yn,mousemove:ms,mouseleave:ms,mouseenter:ms},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,o)=>n-o,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ro={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Ws=Ke({},Ro,{filter:wo}),Fo=Ke({},Ws,{size:10}),zo=Ke({},Ro,{show:!1}),Os='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Vo="bold "+Os,No=1.5,Zi={show:!0,scale:"x",stroke:As,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Vo,side:2,grid:Ws,ticks:Fo,border:zo,font:Os,lineGap:No,rotate:0},ou="Value",ru="Time",Qi={show:!0,scale:"x",auto:!1,sorted:1,min:Pe,max:-Pe,idxs:[]};function au(e,l,i,n,o){return l.map(c=>c==null?"":Fs(c))}function uu(e,l,i,n,o,c,u){let d=[],p=ol.get(o)||0;i=u?i:Re(Rn(i,o),p);for(let m=i;m<=n;m=Re(m+o,p))d.push(Object.is(m,-0)?0:m);return d}function xs(e,l,i,n,o,c,u){const d=[],p=e.scales[e.axes[l].scale].log,m=p==10?Qt:go,w=yt(m(i));o=Hl(p,w),p==10&&(o=gl[Wt(o,gl)]);let g=i,v=o*p;p==10&&(v=gl[Wt(v,gl)]);do d.push(g),g=g+o,p==10&&!ol.has(g)&&(g=Re(g,ol.get(o))),g>=v&&(o=g,v=o*p,p==10&&(v=gl[Wt(v,gl)]));while(g<=n);return d}function cu(e,l,i,n,o,c,u){let p=e.scales[e.axes[l].scale].asinh,m=n>p?xs(e,l,pt(p,i),n,o):[p],w=n>=0&&i<=0?[0]:[];return(i<-p?xs(e,l,pt(p,-n),-i,o):[p]).reverse().map(v=>-v).concat(w,m)}const Wo=/./,fu=/[12357]/,du=/[125]/,$i=/1/,ys=(e,l,i,n)=>e.map((o,c)=>l==4&&o==0||c%n==0&&i.test(o.toExponential()[o<0?1:0])?o:null);function pu(e,l,i,n,o){let c=e.axes[i],u=c.scale,d=e.scales[u],p=e.valToPos,m=c._space,w=p(10,u),g=p(9,u)-w>=m?Wo:p(7,u)-w>=m?fu:p(5,u)-w>=m?du:$i;if(g==$i){let v=Je(p(1,u)-w);if(v<m)return ys(l.slice().reverse(),d.distr,g,Ct(m/v)).reverse()}return ys(l,d.distr,g,1)}function hu(e,l,i,n,o){let c=e.axes[i],u=c.scale,d=c._space,p=e.valToPos,m=Je(p(1,u)-p(2,u));return m<d?ys(l.slice().reverse(),3,Wo,Ct(d/m)).reverse():l}function mu(e,l,i,n){return n==null?Ls:l==null?"":Fs(l)}const Xi={show:!0,scale:"y",stroke:As,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Vo,side:3,grid:Ws,ticks:Fo,border:zo,font:Os,lineGap:No,rotate:0};function gu(e,l){let i=3+(e||1)*2;return Re(i*l,3)}function vu(e,l){let{scale:i,idxs:n}=e.series[0],o=e._data[0],c=e.valToPos(o[n[0]],i,!0),u=e.valToPos(o[n[1]],i,!0),d=Je(u-c),p=e.series[l],m=d/(p.points.space*Me);return n[1]-n[0]<=m}const eo={scale:null,auto:!0,sorted:0,min:Pe,max:-Pe},Oo=(e,l,i,n,o)=>o,to={show:!0,auto:!0,sorted:0,gaps:Oo,alpha:1,facets:[Ke({},eo,{scale:"x"}),Ke({},eo,{scale:"y"})]},lo={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Oo,alpha:1,points:{show:vu,filter:null},values:null,min:Pe,max:-Pe,idxs:[],path:null,clip:null};function _u(e,l,i,n,o){return i/10}const Ho={time:Ir,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},wu=Ke({},Ho,{time:!1,ori:1}),no={};function Go(e,l){let i=no[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(o=>o!=n)},pub(n,o,c,u,d,p,m){for(let w=0;w<i.plots.length;w++)i.plots[w]!=o&&i.plots[w].pub(n,o,c,u,d,p,m)}},e!=null&&(no[e]=i)),i}const Il=1,Ss=2;function bl(e,l,i){const n=e.mode,o=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,d=e.bbox;let p=c[0],m=n==2?c[1]:c[l],w=n==2?u[o.facets[0].scale]:u[e.series[0].scale],g=n==2?u[o.facets[1].scale]:u[o.scale],v=d.left,N=d.top,R=d.width,q=d.height,X=e.valToPosH,le=e.valToPosV;return w.ori==0?i(o,p,m,w,g,X,le,v,N,R,q,Vn,Yl,Wn,Io,Yo):i(o,p,m,w,g,le,X,N,v,q,R,Nn,jl,Bs,Uo,jo)}function Hs(e,l){let i=0,n=0,o=ke(e.bands,zs);for(let c=0;c<o.length;c++){let u=o[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function bu(e,l,i,n,o){let c=e.mode,u=e.series[l],d=c==2?u.facets[1].scale:u.scale,p=e.scales[d];return o==-1?p.min:o==1?p.max:p.distr==3?p.dir==1?p.min:p.max:0}function $t(e,l,i,n,o,c){return bl(e,l,(u,d,p,m,w,g,v,N,R,q,X)=>{let le=u.pxRound;const y=m.dir*(m.ori==0?1:-1),Y=m.ori==0?Yl:jl;let T,ue;y==1?(T=i,ue=n):(T=n,ue=i);let b=le(g(d[T],m,q,N)),G=le(v(p[T],w,X,R)),W=le(g(d[ue],m,q,N)),J=le(v(c==1?w.max:w.min,w,X,R)),ee=new Path2D(o);return Y(ee,W,J),Y(ee,b,J),Y(ee,b,G),ee})}function zn(e,l,i,n,o,c){let u=null;if(e.length>0){u=new Path2D;const d=l==0?Wn:Bs;let p=i;for(let g=0;g<e.length;g++){let v=e[g];if(v[1]>v[0]){let N=v[0]-p;N>0&&d(u,p,n,N,n+c),p=v[1]}}let m=i+o-p,w=10;m>0&&d(u,p,n-w/2,m,n+c+w)}return u}function xu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function Gs(e,l,i,n,o,c,u){let d=[],p=e.length;for(let m=o==1?i:n;m>=i&&m<=n;m+=o)if(l[m]===null){let g=m,v=m;if(o==1)for(;++m<=n&&l[m]===null;)v=m;else for(;--m>=i&&l[m]===null;)v=m;let N=c(e[g]),R=v==g?N:c(e[v]),q=g-o;N=u<=0&&q>=0&&q<p?c(e[q]):N;let le=v+o;R=u>=0&&le>=0&&le<p?c(e[le]):R,R>=N&&d.push([N,R])}return d}function so(e){return e==0?_o:e==1?qe:l=>ml(l,e)}function Bo(e){let l=e==0?Vn:Nn,i=e==0?(o,c,u,d,p,m)=>{o.arcTo(c,u,d,p,m)}:(o,c,u,d,p,m)=>{o.arcTo(u,c,p,d,m)},n=e==0?(o,c,u,d,p)=>{o.rect(c,u,d,p)}:(o,c,u,d,p)=>{o.rect(u,c,p,d)};return(o,c,u,d,p,m=0,w=0)=>{m==0&&w==0?n(o,c,u,d,p):(m=Ot(m,d/2,p/2),w=Ot(w,d/2,p/2),l(o,c+m,u),i(o,c+d,u,c+d,u+p,m),i(o,c+d,u+p,c,u+p,w),i(o,c,u+p,c,u,w),i(o,c,u,c+d,u,m),o.closePath())}}const Vn=(e,l,i)=>{e.moveTo(l,i)},Nn=(e,l,i)=>{e.moveTo(i,l)},Yl=(e,l,i)=>{e.lineTo(l,i)},jl=(e,l,i)=>{e.lineTo(i,l)},Wn=Bo(0),Bs=Bo(1),Io=(e,l,i,n,o,c)=>{e.arc(l,i,n,o,c)},Uo=(e,l,i,n,o,c)=>{e.arc(i,l,n,o,c)},Yo=(e,l,i,n,o,c,u)=>{e.bezierCurveTo(l,i,n,o,c,u)},jo=(e,l,i,n,o,c,u)=>{e.bezierCurveTo(i,l,o,n,u,c)};function Ko(e){return(l,i,n,o,c)=>bl(l,i,(u,d,p,m,w,g,v,N,R,q,X)=>{let{pxRound:le,points:y}=u,Y,T;m.ori==0?(Y=Vn,T=Io):(Y=Nn,T=Uo);const ue=Re(y.width*Me,3);let b=(y.size-y.width)/2*Me,G=Re(b*2,3),W=new Path2D,J=new Path2D,{left:ee,top:k,width:ne,height:F}=l.bbox;Wn(J,ee-G,k-G,ne+G*2,F+G*2);const A=M=>{if(p[M]!=null){let se=le(g(d[M],m,q,N)),D=le(v(p[M],w,X,R));Y(W,se+b,D),T(W,se,D,b,0,Tn*2)}};if(c)c.forEach(A);else for(let M=n;M<=o;M++)A(M);return{stroke:ue>0?W:null,fill:W,clip:J,flags:Il|Ss}})}function qo(e){return(l,i,n,o,c,u)=>{n!=o&&(c!=n&&u!=n&&e(l,i,n),c!=o&&u!=o&&e(l,i,o),e(l,i,u))}}const yu=qo(Yl),Su=qo(jl);function Jo(e){const l=ke(e?.alignGaps,0);return(i,n,o,c)=>bl(i,n,(u,d,p,m,w,g,v,N,R,q,X)=>{[o,c]=Cn(p,o,c);let le=u.pxRound,y=F=>le(g(F,m,q,N)),Y=F=>le(v(F,w,X,R)),T,ue;m.ori==0?(T=Yl,ue=yu):(T=jl,ue=Su);const b=m.dir*(m.ori==0?1:-1),G={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Il},W=G.stroke;let J=!1;if(c-o>=q*4){let F=C=>i.posToVal(C,m.key,!0),A=null,M=null,se,D,ge,he=y(d[b==1?o:c]),re=y(d[o]),ie=y(d[c]),Z=F(b==1?re+1:ie-1);for(let C=b==1?o:c;C>=o&&C<=c;C+=b){let ye=d[C],O=(b==1?ye<Z:ye>Z)?he:y(ye),B=p[C];O==he?B!=null?(D=B,A==null?(T(W,O,Y(D)),se=A=M=D):D<A?A=D:D>M&&(M=D)):B===null&&(J=!0):(A!=null&&ue(W,he,Y(A),Y(M),Y(se),Y(D)),B!=null?(D=B,T(W,O,Y(D)),A=M=se=D):(A=M=null,B===null&&(J=!0)),he=O,Z=F(he+b))}A!=null&&A!=M&&ge!=he&&ue(W,he,Y(A),Y(M),Y(se),Y(D))}else for(let F=b==1?o:c;F>=o&&F<=c;F+=b){let A=p[F];A===null?J=!0:A!=null&&T(W,y(d[F]),Y(A))}let[k,ne]=Hs(i,n);if(u.fill!=null||k!=0){let F=G.fill=new Path2D(W),A=u.fillTo(i,n,u.min,u.max,k),M=Y(A),se=y(d[o]),D=y(d[c]);b==-1&&([D,se]=[se,D]),T(F,D,M),T(F,se,M)}if(!u.spanGaps){let F=[];J&&F.push(...Gs(d,p,o,c,b,y,l)),G.gaps=F=u.gaps(i,n,o,c,F),G.clip=zn(F,m.ori,N,R,q,X)}return ne!=0&&(G.band=ne==2?[$t(i,n,o,c,W,-1),$t(i,n,o,c,W,1)]:$t(i,n,o,c,W,ne)),G})}function ku(e){const l=ke(e.align,1),i=ke(e.ascDesc,!1),n=ke(e.alignGaps,0),o=ke(e.extend,!1);return(c,u,d,p)=>bl(c,u,(m,w,g,v,N,R,q,X,le,y,Y)=>{[d,p]=Cn(g,d,p);let T=m.pxRound,{left:ue,width:b}=c.bbox,G=re=>T(R(re,v,y,X)),W=re=>T(q(re,N,Y,le)),J=v.ori==0?Yl:jl;const ee={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Il},k=ee.stroke,ne=v.dir*(v.ori==0?1:-1);let F=W(g[ne==1?d:p]),A=G(w[ne==1?d:p]),M=A,se=A;o&&l==-1&&(se=ue,J(k,se,F)),J(k,A,F);for(let re=ne==1?d:p;re>=d&&re<=p;re+=ne){let ie=g[re];if(ie==null)continue;let Z=G(w[re]),C=W(ie);l==1?J(k,Z,F):J(k,M,C),J(k,Z,C),F=C,M=Z}let D=M;o&&l==1&&(D=ue+b,J(k,D,F));let[ge,he]=Hs(c,u);if(m.fill!=null||ge!=0){let re=ee.fill=new Path2D(k),ie=m.fillTo(c,u,m.min,m.max,ge),Z=W(ie);J(re,D,Z),J(re,se,Z)}if(!m.spanGaps){let re=[];re.push(...Gs(w,g,d,p,ne,G,n));let ie=m.width*Me/2,Z=i||l==1?ie:-ie,C=i||l==-1?-ie:ie;re.forEach(ye=>{ye[0]+=Z,ye[1]+=C}),ee.gaps=re=m.gaps(c,u,d,p,re),ee.clip=zn(re,v.ori,X,le,y,Y)}return he!=0&&(ee.band=he==2?[$t(c,u,d,p,k,-1),$t(c,u,d,p,k,1)]:$t(c,u,d,p,k,he)),ee})}function io(e,l,i,n,o,c,u=Pe){if(e.length>1){let d=null;for(let p=0,m=1/0;p<e.length;p++)if(l[p]!==void 0){if(d!=null){let w=Je(e[p]-e[d]);w<m&&(m=w,u=Je(i(e[p],n,o,c)-i(e[d],n,o,c)))}d=p}}return u}function Tu(e){e=e||an;const l=ke(e.size,[.6,Pe,1]),i=e.align||0,n=e.gap||0;let o=e.radius;o=o==null?[0,0]:typeof o=="number"?[o,0]:o;const c=be(o),u=1-l[0],d=ke(l[1],Pe),p=ke(l[2],1),m=ke(e.disp,an),w=ke(e.each,N=>{}),{fill:g,stroke:v}=m;return(N,R,q,X)=>bl(N,R,(le,y,Y,T,ue,b,G,W,J,ee,k)=>{let ne=le.pxRound,F=i,A=n*Me,M=d*Me,se=p*Me,D,ge;T.ori==0?[D,ge]=c(N,R):[ge,D]=c(N,R);const he=T.dir*(T.ori==0?1:-1);let re=T.ori==0?Wn:Bs,ie=T.ori==0?w:(z,Le,Ue,xl,rl,Gt,al)=>{w(z,Le,Ue,rl,xl,al,Gt)},Z=ke(N.bands,zs).find(z=>z.series[0]==R),C=Z!=null?Z.dir:0,ye=le.fillTo(N,R,le.min,le.max,C),E=ne(G(ye,ue,k,J)),O,B,de,ce=ee,j=ne(le.width*Me),I=!1,U=null,ve=null,me=null,ze=null;g!=null&&(j==0||v!=null)&&(I=!0,U=g.values(N,R,q,X),ve=new Map,new Set(U).forEach(z=>{z!=null&&ve.set(z,new Path2D)}),j>0&&(me=v.values(N,R,q,X),ze=new Map,new Set(me).forEach(z=>{z!=null&&ze.set(z,new Path2D)})));let{x0:ht,size:Pt}=m;if(ht!=null&&Pt!=null){F=1,y=ht.values(N,R,q,X),ht.unit==2&&(y=y.map(Ue=>N.posToVal(W+Ue*ee,T.key,!0)));let z=Pt.values(N,R,q,X);Pt.unit==2?B=z[0]*ee:B=b(z[0],T,ee,W)-b(0,T,ee,W),ce=io(y,Y,b,T,ee,W,ce),de=ce-B+A}else ce=io(y,Y,b,T,ee,W,ce),de=ce*u+A,B=ce-de;de<1&&(de=0),j>=B/2&&(j=0),de<5&&(ne=_o);let Ht=de>0,kt=ce-de-(Ht?j:0);B=ne(bs(kt,se,M)),O=(F==0?B/2:F==he?0:B)-F*he*((F==0?A/2:0)+(Ht?j/2:0));const Q={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},fe=I?null:new Path2D;let we=null;if(Z!=null)we=N.data[Z.series[1]];else{let{y0:z,y1:Le}=m;z!=null&&Le!=null&&(Y=Le.values(N,R,q,X),we=z.values(N,R,q,X))}let Ee=D*B,ae=ge*B;for(let z=he==1?q:X;z>=q&&z<=X;z+=he){let Le=Y[z];if(Le==null)continue;if(we!=null){let mt=we[z]??0;if(Le-mt==0)continue;E=G(mt,ue,k,J)}let Ue=T.distr!=2||m!=null?y[z]:z,xl=b(Ue,T,ee,W),rl=G(ke(Le,ye),ue,k,J),Gt=ne(xl-O),al=ne(pt(rl,E)),vt=ne(Ot(rl,E)),Tt=al-vt;if(Le!=null){let mt=Le<0?ae:Ee,Rt=Le<0?Ee:ae;I?(j>0&&me[z]!=null&&re(ze.get(me[z]),Gt,vt+yt(j/2),B,pt(0,Tt-j),mt,Rt),U[z]!=null&&re(ve.get(U[z]),Gt,vt+yt(j/2),B,pt(0,Tt-j),mt,Rt)):re(fe,Gt,vt+yt(j/2),B,pt(0,Tt-j),mt,Rt),ie(N,R,z,Gt-j/2,vt,B+j,Tt)}}return j>0?Q.stroke=I?ze:fe:I||(Q._fill=le.width==0?le._fill:le._stroke??le._fill,Q.width=0),Q.fill=I?ve:fe,Q})}function Mu(e,l){const i=ke(l?.alignGaps,0);return(n,o,c,u)=>bl(n,o,(d,p,m,w,g,v,N,R,q,X,le)=>{[c,u]=Cn(m,c,u);let y=d.pxRound,Y=D=>y(v(D,w,X,R)),T=D=>y(N(D,g,le,q)),ue,b,G;w.ori==0?(ue=Vn,G=Yl,b=Yo):(ue=Nn,G=jl,b=jo);const W=w.dir*(w.ori==0?1:-1);let J=Y(p[W==1?c:u]),ee=J,k=[],ne=[];for(let D=W==1?c:u;D>=c&&D<=u;D+=W)if(m[D]!=null){let he=p[D],re=Y(he);k.push(ee=re),ne.push(T(m[D]))}const F={stroke:e(k,ne,ue,G,b,y),fill:null,clip:null,band:null,gaps:null,flags:Il},A=F.stroke;let[M,se]=Hs(n,o);if(d.fill!=null||M!=0){let D=F.fill=new Path2D(A),ge=d.fillTo(n,o,d.min,d.max,M),he=T(ge);G(D,ee,he),G(D,J,he)}if(!d.spanGaps){let D=[];D.push(...Gs(p,m,c,u,W,Y,i)),F.gaps=D=d.gaps(n,o,c,u,D),F.clip=zn(D,w.ori,R,q,X,le)}return se!=0&&(F.band=se==2?[$t(n,o,c,u,A,-1),$t(n,o,c,u,A,1)]:$t(n,o,c,u,A,se)),F})}function Eu(e){return Mu(Du,e)}function Du(e,l,i,n,o,c){const u=e.length;if(u<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),u==2)n(d,e[1],l[1]);else{let p=Array(u),m=Array(u-1),w=Array(u-1),g=Array(u-1);for(let v=0;v<u-1;v++)w[v]=l[v+1]-l[v],g[v]=e[v+1]-e[v],m[v]=w[v]/g[v];p[0]=m[0];for(let v=1;v<u-1;v++)m[v]===0||m[v-1]===0||m[v-1]>0!=m[v]>0?p[v]=0:(p[v]=3*(g[v-1]+g[v])/((2*g[v]+g[v-1])/m[v-1]+(g[v]+2*g[v-1])/m[v]),isFinite(p[v])||(p[v]=0));p[u-1]=m[u-2];for(let v=0;v<u-1;v++)o(d,e[v]+g[v]/3,l[v]+p[v]*g[v]/3,e[v+1]-g[v]/3,l[v+1]-p[v+1]*g[v]/3,e[v+1],l[v+1])}return d}const ks=new Set;function oo(){for(let e of ks)e.syncRect(!0)}Ul&&(_l(aa,Ol,oo),_l(ua,Ol,oo,!0),_l(Dn,Ol,()=>{Ze.pxRatio=Me}));const Au=Jo(),Lu=Ko();function ro(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ts(c,u,l,i))}function Cu(e,l){return e.map((i,n)=>n==0?{}:Ke({},l,i))}function Ts(e,l,i,n){return Ke({},l==0?i:n,e)}function Zo(e,l,i){return l==null?Gl:[l,i]}const Pu=Zo;function Ru(e,l,i){return l==null?Gl:An(l,i,Rs,!0)}function Qo(e,l,i,n){return l==null?Gl:Pn(l,i,e.scales[n].log,!1)}const Fu=Qo;function $o(e,l,i,n){return l==null?Gl:Ps(l,i,e.scales[n].log,!1)}const zu=$o;function Vu(e,l,i,n,o){let c=pt(Oi(e),Oi(l)),u=l-e,d=Wt(o/n*u,i);do{let p=i[d],m=n*p/u;if(m>=o&&c+(p<5?ol.get(p):0)<=17)return[p,m]}while(++d<i.length);return[0,0]}function ao(e){let l,i;return e=e.replace(/(\d+)px/,(n,o)=>(l=qe((i=+o)*Me))+"px"),[e,l,i]}function Nu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Re(l[2]*Me,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function Ze(e,l,i){const n={mode:ke(e.mode,1)},o=n.mode;function c(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?1-f:f)}function u(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?f:1-f)}function d(t,s,r,a){return s.ori==0?c(t,s,r,a):u(t,s,r,a)}n.valToPosH=c,n.valToPosV=u;let p=!1;n.status=0;const m=n.root=Lt(Ur);if(e.id!=null&&(m.id=e.id),xt(m,e.class),e.title){let t=Lt(Kr,m);t.textContent=e.title}const w=Nt("canvas"),g=n.ctx=w.getContext("2d"),v=Lt(qr,m);_l("click",v,t=>{t.target===R&&(Ve!=Pl||Ge!=Rl)&&it.click(n,t)},!0);const N=n.under=Lt(Jr,v);v.appendChild(w);const R=n.over=Lt(Zr,v);e=Bl(e);const q=+ke(e.pxAlign,1),X=so(q);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const le=e.ms||.001,y=n.series=o==1?ro(e.series||[],Qi,lo,!1):Cu(e.series||[null],to),Y=n.axes=ro(e.axes||[],Zi,Xi,!0),T=n.scales={},ue=n.bands=e.bands||[];ue.forEach(t=>{t.fill=be(t.fill||null),t.dir=ke(t.dir,-1)});const b=o==2?y[1].facets[0].scale:y[0].scale,G={axes:mr,series:cr},W=(e.drawOrder||["axes","series"]).map(t=>G[t]);function J(t){const s=t.distr==3?r=>Qt(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>ds(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let a=s(r),{_min:f,_max:h}=t,_=h-f;return(a-f)/_}}function ee(t){let s=T[t];if(s==null){let r=(e.scales||an)[t]||an;if(r.from!=null){ee(r.from);let a=Ke({},T[r.from],r,{key:t});a.valToPct=J(a),T[t]=a}else{s=T[t]=Ke({},t==b?Ho:wu,r),s.key=t;let a=s.time,f=s.range,h=sl(f);if((t!=b||o==2&&!a)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Vi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Vi:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&Fn(f))){let _=f;f=(x,S,P)=>S==null?Gl:An(S,P,_)}s.range=be(f||(a?Pu:t==b?s.distr==3?Fu:s.distr==4?zu:Zo:s.distr==3?Qo:s.distr==4?$o:Ru)),s.auto=be(h?!1:s.auto),s.clamp=be(s.clamp||_u),s._min=s._max=null,s.valToPct=J(s)}}}ee("x"),ee("y"),o==1&&y.forEach(t=>{ee(t.scale)}),Y.forEach(t=>{ee(t.scale)});for(let t in e.scales)ee(t);const k=T[b],ne=k.distr;let F,A;k.ori==0?(xt(m,Yr),F=c,A=u):(xt(m,jr),F=u,A=c);const M={};for(let t in T){let s=T[t];(s.min!=null||s.max!=null)&&(M[t]={min:s.min,max:s.max},s.min=s.max=null)}const se=e.tzDate||(t=>new Date(qe(t/le))),D=e.fmtDate||Vs,ge=le==1?Ya(se):qa(se),he=Ki(se,ji(le==1?Ua:Ka,D)),re=Ji(se,qi(Za,D)),ie=[],Z=n.legend=Ke({},Xa,e.legend),C=n.cursor=Ke({},iu,{drag:{y:o==2}},e.cursor),ye=Z.show,E=C.show,O=Z.markers;Z.idxs=ie,O.width=be(O.width),O.dash=be(O.dash),O.stroke=be(O.stroke),O.fill=be(O.fill);let B,de,ce,j=[],I=[],U,ve=!1,me={};if(Z.live){const t=y[1]?y[1].values:null;ve=t!=null,U=ve?t(n,1,0):{_:0};for(let s in U)me[s]=Ls}if(ye)if(B=Nt("table",la,m),ce=Nt("tbody",null,B),Z.mount(n,B),ve){de=Nt("thead",null,B,ce);let t=Nt("tr",null,de);Nt("th",null,t);for(var ze in U)Nt("th",Si,t).textContent=ze}else xt(B,sa),Z.live&&xt(B,na);const ht={show:!0},Pt={show:!1};function Ht(t,s){if(s==0&&(ve||!Z.live||o==2))return Gl;let r=[],a=Nt("tr",ia,ce,ce.childNodes[s]);xt(a,t.class),t.show||xt(a,vl);let f=Nt("th",null,a);if(O.show){let x=Lt(oa,f);if(s>0){let S=O.width(n,s);S&&(x.style.border=S+"px "+O.dash(n,s)+" "+O.stroke(n,s)),x.style.background=O.fill(n,s)}}let h=Lt(Si,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(O.show||(h.style.color=t.width>0?O.stroke(n,s):O.fill(n,s)),Q("click",f,x=>{if(C._lock)return;cl(x);let S=y.indexOf(t);if((x.ctrlKey||x.metaKey)!=Z.isolate){let P=y.some((V,H)=>H>0&&H!=S&&V.show);y.forEach((V,H)=>{H>0&&It(H,P?H==S?ht:Pt:ht,!0,je.setSeries)})}else It(S,{show:!t.show},!0,je.setSeries)},!1),Sl&&Q(Ei,f,x=>{C._lock||(cl(x),It(y.indexOf(t),zl,!0,je.setSeries))},!1));for(var _ in U){let x=Nt("td",ra,a);x.textContent="--",r.push(x)}return[a,r]}const kt=new Map;function Q(t,s,r,a=!0){const f=kt.get(s)||{},h=C.bind[t](n,s,r,a);h&&(_l(t,s,f[t]=h),kt.set(s,f))}function fe(t,s,r){const a=kt.get(s)||{};for(let f in a)(t==null||f==t)&&(ws(f,s,a[f]),delete a[f]);t==null&&kt.delete(s)}let we=0,Ee=0,ae=0,z=0,Le=0,Ue=0,xl=Le,rl=Ue,Gt=ae,al=z,vt=0,Tt=0,mt=0,Rt=0;n.bbox={};let On=!1,fn=!1,yl=!1,ul=!1,dn=!1,Mt=!1;function Hn(t,s,r){(r||t!=n.width||s!=n.height)&&Is(t,s),Dl(!1),yl=!0,fn=!0,Al()}function Is(t,s){n.width=we=ae=t,n.height=Ee=z=s,Le=Ue=0,nr(),sr();let r=n.bbox;vt=r.left=ml(Le*Me,.5),Tt=r.top=ml(Ue*Me,.5),mt=r.width=ml(ae*Me,.5),Rt=r.height=ml(z*Me,.5)}const er=3;function tr(){let t=!1,s=0;for(;!t;){s++;let r=pr(s),a=hr(s);t=s==er||r&&a,t||(Is(n.width,n.height),fn=!0)}}function lr({width:t,height:s}){Hn(t,s)}n.setSize=lr;function nr(){let t=!1,s=!1,r=!1,a=!1;Y.forEach((f,h)=>{if(f.show&&f._show){let{side:_,_size:x}=f,S=_%2,P=f.label!=null?f.labelSize:0,V=x+P;V>0&&(S?(ae-=V,_==3?(Le+=V,a=!0):r=!0):(z-=V,_==0?(Ue+=V,t=!0):s=!0))}}),fl[0]=t,fl[1]=r,fl[2]=s,fl[3]=a,ae-=Xt[1]+Xt[3],Le+=Xt[3],z-=Xt[2]+Xt[0],Ue+=Xt[0]}function sr(){let t=Le+ae,s=Ue+z,r=Le,a=Ue;function f(h,_){switch(h){case 1:return t+=_,t-_;case 2:return s+=_,s-_;case 3:return r-=_,r+_;case 0:return a-=_,a+_}}Y.forEach((h,_)=>{if(h.show&&h._show){let x=h.side;h._pos=f(x,h._size),h.label!=null&&(h._lpos=f(x,h.labelSize))}})}if(C.dataIdx==null){let t=C.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=be(t.prox),a=t.bias??=0;C.dataIdx=(f,h,_,x)=>{if(h==0)return _;let S=_,P=r(f,h,_,x)??Pe,V=P>=0&&P<Pe,H=k.ori==0?ae:z,pe=C.left,Te=l[0],Se=l[h];if(s.has(Se[_])){S=null;let _e=null,oe=null,$;if(a==0||a==-1)for($=_;_e==null&&$-- >0;)s.has(Se[$])||(_e=$);if(a==0||a==1)for($=_;oe==null&&$++<Se.length;)s.has(Se[$])||(oe=$);if(_e!=null||oe!=null)if(V){let We=_e==null?-1/0:F(Te[_e],k,H,0),Be=oe==null?1/0:F(Te[oe],k,H,0),nt=pe-We,Ce=Be-pe;nt<=Ce?nt<=P&&(S=_e):Ce<=P&&(S=oe)}else S=oe==null?_e:_e==null?oe:_-_e<=oe-_?_e:oe}else V&&Je(pe-F(Te[_],k,H,0))>P&&(S=null);return S}}const cl=t=>{C.event=t};C.idxs=ie,C._lock=!1;let rt=C.points;rt.show=be(rt.show),rt.size=be(rt.size),rt.stroke=be(rt.stroke),rt.width=be(rt.width),rt.fill=be(rt.fill);const Bt=n.focus=Ke({},e.focus||{alpha:.3},C.focus),Sl=Bt.prox>=0,kl=Sl&&rt.one;let Et=[],Tl=[],Ml=[];function Us(t,s){let r=rt.show(n,s);if(r instanceof HTMLElement)return xt(r,ta),xt(r,t.class),qt(r,-10,-10,ae,z),R.insertBefore(r,Et[s]),r}function Ys(t,s){if(o==1||s>0){let r=o==1&&T[t.scale].time,a=t.value;t.value=r?Bi(a)?Ji(se,qi(a,D)):a||re:a||mu,t.label=t.label||(r?ru:ou)}if(kl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Au||wa,t.fillTo=be(t.fillTo||bu),t.pxAlign=+ke(t.pxAlign,q),t.pxRound=so(t.pxAlign),t.stroke=be(t.stroke||null),t.fill=be(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=gu(pt(1,t.width),1),a=t.points=Ke({},{size:r,width:pt(1,r*.2),stroke:t.stroke,space:r*2,paths:Lu,_stroke:null,_fill:null},t.points);a.show=be(a.show),a.filter=be(a.filter),a.fill=be(a.fill),a.stroke=be(a.stroke),a.paths=be(a.paths),a.pxAlign=t.pxAlign}if(ye){let r=Ht(t,s);j.splice(s,0,r[0]),I.splice(s,0,r[1]),Z.values.push(null)}if(E){ie.splice(s,0,null);let r=null;kl?s==0&&(r=Us(t,s)):s>0&&(r=Us(t,s)),Et.splice(s,0,r),Tl.splice(s,0,0),Ml.splice(s,0,0)}lt("addSeries",s)}function ir(t,s){s=s??y.length,t=o==1?Ts(t,s,Qi,lo):Ts(t,s,{},to),y.splice(s,0,t),Ys(y[s],s)}n.addSeries=ir;function or(t){if(y.splice(t,1),ye){Z.values.splice(t,1),I.splice(t,1);let s=j.splice(t,1)[0];fe(null,s.firstChild),s.remove()}E&&(ie.splice(t,1),Et.splice(t,1)[0].remove(),Tl.splice(t,1),Ml.splice(t,1)),lt("delSeries",t)}n.delSeries=or;const fl=[!1,!1,!1,!1];function rr(t,s){if(t._show=t.show,t.show){let r=t.side%2,a=T[t.scale];a==null&&(t.scale=r?y[1].scale:b,a=T[t.scale]);let f=a.time;t.size=be(t.size),t.space=be(t.space),t.rotate=be(t.rotate),sl(t.incrs)&&t.incrs.forEach(_=>{!ol.has(_)&&ol.set(_,xo(_))}),t.incrs=be(t.incrs||(a.distr==2?Ga:f?le==1?Ia:ja:gl)),t.splits=be(t.splits||(f&&a.distr==1?ge:a.distr==3?xs:a.distr==4?cu:uu)),t.stroke=be(t.stroke),t.grid.stroke=be(t.grid.stroke),t.ticks.stroke=be(t.ticks.stroke),t.border.stroke=be(t.border.stroke);let h=t.values;t.values=sl(h)&&!sl(h[0])?be(h):f?sl(h)?Ki(se,ji(h,D)):Bi(h)?Ja(se,h):h||he:h||au,t.filter=be(t.filter||(a.distr>=3&&a.log==10?pu:a.distr==3&&a.log==2?hu:wo)),t.font=ao(t.font),t.labelFont=ao(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(fl[s]=!0,t._el=Lt(Qr,v))}}function Kl(t,s,r,a){let[f,h,_,x]=r,S=s%2,P=0;return S==0&&(x||h)&&(P=s==0&&!f||s==2&&!_?qe(Zi.size/3):0),S==1&&(f||_)&&(P=s==1&&!h||s==3&&!x?qe(Xi.size/2):0),P}const js=n.padding=(e.padding||[Kl,Kl,Kl,Kl]).map(t=>be(ke(t,Kl))),Xt=n._padding=js.map((t,s)=>t(n,s,fl,0));let st,$e=null,Xe=null;const pn=o==1?y[0].idxs:null;let Ft=null,ql=!1;function Ks(t,s){if(l=t??[],n.data=n._data=l,o==2){st=0;for(let r=1;r<y.length;r++)st+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Ft=l[0],st=Ft.length;let r=l;if(ne==2){r=l.slice();let a=r[0]=Array(st);for(let f=0;f<st;f++)a[f]=f}n._data=l=r}if(Dl(!0),lt("setData"),ne==2&&(yl=!0),s!==!1){let r=k;r.auto(n,ql)?Gn():tl(b,r.min,r.max),ul=ul||C.left>=0,Mt=!0,Al()}}n.setData=Ks;function Gn(){ql=!0;let t,s;o==1&&(st>0?($e=pn[0]=0,Xe=pn[1]=st-1,t=l[0][$e],s=l[0][Xe],ne==2?(t=$e,s=Xe):t==s&&(ne==3?[t,s]=Pn(t,t,k.log,!1):ne==4?[t,s]=Ps(t,t,k.log,!1):k.time?s=t+qe(86400/le):[t,s]=An(t,s,Rs,!0))):($e=pn[0]=t=null,Xe=pn[1]=s=null)),tl(b,t,s)}let hn,El,Bn,In,Un,Yn,jn,Kn,qn,gt;function qs(t,s,r,a,f,h){t??=Ti,r??=zs,a??="butt",f??=Ti,h??="round",t!=hn&&(g.strokeStyle=hn=t),f!=El&&(g.fillStyle=El=f),s!=Bn&&(g.lineWidth=Bn=s),h!=Un&&(g.lineJoin=Un=h),a!=Yn&&(g.lineCap=Yn=a),r!=In&&g.setLineDash(In=r)}function Js(t,s,r,a){s!=El&&(g.fillStyle=El=s),t!=jn&&(g.font=jn=t),r!=Kn&&(g.textAlign=Kn=r),a!=qn&&(g.textBaseline=qn=a)}function Jn(t,s,r,a,f=0){if(a.length>0&&t.auto(n,ql)&&(s==null||s.min==null)){let h=ke($e,0),_=ke(Xe,a.length-1),x=r.min==null?pa(a,h,_,f,t.distr==3):[r.min,r.max];t.min=Ot(t.min,r.min=x[0]),t.max=pt(t.max,r.max=x[1])}}const Zs={min:null,max:null};function ar(){for(let a in T){let f=T[a];M[a]==null&&(f.min==null||M[b]!=null&&f.auto(n,ql))&&(M[a]=Zs)}for(let a in T){let f=T[a];M[a]==null&&f.from!=null&&M[f.from]!=null&&(M[a]=Zs)}M[b]!=null&&Dl(!0);let t={};for(let a in M){let f=M[a];if(f!=null){let h=t[a]=Bl(T[a],ya);if(f.min!=null)Ke(h,f);else if(a!=b||o==2)if(st==0&&h.from==null){let _=h.range(n,null,null,a);h.min=_[0],h.max=_[1]}else h.min=Pe,h.max=-Pe}}if(st>0){y.forEach((a,f)=>{if(o==1){let h=a.scale,_=M[h];if(_==null)return;let x=t[h];if(f==0){let S=x.range(n,x.min,x.max,h);x.min=S[0],x.max=S[1],$e=Wt(x.min,l[0]),Xe=Wt(x.max,l[0]),Xe-$e>1&&(l[0][$e]<x.min&&$e++,l[0][Xe]>x.max&&Xe--),a.min=Ft[$e],a.max=Ft[Xe]}else a.show&&a.auto&&Jn(x,_,a,l[f],a.sorted);a.idxs[0]=$e,a.idxs[1]=Xe}else if(f>0&&a.show&&a.auto){let[h,_]=a.facets,x=h.scale,S=_.scale,[P,V]=l[f],H=t[x],pe=t[S];H!=null&&Jn(H,M[x],h,P,h.sorted),pe!=null&&Jn(pe,M[S],_,V,_.sorted),a.min=_.min,a.max=_.max}});for(let a in t){let f=t[a],h=M[a];if(f.from==null&&(h==null||h.min==null)){let _=f.range(n,f.min==Pe?null:f.min,f.max==-Pe?null:f.max,a);f.min=_[0],f.max=_[1]}}}for(let a in t){let f=t[a];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let _=f.range(n,h.min,h.max,a);f.min=_[0],f.max=_[1]}}}let s={},r=!1;for(let a in t){let f=t[a],h=T[a];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let _=h.distr;h._min=_==3?Qt(h.min):_==4?ds(h.min,h.asinh):_==100?h.fwd(h.min):h.min,h._max=_==3?Qt(h.max):_==4?ds(h.max,h.asinh):_==100?h.fwd(h.max):h.max,s[a]=r=!0}}if(r){y.forEach((a,f)=>{o==2?f>0&&s.y&&(a._paths=null):s[a.scale]&&(a._paths=null)});for(let a in s)yl=!0,lt("setScale",a);E&&C.left>=0&&(ul=Mt=!0)}for(let a in M)M[a]=null}function ur(t){let s=bs($e-1,0,st-1),r=bs(Xe+1,0,st-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<st-1;)r++;return[s,r]}function cr(){if(st>0){let t=y.some(s=>s._focus)&&gt!=Bt.alpha;t&&(g.globalAlpha=gt=Bt.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(Qs(r,!1),Qs(r,!0),s._paths==null)){let a=gt;gt!=s.alpha&&(g.globalAlpha=gt=s.alpha);let f=o==2?[0,l[r][0].length-1]:ur(l[r]);s._paths=s.paths(n,r,f[0],f[1]),gt!=a&&(g.globalAlpha=gt=a)}}),y.forEach((s,r)=>{if(r>0&&s.show){let a=gt;gt!=s.alpha&&(g.globalAlpha=gt=s.alpha),s._paths!=null&&$s(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,$e,Xe,f),_=s.points.filter(n,r,h,f);(h||_)&&(s.points._paths=s.points.paths(n,r,$e,Xe,_),$s(r,!0))}gt!=a&&(g.globalAlpha=gt=a),lt("drawSeries",r)}}),t&&(g.globalAlpha=gt=1)}}function Qs(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function $s(t,s){let r=s?y[t].points:y[t],{stroke:a,fill:f,clip:h,flags:_,_stroke:x=r._stroke,_fill:S=r._fill,_width:P=r.width}=r._paths;P=Re(P*Me,3);let V=null,H=P%2/2;s&&S==null&&(S=P>0?"#fff":x);let pe=r.pxAlign==1&&H>0;if(pe&&g.translate(H,H),!s){let Te=vt-P/2,Se=Tt-P/2,_e=mt+P,oe=Rt+P;V=new Path2D,V.rect(Te,Se,_e,oe)}s?Zn(x,P,r.dash,r.cap,S,a,f,_,h):fr(t,x,P,r.dash,r.cap,S,a,f,_,V,h),pe&&g.translate(-H,-H)}function fr(t,s,r,a,f,h,_,x,S,P,V){let H=!1;S!=0&&ue.forEach((pe,Te)=>{if(pe.series[0]==t){let Se=y[pe.series[1]],_e=l[pe.series[1]],oe=(Se._paths||an).band;sl(oe)&&(oe=pe.dir==1?oe[0]:oe[1]);let $,We=null;Se.show&&oe&&ma(_e,$e,Xe)?(We=pe.fill(n,Te)||h,$=Se._paths.clip):oe=null,Zn(s,r,a,f,We,_,x,S,P,V,$,oe),H=!0}}),H||Zn(s,r,a,f,h,_,x,S,P,V)}const Xs=Il|Ss;function Zn(t,s,r,a,f,h,_,x,S,P,V,H){qs(t,s,r,a,f),(S||P||H)&&(g.save(),S&&g.clip(S),P&&g.clip(P)),H?(x&Xs)==Xs?(g.clip(H),V&&g.clip(V),gn(f,_),mn(t,h,s)):x&Ss?(gn(f,_),g.clip(H),mn(t,h,s)):x&Il&&(g.save(),g.clip(H),V&&g.clip(V),gn(f,_),g.restore(),mn(t,h,s)):(gn(f,_),mn(t,h,s)),(S||P||H)&&g.restore()}function mn(t,s,r){r>0&&(s instanceof Map?s.forEach((a,f)=>{g.strokeStyle=hn=f,g.stroke(a)}):s!=null&&t&&g.stroke(s))}function gn(t,s){s instanceof Map?s.forEach((r,a)=>{g.fillStyle=El=a,g.fill(r)}):s!=null&&t&&g.fill(s)}function dr(t,s,r,a){let f=Y[t],h;if(a<=0)h=[0,0];else{let _=f._space=f.space(n,t,s,r,a),x=f._incrs=f.incrs(n,t,s,r,a,_);h=Vu(s,r,x,a,_)}return f._found=h}function Qn(t,s,r,a,f,h,_,x,S,P){let V=_%2/2;q==1&&g.translate(V,V),qs(x,_,S,P,x),g.beginPath();let H,pe,Te,Se,_e=f+(a==0||a==3?-h:h);r==0?(pe=f,Se=_e):(H=f,Te=_e);for(let oe=0;oe<t.length;oe++)s[oe]!=null&&(r==0?H=Te=t[oe]:pe=Se=t[oe],g.moveTo(H,pe),g.lineTo(Te,Se));g.stroke(),q==1&&g.translate(-V,-V)}function pr(t){let s=!0;return Y.forEach((r,a)=>{if(!r.show)return;let f=T[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Dl(!1));return}else r._show||(s=!1,r._show=!0,Dl(!1));let h=r.side,_=h%2,{min:x,max:S}=f,[P,V]=dr(a,x,S,_==0?ae:z);if(V==0)return;let H=f.distr==2,pe=r._splits=r.splits(n,a,x,S,P,V,H),Te=f.distr==2?pe.map($=>Ft[$]):pe,Se=f.distr==2?Ft[pe[1]]-Ft[pe[0]]:P,_e=r._values=r.values(n,r.filter(n,Te,a,V,Se),a,V,Se);r._rotate=h==2?r.rotate(n,_e,a,V):0;let oe=r._size;r._size=Ct(r.size(n,_e,a,t)),oe!=null&&r._size!=oe&&(s=!1)}),s}function hr(t){let s=!0;return js.forEach((r,a)=>{let f=r(n,a,fl,t);f!=Xt[a]&&(s=!1),Xt[a]=f}),s}function mr(){for(let t=0;t<Y.length;t++){let s=Y[t];if(!s.show||!s._show)continue;let r=s.side,a=r%2,f,h,_=s.stroke(n,t),x=r==0||r==3?-1:1,[S,P]=s._found;if(s.label!=null){let ct=s.labelGap*x,bt=qe((s._lpos+ct)*Me);Js(s.labelFont[0],_,"center",r==2?en:ki),g.save(),a==1?(f=h=0,g.translate(bt,qe(Tt+Rt/2)),g.rotate((r==3?-Tn:Tn)/2)):(f=qe(vt+mt/2),h=bt);let hl=vo(s.label)?s.label(n,t,S,P):s.label;g.fillText(hl,f,h),g.restore()}if(P==0)continue;let V=T[s.scale],H=a==0?mt:Rt,pe=a==0?vt:Tt,Te=s._splits,Se=V.distr==2?Te.map(ct=>Ft[ct]):Te,_e=V.distr==2?Ft[Te[1]]-Ft[Te[0]]:S,oe=s.ticks,$=s.border,We=oe.show?oe.size:0,Be=qe(We*Me),nt=qe((s.alignTo==2?s._size-We-s.gap:s.gap)*Me),Ce=s._rotate*-Tn/180,Ie=X(s._pos*Me),_t=(Be+nt)*x,ut=Ie+_t;h=a==0?ut:0,f=a==1?ut:0;let Dt=s.font[0],zt=s.align==1?Nl:s.align==2?us:Ce>0?Nl:Ce<0?us:a==0?"center":r==3?us:Nl,Yt=Ce||a==1?"middle":r==2?en:ki;Js(Dt,_,zt,Yt);let wt=s.font[1]*s.lineGap,At=Te.map(ct=>X(d(ct,V,H,pe))),Vt=s._values;for(let ct=0;ct<Vt.length;ct++){let bt=Vt[ct];if(bt!=null){a==0?f=At[ct]:h=At[ct],bt=""+bt;let hl=bt.indexOf(`
`)==-1?[bt]:bt.split(/\n/gm);for(let ft=0;ft<hl.length;ft++){let _i=hl[ft];Ce?(g.save(),g.translate(f,h+ft*wt),g.rotate(Ce),g.fillText(_i,0,0),g.restore()):g.fillText(_i,f,h+ft*wt)}}}oe.show&&Qn(At,oe.filter(n,Se,t,P,_e),a,r,Ie,Be,Re(oe.width*Me,3),oe.stroke(n,t),oe.dash,oe.cap);let jt=s.grid;jt.show&&Qn(At,jt.filter(n,Se,t,P,_e),a,a==0?2:1,a==0?Tt:vt,a==0?Rt:mt,Re(jt.width*Me,3),jt.stroke(n,t),jt.dash,jt.cap),$.show&&Qn([Ie],[1],a==0?1:0,a==0?1:2,a==1?Tt:vt,a==1?Rt:mt,Re($.width*Me,3),$.stroke(n,t),$.dash,$.cap)}lt("drawAxes")}function Dl(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(o==1?(s.min=null,s.max=null):s.facets.forEach(a=>{a.min=null,a.max=null})))})}let vn=!1,$n=!1,Jl=[];function gr(){$n=!1;for(let t=0;t<Jl.length;t++)lt(...Jl[t]);Jl.length=0}function Al(){vn||(Aa(ei),vn=!0)}function vr(t,s=!1){vn=!0,$n=s,t(n),ei(),s&&Jl.length>0&&queueMicrotask(gr)}n.batch=vr;function ei(){if(On&&(ar(),On=!1),yl&&(tr(),yl=!1),fn){if(Oe(N,Nl,Le),Oe(N,en,Ue),Oe(N,ln,ae),Oe(N,nn,z),Oe(R,Nl,Le),Oe(R,en,Ue),Oe(R,ln,ae),Oe(R,nn,z),Oe(v,ln,we),Oe(v,nn,Ee),w.width=qe(we*Me),w.height=qe(Ee*Me),Y.forEach(({_el:t,_show:s,_size:r,_pos:a,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,_=f%2==1;Oe(t,_?"left":"top",a-h),Oe(t,_?"width":"height",r),Oe(t,_?"top":"left",_?Ue:Le),Oe(t,_?"height":"width",_?z:ae),_s(t,vl)}else xt(t,vl)}),hn=El=Bn=Un=Yn=jn=Kn=qn=In=null,gt=1,$l(!0),Le!=xl||Ue!=rl||ae!=Gt||z!=al){Dl(!1);let t=ae/Gt,s=z/al;if(E&&!ul&&C.left>=0){C.left*=t,C.top*=s,Ll&&qt(Ll,qe(C.left),0,ae,z),Cl&&qt(Cl,0,qe(C.top),ae,z);for(let r=0;r<Et.length;r++){let a=Et[r];a!=null&&(Tl[r]*=t,Ml[r]*=s,qt(a,Ct(Tl[r]),Ct(Ml[r]),ae,z))}}if(Ne.show&&!dn&&Ne.left>=0&&Ne.width>0){Ne.left*=t,Ne.width*=t,Ne.top*=s,Ne.height*=s;for(let r in ss)Oe(Fl,r,Ne[r])}xl=Le,rl=Ue,Gt=ae,al=z}lt("setSize"),fn=!1}we>0&&Ee>0&&(g.clearRect(0,0,w.width,w.height),lt("drawClear"),W.forEach(t=>t()),lt("draw")),Ne.show&&dn&&(_n(Ne),dn=!1),E&&ul&&(pl(null,!0,!1),ul=!1),Z.show&&Z.live&&Mt&&(ls(),Mt=!1),p||(p=!0,n.status=1,lt("ready")),ql=!1,vn=!1}n.redraw=(t,s)=>{yl=s||!1,t!==!1?tl(b,k.min,k.max):Al()};function Xn(t,s){let r=T[t];if(r.from==null){if(st==0){let a=r.range(n,s.min,s.max,t);s.min=a[0],s.max=a[1]}if(s.min>s.max){let a=s.min;s.min=s.max,s.max=a}if(st>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==b&&r.distr==2&&st>0&&(s.min=Wt(s.min,l[0]),s.max=Wt(s.max,l[0]),s.min==s.max&&s.max++),M[t]=s,On=!0,Al()}}n.setScale=Xn;let es,ts,Ll,Cl,ti,li,Pl,Rl,ni,si,Ve,Ge,el=!1;const it=C.drag;let et=it.x,tt=it.y;E&&(C.x&&(es=Lt(Xr,R)),C.y&&(ts=Lt(ea,R)),k.ori==0?(Ll=es,Cl=ts):(Ll=ts,Cl=es),Ve=C.left,Ge=C.top);const Ne=n.select=Ke({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Fl=Ne.show?Lt($r,Ne.over?R:N):null;function _n(t,s){if(Ne.show){for(let r in t)Ne[r]=t[r],r in ss&&Oe(Fl,r,t[r]);s!==!1&&lt("setSelect")}}n.setSelect=_n;function _r(t){if(y[t].show)ye&&_s(j[t],vl);else if(ye&&xt(j[t],vl),E){let r=kl?Et[0]:Et[t];r!=null&&qt(r,-10,-10,ae,z)}}function tl(t,s,r){Xn(t,{min:s,max:r})}function It(t,s,r,a){s.focus!=null&&Sr(t),s.show!=null&&y.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,_r(h),o==2?(tl(f.facets[0].scale,null,null),tl(f.facets[1].scale,null,null)):tl(f.scale,null,null),Al())}),r!==!1&&lt("setSeries",t,s),a&&Xl("setSeries",n,t,s)}n.setSeries=It;function wr(t,s){Ke(ue[t],s)}function br(t,s){t.fill=be(t.fill||null),t.dir=ke(t.dir,-1),s=s??ue.length,ue.splice(s,0,t)}function xr(t){t==null?ue.length=0:ue.splice(t,1)}n.addBand=br,n.setBand=wr,n.delBand=xr;function yr(t,s){y[t].alpha=s,E&&Et[t]!=null&&(Et[t].style.opacity=s),ye&&j[t]&&(j[t].style.opacity=s)}let Zt,ll,dl;const zl={focus:!0};function Sr(t){if(t!=dl){let s=t==null,r=Bt.alpha!=1;y.forEach((a,f)=>{if(o==1||f>0){let h=s||f==0||f==t;a._focus=s?null:h,r&&yr(f,h?1:Bt.alpha)}}),dl=t,r&&Al()}}ye&&Sl&&Q(Di,B,t=>{C._lock||(cl(t),dl!=null&&It(null,zl,!0,je.setSeries))});function Ut(t,s,r){let a=T[s];r&&(t=t/Me-(a.ori==1?Ue:Le));let f=ae;a.ori==1&&(f=z,t=f-t),a.dir==-1&&(t=f-t);let h=a._min,_=a._max,x=t/f,S=h+(_-h)*x,P=a.distr;return P==3?Hl(10,S):P==4?va(S,a.asinh):P==100?a.bwd(S):S}function kr(t,s){let r=Ut(t,b,s);return Wt(r,l[0],$e,Xe)}n.valToIdx=t=>Wt(t,l[0]),n.posToIdx=kr,n.posToVal=Ut,n.valToPos=(t,s,r)=>T[s].ori==0?c(t,T[s],r?mt:ae,r?vt:0):u(t,T[s],r?Rt:z,r?Tt:0),n.setCursor=(t,s,r)=>{Ve=t.left,Ge=t.top,pl(null,s,r)};function ii(t,s){Oe(Fl,Nl,Ne.left=t),Oe(Fl,ln,Ne.width=s)}function oi(t,s){Oe(Fl,en,Ne.top=t),Oe(Fl,nn,Ne.height=s)}let Zl=k.ori==0?ii:oi,Ql=k.ori==1?ii:oi;function Tr(){if(ye&&Z.live)for(let t=o==2?1:0;t<y.length;t++){if(t==0&&ve)continue;let s=Z.values[t],r=0;for(let a in s)I[t][r++].firstChild.nodeValue=s[a]}}function ls(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,a)=>{ie[a]=r}):xa(t.idx)||ie.fill(t.idx),Z.idx=ie[0]),ye&&Z.live){for(let r=0;r<y.length;r++)(r>0||o==1&&!ve)&&Mr(r,ie[r]);Tr()}Mt=!1,s!==!1&&lt("setLegend")}n.setLegend=ls;function Mr(t,s){let r=y[t],a=t==0&&ne==2?Ft:l[t],f;ve?f=r.values(n,t,s)??me:(f=r.value(n,s==null?null:a[s],t,s),f=f==null?me:{_:f}),Z.values[t]=f}function pl(t,s,r){ni=Ve,si=Ge,[Ve,Ge]=C.move(n,Ve,Ge),C.left=Ve,C.top=Ge,E&&(Ll&&qt(Ll,qe(Ve),0,ae,z),Cl&&qt(Cl,0,qe(Ge),ae,z));let a,f=$e>Xe;Zt=Pe,ll=null;let h=k.ori==0?ae:z,_=k.ori==1?ae:z;if(Ve<0||st==0||f){a=C.idx=null;for(let x=0;x<y.length;x++){let S=Et[x];S!=null&&qt(S,-10,-10,ae,z)}Sl&&It(null,zl,!0,t==null&&je.setSeries),Z.live&&(ie.fill(a),Mt=!0)}else{let x,S,P;o==1&&(x=k.ori==0?Ve:Ge,S=Ut(x,b),a=C.idx=Wt(S,l[0],$e,Xe),P=F(l[0][a],k,h,0));let V=-10,H=-10,pe=0,Te=0,Se=!0,_e="",oe="";for(let $=o==2?1:0;$<y.length;$++){let We=y[$],Be=ie[$],nt=Be==null?null:o==1?l[$][Be]:l[$][1][Be],Ce=C.dataIdx(n,$,a,S),Ie=Ce==null?null:o==1?l[$][Ce]:l[$][1][Ce];if(Mt=Mt||Ie!=nt||Ce!=Be,ie[$]=Ce,$>0&&We.show){let _t=Ce==null?-10:Ce==a?P:F(o==1?l[0][Ce]:l[$][0][Ce],k,h,0),ut=Ie==null?-10:A(Ie,o==1?T[We.scale]:T[We.facets[1].scale],_,0);if(Sl&&Ie!=null){let Dt=k.ori==1?Ve:Ge,zt=Je(Bt.dist(n,$,Ce,ut,Dt));if(zt<Zt){let Yt=Bt.bias;if(Yt!=0){let wt=Ut(Dt,We.scale),At=Ie>=0?1:-1,Vt=wt>=0?1:-1;Vt==At&&(Vt==1?Yt==1?Ie>=wt:Ie<=wt:Yt==1?Ie<=wt:Ie>=wt)&&(Zt=zt,ll=$)}else Zt=zt,ll=$}}if(Mt||kl){let Dt,zt;k.ori==0?(Dt=_t,zt=ut):(Dt=ut,zt=_t);let Yt,wt,At,Vt,jt,ct,bt=!0,hl=rt.bbox;if(hl!=null){bt=!1;let ft=hl(n,$);At=ft.left,Vt=ft.top,Yt=ft.width,wt=ft.height}else At=Dt,Vt=zt,Yt=wt=rt.size(n,$);if(ct=rt.fill(n,$),jt=rt.stroke(n,$),kl)$==ll&&Zt<=Bt.prox&&(V=At,H=Vt,pe=Yt,Te=wt,Se=bt,_e=ct,oe=jt);else{let ft=Et[$];ft!=null&&(Tl[$]=At,Ml[$]=Vt,zi(ft,Yt,wt,bt),Ri(ft,ct,jt),qt(ft,Ct(At),Ct(Vt),ae,z))}}}}if(kl){let $=Bt.prox,We=dl==null?Zt<=$:Zt>$||ll!=dl;if(Mt||We){let Be=Et[0];Be!=null&&(Tl[0]=V,Ml[0]=H,zi(Be,pe,Te,Se),Ri(Be,_e,oe),qt(Be,Ct(V),Ct(H),ae,z))}}}if(Ne.show&&el)if(t!=null){let[x,S]=je.scales,[P,V]=je.match,[H,pe]=t.cursor.sync.scales,Te=t.cursor.drag;if(et=Te._x,tt=Te._y,et||tt){let{left:Se,top:_e,width:oe,height:$}=t.select,We=t.scales[H].ori,Be=t.posToVal,nt,Ce,Ie,_t,ut,Dt=x!=null&&P(x,H),zt=S!=null&&V(S,pe);Dt&&et?(We==0?(nt=Se,Ce=oe):(nt=_e,Ce=$),Ie=T[x],_t=F(Be(nt,H),Ie,h,0),ut=F(Be(nt+Ce,H),Ie,h,0),Zl(Ot(_t,ut),Je(ut-_t))):Zl(0,h),zt&&tt?(We==1?(nt=Se,Ce=oe):(nt=_e,Ce=$),Ie=T[S],_t=A(Be(nt,pe),Ie,_,0),ut=A(Be(nt+Ce,pe),Ie,_,0),Ql(Ot(_t,ut),Je(ut-_t))):Ql(0,_)}else is()}else{let x=Je(ni-ti),S=Je(si-li);if(k.ori==1){let pe=x;x=S,S=pe}et=it.x&&x>=it.dist,tt=it.y&&S>=it.dist;let P=it.uni;P!=null?et&&tt&&(et=x>=P,tt=S>=P,!et&&!tt&&(S>x?tt=!0:et=!0)):it.x&&it.y&&(et||tt)&&(et=tt=!0);let V,H;et&&(k.ori==0?(V=Pl,H=Ve):(V=Rl,H=Ge),Zl(Ot(V,H),Je(H-V)),tt||Ql(0,_)),tt&&(k.ori==1?(V=Pl,H=Ve):(V=Rl,H=Ge),Ql(Ot(V,H),Je(H-V)),et||Zl(0,h)),!et&&!tt&&(Zl(0,0),Ql(0,0))}if(it._x=et,it._y=tt,t==null){if(r){if(vi!=null){let[x,S]=je.scales;je.values[0]=x!=null?Ut(k.ori==0?Ve:Ge,x):null,je.values[1]=S!=null?Ut(k.ori==1?Ve:Ge,S):null}Xl(cs,n,Ve,Ge,ae,z,a)}if(Sl){let x=r&&je.setSeries,S=Bt.prox;dl==null?Zt<=S&&It(ll,zl,!0,x):Zt>S?It(null,zl,!0,x):ll!=dl&&It(ll,zl,!0,x)}}Mt&&(Z.idx=a,ls()),s!==!1&&lt("setCursor")}let nl=null;Object.defineProperty(n,"rect",{get(){return nl==null&&$l(!1),nl}});function $l(t=!1){t?nl=null:(nl=R.getBoundingClientRect(),lt("syncRect",nl))}function ri(t,s,r,a,f,h,_){C._lock||el&&t!=null&&t.movementX==0&&t.movementY==0||(ns(t,s,r,a,f,h,_,!1,t!=null),t!=null?pl(null,!0,!0):pl(s,!0,!1))}function ns(t,s,r,a,f,h,_,x,S){if(nl==null&&$l(!1),cl(t),t!=null)r=t.clientX-nl.left,a=t.clientY-nl.top;else{if(r<0||a<0){Ve=-10,Ge=-10;return}let[P,V]=je.scales,H=s.cursor.sync,[pe,Te]=H.values,[Se,_e]=H.scales,[oe,$]=je.match,We=s.axes[0].side%2==1,Be=k.ori==0?ae:z,nt=k.ori==1?ae:z,Ce=We?h:f,Ie=We?f:h,_t=We?a:r,ut=We?r:a;if(Se!=null?r=oe(P,Se)?d(pe,T[P],Be,0):-10:r=Be*(_t/Ce),_e!=null?a=$(V,_e)?d(Te,T[V],nt,0):-10:a=nt*(ut/Ie),k.ori==1){let Dt=r;r=a,a=Dt}}S&&(s==null||s.cursor.event.type==cs)&&((r<=1||r>=ae-1)&&(r=ml(r,ae)),(a<=1||a>=z-1)&&(a=ml(a,z))),x?(ti=r,li=a,[Pl,Rl]=C.move(n,r,a)):(Ve=r,Ge=a)}const ss={width:0,height:0,left:0,top:0};function is(){_n(ss,!1)}let ai,ui,ci,fi;function di(t,s,r,a,f,h,_){el=!0,et=tt=it._x=it._y=!1,ns(t,s,r,a,f,h,_,!0,!1),t!=null&&(Q(fs,gs,pi,!1),Xl(Mi,n,Pl,Rl,ae,z,null));let{left:x,top:S,width:P,height:V}=Ne;ai=x,ui=S,ci=P,fi=V}function pi(t,s,r,a,f,h,_){el=it._x=it._y=!1,ns(t,s,r,a,f,h,_,!1,!0);let{left:x,top:S,width:P,height:V}=Ne,H=P>0||V>0,pe=ai!=x||ui!=S||ci!=P||fi!=V;if(H&&pe&&_n(Ne),it.setScale&&H&&pe){let Te=x,Se=P,_e=S,oe=V;if(k.ori==1&&(Te=S,Se=V,_e=x,oe=P),et&&tl(b,Ut(Te,b),Ut(Te+Se,b)),tt)for(let $ in T){let We=T[$];$!=b&&We.from==null&&We.min!=Pe&&tl($,Ut(_e+oe,$),Ut(_e,$))}is()}else C.lock&&(C._lock=!C._lock,pl(s,!0,t!=null));t!=null&&(fe(fs,gs),Xl(fs,n,Ve,Ge,ae,z,null))}function Er(t,s,r,a,f,h,_){if(C._lock)return;cl(t);let x=el;if(el){let S=!0,P=!0,V=10,H,pe;k.ori==0?(H=et,pe=tt):(H=tt,pe=et),H&&pe&&(S=Ve<=V||Ve>=ae-V,P=Ge<=V||Ge>=z-V),H&&S&&(Ve=Ve<Pl?0:ae),pe&&P&&(Ge=Ge<Rl?0:z),pl(null,!0,!0),el=!1}Ve=-10,Ge=-10,ie.fill(null),pl(null,!0,!0),x&&(el=x)}function hi(t,s,r,a,f,h,_){C._lock||(cl(t),Gn(),is(),t!=null&&Xl(Ai,n,Ve,Ge,ae,z,null))}function mi(){Y.forEach(Nu),Hn(n.width,n.height,!0)}_l(Dn,Ol,mi);const Vl={};Vl.mousedown=di,Vl.mousemove=ri,Vl.mouseup=pi,Vl.dblclick=hi,Vl.setSeries=(t,s,r,a)=>{let f=je.match[2];r=f(n,s,r),r!=-1&&It(r,a,!0,!1)},E&&(Q(Mi,R,di),Q(cs,R,ri),Q(Ei,R,t=>{cl(t),$l(!1)}),Q(Di,R,Er),Q(Ai,R,hi),ks.add(n),n.syncRect=$l);const wn=n.hooks=e.hooks||{};function lt(t,s,r){$n?Jl.push([t,s,r]):t in wn&&wn[t].forEach(a=>{a.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)wn[s]=(wn[s]||[]).concat(t.hooks[s])});const gi=(t,s,r)=>r,je=Ke({key:null,setSeries:!1,filters:{pub:Hi,sub:Hi},scales:[b,y[1]?y[1].scale:null],match:[Gi,Gi,gi],values:[null,null]},C.sync);je.match.length==2&&je.match.push(gi),C.sync=je;const vi=je.key,os=Go(vi);function Xl(t,s,r,a,f,h,_){je.filters.pub(t,s,r,a,f,h,_)&&os.pub(t,s,r,a,f,h,_)}os.sub(n);function Dr(t,s,r,a,f,h,_){je.filters.sub(t,s,r,a,f,h,_)&&Vl[t](null,s,r,a,f,h,_)}n.pub=Dr;function Ar(){os.unsub(n),ks.delete(n),kt.clear(),ws(Dn,Ol,mi),m.remove(),B?.remove(),lt("destroy")}n.destroy=Ar;function rs(){lt("init",e,l),Ks(l||e.data,!1),M[b]?Xn(b,M[b]):Gn(),dn=Ne.show&&(Ne.width>0||Ne.height>0),ul=Mt=!0,Hn(e.width,e.height)}return y.forEach(Ys),Y.forEach(rr),i?i instanceof HTMLElement?(i.appendChild(m),rs()):i(n,rs):rs(),n}Ze.assign=Ke;Ze.fmtNum=Fs;Ze.rangeNum=An;Ze.rangeLog=Pn;Ze.rangeAsinh=Ps;Ze.orient=bl;Ze.pxRatio=Me;Ze.join=Da;Ze.fmtDate=Vs,Ze.tzDate=Oa;Ze.sync=Go;{Ze.addGap=xu,Ze.clipGaps=zn;let e=Ze.paths={points:Ko};e.linear=Jo,e.stepped=ku,e.bars=Tu,e.spline=Eu}const Xo="/api",Wu=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ou(e,l=24){const i=await fetch(`${Xo}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Hu(e=24){const l=await fetch(`${Xo}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Gu=Fe('<button type="button"> </button>'),Bu=Fe('<div class="py-8 flex flex-col items-center gap-3"><div class="w-full h-48 bg-[var(--bg-elevated)] rounded animate-pulse"></div> <span class="text-sm text-[var(--text-muted)]">Loading chart...</span></div>'),Iu=Fe('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),Uu=Fe('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),Yu=Fe('<div class="chart-wrapper svelte-1e832qd"><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-1.5"></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div> <div class="chart-container svelte-1e832qd"><!></div></div>');function ju(e,l){Es(l,!0);let i=Jt(()=>Sn.config.smoothing_enabled),n=Jt(()=>Sn.config.smoothing_samples),o=at("UTC"),c=at(!1),u=Jt(()=>Sn.config.temp_units==="C"),d,p=null,m=at(!0),w=at(null),g=at(24),v=at(bi([])),N=at(bi([]));const R={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},q="#facc15",X="rgba(250, 204, 21, 0.3)",le="#71717a",y="#a1a1aa",Y="rgba(255, 255, 255, 0.04)",T="#22d3ee";function ue(E,O,B){const de=new Date(E*1e3);try{return B?de.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:O}):de.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:O})}catch(ce){return console.warn("Invalid timezone:",O,ce),B?de.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):de.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function b(E,O,B){const de=q,ce=R[l.tiltColor]||y;return{width:E,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(j,I,U)=>{const ve=(U-I)*.1||.005;return[I-ve,U+ve]}},temp:{auto:!0,range:(j,I,U)=>{const ve=U-I,me=10;if(ve<me){const ht=(U+I)/2;return[ht-me/2,ht+me/2]}const ze=ve*.1;return[I-ze,U+ze]}}},axes:[{stroke:le,grid:{stroke:Y,width:1},ticks:{stroke:Y,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(j,I)=>I.map(U=>ue(U,B,L(g)<=24))},{scale:"sg",stroke:de,grid:{stroke:Y,width:1},ticks:{stroke:Y,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(j,I)=>I.map(U=>U.toFixed(3)),side:3},{scale:"temp",stroke:ce,grid:{show:!1},ticks:{stroke:Y,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(j,I)=>I.map(U=>U.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:de,width:2,fill:(j,I)=>{const U=j.ctx.createLinearGradient(0,j.bbox.top,0,j.bbox.top+j.bbox.height);return U.addColorStop(0,X),U.addColorStop(1,"transparent"),U},points:{show:!1},paths:Ze.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:ce,width:1.5,dash:[4,4],points:{show:!1},paths:Ze.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:T,width:1.5,dash:[2,4],points:{show:!1},paths:Ze.paths.spline?.()}]}}function G(E,O){if(O<=1)return E;const B=[];for(let de=0;de<E.length;de++){const ce=[],j=Math.floor(O/2);for(let I=Math.max(0,de-j);I<=Math.min(E.length-1,de+j);I++){const U=E[I];U!==null&&ce.push(U)}ce.length>0?B.push(ce.reduce((I,U)=>I+U,0)/ce.length):B.push(null)}return B}function W(E,O,B,de,ce){if(E.length<=ce)return[E,O,B,de];const j=Math.ceil(E.length/ce),I=[],U=[],ve=[],me=[];for(let ze=0;ze<E.length;ze+=j){const ht=Math.min(ze+j,E.length);let Pt=0,Ht=0,kt=0,Q=0,fe=0,we=0;for(let Ee=ze;Ee<ht;Ee++)O[Ee]!==null&&(Pt+=O[Ee],Ht++),B[Ee]!==null&&(kt+=B[Ee],Q++),de[Ee]!==null&&(fe+=de[Ee],we++);I.push(E[Math.floor((ze+ht-1)/2)]),U.push(Ht>0?Pt/Ht:null),ve.push(Q>0?kt/Q:null),me.push(we>0?fe/we:null)}return[I,U,ve,me]}function J(E){return!E.endsWith("Z")&&!E.match(/[+-]\d{2}:\d{2}$/)&&(E=E+"Z"),new Date(E).getTime()/1e3}function ee(E,O,B){if(E.length===0||O.length===0)return O.map(()=>null);const de=[...E].sort((I,U)=>J(I.timestamp)-J(U.timestamp)),ce=de.map(I=>J(I.timestamp)),j=de.map(I=>I.temperature===null?null:B?I.temperature:I.temperature*9/5+32);return O.map(I=>{let U=null,ve=null;for(let me=0;me<ce.length;me++)if(ce[me]<=I&&(U={time:ce[me],temp:j[me]}),ce[me]>=I&&ve===null){ve={time:ce[me],temp:j[me]};break}if(U&&ve&&U.temp!==null&&ve.temp!==null){if(U.time===ve.time)return U.temp;const me=(I-U.time)/(ve.time-U.time);return U.temp+me*(ve.temp-U.temp)}return U!==null&&U.temp!==null?U.temp:ve!==null&&ve.temp!==null?ve.temp:null})}function k(E,O,B){const de=[...E].reverse();let ce=[],j=[],I=[];for(const me of de){ce.push(J(me.timestamp)),j.push(me.sg_calibrated??me.sg_raw);const ze=me.temp_calibrated??me.temp_raw;ze!==null?I.push(B?zr(ze):ze):I.push(null)}let U=ee(O,ce,B);return L(i)&&L(n)>1&&(j=G(j,L(n)),I=G(I,L(n)),U=G(U,L(n))),[ce,j,I,U]=W(ce,j,I,U,500),[ce,j,I,U]}async function ne(){He(m,!0),He(w,null);try{const[E,O]=await Promise.all([Ou(l.tiltId,L(g)),Hu(L(g)).catch(()=>[])]);He(v,E,!0),He(N,O,!0),F()}catch(E){He(w,E instanceof Error?E.message:"Failed to load data",!0)}finally{He(m,!1)}}function F(){if(!d||L(v).length===0)return;const E=k(L(v),L(N),L(u)),O=b(d.clientWidth,L(u),L(o));p&&p.destroy(),p=new Ze(O,E,d)}function A(){p&&d&&p.setSize({width:d.clientWidth,height:220})}uo(async()=>{try{const E=await fetch("/api/system/timezone");if(E.ok){const O=await E.json();He(o,O.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await ne(),He(c,!0),window.addEventListener("resize",A)}),Pr(()=>{p?.destroy(),window.removeEventListener("resize",A)}),as(()=>{L(c)&&L(g)&&ne()}),as(()=>{L(u)!==void 0&&L(v).length>0&&d&&F()}),as(()=>{L(i),L(n),L(v).length>0&&d&&F()});var M=Yu(),se=te(M),D=te(se);on(D,21,()=>Wu,En,(E,O)=>{var B=Gu();let de;B.__click=()=>He(g,L(O).hours,!0);var ce=te(B,!0);K(B),dt(()=>{de=un(B,1,"range-btn svelte-1e832qd",null,de,{active:L(g)===L(O).hours}),Ye(ce,L(O).label)}),Ae(E,B)}),K(D);var ge=xe(D,2),he=xe(te(ge),2),re=te(he);il(2),K(he),il(2),K(ge),K(se);var ie=xe(se,2),Z=te(ie);{var C=E=>{var O=Bu();Ae(E,O)},ye=E=>{var O=wi(),B=Mn(O);{var de=j=>{var I=Iu(),U=xe(te(I),2);U.__click=ne,K(I),Ae(j,I)},ce=j=>{var I=wi(),U=Mn(I);{var ve=me=>{var ze=Uu();Ae(me,ze)};ot(U,me=>{L(v).length===0&&me(ve)},!0)}Ae(j,I)};ot(B,j=>{L(w)?j(de):j(ce,!1)},!0)}Ae(E,O)};ot(Z,E=>{L(m)?E(C):E(ye,!1)})}K(ie),fo(ie,E=>d=E,()=>d),K(M),dt(()=>kn(re,`background: ${(R[l.tiltColor]||"var(--text-secondary)")??""};`)),Ae(e,M),Ds()}Ms(["click"]);var Ku=Fe('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),qu=Fe('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),Ju=Fe('<div class="w-1 rounded-sm transition-all"></div>'),Zu=Fe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Qu=Fe('<div class="chart-section svelte-3twv7v"><!></div>'),$u=Fe('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Xu=Fe('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> </p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Gravity</p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!> <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function ec(e,l){Es(l,!0);let i=yi(l,"expanded",3,!1),n=yi(l,"wide",3,!1),o=at(!1),c=at(""),u=at(null),d=at(!1);function p(){He(c,l.tilt.beer_name,!0),He(o,!0),setTimeout(()=>L(u)?.focus(),0)}async function m(){if(L(d))return;const Q=L(c).trim();if(!Q||Q===l.tilt.beer_name){He(o,!1);return}He(d,!0);const fe=await Or(l.tilt.id,Q);He(d,!1),fe&&He(o,!1)}function w(Q){Q.key==="Enter"?m():Q.key==="Escape"&&He(o,!1)}let g=Jt(co);const v={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function N(Q){return Q.toFixed(3)}function R(Q){return Vr(Q)}function q(Q){return Q>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:Q>=-60?{bars:3,color:"var(--positive)",label:"Good"}:Q>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function X(Q){const fe=Math.floor((Date.now()-new Date(Q).getTime())/1e3);if(fe<10)return"just now";if(fe<60)return`${fe}s ago`;const we=Math.floor(fe/60);if(we<60)return`${we}m ago`;const Ee=Math.floor(we/60);return Ee<24?`${Ee}h ago`:`${Math.floor(Ee/24)}d ago`}let le=Jt(()=>v[l.tilt.color]||"var(--tilt-black)"),y=Jt(()=>q(l.tilt.rssi)),Y=Jt(()=>X(l.tilt.last_seen));var T=Xu();let ue;var b=te(T),G=xe(b,2),W=te(G),J=te(W),ee=te(J);{var k=Q=>{var fe=Ku();Nr(fe),fe.__keydown=w,fo(fe,we=>He(u,we),()=>L(u)),dt(()=>fe.disabled=L(d)),Lr("blur",fe,m),Br(fe,()=>L(c),we=>He(c,we)),Ae(Q,fe)},ne=Q=>{var fe=qu();fe.__click=p;var we=te(fe),Ee=te(we,!0);K(we),il(2),K(fe),dt(()=>Ye(Ee,l.tilt.beer_name)),Ae(Q,fe)};ot(ee,Q=>{L(o)?Q(k):Q(ne,!1)})}var F=xe(ee,2),A=te(F),M=xe(A,2),se=te(M,!0);K(M),K(F),K(J);var D=xe(J,2),ge=te(D);on(ge,20,()=>Array(4),En,(Q,fe,we)=>{var Ee=Ju();dt(()=>kn(Ee,`
								height: ${8+we*4}px;
								background: ${(we<L(y).bars?L(y).color:"var(--bg-hover)")??""};
								opacity: ${we<L(y).bars?1:.4};
							`)),Ae(Q,Ee)}),K(ge);var he=xe(ge,2),re=te(he);K(he),K(D),K(W);var ie=xe(W,2),Z=te(ie),C=te(Z),ye=te(C,!0);K(C),il(2),K(Z);var E=xe(Z,2),O=te(E),B=te(O,!0),de=xe(B),ce=te(de,!0);K(de),K(O),il(2),K(E),K(ie);var j=xe(ie,2);{var I=Q=>{var fe=Zu(),we=xe(te(fe),2),Ee=te(we,!0);K(we);var ae=xe(we,4),z=te(ae);K(ae),K(fe),dt((Le,Ue)=>{Ye(Ee,Le),Ye(z,`${Ue??""}${L(g)??""}`)},[()=>N(l.tilt.sg_raw),()=>R(l.tilt.temp_raw)]),Ae(Q,fe)};ot(j,Q=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&Q(I)})}var U=xe(j,2);{var ve=Q=>{var fe=Qu(),we=te(fe);ju(we,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color}}),K(fe),Ae(Q,fe)};ot(U,Q=>{i()&&Q(ve)})}var me=xe(U,2),ze=te(me),ht=te(ze);K(ze);var Pt=xe(ze,2),Ht=te(Pt);{var kt=Q=>{var fe=$u();fe.__click=function(...ae){l.onToggleExpand?.apply(this,ae)};var we=te(fe);let Ee;K(fe),dt(()=>{xi(fe,"aria-label",i()?"Collapse chart":"Expand chart"),Ee=un(we,0,"w-4 h-4 transition-transform",null,Ee,{"rotate-180":i()})}),Ae(Q,fe)};ot(Ht,Q=>{l.onToggleExpand&&Q(kt)})}il(2),K(Pt),K(me),K(G),K(T),dt((Q,fe)=>{ue=un(T,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,ue,{expanded:i(),wide:n()}),kn(b,`background: ${L(le)??""};`),kn(A,`background: ${L(le)??""};`),Ye(se,l.tilt.color),xi(D,"title",`${L(y).label??""} signal (${l.tilt.rssi??""} dBm)`),Ye(re,`${l.tilt.rssi??""} dBm`),Ye(ye,Q),Ye(B,fe),Ye(ce,L(g)),Ye(ht,`Updated ${L(Y)??""}`)},[()=>N(l.tilt.sg),()=>R(l.tilt.temp)]),Ae(e,T),Ds()}Ms(["keydown","click"]);var tc=Fe('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),lc=Fe('<div class="alerts-list svelte-1uha8ag"></div>'),nc=Fe('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),sc=Fe('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),ic=Fe('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),oc=Fe('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),rc=Fe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),ac=Fe('<div class="ambient-value svelte-1uha8ag"><span class="value svelte-1uha8ag"> </span> <span class="unit svelte-1uha8ag"> </span> <span class="label svelte-1uha8ag">Temp</span></div>'),uc=Fe('<div class="ambient-value svelte-1uha8ag"><span class="value svelte-1uha8ag"> </span> <span class="unit svelte-1uha8ag">%</span> <span class="label svelte-1uha8ag">Humidity</span></div>'),cc=Fe('<div class="ambient-card svelte-1uha8ag"><div class="ambient-header svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Room Ambient</span></div> <div class="ambient-values svelte-1uha8ag"><!> <!></div></div>'),fc=Fe('<div class="forecast-day svelte-1uha8ag"><span class="day-name svelte-1uha8ag"> </span> <span class="day-icon svelte-1uha8ag"> </span> <div class="day-temps svelte-1uha8ag"><span class="temp-high svelte-1uha8ag"> </span> <span class="temp-low svelte-1uha8ag"> </span></div></div>'),dc=Fe('<div class="forecast-card svelte-1uha8ag"><div class="forecast-header svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Forecast</span></div> <div class="forecast-days svelte-1uha8ag"></div></div>'),pc=Fe("<div></div> <!> <!>",1),hc=Fe("<!> <!>",1);function Tc(e,l){Es(l,!0);let i=at(null),n=at(!1),o=at(!1),c=at(!1);async function u(){He(n,!0);try{const b=await fetch("/api/alerts");b.ok&&He(i,await b.json(),!0)}catch(b){console.error("Failed to load alerts:",b)}finally{He(n,!1)}}uo(()=>{const b=localStorage.getItem("tiltui_alerts_dismissed"),G=localStorage.getItem("tiltui_alerts_dismissed_time");b==="true"&&G&&Date.now()-parseInt(G,10)<360*60*1e3&&He(o,!0),Hr(),u();const W=setInterval(u,1800*1e3);return()=>{Gr(),clearInterval(W)}});let d=Jt(()=>Array.from(Kt.tilts.values())),p=at(null);function m(b){He(p,L(p)===b?null:b,!0)}function w(b){return Sn.config.temp_units==="F"?(b*9/5+32).toFixed(1):b.toFixed(1)}function g(b){return b===null?"--":Math.round(b).toString()}function v(b){return{sunny:"","clear-night":"",partlycloudy:"",cloudy:"",rainy:"",pouring:"",snowy:"",fog:"",windy:"",lightning:"","lightning-rainy":"",hail:""}[b]||""}function N(b){try{const G=new Date(b),W=new Date,J=new Date(W);return J.setDate(J.getDate()+1),G.toDateString()===W.toDateString()?"Today":G.toDateString()===J.toDateString()?"Tomorrow":G.toLocaleDateString("en-US",{weekday:"short"})}catch{return"Day"}}function R(){He(o,!0),localStorage.setItem("tiltui_alerts_dismissed","true"),localStorage.setItem("tiltui_alerts_dismissed_time",Date.now().toString())}function q(){He(c,!L(c))}var X=hc();Wr("1uha8ag",b=>{Rr(()=>{Fr.title="Dashboard | Tilt UI"})});var le=Mn(X);{var y=b=>{var G=sc(),W=te(G),J=te(W),ee=xe(te(J),4),k=te(ee,!0);K(ee),K(J);var ne=xe(J,2);ne.__click=R,K(W);var F=xe(W,2);{var A=D=>{var ge=lc();on(ge,21,()=>L(i).alerts,En,(he,re)=>{var ie=tc();let Z;var C=te(ie),ye=te(C);K(C);var E=xe(C,2),O=te(E,!0);K(E),K(ie),dt(()=>{Z=un(ie,1,"alert-item svelte-1uha8ag",null,Z,{warning:L(re).level==="warning",critical:L(re).level==="critical"}),Ye(ye,`${L(re).day??""}:`),Ye(O,L(re).message)}),Ae(he,ie)}),K(ge),Ae(D,ge)};ot(F,D=>{L(c)||D(A)})}var M=xe(F,2);{var se=D=>{var ge=nc();ge.__click=q;var he=te(ge,!0);K(ge),dt(()=>Ye(he,L(c)?`Show ${L(i).alerts.length} alerts`:"Show less")),Ae(D,ge)};ot(M,D=>{L(i).alerts.length>3&&D(se)})}K(G),dt(()=>Ye(k,L(i).alerts.length)),Ae(b,G)};ot(le,b=>{L(i)&&L(i).alerts.length>0&&!L(o)&&b(y)})}var Y=xe(le,2);{var T=b=>{var G=rc(),W=xe(te(G),4),J=te(W);{var ee=A=>{var M=Cr("Waiting for Tilt hydrometers to broadcast...");Ae(A,M)},k=A=>{var M=ic();Ae(A,M)};ot(J,A=>{Kt.connected?A(ee):A(k,!1)})}K(W);var ne=xe(W,2);{var F=A=>{var M=oc();Ae(A,M)};ot(ne,A=>{Kt.connected&&A(F)})}K(G),Ae(b,G)},ue=b=>{var G=pc(),W=Mn(G);let J;on(W,21,()=>L(d),A=>A.id,(A,M)=>{{let se=Jt(()=>L(p)===L(M).id),D=Jt(()=>L(d).length===1);ec(A,{get tilt(){return L(M)},get expanded(){return L(se)},get wide(){return L(D)},onToggleExpand:()=>m(L(M).id)})}}),K(W);var ee=xe(W,2);{var k=A=>{var M=cc(),se=xe(te(M),2),D=te(se);{var ge=ie=>{var Z=ac(),C=te(Z),ye=te(C,!0);K(C);var E=xe(C,2),O=te(E,!0);K(E),il(2),K(Z),dt((B,de)=>{Ye(ye,B),Ye(O,de)},[()=>w(Kt.ambient.temperature),co]),Ae(ie,Z)};ot(D,ie=>{Kt.ambient.temperature!==null&&ie(ge)})}var he=xe(D,2);{var re=ie=>{var Z=uc(),C=te(Z),ye=te(C,!0);K(C),il(4),K(Z),dt(E=>Ye(ye,E),[()=>Kt.ambient.humidity.toFixed(0)]),Ae(ie,Z)};ot(he,ie=>{Kt.ambient.humidity!==null&&ie(re)})}K(se),K(M),Ae(A,M)};ot(ee,A=>{Kt.ambient&&(Kt.ambient.temperature!==null||Kt.ambient.humidity!==null)&&A(k)})}var ne=xe(ee,2);{var F=A=>{var M=dc(),se=xe(te(M),2);on(se,21,()=>L(i).forecast.slice(0,5),En,(D,ge)=>{var he=fc(),re=te(he),ie=te(re,!0);K(re);var Z=xe(re,2),C=te(Z,!0);K(Z);var ye=xe(Z,2),E=te(ye),O=te(E);K(E);var B=xe(E,2),de=te(B);K(B),K(ye),K(he),dt((ce,j,I,U)=>{Ye(ie,ce),Ye(C,j),Ye(O,`${I??""}`),Ye(de,`${U??""}`)},[()=>N(L(ge).datetime),()=>v(L(ge).condition),()=>g(L(ge).temperature),()=>g(L(ge).templow)]),Ae(D,he)}),K(se),K(M),Ae(A,M)};ot(ne,A=>{L(i)&&L(i).forecast.length>0&&A(F)})}dt(()=>J=un(W,1,"tilt-grid svelte-1uha8ag",null,J,{"single-tilt":L(d).length===1})),Ae(b,G)};ot(Y,b=>{L(d).length===0?b(T):b(ue,!1)})}Ae(e,X),Ds()}Ms(["click"]);export{Tc as component};
