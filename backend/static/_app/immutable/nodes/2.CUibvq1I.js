import{d as Zn,c as Dn,a as be,f as Ce,s as xe,e as xa}from"../chunks/BQ88CgEU.js";import{o as Fr,R as Or,b7 as Nr,b as Gr,ah as Qn,ar as kl,c as d,ai as Ve,aj as Xn,al as D,an as M,ak as B,ao as Be,as as dt,s as ue,at as Bl,p as Tn,ap as ba,aL as zr,aq as Os,e as Vr,am as Ir}from"../chunks/CGXqq0_G.js";import{e as Ln,i as qn}from"../chunks/payu-7ZH.js";import{B as Br,i as at}from"../chunks/ziKwUJ4R.js";import{h as Hr}from"../chunks/BP8qDDK3.js";import{s as ml}from"../chunks/DqcjHxzZ.js";import{t as ya}from"../chunks/DThvY6M2.js";import{w as wn}from"../chunks/BwsdUUZq.js";import{r as Sa,s as nn}from"../chunks/D2zVhfuI.js";import{s as En}from"../chunks/BSw_pJTS.js";import{b as ka}from"../chunks/CL9D8AtU.js";import{b as qs}from"../chunks/C39ACuyu.js";import{p as Pn}from"../chunks/B3wItnqC.js";import{c as Un,d as Mn,b as Ks,g as Ta,e as Wr}from"../chunks/Dq6yox8V.js";import{T as Ur,o as Yr,q as qr,s as Kr,t as jr,u as Jr,v as Zr,g as Qr}from"../chunks/AheCACzJ.js";import{i as Xr,s as $r}from"../chunks/C5J5lxM1.js";function eo(e,l,i){Fr&&Or();var n=new Br(e),a=!Nr();Gr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const to=!0,Et="u-",lo="uplot",no=Et+"hz",so=Et+"vt",io=Et+"title",ao=Et+"wrap",ro=Et+"under",oo=Et+"over",uo=Et+"axis",Il=Et+"off",co=Et+"select",fo=Et+"cursor-x",po=Et+"cursor-y",vo=Et+"cursor-pt",ho=Et+"legend",go=Et+"live",mo=Et+"inline",_o=Et+"series",wo=Et+"marker",Fi=Et+"label",xo=Et+"value",yn="width",Sn="height",xn="top",Oi="bottom",tn="left",As="right",js="#000",Ni=js+"0",Cs="mousemove",Gi="mousedown",Ds="mouseup",zi="mouseenter",Vi="mouseleave",Ii="dblclick",bo="resize",yo="scroll",Bi="change",Kn="dppxchange",Js="--",cn=typeof window<"u",Ns=cn?document:null,sn=cn?window:null,So=cn?navigator:null;let Fe,Bn;function Gs(){let e=devicePixelRatio;Fe!=e&&(Fe=e,Bn&&Vs(Bi,Bn,Gs),Bn=matchMedia(`(min-resolution: ${Fe-.001}dppx) and (max-resolution: ${Fe+.001}dppx)`),Hl(Bi,Bn,Gs),sn.dispatchEvent(new CustomEvent(Kn)))}function tl(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function zs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function $e(e,l,i){e.style[l]=i+"px"}function vl(e,l,i,n){let a=Ns.createElement(e);return l!=null&&tl(a,l),i?.insertBefore(a,n),a}function ol(e,l){return vl("div",e,l)}const Hi=new WeakMap;function yl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Hi.get(e);c!=u&&(e.style.transform=c,Hi.set(e,c),l<0||i<0||l>n||i>a?tl(e,Il):zs(e,Il))}const Wi=new WeakMap;function Ui(e,l,i){let n=l+i,a=Wi.get(e);n!=a&&(Wi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Yi=new WeakMap;function qi(e,l,i,n){let a=l+""+i,c=Yi.get(e);a!=c&&(Yi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Zs={passive:!0},ko={...Zs,capture:!0};function Hl(e,l,i,n){l.addEventListener(e,i,n?ko:Zs)}function Vs(e,l,i,n){l.removeEventListener(e,i,Zs)}cn&&Gs();function hl(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:ll((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ea(e){return(i,n,a)=>{let c=-1,u=-1;for(let p=n;p<=a;p++)if(e(i[p])){c=p;break}for(let p=a;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const Ma=e=>e!=null,Aa=e=>e!=null&&e>0,$n=Ea(Ma),To=Ea(Aa);function Eo(e,l,i,n=0,a=!1){let c=a?To:$n,u=a?Aa:Ma;[l,i]=c(e,l,i);let p=e[l],v=e[l];if(l>-1)if(n==1)p=e[l],v=e[i];else if(n==-1)p=e[i],v=e[l];else for(let h=l;h<=i;h++){let k=e[h];u(k)&&(k<p?p=k:k>v&&(v=k))}return[p??Ue,v??-Ue]}function es(e,l,i,n){let a=Ji(e),c=Ji(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?Tl:Ca,p=a==1?ll:ul,v=c==1?ul:ll,h=p(u(Tt(e))),k=v(u(Tt(l))),m=an(i,h),_=an(i,k);return i==10&&(h<0&&(m=Ye(m,-h)),k<0&&(_=Ye(_,-k))),n||i==2?(e=m*a,l=_*c):(e=Ra(e,m),l=ts(l,_)),[e,l]}function Qs(e,l,i,n){let a=es(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Xs=.1,Ki={mode:3,pad:Xs},An={pad:0,soft:null,mode:0},Mo={min:An,max:An};function jn(e,l,i,n){return ls(i)?ji(e,l,i):(An.pad=i,An.soft=n?0:null,An.mode=n?3:0,ji(e,l,Mo))}function Pe(e,l){return e??l}function Ao(e,l,i){for(l=Pe(l,0),i=Pe(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function ji(e,l,i){let n=i.min,a=i.max,c=Pe(n.pad,0),u=Pe(a.pad,0),p=Pe(n.hard,-Ue),v=Pe(a.hard,Ue),h=Pe(n.soft,Ue),k=Pe(a.soft,-Ue),m=Pe(n.mode,0),_=Pe(a.mode,0),N=l-e,T=Tl(N),U=Kt(Tt(e),Tt(l)),Q=Tl(U),$=Tt(Q-T);(N<1e-24||$>10)&&(N=0,(e==0||l==0)&&(N=1e-24,m==2&&h!=Ue&&(c=0),_==2&&k!=-Ue&&(u=0)));let S=N||U||1e3,Y=Tl(S),P=an(10,ll(Y)),O=S*(N==0?e==0?.1:1:c),L=Ye(Ra(e-O,P/10),24),le=e>=h&&(m==1||m==3&&L<=h||m==2&&L>=h)?h:Ue,j=Kt(p,L<le&&e>=le?le:gl(le,L)),J=S*(N==0?l==0?.1:1:u),ne=Ye(ts(l+J,P/10),24),w=l<=k&&(_==1||_==3&&ne>=k||_==2&&ne<=k)?k:-Ue,V=gl(v,ne>w&&l<=w?w:Kt(w,ne));return j==V&&j==0&&(V=100),[j,V]}const Co=new Intl.NumberFormat(cn?So.language:"en-US"),$s=e=>Co.format(e),nl=Math,Yn=nl.PI,Tt=nl.abs,ll=nl.floor,kt=nl.round,ul=nl.ceil,gl=nl.min,Kt=nl.max,an=nl.pow,Ji=nl.sign,Tl=nl.log10,Ca=nl.log2,Do=(e,l=1)=>nl.sinh(e)*l,Ls=(e,l=1)=>nl.asinh(e/l),Ue=1/0;function Zi(e){return(Tl((e^e>>31)-(e>>31))|0)+1}function Is(e,l,i){return gl(Kt(e,l),i)}function Da(e){return typeof e=="function"}function Te(e){return Da(e)?e:()=>e}const Lo=()=>{},La=e=>e,Pa=(e,l)=>l,Po=e=>null,Qi=e=>!0,Xi=(e,l)=>e==l,Ro=/\.\d*?(?=9{6,}|0{6,})/gm,Wl=e=>{if(Oa(e)||Rl.has(e))return e;const l=`${e}`,i=l.match(Ro);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Wl(a)}e${c}`}return Ye(e,n)};function zl(e,l){return Wl(Ye(Wl(e/l))*l)}function ts(e,l){return Wl(ul(Wl(e/l))*l)}function Ra(e,l){return Wl(ll(Wl(e/l))*l)}function Ye(e,l=0){if(Oa(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return kt(n)/i}const Rl=new Map;function Fa(e){return((""+e).split(".")[1]||"").length}function Rn(e,l,i,n){let a=[],c=n.map(Fa);for(let u=l;u<i;u++){let p=Tt(u),v=Ye(an(e,u),p);for(let h=0;h<n.length;h++){let k=e==10?+`${n[h]}e${u}`:n[h]*v,m=(u>=0?0:p)+(u>=c[h]?0:c[h]),_=e==10?k:Ye(k,m);a.push(_),Rl.set(_,m)}}return a}const Cn={},ei=[],rn=[null,null],Pl=Array.isArray,Oa=Number.isInteger,Fo=e=>e===void 0;function $i(e){return typeof e=="string"}function ls(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Oo(e){return e!=null&&typeof e=="object"}const No=Object.getPrototypeOf(Uint8Array),Na="__proto__";function on(e,l=ls){let i;if(Pl(e)){let n=e.find(a=>a!=null);if(Pl(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=on(e[a],l)}else i=e.slice()}else if(e instanceof No)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Na&&(i[n]=on(e[n],l))}else i=e;return i}function xt(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Na&&(ls(e[a])?xt(e[a],on(n[a])):e[a]=on(n[a]))}return e}const Go=0,zo=1,Vo=2;function Io(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Bo(e,l){if(Uo(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Yo(u[0])||(u=Wo(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let v=e[u][0],h=v.length;for(let k=0;k<h;k++)i.add(v[k])}let n=[Array.from(i).sort((u,p)=>u-p)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],v=p[0];for(let h=1;h<p.length;h++){let k=p[h],m=Array(a).fill(void 0),_=l?l[u][h]:zo,N=[];for(let T=0;T<k.length;T++){let U=k[T],Q=c.get(v[T]);U===null?_!=Go&&(m[Q]=U,_==Vo&&N.push(Q)):m[Q]=U}Io(m,N,a),n.push(m)}}return n}const Ho=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Wo(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let v=0;v<i;v++)p[v]=u[n[v]];a.push(p)}return a}function Uo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Yo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=Kt(1,ll((a-n+1)/l));for(let u=e[n],p=n+c;p<=a;p+=c){const v=e[p];if(v!=null){if(v<=u)return!1;u=v}}return!0}const Ga=["January","February","March","April","May","June","July","August","September","October","November","December"],za=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Va(e){return e.slice(0,3)}const qo=za.map(Va),Ko=Ga.map(Va),jo={MMMM:Ga,MMM:Ko,WWWW:za,WWW:qo};function bn(e){return(e<10?"0":"")+e}function Jo(e){return(e<10?"00":e<100?"0":"")+e}const Zo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>bn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>bn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>bn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>bn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>bn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Jo(e.getMilliseconds())};function ti(e,l){l=l||jo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?Zo[a[1]]:a[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Qo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Xo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Qo?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ia=e=>e%1==0,Jn=[1,2,2.5,5],$o=Rn(10,-32,0,Jn),Ba=Rn(10,0,32,Jn),eu=Ba.filter(Ia),Vl=$o.concat(Ba),li=`
`,Ha="{YYYY}",ea=li+Ha,Wa="{M}/{D}",kn=li+Wa,Hn=kn+"/{YY}",Ua="{aa}",tu="{h}:{mm}",ln=tu+Ua,ta=li+ln,la=":{ss}",Ne=null;function Ya(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,v=(e==1?Rn(10,0,3,Jn).filter(Ia):Rn(10,-3,0,Jn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const h=[[u,Ha,Ne,Ne,Ne,Ne,Ne,Ne,1],[a*28,"{MMM}",ea,Ne,Ne,Ne,Ne,Ne,1],[a,Wa,ea,Ne,Ne,Ne,Ne,Ne,1],[n,"{h}"+Ua,Hn,Ne,kn,Ne,Ne,Ne,1],[i,ln,Hn,Ne,kn,Ne,Ne,Ne,1],[l,la,Hn+" "+ln,Ne,kn+" "+ln,Ne,ta,Ne,1],[e,la+".{fff}",Hn+" "+ln,Ne,kn+" "+ln,Ne,ta,Ne,1]];function k(m){return(_,N,T,U,Q,$)=>{let S=[],Y=Q>=u,P=Q>=c&&Q<u,O=m(T),L=Ye(O*e,3),le=Ps(O.getFullYear(),Y?0:O.getMonth(),P||Y?1:O.getDate()),j=Ye(le*e,3);if(P||Y){let J=P?Q/c:0,ne=Y?Q/u:0,w=L==j?L:Ye(Ps(le.getFullYear()+ne,le.getMonth()+J,1)*e,3),V=new Date(kt(w/e)),z=V.getFullYear(),X=V.getMonth();for(let R=0;w<=U;R++){let K=Ps(z+ne*R,X+J*R,1),A=K-m(Ye(K*e,3));w=Ye((+K+A)*e,3),w<=U&&S.push(w)}}else{let J=Q>=a?a:Q,ne=ll(T)-ll(L),w=j+ne+ts(L-j,J);S.push(w);let V=m(w),z=V.getHours()+V.getMinutes()/i+V.getSeconds()/n,X=Q/n,R=_.axes[N]._space,K=$/R;for(;w=Ye(w+Q,e==1?0:3),!(w>U);)if(X>1){let A=ll(Ye(z+X,6))%24,oe=m(w).getHours()-A;oe>1&&(oe=-1),w-=oe*n,z=(z+X)%24;let ge=S[S.length-1];Ye((w-ge)/Q,3)*K>=.7&&S.push(w)}else S.push(w)}return S}}return[v,h,k]}const[lu,nu,su]=Ya(1),[iu,au,ru]=Ya(.001);Rn(2,-53,53,[1]);function na(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function sa(e,l){return(i,n,a,c,u)=>{let p=l.find(T=>u>=T[0])||l[l.length-1],v,h,k,m,_,N;return n.map(T=>{let U=e(T),Q=U.getFullYear(),$=U.getMonth(),S=U.getDate(),Y=U.getHours(),P=U.getMinutes(),O=U.getSeconds(),L=Q!=v&&p[2]||$!=h&&p[3]||S!=k&&p[4]||Y!=m&&p[5]||P!=_&&p[6]||O!=N&&p[7]||p[1];return v=Q,h=$,k=S,m=Y,_=P,N=O,L(U)})}}function ou(e,l){let i=ti(l);return(n,a,c,u,p)=>a.map(v=>i(e(v)))}function Ps(e,l,i){return new Date(e,l,i)}function ia(e,l){return l(e)}const uu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function aa(e,l){return(i,n,a,c)=>c==null?Js:l(e(n))}function cu(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function fu(e,l){return e.series[l].fill(e,l)}const du={show:!0,live:!0,isolate:!1,mount:Lo,markers:{show:!0,width:2,stroke:cu,fill:fu,dash:"solid"},idx:null,idxs:null,values:[]};function pu(e,l){let i=e.cursor.points,n=ol(),a=i.size(e,l);$e(n,yn,a),$e(n,Sn,a);let c=a/-2;$e(n,"marginLeft",c),$e(n,"marginTop",c);let u=i.width(e,l,a);return u&&$e(n,"borderWidth",u),n}function vu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function hu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function gu(e,l){return e.series[l].points.size}const Rs=[0,0];function mu(e,l,i){return Rs[0]=l,Rs[1]=i,Rs}function Wn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Fs(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const _u={show:!0,x:!0,y:!0,lock:!1,move:mu,points:{one:!1,show:pu,size:gu,width:0,stroke:hu,fill:vu},bind:{mousedown:Wn,mouseup:Wn,click:Wn,dblclick:Wn,mousemove:Fs,mouseleave:Fs,mouseenter:Fs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},qa={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ni=xt({},qa,{filter:Pa}),Ka=xt({},ni,{size:10}),ja=xt({},qa,{show:!1}),si='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ja="bold "+si,Za=1.5,ra={show:!0,scale:"x",stroke:js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ja,side:2,grid:ni,ticks:Ka,border:ja,font:si,lineGap:Za,rotate:0},wu="Value",xu="Time",oa={show:!0,scale:"x",auto:!1,sorted:1,min:Ue,max:-Ue,idxs:[]};function bu(e,l,i,n,a){return l.map(c=>c==null?"":$s(c))}function yu(e,l,i,n,a,c,u){let p=[],v=Rl.get(a)||0;i=u?i:Ye(ts(i,a),v);for(let h=i;h<=n;h=Ye(h+a,v))p.push(Object.is(h,-0)?0:h);return p}function Bs(e,l,i,n,a,c,u){const p=[],v=e.scales[e.axes[l].scale].log,h=v==10?Tl:Ca,k=ll(h(i));a=an(v,k),v==10&&(a=Vl[hl(a,Vl)]);let m=i,_=a*v;v==10&&(_=Vl[hl(_,Vl)]);do p.push(m),m=m+a,v==10&&!Rl.has(m)&&(m=Ye(m,Rl.get(a))),m>=_&&(a=m,_=a*v,v==10&&(_=Vl[hl(_,Vl)]));while(m<=n);return p}function Su(e,l,i,n,a,c,u){let v=e.scales[e.axes[l].scale].asinh,h=n>v?Bs(e,l,Kt(v,i),n,a):[v],k=n>=0&&i<=0?[0]:[];return(i<-v?Bs(e,l,Kt(v,-n),-i,a):[v]).reverse().map(_=>-_).concat(k,h)}const Qa=/./,ku=/[12357]/,Tu=/[125]/,ua=/1/,Hs=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Eu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=e.scales[u],v=e.valToPos,h=c._space,k=v(10,u),m=v(9,u)-k>=h?Qa:v(7,u)-k>=h?ku:v(5,u)-k>=h?Tu:ua;if(m==ua){let _=Tt(v(1,u)-k);if(_<h)return Hs(l.slice().reverse(),p.distr,m,ul(h/_)).reverse()}return Hs(l,p.distr,m,1)}function Mu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=c._space,v=e.valToPos,h=Tt(v(1,u)-v(2,u));return h<p?Hs(l.slice().reverse(),3,Qa,ul(p/h)).reverse():l}function Au(e,l,i,n){return n==null?Js:l==null?"":$s(l)}const ca={show:!0,scale:"y",stroke:js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ja,side:3,grid:ni,ticks:Ka,border:ja,font:si,lineGap:Za,rotate:0};function Cu(e,l){let i=3+(e||1)*2;return Ye(i*l,3)}function Du(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),p=Tt(u-c),v=e.series[l],h=p/(v.points.space*Fe);return n[1]-n[0]<=h}const fa={scale:null,auto:!0,sorted:0,min:Ue,max:-Ue},Xa=(e,l,i,n,a)=>a,da={show:!0,auto:!0,sorted:0,gaps:Xa,alpha:1,facets:[xt({},fa,{scale:"x"}),xt({},fa,{scale:"y"})]},pa={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Xa,alpha:1,points:{show:Du,filter:null},values:null,min:Ue,max:-Ue,idxs:[],path:null,clip:null};function Lu(e,l,i,n,a){return i/10}const $a={time:to,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Pu=xt({},$a,{time:!1,ori:1}),va={};function er(e,l){let i=va[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,p,v,h){for(let k=0;k<i.plots.length;k++)i.plots[k]!=a&&i.plots[k].pub(n,a,c,u,p,v,h)}},e!=null&&(va[e]=i)),i}const un=1,Ws=2;function Ul(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let v=c[0],h=n==2?c[1]:c[l],k=n==2?u[a.facets[0].scale]:u[e.series[0].scale],m=n==2?u[a.facets[1].scale]:u[a.scale],_=p.left,N=p.top,T=p.width,U=p.height,Q=e.valToPosH,$=e.valToPosV;return k.ori==0?i(a,v,h,k,m,Q,$,_,N,T,U,ss,fn,as,lr,sr):i(a,v,h,k,m,$,Q,N,_,U,T,is,dn,ri,nr,ir)}function ii(e,l){let i=0,n=0,a=Pe(e.bands,ei);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Ru(e,l,i,n,a){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,v=e.scales[p];return a==-1?v.min:a==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function El(e,l,i,n,a,c){return Ul(e,l,(u,p,v,h,k,m,_,N,T,U,Q)=>{let $=u.pxRound;const S=h.dir*(h.ori==0?1:-1),Y=h.ori==0?fn:dn;let P,O;S==1?(P=i,O=n):(P=n,O=i);let L=$(m(p[P],h,U,N)),le=$(_(v[P],k,Q,T)),j=$(m(p[O],h,U,N)),J=$(_(c==1?k.max:k.min,k,Q,T)),ne=new Path2D(a);return Y(ne,j,J),Y(ne,L,J),Y(ne,L,le),ne})}function ns(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?as:ri;let v=i;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let N=_[0]-v;N>0&&p(u,v,n,N,n+c),v=_[1]}}let h=i+a-v,k=10;h>0&&p(u,v,n-k/2,h,n+c+k)}return u}function Fu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ai(e,l,i,n,a,c,u){let p=[],v=e.length;for(let h=a==1?i:n;h>=i&&h<=n;h+=a)if(l[h]===null){let m=h,_=h;if(a==1)for(;++h<=n&&l[h]===null;)_=h;else for(;--h>=i&&l[h]===null;)_=h;let N=c(e[m]),T=_==m?N:c(e[_]),U=m-a;N=u<=0&&U>=0&&U<v?c(e[U]):N;let $=_+a;T=u>=0&&$>=0&&$<v?c(e[$]):T,T>=N&&p.push([N,T])}return p}function ha(e){return e==0?La:e==1?kt:l=>zl(l,e)}function tr(e){let l=e==0?ss:is,i=e==0?(a,c,u,p,v,h)=>{a.arcTo(c,u,p,v,h)}:(a,c,u,p,v,h)=>{a.arcTo(u,c,v,p,h)},n=e==0?(a,c,u,p,v)=>{a.rect(c,u,p,v)}:(a,c,u,p,v)=>{a.rect(u,c,v,p)};return(a,c,u,p,v,h=0,k=0)=>{h==0&&k==0?n(a,c,u,p,v):(h=gl(h,p/2,v/2),k=gl(k,p/2,v/2),l(a,c+h,u),i(a,c+p,u,c+p,u+v,h),i(a,c+p,u+v,c,u+v,k),i(a,c,u+v,c,u,k),i(a,c,u,c+p,u,h),a.closePath())}}const ss=(e,l,i)=>{e.moveTo(l,i)},is=(e,l,i)=>{e.moveTo(i,l)},fn=(e,l,i)=>{e.lineTo(l,i)},dn=(e,l,i)=>{e.lineTo(i,l)},as=tr(0),ri=tr(1),lr=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},nr=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},sr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},ir=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function ar(e){return(l,i,n,a,c)=>Ul(l,i,(u,p,v,h,k,m,_,N,T,U,Q)=>{let{pxRound:$,points:S}=u,Y,P;h.ori==0?(Y=ss,P=lr):(Y=is,P=nr);const O=Ye(S.width*Fe,3);let L=(S.size-S.width)/2*Fe,le=Ye(L*2,3),j=new Path2D,J=new Path2D,{left:ne,top:w,width:V,height:z}=l.bbox;as(J,ne-le,w-le,V+le*2,z+le*2);const X=R=>{if(v[R]!=null){let K=$(m(p[R],h,U,N)),A=$(_(v[R],k,Q,T));Y(j,K+L,A),P(j,K,A,L,0,Yn*2)}};if(c)c.forEach(X);else for(let R=n;R<=a;R++)X(R);return{stroke:O>0?j:null,fill:j,clip:J,flags:un|Ws}})}function rr(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Ou=rr(fn),Nu=rr(dn);function or(e){const l=Pe(e?.alignGaps,0);return(i,n,a,c)=>Ul(i,n,(u,p,v,h,k,m,_,N,T,U,Q)=>{[a,c]=$n(v,a,c);let $=u.pxRound,S=z=>$(m(z,h,U,N)),Y=z=>$(_(z,k,Q,T)),P,O;h.ori==0?(P=fn,O=Ou):(P=dn,O=Nu);const L=h.dir*(h.ori==0?1:-1),le={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:un},j=le.stroke;let J=!1;if(c-a>=U*4){let z=q=>i.posToVal(q,h.key,!0),X=null,R=null,K,A,Ee,he=S(p[L==1?a:c]),oe=S(p[a]),ge=S(p[c]),se=z(L==1?oe+1:ge-1);for(let q=L==1?a:c;q>=a&&q<=c;q+=L){let Se=p[q],Me=(L==1?Se<se:Se>se)?he:S(Se),_e=v[q];Me==he?_e!=null?(A=_e,X==null?(P(j,Me,Y(A)),K=X=R=A):A<X?X=A:A>R&&(R=A)):_e===null&&(J=!0):(X!=null&&O(j,he,Y(X),Y(R),Y(K),Y(A)),_e!=null?(A=_e,P(j,Me,Y(A)),X=R=K=A):(X=R=null,_e===null&&(J=!0)),he=Me,se=z(he+L))}X!=null&&X!=R&&Ee!=he&&O(j,he,Y(X),Y(R),Y(K),Y(A))}else for(let z=L==1?a:c;z>=a&&z<=c;z+=L){let X=v[z];X===null?J=!0:X!=null&&P(j,S(p[z]),Y(X))}let[w,V]=ii(i,n);if(u.fill!=null||w!=0){let z=le.fill=new Path2D(j),X=u.fillTo(i,n,u.min,u.max,w),R=Y(X),K=S(p[a]),A=S(p[c]);L==-1&&([A,K]=[K,A]),P(z,A,R),P(z,K,R)}if(!u.spanGaps){let z=[];J&&z.push(...ai(p,v,a,c,L,S,l)),le.gaps=z=u.gaps(i,n,a,c,z),le.clip=ns(z,h.ori,N,T,U,Q)}return V!=0&&(le.band=V==2?[El(i,n,a,c,j,-1),El(i,n,a,c,j,1)]:El(i,n,a,c,j,V)),le})}function Gu(e){const l=Pe(e.align,1),i=Pe(e.ascDesc,!1),n=Pe(e.alignGaps,0),a=Pe(e.extend,!1);return(c,u,p,v)=>Ul(c,u,(h,k,m,_,N,T,U,Q,$,S,Y)=>{[p,v]=$n(m,p,v);let P=h.pxRound,{left:O,width:L}=c.bbox,le=oe=>P(T(oe,_,S,Q)),j=oe=>P(U(oe,N,Y,$)),J=_.ori==0?fn:dn;const ne={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:un},w=ne.stroke,V=_.dir*(_.ori==0?1:-1);let z=j(m[V==1?p:v]),X=le(k[V==1?p:v]),R=X,K=X;a&&l==-1&&(K=O,J(w,K,z)),J(w,X,z);for(let oe=V==1?p:v;oe>=p&&oe<=v;oe+=V){let ge=m[oe];if(ge==null)continue;let se=le(k[oe]),q=j(ge);l==1?J(w,se,z):J(w,R,q),J(w,se,q),z=q,R=se}let A=R;a&&l==1&&(A=O+L,J(w,A,z));let[Ee,he]=ii(c,u);if(h.fill!=null||Ee!=0){let oe=ne.fill=new Path2D(w),ge=h.fillTo(c,u,h.min,h.max,Ee),se=j(ge);J(oe,A,se),J(oe,K,se)}if(!h.spanGaps){let oe=[];oe.push(...ai(k,m,p,v,V,le,n));let ge=h.width*Fe/2,se=i||l==1?ge:-ge,q=i||l==-1?-ge:ge;oe.forEach(Se=>{Se[0]+=se,Se[1]+=q}),ne.gaps=oe=h.gaps(c,u,p,v,oe),ne.clip=ns(oe,_.ori,Q,$,S,Y)}return he!=0&&(ne.band=he==2?[El(c,u,p,v,w,-1),El(c,u,p,v,w,1)]:El(c,u,p,v,w,he)),ne})}function ga(e,l,i,n,a,c,u=Ue){if(e.length>1){let p=null;for(let v=0,h=1/0;v<e.length;v++)if(l[v]!==void 0){if(p!=null){let k=Tt(e[v]-e[p]);k<h&&(h=k,u=Tt(i(e[v],n,a,c)-i(e[p],n,a,c)))}p=v}}return u}function zu(e){e=e||Cn;const l=Pe(e.size,[.6,Ue,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=Te(a),u=1-l[0],p=Pe(l[1],Ue),v=Pe(l[2],1),h=Pe(e.disp,Cn),k=Pe(e.each,N=>{}),{fill:m,stroke:_}=h;return(N,T,U,Q)=>Ul(N,T,($,S,Y,P,O,L,le,j,J,ne,w)=>{let V=$.pxRound,z=i,X=n*Fe,R=p*Fe,K=v*Fe,A,Ee;P.ori==0?[A,Ee]=c(N,T):[Ee,A]=c(N,T);const he=P.dir*(P.ori==0?1:-1);let oe=P.ori==0?as:ri,ge=P.ori==0?k:(G,Ae,Ke,Bt,jt,At,Ht)=>{k(G,Ae,Ke,jt,Bt,Ht,At)},se=Pe(N.bands,ei).find(G=>G.series[0]==T),q=se!=null?se.dir:0,Se=$.fillTo(N,T,$.min,$.max,q),qe=V(le(Se,O,w,J)),Me,_e,je,Je=ne,ke=V($.width*Fe),He=!1,rt=null,nt=null,pt=null,Mt=null;m!=null&&(ke==0||_!=null)&&(He=!0,rt=m.values(N,T,U,Q),nt=new Map,new Set(rt).forEach(G=>{G!=null&&nt.set(G,new Path2D)}),ke>0&&(pt=_.values(N,T,U,Q),Mt=new Map,new Set(pt).forEach(G=>{G!=null&&Mt.set(G,new Path2D)})));let{x0:we,size:st}=h;if(we!=null&&st!=null){z=1,S=we.values(N,T,U,Q),we.unit==2&&(S=S.map(Ke=>N.posToVal(j+Ke*ne,P.key,!0)));let G=st.values(N,T,U,Q);st.unit==2?_e=G[0]*ne:_e=L(G[0],P,ne,j)-L(0,P,ne,j),Je=ga(S,Y,L,P,ne,j,Je),je=Je-_e+X}else Je=ga(S,Y,L,P,ne,j,Je),je=Je*u+X,_e=Je-je;je<1&&(je=0),ke>=_e/2&&(ke=0),je<5&&(V=La);let Nt=je>0,_t=Je-je-(Nt?ke:0);_e=V(Is(_t,K,R)),Me=(z==0?_e/2:z==he?0:_e)-z*he*((z==0?X/2:0)+(Nt?ke/2:0));const De={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Gt=He?null:new Path2D;let zt=null;if(se!=null)zt=N.data[se.series[1]];else{let{y0:G,y1:Ae}=h;G!=null&&Ae!=null&&(Y=Ae.values(N,T,U,Q),zt=G.values(N,T,U,Q))}let Vt=A*_e,de=Ee*_e;for(let G=he==1?U:Q;G>=U&&G<=Q;G+=he){let Ae=Y[G];if(Ae==null)continue;if(zt!=null){let vt=zt[G]??0;if(Ae-vt==0)continue;qe=le(vt,O,w,J)}let Ke=P.distr!=2||h!=null?S[G]:G,Bt=L(Ke,P,ne,j),jt=le(Pe(Ae,Se),O,w,J),At=V(Bt-Me),Ht=V(Kt(jt,qe)),ot=V(gl(jt,qe)),yt=Ht-ot;if(Ae!=null){let vt=Ae<0?de:Vt,ht=Ae<0?Vt:de;He?(ke>0&&pt[G]!=null&&oe(Mt.get(pt[G]),At,ot+ll(ke/2),_e,Kt(0,yt-ke),vt,ht),rt[G]!=null&&oe(nt.get(rt[G]),At,ot+ll(ke/2),_e,Kt(0,yt-ke),vt,ht)):oe(Gt,At,ot+ll(ke/2),_e,Kt(0,yt-ke),vt,ht),ge(N,T,G,At-ke/2,ot,_e+ke,yt)}}return ke>0?De.stroke=He?Mt:Gt:He||(De._fill=$.width==0?$._fill:$._stroke??$._fill,De.width=0),De.fill=He?nt:Gt,De})}function Vu(e,l){const i=Pe(l?.alignGaps,0);return(n,a,c,u)=>Ul(n,a,(p,v,h,k,m,_,N,T,U,Q,$)=>{[c,u]=$n(h,c,u);let S=p.pxRound,Y=A=>S(_(A,k,Q,T)),P=A=>S(N(A,m,$,U)),O,L,le;k.ori==0?(O=ss,le=fn,L=sr):(O=is,le=dn,L=ir);const j=k.dir*(k.ori==0?1:-1);let J=Y(v[j==1?c:u]),ne=J,w=[],V=[];for(let A=j==1?c:u;A>=c&&A<=u;A+=j)if(h[A]!=null){let he=v[A],oe=Y(he);w.push(ne=oe),V.push(P(h[A]))}const z={stroke:e(w,V,O,le,L,S),fill:null,clip:null,band:null,gaps:null,flags:un},X=z.stroke;let[R,K]=ii(n,a);if(p.fill!=null||R!=0){let A=z.fill=new Path2D(X),Ee=p.fillTo(n,a,p.min,p.max,R),he=P(Ee);le(A,ne,he),le(A,J,he)}if(!p.spanGaps){let A=[];A.push(...ai(v,h,c,u,j,Y,i)),z.gaps=A=p.gaps(n,a,c,u,A),z.clip=ns(A,k.ori,T,U,Q,$)}return K!=0&&(z.band=K==2?[El(n,a,c,u,X,-1),El(n,a,c,u,X,1)]:El(n,a,c,u,X,K)),z})}function Iu(e){return Vu(Bu,e)}function Bu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let v=Array(u),h=Array(u-1),k=Array(u-1),m=Array(u-1);for(let _=0;_<u-1;_++)k[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],h[_]=k[_]/m[_];v[0]=h[0];for(let _=1;_<u-1;_++)h[_]===0||h[_-1]===0||h[_-1]>0!=h[_]>0?v[_]=0:(v[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/h[_-1]+(m[_]+2*m[_-1])/h[_]),isFinite(v[_])||(v[_]=0));v[u-1]=h[u-2];for(let _=0;_<u-1;_++)a(p,e[_]+m[_]/3,l[_]+v[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-v[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const Us=new Set;function ma(){for(let e of Us)e.syncRect(!0)}cn&&(Hl(bo,sn,ma),Hl(yo,sn,ma,!0),Hl(Kn,sn,()=>{bt.pxRatio=Fe}));const Hu=or(),Wu=ar();function _a(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ys(c,u,l,i))}function Uu(e,l){return e.map((i,n)=>n==0?{}:xt({},l,i))}function Ys(e,l,i,n){return xt({},l==0?i:n,e)}function ur(e,l,i){return l==null?rn:[l,i]}const Yu=ur;function qu(e,l,i){return l==null?rn:jn(l,i,Xs,!0)}function cr(e,l,i,n){return l==null?rn:es(l,i,e.scales[n].log,!1)}const Ku=cr;function fr(e,l,i,n){return l==null?rn:Qs(l,i,e.scales[n].log,!1)}const ju=fr;function Ju(e,l,i,n,a){let c=Kt(Zi(e),Zi(l)),u=l-e,p=hl(a/n*u,i);do{let v=i[p],h=n*v/u;if(h>=a&&c+(v<5?Rl.get(v):0)<=17)return[v,h]}while(++p<i.length);return[0,0]}function wa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=kt((i=+a)*Fe))+"px"),[e,l,i]}function Zu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ye(l[2]*Fe,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function bt(e,l,i){const n={mode:Pe(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let v=!1;n.status=0;const h=n.root=ol(lo);if(e.id!=null&&(h.id=e.id),tl(h,e.class),e.title){let t=ol(io,h);t.textContent=e.title}const k=vl("canvas"),m=n.ctx=k.getContext("2d"),_=ol(ao,h);Hl("click",_,t=>{t.target===T&&(Ze!=Zl||lt!=Ql)&&It.click(n,t)},!0);const N=n.under=ol(ro,_);_.appendChild(k);const T=n.over=ol(oo,_);e=on(e);const U=+Pe(e.pxAlign,1),Q=ha(U);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const $=e.ms||.001,S=n.series=a==1?_a(e.series||[],oa,pa,!1):Uu(e.series||[null],da),Y=n.axes=_a(e.axes||[],ra,ca,!0),P=n.scales={},O=n.bands=e.bands||[];O.forEach(t=>{t.fill=Te(t.fill||null),t.dir=Pe(t.dir,-1)});const L=a==2?S[1].facets[0].scale:S[0].scale,le={axes:wr,series:vr},j=(e.drawOrder||["axes","series"]).map(t=>le[t]);function J(t){const s=t.distr==3?r=>Tl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Ls(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:g}=t,x=g-f;return(o-f)/x}}function ne(t){let s=P[t];if(s==null){let r=(e.scales||Cn)[t]||Cn;if(r.from!=null){ne(r.from);let o=xt({},P[r.from],r,{key:t});o.valToPct=J(o),P[t]=o}else{s=P[t]=xt({},t==L?$a:Pu,r),s.key=t;let o=s.time,f=s.range,g=Pl(f);if((t!=L||a==2&&!o)&&(g&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ki:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ki:{mode:1,hard:f[1],soft:f[1]}},g=!1),!g&&ls(f))){let x=f;f=(E,F,H)=>F==null?rn:jn(F,H,x)}s.range=Te(f||(o?Yu:t==L?s.distr==3?Ku:s.distr==4?ju:ur:s.distr==3?cr:s.distr==4?fr:qu)),s.auto=Te(g?!1:s.auto),s.clamp=Te(s.clamp||Lu),s._min=s._max=null,s.valToPct=J(s)}}}ne("x"),ne("y"),a==1&&S.forEach(t=>{ne(t.scale)}),Y.forEach(t=>{ne(t.scale)});for(let t in e.scales)ne(t);const w=P[L],V=w.distr;let z,X;w.ori==0?(tl(h,no),z=c,X=u):(tl(h,so),z=u,X=c);const R={};for(let t in P){let s=P[t];(s.min!=null||s.max!=null)&&(R[t]={min:s.min,max:s.max},s.min=s.max=null)}const K=e.tzDate||(t=>new Date(kt(t/$))),A=e.fmtDate||ti,Ee=$==1?su(K):ru(K),he=sa(K,na($==1?nu:au,A)),oe=aa(K,ia(uu,A)),ge=[],se=n.legend=xt({},du,e.legend),q=n.cursor=xt({},_u,{drag:{y:a==2}},e.cursor),Se=se.show,qe=q.show,Me=se.markers;se.idxs=ge,Me.width=Te(Me.width),Me.dash=Te(Me.dash),Me.stroke=Te(Me.stroke),Me.fill=Te(Me.fill);let _e,je,Je,ke=[],He=[],rt,nt=!1,pt={};if(se.live){const t=S[1]?S[1].values:null;nt=t!=null,rt=nt?t(n,1,0):{_:0};for(let s in rt)pt[s]=Js}if(Se)if(_e=vl("table",ho,h),Je=vl("tbody",null,_e),se.mount(n,_e),nt){je=vl("thead",null,_e,Je);let t=vl("tr",null,je);vl("th",null,t);for(var Mt in rt)vl("th",Fi,t).textContent=Mt}else tl(_e,mo),se.live&&tl(_e,go);const we={show:!0},st={show:!1};function Nt(t,s){if(s==0&&(nt||!se.live||a==2))return rn;let r=[],o=vl("tr",_o,Je,Je.childNodes[s]);tl(o,t.class),t.show||tl(o,Il);let f=vl("th",null,o);if(Me.show){let E=ol(wo,f);if(s>0){let F=Me.width(n,s);F&&(E.style.border=F+"px "+Me.dash(n,s)+" "+Me.stroke(n,s)),E.style.background=Me.fill(n,s)}}let g=ol(Fi,f);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(Me.show||(g.style.color=t.width>0?Me.stroke(n,s):Me.fill(n,s)),De("click",f,E=>{if(q._lock)return;et(E);let F=S.indexOf(t);if((E.ctrlKey||E.metaKey)!=se.isolate){let H=S.some((W,Z)=>Z>0&&Z!=F&&W.show);S.forEach((W,Z)=>{Z>0&&_l(Z,H?Z==F?we:st:we,!0,wt.setSeries)})}else _l(F,{show:!t.show},!0,wt.setSeries)},!1),Jt&&De(zi,f,E=>{q._lock||(et(E),_l(S.indexOf(t),$l,!0,wt.setSeries))},!1));for(var x in rt){let E=vl("td",xo,o);E.textContent="--",r.push(E)}return[o,r]}const _t=new Map;function De(t,s,r,o=!0){const f=_t.get(s)||{},g=q.bind[t](n,s,r,o);g&&(Hl(t,s,f[t]=g),_t.set(s,f))}function Gt(t,s,r){const o=_t.get(s)||{};for(let f in o)(t==null||f==t)&&(Vs(f,s,o[f]),delete o[f]);t==null&&_t.delete(s)}let zt=0,Vt=0,de=0,G=0,Ae=0,Ke=0,Bt=Ae,jt=Ke,At=de,Ht=G,ot=0,yt=0,vt=0,ht=0;n.bbox={};let I=!1,ee=!1,te=!1,ie=!1,pe=!1,y=!1;function b(t,s,r){(r||t!=n.width||s!=n.height)&&C(t,s),ql(!1),te=!0,ee=!0,Kl()}function C(t,s){n.width=zt=de=t,n.height=Vt=G=s,Ae=Ke=0,We(),gt();let r=n.bbox;ot=r.left=zl(Ae*Fe,.5),yt=r.top=zl(Ke*Fe,.5),vt=r.width=zl(de*Fe,.5),ht=r.height=zl(G*Fe,.5)}const re=3;function me(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=_r(s);t=s==re||r&&o,t||(C(n.width,n.height),ee=!0)}}function it({width:t,height:s}){b(t,s)}n.setSize=it;function We(){let t=!1,s=!1,r=!1,o=!1;Y.forEach((f,g)=>{if(f.show&&f._show){let{side:x,_size:E}=f,F=x%2,H=f.label!=null?f.labelSize:0,W=E+H;W>0&&(F?(de-=W,x==3?(Ae+=W,o=!0):r=!0):(G-=W,x==0?(Ke+=W,t=!0):s=!0))}}),Wt[0]=t,Wt[1]=r,Wt[2]=s,Wt[3]=o,de-=ut[1]+ut[3],Ae+=ut[3],G-=ut[2]+ut[0],Ke+=ut[0]}function gt(){let t=Ae+de,s=Ke+G,r=Ae,o=Ke;function f(g,x){switch(g){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}Y.forEach((g,x)=>{if(g.show&&g._show){let E=g.side;g._pos=f(E,g._size),g.label!=null&&(g._lpos=f(E,g.labelSize))}})}if(q.dataIdx==null){let t=q.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Te(t.prox),o=t.bias??=0;q.dataIdx=(f,g,x,E)=>{if(g==0)return x;let F=x,H=r(f,g,x,E)??Ue,W=H>=0&&H<Ue,Z=w.ori==0?de:G,ve=q.left,Re=l[0],Le=l[g];if(s.has(Le[x])){F=null;let ye=null,ce=null,ae;if(o==0||o==-1)for(ae=x;ye==null&&ae-- >0;)s.has(Le[ae])||(ye=ae);if(o==0||o==1)for(ae=x;ce==null&&ae++<Le.length;)s.has(Le[ae])||(ce=ae);if(ye!=null||ce!=null)if(W){let Xe=ye==null?-1/0:z(Re[ye],w,Z,0),ct=ce==null?1/0:z(Re[ce],w,Z,0),Ot=ve-Xe,Ie=ct-ve;Ot<=Ie?Ot<=H&&(F=ye):Ie<=H&&(F=ce)}else F=ce==null?ye:ye==null?ce:x-ye<=ce-x?ye:ce}else W&&Tt(ve-z(Re[x],w,Z,0))>H&&(F=null);return F}}const et=t=>{q.event=t};q.idxs=ge,q._lock=!1;let Ge=q.points;Ge.show=Te(Ge.show),Ge.size=Te(Ge.size),Ge.stroke=Te(Ge.stroke),Ge.width=Te(Ge.width),Ge.fill=Te(Ge.fill);const St=n.focus=xt({},e.focus||{alpha:.3},q.focus),Jt=St.prox>=0,ze=Jt&&Ge.one;let fe=[],Oe=[],Ct=[];function sl(t,s){let r=Ge.show(n,s);if(r instanceof HTMLElement)return tl(r,vo),tl(r,t.class),yl(r,-10,-10,de,G),T.insertBefore(r,fe[s]),r}function tt(t,s){if(a==1||s>0){let r=a==1&&P[t.scale].time,o=t.value;t.value=r?$i(o)?aa(K,ia(o,A)):o||oe:o||Au,t.label=t.label||(r?xu:wu)}if(ze||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Hu||Po,t.fillTo=Te(t.fillTo||Ru),t.pxAlign=+Pe(t.pxAlign,U),t.pxRound=ha(t.pxAlign),t.stroke=Te(t.stroke||null),t.fill=Te(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Cu(Kt(1,t.width),1),o=t.points=xt({},{size:r,width:Kt(1,r*.2),stroke:t.stroke,space:r*2,paths:Wu,_stroke:null,_fill:null},t.points);o.show=Te(o.show),o.filter=Te(o.filter),o.fill=Te(o.fill),o.stroke=Te(o.stroke),o.paths=Te(o.paths),o.pxAlign=t.pxAlign}if(Se){let r=Nt(t,s);ke.splice(s,0,r[0]),He.splice(s,0,r[1]),se.values.push(null)}if(qe){ge.splice(s,0,null);let r=null;ze?s==0&&(r=sl(t,s)):s>0&&(r=sl(t,s)),fe.splice(s,0,r),Oe.splice(s,0,0),Ct.splice(s,0,0)}Ft("addSeries",s)}function il(t,s){s=s??S.length,t=a==1?Ys(t,s,oa,pa):Ys(t,s,{},da),S.splice(s,0,t),tt(S[s],s)}n.addSeries=il;function Qt(t){if(S.splice(t,1),Se){se.values.splice(t,1),He.splice(t,1);let s=ke.splice(t,1)[0];Gt(null,s.firstChild),s.remove()}qe&&(ge.splice(t,1),fe.splice(t,1)[0].remove(),Oe.splice(t,1),Ct.splice(t,1)),Ft("delSeries",t)}n.delSeries=Qt;const Wt=[!1,!1,!1,!1];function Fl(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=P[t.scale];o==null&&(t.scale=r?S[1].scale:L,o=P[t.scale]);let f=o.time;t.size=Te(t.size),t.space=Te(t.space),t.rotate=Te(t.rotate),Pl(t.incrs)&&t.incrs.forEach(x=>{!Rl.has(x)&&Rl.set(x,Fa(x))}),t.incrs=Te(t.incrs||(o.distr==2?eu:f?$==1?lu:iu:Vl)),t.splits=Te(t.splits||(f&&o.distr==1?Ee:o.distr==3?Bs:o.distr==4?Su:yu)),t.stroke=Te(t.stroke),t.grid.stroke=Te(t.grid.stroke),t.ticks.stroke=Te(t.ticks.stroke),t.border.stroke=Te(t.border.stroke);let g=t.values;t.values=Pl(g)&&!Pl(g[0])?Te(g):f?Pl(g)?sa(K,na(g,A)):$i(g)?ou(K,g):g||he:g||bu,t.filter=Te(t.filter||(o.distr>=3&&o.log==10?Eu:o.distr==3&&o.log==2?Mu:Pa)),t.font=wa(t.font),t.labelFont=wa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(Wt[s]=!0,t._el=ol(uo,_))}}function cl(t,s,r,o){let[f,g,x,E]=r,F=s%2,H=0;return F==0&&(E||g)&&(H=s==0&&!f||s==2&&!x?kt(ra.size/3):0),F==1&&(f||x)&&(H=s==1&&!g||s==3&&!E?kt(ca.size/2):0),H}const Ml=n.padding=(e.padding||[cl,cl,cl,cl]).map(t=>Te(Pe(t,cl))),ut=n._padding=Ml.map((t,s)=>t(n,s,Wt,0));let mt,Dt=null,Lt=null;const Fn=a==1?S[0].idxs:null;let fl=null,pn=!1;function oi(t,s){if(l=t??[],n.data=n._data=l,a==2){mt=0;for(let r=1;r<S.length;r++)mt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),fl=l[0],mt=fl.length;let r=l;if(V==2){r=l.slice();let o=r[0]=Array(mt);for(let f=0;f<mt;f++)o[f]=f}n._data=l=r}if(ql(!0),Ft("setData"),V==2&&(te=!0),s!==!1){let r=w;r.auto(n,pn)?rs():Cl(L,r.min,r.max),ie=ie||q.left>=0,y=!0,Kl()}}n.setData=oi;function rs(){pn=!0;let t,s;a==1&&(mt>0?(Dt=Fn[0]=0,Lt=Fn[1]=mt-1,t=l[0][Dt],s=l[0][Lt],V==2?(t=Dt,s=Lt):t==s&&(V==3?[t,s]=es(t,t,w.log,!1):V==4?[t,s]=Qs(t,t,w.log,!1):w.time?s=t+kt(86400/$):[t,s]=jn(t,s,Xs,!0))):(Dt=Fn[0]=t=null,Lt=Fn[1]=s=null)),Cl(L,t,s)}let On,Yl,os,us,cs,fs,ds,ps,vs,Zt;function ui(t,s,r,o,f,g){t??=Ni,r??=ei,o??="butt",f??=Ni,g??="round",t!=On&&(m.strokeStyle=On=t),f!=Yl&&(m.fillStyle=Yl=f),s!=os&&(m.lineWidth=os=s),g!=cs&&(m.lineJoin=cs=g),o!=fs&&(m.lineCap=fs=o),r!=us&&m.setLineDash(us=r)}function ci(t,s,r,o){s!=Yl&&(m.fillStyle=Yl=s),t!=ds&&(m.font=ds=t),r!=ps&&(m.textAlign=ps=r),o!=vs&&(m.textBaseline=vs=o)}function hs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,pn)&&(s==null||s.min==null)){let g=Pe(Dt,0),x=Pe(Lt,o.length-1),E=r.min==null?Eo(o,g,x,f,t.distr==3):[r.min,r.max];t.min=gl(t.min,r.min=E[0]),t.max=Kt(t.max,r.max=E[1])}}const fi={min:null,max:null};function dr(){for(let o in P){let f=P[o];R[o]==null&&(f.min==null||R[L]!=null&&f.auto(n,pn))&&(R[o]=fi)}for(let o in P){let f=P[o];R[o]==null&&f.from!=null&&R[f.from]!=null&&(R[o]=fi)}R[L]!=null&&ql(!0);let t={};for(let o in R){let f=R[o];if(f!=null){let g=t[o]=on(P[o],Oo);if(f.min!=null)xt(g,f);else if(o!=L||a==2)if(mt==0&&g.from==null){let x=g.range(n,null,null,o);g.min=x[0],g.max=x[1]}else g.min=Ue,g.max=-Ue}}if(mt>0){S.forEach((o,f)=>{if(a==1){let g=o.scale,x=R[g];if(x==null)return;let E=t[g];if(f==0){let F=E.range(n,E.min,E.max,g);E.min=F[0],E.max=F[1],Dt=hl(E.min,l[0]),Lt=hl(E.max,l[0]),Lt-Dt>1&&(l[0][Dt]<E.min&&Dt++,l[0][Lt]>E.max&&Lt--),o.min=fl[Dt],o.max=fl[Lt]}else o.show&&o.auto&&hs(E,x,o,l[f],o.sorted);o.idxs[0]=Dt,o.idxs[1]=Lt}else if(f>0&&o.show&&o.auto){let[g,x]=o.facets,E=g.scale,F=x.scale,[H,W]=l[f],Z=t[E],ve=t[F];Z!=null&&hs(Z,R[E],g,H,g.sorted),ve!=null&&hs(ve,R[F],x,W,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],g=R[o];if(f.from==null&&(g==null||g.min==null)){let x=f.range(n,f.min==Ue?null:f.min,f.max==-Ue?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let g=t[f.from];if(g.min==null)f.min=f.max=null;else{let x=f.range(n,g.min,g.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],g=P[o];if(g.min!=f.min||g.max!=f.max){g.min=f.min,g.max=f.max;let x=g.distr;g._min=x==3?Tl(g.min):x==4?Ls(g.min,g.asinh):x==100?g.fwd(g.min):g.min,g._max=x==3?Tl(g.max):x==4?Ls(g.max,g.asinh):x==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){S.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)te=!0,Ft("setScale",o);qe&&q.left>=0&&(ie=y=!0)}for(let o in R)R[o]=null}function pr(t){let s=Is(Dt-1,0,mt-1),r=Is(Lt+1,0,mt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<mt-1;)r++;return[s,r]}function vr(){if(mt>0){let t=S.some(s=>s._focus)&&Zt!=St.alpha;t&&(m.globalAlpha=Zt=St.alpha),S.forEach((s,r)=>{if(r>0&&s.show&&(di(r,!1),di(r,!0),s._paths==null)){let o=Zt;Zt!=s.alpha&&(m.globalAlpha=Zt=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Zt!=o&&(m.globalAlpha=Zt=o)}}),S.forEach((s,r)=>{if(r>0&&s.show){let o=Zt;Zt!=s.alpha&&(m.globalAlpha=Zt=s.alpha),s._paths!=null&&pi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,Dt,Lt,f),x=s.points.filter(n,r,g,f);(g||x)&&(s.points._paths=s.points.paths(n,r,Dt,Lt,x),pi(r,!0))}Zt!=o&&(m.globalAlpha=Zt=o),Ft("drawSeries",r)}}),t&&(m.globalAlpha=Zt=1)}}function di(t,s){let r=s?S[t].points:S[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function pi(t,s){let r=s?S[t].points:S[t],{stroke:o,fill:f,clip:g,flags:x,_stroke:E=r._stroke,_fill:F=r._fill,_width:H=r.width}=r._paths;H=Ye(H*Fe,3);let W=null,Z=H%2/2;s&&F==null&&(F=H>0?"#fff":E);let ve=r.pxAlign==1&&Z>0;if(ve&&m.translate(Z,Z),!s){let Re=ot-H/2,Le=yt-H/2,ye=vt+H,ce=ht+H;W=new Path2D,W.rect(Re,Le,ye,ce)}s?gs(E,H,r.dash,r.cap,F,o,f,x,g):hr(t,E,H,r.dash,r.cap,F,o,f,x,W,g),ve&&m.translate(-Z,-Z)}function hr(t,s,r,o,f,g,x,E,F,H,W){let Z=!1;F!=0&&O.forEach((ve,Re)=>{if(ve.series[0]==t){let Le=S[ve.series[1]],ye=l[ve.series[1]],ce=(Le._paths||Cn).band;Pl(ce)&&(ce=ve.dir==1?ce[0]:ce[1]);let ae,Xe=null;Le.show&&ce&&Ao(ye,Dt,Lt)?(Xe=ve.fill(n,Re)||g,ae=Le._paths.clip):ce=null,gs(s,r,o,f,Xe,x,E,F,H,W,ae,ce),Z=!0}}),Z||gs(s,r,o,f,g,x,E,F,H,W)}const vi=un|Ws;function gs(t,s,r,o,f,g,x,E,F,H,W,Z){ui(t,s,r,o,f),(F||H||Z)&&(m.save(),F&&m.clip(F),H&&m.clip(H)),Z?(E&vi)==vi?(m.clip(Z),W&&m.clip(W),Gn(f,x),Nn(t,g,s)):E&Ws?(Gn(f,x),m.clip(Z),Nn(t,g,s)):E&un&&(m.save(),m.clip(Z),W&&m.clip(W),Gn(f,x),m.restore(),Nn(t,g,s)):(Gn(f,x),Nn(t,g,s)),(F||H||Z)&&m.restore()}function Nn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=On=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function Gn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Yl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function gr(t,s,r,o){let f=Y[t],g;if(o<=0)g=[0,0];else{let x=f._space=f.space(n,t,s,r,o),E=f._incrs=f.incrs(n,t,s,r,o,x);g=Ju(s,r,E,o,x)}return f._found=g}function ms(t,s,r,o,f,g,x,E,F,H){let W=x%2/2;U==1&&m.translate(W,W),ui(E,x,F,H,E),m.beginPath();let Z,ve,Re,Le,ye=f+(o==0||o==3?-g:g);r==0?(ve=f,Le=ye):(Z=f,Re=ye);for(let ce=0;ce<t.length;ce++)s[ce]!=null&&(r==0?Z=Re=t[ce]:ve=Le=t[ce],m.moveTo(Z,ve),m.lineTo(Re,Le));m.stroke(),U==1&&m.translate(-W,-W)}function mr(t){let s=!0;return Y.forEach((r,o)=>{if(!r.show)return;let f=P[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,ql(!1));return}else r._show||(s=!1,r._show=!0,ql(!1));let g=r.side,x=g%2,{min:E,max:F}=f,[H,W]=gr(o,E,F,x==0?de:G);if(W==0)return;let Z=f.distr==2,ve=r._splits=r.splits(n,o,E,F,H,W,Z),Re=f.distr==2?ve.map(ae=>fl[ae]):ve,Le=f.distr==2?fl[ve[1]]-fl[ve[0]]:H,ye=r._values=r.values(n,r.filter(n,Re,o,W,Le),o,W,Le);r._rotate=g==2?r.rotate(n,ye,o,W):0;let ce=r._size;r._size=ul(r.size(n,ye,o,t)),ce!=null&&r._size!=ce&&(s=!1)}),s}function _r(t){let s=!0;return Ml.forEach((r,o)=>{let f=r(n,o,Wt,t);f!=ut[o]&&(s=!1),ut[o]=f}),s}function wr(){for(let t=0;t<Y.length;t++){let s=Y[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,g,x=s.stroke(n,t),E=r==0||r==3?-1:1,[F,H]=s._found;if(s.label!=null){let Yt=s.labelGap*E,el=kt((s._lpos+Yt)*Fe);ci(s.labelFont[0],x,"center",r==2?xn:Oi),m.save(),o==1?(f=g=0,m.translate(el,kt(yt+ht/2)),m.rotate((r==3?-Yn:Yn)/2)):(f=kt(ot+vt/2),g=el);let Gl=Da(s.label)?s.label(n,t,F,H):s.label;m.fillText(Gl,f,g),m.restore()}if(H==0)continue;let W=P[s.scale],Z=o==0?vt:ht,ve=o==0?ot:yt,Re=s._splits,Le=W.distr==2?Re.map(Yt=>fl[Yt]):Re,ye=W.distr==2?fl[Re[1]]-fl[Re[0]]:F,ce=s.ticks,ae=s.border,Xe=ce.show?ce.size:0,ct=kt(Xe*Fe),Ot=kt((s.alignTo==2?s._size-Xe-s.gap:s.gap)*Fe),Ie=s._rotate*-Yn/180,ft=Q(s._pos*Fe),Xt=(ct+Ot)*E,Ut=ft+Xt;g=o==0?Ut:0,f=o==1?Ut:0;let al=s.font[0],dl=s.align==1?tn:s.align==2?As:Ie>0?tn:Ie<0?As:o==0?"center":r==3?As:tn,xl=Ie||o==1?"middle":r==2?xn:Oi;ci(al,x,dl,xl);let $t=s.font[1]*s.lineGap,rl=Re.map(Yt=>Q(p(Yt,W,Z,ve))),pl=s._values;for(let Yt=0;Yt<pl.length;Yt++){let el=pl[Yt];if(el!=null){o==0?f=rl[Yt]:g=rl[Yt],el=""+el;let Gl=el.indexOf(`
`)==-1?[el]:el.split(/\n/gm);for(let qt=0;qt<Gl.length;qt++){let Ri=Gl[qt];Ie?(m.save(),m.translate(f,g+qt*$t),m.rotate(Ie),m.fillText(Ri,0,0),m.restore()):m.fillText(Ri,f,g+qt*$t)}}}ce.show&&ms(rl,ce.filter(n,Le,t,H,ye),o,r,ft,ct,Ye(ce.width*Fe,3),ce.stroke(n,t),ce.dash,ce.cap);let bl=s.grid;bl.show&&ms(rl,bl.filter(n,Le,t,H,ye),o,o==0?2:1,o==0?yt:ot,o==0?ht:vt,Ye(bl.width*Fe,3),bl.stroke(n,t),bl.dash,bl.cap),ae.show&&ms([ft],[1],o==0?1:0,o==0?1:2,o==1?yt:ot,o==1?ht:vt,Ye(ae.width*Fe,3),ae.stroke(n,t),ae.dash,ae.cap)}Ft("drawAxes")}function ql(t){S.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let zn=!1,_s=!1,vn=[];function xr(){_s=!1;for(let t=0;t<vn.length;t++)Ft(...vn[t]);vn.length=0}function Kl(){zn||(Ho(hi),zn=!0)}function br(t,s=!1){zn=!0,_s=s,t(n),hi(),s&&vn.length>0&&queueMicrotask(xr)}n.batch=br;function hi(){if(I&&(dr(),I=!1),te&&(me(),te=!1),ee){if($e(N,tn,Ae),$e(N,xn,Ke),$e(N,yn,de),$e(N,Sn,G),$e(T,tn,Ae),$e(T,xn,Ke),$e(T,yn,de),$e(T,Sn,G),$e(_,yn,zt),$e(_,Sn,Vt),k.width=kt(zt*Fe),k.height=kt(Vt*Fe),Y.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let g=f===3||f===0?r:0,x=f%2==1;$e(t,x?"left":"top",o-g),$e(t,x?"width":"height",r),$e(t,x?"top":"left",x?Ke:Ae),$e(t,x?"height":"width",x?G:de),zs(t,Il)}else tl(t,Il)}),On=Yl=os=cs=fs=ds=ps=vs=us=null,Zt=1,mn(!0),Ae!=Bt||Ke!=jt||de!=At||G!=Ht){ql(!1);let t=de/At,s=G/Ht;if(qe&&!ie&&q.left>=0){q.left*=t,q.top*=s,jl&&yl(jl,kt(q.left),0,de,G),Jl&&yl(Jl,0,kt(q.top),de,G);for(let r=0;r<fe.length;r++){let o=fe[r];o!=null&&(Oe[r]*=t,Ct[r]*=s,yl(o,ul(Oe[r]),ul(Ct[r]),de,G))}}if(Qe.show&&!pe&&Qe.left>=0&&Qe.width>0){Qe.left*=t,Qe.width*=t,Qe.top*=s,Qe.height*=s;for(let r in ks)$e(Xl,r,Qe[r])}Bt=Ae,jt=Ke,At=de,Ht=G}Ft("setSize"),ee=!1}zt>0&&Vt>0&&(m.clearRect(0,0,k.width,k.height),Ft("drawClear"),j.forEach(t=>t()),Ft("draw")),Qe.show&&pe&&(Vn(Qe),pe=!1),qe&&ie&&(Nl(null,!0,!1),ie=!1),se.show&&se.live&&y&&(ys(),y=!1),v||(v=!0,n.status=1,Ft("ready")),pn=!1,zn=!1}n.redraw=(t,s)=>{te=s||!1,t!==!1?Cl(L,w.min,w.max):Kl()};function ws(t,s){let r=P[t];if(r.from==null){if(mt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(mt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==L&&r.distr==2&&mt>0&&(s.min=hl(s.min,l[0]),s.max=hl(s.max,l[0]),s.min==s.max&&s.max++),R[t]=s,I=!0,Kl()}}n.setScale=ws;let xs,bs,jl,Jl,gi,mi,Zl,Ql,_i,wi,Ze,lt,Al=!1;const It=q.drag;let Pt=It.x,Rt=It.y;qe&&(q.x&&(xs=ol(fo,T)),q.y&&(bs=ol(po,T)),w.ori==0?(jl=xs,Jl=bs):(jl=bs,Jl=xs),Ze=q.left,lt=q.top);const Qe=n.select=xt({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Xl=Qe.show?ol(co,Qe.over?T:N):null;function Vn(t,s){if(Qe.show){for(let r in t)Qe[r]=t[r],r in ks&&$e(Xl,r,t[r]);s!==!1&&Ft("setSelect")}}n.setSelect=Vn;function yr(t){if(S[t].show)Se&&zs(ke[t],Il);else if(Se&&tl(ke[t],Il),qe){let r=ze?fe[0]:fe[t];r!=null&&yl(r,-10,-10,de,G)}}function Cl(t,s,r){ws(t,{min:s,max:r})}function _l(t,s,r,o){s.focus!=null&&Mr(t),s.show!=null&&S.forEach((f,g)=>{g>0&&(t==g||t==null)&&(f.show=s.show,yr(g),a==2?(Cl(f.facets[0].scale,null,null),Cl(f.facets[1].scale,null,null)):Cl(f.scale,null,null),Kl())}),r!==!1&&Ft("setSeries",t,s),o&&_n("setSeries",n,t,s)}n.setSeries=_l;function Sr(t,s){xt(O[t],s)}function kr(t,s){t.fill=Te(t.fill||null),t.dir=Pe(t.dir,-1),s=s??O.length,O.splice(s,0,t)}function Tr(t){t==null?O.length=0:O.splice(t,1)}n.addBand=kr,n.setBand=Sr,n.delBand=Tr;function Er(t,s){S[t].alpha=s,qe&&fe[t]!=null&&(fe[t].style.opacity=s),Se&&ke[t]&&(ke[t].style.opacity=s)}let Sl,Dl,Ol;const $l={focus:!0};function Mr(t){if(t!=Ol){let s=t==null,r=St.alpha!=1;S.forEach((o,f)=>{if(a==1||f>0){let g=s||f==0||f==t;o._focus=s?null:g,r&&Er(f,g?1:St.alpha)}}),Ol=t,r&&Kl()}}Se&&Jt&&De(Vi,_e,t=>{q._lock||(et(t),Ol!=null&&_l(null,$l,!0,wt.setSeries))});function wl(t,s,r){let o=P[s];r&&(t=t/Fe-(o.ori==1?Ke:Ae));let f=de;o.ori==1&&(f=G,t=f-t),o.dir==-1&&(t=f-t);let g=o._min,x=o._max,E=t/f,F=g+(x-g)*E,H=o.distr;return H==3?an(10,F):H==4?Do(F,o.asinh):H==100?o.bwd(F):F}function Ar(t,s){let r=wl(t,L,s);return hl(r,l[0],Dt,Lt)}n.valToIdx=t=>hl(t,l[0]),n.posToIdx=Ar,n.posToVal=wl,n.valToPos=(t,s,r)=>P[s].ori==0?c(t,P[s],r?vt:de,r?ot:0):u(t,P[s],r?ht:G,r?yt:0),n.setCursor=(t,s,r)=>{Ze=t.left,lt=t.top,Nl(null,s,r)};function xi(t,s){$e(Xl,tn,Qe.left=t),$e(Xl,yn,Qe.width=s)}function bi(t,s){$e(Xl,xn,Qe.top=t),$e(Xl,Sn,Qe.height=s)}let hn=w.ori==0?xi:bi,gn=w.ori==1?xi:bi;function Cr(){if(Se&&se.live)for(let t=a==2?1:0;t<S.length;t++){if(t==0&&nt)continue;let s=se.values[t],r=0;for(let o in s)He[t][r++].firstChild.nodeValue=s[o]}}function ys(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{ge[o]=r}):Fo(t.idx)||ge.fill(t.idx),se.idx=ge[0]),Se&&se.live){for(let r=0;r<S.length;r++)(r>0||a==1&&!nt)&&Dr(r,ge[r]);Cr()}y=!1,s!==!1&&Ft("setLegend")}n.setLegend=ys;function Dr(t,s){let r=S[t],o=t==0&&V==2?fl:l[t],f;nt?f=r.values(n,t,s)??pt:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?pt:{_:f}),se.values[t]=f}function Nl(t,s,r){_i=Ze,wi=lt,[Ze,lt]=q.move(n,Ze,lt),q.left=Ze,q.top=lt,qe&&(jl&&yl(jl,kt(Ze),0,de,G),Jl&&yl(Jl,0,kt(lt),de,G));let o,f=Dt>Lt;Sl=Ue,Dl=null;let g=w.ori==0?de:G,x=w.ori==1?de:G;if(Ze<0||mt==0||f){o=q.idx=null;for(let E=0;E<S.length;E++){let F=fe[E];F!=null&&yl(F,-10,-10,de,G)}Jt&&_l(null,$l,!0,t==null&&wt.setSeries),se.live&&(ge.fill(o),y=!0)}else{let E,F,H;a==1&&(E=w.ori==0?Ze:lt,F=wl(E,L),o=q.idx=hl(F,l[0],Dt,Lt),H=z(l[0][o],w,g,0));let W=-10,Z=-10,ve=0,Re=0,Le=!0,ye="",ce="";for(let ae=a==2?1:0;ae<S.length;ae++){let Xe=S[ae],ct=ge[ae],Ot=ct==null?null:a==1?l[ae][ct]:l[ae][1][ct],Ie=q.dataIdx(n,ae,o,F),ft=Ie==null?null:a==1?l[ae][Ie]:l[ae][1][Ie];if(y=y||ft!=Ot||Ie!=ct,ge[ae]=Ie,ae>0&&Xe.show){let Xt=Ie==null?-10:Ie==o?H:z(a==1?l[0][Ie]:l[ae][0][Ie],w,g,0),Ut=ft==null?-10:X(ft,a==1?P[Xe.scale]:P[Xe.facets[1].scale],x,0);if(Jt&&ft!=null){let al=w.ori==1?Ze:lt,dl=Tt(St.dist(n,ae,Ie,Ut,al));if(dl<Sl){let xl=St.bias;if(xl!=0){let $t=wl(al,Xe.scale),rl=ft>=0?1:-1,pl=$t>=0?1:-1;pl==rl&&(pl==1?xl==1?ft>=$t:ft<=$t:xl==1?ft<=$t:ft>=$t)&&(Sl=dl,Dl=ae)}else Sl=dl,Dl=ae}}if(y||ze){let al,dl;w.ori==0?(al=Xt,dl=Ut):(al=Ut,dl=Xt);let xl,$t,rl,pl,bl,Yt,el=!0,Gl=Ge.bbox;if(Gl!=null){el=!1;let qt=Gl(n,ae);rl=qt.left,pl=qt.top,xl=qt.width,$t=qt.height}else rl=al,pl=dl,xl=$t=Ge.size(n,ae);if(Yt=Ge.fill(n,ae),bl=Ge.stroke(n,ae),ze)ae==Dl&&Sl<=St.prox&&(W=rl,Z=pl,ve=xl,Re=$t,Le=el,ye=Yt,ce=bl);else{let qt=fe[ae];qt!=null&&(Oe[ae]=rl,Ct[ae]=pl,qi(qt,xl,$t,el),Ui(qt,Yt,bl),yl(qt,ul(rl),ul(pl),de,G))}}}}if(ze){let ae=St.prox,Xe=Ol==null?Sl<=ae:Sl>ae||Dl!=Ol;if(y||Xe){let ct=fe[0];ct!=null&&(Oe[0]=W,Ct[0]=Z,qi(ct,ve,Re,Le),Ui(ct,ye,ce),yl(ct,ul(W),ul(Z),de,G))}}}if(Qe.show&&Al)if(t!=null){let[E,F]=wt.scales,[H,W]=wt.match,[Z,ve]=t.cursor.sync.scales,Re=t.cursor.drag;if(Pt=Re._x,Rt=Re._y,Pt||Rt){let{left:Le,top:ye,width:ce,height:ae}=t.select,Xe=t.scales[Z].ori,ct=t.posToVal,Ot,Ie,ft,Xt,Ut,al=E!=null&&H(E,Z),dl=F!=null&&W(F,ve);al&&Pt?(Xe==0?(Ot=Le,Ie=ce):(Ot=ye,Ie=ae),ft=P[E],Xt=z(ct(Ot,Z),ft,g,0),Ut=z(ct(Ot+Ie,Z),ft,g,0),hn(gl(Xt,Ut),Tt(Ut-Xt))):hn(0,g),dl&&Rt?(Xe==1?(Ot=Le,Ie=ce):(Ot=ye,Ie=ae),ft=P[F],Xt=X(ct(Ot,ve),ft,x,0),Ut=X(ct(Ot+Ie,ve),ft,x,0),gn(gl(Xt,Ut),Tt(Ut-Xt))):gn(0,x)}else Ts()}else{let E=Tt(_i-gi),F=Tt(wi-mi);if(w.ori==1){let ve=E;E=F,F=ve}Pt=It.x&&E>=It.dist,Rt=It.y&&F>=It.dist;let H=It.uni;H!=null?Pt&&Rt&&(Pt=E>=H,Rt=F>=H,!Pt&&!Rt&&(F>E?Rt=!0:Pt=!0)):It.x&&It.y&&(Pt||Rt)&&(Pt=Rt=!0);let W,Z;Pt&&(w.ori==0?(W=Zl,Z=Ze):(W=Ql,Z=lt),hn(gl(W,Z),Tt(Z-W)),Rt||gn(0,x)),Rt&&(w.ori==1?(W=Zl,Z=Ze):(W=Ql,Z=lt),gn(gl(W,Z),Tt(Z-W)),Pt||hn(0,g)),!Pt&&!Rt&&(hn(0,0),gn(0,0))}if(It._x=Pt,It._y=Rt,t==null){if(r){if(Pi!=null){let[E,F]=wt.scales;wt.values[0]=E!=null?wl(w.ori==0?Ze:lt,E):null,wt.values[1]=F!=null?wl(w.ori==1?Ze:lt,F):null}_n(Cs,n,Ze,lt,de,G,o)}if(Jt){let E=r&&wt.setSeries,F=St.prox;Ol==null?Sl<=F&&_l(Dl,$l,!0,E):Sl>F?_l(null,$l,!0,E):Dl!=Ol&&_l(Dl,$l,!0,E)}}y&&(se.idx=o,ys()),s!==!1&&Ft("setCursor")}let Ll=null;Object.defineProperty(n,"rect",{get(){return Ll==null&&mn(!1),Ll}});function mn(t=!1){t?Ll=null:(Ll=T.getBoundingClientRect(),Ft("syncRect",Ll))}function yi(t,s,r,o,f,g,x){q._lock||Al&&t!=null&&t.movementX==0&&t.movementY==0||(Ss(t,s,r,o,f,g,x,!1,t!=null),t!=null?Nl(null,!0,!0):Nl(s,!0,!1))}function Ss(t,s,r,o,f,g,x,E,F){if(Ll==null&&mn(!1),et(t),t!=null)r=t.clientX-Ll.left,o=t.clientY-Ll.top;else{if(r<0||o<0){Ze=-10,lt=-10;return}let[H,W]=wt.scales,Z=s.cursor.sync,[ve,Re]=Z.values,[Le,ye]=Z.scales,[ce,ae]=wt.match,Xe=s.axes[0].side%2==1,ct=w.ori==0?de:G,Ot=w.ori==1?de:G,Ie=Xe?g:f,ft=Xe?f:g,Xt=Xe?o:r,Ut=Xe?r:o;if(Le!=null?r=ce(H,Le)?p(ve,P[H],ct,0):-10:r=ct*(Xt/Ie),ye!=null?o=ae(W,ye)?p(Re,P[W],Ot,0):-10:o=Ot*(Ut/ft),w.ori==1){let al=r;r=o,o=al}}F&&(s==null||s.cursor.event.type==Cs)&&((r<=1||r>=de-1)&&(r=zl(r,de)),(o<=1||o>=G-1)&&(o=zl(o,G))),E?(gi=r,mi=o,[Zl,Ql]=q.move(n,r,o)):(Ze=r,lt=o)}const ks={width:0,height:0,left:0,top:0};function Ts(){Vn(ks,!1)}let Si,ki,Ti,Ei;function Mi(t,s,r,o,f,g,x){Al=!0,Pt=Rt=It._x=It._y=!1,Ss(t,s,r,o,f,g,x,!0,!1),t!=null&&(De(Ds,Ns,Ai,!1),_n(Gi,n,Zl,Ql,de,G,null));let{left:E,top:F,width:H,height:W}=Qe;Si=E,ki=F,Ti=H,Ei=W}function Ai(t,s,r,o,f,g,x){Al=It._x=It._y=!1,Ss(t,s,r,o,f,g,x,!1,!0);let{left:E,top:F,width:H,height:W}=Qe,Z=H>0||W>0,ve=Si!=E||ki!=F||Ti!=H||Ei!=W;if(Z&&ve&&Vn(Qe),It.setScale&&Z&&ve){let Re=E,Le=H,ye=F,ce=W;if(w.ori==1&&(Re=F,Le=W,ye=E,ce=H),Pt&&Cl(L,wl(Re,L),wl(Re+Le,L)),Rt)for(let ae in P){let Xe=P[ae];ae!=L&&Xe.from==null&&Xe.min!=Ue&&Cl(ae,wl(ye+ce,ae),wl(ye,ae))}Ts()}else q.lock&&(q._lock=!q._lock,Nl(s,!0,t!=null));t!=null&&(Gt(Ds,Ns),_n(Ds,n,Ze,lt,de,G,null))}function Lr(t,s,r,o,f,g,x){if(q._lock)return;et(t);let E=Al;if(Al){let F=!0,H=!0,W=10,Z,ve;w.ori==0?(Z=Pt,ve=Rt):(Z=Rt,ve=Pt),Z&&ve&&(F=Ze<=W||Ze>=de-W,H=lt<=W||lt>=G-W),Z&&F&&(Ze=Ze<Zl?0:de),ve&&H&&(lt=lt<Ql?0:G),Nl(null,!0,!0),Al=!1}Ze=-10,lt=-10,ge.fill(null),Nl(null,!0,!0),E&&(Al=E)}function Ci(t,s,r,o,f,g,x){q._lock||(et(t),rs(),Ts(),t!=null&&_n(Ii,n,Ze,lt,de,G,null))}function Di(){Y.forEach(Zu),b(n.width,n.height,!0)}Hl(Kn,sn,Di);const en={};en.mousedown=Mi,en.mousemove=yi,en.mouseup=Ai,en.dblclick=Ci,en.setSeries=(t,s,r,o)=>{let f=wt.match[2];r=f(n,s,r),r!=-1&&_l(r,o,!0,!1)},qe&&(De(Gi,T,Mi),De(Cs,T,yi),De(zi,T,t=>{et(t),mn(!1)}),De(Vi,T,Lr),De(Ii,T,Ci),Us.add(n),n.syncRect=mn);const In=n.hooks=e.hooks||{};function Ft(t,s,r){_s?vn.push([t,s,r]):t in In&&In[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)In[s]=(In[s]||[]).concat(t.hooks[s])});const Li=(t,s,r)=>r,wt=xt({key:null,setSeries:!1,filters:{pub:Qi,sub:Qi},scales:[L,S[1]?S[1].scale:null],match:[Xi,Xi,Li],values:[null,null]},q.sync);wt.match.length==2&&wt.match.push(Li),q.sync=wt;const Pi=wt.key,Es=er(Pi);function _n(t,s,r,o,f,g,x){wt.filters.pub(t,s,r,o,f,g,x)&&Es.pub(t,s,r,o,f,g,x)}Es.sub(n);function Pr(t,s,r,o,f,g,x){wt.filters.sub(t,s,r,o,f,g,x)&&en[t](null,s,r,o,f,g,x)}n.pub=Pr;function Rr(){Es.unsub(n),Us.delete(n),_t.clear(),Vs(Kn,sn,Di),h.remove(),_e?.remove(),Ft("destroy")}n.destroy=Rr;function Ms(){Ft("init",e,l),oi(l||e.data,!1),R[L]?ws(L,R[L]):rs(),pe=Qe.show&&(Qe.width>0||Qe.height>0),ie=y=!0,b(e.width,e.height)}return S.forEach(tt),Y.forEach(Fl),i?i instanceof HTMLElement?(i.appendChild(h),Ms()):i(n,Ms):Ms(),n}bt.assign=xt;bt.fmtNum=$s;bt.rangeNum=jn;bt.rangeLog=es;bt.rangeAsinh=Qs;bt.orient=Ul;bt.pxRatio=Fe;bt.join=Bo;bt.fmtDate=ti,bt.tzDate=Xo;bt.sync=er;{bt.addGap=Fu,bt.clipGaps=ns;let e=bt.paths={points:ar};e.linear=or,e.stepped=Gu,e.bars=zu,e.spline=Iu}var Qu=Ce('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=Ce('<span class="estimated-badge svelte-3wi8ix">est</span>'),$u=Ce('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),ec=Ce('<span class="estimated-badge svelte-3wi8ix">est</span>'),tc=Ce("<span> </span> <!>",1),lc=Ce('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),nc=Ce('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),sc=Ce('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function ic(e,l){Qn(l,!0);const i=.5,n=1.2,a=0,c=100;function u(w,V){const z=[...w].sort((A,Ee)=>A-Ee),X=V/100*(z.length-1),R=Math.floor(X),K=Math.ceil(X);return R===K?z[R]:z[R]+(z[K]-z[R])*(X-R)}let p=Pn(l,"trend",3,null),v=Be(!1),h=Be(""),k=Be(null),m=Ve(()=>Un.config.temp_units==="C"),_=Ve(Ta),N=Ve(Ks),T=Ve(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(we=>we.status!=="invalid");if(w.length===0)return null;const V=[...w].sort((we,st)=>new Date(we.timestamp).getTime()-new Date(st.timestamp).getTime()),z=V[0],X=V[V.length-1],R=V.map(we=>we.sg_calibrated??we.sg_raw).filter(we=>we!==null&&we>=i&&we<=n),K=V.map(we=>we.temp_calibrated??we.temp_raw).filter(we=>we!==null&&we>=a&&we<=c);if(R.length===0)return null;const A=R[R.length-1],Ee=R[0],he=u(R,95),oe=u(R,5),ge=new Date(z.timestamp).getTime(),se=new Date(X.timestamp).getTime(),Se=(se-ge)/(1e3*60*60*24),qe=Se>0?(A-Ee)/Se:0;let Me=null,_e=null,je=null,Je=null;if(K.length>0){const we=K[K.length-1],st=K.reduce((De,Gt)=>De+Gt,0)/K.length,Nt=u(K,95),_t=u(K,5);Me=d(m)?we:we*9/5+32,_e=d(m)?st:st*9/5+32,je=d(m)?Nt:Nt*9/5+32,Je=d(m)?_t:_t*9/5+32}let ke=0;const He=.001;for(let we=R.length-2;we>=0;we--)if(Math.abs(R[we]-A)>He){const st=new Date(V[we+1].timestamp).getTime();ke=(se-st)/(1e3*60*60*24);break}let rt=null,nt=null;const pt=l.originalGravity??he,Mt=l.originalGravity===null;return pt>1&&pt>A&&(rt=(pt-A)/(pt-1)*100,nt=(pt-A)*131.25),{currentSg:A,firstSg:Ee,highSg:he,lowSg:oe,currentTemp:Me,avgTemp:_e,highTemp:je,lowTemp:Je,fermRate:qe,durationDays:Se,daysAtCurrentSg:ke,apparentAttenuation:rt,abv:nt,ogIsEstimated:Mt,effectiveOg:pt}});function U(){ue(h,l.originalGravity?.toFixed(3)??"",!0),ue(v,!0),setTimeout(()=>d(k)?.focus(),0)}function Q(){const w=d(h).trim();if(!w)l.onOgChange?.(null);else{const V=parseFloat(w);!isNaN(V)&&V>=.99&&V<=1.2&&l.onOgChange?.(V)}ue(v,!1)}function $(w){w.key==="Enter"?Q():w.key==="Escape"&&ue(v,!1)}function S(w){return Mn(w)}function Y(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function P(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function O(w){return w===null?"--":w.toFixed(1)}function L(w){return w===null?"--":`${w.toFixed(1)}%`}var le=Dn(),j=kl(le);{var J=w=>{var V=nc(),z=D(V),X=D(z),R=D(X),K=D(R,!0);M(R);var A=B(R,2),Ee=B(D(A),2),he=D(Ee,!0);M(Ee),M(A);var oe=B(A,2),ge=B(D(oe),2),se=D(ge,!0);M(ge),M(oe);var q=B(oe,2),Se=B(D(q),2),qe=D(Se,!0);M(Se),M(q);var Me=B(q,2),_e=B(D(Me),2),je=D(_e,!0);M(_e),M(Me),M(X);var Je=B(X,2),ke=B(D(Je),2),He=B(D(ke),2),rt=D(He,!0),nt=B(rt),pt=D(nt,!0);M(nt),M(He),M(ke);var Mt=B(ke,2),we=B(D(Mt),2),st=D(we,!0),Nt=B(st),_t=D(Nt,!0);M(Nt),M(we),M(Mt);var De=B(Mt,2),Gt=B(D(De),2),zt=D(Gt,!0),Vt=B(zt),de=D(Vt,!0);M(Vt),M(Gt),M(De);var G=B(De,2),Ae=B(D(G),2),Ke=D(Ae,!0),Bt=B(Ke),jt=D(Bt,!0);M(Bt),M(Ae),M(G),M(Je),M(z);var At=B(z,2),Ht=D(At),ot=B(D(Ht),2);let yt;var vt=D(ot);M(ot),M(Ht);var ht=B(Ht,2),I=B(D(ht),2),ee=D(I,!0);M(I),M(ht);var te=B(ht,2),ie=B(D(te),2),pe=D(ie,!0);M(ie),M(te);var y=B(te,2),b=B(D(y),2);{var C=ze=>{var fe=Qu();Sa(fe),fe.__keydown=$,qs(fe,Oe=>ue(k,Oe),()=>d(k)),xa("blur",fe,Q),ka(fe,()=>d(h),Oe=>ue(h,Oe)),be(ze,fe)},re=ze=>{var fe=Dn(),Oe=kl(fe);{var Ct=tt=>{var il=$u();il.__click=U;var Qt=D(il);let Wt;var Fl=D(Qt,!0);M(Qt);var cl=B(Qt,2);{var Ml=ut=>{var mt=Xu();be(ut,mt)};at(cl,ut=>{d(T).ogIsEstimated&&ut(Ml)})}Bl(2),M(il),dt(ut=>{nn(il,"title",d(T).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Wt=ml(Qt,1,"stat-value svelte-3wi8ix",null,Wt,{estimated:d(T).ogIsEstimated}),xe(Fl,ut)},[()=>S(d(T).effectiveOg)]),be(tt,il)},sl=tt=>{var il=tc(),Qt=kl(il);let Wt;var Fl=D(Qt,!0);M(Qt);var cl=B(Qt,2);{var Ml=ut=>{var mt=ec();be(ut,mt)};at(cl,ut=>{d(T).ogIsEstimated&&ut(Ml)})}dt(ut=>{Wt=ml(Qt,1,"stat-value svelte-3wi8ix",null,Wt,{estimated:d(T).ogIsEstimated}),xe(Fl,ut)},[()=>S(d(T).effectiveOg)]),be(tt,il)};at(Oe,tt=>{l.onOgChange?tt(Ct):tt(sl,!1)},!0)}be(ze,fe)};at(b,ze=>{l.onOgChange&&d(v)?ze(C):ze(re,!1)})}M(y);var me=B(y,2),it=B(D(me),2),We=D(it,!0);M(it),M(me);var gt=B(me,2),et=B(D(gt),2),Ge=D(et,!0);M(et),M(gt);var St=B(gt,2);{var Jt=ze=>{var fe=lc(),Oe=B(D(fe),2),Ct=D(Oe,!0);M(Oe),Bl(2),M(fe),dt((sl,tt)=>{nn(fe,"title",`Estimated time until target FG (R=${sl??""})`),xe(Ct,tt)},[()=>p().r2.toFixed(2),()=>P(p().daysToFg)]),be(ze,fe)};at(St,ze=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&ze(Jt)})}M(At),M(V),dt((ze,fe,Oe,Ct,sl,tt,il,Qt,Wt,Fl,cl,Ml,ut)=>{xe(K,d(N)==="SG"?"Gravity":d(N)==="P"?"Plato":"Brix"),xe(he,ze),xe(se,fe),xe(qe,Oe),xe(je,Ct),xe(rt,sl),xe(pt,d(_)),xe(st,tt),xe(_t,d(_)),xe(zt,il),xe(de,d(_)),xe(Ke,Qt),xe(jt,d(_)),yt=ml(ot,1,"stat-value rate svelte-3wi8ix",null,yt,{fermenting:d(T).fermRate<0}),xe(vt,`${Wt??""}/day`),xe(ee,Fl),xe(pe,cl),xe(We,Ml),xe(Ge,ut)},[()=>S(d(T).currentSg),()=>S(d(T).firstSg),()=>S(d(T).highSg),()=>S(d(T).lowSg),()=>O(d(T).currentTemp),()=>O(d(T).avgTemp),()=>O(d(T).highTemp),()=>O(d(T).lowTemp),()=>Y(d(T).fermRate),()=>P(d(T).durationDays),()=>P(d(T).daysAtCurrentSg),()=>L(d(T).apparentAttenuation),()=>L(d(T).abv)]),be(w,V)},ne=w=>{var V=sc();be(w,V)};at(j,w=>{d(T)?w(J):w(ne,!1)})}be(e,le),Xn()}Zn(["keydown","click"]);var ac=Ce('<button type="button"> </button>'),rc=Ce("<option> </option>"),oc=Ce('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),uc=Ce('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),cc=Ce('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),fc=Ce('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function dc(e,l){Qn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Ve(()=>Un.config.smoothing_enabled),c=Ve(()=>Un.config.smoothing_samples),u=Be("UTC"),p=Be(0),v=Be(3),h=Pn(l,"deviceColor",3,"BLACK"),k=Pn(l,"originalGravity",3,null),m=Ve(()=>Un.config.temp_units==="C"),_=Ve(Ks),N,T=null,U=Be(!0),Q=Be(null),$=Be(24),S=Be(Tn([])),Y=Be(Tn([])),P=Be(Tn([])),O=Be(null),L=Be(null);const le={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},j="#facc15",J="rgba(250, 204, 21, 0.3)",ne="#71717a",w="#a1a1aa",V="rgba(255, 255, 255, 0.04)",z="#22d3ee",X="#a78bfa",R="rgba(250, 204, 21, 0.5)",K="brewsignal_chart_trend_enabled";let A=Be(!0);function Ee(I,ee,te=1.01){const ie=[];for(let fe=0;fe<I.length;fe++)ee[fe]!==null&&ie.push([I[fe],ee[fe]]);if(ie.length<10)return null;const pe=ie.length;let y=0,b=0,C=0,re=0;for(const[fe,Oe]of ie)y+=fe,b+=Oe,C+=fe*Oe,re+=fe*fe;const me=pe*re-y*y;if(Math.abs(me)<1e-10)return null;const it=(pe*C-y*b)/me,We=(b-it*y)/pe,gt=b/pe;let et=0,Ge=0;for(const[fe,Oe]of ie){const Ct=it*fe+We;et+=(Oe-Ct)**2,Ge+=(Oe-gt)**2}const St=Ge>0?1-et/Ge:0;let Jt=null,ze=null;if(it<0&&St>.3){const fe=I[I.length-1],Oe=(te-We)/it;Oe>fe&&(ze=(Oe-fe)/(1440*60),ze>0&&ze<60?Jt=te:ze=null)}return{slope:it,intercept:We,r2:St,predictedFg:Jt,daysToFg:ze}}function he(I,ee){return I.map(te=>ee.slope*te+ee.intercept)}function oe(I,ee,te){const ie=new Date(I*1e3);try{return te?ie.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:ee}):ie.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:ee})}catch(pe){return console.warn("Invalid timezone:",ee,pe),te?ie.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):ie.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function ge(I,ee,te){const ie=j,pe=le[h()]||w;return{width:I,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[y=>{const b=y.cursor.idx;if(b==null)return;const C=y.root.querySelector(".u-legend");C&&(C.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`)}]},scales:{x:{time:!0},sg:{auto:!0,range:(y,b,C)=>{const re=(C-b)*.1||.005;return[b-re,C+re]}},temp:{auto:!0,range:(y,b,C)=>{const re=C-b,me=10;if(re<me){const We=(C+b)/2;return[We-me/2,We+me/2]}const it=re*.1;return[b-it,C+it]}}},axes:[{stroke:ne,grid:{stroke:V,width:1},ticks:{stroke:V,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(y,b)=>b.map(C=>oe(C,te,d($)<=24))},{scale:"sg",stroke:ie,grid:{stroke:V,width:1},ticks:{stroke:V,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(y,b)=>b.map(C=>Mn(C)),side:3},{scale:"temp",stroke:pe,grid:{show:!1},ticks:{stroke:V,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(y,b)=>b.map(C=>C.toFixed(0)+""),side:1}],series:[{value:(y,b)=>oe(b,te,!1)+" "+oe(b,te,!0)},{label:d(_)==="SG"?"Gravity":d(_)==="P"?"Plato":"Brix",scale:"sg",stroke:ie,width:2,value:(y,b)=>b!==null?Mn(b):"--",fill:(y,b)=>{const C=y.ctx.createLinearGradient(0,y.bbox.top,0,y.bbox.top+y.bbox.height);return C.addColorStop(0,J),C.addColorStop(1,"transparent"),C},points:{show:!1},paths:bt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:pe,width:1.5,dash:[4,4],value:(y,b)=>b!==null?b.toFixed(1)+"":"--",points:{show:!1},paths:bt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:z,width:1.5,dash:[2,4],value:(y,b)=>b!==null?b.toFixed(1)+"":"--",points:{show:!1},paths:bt.paths.spline?.()},{label:"Chamber",scale:"temp",stroke:X,width:1.5,dash:[4,2],value:(y,b)=>b!==null?b.toFixed(1)+"":"--",points:{show:!1},paths:bt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:R,width:2,dash:[8,4],value:(y,b)=>b!==null?Mn(b):"--",points:{show:!1},show:d(A)}]}}function se(I,ee){if(ee<=1)return I;const te=[];for(let ie=0;ie<I.length;ie++){const pe=[],y=Math.floor(ee/2);for(let b=Math.max(0,ie-y);b<=Math.min(I.length-1,ie+y);b++){const C=I[b];C!==null&&pe.push(C)}pe.length>0?te.push(pe.reduce((b,C)=>b+C,0)/pe.length):te.push(null)}return te}function q(I,ee,te,ie,pe,y){if(I.length<=y)return[I,ee,te,ie,pe];const b=Math.ceil(I.length/y),C=[],re=[],me=[],it=[],We=[];for(let gt=0;gt<I.length;gt+=b){const et=Math.min(gt+b,I.length);let Ge=0,St=0,Jt=0,ze=0,fe=0,Oe=0,Ct=0,sl=0;for(let tt=gt;tt<et;tt++)ee[tt]!==null&&(Ge+=ee[tt],St++),te[tt]!==null&&(Jt+=te[tt],ze++),ie[tt]!==null&&(fe+=ie[tt],Oe++),pe[tt]!==null&&(Ct+=pe[tt],sl++);C.push(I[Math.floor((gt+et-1)/2)]),re.push(St>0?Ge/St:null),me.push(ze>0?Jt/ze:null),it.push(Oe>0?fe/Oe:null),We.push(sl>0?Ct/sl:null)}return[C,re,me,it,We]}function Se(I){return!I.endsWith("Z")&&!I.match(/[+-]\d{2}:\d{2}$/)&&(I=I+"Z"),new Date(I).getTime()/1e3}function qe(I,ee,te){if(I.length===0||ee.length===0)return ee.map(()=>null);const ie=[...I].sort((b,C)=>Se(b.timestamp)-Se(C.timestamp)),pe=ie.map(b=>Se(b.timestamp)),y=ie.map(b=>b.temperature===null?null:te?b.temperature:b.temperature*9/5+32);return ee.map(b=>{let C=null,re=null;for(let me=0;me<pe.length;me++)if(pe[me]<=b&&(C={time:pe[me],temp:y[me]}),pe[me]>=b&&re===null){re={time:pe[me],temp:y[me]};break}if(C&&re&&C.temp!==null&&re.temp!==null){if(C.time===re.time)return C.temp;const me=(b-C.time)/(re.time-C.time);return C.temp+me*(re.temp-C.temp)}return C!==null&&C.temp!==null?C.temp:re!==null&&re.temp!==null?re.temp:null})}function Me(I,ee,te,ie){const pe=[...I].reverse();let y=[],b=[],C=[];for(const et of pe){y.push(Se(et.timestamp)),b.push(et.sg_calibrated??et.sg_raw);const Ge=et.temp_calibrated??et.temp_raw;Ge!==null?C.push(ie?Ge:Ge*9/5+32):C.push(null)}let re=qe(ee,y,ie),me=qe(te,y,ie);d(a)&&d(c)>1&&(b=se(b,d(c)),C=se(C,d(c)),re=se(re,d(c)),me=se(me,d(c))),[y,b,C,re,me]=q(y,b,C,re,me,500);const We=Ee(y,b);ue(O,We,!0);const gt=We?he(y,We):y.map(()=>null);return[y,b,C,re,me,gt]}const _e=3e4;async function je(I=!1){const te=Date.now()-d(p);if(!(!I&&d(p)>0&&te<_e)){ue(U,!0),ue(Q,null);try{if(!d(L)){const ie=await Yr(l.batchId);ue(L,ie.device_id??null,!0)}if(d(L)){const[ie,pe,y]=await Promise.all([qr(d(L),d($)),Kr(d($)).catch(()=>[]),jr(d($)).catch(()=>[])]);ue(S,ie,!0),ue(Y,pe,!0),ue(P,y,!0),Je()}else ue(S,[],!0),ue(Y,[],!0),ue(P,[],!0),ue(Q,"No device assigned to this batch")}catch(ie){ue(Q,ie instanceof Error?ie.message:"Failed to load data",!0)}finally{ue(p,Date.now(),!0),ue(U,!1)}}}function Je(){if(!N||d(S).length===0)return;const I=Me(d(S),d(Y),d(P),d(m)),ee=ge(N.clientWidth,d(m),d(u));T&&T.destroy(),T=new bt(ee,I,N)}function ke(){T&&N&&T.setSize({width:N.clientWidth,height:220})}let He=null;function rt(){if(He&&(clearInterval(He),He=null),d(v)>0){const I=d(v)*60*1e3;He=setInterval(()=>{d(U)||je(!1)},I)}}ba(async()=>{const I=localStorage.getItem(i);if(I!==null){const te=parseInt(I,10);Number.isNaN(te)||ue(v,te,!0)}const ee=localStorage.getItem(K);ee!==null&&ue(A,ee==="true");try{const te=await fetch("/api/system/timezone");if(te.ok){const ie=await te.json();ue(u,ie.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await je(!0),window.addEventListener("resize",ke),rt()}),zr(()=>{T?.destroy(),window.removeEventListener("resize",ke),He&&clearInterval(He)}),Os(()=>{d(m)!==void 0&&d(S).length>0&&N&&Je()}),Os(()=>{d(a),d(c),d(S).length>0&&N&&Je()});function nt(I){const ee=Number(I.target.value);ue(v,ee,!0),localStorage.setItem(i,String(ee)),rt(),je(!0)}function pt(){ue(A,!d(A)),localStorage.setItem(K,String(d(A))),T&&T.setSeries(4,{show:d(A)})}var Mt=fc(),we=D(Mt),st=D(we);Ln(st,21,()=>Ur,qn,(I,ee)=>{var te=ac();let ie;te.__click=()=>{d($)!==d(ee).hours&&(ue($,d(ee).hours,!0),je(!0))};var pe=D(te,!0);M(te),dt(()=>{ie=ml(te,1,"range-btn svelte-12kwequ",null,ie,{active:d($)===d(ee).hours}),xe(pe,d(ee).label)}),be(I,te)}),M(st);var Nt=B(st,2),_t=D(Nt),De=B(D(_t),2);De.__change=nt,Ln(De,21,()=>n,qn,(I,ee)=>{var te=rc(),ie=D(te,!0);M(te);var pe={};dt(()=>{xe(ie,d(ee).label),pe!==(pe=d(ee).value)&&(te.value=(te.__value=d(ee).value)??"")}),be(I,te)}),M(De);var Gt;Xr(De),M(_t);var zt=B(_t,2),Vt=B(D(zt),2),de=D(Vt);Bl(2),M(Vt);var G=B(Vt,4);let Ae;G.__click=pt;var Ke=D(G);En(Ke,"background: rgba(250, 204, 21, 0.5);"),Bl(2),M(G),M(zt),M(Nt),M(we);var Bt=B(we,2),jt=D(Bt);{var At=I=>{var ee=oc();be(I,ee)};at(jt,I=>{d(U)&&I(At)})}var Ht=B(jt,2);{var ot=I=>{var ee=uc(),te=B(D(ee),2);te.__click=()=>je(!0),M(ee),be(I,ee)},yt=I=>{var ee=Dn(),te=kl(ee);{var ie=pe=>{var y=cc();be(pe,y)};at(te,pe=>{d(S).length===0&&pe(ie)},!0)}be(I,ee)};at(Ht,I=>{d(Q)?I(ot):I(yt,!1)})}M(Bt),qs(Bt,I=>N=I,()=>N);var vt=B(Bt,2);{var ht=I=>{{let ee=Ve(()=>d(O)?{predictedFg:d(O).predictedFg,daysToFg:d(O).daysToFg,r2:d(O).r2}:null);ic(I,{get readings(){return d(S)},get originalGravity(){return k()},get trend(){return d(ee)}})}};at(vt,I=>{d(S).length>0&&I(ht)})}M(Mt),dt(()=>{Gt!==(Gt=d(v))&&(De.value=(De.__value=d(v))??"",$r(De,d(v))),En(de,`background: ${(le[h()]||"var(--text-secondary)")??""};`),Ae=ml(G,1,"legend-item legend-toggle svelte-12kwequ",null,Ae,{"legend-disabled":!d(A)}),nn(G,"title",d(A)?"Hide trend line":"Show trend line")}),be(e,Mt),Xn()}Zn(["click","change"]);var pc=Ce('<span class="error-message svelte-1k5rb4o"> </span>'),vc=Ce('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),hc=Ce('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),gc=Ce('<div class="w-1 rounded-sm transition-all"></div>'),mc=Ce('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),_c=Ce(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),wc=Ce('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),xc=Ce('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),bc=Ce("<div><!></div>"),yc=Ce('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Sc=Ce('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function kc(e,l){Qn(l,!0);let i=Pn(l,"expanded",3,!1),n=Pn(l,"wide",3,!1),a=Ve(()=>l.batch.device_id?ya.tilts.get(l.batch.device_id)??null:null),c=Ve(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),u=Ve(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=Ve(()=>l.progress?.temperature?.current??null),v=Ve(()=>d(a)?.color??"BLACK"),h=Ve(()=>d(a)?.rssi??null),k=Ve(()=>d(a)?.paired??!0),m=Ve(()=>d(a)?.last_seen??new Date().toISOString()),_=Ve(()=>d(a)?.sg_raw??d(u)),N=Ve(()=>d(a)?.temp_raw??d(p)),T=Be(!1);Os(()=>{i()&&!d(T)&&ue(T,!0)});let U=Be(!1),Q=Be(""),$=Be(null),S=Be(!1),Y=Be(null);function P(){ue(Q,d(c),!0),ue(U,!0),ue(Y,null),setTimeout(()=>d($)?.focus(),0)}async function O(){if(d(S))return;const y=d(Q).trim();if(!y||y===d(c)){ue(U,!1),ue(Y,null);return}ue(S,!0),ue(Y,null);try{await Jr(l.batch.id,{name:y}),ue(U,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(b){console.error("Failed to update batch name:",b),ue(Y,b instanceof Error?b.message:"Failed to save batch name",!0)}finally{ue(S,!1)}}function L(y){y.key==="Enter"?O():y.key==="Escape"&&ue(U,!1)}let le=Ve(Ta),j=Ve(Ks);const J={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function ne(y){return Mn(y)}function w(y){return Wr(y)}function V(y){return y>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:y>=-60?{bars:3,color:"var(--positive)",label:"Good"}:y>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function z(y){const b=Math.floor((Date.now()-new Date(y).getTime())/1e3);if(b<10)return"just now";if(b<60)return`${b}s ago`;const C=Math.floor(b/60);if(C<60)return`${C}m ago`;const re=Math.floor(C/60);return re<24?`${re}h ago`:`${Math.floor(re/24)}d ago`}let X=Ve(()=>J[d(v)]||"var(--tilt-black)"),R=Ve(()=>d(h)!==null?V(d(h)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),K=Ve(()=>z(d(m)));var A=Sc();let Ee;var he=D(A),oe=B(he,2),ge=D(oe),se=D(ge),q=D(se);{var Se=y=>{var b=vc(),C=D(b);Sa(C),C.__keydown=L;let re;qs(C,We=>ue($,We),()=>d($));var me=B(C,2);{var it=We=>{var gt=pc(),et=D(gt,!0);M(gt),dt(()=>xe(et,d(Y))),be(We,gt)};at(me,We=>{d(Y)&&We(it)})}M(b),dt(()=>{C.disabled=d(S),re=ml(C,1,"beer-name-input svelte-1k5rb4o",null,re,{error:d(Y)})}),xa("blur",C,O),ka(C,()=>d(Q),We=>ue(Q,We)),be(y,b)},qe=y=>{var b=hc();b.__click=P;var C=D(b),re=D(C,!0);M(C),Bl(2),M(b),dt(()=>xe(re,d(c))),be(y,b)};at(q,y=>{d(U)?y(Se):y(qe,!1)})}var Me=B(q,2),_e=D(Me),je=B(_e,2),Je=D(je,!0);M(je),M(Me),M(se);var ke=B(se,2),He=D(ke),rt=D(He);Ln(rt,20,()=>Array(4),qn,(y,b,C)=>{var re=gc();dt(()=>En(re,`
									height: ${8+C*4}px;
									background: ${(C<d(R).bars?d(R).color:"var(--bg-hover)")??""};
									opacity: ${C<d(R).bars?1:.4};
								`)),be(y,re)}),M(rt);var nt=B(rt,2),pt=D(nt);M(nt),M(He);var Mt=B(He,2);{var we=y=>{var b=mc();be(y,b)};at(Mt,y=>{d(k)||y(we)})}M(ke),M(ge);var st=B(ge,2),Nt=D(st),_t=D(Nt),De=D(_t,!0),Gt=B(De),zt=D(Gt,!0);M(Gt),M(_t);var Vt=B(_t,2),de=D(Vt,!0);M(Vt),M(Nt);var G=B(Nt,2),Ae=D(G),Ke=D(Ae);{var Bt=y=>{var b=_c(),C=kl(b,!0),re=B(C),me=D(re,!0);M(re),dt(it=>{xe(C,it),xe(me,d(le))},[()=>w(d(p))]),be(y,b)},jt=y=>{var b=wc(),C=B(kl(b)),re=D(C,!0);M(C),dt(()=>xe(re,d(le))),be(y,b)};at(Ke,y=>{d(p)!==null?y(Bt):y(jt,!1)})}M(Ae),Bl(2),M(G),M(st);var At=B(st,2);{var Ht=y=>{var b=xc(),C=B(D(b),2),re=D(C,!0);M(C);var me=B(C,4),it=D(me);M(me),M(b),dt((We,gt)=>{xe(re,We),xe(it,`${gt??""}${d(le)??""}`)},[()=>ne(d(_)),()=>d(N)!==null?w(d(N)):"--"]),be(y,b)};at(At,y=>{(d(u)!==d(_)||d(p)!==d(N))&&d(a)&&y(Ht)})}var ot=B(At,2);{var yt=y=>{var b=bc();let C;var re=D(b);eo(re,()=>l.batch.id,me=>{dc(me,{get batchId(){return l.batch.id},get deviceColor(){return d(v)},get originalGravity(){return l.batch.measured_og}})}),M(b),dt(()=>C=ml(b,1,"chart-section svelte-1k5rb4o",null,C,{hidden:!i()})),be(y,b)};at(ot,y=>{d(T)&&y(yt)})}var vt=B(ot,2),ht=D(vt),I=D(ht);M(ht);var ee=B(ht,2),te=D(ee),ie=B(te,2);{var pe=y=>{var b=yc();b.__click=function(...me){l.onToggleExpand?.apply(this,me)};var C=D(b);let re;M(b),dt(()=>{nn(b,"aria-label",i()?"Collapse chart":"Expand chart"),re=ml(C,0,"w-4 h-4 transition-transform",null,re,{"rotate-180":i()})}),be(y,b)};at(ie,y=>{l.onToggleExpand&&y(pe)})}Bl(2),M(ee),M(vt),M(oe),M(A),dt(y=>{Ee=ml(A,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,Ee,{expanded:i(),wide:n()}),En(he,`background: ${d(X)??""};`),En(_e,`background: ${d(X)??""};`),xe(Je,d(v)),nn(He,"title",`${d(R).label??""} signal (${d(h)??"N/A"??""} dBm)`),xe(pt,`${d(h)??"N/A"??""} dBm`),xe(De,y),xe(zt,d(j)!=="SG"?d(j):""),xe(de,d(j)==="SG"?"Gravity":d(j)==="P"?"Plato":"Brix"),xe(I,`Updated ${d(K)??""}`),nn(te,"href",`/batches/${l.batch.id??""}`)},[()=>ne(d(u))]),be(e,A),Xn()}Zn(["keydown","click"]);var Tc=Ce('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Ec=Ce('<div class="alerts-list svelte-1uha8ag"></div>'),Mc=Ce('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Ac=Ce('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Cc=Ce('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Dc=Ce('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Lc=Ce('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Pc=Ce("<div></div>"),Rc=Ce("<!> <!>",1);function Zc(e,l){Qn(l,!0);let i=Be(!1),n=Be(!1),a=Be(Tn([])),c=Be(Tn(new Map)),u=Be(!0),p=Be(null);ba(async()=>{const O=localStorage.getItem("brewsignal_alerts_dismissed"),L=localStorage.getItem("brewsignal_alerts_dismissed_time");O==="true"&&L&&Date.now()-parseInt(L,10)<360*60*1e3&&ue(i,!0),await v()});async function v(){ue(u,!0),ue(p,null);try{const O=await Zr();ue(a,O.filter(J=>J.status==="fermenting"||J.status==="conditioning"),!0);const L=d(a).map(async J=>{try{const ne=await Qr(J.id);return[J.id,ne]}catch{return null}}),le=await Promise.all(L),j=new Map;for(const J of le)J&&j.set(J[0],J[1]);ue(c,j,!0)}catch(O){ue(p,O instanceof Error?O.message:"Failed to load batches",!0)}finally{ue(u,!1)}}let h=Ve(()=>new Map(d(a).filter(O=>O.device_id&&(O.status==="fermenting"||O.status==="conditioning")).map(O=>[O.device_id,O.id]))),k=Ve(()=>{const O=new Map(d(c));for(const[L,le]of d(h)){const j=ya.tilts.get(L);if(j){const J=O.get(le)||{batch_id:le,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}};O.set(le,{...J,measured:{...J.measured,current_sg:j.sg},temperature:{...J.temperature,current:j.temp,status:J.temperature.yeast_min!==void 0&&J.temperature.yeast_max!==void 0?j.temp<J.temperature.yeast_min?"too_cold":j.temp>J.temperature.yeast_max?"too_hot":"in_range":J.temperature.status}})}}return O}),m=Be(null);function _(O){ue(m,d(m)===O?null:O,!0)}function N(){ue(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function T(){ue(n,!d(n))}var U=Rc();Hr("1uha8ag",O=>{Vr(()=>{Ir.title="Dashboard | BrewSignal"})});var Q=kl(U);{var $=O=>{var L=Ac(),le=D(L),j=D(le),J=B(D(j),4),ne=D(J,!0);M(J),M(j);var w=B(j,2);w.__click=N,M(le);var V=B(le,2);{var z=K=>{var A=Ec();Ln(A,21,()=>wn.alerts,qn,(Ee,he)=>{var oe=Tc();let ge;var se=D(oe),q=D(se);M(se);var Se=B(se,2),qe=D(Se,!0);M(Se),M(oe),dt(()=>{ge=ml(oe,1,"alert-item svelte-1uha8ag",null,ge,{warning:d(he).level==="warning",critical:d(he).level==="critical"}),xe(q,`${d(he).day??""}:`),xe(qe,d(he).message)}),be(Ee,oe)}),M(A),be(K,A)};at(V,K=>{d(n)||K(z)})}var X=B(V,2);{var R=K=>{var A=Mc();A.__click=T;var Ee=D(A,!0);M(A),dt(()=>xe(Ee,d(n)?`Show ${wn.alerts.length} alerts`:"Show less")),be(K,A)};at(X,K=>{wn.alerts.length>3&&K(R)})}M(L),dt(()=>xe(ne,wn.alerts.length)),be(O,L)};at(Q,O=>{wn.alerts.length>0&&!d(i)&&O($)})}var S=B(Q,2);{var Y=O=>{var L=Cc();be(O,L)},P=O=>{var L=Dn(),le=kl(L);{var j=ne=>{var w=Dc(),V=B(D(w),4),z=D(V,!0);M(V),M(w),dt(()=>xe(z,d(p))),be(ne,w)},J=ne=>{var w=Dn(),V=kl(w);{var z=R=>{var K=Lc();be(R,K)},X=R=>{var K=Pc();let A;Ln(K,21,()=>d(a),Ee=>Ee.id,(Ee,he)=>{{let oe=Ve(()=>d(k).get(d(he).id)),ge=Ve(()=>d(m)===d(he).id),se=Ve(()=>d(a).length===1);kc(Ee,{get batch(){return d(he)},get progress(){return d(oe)},get expanded(){return d(ge)},get wide(){return d(se)},onToggleExpand:()=>_(d(he).id),onBatchUpdated:v})}}),M(K),dt(()=>A=ml(K,1,"tilt-grid svelte-1uha8ag",null,A,{"single-tilt":d(a).length===1})),be(R,K)};at(V,R=>{d(a).length===0?R(z):R(X,!1)},!0)}be(ne,w)};at(le,ne=>{d(p)?ne(j):ne(J,!1)},!0)}be(O,L)};at(S,O=>{d(u)?O(Y):O(P,!1)})}be(e,U),Xn()}Zn(["click"]);export{Zc as component};
