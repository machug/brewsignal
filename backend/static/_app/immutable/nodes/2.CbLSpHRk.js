import{d as Zn,c as Cn,a as be,f as De,s as we,e as xa}from"../chunks/BQ88CgEU.js";import{o as Fr,R as Or,b7 as Nr,b as Gr,ah as Qn,ar as Sl,c as d,ai as Be,aj as Xn,al as A,an as T,ak as I,ao as He,as as dt,s as de,at as Bl,p as Dn,ap as ba,aL as zr,aq as Os,e as Vr,am as Ir}from"../chunks/CGXqq0_G.js";import{e as Ln,i as qn}from"../chunks/payu-7ZH.js";import{B as Br,i as it}from"../chunks/ziKwUJ4R.js";import{h as Hr}from"../chunks/BP8qDDK3.js";import{s as gl}from"../chunks/DqcjHxzZ.js";import{t as ya}from"../chunks/DThvY6M2.js";import{w as wn}from"../chunks/BwsdUUZq.js";import{r as Sa,s as nn}from"../chunks/D2zVhfuI.js";import{s as Tn}from"../chunks/BSw_pJTS.js";import{b as ka}from"../chunks/CL9D8AtU.js";import{b as qs}from"../chunks/C39ACuyu.js";import{p as Pn}from"../chunks/B3wItnqC.js";import{c as Un,d as En,b as Ks,g as Ta,e as Wr}from"../chunks/Dq6yox8V.js";import{T as Ur,o as Yr,q as qr,s as Kr,t as jr,u as Jr,v as Zr,g as Qr}from"../chunks/CJrfidL2.js";import{i as Xr,s as $r}from"../chunks/C5J5lxM1.js";function eo(e,l,i){Fr&&Or();var n=new Br(e),a=!Nr();Gr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const to=!0,At="u-",lo="uplot",no=At+"hz",so=At+"vt",io=At+"title",ao=At+"wrap",ro=At+"under",oo=At+"over",uo=At+"axis",Il=At+"off",co=At+"select",fo=At+"cursor-x",po=At+"cursor-y",vo=At+"cursor-pt",ho=At+"legend",go=At+"live",mo=At+"inline",_o=At+"series",wo=At+"marker",Fi=At+"label",xo=At+"value",yn="width",Sn="height",xn="top",Oi="bottom",tn="left",As="right",js="#000",Ni=js+"0",Cs="mousemove",Gi="mousedown",Ds="mouseup",zi="mouseenter",Vi="mouseleave",Ii="dblclick",bo="resize",yo="scroll",Bi="change",Kn="dppxchange",Js="--",cn=typeof window<"u",Ns=cn?document:null,sn=cn?window:null,So=cn?navigator:null;let Ge,Bn;function Gs(){let e=devicePixelRatio;Ge!=e&&(Ge=e,Bn&&Vs(Bi,Bn,Gs),Bn=matchMedia(`(min-resolution: ${Ge-.001}dppx) and (max-resolution: ${Ge+.001}dppx)`),Hl(Bi,Bn,Gs),sn.dispatchEvent(new CustomEvent(Kn)))}function el(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function zs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function lt(e,l,i){e.style[l]=i+"px"}function pl(e,l,i,n){let a=Ns.createElement(e);return l!=null&&el(a,l),i?.insertBefore(a,n),a}function rl(e,l){return pl("div",e,l)}const Hi=new WeakMap;function bl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Hi.get(e);c!=u&&(e.style.transform=c,Hi.set(e,c),l<0||i<0||l>n||i>a?el(e,Il):zs(e,Il))}const Wi=new WeakMap;function Ui(e,l,i){let n=l+i,a=Wi.get(e);n!=a&&(Wi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Yi=new WeakMap;function qi(e,l,i,n){let a=l+""+i,c=Yi.get(e);a!=c&&(Yi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Zs={passive:!0},ko={...Zs,capture:!0};function Hl(e,l,i,n){l.addEventListener(e,i,n?ko:Zs)}function Vs(e,l,i,n){l.removeEventListener(e,i,Zs)}cn&&Gs();function vl(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:tl((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ea(e){return(i,n,a)=>{let c=-1,u=-1;for(let p=n;p<=a;p++)if(e(i[p])){c=p;break}for(let p=a;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const Ma=e=>e!=null,Aa=e=>e!=null&&e>0,$n=Ea(Ma),To=Ea(Aa);function Eo(e,l,i,n=0,a=!1){let c=a?To:$n,u=a?Aa:Ma;[l,i]=c(e,l,i);let p=e[l],v=e[l];if(l>-1)if(n==1)p=e[l],v=e[i];else if(n==-1)p=e[i],v=e[l];else for(let h=l;h<=i;h++){let y=e[h];u(y)&&(y<p?p=y:y>v&&(v=y))}return[p??Je,v??-Je]}function es(e,l,i,n){let a=Ji(e),c=Ji(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?kl:Ca,p=a==1?tl:ol,v=c==1?ol:tl,h=p(u(Et(e))),y=v(u(Et(l))),m=an(i,h),_=an(i,y);return i==10&&(h<0&&(m=Ze(m,-h)),y<0&&(_=Ze(_,-y))),n||i==2?(e=m*a,l=_*c):(e=Ra(e,m),l=ts(l,_)),[e,l]}function Qs(e,l,i,n){let a=es(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Xs=.1,Ki={mode:3,pad:Xs},Mn={pad:0,soft:null,mode:0},Mo={min:Mn,max:Mn};function jn(e,l,i,n){return ls(i)?ji(e,l,i):(Mn.pad=i,Mn.soft=n?0:null,Mn.mode=n?3:0,ji(e,l,Mo))}function Fe(e,l){return e??l}function Ao(e,l,i){for(l=Fe(l,0),i=Fe(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function ji(e,l,i){let n=i.min,a=i.max,c=Fe(n.pad,0),u=Fe(a.pad,0),p=Fe(n.hard,-Je),v=Fe(a.hard,Je),h=Fe(n.soft,Je),y=Fe(a.soft,-Je),m=Fe(n.mode,0),_=Fe(a.mode,0),O=l-e,S=kl(O),j=Yt(Et(e),Et(l)),Q=kl(j),$=Et(Q-S);(O<1e-24||$>10)&&(O=0,(e==0||l==0)&&(O=1e-24,m==2&&h!=Je&&(c=0),_==2&&y!=-Je&&(u=0)));let b=O||j||1e3,Z=kl(b),E=an(10,tl(Z)),C=b*(O==0?e==0?.1:1:c),D=Ze(Ra(e-C,E/10),24),ne=e>=h&&(m==1||m==3&&D<=h||m==2&&D>=h)?h:Je,ee=Yt(p,D<ne&&e>=ne?ne:hl(ne,D)),q=b*(O==0?l==0?.1:1:u),te=Ze(ts(l+q,E/10),24),w=l<=y&&(_==1||_==3&&te>=y||_==2&&te<=y)?y:-Je,z=hl(v,te>w&&l<=w?w:Yt(w,te));return ee==z&&ee==0&&(z=100),[ee,z]}const Co=new Intl.NumberFormat(cn?So.language:"en-US"),$s=e=>Co.format(e),ll=Math,Yn=ll.PI,Et=ll.abs,tl=ll.floor,Tt=ll.round,ol=ll.ceil,hl=ll.min,Yt=ll.max,an=ll.pow,Ji=ll.sign,kl=ll.log10,Ca=ll.log2,Do=(e,l=1)=>ll.sinh(e)*l,Ls=(e,l=1)=>ll.asinh(e/l),Je=1/0;function Zi(e){return(kl((e^e>>31)-(e>>31))|0)+1}function Is(e,l,i){return hl(Yt(e,l),i)}function Da(e){return typeof e=="function"}function Ae(e){return Da(e)?e:()=>e}const Lo=()=>{},La=e=>e,Pa=(e,l)=>l,Po=e=>null,Qi=e=>!0,Xi=(e,l)=>e==l,Ro=/\.\d*?(?=9{6,}|0{6,})/gm,Wl=e=>{if(Oa(e)||Rl.has(e))return e;const l=`${e}`,i=l.match(Ro);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Wl(a)}e${c}`}return Ze(e,n)};function zl(e,l){return Wl(Ze(Wl(e/l))*l)}function ts(e,l){return Wl(ol(Wl(e/l))*l)}function Ra(e,l){return Wl(tl(Wl(e/l))*l)}function Ze(e,l=0){if(Oa(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return Tt(n)/i}const Rl=new Map;function Fa(e){return((""+e).split(".")[1]||"").length}function Rn(e,l,i,n){let a=[],c=n.map(Fa);for(let u=l;u<i;u++){let p=Et(u),v=Ze(an(e,u),p);for(let h=0;h<n.length;h++){let y=e==10?+`${n[h]}e${u}`:n[h]*v,m=(u>=0?0:p)+(u>=c[h]?0:c[h]),_=e==10?y:Ze(y,m);a.push(_),Rl.set(_,m)}}return a}const An={},ei=[],rn=[null,null],Pl=Array.isArray,Oa=Number.isInteger,Fo=e=>e===void 0;function $i(e){return typeof e=="string"}function ls(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Oo(e){return e!=null&&typeof e=="object"}const No=Object.getPrototypeOf(Uint8Array),Na="__proto__";function on(e,l=ls){let i;if(Pl(e)){let n=e.find(a=>a!=null);if(Pl(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=on(e[a],l)}else i=e.slice()}else if(e instanceof No)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Na&&(i[n]=on(e[n],l))}else i=e;return i}function _t(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Na&&(ls(e[a])?_t(e[a],on(n[a])):e[a]=on(n[a]))}return e}const Go=0,zo=1,Vo=2;function Io(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Bo(e,l){if(Uo(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Yo(u[0])||(u=Wo(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let v=e[u][0],h=v.length;for(let y=0;y<h;y++)i.add(v[y])}let n=[Array.from(i).sort((u,p)=>u-p)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],v=p[0];for(let h=1;h<p.length;h++){let y=p[h],m=Array(a).fill(void 0),_=l?l[u][h]:zo,O=[];for(let S=0;S<y.length;S++){let j=y[S],Q=c.get(v[S]);j===null?_!=Go&&(m[Q]=j,_==Vo&&O.push(Q)):m[Q]=j}Io(m,O,a),n.push(m)}}return n}const Ho=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Wo(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let v=0;v<i;v++)p[v]=u[n[v]];a.push(p)}return a}function Uo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Yo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=Yt(1,tl((a-n+1)/l));for(let u=e[n],p=n+c;p<=a;p+=c){const v=e[p];if(v!=null){if(v<=u)return!1;u=v}}return!0}const Ga=["January","February","March","April","May","June","July","August","September","October","November","December"],za=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Va(e){return e.slice(0,3)}const qo=za.map(Va),Ko=Ga.map(Va),jo={MMMM:Ga,MMM:Ko,WWWW:za,WWW:qo};function bn(e){return(e<10?"0":"")+e}function Jo(e){return(e<10?"00":e<100?"0":"")+e}const Zo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>bn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>bn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>bn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>bn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>bn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Jo(e.getMilliseconds())};function ti(e,l){l=l||jo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?Zo[a[1]]:a[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Qo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Xo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Qo?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ia=e=>e%1==0,Jn=[1,2,2.5,5],$o=Rn(10,-32,0,Jn),Ba=Rn(10,0,32,Jn),eu=Ba.filter(Ia),Vl=$o.concat(Ba),li=`
`,Ha="{YYYY}",ea=li+Ha,Wa="{M}/{D}",kn=li+Wa,Hn=kn+"/{YY}",Ua="{aa}",tu="{h}:{mm}",ln=tu+Ua,ta=li+ln,la=":{ss}",Ve=null;function Ya(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,v=(e==1?Rn(10,0,3,Jn).filter(Ia):Rn(10,-3,0,Jn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const h=[[u,Ha,Ve,Ve,Ve,Ve,Ve,Ve,1],[a*28,"{MMM}",ea,Ve,Ve,Ve,Ve,Ve,1],[a,Wa,ea,Ve,Ve,Ve,Ve,Ve,1],[n,"{h}"+Ua,Hn,Ve,kn,Ve,Ve,Ve,1],[i,ln,Hn,Ve,kn,Ve,Ve,Ve,1],[l,la,Hn+" "+ln,Ve,kn+" "+ln,Ve,ta,Ve,1],[e,la+".{fff}",Hn+" "+ln,Ve,kn+" "+ln,Ve,ta,Ve,1]];function y(m){return(_,O,S,j,Q,$)=>{let b=[],Z=Q>=u,E=Q>=c&&Q<u,C=m(S),D=Ze(C*e,3),ne=Ps(C.getFullYear(),Z?0:C.getMonth(),E||Z?1:C.getDate()),ee=Ze(ne*e,3);if(E||Z){let q=E?Q/c:0,te=Z?Q/u:0,w=D==ee?D:Ze(Ps(ne.getFullYear()+te,ne.getMonth()+q,1)*e,3),z=new Date(Tt(w/e)),N=z.getFullYear(),X=z.getMonth();for(let M=0;w<=j;M++){let K=Ps(N+te*M,X+q*M,1),P=K-m(Ze(K*e,3));w=Ze((+K+P)*e,3),w<=j&&b.push(w)}}else{let q=Q>=a?a:Q,te=tl(S)-tl(D),w=ee+te+ts(D-ee,q);b.push(w);let z=m(w),N=z.getHours()+z.getMinutes()/i+z.getSeconds()/n,X=Q/n,M=_.axes[O]._space,K=$/M;for(;w=Ze(w+Q,e==1?0:3),!(w>j);)if(X>1){let P=tl(Ze(N+X,6))%24,fe=m(w).getHours()-P;fe>1&&(fe=-1),w-=fe*n,N=(N+X)%24;let me=b[b.length-1];Ze((w-me)/Q,3)*K>=.7&&b.push(w)}else b.push(w)}return b}}return[v,h,y]}const[lu,nu,su]=Ya(1),[iu,au,ru]=Ya(.001);Rn(2,-53,53,[1]);function na(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function sa(e,l){return(i,n,a,c,u)=>{let p=l.find(S=>u>=S[0])||l[l.length-1],v,h,y,m,_,O;return n.map(S=>{let j=e(S),Q=j.getFullYear(),$=j.getMonth(),b=j.getDate(),Z=j.getHours(),E=j.getMinutes(),C=j.getSeconds(),D=Q!=v&&p[2]||$!=h&&p[3]||b!=y&&p[4]||Z!=m&&p[5]||E!=_&&p[6]||C!=O&&p[7]||p[1];return v=Q,h=$,y=b,m=Z,_=E,O=C,D(j)})}}function ou(e,l){let i=ti(l);return(n,a,c,u,p)=>a.map(v=>i(e(v)))}function Ps(e,l,i){return new Date(e,l,i)}function ia(e,l){return l(e)}const uu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function aa(e,l){return(i,n,a,c)=>c==null?Js:l(e(n))}function cu(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function fu(e,l){return e.series[l].fill(e,l)}const du={show:!0,live:!0,isolate:!1,mount:Lo,markers:{show:!0,width:2,stroke:cu,fill:fu,dash:"solid"},idx:null,idxs:null,values:[]};function pu(e,l){let i=e.cursor.points,n=rl(),a=i.size(e,l);lt(n,yn,a),lt(n,Sn,a);let c=a/-2;lt(n,"marginLeft",c),lt(n,"marginTop",c);let u=i.width(e,l,a);return u&&lt(n,"borderWidth",u),n}function vu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function hu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function gu(e,l){return e.series[l].points.size}const Rs=[0,0];function mu(e,l,i){return Rs[0]=l,Rs[1]=i,Rs}function Wn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Fs(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const _u={show:!0,x:!0,y:!0,lock:!1,move:mu,points:{one:!1,show:pu,size:gu,width:0,stroke:hu,fill:vu},bind:{mousedown:Wn,mouseup:Wn,click:Wn,dblclick:Wn,mousemove:Fs,mouseleave:Fs,mouseenter:Fs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},qa={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ni=_t({},qa,{filter:Pa}),Ka=_t({},ni,{size:10}),ja=_t({},qa,{show:!1}),si='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ja="bold "+si,Za=1.5,ra={show:!0,scale:"x",stroke:js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ja,side:2,grid:ni,ticks:Ka,border:ja,font:si,lineGap:Za,rotate:0},wu="Value",xu="Time",oa={show:!0,scale:"x",auto:!1,sorted:1,min:Je,max:-Je,idxs:[]};function bu(e,l,i,n,a){return l.map(c=>c==null?"":$s(c))}function yu(e,l,i,n,a,c,u){let p=[],v=Rl.get(a)||0;i=u?i:Ze(ts(i,a),v);for(let h=i;h<=n;h=Ze(h+a,v))p.push(Object.is(h,-0)?0:h);return p}function Bs(e,l,i,n,a,c,u){const p=[],v=e.scales[e.axes[l].scale].log,h=v==10?kl:Ca,y=tl(h(i));a=an(v,y),v==10&&(a=Vl[vl(a,Vl)]);let m=i,_=a*v;v==10&&(_=Vl[vl(_,Vl)]);do p.push(m),m=m+a,v==10&&!Rl.has(m)&&(m=Ze(m,Rl.get(a))),m>=_&&(a=m,_=a*v,v==10&&(_=Vl[vl(_,Vl)]));while(m<=n);return p}function Su(e,l,i,n,a,c,u){let v=e.scales[e.axes[l].scale].asinh,h=n>v?Bs(e,l,Yt(v,i),n,a):[v],y=n>=0&&i<=0?[0]:[];return(i<-v?Bs(e,l,Yt(v,-n),-i,a):[v]).reverse().map(_=>-_).concat(y,h)}const Qa=/./,ku=/[12357]/,Tu=/[125]/,ua=/1/,Hs=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Eu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=e.scales[u],v=e.valToPos,h=c._space,y=v(10,u),m=v(9,u)-y>=h?Qa:v(7,u)-y>=h?ku:v(5,u)-y>=h?Tu:ua;if(m==ua){let _=Et(v(1,u)-y);if(_<h)return Hs(l.slice().reverse(),p.distr,m,ol(h/_)).reverse()}return Hs(l,p.distr,m,1)}function Mu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=c._space,v=e.valToPos,h=Et(v(1,u)-v(2,u));return h<p?Hs(l.slice().reverse(),3,Qa,ol(p/h)).reverse():l}function Au(e,l,i,n){return n==null?Js:l==null?"":$s(l)}const ca={show:!0,scale:"y",stroke:js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ja,side:3,grid:ni,ticks:Ka,border:ja,font:si,lineGap:Za,rotate:0};function Cu(e,l){let i=3+(e||1)*2;return Ze(i*l,3)}function Du(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),p=Et(u-c),v=e.series[l],h=p/(v.points.space*Ge);return n[1]-n[0]<=h}const fa={scale:null,auto:!0,sorted:0,min:Je,max:-Je},Xa=(e,l,i,n,a)=>a,da={show:!0,auto:!0,sorted:0,gaps:Xa,alpha:1,facets:[_t({},fa,{scale:"x"}),_t({},fa,{scale:"y"})]},pa={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Xa,alpha:1,points:{show:Du,filter:null},values:null,min:Je,max:-Je,idxs:[],path:null,clip:null};function Lu(e,l,i,n,a){return i/10}const $a={time:to,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Pu=_t({},$a,{time:!1,ori:1}),va={};function er(e,l){let i=va[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,p,v,h){for(let y=0;y<i.plots.length;y++)i.plots[y]!=a&&i.plots[y].pub(n,a,c,u,p,v,h)}},e!=null&&(va[e]=i)),i}const un=1,Ws=2;function Ul(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let v=c[0],h=n==2?c[1]:c[l],y=n==2?u[a.facets[0].scale]:u[e.series[0].scale],m=n==2?u[a.facets[1].scale]:u[a.scale],_=p.left,O=p.top,S=p.width,j=p.height,Q=e.valToPosH,$=e.valToPosV;return y.ori==0?i(a,v,h,y,m,Q,$,_,O,S,j,ss,fn,as,lr,sr):i(a,v,h,y,m,$,Q,O,_,j,S,is,dn,ri,nr,ir)}function ii(e,l){let i=0,n=0,a=Fe(e.bands,ei);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Ru(e,l,i,n,a){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,v=e.scales[p];return a==-1?v.min:a==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function Tl(e,l,i,n,a,c){return Ul(e,l,(u,p,v,h,y,m,_,O,S,j,Q)=>{let $=u.pxRound;const b=h.dir*(h.ori==0?1:-1),Z=h.ori==0?fn:dn;let E,C;b==1?(E=i,C=n):(E=n,C=i);let D=$(m(p[E],h,j,O)),ne=$(_(v[E],y,Q,S)),ee=$(m(p[C],h,j,O)),q=$(_(c==1?y.max:y.min,y,Q,S)),te=new Path2D(a);return Z(te,ee,q),Z(te,D,q),Z(te,D,ne),te})}function ns(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?as:ri;let v=i;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let O=_[0]-v;O>0&&p(u,v,n,O,n+c),v=_[1]}}let h=i+a-v,y=10;h>0&&p(u,v,n-y/2,h,n+c+y)}return u}function Fu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ai(e,l,i,n,a,c,u){let p=[],v=e.length;for(let h=a==1?i:n;h>=i&&h<=n;h+=a)if(l[h]===null){let m=h,_=h;if(a==1)for(;++h<=n&&l[h]===null;)_=h;else for(;--h>=i&&l[h]===null;)_=h;let O=c(e[m]),S=_==m?O:c(e[_]),j=m-a;O=u<=0&&j>=0&&j<v?c(e[j]):O;let $=_+a;S=u>=0&&$>=0&&$<v?c(e[$]):S,S>=O&&p.push([O,S])}return p}function ha(e){return e==0?La:e==1?Tt:l=>zl(l,e)}function tr(e){let l=e==0?ss:is,i=e==0?(a,c,u,p,v,h)=>{a.arcTo(c,u,p,v,h)}:(a,c,u,p,v,h)=>{a.arcTo(u,c,v,p,h)},n=e==0?(a,c,u,p,v)=>{a.rect(c,u,p,v)}:(a,c,u,p,v)=>{a.rect(u,c,v,p)};return(a,c,u,p,v,h=0,y=0)=>{h==0&&y==0?n(a,c,u,p,v):(h=hl(h,p/2,v/2),y=hl(y,p/2,v/2),l(a,c+h,u),i(a,c+p,u,c+p,u+v,h),i(a,c+p,u+v,c,u+v,y),i(a,c,u+v,c,u,y),i(a,c,u,c+p,u,h),a.closePath())}}const ss=(e,l,i)=>{e.moveTo(l,i)},is=(e,l,i)=>{e.moveTo(i,l)},fn=(e,l,i)=>{e.lineTo(l,i)},dn=(e,l,i)=>{e.lineTo(i,l)},as=tr(0),ri=tr(1),lr=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},nr=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},sr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},ir=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function ar(e){return(l,i,n,a,c)=>Ul(l,i,(u,p,v,h,y,m,_,O,S,j,Q)=>{let{pxRound:$,points:b}=u,Z,E;h.ori==0?(Z=ss,E=lr):(Z=is,E=nr);const C=Ze(b.width*Ge,3);let D=(b.size-b.width)/2*Ge,ne=Ze(D*2,3),ee=new Path2D,q=new Path2D,{left:te,top:w,width:z,height:N}=l.bbox;as(q,te-ne,w-ne,z+ne*2,N+ne*2);const X=M=>{if(v[M]!=null){let K=$(m(p[M],h,j,O)),P=$(_(v[M],y,Q,S));Z(ee,K+D,P),E(ee,K,P,D,0,Yn*2)}};if(c)c.forEach(X);else for(let M=n;M<=a;M++)X(M);return{stroke:C>0?ee:null,fill:ee,clip:q,flags:un|Ws}})}function rr(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Ou=rr(fn),Nu=rr(dn);function or(e){const l=Fe(e?.alignGaps,0);return(i,n,a,c)=>Ul(i,n,(u,p,v,h,y,m,_,O,S,j,Q)=>{[a,c]=$n(v,a,c);let $=u.pxRound,b=N=>$(m(N,h,j,O)),Z=N=>$(_(N,y,Q,S)),E,C;h.ori==0?(E=fn,C=Ou):(E=dn,C=Nu);const D=h.dir*(h.ori==0?1:-1),ne={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:un},ee=ne.stroke;let q=!1;if(c-a>=j*4){let N=H=>i.posToVal(H,h.key,!0),X=null,M=null,K,P,Te,he=b(p[D==1?a:c]),fe=b(p[a]),me=b(p[c]),ie=N(D==1?fe+1:me-1);for(let H=D==1?a:c;H>=a&&H<=c;H+=D){let Ce=p[H],ye=(D==1?Ce<ie:Ce>ie)?he:b(Ce),_e=v[H];ye==he?_e!=null?(P=_e,X==null?(E(ee,ye,Z(P)),K=X=M=P):P<X?X=P:P>M&&(M=P)):_e===null&&(q=!0):(X!=null&&C(ee,he,Z(X),Z(M),Z(K),Z(P)),_e!=null?(P=_e,E(ee,ye,Z(P)),X=M=K=P):(X=M=null,_e===null&&(q=!0)),he=ye,ie=N(he+D))}X!=null&&X!=M&&Te!=he&&C(ee,he,Z(X),Z(M),Z(K),Z(P))}else for(let N=D==1?a:c;N>=a&&N<=c;N+=D){let X=v[N];X===null?q=!0:X!=null&&E(ee,b(p[N]),Z(X))}let[w,z]=ii(i,n);if(u.fill!=null||w!=0){let N=ne.fill=new Path2D(ee),X=u.fillTo(i,n,u.min,u.max,w),M=Z(X),K=b(p[a]),P=b(p[c]);D==-1&&([P,K]=[K,P]),E(N,P,M),E(N,K,M)}if(!u.spanGaps){let N=[];q&&N.push(...ai(p,v,a,c,D,b,l)),ne.gaps=N=u.gaps(i,n,a,c,N),ne.clip=ns(N,h.ori,O,S,j,Q)}return z!=0&&(ne.band=z==2?[Tl(i,n,a,c,ee,-1),Tl(i,n,a,c,ee,1)]:Tl(i,n,a,c,ee,z)),ne})}function Gu(e){const l=Fe(e.align,1),i=Fe(e.ascDesc,!1),n=Fe(e.alignGaps,0),a=Fe(e.extend,!1);return(c,u,p,v)=>Ul(c,u,(h,y,m,_,O,S,j,Q,$,b,Z)=>{[p,v]=$n(m,p,v);let E=h.pxRound,{left:C,width:D}=c.bbox,ne=fe=>E(S(fe,_,b,Q)),ee=fe=>E(j(fe,O,Z,$)),q=_.ori==0?fn:dn;const te={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:un},w=te.stroke,z=_.dir*(_.ori==0?1:-1);let N=ee(m[z==1?p:v]),X=ne(y[z==1?p:v]),M=X,K=X;a&&l==-1&&(K=C,q(w,K,N)),q(w,X,N);for(let fe=z==1?p:v;fe>=p&&fe<=v;fe+=z){let me=m[fe];if(me==null)continue;let ie=ne(y[fe]),H=ee(me);l==1?q(w,ie,N):q(w,M,H),q(w,ie,H),N=H,M=ie}let P=M;a&&l==1&&(P=C+D,q(w,P,N));let[Te,he]=ii(c,u);if(h.fill!=null||Te!=0){let fe=te.fill=new Path2D(w),me=h.fillTo(c,u,h.min,h.max,Te),ie=ee(me);q(fe,P,ie),q(fe,K,ie)}if(!h.spanGaps){let fe=[];fe.push(...ai(y,m,p,v,z,ne,n));let me=h.width*Ge/2,ie=i||l==1?me:-me,H=i||l==-1?-me:me;fe.forEach(Ce=>{Ce[0]+=ie,Ce[1]+=H}),te.gaps=fe=h.gaps(c,u,p,v,fe),te.clip=ns(fe,_.ori,Q,$,b,Z)}return he!=0&&(te.band=he==2?[Tl(c,u,p,v,w,-1),Tl(c,u,p,v,w,1)]:Tl(c,u,p,v,w,he)),te})}function ga(e,l,i,n,a,c,u=Je){if(e.length>1){let p=null;for(let v=0,h=1/0;v<e.length;v++)if(l[v]!==void 0){if(p!=null){let y=Et(e[v]-e[p]);y<h&&(h=y,u=Et(i(e[v],n,a,c)-i(e[p],n,a,c)))}p=v}}return u}function zu(e){e=e||An;const l=Fe(e.size,[.6,Je,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=Ae(a),u=1-l[0],p=Fe(l[1],Je),v=Fe(l[2],1),h=Fe(e.disp,An),y=Fe(e.each,O=>{}),{fill:m,stroke:_}=h;return(O,S,j,Q)=>Ul(O,S,($,b,Z,E,C,D,ne,ee,q,te,w)=>{let z=$.pxRound,N=i,X=n*Ge,M=p*Ge,K=v*Ge,P,Te;E.ori==0?[P,Te]=c(O,S):[Te,P]=c(O,S);const he=E.dir*(E.ori==0?1:-1);let fe=E.ori==0?as:ri,me=E.ori==0?y:(G,Me,Ue,qt,jt,Gt,It)=>{y(G,Me,Ue,jt,qt,It,Gt)},ie=Fe(O.bands,ei).find(G=>G.series[0]==S),H=ie!=null?ie.dir:0,Ce=$.fillTo(O,S,$.min,$.max,H),Qe=z(ne(Ce,C,w,q)),ye,_e,at,Ie=te,Ee=z($.width*Ge),wt=!1,ht=null,Ke=null,Xe=null,xt=null;m!=null&&(Ee==0||_!=null)&&(wt=!0,ht=m.values(O,S,j,Q),Ke=new Map,new Set(ht).forEach(G=>{G!=null&&Ke.set(G,new Path2D)}),Ee>0&&(Xe=_.values(O,S,j,Q),xt=new Map,new Set(Xe).forEach(G=>{G!=null&&xt.set(G,new Path2D)})));let{x0:xe,size:pt}=h;if(xe!=null&&pt!=null){N=1,b=xe.values(O,S,j,Q),xe.unit==2&&(b=b.map(Ue=>O.posToVal(ee+Ue*te,E.key,!0)));let G=pt.values(O,S,j,Q);pt.unit==2?_e=G[0]*te:_e=D(G[0],E,te,ee)-D(0,E,te,ee),Ie=ga(b,Z,D,E,te,ee,Ie),at=Ie-_e+X}else Ie=ga(b,Z,D,E,te,ee,Ie),at=Ie*u+X,_e=Ie-at;at<1&&(at=0),Ee>=_e/2&&(Ee=0),at<5&&(z=La);let gt=at>0,bt=Ie-at-(gt?Ee:0);_e=z(Is(bt,K,M)),ye=(N==0?_e/2:N==he?0:_e)-N*he*((N==0?X/2:0)+(gt?Ee/2:0));const We={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},yt=wt?null:new Path2D;let Nt=null;if(ie!=null)Nt=O.data[ie.series[1]];else{let{y0:G,y1:Me}=h;G!=null&&Me!=null&&(Z=Me.values(O,S,j,Q),Nt=G.values(O,S,j,Q))}let St=P*_e,ve=Te*_e;for(let G=he==1?j:Q;G>=j&&G<=Q;G+=he){let Me=Z[G];if(Me==null)continue;if(Nt!=null){let R=Nt[G]??0;if(Me-R==0)continue;Qe=ne(R,C,w,q)}let Ue=E.distr!=2||h!=null?b[G]:G,qt=D(Ue,E,te,ee),jt=ne(Fe(Me,Ce),C,w,q),Gt=z(qt-ye),It=z(Yt(jt,Qe)),rt=z(hl(jt,Qe)),kt=It-rt;if(Me!=null){let R=Me<0?ve:St,W=Me<0?St:ve;wt?(Ee>0&&Xe[G]!=null&&fe(xt.get(Xe[G]),Gt,rt+tl(Ee/2),_e,Yt(0,kt-Ee),R,W),ht[G]!=null&&fe(Ke.get(ht[G]),Gt,rt+tl(Ee/2),_e,Yt(0,kt-Ee),R,W)):fe(yt,Gt,rt+tl(Ee/2),_e,Yt(0,kt-Ee),R,W),me(O,S,G,Gt-Ee/2,rt,_e+Ee,kt)}}return Ee>0?We.stroke=wt?xt:yt:wt||(We._fill=$.width==0?$._fill:$._stroke??$._fill,We.width=0),We.fill=wt?Ke:yt,We})}function Vu(e,l){const i=Fe(l?.alignGaps,0);return(n,a,c,u)=>Ul(n,a,(p,v,h,y,m,_,O,S,j,Q,$)=>{[c,u]=$n(h,c,u);let b=p.pxRound,Z=P=>b(_(P,y,Q,S)),E=P=>b(O(P,m,$,j)),C,D,ne;y.ori==0?(C=ss,ne=fn,D=sr):(C=is,ne=dn,D=ir);const ee=y.dir*(y.ori==0?1:-1);let q=Z(v[ee==1?c:u]),te=q,w=[],z=[];for(let P=ee==1?c:u;P>=c&&P<=u;P+=ee)if(h[P]!=null){let he=v[P],fe=Z(he);w.push(te=fe),z.push(E(h[P]))}const N={stroke:e(w,z,C,ne,D,b),fill:null,clip:null,band:null,gaps:null,flags:un},X=N.stroke;let[M,K]=ii(n,a);if(p.fill!=null||M!=0){let P=N.fill=new Path2D(X),Te=p.fillTo(n,a,p.min,p.max,M),he=E(Te);ne(P,te,he),ne(P,q,he)}if(!p.spanGaps){let P=[];P.push(...ai(v,h,c,u,ee,Z,i)),N.gaps=P=p.gaps(n,a,c,u,P),N.clip=ns(P,y.ori,S,j,Q,$)}return K!=0&&(N.band=K==2?[Tl(n,a,c,u,X,-1),Tl(n,a,c,u,X,1)]:Tl(n,a,c,u,X,K)),N})}function Iu(e){return Vu(Bu,e)}function Bu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let v=Array(u),h=Array(u-1),y=Array(u-1),m=Array(u-1);for(let _=0;_<u-1;_++)y[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],h[_]=y[_]/m[_];v[0]=h[0];for(let _=1;_<u-1;_++)h[_]===0||h[_-1]===0||h[_-1]>0!=h[_]>0?v[_]=0:(v[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/h[_-1]+(m[_]+2*m[_-1])/h[_]),isFinite(v[_])||(v[_]=0));v[u-1]=h[u-2];for(let _=0;_<u-1;_++)a(p,e[_]+m[_]/3,l[_]+v[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-v[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const Us=new Set;function ma(){for(let e of Us)e.syncRect(!0)}cn&&(Hl(bo,sn,ma),Hl(yo,sn,ma,!0),Hl(Kn,sn,()=>{Mt.pxRatio=Ge}));const Hu=or(),Wu=ar();function _a(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ys(c,u,l,i))}function Uu(e,l){return e.map((i,n)=>n==0?{}:_t({},l,i))}function Ys(e,l,i,n){return _t({},l==0?i:n,e)}function ur(e,l,i){return l==null?rn:[l,i]}const Yu=ur;function qu(e,l,i){return l==null?rn:jn(l,i,Xs,!0)}function cr(e,l,i,n){return l==null?rn:es(l,i,e.scales[n].log,!1)}const Ku=cr;function fr(e,l,i,n){return l==null?rn:Qs(l,i,e.scales[n].log,!1)}const ju=fr;function Ju(e,l,i,n,a){let c=Yt(Zi(e),Zi(l)),u=l-e,p=vl(a/n*u,i);do{let v=i[p],h=n*v/u;if(h>=a&&c+(v<5?Rl.get(v):0)<=17)return[v,h]}while(++p<i.length);return[0,0]}function wa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=Tt((i=+a)*Ge))+"px"),[e,l,i]}function Zu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ze(l[2]*Ge,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function Mt(e,l,i){const n={mode:Fe(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let v=!1;n.status=0;const h=n.root=rl(lo);if(e.id!=null&&(h.id=e.id),el(h,e.class),e.title){let t=rl(io,h);t.textContent=e.title}const y=pl("canvas"),m=n.ctx=y.getContext("2d"),_=rl(ao,h);Hl("click",_,t=>{t.target===S&&($e!=Zl||st!=Ql)&&Vt.click(n,t)},!0);const O=n.under=rl(ro,_);_.appendChild(y);const S=n.over=rl(oo,_);e=on(e);const j=+Fe(e.pxAlign,1),Q=ha(j);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const $=e.ms||.001,b=n.series=a==1?_a(e.series||[],oa,pa,!1):Uu(e.series||[null],da),Z=n.axes=_a(e.axes||[],ra,ca,!0),E=n.scales={},C=n.bands=e.bands||[];C.forEach(t=>{t.fill=Ae(t.fill||null),t.dir=Fe(t.dir,-1)});const D=a==2?b[1].facets[0].scale:b[0].scale,ne={axes:wr,series:vr},ee=(e.drawOrder||["axes","series"]).map(t=>ne[t]);function q(t){const s=t.distr==3?r=>kl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Ls(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:g}=t,x=g-f;return(o-f)/x}}function te(t){let s=E[t];if(s==null){let r=(e.scales||An)[t]||An;if(r.from!=null){te(r.from);let o=_t({},E[r.from],r,{key:t});o.valToPct=q(o),E[t]=o}else{s=E[t]=_t({},t==D?$a:Pu,r),s.key=t;let o=s.time,f=s.range,g=Pl(f);if((t!=D||a==2&&!o)&&(g&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ki:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ki:{mode:1,hard:f[1],soft:f[1]}},g=!1),!g&&ls(f))){let x=f;f=(k,L,B)=>L==null?rn:jn(L,B,x)}s.range=Ae(f||(o?Yu:t==D?s.distr==3?Ku:s.distr==4?ju:ur:s.distr==3?cr:s.distr==4?fr:qu)),s.auto=Ae(g?!1:s.auto),s.clamp=Ae(s.clamp||Lu),s._min=s._max=null,s.valToPct=q(s)}}}te("x"),te("y"),a==1&&b.forEach(t=>{te(t.scale)}),Z.forEach(t=>{te(t.scale)});for(let t in e.scales)te(t);const w=E[D],z=w.distr;let N,X;w.ori==0?(el(h,no),N=c,X=u):(el(h,so),N=u,X=c);const M={};for(let t in E){let s=E[t];(s.min!=null||s.max!=null)&&(M[t]={min:s.min,max:s.max},s.min=s.max=null)}const K=e.tzDate||(t=>new Date(Tt(t/$))),P=e.fmtDate||ti,Te=$==1?su(K):ru(K),he=sa(K,na($==1?nu:au,P)),fe=aa(K,ia(uu,P)),me=[],ie=n.legend=_t({},du,e.legend),H=n.cursor=_t({},_u,{drag:{y:a==2}},e.cursor),Ce=ie.show,Qe=H.show,ye=ie.markers;ie.idxs=me,ye.width=Ae(ye.width),ye.dash=Ae(ye.dash),ye.stroke=Ae(ye.stroke),ye.fill=Ae(ye.fill);let _e,at,Ie,Ee=[],wt=[],ht,Ke=!1,Xe={};if(ie.live){const t=b[1]?b[1].values:null;Ke=t!=null,ht=Ke?t(n,1,0):{_:0};for(let s in ht)Xe[s]=Js}if(Ce)if(_e=pl("table",ho,h),Ie=pl("tbody",null,_e),ie.mount(n,_e),Ke){at=pl("thead",null,_e,Ie);let t=pl("tr",null,at);pl("th",null,t);for(var xt in ht)pl("th",Fi,t).textContent=xt}else el(_e,mo),ie.live&&el(_e,go);const xe={show:!0},pt={show:!1};function gt(t,s){if(s==0&&(Ke||!ie.live||a==2))return rn;let r=[],o=pl("tr",_o,Ie,Ie.childNodes[s]);el(o,t.class),t.show||el(o,Il);let f=pl("th",null,o);if(ye.show){let k=rl(wo,f);if(s>0){let L=ye.width(n,s);L&&(k.style.border=L+"px "+ye.dash(n,s)+" "+ye.stroke(n,s)),k.style.background=ye.fill(n,s)}}let g=rl(Fi,f);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(ye.show||(g.style.color=t.width>0?ye.stroke(n,s):ye.fill(n,s)),We("click",f,k=>{if(H._lock)return;je(k);let L=b.indexOf(t);if((k.ctrlKey||k.metaKey)!=ie.isolate){let B=b.some((Y,J)=>J>0&&J!=L&&Y.show);b.forEach((Y,J)=>{J>0&&ml(J,B?J==L?xe:pt:xe,!0,mt.setSeries)})}else ml(L,{show:!t.show},!0,mt.setSeries)},!1),Le&&We(zi,f,k=>{H._lock||(je(k),ml(b.indexOf(t),$l,!0,mt.setSeries))},!1));for(var x in ht){let k=pl("td",xo,o);k.textContent="--",r.push(k)}return[o,r]}const bt=new Map;function We(t,s,r,o=!0){const f=bt.get(s)||{},g=H.bind[t](n,s,r,o);g&&(Hl(t,s,f[t]=g),bt.set(s,f))}function yt(t,s,r){const o=bt.get(s)||{};for(let f in o)(t==null||f==t)&&(Vs(f,s,o[f]),delete o[f]);t==null&&bt.delete(s)}let Nt=0,St=0,ve=0,G=0,Me=0,Ue=0,qt=Me,jt=Ue,Gt=ve,It=G,rt=0,kt=0,R=0,W=0;n.bbox={};let se=!1,ce=!1,re=!1,oe=!1,V=!1,U=!1;function Oe(t,s,r){(r||t!=n.width||s!=n.height)&&F(t,s),ql(!1),re=!0,ce=!0,Kl()}function F(t,s){n.width=Nt=ve=t,n.height=St=G=s,Me=Ue=0,ot(),Ct();let r=n.bbox;rt=r.left=zl(Me*Ge,.5),kt=r.top=zl(Ue*Ge,.5),R=r.width=zl(ve*Ge,.5),W=r.height=zl(G*Ge,.5)}const le=3;function ue(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=_r(s);t=s==le||r&&o,t||(F(n.width,n.height),ce=!0)}}function Se({width:t,height:s}){Oe(t,s)}n.setSize=Se;function ot(){let t=!1,s=!1,r=!1,o=!1;Z.forEach((f,g)=>{if(f.show&&f._show){let{side:x,_size:k}=f,L=x%2,B=f.label!=null?f.labelSize:0,Y=k+B;Y>0&&(L?(ve-=Y,x==3?(Me+=Y,o=!0):r=!0):(G-=Y,x==0?(Ue+=Y,t=!0):s=!0))}}),Bt[0]=t,Bt[1]=r,Bt[2]=s,Bt[3]=o,ve-=ut[1]+ut[3],Me+=ut[3],G-=ut[2]+ut[0],Ue+=ut[0]}function Ct(){let t=Me+ve,s=Ue+G,r=Me,o=Ue;function f(g,x){switch(g){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}Z.forEach((g,x)=>{if(g.show&&g._show){let k=g.side;g._pos=f(k,g._size),g.label!=null&&(g._lpos=f(k,g.labelSize))}})}if(H.dataIdx==null){let t=H.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Ae(t.prox),o=t.bias??=0;H.dataIdx=(f,g,x,k)=>{if(g==0)return x;let L=x,B=r(f,g,x,k)??Je,Y=B>=0&&B<Je,J=w.ori==0?ve:G,ge=H.left,Ne=l[0],Re=l[g];if(s.has(Re[x])){L=null;let ke=null,pe=null,ae;if(o==0||o==-1)for(ae=x;ke==null&&ae-- >0;)s.has(Re[ae])||(ke=ae);if(o==0||o==1)for(ae=x;pe==null&&ae++<Re.length;)s.has(Re[ae])||(pe=ae);if(ke!=null||pe!=null)if(Y){let tt=ke==null?-1/0:N(Ne[ke],w,J,0),ct=pe==null?1/0:N(Ne[pe],w,J,0),Ot=ge-tt,qe=ct-ge;Ot<=qe?Ot<=B&&(L=ke):qe<=B&&(L=pe)}else L=pe==null?ke:ke==null?pe:x-ke<=pe-x?ke:pe}else Y&&Et(ge-N(Ne[x],w,J,0))>B&&(L=null);return L}}const je=t=>{H.event=t};H.idxs=me,H._lock=!1;let ze=H.points;ze.show=Ae(ze.show),ze.size=Ae(ze.size),ze.stroke=Ae(ze.stroke),ze.width=Ae(ze.width),ze.fill=Ae(ze.fill);const nt=n.focus=_t({},e.focus||{alpha:.3},H.focus),Le=nt.prox>=0,Ye=Le&&ze.one;let Pe=[],zt=[],nl=[];function El(t,s){let r=ze.show(n,s);if(r instanceof HTMLElement)return el(r,vo),el(r,t.class),bl(r,-10,-10,ve,G),S.insertBefore(r,Pe[s]),r}function Jt(t,s){if(a==1||s>0){let r=a==1&&E[t.scale].time,o=t.value;t.value=r?$i(o)?aa(K,ia(o,P)):o||fe:o||Au,t.label=t.label||(r?xu:wu)}if(Ye||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Hu||Po,t.fillTo=Ae(t.fillTo||Ru),t.pxAlign=+Fe(t.pxAlign,j),t.pxRound=ha(t.pxAlign),t.stroke=Ae(t.stroke||null),t.fill=Ae(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Cu(Yt(1,t.width),1),o=t.points=_t({},{size:r,width:Yt(1,r*.2),stroke:t.stroke,space:r*2,paths:Wu,_stroke:null,_fill:null},t.points);o.show=Ae(o.show),o.filter=Ae(o.filter),o.fill=Ae(o.fill),o.stroke=Ae(o.stroke),o.paths=Ae(o.paths),o.pxAlign=t.pxAlign}if(Ce){let r=gt(t,s);Ee.splice(s,0,r[0]),wt.splice(s,0,r[1]),ie.values.push(null)}if(Qe){me.splice(s,0,null);let r=null;Ye?s==0&&(r=El(t,s)):s>0&&(r=El(t,s)),Pe.splice(s,0,r),zt.splice(s,0,0),nl.splice(s,0,0)}Ft("addSeries",s)}function sl(t,s){s=s??b.length,t=a==1?Ys(t,s,oa,pa):Ys(t,s,{},da),b.splice(s,0,t),Jt(b[s],s)}n.addSeries=sl;function Zt(t){if(b.splice(t,1),Ce){ie.values.splice(t,1),wt.splice(t,1);let s=Ee.splice(t,1)[0];yt(null,s.firstChild),s.remove()}Qe&&(me.splice(t,1),Pe.splice(t,1)[0].remove(),zt.splice(t,1),nl.splice(t,1)),Ft("delSeries",t)}n.delSeries=Zt;const Bt=[!1,!1,!1,!1];function Fl(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=E[t.scale];o==null&&(t.scale=r?b[1].scale:D,o=E[t.scale]);let f=o.time;t.size=Ae(t.size),t.space=Ae(t.space),t.rotate=Ae(t.rotate),Pl(t.incrs)&&t.incrs.forEach(x=>{!Rl.has(x)&&Rl.set(x,Fa(x))}),t.incrs=Ae(t.incrs||(o.distr==2?eu:f?$==1?lu:iu:Vl)),t.splits=Ae(t.splits||(f&&o.distr==1?Te:o.distr==3?Bs:o.distr==4?Su:yu)),t.stroke=Ae(t.stroke),t.grid.stroke=Ae(t.grid.stroke),t.ticks.stroke=Ae(t.ticks.stroke),t.border.stroke=Ae(t.border.stroke);let g=t.values;t.values=Pl(g)&&!Pl(g[0])?Ae(g):f?Pl(g)?sa(K,na(g,P)):$i(g)?ou(K,g):g||he:g||bu,t.filter=Ae(t.filter||(o.distr>=3&&o.log==10?Eu:o.distr==3&&o.log==2?Mu:Pa)),t.font=wa(t.font),t.labelFont=wa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(Bt[s]=!0,t._el=rl(uo,_))}}function ul(t,s,r,o){let[f,g,x,k]=r,L=s%2,B=0;return L==0&&(k||g)&&(B=s==0&&!f||s==2&&!x?Tt(ra.size/3):0),L==1&&(f||x)&&(B=s==1&&!g||s==3&&!k?Tt(ca.size/2):0),B}const Ml=n.padding=(e.padding||[ul,ul,ul,ul]).map(t=>Ae(Fe(t,ul))),ut=n._padding=Ml.map((t,s)=>t(n,s,Bt,0));let vt,Dt=null,Lt=null;const Fn=a==1?b[0].idxs:null;let cl=null,pn=!1;function oi(t,s){if(l=t??[],n.data=n._data=l,a==2){vt=0;for(let r=1;r<b.length;r++)vt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),cl=l[0],vt=cl.length;let r=l;if(z==2){r=l.slice();let o=r[0]=Array(vt);for(let f=0;f<vt;f++)o[f]=f}n._data=l=r}if(ql(!0),Ft("setData"),z==2&&(re=!0),s!==!1){let r=w;r.auto(n,pn)?rs():Cl(D,r.min,r.max),oe=oe||H.left>=0,U=!0,Kl()}}n.setData=oi;function rs(){pn=!0;let t,s;a==1&&(vt>0?(Dt=Fn[0]=0,Lt=Fn[1]=vt-1,t=l[0][Dt],s=l[0][Lt],z==2?(t=Dt,s=Lt):t==s&&(z==3?[t,s]=es(t,t,w.log,!1):z==4?[t,s]=Qs(t,t,w.log,!1):w.time?s=t+Tt(86400/$):[t,s]=jn(t,s,Xs,!0))):(Dt=Fn[0]=t=null,Lt=Fn[1]=s=null)),Cl(D,t,s)}let On,Yl,os,us,cs,fs,ds,ps,vs,Kt;function ui(t,s,r,o,f,g){t??=Ni,r??=ei,o??="butt",f??=Ni,g??="round",t!=On&&(m.strokeStyle=On=t),f!=Yl&&(m.fillStyle=Yl=f),s!=os&&(m.lineWidth=os=s),g!=cs&&(m.lineJoin=cs=g),o!=fs&&(m.lineCap=fs=o),r!=us&&m.setLineDash(us=r)}function ci(t,s,r,o){s!=Yl&&(m.fillStyle=Yl=s),t!=ds&&(m.font=ds=t),r!=ps&&(m.textAlign=ps=r),o!=vs&&(m.textBaseline=vs=o)}function hs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,pn)&&(s==null||s.min==null)){let g=Fe(Dt,0),x=Fe(Lt,o.length-1),k=r.min==null?Eo(o,g,x,f,t.distr==3):[r.min,r.max];t.min=hl(t.min,r.min=k[0]),t.max=Yt(t.max,r.max=k[1])}}const fi={min:null,max:null};function dr(){for(let o in E){let f=E[o];M[o]==null&&(f.min==null||M[D]!=null&&f.auto(n,pn))&&(M[o]=fi)}for(let o in E){let f=E[o];M[o]==null&&f.from!=null&&M[f.from]!=null&&(M[o]=fi)}M[D]!=null&&ql(!0);let t={};for(let o in M){let f=M[o];if(f!=null){let g=t[o]=on(E[o],Oo);if(f.min!=null)_t(g,f);else if(o!=D||a==2)if(vt==0&&g.from==null){let x=g.range(n,null,null,o);g.min=x[0],g.max=x[1]}else g.min=Je,g.max=-Je}}if(vt>0){b.forEach((o,f)=>{if(a==1){let g=o.scale,x=M[g];if(x==null)return;let k=t[g];if(f==0){let L=k.range(n,k.min,k.max,g);k.min=L[0],k.max=L[1],Dt=vl(k.min,l[0]),Lt=vl(k.max,l[0]),Lt-Dt>1&&(l[0][Dt]<k.min&&Dt++,l[0][Lt]>k.max&&Lt--),o.min=cl[Dt],o.max=cl[Lt]}else o.show&&o.auto&&hs(k,x,o,l[f],o.sorted);o.idxs[0]=Dt,o.idxs[1]=Lt}else if(f>0&&o.show&&o.auto){let[g,x]=o.facets,k=g.scale,L=x.scale,[B,Y]=l[f],J=t[k],ge=t[L];J!=null&&hs(J,M[k],g,B,g.sorted),ge!=null&&hs(ge,M[L],x,Y,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],g=M[o];if(f.from==null&&(g==null||g.min==null)){let x=f.range(n,f.min==Je?null:f.min,f.max==-Je?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let g=t[f.from];if(g.min==null)f.min=f.max=null;else{let x=f.range(n,g.min,g.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],g=E[o];if(g.min!=f.min||g.max!=f.max){g.min=f.min,g.max=f.max;let x=g.distr;g._min=x==3?kl(g.min):x==4?Ls(g.min,g.asinh):x==100?g.fwd(g.min):g.min,g._max=x==3?kl(g.max):x==4?Ls(g.max,g.asinh):x==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){b.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)re=!0,Ft("setScale",o);Qe&&H.left>=0&&(oe=U=!0)}for(let o in M)M[o]=null}function pr(t){let s=Is(Dt-1,0,vt-1),r=Is(Lt+1,0,vt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<vt-1;)r++;return[s,r]}function vr(){if(vt>0){let t=b.some(s=>s._focus)&&Kt!=nt.alpha;t&&(m.globalAlpha=Kt=nt.alpha),b.forEach((s,r)=>{if(r>0&&s.show&&(di(r,!1),di(r,!0),s._paths==null)){let o=Kt;Kt!=s.alpha&&(m.globalAlpha=Kt=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Kt!=o&&(m.globalAlpha=Kt=o)}}),b.forEach((s,r)=>{if(r>0&&s.show){let o=Kt;Kt!=s.alpha&&(m.globalAlpha=Kt=s.alpha),s._paths!=null&&pi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,Dt,Lt,f),x=s.points.filter(n,r,g,f);(g||x)&&(s.points._paths=s.points.paths(n,r,Dt,Lt,x),pi(r,!0))}Kt!=o&&(m.globalAlpha=Kt=o),Ft("drawSeries",r)}}),t&&(m.globalAlpha=Kt=1)}}function di(t,s){let r=s?b[t].points:b[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function pi(t,s){let r=s?b[t].points:b[t],{stroke:o,fill:f,clip:g,flags:x,_stroke:k=r._stroke,_fill:L=r._fill,_width:B=r.width}=r._paths;B=Ze(B*Ge,3);let Y=null,J=B%2/2;s&&L==null&&(L=B>0?"#fff":k);let ge=r.pxAlign==1&&J>0;if(ge&&m.translate(J,J),!s){let Ne=rt-B/2,Re=kt-B/2,ke=R+B,pe=W+B;Y=new Path2D,Y.rect(Ne,Re,ke,pe)}s?gs(k,B,r.dash,r.cap,L,o,f,x,g):hr(t,k,B,r.dash,r.cap,L,o,f,x,Y,g),ge&&m.translate(-J,-J)}function hr(t,s,r,o,f,g,x,k,L,B,Y){let J=!1;L!=0&&C.forEach((ge,Ne)=>{if(ge.series[0]==t){let Re=b[ge.series[1]],ke=l[ge.series[1]],pe=(Re._paths||An).band;Pl(pe)&&(pe=ge.dir==1?pe[0]:pe[1]);let ae,tt=null;Re.show&&pe&&Ao(ke,Dt,Lt)?(tt=ge.fill(n,Ne)||g,ae=Re._paths.clip):pe=null,gs(s,r,o,f,tt,x,k,L,B,Y,ae,pe),J=!0}}),J||gs(s,r,o,f,g,x,k,L,B,Y)}const vi=un|Ws;function gs(t,s,r,o,f,g,x,k,L,B,Y,J){ui(t,s,r,o,f),(L||B||J)&&(m.save(),L&&m.clip(L),B&&m.clip(B)),J?(k&vi)==vi?(m.clip(J),Y&&m.clip(Y),Gn(f,x),Nn(t,g,s)):k&Ws?(Gn(f,x),m.clip(J),Nn(t,g,s)):k&un&&(m.save(),m.clip(J),Y&&m.clip(Y),Gn(f,x),m.restore(),Nn(t,g,s)):(Gn(f,x),Nn(t,g,s)),(L||B||J)&&m.restore()}function Nn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=On=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function Gn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Yl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function gr(t,s,r,o){let f=Z[t],g;if(o<=0)g=[0,0];else{let x=f._space=f.space(n,t,s,r,o),k=f._incrs=f.incrs(n,t,s,r,o,x);g=Ju(s,r,k,o,x)}return f._found=g}function ms(t,s,r,o,f,g,x,k,L,B){let Y=x%2/2;j==1&&m.translate(Y,Y),ui(k,x,L,B,k),m.beginPath();let J,ge,Ne,Re,ke=f+(o==0||o==3?-g:g);r==0?(ge=f,Re=ke):(J=f,Ne=ke);for(let pe=0;pe<t.length;pe++)s[pe]!=null&&(r==0?J=Ne=t[pe]:ge=Re=t[pe],m.moveTo(J,ge),m.lineTo(Ne,Re));m.stroke(),j==1&&m.translate(-Y,-Y)}function mr(t){let s=!0;return Z.forEach((r,o)=>{if(!r.show)return;let f=E[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,ql(!1));return}else r._show||(s=!1,r._show=!0,ql(!1));let g=r.side,x=g%2,{min:k,max:L}=f,[B,Y]=gr(o,k,L,x==0?ve:G);if(Y==0)return;let J=f.distr==2,ge=r._splits=r.splits(n,o,k,L,B,Y,J),Ne=f.distr==2?ge.map(ae=>cl[ae]):ge,Re=f.distr==2?cl[ge[1]]-cl[ge[0]]:B,ke=r._values=r.values(n,r.filter(n,Ne,o,Y,Re),o,Y,Re);r._rotate=g==2?r.rotate(n,ke,o,Y):0;let pe=r._size;r._size=ol(r.size(n,ke,o,t)),pe!=null&&r._size!=pe&&(s=!1)}),s}function _r(t){let s=!0;return Ml.forEach((r,o)=>{let f=r(n,o,Bt,t);f!=ut[o]&&(s=!1),ut[o]=f}),s}function wr(){for(let t=0;t<Z.length;t++){let s=Z[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,g,x=s.stroke(n,t),k=r==0||r==3?-1:1,[L,B]=s._found;if(s.label!=null){let Wt=s.labelGap*k,$t=Tt((s._lpos+Wt)*Ge);ci(s.labelFont[0],x,"center",r==2?xn:Oi),m.save(),o==1?(f=g=0,m.translate($t,Tt(kt+W/2)),m.rotate((r==3?-Yn:Yn)/2)):(f=Tt(rt+R/2),g=$t);let Gl=Da(s.label)?s.label(n,t,L,B):s.label;m.fillText(Gl,f,g),m.restore()}if(B==0)continue;let Y=E[s.scale],J=o==0?R:W,ge=o==0?rt:kt,Ne=s._splits,Re=Y.distr==2?Ne.map(Wt=>cl[Wt]):Ne,ke=Y.distr==2?cl[Ne[1]]-cl[Ne[0]]:L,pe=s.ticks,ae=s.border,tt=pe.show?pe.size:0,ct=Tt(tt*Ge),Ot=Tt((s.alignTo==2?s._size-tt-s.gap:s.gap)*Ge),qe=s._rotate*-Yn/180,ft=Q(s._pos*Ge),Qt=(ct+Ot)*k,Ht=ft+Qt;g=o==0?Ht:0,f=o==1?Ht:0;let il=s.font[0],fl=s.align==1?tn:s.align==2?As:qe>0?tn:qe<0?As:o==0?"center":r==3?As:tn,wl=qe||o==1?"middle":r==2?xn:Oi;ci(il,x,fl,wl);let Xt=s.font[1]*s.lineGap,al=Ne.map(Wt=>Q(p(Wt,Y,J,ge))),dl=s._values;for(let Wt=0;Wt<dl.length;Wt++){let $t=dl[Wt];if($t!=null){o==0?f=al[Wt]:g=al[Wt],$t=""+$t;let Gl=$t.indexOf(`
`)==-1?[$t]:$t.split(/\n/gm);for(let Ut=0;Ut<Gl.length;Ut++){let Ri=Gl[Ut];qe?(m.save(),m.translate(f,g+Ut*Xt),m.rotate(qe),m.fillText(Ri,0,0),m.restore()):m.fillText(Ri,f,g+Ut*Xt)}}}pe.show&&ms(al,pe.filter(n,Re,t,B,ke),o,r,ft,ct,Ze(pe.width*Ge,3),pe.stroke(n,t),pe.dash,pe.cap);let xl=s.grid;xl.show&&ms(al,xl.filter(n,Re,t,B,ke),o,o==0?2:1,o==0?kt:rt,o==0?W:R,Ze(xl.width*Ge,3),xl.stroke(n,t),xl.dash,xl.cap),ae.show&&ms([ft],[1],o==0?1:0,o==0?1:2,o==1?kt:rt,o==1?W:R,Ze(ae.width*Ge,3),ae.stroke(n,t),ae.dash,ae.cap)}Ft("drawAxes")}function ql(t){b.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let zn=!1,_s=!1,vn=[];function xr(){_s=!1;for(let t=0;t<vn.length;t++)Ft(...vn[t]);vn.length=0}function Kl(){zn||(Ho(hi),zn=!0)}function br(t,s=!1){zn=!0,_s=s,t(n),hi(),s&&vn.length>0&&queueMicrotask(xr)}n.batch=br;function hi(){if(se&&(dr(),se=!1),re&&(ue(),re=!1),ce){if(lt(O,tn,Me),lt(O,xn,Ue),lt(O,yn,ve),lt(O,Sn,G),lt(S,tn,Me),lt(S,xn,Ue),lt(S,yn,ve),lt(S,Sn,G),lt(_,yn,Nt),lt(_,Sn,St),y.width=Tt(Nt*Ge),y.height=Tt(St*Ge),Z.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let g=f===3||f===0?r:0,x=f%2==1;lt(t,x?"left":"top",o-g),lt(t,x?"width":"height",r),lt(t,x?"top":"left",x?Ue:Me),lt(t,x?"height":"width",x?G:ve),zs(t,Il)}else el(t,Il)}),On=Yl=os=cs=fs=ds=ps=vs=us=null,Kt=1,mn(!0),Me!=qt||Ue!=jt||ve!=Gt||G!=It){ql(!1);let t=ve/Gt,s=G/It;if(Qe&&!oe&&H.left>=0){H.left*=t,H.top*=s,jl&&bl(jl,Tt(H.left),0,ve,G),Jl&&bl(Jl,0,Tt(H.top),ve,G);for(let r=0;r<Pe.length;r++){let o=Pe[r];o!=null&&(zt[r]*=t,nl[r]*=s,bl(o,ol(zt[r]),ol(nl[r]),ve,G))}}if(et.show&&!V&&et.left>=0&&et.width>0){et.left*=t,et.width*=t,et.top*=s,et.height*=s;for(let r in ks)lt(Xl,r,et[r])}qt=Me,jt=Ue,Gt=ve,It=G}Ft("setSize"),ce=!1}Nt>0&&St>0&&(m.clearRect(0,0,y.width,y.height),Ft("drawClear"),ee.forEach(t=>t()),Ft("draw")),et.show&&V&&(Vn(et),V=!1),Qe&&oe&&(Nl(null,!0,!1),oe=!1),ie.show&&ie.live&&U&&(ys(),U=!1),v||(v=!0,n.status=1,Ft("ready")),pn=!1,zn=!1}n.redraw=(t,s)=>{re=s||!1,t!==!1?Cl(D,w.min,w.max):Kl()};function ws(t,s){let r=E[t];if(r.from==null){if(vt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(vt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==D&&r.distr==2&&vt>0&&(s.min=vl(s.min,l[0]),s.max=vl(s.max,l[0]),s.min==s.max&&s.max++),M[t]=s,se=!0,Kl()}}n.setScale=ws;let xs,bs,jl,Jl,gi,mi,Zl,Ql,_i,wi,$e,st,Al=!1;const Vt=H.drag;let Pt=Vt.x,Rt=Vt.y;Qe&&(H.x&&(xs=rl(fo,S)),H.y&&(bs=rl(po,S)),w.ori==0?(jl=xs,Jl=bs):(jl=bs,Jl=xs),$e=H.left,st=H.top);const et=n.select=_t({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Xl=et.show?rl(co,et.over?S:O):null;function Vn(t,s){if(et.show){for(let r in t)et[r]=t[r],r in ks&&lt(Xl,r,t[r]);s!==!1&&Ft("setSelect")}}n.setSelect=Vn;function yr(t){if(b[t].show)Ce&&zs(Ee[t],Il);else if(Ce&&el(Ee[t],Il),Qe){let r=Ye?Pe[0]:Pe[t];r!=null&&bl(r,-10,-10,ve,G)}}function Cl(t,s,r){ws(t,{min:s,max:r})}function ml(t,s,r,o){s.focus!=null&&Mr(t),s.show!=null&&b.forEach((f,g)=>{g>0&&(t==g||t==null)&&(f.show=s.show,yr(g),a==2?(Cl(f.facets[0].scale,null,null),Cl(f.facets[1].scale,null,null)):Cl(f.scale,null,null),Kl())}),r!==!1&&Ft("setSeries",t,s),o&&_n("setSeries",n,t,s)}n.setSeries=ml;function Sr(t,s){_t(C[t],s)}function kr(t,s){t.fill=Ae(t.fill||null),t.dir=Fe(t.dir,-1),s=s??C.length,C.splice(s,0,t)}function Tr(t){t==null?C.length=0:C.splice(t,1)}n.addBand=kr,n.setBand=Sr,n.delBand=Tr;function Er(t,s){b[t].alpha=s,Qe&&Pe[t]!=null&&(Pe[t].style.opacity=s),Ce&&Ee[t]&&(Ee[t].style.opacity=s)}let yl,Dl,Ol;const $l={focus:!0};function Mr(t){if(t!=Ol){let s=t==null,r=nt.alpha!=1;b.forEach((o,f)=>{if(a==1||f>0){let g=s||f==0||f==t;o._focus=s?null:g,r&&Er(f,g?1:nt.alpha)}}),Ol=t,r&&Kl()}}Ce&&Le&&We(Vi,_e,t=>{H._lock||(je(t),Ol!=null&&ml(null,$l,!0,mt.setSeries))});function _l(t,s,r){let o=E[s];r&&(t=t/Ge-(o.ori==1?Ue:Me));let f=ve;o.ori==1&&(f=G,t=f-t),o.dir==-1&&(t=f-t);let g=o._min,x=o._max,k=t/f,L=g+(x-g)*k,B=o.distr;return B==3?an(10,L):B==4?Do(L,o.asinh):B==100?o.bwd(L):L}function Ar(t,s){let r=_l(t,D,s);return vl(r,l[0],Dt,Lt)}n.valToIdx=t=>vl(t,l[0]),n.posToIdx=Ar,n.posToVal=_l,n.valToPos=(t,s,r)=>E[s].ori==0?c(t,E[s],r?R:ve,r?rt:0):u(t,E[s],r?W:G,r?kt:0),n.setCursor=(t,s,r)=>{$e=t.left,st=t.top,Nl(null,s,r)};function xi(t,s){lt(Xl,tn,et.left=t),lt(Xl,yn,et.width=s)}function bi(t,s){lt(Xl,xn,et.top=t),lt(Xl,Sn,et.height=s)}let hn=w.ori==0?xi:bi,gn=w.ori==1?xi:bi;function Cr(){if(Ce&&ie.live)for(let t=a==2?1:0;t<b.length;t++){if(t==0&&Ke)continue;let s=ie.values[t],r=0;for(let o in s)wt[t][r++].firstChild.nodeValue=s[o]}}function ys(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{me[o]=r}):Fo(t.idx)||me.fill(t.idx),ie.idx=me[0]),Ce&&ie.live){for(let r=0;r<b.length;r++)(r>0||a==1&&!Ke)&&Dr(r,me[r]);Cr()}U=!1,s!==!1&&Ft("setLegend")}n.setLegend=ys;function Dr(t,s){let r=b[t],o=t==0&&z==2?cl:l[t],f;Ke?f=r.values(n,t,s)??Xe:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?Xe:{_:f}),ie.values[t]=f}function Nl(t,s,r){_i=$e,wi=st,[$e,st]=H.move(n,$e,st),H.left=$e,H.top=st,Qe&&(jl&&bl(jl,Tt($e),0,ve,G),Jl&&bl(Jl,0,Tt(st),ve,G));let o,f=Dt>Lt;yl=Je,Dl=null;let g=w.ori==0?ve:G,x=w.ori==1?ve:G;if($e<0||vt==0||f){o=H.idx=null;for(let k=0;k<b.length;k++){let L=Pe[k];L!=null&&bl(L,-10,-10,ve,G)}Le&&ml(null,$l,!0,t==null&&mt.setSeries),ie.live&&(me.fill(o),U=!0)}else{let k,L,B;a==1&&(k=w.ori==0?$e:st,L=_l(k,D),o=H.idx=vl(L,l[0],Dt,Lt),B=N(l[0][o],w,g,0));let Y=-10,J=-10,ge=0,Ne=0,Re=!0,ke="",pe="";for(let ae=a==2?1:0;ae<b.length;ae++){let tt=b[ae],ct=me[ae],Ot=ct==null?null:a==1?l[ae][ct]:l[ae][1][ct],qe=H.dataIdx(n,ae,o,L),ft=qe==null?null:a==1?l[ae][qe]:l[ae][1][qe];if(U=U||ft!=Ot||qe!=ct,me[ae]=qe,ae>0&&tt.show){let Qt=qe==null?-10:qe==o?B:N(a==1?l[0][qe]:l[ae][0][qe],w,g,0),Ht=ft==null?-10:X(ft,a==1?E[tt.scale]:E[tt.facets[1].scale],x,0);if(Le&&ft!=null){let il=w.ori==1?$e:st,fl=Et(nt.dist(n,ae,qe,Ht,il));if(fl<yl){let wl=nt.bias;if(wl!=0){let Xt=_l(il,tt.scale),al=ft>=0?1:-1,dl=Xt>=0?1:-1;dl==al&&(dl==1?wl==1?ft>=Xt:ft<=Xt:wl==1?ft<=Xt:ft>=Xt)&&(yl=fl,Dl=ae)}else yl=fl,Dl=ae}}if(U||Ye){let il,fl;w.ori==0?(il=Qt,fl=Ht):(il=Ht,fl=Qt);let wl,Xt,al,dl,xl,Wt,$t=!0,Gl=ze.bbox;if(Gl!=null){$t=!1;let Ut=Gl(n,ae);al=Ut.left,dl=Ut.top,wl=Ut.width,Xt=Ut.height}else al=il,dl=fl,wl=Xt=ze.size(n,ae);if(Wt=ze.fill(n,ae),xl=ze.stroke(n,ae),Ye)ae==Dl&&yl<=nt.prox&&(Y=al,J=dl,ge=wl,Ne=Xt,Re=$t,ke=Wt,pe=xl);else{let Ut=Pe[ae];Ut!=null&&(zt[ae]=al,nl[ae]=dl,qi(Ut,wl,Xt,$t),Ui(Ut,Wt,xl),bl(Ut,ol(al),ol(dl),ve,G))}}}}if(Ye){let ae=nt.prox,tt=Ol==null?yl<=ae:yl>ae||Dl!=Ol;if(U||tt){let ct=Pe[0];ct!=null&&(zt[0]=Y,nl[0]=J,qi(ct,ge,Ne,Re),Ui(ct,ke,pe),bl(ct,ol(Y),ol(J),ve,G))}}}if(et.show&&Al)if(t!=null){let[k,L]=mt.scales,[B,Y]=mt.match,[J,ge]=t.cursor.sync.scales,Ne=t.cursor.drag;if(Pt=Ne._x,Rt=Ne._y,Pt||Rt){let{left:Re,top:ke,width:pe,height:ae}=t.select,tt=t.scales[J].ori,ct=t.posToVal,Ot,qe,ft,Qt,Ht,il=k!=null&&B(k,J),fl=L!=null&&Y(L,ge);il&&Pt?(tt==0?(Ot=Re,qe=pe):(Ot=ke,qe=ae),ft=E[k],Qt=N(ct(Ot,J),ft,g,0),Ht=N(ct(Ot+qe,J),ft,g,0),hn(hl(Qt,Ht),Et(Ht-Qt))):hn(0,g),fl&&Rt?(tt==1?(Ot=Re,qe=pe):(Ot=ke,qe=ae),ft=E[L],Qt=X(ct(Ot,ge),ft,x,0),Ht=X(ct(Ot+qe,ge),ft,x,0),gn(hl(Qt,Ht),Et(Ht-Qt))):gn(0,x)}else Ts()}else{let k=Et(_i-gi),L=Et(wi-mi);if(w.ori==1){let ge=k;k=L,L=ge}Pt=Vt.x&&k>=Vt.dist,Rt=Vt.y&&L>=Vt.dist;let B=Vt.uni;B!=null?Pt&&Rt&&(Pt=k>=B,Rt=L>=B,!Pt&&!Rt&&(L>k?Rt=!0:Pt=!0)):Vt.x&&Vt.y&&(Pt||Rt)&&(Pt=Rt=!0);let Y,J;Pt&&(w.ori==0?(Y=Zl,J=$e):(Y=Ql,J=st),hn(hl(Y,J),Et(J-Y)),Rt||gn(0,x)),Rt&&(w.ori==1?(Y=Zl,J=$e):(Y=Ql,J=st),gn(hl(Y,J),Et(J-Y)),Pt||hn(0,g)),!Pt&&!Rt&&(hn(0,0),gn(0,0))}if(Vt._x=Pt,Vt._y=Rt,t==null){if(r){if(Pi!=null){let[k,L]=mt.scales;mt.values[0]=k!=null?_l(w.ori==0?$e:st,k):null,mt.values[1]=L!=null?_l(w.ori==1?$e:st,L):null}_n(Cs,n,$e,st,ve,G,o)}if(Le){let k=r&&mt.setSeries,L=nt.prox;Ol==null?yl<=L&&ml(Dl,$l,!0,k):yl>L?ml(null,$l,!0,k):Dl!=Ol&&ml(Dl,$l,!0,k)}}U&&(ie.idx=o,ys()),s!==!1&&Ft("setCursor")}let Ll=null;Object.defineProperty(n,"rect",{get(){return Ll==null&&mn(!1),Ll}});function mn(t=!1){t?Ll=null:(Ll=S.getBoundingClientRect(),Ft("syncRect",Ll))}function yi(t,s,r,o,f,g,x){H._lock||Al&&t!=null&&t.movementX==0&&t.movementY==0||(Ss(t,s,r,o,f,g,x,!1,t!=null),t!=null?Nl(null,!0,!0):Nl(s,!0,!1))}function Ss(t,s,r,o,f,g,x,k,L){if(Ll==null&&mn(!1),je(t),t!=null)r=t.clientX-Ll.left,o=t.clientY-Ll.top;else{if(r<0||o<0){$e=-10,st=-10;return}let[B,Y]=mt.scales,J=s.cursor.sync,[ge,Ne]=J.values,[Re,ke]=J.scales,[pe,ae]=mt.match,tt=s.axes[0].side%2==1,ct=w.ori==0?ve:G,Ot=w.ori==1?ve:G,qe=tt?g:f,ft=tt?f:g,Qt=tt?o:r,Ht=tt?r:o;if(Re!=null?r=pe(B,Re)?p(ge,E[B],ct,0):-10:r=ct*(Qt/qe),ke!=null?o=ae(Y,ke)?p(Ne,E[Y],Ot,0):-10:o=Ot*(Ht/ft),w.ori==1){let il=r;r=o,o=il}}L&&(s==null||s.cursor.event.type==Cs)&&((r<=1||r>=ve-1)&&(r=zl(r,ve)),(o<=1||o>=G-1)&&(o=zl(o,G))),k?(gi=r,mi=o,[Zl,Ql]=H.move(n,r,o)):($e=r,st=o)}const ks={width:0,height:0,left:0,top:0};function Ts(){Vn(ks,!1)}let Si,ki,Ti,Ei;function Mi(t,s,r,o,f,g,x){Al=!0,Pt=Rt=Vt._x=Vt._y=!1,Ss(t,s,r,o,f,g,x,!0,!1),t!=null&&(We(Ds,Ns,Ai,!1),_n(Gi,n,Zl,Ql,ve,G,null));let{left:k,top:L,width:B,height:Y}=et;Si=k,ki=L,Ti=B,Ei=Y}function Ai(t,s,r,o,f,g,x){Al=Vt._x=Vt._y=!1,Ss(t,s,r,o,f,g,x,!1,!0);let{left:k,top:L,width:B,height:Y}=et,J=B>0||Y>0,ge=Si!=k||ki!=L||Ti!=B||Ei!=Y;if(J&&ge&&Vn(et),Vt.setScale&&J&&ge){let Ne=k,Re=B,ke=L,pe=Y;if(w.ori==1&&(Ne=L,Re=Y,ke=k,pe=B),Pt&&Cl(D,_l(Ne,D),_l(Ne+Re,D)),Rt)for(let ae in E){let tt=E[ae];ae!=D&&tt.from==null&&tt.min!=Je&&Cl(ae,_l(ke+pe,ae),_l(ke,ae))}Ts()}else H.lock&&(H._lock=!H._lock,Nl(s,!0,t!=null));t!=null&&(yt(Ds,Ns),_n(Ds,n,$e,st,ve,G,null))}function Lr(t,s,r,o,f,g,x){if(H._lock)return;je(t);let k=Al;if(Al){let L=!0,B=!0,Y=10,J,ge;w.ori==0?(J=Pt,ge=Rt):(J=Rt,ge=Pt),J&&ge&&(L=$e<=Y||$e>=ve-Y,B=st<=Y||st>=G-Y),J&&L&&($e=$e<Zl?0:ve),ge&&B&&(st=st<Ql?0:G),Nl(null,!0,!0),Al=!1}$e=-10,st=-10,me.fill(null),Nl(null,!0,!0),k&&(Al=k)}function Ci(t,s,r,o,f,g,x){H._lock||(je(t),rs(),Ts(),t!=null&&_n(Ii,n,$e,st,ve,G,null))}function Di(){Z.forEach(Zu),Oe(n.width,n.height,!0)}Hl(Kn,sn,Di);const en={};en.mousedown=Mi,en.mousemove=yi,en.mouseup=Ai,en.dblclick=Ci,en.setSeries=(t,s,r,o)=>{let f=mt.match[2];r=f(n,s,r),r!=-1&&ml(r,o,!0,!1)},Qe&&(We(Gi,S,Mi),We(Cs,S,yi),We(zi,S,t=>{je(t),mn(!1)}),We(Vi,S,Lr),We(Ii,S,Ci),Us.add(n),n.syncRect=mn);const In=n.hooks=e.hooks||{};function Ft(t,s,r){_s?vn.push([t,s,r]):t in In&&In[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)In[s]=(In[s]||[]).concat(t.hooks[s])});const Li=(t,s,r)=>r,mt=_t({key:null,setSeries:!1,filters:{pub:Qi,sub:Qi},scales:[D,b[1]?b[1].scale:null],match:[Xi,Xi,Li],values:[null,null]},H.sync);mt.match.length==2&&mt.match.push(Li),H.sync=mt;const Pi=mt.key,Es=er(Pi);function _n(t,s,r,o,f,g,x){mt.filters.pub(t,s,r,o,f,g,x)&&Es.pub(t,s,r,o,f,g,x)}Es.sub(n);function Pr(t,s,r,o,f,g,x){mt.filters.sub(t,s,r,o,f,g,x)&&en[t](null,s,r,o,f,g,x)}n.pub=Pr;function Rr(){Es.unsub(n),Us.delete(n),bt.clear(),Vs(Kn,sn,Di),h.remove(),_e?.remove(),Ft("destroy")}n.destroy=Rr;function Ms(){Ft("init",e,l),oi(l||e.data,!1),M[D]?ws(D,M[D]):rs(),V=et.show&&(et.width>0||et.height>0),oe=U=!0,Oe(e.width,e.height)}return b.forEach(Jt),Z.forEach(Fl),i?i instanceof HTMLElement?(i.appendChild(h),Ms()):i(n,Ms):Ms(),n}Mt.assign=_t;Mt.fmtNum=$s;Mt.rangeNum=jn;Mt.rangeLog=es;Mt.rangeAsinh=Qs;Mt.orient=Ul;Mt.pxRatio=Ge;Mt.join=Bo;Mt.fmtDate=ti,Mt.tzDate=Xo;Mt.sync=er;{Mt.addGap=Fu,Mt.clipGaps=ns;let e=Mt.paths={points:ar};e.linear=or,e.stepped=Gu,e.bars=zu,e.spline=Iu}var Qu=De('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=De('<span class="estimated-badge svelte-3wi8ix">est</span>'),$u=De('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),ec=De('<span class="estimated-badge svelte-3wi8ix">est</span>'),tc=De("<span> </span> <!>",1),lc=De('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),nc=De('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),sc=De('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function ic(e,l){Qn(l,!0);const i=.5,n=1.2,a=0,c=100;function u(w,z){const N=[...w].sort((P,Te)=>P-Te),X=z/100*(N.length-1),M=Math.floor(X),K=Math.ceil(X);return M===K?N[M]:N[M]+(N[K]-N[M])*(X-M)}let p=Pn(l,"trend",3,null),v=He(!1),h=He(""),y=He(null),m=Be(()=>Un.config.temp_units==="C"),_=Be(Ta),O=Be(Ks),S=Be(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(xe=>xe.status!=="invalid");if(w.length===0)return null;const z=[...w].sort((xe,pt)=>new Date(xe.timestamp).getTime()-new Date(pt.timestamp).getTime()),N=z[0],X=z[z.length-1],M=z.map(xe=>xe.sg_calibrated??xe.sg_raw).filter(xe=>xe!==null&&xe>=i&&xe<=n),K=z.map(xe=>xe.temp_calibrated??xe.temp_raw).filter(xe=>xe!==null&&xe>=a&&xe<=c);if(M.length===0)return null;const P=M[M.length-1],Te=M[0],he=u(M,95),fe=u(M,5),me=new Date(N.timestamp).getTime(),ie=new Date(X.timestamp).getTime(),Ce=(ie-me)/(1e3*60*60*24),Qe=Ce>0?(P-Te)/Ce:0;let ye=null,_e=null,at=null,Ie=null;if(K.length>0){const xe=K[K.length-1],pt=K.reduce((We,yt)=>We+yt,0)/K.length,gt=u(K,95),bt=u(K,5);ye=d(m)?xe:xe*9/5+32,_e=d(m)?pt:pt*9/5+32,at=d(m)?gt:gt*9/5+32,Ie=d(m)?bt:bt*9/5+32}let Ee=0;const wt=.001;for(let xe=M.length-2;xe>=0;xe--)if(Math.abs(M[xe]-P)>wt){const pt=new Date(z[xe+1].timestamp).getTime();Ee=(ie-pt)/(1e3*60*60*24);break}let ht=null,Ke=null;const Xe=l.originalGravity??he,xt=l.originalGravity===null;return Xe>1&&Xe>P&&(ht=(Xe-P)/(Xe-1)*100,Ke=(Xe-P)*131.25),{currentSg:P,firstSg:Te,highSg:he,lowSg:fe,currentTemp:ye,avgTemp:_e,highTemp:at,lowTemp:Ie,fermRate:Qe,durationDays:Ce,daysAtCurrentSg:Ee,apparentAttenuation:ht,abv:Ke,ogIsEstimated:xt,effectiveOg:Xe}});function j(){de(h,l.originalGravity?.toFixed(3)??"",!0),de(v,!0),setTimeout(()=>d(y)?.focus(),0)}function Q(){const w=d(h).trim();if(!w)l.onOgChange?.(null);else{const z=parseFloat(w);!isNaN(z)&&z>=.99&&z<=1.2&&l.onOgChange?.(z)}de(v,!1)}function $(w){w.key==="Enter"?Q():w.key==="Escape"&&de(v,!1)}function b(w){return En(w)}function Z(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function E(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function C(w){return w===null?"--":w.toFixed(1)}function D(w){return w===null?"--":`${w.toFixed(1)}%`}var ne=Cn(),ee=Sl(ne);{var q=w=>{var z=nc(),N=A(z),X=A(N),M=A(X),K=A(M,!0);T(M);var P=I(M,2),Te=I(A(P),2),he=A(Te,!0);T(Te),T(P);var fe=I(P,2),me=I(A(fe),2),ie=A(me,!0);T(me),T(fe);var H=I(fe,2),Ce=I(A(H),2),Qe=A(Ce,!0);T(Ce),T(H);var ye=I(H,2),_e=I(A(ye),2),at=A(_e,!0);T(_e),T(ye),T(X);var Ie=I(X,2),Ee=I(A(Ie),2),wt=I(A(Ee),2),ht=A(wt,!0),Ke=I(ht),Xe=A(Ke,!0);T(Ke),T(wt),T(Ee);var xt=I(Ee,2),xe=I(A(xt),2),pt=A(xe,!0),gt=I(pt),bt=A(gt,!0);T(gt),T(xe),T(xt);var We=I(xt,2),yt=I(A(We),2),Nt=A(yt,!0),St=I(Nt),ve=A(St,!0);T(St),T(yt),T(We);var G=I(We,2),Me=I(A(G),2),Ue=A(Me,!0),qt=I(Ue),jt=A(qt,!0);T(qt),T(Me),T(G),T(Ie),T(N);var Gt=I(N,2),It=A(Gt),rt=I(A(It),2);let kt;var R=A(rt);T(rt),T(It);var W=I(It,2),se=I(A(W),2),ce=A(se,!0);T(se),T(W);var re=I(W,2),oe=I(A(re),2),V=A(oe,!0);T(oe),T(re);var U=I(re,2),Oe=I(A(U),2);{var F=Ye=>{var Pe=Qu();Sa(Pe),Pe.__keydown=$,qs(Pe,zt=>de(y,zt),()=>d(y)),xa("blur",Pe,Q),ka(Pe,()=>d(h),zt=>de(h,zt)),be(Ye,Pe)},le=Ye=>{var Pe=Cn(),zt=Sl(Pe);{var nl=Jt=>{var sl=$u();sl.__click=j;var Zt=A(sl);let Bt;var Fl=A(Zt,!0);T(Zt);var ul=I(Zt,2);{var Ml=ut=>{var vt=Xu();be(ut,vt)};it(ul,ut=>{d(S).ogIsEstimated&&ut(Ml)})}Bl(2),T(sl),dt(ut=>{nn(sl,"title",d(S).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Bt=gl(Zt,1,"stat-value svelte-3wi8ix",null,Bt,{estimated:d(S).ogIsEstimated}),we(Fl,ut)},[()=>b(d(S).effectiveOg)]),be(Jt,sl)},El=Jt=>{var sl=tc(),Zt=Sl(sl);let Bt;var Fl=A(Zt,!0);T(Zt);var ul=I(Zt,2);{var Ml=ut=>{var vt=ec();be(ut,vt)};it(ul,ut=>{d(S).ogIsEstimated&&ut(Ml)})}dt(ut=>{Bt=gl(Zt,1,"stat-value svelte-3wi8ix",null,Bt,{estimated:d(S).ogIsEstimated}),we(Fl,ut)},[()=>b(d(S).effectiveOg)]),be(Jt,sl)};it(zt,Jt=>{l.onOgChange?Jt(nl):Jt(El,!1)},!0)}be(Ye,Pe)};it(Oe,Ye=>{l.onOgChange&&d(v)?Ye(F):Ye(le,!1)})}T(U);var ue=I(U,2),Se=I(A(ue),2),ot=A(Se,!0);T(Se),T(ue);var Ct=I(ue,2),je=I(A(Ct),2),ze=A(je,!0);T(je),T(Ct);var nt=I(Ct,2);{var Le=Ye=>{var Pe=lc(),zt=I(A(Pe),2),nl=A(zt,!0);T(zt),Bl(2),T(Pe),dt((El,Jt)=>{nn(Pe,"title",`Estimated time until target FG (R=${El??""})`),we(nl,Jt)},[()=>p().r2.toFixed(2),()=>E(p().daysToFg)]),be(Ye,Pe)};it(nt,Ye=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&Ye(Le)})}T(Gt),T(z),dt((Ye,Pe,zt,nl,El,Jt,sl,Zt,Bt,Fl,ul,Ml,ut)=>{we(K,d(O)==="SG"?"Gravity":d(O)==="P"?"Plato":"Brix"),we(he,Ye),we(ie,Pe),we(Qe,zt),we(at,nl),we(ht,El),we(Xe,d(_)),we(pt,Jt),we(bt,d(_)),we(Nt,sl),we(ve,d(_)),we(Ue,Zt),we(jt,d(_)),kt=gl(rt,1,"stat-value rate svelte-3wi8ix",null,kt,{fermenting:d(S).fermRate<0}),we(R,`${Bt??""}/day`),we(ce,Fl),we(V,ul),we(ot,Ml),we(ze,ut)},[()=>b(d(S).currentSg),()=>b(d(S).firstSg),()=>b(d(S).highSg),()=>b(d(S).lowSg),()=>C(d(S).currentTemp),()=>C(d(S).avgTemp),()=>C(d(S).highTemp),()=>C(d(S).lowTemp),()=>Z(d(S).fermRate),()=>E(d(S).durationDays),()=>E(d(S).daysAtCurrentSg),()=>D(d(S).apparentAttenuation),()=>D(d(S).abv)]),be(w,z)},te=w=>{var z=sc();be(w,z)};it(ee,w=>{d(S)?w(q):w(te,!1)})}be(e,ne),Xn()}Zn(["keydown","click"]);var ac=De('<button type="button"> </button>'),rc=De("<option> </option>"),oc=De('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),uc=De('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),cc=De('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),fc=De('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function dc(e,l){Qn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Be(()=>Un.config.smoothing_enabled),c=Be(()=>Un.config.smoothing_samples),u=He("UTC"),p=He(0),v=He(3),h=Pn(l,"deviceColor",3,"BLACK"),y=Pn(l,"originalGravity",3,null),m=Be(()=>Un.config.temp_units==="C"),_=Be(Ks),O,S=null,j=He(!0),Q=He(null),$=He(24),b=He(Dn([])),Z=He(Dn([])),E=He(null),C=He(null);const D={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},ne="#facc15",ee="rgba(250, 204, 21, 0.3)",q="#71717a",te="#a1a1aa",w="rgba(255, 255, 255, 0.04)",z="#22d3ee",N="rgba(250, 204, 21, 0.5)",X="brewsignal_chart_trend_enabled";let M=He(!0);function K(R,W,se=1.01){const ce=[];for(let Le=0;Le<R.length;Le++)W[Le]!==null&&ce.push([R[Le],W[Le]]);if(ce.length<10)return null;const re=ce.length;let oe=0,V=0,U=0,Oe=0;for(const[Le,Ye]of ce)oe+=Le,V+=Ye,U+=Le*Ye,Oe+=Le*Le;const F=re*Oe-oe*oe;if(Math.abs(F)<1e-10)return null;const le=(re*U-oe*V)/F,ue=(V-le*oe)/re,Se=V/re;let ot=0,Ct=0;for(const[Le,Ye]of ce){const Pe=le*Le+ue;ot+=(Ye-Pe)**2,Ct+=(Ye-Se)**2}const je=Ct>0?1-ot/Ct:0;let ze=null,nt=null;if(le<0&&je>.3){const Le=R[R.length-1],Ye=(se-ue)/le;Ye>Le&&(nt=(Ye-Le)/(1440*60),nt>0&&nt<60?ze=se:nt=null)}return{slope:le,intercept:ue,r2:je,predictedFg:ze,daysToFg:nt}}function P(R,W){return R.map(se=>W.slope*se+W.intercept)}function Te(R,W,se){const ce=new Date(R*1e3);try{return se?ce.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:W}):ce.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:W})}catch(re){return console.warn("Invalid timezone:",W,re),se?ce.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):ce.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function he(R,W,se){const ce=ne,re=D[h()]||te;return{width:R,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[oe=>{const V=oe.cursor.idx;if(V==null)return;const U=oe.root.querySelector(".u-legend");U&&(U.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`)}]},scales:{x:{time:!0},sg:{auto:!0,range:(oe,V,U)=>{const Oe=(U-V)*.1||.005;return[V-Oe,U+Oe]}},temp:{auto:!0,range:(oe,V,U)=>{const Oe=U-V,F=10;if(Oe<F){const ue=(U+V)/2;return[ue-F/2,ue+F/2]}const le=Oe*.1;return[V-le,U+le]}}},axes:[{stroke:q,grid:{stroke:w,width:1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(oe,V)=>V.map(U=>Te(U,se,d($)<=24))},{scale:"sg",stroke:ce,grid:{stroke:w,width:1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(oe,V)=>V.map(U=>En(U)),side:3},{scale:"temp",stroke:re,grid:{show:!1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(oe,V)=>V.map(U=>U.toFixed(0)+""),side:1}],series:[{value:(oe,V)=>Te(V,se,!1)+" "+Te(V,se,!0)},{label:d(_)==="SG"?"Gravity":d(_)==="P"?"Plato":"Brix",scale:"sg",stroke:ce,width:2,value:(oe,V)=>V!==null?En(V):"--",fill:(oe,V)=>{const U=oe.ctx.createLinearGradient(0,oe.bbox.top,0,oe.bbox.top+oe.bbox.height);return U.addColorStop(0,ee),U.addColorStop(1,"transparent"),U},points:{show:!1},paths:Mt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:re,width:1.5,dash:[4,4],value:(oe,V)=>V!==null?V.toFixed(1)+"":"--",points:{show:!1},paths:Mt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:z,width:1.5,dash:[2,4],value:(oe,V)=>V!==null?V.toFixed(1)+"":"--",points:{show:!1},paths:Mt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:N,width:2,dash:[8,4],value:(oe,V)=>V!==null?En(V):"--",points:{show:!1},show:d(M)}]}}function fe(R,W){if(W<=1)return R;const se=[];for(let ce=0;ce<R.length;ce++){const re=[],oe=Math.floor(W/2);for(let V=Math.max(0,ce-oe);V<=Math.min(R.length-1,ce+oe);V++){const U=R[V];U!==null&&re.push(U)}re.length>0?se.push(re.reduce((V,U)=>V+U,0)/re.length):se.push(null)}return se}function me(R,W,se,ce,re){if(R.length<=re)return[R,W,se,ce];const oe=Math.ceil(R.length/re),V=[],U=[],Oe=[],F=[];for(let le=0;le<R.length;le+=oe){const ue=Math.min(le+oe,R.length);let Se=0,ot=0,Ct=0,je=0,ze=0,nt=0;for(let Le=le;Le<ue;Le++)W[Le]!==null&&(Se+=W[Le],ot++),se[Le]!==null&&(Ct+=se[Le],je++),ce[Le]!==null&&(ze+=ce[Le],nt++);V.push(R[Math.floor((le+ue-1)/2)]),U.push(ot>0?Se/ot:null),Oe.push(je>0?Ct/je:null),F.push(nt>0?ze/nt:null)}return[V,U,Oe,F]}function ie(R){return!R.endsWith("Z")&&!R.match(/[+-]\d{2}:\d{2}$/)&&(R=R+"Z"),new Date(R).getTime()/1e3}function H(R,W,se){if(R.length===0||W.length===0)return W.map(()=>null);const ce=[...R].sort((V,U)=>ie(V.timestamp)-ie(U.timestamp)),re=ce.map(V=>ie(V.timestamp)),oe=ce.map(V=>V.temperature===null?null:se?V.temperature:V.temperature*9/5+32);return W.map(V=>{let U=null,Oe=null;for(let F=0;F<re.length;F++)if(re[F]<=V&&(U={time:re[F],temp:oe[F]}),re[F]>=V&&Oe===null){Oe={time:re[F],temp:oe[F]};break}if(U&&Oe&&U.temp!==null&&Oe.temp!==null){if(U.time===Oe.time)return U.temp;const F=(V-U.time)/(Oe.time-U.time);return U.temp+F*(Oe.temp-U.temp)}return U!==null&&U.temp!==null?U.temp:Oe!==null&&Oe.temp!==null?Oe.temp:null})}function Ce(R,W,se){const ce=[...R].reverse();let re=[],oe=[],V=[];for(const ue of ce){re.push(ie(ue.timestamp)),oe.push(ue.sg_calibrated??ue.sg_raw);const Se=ue.temp_calibrated??ue.temp_raw;Se!==null?V.push(se?Se:Se*9/5+32):V.push(null)}let U=H(W,re,se);d(a)&&d(c)>1&&(oe=fe(oe,d(c)),V=fe(V,d(c)),U=fe(U,d(c))),[re,oe,V,U]=me(re,oe,V,U,500);const F=K(re,oe);de(E,F,!0);const le=F?P(re,F):re.map(()=>null);return[re,oe,V,U,le]}const Qe=3e4;async function ye(R=!1){const se=Date.now()-d(p);if(!(!R&&d(p)>0&&se<Qe)){de(j,!0),de(Q,null);try{if(!d(C)){const ce=await Yr(l.batchId);de(C,ce.device_id??null,!0)}if(d(C)){const[ce,re]=await Promise.all([qr(d(C),d($),l.batchId),Kr(d($)).catch(()=>[])]);de(b,ce,!0),de(Z,re,!0),_e()}else de(b,[],!0),de(Z,[],!0),de(Q,"No device assigned to this batch")}catch(ce){de(Q,ce instanceof Error?ce.message:"Failed to load data",!0)}finally{de(p,Date.now(),!0),de(j,!1)}}}function _e(){if(!O||d(b).length===0)return;const R=Ce(d(b),d(Z),d(m)),W=he(O.clientWidth,d(m),d(u));S&&S.destroy(),S=new Mt(W,R,O)}function at(){S&&O&&S.setSize({width:O.clientWidth,height:220})}let Ie=null;function Ee(){if(Ie&&(clearInterval(Ie),Ie=null),d(v)>0){const R=d(v)*60*1e3;Ie=setInterval(()=>{d(j)||ye(!1)},R)}}ba(async()=>{const R=localStorage.getItem(i);if(R!==null){const se=parseInt(R,10);Number.isNaN(se)||de(v,se,!0)}const W=localStorage.getItem(X);W!==null&&de(M,W==="true");try{const se=await fetch("/api/system/timezone");if(se.ok){const ce=await se.json();de(u,ce.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await ye(!0),window.addEventListener("resize",at),Ee()}),zr(()=>{S?.destroy(),window.removeEventListener("resize",at),Ie&&clearInterval(Ie)}),Os(()=>{d(m)!==void 0&&d(b).length>0&&O&&_e()}),Os(()=>{d(a),d(c),d(b).length>0&&O&&_e()});function wt(R){const W=Number(R.target.value);de(v,W,!0),localStorage.setItem(i,String(W)),Ee(),ye(!0)}function ht(){de(M,!d(M)),localStorage.setItem(X,String(d(M))),S&&S.setSeries(4,{show:d(M)})}var Ke=fc(),Xe=A(Ke),xt=A(Xe);Ln(xt,21,()=>Ur,qn,(R,W)=>{var se=ac();let ce;se.__click=()=>{d($)!==d(W).hours&&(de($,d(W).hours,!0),ye(!0))};var re=A(se,!0);T(se),dt(()=>{ce=gl(se,1,"range-btn svelte-12kwequ",null,ce,{active:d($)===d(W).hours}),we(re,d(W).label)}),be(R,se)}),T(xt);var xe=I(xt,2),pt=A(xe),gt=I(A(pt),2);gt.__change=wt,Ln(gt,21,()=>n,qn,(R,W)=>{var se=rc(),ce=A(se,!0);T(se);var re={};dt(()=>{we(ce,d(W).label),re!==(re=d(W).value)&&(se.value=(se.__value=d(W).value)??"")}),be(R,se)}),T(gt);var bt;Xr(gt),T(pt);var We=I(pt,2),yt=I(A(We),2),Nt=A(yt);Bl(2),T(yt);var St=I(yt,4);let ve;St.__click=ht;var G=A(St);Tn(G,"background: rgba(250, 204, 21, 0.5);"),Bl(2),T(St),T(We),T(xe),T(Xe);var Me=I(Xe,2),Ue=A(Me);{var qt=R=>{var W=oc();be(R,W)};it(Ue,R=>{d(j)&&R(qt)})}var jt=I(Ue,2);{var Gt=R=>{var W=uc(),se=I(A(W),2);se.__click=()=>ye(!0),T(W),be(R,W)},It=R=>{var W=Cn(),se=Sl(W);{var ce=re=>{var oe=cc();be(re,oe)};it(se,re=>{d(b).length===0&&re(ce)},!0)}be(R,W)};it(jt,R=>{d(Q)?R(Gt):R(It,!1)})}T(Me),qs(Me,R=>O=R,()=>O);var rt=I(Me,2);{var kt=R=>{{let W=Be(()=>d(E)?{predictedFg:d(E).predictedFg,daysToFg:d(E).daysToFg,r2:d(E).r2}:null);ic(R,{get readings(){return d(b)},get originalGravity(){return y()},get trend(){return d(W)}})}};it(rt,R=>{d(b).length>0&&R(kt)})}T(Ke),dt(()=>{bt!==(bt=d(v))&&(gt.value=(gt.__value=d(v))??"",$r(gt,d(v))),Tn(Nt,`background: ${(D[h()]||"var(--text-secondary)")??""};`),ve=gl(St,1,"legend-item legend-toggle svelte-12kwequ",null,ve,{"legend-disabled":!d(M)}),nn(St,"title",d(M)?"Hide trend line":"Show trend line")}),be(e,Ke),Xn()}Zn(["click","change"]);var pc=De('<span class="error-message svelte-1k5rb4o"> </span>'),vc=De('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),hc=De('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),gc=De('<div class="w-1 rounded-sm transition-all"></div>'),mc=De('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),_c=De(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),wc=De('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),xc=De('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),bc=De("<div><!></div>"),yc=De('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Sc=De('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function kc(e,l){Qn(l,!0);let i=Pn(l,"expanded",3,!1),n=Pn(l,"wide",3,!1),a=Be(()=>l.batch.device_id?ya.tilts.get(l.batch.device_id)??null:null),c=Be(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),u=Be(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=Be(()=>l.progress?.temperature?.current??null),v=Be(()=>d(a)?.color??"BLACK"),h=Be(()=>d(a)?.rssi??null),y=Be(()=>d(a)?.paired??!0),m=Be(()=>d(a)?.last_seen??new Date().toISOString()),_=Be(()=>d(a)?.sg_raw??d(u)),O=Be(()=>d(a)?.temp_raw??d(p)),S=He(!1),j=He(Dn([])),Q=He(!1);Os(()=>{i()&&!d(S)&&(de(S,!0),d(Q)||jr(l.batch.id,168).then(F=>{de(j,F,!0),de(Q,!0)}).catch(F=>{console.error("Failed to fetch control events:",F),de(j,[],!0),de(Q,!0)}))});let $=He(!1),b=He(""),Z=He(null),E=He(!1),C=He(null);function D(){de(b,d(c),!0),de($,!0),de(C,null),setTimeout(()=>d(Z)?.focus(),0)}async function ne(){if(d(E))return;const F=d(b).trim();if(!F||F===d(c)){de($,!1),de(C,null);return}de(E,!0),de(C,null);try{await Jr(l.batch.id,{name:F}),de($,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(le){console.error("Failed to update batch name:",le),de(C,le instanceof Error?le.message:"Failed to save batch name",!0)}finally{de(E,!1)}}function ee(F){F.key==="Enter"?ne():F.key==="Escape"&&de($,!1)}let q=Be(Ta),te=Be(Ks);const w={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function z(F){return En(F)}function N(F){return Wr(F)}function X(F){return F>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:F>=-60?{bars:3,color:"var(--positive)",label:"Good"}:F>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function M(F){const le=Math.floor((Date.now()-new Date(F).getTime())/1e3);if(le<10)return"just now";if(le<60)return`${le}s ago`;const ue=Math.floor(le/60);if(ue<60)return`${ue}m ago`;const Se=Math.floor(ue/60);return Se<24?`${Se}h ago`:`${Math.floor(Se/24)}d ago`}let K=Be(()=>w[d(v)]||"var(--tilt-black)"),P=Be(()=>d(h)!==null?X(d(h)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),Te=Be(()=>M(d(m)));var he=Sc();let fe;var me=A(he),ie=I(me,2),H=A(ie),Ce=A(H),Qe=A(Ce);{var ye=F=>{var le=vc(),ue=A(le);Sa(ue),ue.__keydown=ee;let Se;qs(ue,je=>de(Z,je),()=>d(Z));var ot=I(ue,2);{var Ct=je=>{var ze=pc(),nt=A(ze,!0);T(ze),dt(()=>we(nt,d(C))),be(je,ze)};it(ot,je=>{d(C)&&je(Ct)})}T(le),dt(()=>{ue.disabled=d(E),Se=gl(ue,1,"beer-name-input svelte-1k5rb4o",null,Se,{error:d(C)})}),xa("blur",ue,ne),ka(ue,()=>d(b),je=>de(b,je)),be(F,le)},_e=F=>{var le=hc();le.__click=D;var ue=A(le),Se=A(ue,!0);T(ue),Bl(2),T(le),dt(()=>we(Se,d(c))),be(F,le)};it(Qe,F=>{d($)?F(ye):F(_e,!1)})}var at=I(Qe,2),Ie=A(at),Ee=I(Ie,2),wt=A(Ee,!0);T(Ee),T(at),T(Ce);var ht=I(Ce,2),Ke=A(ht),Xe=A(Ke);Ln(Xe,20,()=>Array(4),qn,(F,le,ue)=>{var Se=gc();dt(()=>Tn(Se,`
									height: ${8+ue*4}px;
									background: ${(ue<d(P).bars?d(P).color:"var(--bg-hover)")??""};
									opacity: ${ue<d(P).bars?1:.4};
								`)),be(F,Se)}),T(Xe);var xt=I(Xe,2),xe=A(xt);T(xt),T(Ke);var pt=I(Ke,2);{var gt=F=>{var le=mc();be(F,le)};it(pt,F=>{d(y)||F(gt)})}T(ht),T(H);var bt=I(H,2),We=A(bt),yt=A(We),Nt=A(yt,!0),St=I(Nt),ve=A(St,!0);T(St),T(yt);var G=I(yt,2),Me=A(G,!0);T(G),T(We);var Ue=I(We,2),qt=A(Ue),jt=A(qt);{var Gt=F=>{var le=_c(),ue=Sl(le,!0),Se=I(ue),ot=A(Se,!0);T(Se),dt(Ct=>{we(ue,Ct),we(ot,d(q))},[()=>N(d(p))]),be(F,le)},It=F=>{var le=wc(),ue=I(Sl(le)),Se=A(ue,!0);T(ue),dt(()=>we(Se,d(q))),be(F,le)};it(jt,F=>{d(p)!==null?F(Gt):F(It,!1)})}T(qt),Bl(2),T(Ue),T(bt);var rt=I(bt,2);{var kt=F=>{var le=xc(),ue=I(A(le),2),Se=A(ue,!0);T(ue);var ot=I(ue,4),Ct=A(ot);T(ot),T(le),dt((je,ze)=>{we(Se,je),we(Ct,`${ze??""}${d(q)??""}`)},[()=>z(d(_)),()=>d(O)!==null?N(d(O)):"--"]),be(F,le)};it(rt,F=>{(d(u)!==d(_)||d(p)!==d(O))&&d(a)&&F(kt)})}var R=I(rt,2);{var W=F=>{var le=bc();let ue;var Se=A(le);eo(Se,()=>l.batch.id,ot=>{dc(ot,{get batchId(){return l.batch.id},get deviceColor(){return d(v)},get originalGravity(){return l.batch.measured_og},get controlEvents(){return d(j)}})}),T(le),dt(()=>ue=gl(le,1,"chart-section svelte-1k5rb4o",null,ue,{hidden:!i()})),be(F,le)};it(R,F=>{d(S)&&F(W)})}var se=I(R,2),ce=A(se),re=A(ce);T(ce);var oe=I(ce,2),V=A(oe),U=I(V,2);{var Oe=F=>{var le=yc();le.__click=function(...ot){l.onToggleExpand?.apply(this,ot)};var ue=A(le);let Se;T(le),dt(()=>{nn(le,"aria-label",i()?"Collapse chart":"Expand chart"),Se=gl(ue,0,"w-4 h-4 transition-transform",null,Se,{"rotate-180":i()})}),be(F,le)};it(U,F=>{l.onToggleExpand&&F(Oe)})}Bl(2),T(oe),T(se),T(ie),T(he),dt(F=>{fe=gl(he,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,fe,{expanded:i(),wide:n()}),Tn(me,`background: ${d(K)??""};`),Tn(Ie,`background: ${d(K)??""};`),we(wt,d(v)),nn(Ke,"title",`${d(P).label??""} signal (${d(h)??"N/A"??""} dBm)`),we(xe,`${d(h)??"N/A"??""} dBm`),we(Nt,F),we(ve,d(te)!=="SG"?d(te):""),we(Me,d(te)==="SG"?"Gravity":d(te)==="P"?"Plato":"Brix"),we(re,`Updated ${d(Te)??""}`),nn(V,"href",`/batches/${l.batch.id??""}`)},[()=>z(d(u))]),be(e,he),Xn()}Zn(["keydown","click"]);var Tc=De('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Ec=De('<div class="alerts-list svelte-1uha8ag"></div>'),Mc=De('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Ac=De('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Cc=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Dc=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Lc=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Pc=De("<div></div>"),Rc=De("<!> <!>",1);function Zc(e,l){Qn(l,!0);let i=He(!1),n=He(!1),a=He(Dn([])),c=He(Dn(new Map)),u=He(!0),p=He(null);ba(async()=>{const C=localStorage.getItem("brewsignal_alerts_dismissed"),D=localStorage.getItem("brewsignal_alerts_dismissed_time");C==="true"&&D&&Date.now()-parseInt(D,10)<360*60*1e3&&de(i,!0),await v()});async function v(){de(u,!0),de(p,null);try{const C=await Zr();de(a,C.filter(q=>q.status==="fermenting"||q.status==="conditioning"),!0);const D=d(a).map(async q=>{try{const te=await Qr(q.id);return[q.id,te]}catch{return null}}),ne=await Promise.all(D),ee=new Map;for(const q of ne)q&&ee.set(q[0],q[1]);de(c,ee,!0)}catch(C){de(p,C instanceof Error?C.message:"Failed to load batches",!0)}finally{de(u,!1)}}let h=Be(()=>new Map(d(a).filter(C=>C.device_id&&(C.status==="fermenting"||C.status==="conditioning")).map(C=>[C.device_id,C.id]))),y=Be(()=>{const C=new Map(d(c));for(const[D,ne]of d(h)){const ee=ya.tilts.get(D);if(ee){const q=C.get(ne)||{batch_id:ne,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}};C.set(ne,{...q,measured:{...q.measured,current_sg:ee.sg},temperature:{...q.temperature,current:ee.temp,status:q.temperature.yeast_min!==void 0&&q.temperature.yeast_max!==void 0?ee.temp<q.temperature.yeast_min?"too_cold":ee.temp>q.temperature.yeast_max?"too_hot":"in_range":q.temperature.status}})}}return C}),m=He(null);function _(C){de(m,d(m)===C?null:C,!0)}function O(){de(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function S(){de(n,!d(n))}var j=Rc();Hr("1uha8ag",C=>{Vr(()=>{Ir.title="Dashboard | BrewSignal"})});var Q=Sl(j);{var $=C=>{var D=Ac(),ne=A(D),ee=A(ne),q=I(A(ee),4),te=A(q,!0);T(q),T(ee);var w=I(ee,2);w.__click=O,T(ne);var z=I(ne,2);{var N=K=>{var P=Ec();Ln(P,21,()=>wn.alerts,qn,(Te,he)=>{var fe=Tc();let me;var ie=A(fe),H=A(ie);T(ie);var Ce=I(ie,2),Qe=A(Ce,!0);T(Ce),T(fe),dt(()=>{me=gl(fe,1,"alert-item svelte-1uha8ag",null,me,{warning:d(he).level==="warning",critical:d(he).level==="critical"}),we(H,`${d(he).day??""}:`),we(Qe,d(he).message)}),be(Te,fe)}),T(P),be(K,P)};it(z,K=>{d(n)||K(N)})}var X=I(z,2);{var M=K=>{var P=Mc();P.__click=S;var Te=A(P,!0);T(P),dt(()=>we(Te,d(n)?`Show ${wn.alerts.length} alerts`:"Show less")),be(K,P)};it(X,K=>{wn.alerts.length>3&&K(M)})}T(D),dt(()=>we(te,wn.alerts.length)),be(C,D)};it(Q,C=>{wn.alerts.length>0&&!d(i)&&C($)})}var b=I(Q,2);{var Z=C=>{var D=Cc();be(C,D)},E=C=>{var D=Cn(),ne=Sl(D);{var ee=te=>{var w=Dc(),z=I(A(w),4),N=A(z,!0);T(z),T(w),dt(()=>we(N,d(p))),be(te,w)},q=te=>{var w=Cn(),z=Sl(w);{var N=M=>{var K=Lc();be(M,K)},X=M=>{var K=Pc();let P;Ln(K,21,()=>d(a),Te=>Te.id,(Te,he)=>{{let fe=Be(()=>d(y).get(d(he).id)),me=Be(()=>d(m)===d(he).id),ie=Be(()=>d(a).length===1);kc(Te,{get batch(){return d(he)},get progress(){return d(fe)},get expanded(){return d(me)},get wide(){return d(ie)},onToggleExpand:()=>_(d(he).id),onBatchUpdated:v})}}),T(K),dt(()=>P=gl(K,1,"tilt-grid svelte-1uha8ag",null,P,{"single-tilt":d(a).length===1})),be(M,K)};it(z,M=>{d(a).length===0?M(N):M(X,!1)},!0)}be(te,w)};it(ne,te=>{d(p)?te(ee):te(q,!1)},!0)}be(C,D)};it(b,C=>{d(u)?C(Z):C(E,!1)})}be(e,j),Xn()}Zn(["click"]);export{Zc as component};
