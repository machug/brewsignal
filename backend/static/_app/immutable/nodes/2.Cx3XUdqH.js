import{d as Hn,c as ma,a as Ce,f as Oe,s as xe,g as ga,t as Fr}from"../chunks/lZYuFeLm.js";import{h as zr,k as Or,b4 as Nr,f as Vr,ab as In,ak as Gs,g as b,am as Lt,af as Wn,ah as R,ag as X,aj as D,ac as lt,al as _t,s as Me,an as Al,p as Ai,ad as wa,b3 as Gr,ae as Es,V as Hr,ai as Ir}from"../chunks/KfNDMb7P.js";import{e as wn,i as On}from"../chunks/BrMo0dxU.js";import{B as Wr,i as xt}from"../chunks/DN3Nn4_2.js";import{f as dn,c as Rn,g as _a,r as xa,s as Di,d as Br,h as Ur}from"../chunks/BYYzK3Gr.js";import{s as Dl}from"../chunks/CMo0SdGN.js";import{u as Yr,c as jr,d as qr,e as Kr,a as _s}from"../chunks/CNF3ZaXk.js";import{w as un}from"../chunks/Dp8S1B6d.js";import{s as Fn}from"../chunks/QJqSGRkr.js";import{b as ba}from"../chunks/DvdFc3xZ.js";import{b as Hs,p as As}from"../chunks/rFT0vVkq.js";import{i as Jr,s as Zr}from"../chunks/UBh9G4FY.js";function Qr(e,l,i){zr&&Or();var n=new Wr(e),a=!Nr();Vr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const Xr=!0,it="u-",$r="uplot",eo=it+"hz",to=it+"vt",lo=it+"title",no=it+"wrap",so=it+"under",io=it+"over",ao=it+"axis",El=it+"off",ro=it+"select",oo=it+"cursor-x",uo=it+"cursor-y",co=it+"cursor-pt",fo=it+"legend",po=it+"live",ho=it+"inline",vo=it+"series",mo=it+"marker",Li=it+"label",go=it+"value",pn="width",hn="height",cn="top",Ci="bottom",Bl="left",xs="right",Is="#000",Pi=Is+"0",bs="mousemove",Ri="mousedown",Ss="mouseup",Fi="mouseenter",zi="mouseleave",Oi="dblclick",wo="resize",_o="scroll",Ni="change",Nn="dppxchange",Ws="--",Zl=typeof window<"u",Ds=Zl?document:null,Yl=Zl?window:null,xo=Zl?navigator:null;let Te,Ln;function Ls(){let e=devicePixelRatio;Te!=e&&(Te=e,Ln&&Ps(Ni,Ln,Ls),Ln=matchMedia(`(min-resolution: ${Te-.001}dppx) and (max-resolution: ${Te+.001}dppx)`),Ll(Ni,Ln,Ls),Yl.dispatchEvent(new CustomEvent(Nn)))}function Ft(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Cs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function He(e,l,i){e.style[l]=i+"px"}function Jt(e,l,i,n){let a=Ds.createElement(e);return l!=null&&Ft(a,l),i?.insertBefore(a,n),a}function It(e,l){return Jt("div",e,l)}const Vi=new WeakMap;function sl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Vi.get(e);c!=u&&(e.style.transform=c,Vi.set(e,c),l<0||i<0||l>n||i>a?Ft(e,El):Cs(e,El))}const Gi=new WeakMap;function Hi(e,l,i){let n=l+i,a=Gi.get(e);n!=a&&(Gi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Ii=new WeakMap;function Wi(e,l,i,n){let a=l+""+i,c=Ii.get(e);a!=c&&(Ii.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Bs={passive:!0},bo={...Bs,capture:!0};function Ll(e,l,i,n){l.addEventListener(e,i,n?bo:Bs)}function Ps(e,l,i,n){l.removeEventListener(e,i,Bs)}Zl&&Ls();function Zt(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:zt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Sa(e){return(i,n,a)=>{let c=-1,u=-1;for(let d=n;d<=a;d++)if(e(i[d])){c=d;break}for(let d=a;d>=n;d--)if(e(i[d])){u=d;break}return[c,u]}}const ya=e=>e!=null,ka=e=>e!=null&&e>0,Bn=Sa(ya),So=Sa(ka);function yo(e,l,i,n=0,a=!1){let c=a?So:Bn,u=a?ka:ya;[l,i]=c(e,l,i);let d=e[l],p=e[l];if(l>-1)if(n==1)d=e[l],p=e[i];else if(n==-1)d=e[i],p=e[l];else for(let m=l;m<=i;m++){let x=e[m];u(x)&&(x<d?d=x:x>p&&(p=x))}return[d??Fe,p??-Fe]}function Un(e,l,i,n){let a=Yi(e),c=Yi(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?rl:Ta,d=a==1?zt:Wt,p=c==1?Wt:zt,m=d(u(nt(e))),x=p(u(nt(l))),h=jl(i,m),g=jl(i,x);return i==10&&(m<0&&(h=ze(h,-m)),x<0&&(g=ze(g,-x))),n||i==2?(e=h*a,l=g*c):(e=Da(e,h),l=Yn(l,g)),[e,l]}function Us(e,l,i,n){let a=Un(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Ys=.1,Bi={mode:3,pad:Ys},mn={pad:0,soft:null,mode:0},ko={min:mn,max:mn};function Vn(e,l,i,n){return jn(i)?Ui(e,l,i):(mn.pad=i,mn.soft=n?0:null,mn.mode=n?3:0,Ui(e,l,ko))}function ye(e,l){return e??l}function To(e,l,i){for(l=ye(l,0),i=ye(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ui(e,l,i){let n=i.min,a=i.max,c=ye(n.pad,0),u=ye(a.pad,0),d=ye(n.hard,-Fe),p=ye(a.hard,Fe),m=ye(n.soft,Fe),x=ye(a.soft,-Fe),h=ye(n.mode,0),g=ye(a.mode,0),N=l-e,V=rl(N),L=Mt(nt(e),nt(l)),z=rl(L),q=nt(z-V);(N<1e-24||q>10)&&(N=0,(e==0||l==0)&&(N=1e-24,h==2&&m!=Fe&&(c=0),g==2&&x!=-Fe&&(u=0)));let S=N||L||1e3,H=rl(S),E=jl(10,zt(H)),se=S*(N==0?e==0?.1:1:c),O=ze(Da(e-se,E/10),24),$=e>=m&&(h==1||h==3&&O<=m||h==2&&O>=m)?m:Fe,C=Mt(d,O<$&&e>=$?$:Qt($,O)),Z=S*(N==0?l==0?.1:1:u),Q=ze(Yn(l+Z,E/10),24),T=l<=x&&(g==1||g==3&&Q>=x||g==2&&Q<=x)?x:-Fe,ee=Qt(p,Q>T&&l<=T?T:Mt(T,Q));return C==ee&&C==0&&(ee=100),[C,ee]}const Mo=new Intl.NumberFormat(Zl?xo.language:"en-US"),js=e=>Mo.format(e),Ot=Math,zn=Ot.PI,nt=Ot.abs,zt=Ot.floor,tt=Ot.round,Wt=Ot.ceil,Qt=Ot.min,Mt=Ot.max,jl=Ot.pow,Yi=Ot.sign,rl=Ot.log10,Ta=Ot.log2,Eo=(e,l=1)=>Ot.sinh(e)*l,ys=(e,l=1)=>Ot.asinh(e/l),Fe=1/0;function ji(e){return(rl((e^e>>31)-(e>>31))|0)+1}function Rs(e,l,i){return Qt(Mt(e,l),i)}function Ma(e){return typeof e=="function"}function ge(e){return Ma(e)?e:()=>e}const Ao=()=>{},Ea=e=>e,Aa=(e,l)=>l,Do=e=>null,qi=e=>!0,Ki=(e,l)=>e==l,Lo=/\.\d*?(?=9{6,}|0{6,})/gm,Cl=e=>{if(Ca(e)||xl.has(e))return e;const l=`${e}`,i=l.match(Lo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Cl(a)}e${c}`}return ze(e,n)};function Tl(e,l){return Cl(ze(Cl(e/l))*l)}function Yn(e,l){return Cl(Wt(Cl(e/l))*l)}function Da(e,l){return Cl(zt(Cl(e/l))*l)}function ze(e,l=0){if(Ca(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return tt(n)/i}const xl=new Map;function La(e){return((""+e).split(".")[1]||"").length}function _n(e,l,i,n){let a=[],c=n.map(La);for(let u=l;u<i;u++){let d=nt(u),p=ze(jl(e,u),d);for(let m=0;m<n.length;m++){let x=e==10?+`${n[m]}e${u}`:n[m]*p,h=(u>=0?0:d)+(u>=c[m]?0:c[m]),g=e==10?x:ze(x,h);a.push(g),xl.set(g,h)}}return a}const gn={},qs=[],ql=[null,null],_l=Array.isArray,Ca=Number.isInteger,Co=e=>e===void 0;function Ji(e){return typeof e=="string"}function jn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Po(e){return e!=null&&typeof e=="object"}const Ro=Object.getPrototypeOf(Uint8Array),Pa="__proto__";function Kl(e,l=jn){let i;if(_l(e)){let n=e.find(a=>a!=null);if(_l(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=Kl(e[a],l)}else i=e.slice()}else if(e instanceof Ro)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Pa&&(i[n]=Kl(e[n],l))}else i=e;return i}function Xe(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Pa&&(jn(e[a])?Xe(e[a],Kl(n[a])):e[a]=Kl(n[a]))}return e}const Fo=0,zo=1,Oo=2;function No(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Vo(e,l){if(Io(e)){let u=e[0].slice();for(let d=1;d<e.length;d++)u.push(...e[d].slice(1));return Wo(u[0])||(u=Ho(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let p=e[u][0],m=p.length;for(let x=0;x<m;x++)i.add(p[x])}let n=[Array.from(i).sort((u,d)=>u-d)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let d=e[u],p=d[0];for(let m=1;m<d.length;m++){let x=d[m],h=Array(a).fill(void 0),g=l?l[u][m]:zo,N=[];for(let V=0;V<x.length;V++){let L=x[V],z=c.get(p[V]);L===null?g!=Fo&&(h[z]=L,g==Oo&&N.push(z)):h[z]=L}No(h,N,a),n.push(h)}}return n}const Go=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ho(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],d=Array(i);for(let p=0;p<i;p++)d[p]=u[n[p]];a.push(d)}return a}function Io(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Wo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=Mt(1,zt((a-n+1)/l));for(let u=e[n],d=n+c;d<=a;d+=c){const p=e[d];if(p!=null){if(p<=u)return!1;u=p}}return!0}const Ra=["January","February","March","April","May","June","July","August","September","October","November","December"],Fa=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function za(e){return e.slice(0,3)}const Bo=Fa.map(za),Uo=Ra.map(za),Yo={MMMM:Ra,MMM:Uo,WWWW:Fa,WWW:Bo};function fn(e){return(e<10?"0":"")+e}function jo(e){return(e<10?"00":e<100?"0":"")+e}const qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>fn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>fn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>fn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>fn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>fn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>jo(e.getMilliseconds())};function Ks(e,l){l=l||Yo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?qo[a[1]]:a[0]);return c=>{let u="";for(let d=0;d<i.length;d++)u+=typeof i[d]=="string"?i[d]:i[d](c,l);return u}}const Ko=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Jo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ko?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Oa=e=>e%1==0,Gn=[1,2,2.5,5],Zo=_n(10,-32,0,Gn),Na=_n(10,0,32,Gn),Qo=Na.filter(Oa),Ml=Zo.concat(Na),Js=`
`,Va="{YYYY}",Zi=Js+Va,Ga="{M}/{D}",vn=Js+Ga,Cn=vn+"/{YY}",Ha="{aa}",Xo="{h}:{mm}",Ul=Xo+Ha,Qi=Js+Ul,Xi=":{ss}",Ee=null;function Ia(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,p=(e==1?_n(10,0,3,Gn).filter(Oa):_n(10,-3,0,Gn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const m=[[u,Va,Ee,Ee,Ee,Ee,Ee,Ee,1],[a*28,"{MMM}",Zi,Ee,Ee,Ee,Ee,Ee,1],[a,Ga,Zi,Ee,Ee,Ee,Ee,Ee,1],[n,"{h}"+Ha,Cn,Ee,vn,Ee,Ee,Ee,1],[i,Ul,Cn,Ee,vn,Ee,Ee,Ee,1],[l,Xi,Cn+" "+Ul,Ee,vn+" "+Ul,Ee,Qi,Ee,1],[e,Xi+".{fff}",Cn+" "+Ul,Ee,vn+" "+Ul,Ee,Qi,Ee,1]];function x(h){return(g,N,V,L,z,q)=>{let S=[],H=z>=u,E=z>=c&&z<u,se=h(V),O=ze(se*e,3),$=ks(se.getFullYear(),H?0:se.getMonth(),E||H?1:se.getDate()),C=ze($*e,3);if(E||H){let Z=E?z/c:0,Q=H?z/u:0,T=O==C?O:ze(ks($.getFullYear()+Q,$.getMonth()+Z,1)*e,3),ee=new Date(tt(T/e)),F=ee.getFullYear(),te=ee.getMonth();for(let Y=0;T<=L;Y++){let ie=ks(F+Q*Y,te+Z*Y,1),I=ie-h(ze(ie*e,3));T=ze((+ie+I)*e,3),T<=L&&S.push(T)}}else{let Z=z>=a?a:z,Q=zt(V)-zt(O),T=C+Q+Yn(O-C,Z);S.push(T);let ee=h(T),F=ee.getHours()+ee.getMinutes()/i+ee.getSeconds()/n,te=z/n,Y=g.axes[N]._space,ie=q/Y;for(;T=ze(T+z,e==1?0:3),!(T>L);)if(te>1){let I=zt(ze(F+te,6))%24,oe=h(T).getHours()-I;oe>1&&(oe=-1),T-=oe*n,F=(F+te)%24;let de=S[S.length-1];ze((T-de)/z,3)*ie>=.7&&S.push(T)}else S.push(T)}return S}}return[p,m,x]}const[$o,eu,tu]=Ia(1),[lu,nu,su]=Ia(.001);_n(2,-53,53,[1]);function $i(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ea(e,l){return(i,n,a,c,u)=>{let d=l.find(V=>u>=V[0])||l[l.length-1],p,m,x,h,g,N;return n.map(V=>{let L=e(V),z=L.getFullYear(),q=L.getMonth(),S=L.getDate(),H=L.getHours(),E=L.getMinutes(),se=L.getSeconds(),O=z!=p&&d[2]||q!=m&&d[3]||S!=x&&d[4]||H!=h&&d[5]||E!=g&&d[6]||se!=N&&d[7]||d[1];return p=z,m=q,x=S,h=H,g=E,N=se,O(L)})}}function iu(e,l){let i=Ks(l);return(n,a,c,u,d)=>a.map(p=>i(e(p)))}function ks(e,l,i){return new Date(e,l,i)}function ta(e,l){return l(e)}const au="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function la(e,l){return(i,n,a,c)=>c==null?Ws:l(e(n))}function ru(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function ou(e,l){return e.series[l].fill(e,l)}const uu={show:!0,live:!0,isolate:!1,mount:Ao,markers:{show:!0,width:2,stroke:ru,fill:ou,dash:"solid"},idx:null,idxs:null,values:[]};function cu(e,l){let i=e.cursor.points,n=It(),a=i.size(e,l);He(n,pn,a),He(n,hn,a);let c=a/-2;He(n,"marginLeft",c),He(n,"marginTop",c);let u=i.width(e,l,a);return u&&He(n,"borderWidth",u),n}function fu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function du(e,l){let i=e.series[l].points;return i._stroke||i._fill}function pu(e,l){return e.series[l].points.size}const Ts=[0,0];function hu(e,l,i){return Ts[0]=l,Ts[1]=i,Ts}function Pn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Ms(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const vu={show:!0,x:!0,y:!0,lock:!1,move:hu,points:{one:!1,show:cu,size:pu,width:0,stroke:du,fill:fu},bind:{mousedown:Pn,mouseup:Pn,click:Pn,dblclick:Pn,mousemove:Ms,mouseleave:Ms,mouseenter:Ms},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Wa={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Zs=Xe({},Wa,{filter:Aa}),Ba=Xe({},Zs,{size:10}),Ua=Xe({},Wa,{show:!1}),Qs='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ya="bold "+Qs,ja=1.5,na={show:!0,scale:"x",stroke:Is,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ya,side:2,grid:Zs,ticks:Ba,border:Ua,font:Qs,lineGap:ja,rotate:0},mu="Value",gu="Time",sa={show:!0,scale:"x",auto:!1,sorted:1,min:Fe,max:-Fe,idxs:[]};function wu(e,l,i,n,a){return l.map(c=>c==null?"":js(c))}function _u(e,l,i,n,a,c,u){let d=[],p=xl.get(a)||0;i=u?i:ze(Yn(i,a),p);for(let m=i;m<=n;m=ze(m+a,p))d.push(Object.is(m,-0)?0:m);return d}function Fs(e,l,i,n,a,c,u){const d=[],p=e.scales[e.axes[l].scale].log,m=p==10?rl:Ta,x=zt(m(i));a=jl(p,x),p==10&&(a=Ml[Zt(a,Ml)]);let h=i,g=a*p;p==10&&(g=Ml[Zt(g,Ml)]);do d.push(h),h=h+a,p==10&&!xl.has(h)&&(h=ze(h,xl.get(a))),h>=g&&(a=h,g=a*p,p==10&&(g=Ml[Zt(g,Ml)]));while(h<=n);return d}function xu(e,l,i,n,a,c,u){let p=e.scales[e.axes[l].scale].asinh,m=n>p?Fs(e,l,Mt(p,i),n,a):[p],x=n>=0&&i<=0?[0]:[];return(i<-p?Fs(e,l,Mt(p,-n),-i,a):[p]).reverse().map(g=>-g).concat(x,m)}const qa=/./,bu=/[12357]/,Su=/[125]/,ia=/1/,zs=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function yu(e,l,i,n,a){let c=e.axes[i],u=c.scale,d=e.scales[u],p=e.valToPos,m=c._space,x=p(10,u),h=p(9,u)-x>=m?qa:p(7,u)-x>=m?bu:p(5,u)-x>=m?Su:ia;if(h==ia){let g=nt(p(1,u)-x);if(g<m)return zs(l.slice().reverse(),d.distr,h,Wt(m/g)).reverse()}return zs(l,d.distr,h,1)}function ku(e,l,i,n,a){let c=e.axes[i],u=c.scale,d=c._space,p=e.valToPos,m=nt(p(1,u)-p(2,u));return m<d?zs(l.slice().reverse(),3,qa,Wt(d/m)).reverse():l}function Tu(e,l,i,n){return n==null?Ws:l==null?"":js(l)}const aa={show:!0,scale:"y",stroke:Is,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ya,side:3,grid:Zs,ticks:Ba,border:Ua,font:Qs,lineGap:ja,rotate:0};function Mu(e,l){let i=3+(e||1)*2;return ze(i*l,3)}function Eu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),d=nt(u-c),p=e.series[l],m=d/(p.points.space*Te);return n[1]-n[0]<=m}const ra={scale:null,auto:!0,sorted:0,min:Fe,max:-Fe},Ka=(e,l,i,n,a)=>a,oa={show:!0,auto:!0,sorted:0,gaps:Ka,alpha:1,facets:[Xe({},ra,{scale:"x"}),Xe({},ra,{scale:"y"})]},ua={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Ka,alpha:1,points:{show:Eu,filter:null},values:null,min:Fe,max:-Fe,idxs:[],path:null,clip:null};function Au(e,l,i,n,a){return i/10}const Ja={time:Xr,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Du=Xe({},Ja,{time:!1,ori:1}),ca={};function Za(e,l){let i=ca[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,d,p,m){for(let x=0;x<i.plots.length;x++)i.plots[x]!=a&&i.plots[x].pub(n,a,c,u,d,p,m)}},e!=null&&(ca[e]=i)),i}const Jl=1,Os=2;function Pl(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,d=e.bbox;let p=c[0],m=n==2?c[1]:c[l],x=n==2?u[a.facets[0].scale]:u[e.series[0].scale],h=n==2?u[a.facets[1].scale]:u[a.scale],g=d.left,N=d.top,V=d.width,L=d.height,z=e.valToPosH,q=e.valToPosV;return x.ori==0?i(a,p,m,x,h,z,q,g,N,V,L,Kn,Ql,Zn,Xa,er):i(a,p,m,x,h,q,z,N,g,L,V,Jn,Xl,ei,$a,tr)}function Xs(e,l){let i=0,n=0,a=ye(e.bands,qs);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Lu(e,l,i,n,a){let c=e.mode,u=e.series[l],d=c==2?u.facets[1].scale:u.scale,p=e.scales[d];return a==-1?p.min:a==1?p.max:p.distr==3?p.dir==1?p.min:p.max:0}function ol(e,l,i,n,a,c){return Pl(e,l,(u,d,p,m,x,h,g,N,V,L,z)=>{let q=u.pxRound;const S=m.dir*(m.ori==0?1:-1),H=m.ori==0?Ql:Xl;let E,se;S==1?(E=i,se=n):(E=n,se=i);let O=q(h(d[E],m,L,N)),$=q(g(p[E],x,z,V)),C=q(h(d[se],m,L,N)),Z=q(g(c==1?x.max:x.min,x,z,V)),Q=new Path2D(a);return H(Q,C,Z),H(Q,O,Z),H(Q,O,$),Q})}function qn(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const d=l==0?Zn:ei;let p=i;for(let h=0;h<e.length;h++){let g=e[h];if(g[1]>g[0]){let N=g[0]-p;N>0&&d(u,p,n,N,n+c),p=g[1]}}let m=i+a-p,x=10;m>0&&d(u,p,n-x/2,m,n+c+x)}return u}function Cu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function $s(e,l,i,n,a,c,u){let d=[],p=e.length;for(let m=a==1?i:n;m>=i&&m<=n;m+=a)if(l[m]===null){let h=m,g=m;if(a==1)for(;++m<=n&&l[m]===null;)g=m;else for(;--m>=i&&l[m]===null;)g=m;let N=c(e[h]),V=g==h?N:c(e[g]),L=h-a;N=u<=0&&L>=0&&L<p?c(e[L]):N;let q=g+a;V=u>=0&&q>=0&&q<p?c(e[q]):V,V>=N&&d.push([N,V])}return d}function fa(e){return e==0?Ea:e==1?tt:l=>Tl(l,e)}function Qa(e){let l=e==0?Kn:Jn,i=e==0?(a,c,u,d,p,m)=>{a.arcTo(c,u,d,p,m)}:(a,c,u,d,p,m)=>{a.arcTo(u,c,p,d,m)},n=e==0?(a,c,u,d,p)=>{a.rect(c,u,d,p)}:(a,c,u,d,p)=>{a.rect(u,c,p,d)};return(a,c,u,d,p,m=0,x=0)=>{m==0&&x==0?n(a,c,u,d,p):(m=Qt(m,d/2,p/2),x=Qt(x,d/2,p/2),l(a,c+m,u),i(a,c+d,u,c+d,u+p,m),i(a,c+d,u+p,c,u+p,x),i(a,c,u+p,c,u,x),i(a,c,u,c+d,u,m),a.closePath())}}const Kn=(e,l,i)=>{e.moveTo(l,i)},Jn=(e,l,i)=>{e.moveTo(i,l)},Ql=(e,l,i)=>{e.lineTo(l,i)},Xl=(e,l,i)=>{e.lineTo(i,l)},Zn=Qa(0),ei=Qa(1),Xa=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},$a=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},er=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},tr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function lr(e){return(l,i,n,a,c)=>Pl(l,i,(u,d,p,m,x,h,g,N,V,L,z)=>{let{pxRound:q,points:S}=u,H,E;m.ori==0?(H=Kn,E=Xa):(H=Jn,E=$a);const se=ze(S.width*Te,3);let O=(S.size-S.width)/2*Te,$=ze(O*2,3),C=new Path2D,Z=new Path2D,{left:Q,top:T,width:ee,height:F}=l.bbox;Zn(Z,Q-$,T-$,ee+$*2,F+$*2);const te=Y=>{if(p[Y]!=null){let ie=q(h(d[Y],m,L,N)),I=q(g(p[Y],x,z,V));H(C,ie+O,I),E(C,ie,I,O,0,zn*2)}};if(c)c.forEach(te);else for(let Y=n;Y<=a;Y++)te(Y);return{stroke:se>0?C:null,fill:C,clip:Z,flags:Jl|Os}})}function nr(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Pu=nr(Ql),Ru=nr(Xl);function sr(e){const l=ye(e?.alignGaps,0);return(i,n,a,c)=>Pl(i,n,(u,d,p,m,x,h,g,N,V,L,z)=>{[a,c]=Bn(p,a,c);let q=u.pxRound,S=F=>q(h(F,m,L,N)),H=F=>q(g(F,x,z,V)),E,se;m.ori==0?(E=Ql,se=Pu):(E=Xl,se=Ru);const O=m.dir*(m.ori==0?1:-1),$={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jl},C=$.stroke;let Z=!1;if(c-a>=L*4){let F=W=>i.posToVal(W,m.key,!0),te=null,Y=null,ie,I,Ae,pe=S(d[O==1?a:c]),oe=S(d[a]),de=S(d[c]),re=F(O==1?oe+1:de-1);for(let W=O==1?a:c;W>=a&&W<=c;W+=O){let _e=d[W],we=(O==1?_e<re:_e>re)?pe:S(_e),ce=p[W];we==pe?ce!=null?(I=ce,te==null?(E(C,we,H(I)),ie=te=Y=I):I<te?te=I:I>Y&&(Y=I)):ce===null&&(Z=!0):(te!=null&&se(C,pe,H(te),H(Y),H(ie),H(I)),ce!=null?(I=ce,E(C,we,H(I)),te=Y=ie=I):(te=Y=null,ce===null&&(Z=!0)),pe=we,re=F(pe+O))}te!=null&&te!=Y&&Ae!=pe&&se(C,pe,H(te),H(Y),H(ie),H(I))}else for(let F=O==1?a:c;F>=a&&F<=c;F+=O){let te=p[F];te===null?Z=!0:te!=null&&E(C,S(d[F]),H(te))}let[T,ee]=Xs(i,n);if(u.fill!=null||T!=0){let F=$.fill=new Path2D(C),te=u.fillTo(i,n,u.min,u.max,T),Y=H(te),ie=S(d[a]),I=S(d[c]);O==-1&&([I,ie]=[ie,I]),E(F,I,Y),E(F,ie,Y)}if(!u.spanGaps){let F=[];Z&&F.push(...$s(d,p,a,c,O,S,l)),$.gaps=F=u.gaps(i,n,a,c,F),$.clip=qn(F,m.ori,N,V,L,z)}return ee!=0&&($.band=ee==2?[ol(i,n,a,c,C,-1),ol(i,n,a,c,C,1)]:ol(i,n,a,c,C,ee)),$})}function Fu(e){const l=ye(e.align,1),i=ye(e.ascDesc,!1),n=ye(e.alignGaps,0),a=ye(e.extend,!1);return(c,u,d,p)=>Pl(c,u,(m,x,h,g,N,V,L,z,q,S,H)=>{[d,p]=Bn(h,d,p);let E=m.pxRound,{left:se,width:O}=c.bbox,$=oe=>E(V(oe,g,S,z)),C=oe=>E(L(oe,N,H,q)),Z=g.ori==0?Ql:Xl;const Q={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jl},T=Q.stroke,ee=g.dir*(g.ori==0?1:-1);let F=C(h[ee==1?d:p]),te=$(x[ee==1?d:p]),Y=te,ie=te;a&&l==-1&&(ie=se,Z(T,ie,F)),Z(T,te,F);for(let oe=ee==1?d:p;oe>=d&&oe<=p;oe+=ee){let de=h[oe];if(de==null)continue;let re=$(x[oe]),W=C(de);l==1?Z(T,re,F):Z(T,Y,W),Z(T,re,W),F=W,Y=re}let I=Y;a&&l==1&&(I=se+O,Z(T,I,F));let[Ae,pe]=Xs(c,u);if(m.fill!=null||Ae!=0){let oe=Q.fill=new Path2D(T),de=m.fillTo(c,u,m.min,m.max,Ae),re=C(de);Z(oe,I,re),Z(oe,ie,re)}if(!m.spanGaps){let oe=[];oe.push(...$s(x,h,d,p,ee,$,n));let de=m.width*Te/2,re=i||l==1?de:-de,W=i||l==-1?-de:de;oe.forEach(_e=>{_e[0]+=re,_e[1]+=W}),Q.gaps=oe=m.gaps(c,u,d,p,oe),Q.clip=qn(oe,g.ori,z,q,S,H)}return pe!=0&&(Q.band=pe==2?[ol(c,u,d,p,T,-1),ol(c,u,d,p,T,1)]:ol(c,u,d,p,T,pe)),Q})}function da(e,l,i,n,a,c,u=Fe){if(e.length>1){let d=null;for(let p=0,m=1/0;p<e.length;p++)if(l[p]!==void 0){if(d!=null){let x=nt(e[p]-e[d]);x<m&&(m=x,u=nt(i(e[p],n,a,c)-i(e[d],n,a,c)))}d=p}}return u}function zu(e){e=e||gn;const l=ye(e.size,[.6,Fe,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=ge(a),u=1-l[0],d=ye(l[1],Fe),p=ye(l[2],1),m=ye(e.disp,gn),x=ye(e.each,N=>{}),{fill:h,stroke:g}=m;return(N,V,L,z)=>Pl(N,V,(q,S,H,E,se,O,$,C,Z,Q,T)=>{let ee=q.pxRound,F=i,te=n*Te,Y=d*Te,ie=p*Te,I,Ae;E.ori==0?[I,Ae]=c(N,V):[Ae,I]=c(N,V);const pe=E.dir*(E.ori==0?1:-1);let oe=E.ori==0?Zn:ei,de=E.ori==0?x:(w,K,j,le,be,he,Ue)=>{x(w,K,j,be,le,Ue,he)},re=ye(N.bands,qs).find(w=>w.series[0]==V),W=re!=null?re.dir:0,_e=q.fillTo(N,V,q.min,q.max,W),De=ee($(_e,se,T,Z)),we,ce,Re,Ie=Q,me=ee(q.width*Te),We=!1,fe=null,Le=null,$e=null,pt=null;h!=null&&(me==0||g!=null)&&(We=!0,fe=h.values(N,V,L,z),Le=new Map,new Set(fe).forEach(w=>{w!=null&&Le.set(w,new Path2D)}),me>0&&($e=g.values(N,V,L,z),pt=new Map,new Set($e).forEach(w=>{w!=null&&pt.set(w,new Path2D)})));let{x0:mt,size:gt}=m;if(mt!=null&&gt!=null){F=1,S=mt.values(N,V,L,z),mt.unit==2&&(S=S.map(j=>N.posToVal(C+j*Q,E.key,!0)));let w=gt.values(N,V,L,z);gt.unit==2?ce=w[0]*Q:ce=O(w[0],E,Q,C)-O(0,E,Q,C),Ie=da(S,H,O,E,Q,C,Ie),Re=Ie-ce+te}else Ie=da(S,H,O,E,Q,C,Ie),Re=Ie*u+te,ce=Ie-Re;Re<1&&(Re=0),me>=ce/2&&(me=0),Re<5&&(ee=Ea);let Bt=Re>0,Et=Ie-Re-(Bt?me:0);ce=ee(Rs(Et,ie,Y)),we=(F==0?ce/2:F==pe?0:ce)-F*pe*((F==0?te/2:0)+(Bt?me/2:0));const Ye={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},B=We?null:new Path2D;let y=null;if(re!=null)y=N.data[re.series[1]];else{let{y0:w,y1:K}=m;w!=null&&K!=null&&(H=K.values(N,V,L,z),y=w.values(N,V,L,z))}let P=I*ce,k=Ae*ce;for(let w=pe==1?L:z;w>=L&&w<=z;w+=pe){let K=H[w];if(K==null)continue;if(y!=null){let Je=y[w]??0;if(K-Je==0)continue;De=$(Je,se,T,Z)}let j=E.distr!=2||m!=null?S[w]:w,le=O(j,E,Q,C),be=$(ye(K,_e),se,T,Z),he=ee(le-we),Ue=ee(Mt(be,De)),Ke=ee(Qt(be,De)),et=Ue-Ke;if(K!=null){let Je=K<0?k:P,wt=K<0?P:k;We?(me>0&&$e[w]!=null&&oe(pt.get($e[w]),he,Ke+zt(me/2),ce,Mt(0,et-me),Je,wt),fe[w]!=null&&oe(Le.get(fe[w]),he,Ke+zt(me/2),ce,Mt(0,et-me),Je,wt)):oe(B,he,Ke+zt(me/2),ce,Mt(0,et-me),Je,wt),de(N,V,w,he-me/2,Ke,ce+me,et)}}return me>0?Ye.stroke=We?pt:B:We||(Ye._fill=q.width==0?q._fill:q._stroke??q._fill,Ye.width=0),Ye.fill=We?Le:B,Ye})}function Ou(e,l){const i=ye(l?.alignGaps,0);return(n,a,c,u)=>Pl(n,a,(d,p,m,x,h,g,N,V,L,z,q)=>{[c,u]=Bn(m,c,u);let S=d.pxRound,H=I=>S(g(I,x,z,V)),E=I=>S(N(I,h,q,L)),se,O,$;x.ori==0?(se=Kn,$=Ql,O=er):(se=Jn,$=Xl,O=tr);const C=x.dir*(x.ori==0?1:-1);let Z=H(p[C==1?c:u]),Q=Z,T=[],ee=[];for(let I=C==1?c:u;I>=c&&I<=u;I+=C)if(m[I]!=null){let pe=p[I],oe=H(pe);T.push(Q=oe),ee.push(E(m[I]))}const F={stroke:e(T,ee,se,$,O,S),fill:null,clip:null,band:null,gaps:null,flags:Jl},te=F.stroke;let[Y,ie]=Xs(n,a);if(d.fill!=null||Y!=0){let I=F.fill=new Path2D(te),Ae=d.fillTo(n,a,d.min,d.max,Y),pe=E(Ae);$(I,Q,pe),$(I,Z,pe)}if(!d.spanGaps){let I=[];I.push(...$s(p,m,c,u,C,H,i)),F.gaps=I=d.gaps(n,a,c,u,I),F.clip=qn(I,x.ori,V,L,z,q)}return ie!=0&&(F.band=ie==2?[ol(n,a,c,u,te,-1),ol(n,a,c,u,te,1)]:ol(n,a,c,u,te,ie)),F})}function Nu(e){return Ou(Vu,e)}function Vu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),u==2)n(d,e[1],l[1]);else{let p=Array(u),m=Array(u-1),x=Array(u-1),h=Array(u-1);for(let g=0;g<u-1;g++)x[g]=l[g+1]-l[g],h[g]=e[g+1]-e[g],m[g]=x[g]/h[g];p[0]=m[0];for(let g=1;g<u-1;g++)m[g]===0||m[g-1]===0||m[g-1]>0!=m[g]>0?p[g]=0:(p[g]=3*(h[g-1]+h[g])/((2*h[g]+h[g-1])/m[g-1]+(h[g]+2*h[g-1])/m[g]),isFinite(p[g])||(p[g]=0));p[u-1]=m[u-2];for(let g=0;g<u-1;g++)a(d,e[g]+h[g]/3,l[g]+p[g]*h[g]/3,e[g+1]-h[g]/3,l[g+1]-p[g+1]*h[g]/3,e[g+1],l[g+1])}return d}const Ns=new Set;function pa(){for(let e of Ns)e.syncRect(!0)}Zl&&(Ll(wo,Yl,pa),Ll(_o,Yl,pa,!0),Ll(Nn,Yl,()=>{st.pxRatio=Te}));const Gu=sr(),Hu=lr();function ha(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Vs(c,u,l,i))}function Iu(e,l){return e.map((i,n)=>n==0?{}:Xe({},l,i))}function Vs(e,l,i,n){return Xe({},l==0?i:n,e)}function ir(e,l,i){return l==null?ql:[l,i]}const Wu=ir;function Bu(e,l,i){return l==null?ql:Vn(l,i,Ys,!0)}function ar(e,l,i,n){return l==null?ql:Un(l,i,e.scales[n].log,!1)}const Uu=ar;function rr(e,l,i,n){return l==null?ql:Us(l,i,e.scales[n].log,!1)}const Yu=rr;function ju(e,l,i,n,a){let c=Mt(ji(e),ji(l)),u=l-e,d=Zt(a/n*u,i);do{let p=i[d],m=n*p/u;if(m>=a&&c+(p<5?xl.get(p):0)<=17)return[p,m]}while(++d<i.length);return[0,0]}function va(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=tt((i=+a)*Te))+"px"),[e,l,i]}function qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=ze(l[2]*Te,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function st(e,l,i){const n={mode:ye(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function d(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let p=!1;n.status=0;const m=n.root=It($r);if(e.id!=null&&(m.id=e.id),Ft(m,e.class),e.title){let t=It(lo,m);t.textContent=e.title}const x=Jt("canvas"),h=n.ctx=x.getContext("2d"),g=It(no,m);Ll("click",g,t=>{t.target===V&&(Ne!=Vl||Be!=Gl)&&vt.click(n,t)},!0);const N=n.under=It(so,g);g.appendChild(x);const V=n.over=It(io,g);e=Kl(e);const L=+ye(e.pxAlign,1),z=fa(L);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const q=e.ms||.001,S=n.series=a==1?ha(e.series||[],sa,ua,!1):Iu(e.series||[null],oa),H=n.axes=ha(e.axes||[],na,aa,!0),E=n.scales={},se=n.bands=e.bands||[];se.forEach(t=>{t.fill=ge(t.fill||null),t.dir=ye(t.dir,-1)});const O=a==2?S[1].facets[0].scale:S[0].scale,$={axes:_r,series:hr},C=(e.drawOrder||["axes","series"]).map(t=>$[t]);function Z(t){const s=t.distr==3?r=>rl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>ys(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:v}=t,_=v-f;return(o-f)/_}}function Q(t){let s=E[t];if(s==null){let r=(e.scales||gn)[t]||gn;if(r.from!=null){Q(r.from);let o=Xe({},E[r.from],r,{key:t});o.valToPct=Z(o),E[t]=o}else{s=E[t]=Xe({},t==O?Ja:Du,r),s.key=t;let o=s.time,f=s.range,v=_l(f);if((t!=O||a==2&&!o)&&(v&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Bi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Bi:{mode:1,hard:f[1],soft:f[1]}},v=!1),!v&&jn(f))){let _=f;f=(M,A,G)=>A==null?ql:Vn(A,G,_)}s.range=ge(f||(o?Wu:t==O?s.distr==3?Uu:s.distr==4?Yu:ir:s.distr==3?ar:s.distr==4?rr:Bu)),s.auto=ge(v?!1:s.auto),s.clamp=ge(s.clamp||Au),s._min=s._max=null,s.valToPct=Z(s)}}}Q("x"),Q("y"),a==1&&S.forEach(t=>{Q(t.scale)}),H.forEach(t=>{Q(t.scale)});for(let t in e.scales)Q(t);const T=E[O],ee=T.distr;let F,te;T.ori==0?(Ft(m,eo),F=c,te=u):(Ft(m,to),F=u,te=c);const Y={};for(let t in E){let s=E[t];(s.min!=null||s.max!=null)&&(Y[t]={min:s.min,max:s.max},s.min=s.max=null)}const ie=e.tzDate||(t=>new Date(tt(t/q))),I=e.fmtDate||Ks,Ae=q==1?tu(ie):su(ie),pe=ea(ie,$i(q==1?eu:nu,I)),oe=la(ie,ta(au,I)),de=[],re=n.legend=Xe({},uu,e.legend),W=n.cursor=Xe({},vu,{drag:{y:a==2}},e.cursor),_e=re.show,De=W.show,we=re.markers;re.idxs=de,we.width=ge(we.width),we.dash=ge(we.dash),we.stroke=ge(we.stroke),we.fill=ge(we.fill);let ce,Re,Ie,me=[],We=[],fe,Le=!1,$e={};if(re.live){const t=S[1]?S[1].values:null;Le=t!=null,fe=Le?t(n,1,0):{_:0};for(let s in fe)$e[s]=Ws}if(_e)if(ce=Jt("table",fo,m),Ie=Jt("tbody",null,ce),re.mount(n,ce),Le){Re=Jt("thead",null,ce,Ie);let t=Jt("tr",null,Re);Jt("th",null,t);for(var pt in fe)Jt("th",Li,t).textContent=pt}else Ft(ce,ho),re.live&&Ft(ce,po);const mt={show:!0},gt={show:!1};function Bt(t,s){if(s==0&&(Le||!re.live||a==2))return ql;let r=[],o=Jt("tr",vo,Ie,Ie.childNodes[s]);Ft(o,t.class),t.show||Ft(o,El);let f=Jt("th",null,o);if(we.show){let M=It(mo,f);if(s>0){let A=we.width(n,s);A&&(M.style.border=A+"px "+we.dash(n,s)+" "+we.stroke(n,s)),M.style.background=we.fill(n,s)}}let v=It(Li,f);t.label instanceof HTMLElement?v.appendChild(t.label):v.textContent=t.label,s>0&&(we.show||(v.style.color=t.width>0?we.stroke(n,s):we.fill(n,s)),Ye("click",f,M=>{if(W._lock)return;Yt(M);let A=S.indexOf(t);if((M.ctrlKey||M.metaKey)!=re.isolate){let G=S.some((U,J)=>J>0&&J!=A&&U.show);S.forEach((U,J)=>{J>0&&el(J,G?J==A?mt:gt:mt,!0,Qe.setSeries)})}else el(A,{show:!t.show},!0,Qe.setSeries)},!1),cl&&Ye(Fi,f,M=>{W._lock||(Yt(M),el(S.indexOf(t),Il,!0,Qe.setSeries))},!1));for(var _ in fe){let M=Jt("td",go,o);M.textContent="--",r.push(M)}return[o,r]}const Et=new Map;function Ye(t,s,r,o=!0){const f=Et.get(s)||{},v=W.bind[t](n,s,r,o);v&&(Ll(t,s,f[t]=v),Et.set(s,f))}function B(t,s,r){const o=Et.get(s)||{};for(let f in o)(t==null||f==t)&&(Ps(f,s,o[f]),delete o[f]);t==null&&Et.delete(s)}let y=0,P=0,k=0,w=0,K=0,j=0,le=K,be=j,he=k,Ue=w,Ke=0,et=0,Je=0,wt=0;n.bbox={};let Ut=!1,il=!1,Nt=!1,at=!1,ul=!1,bt=!1;function $l(t,s,r){(r||t!=n.width||s!=n.height)&&en(t,s),Fl(!1),Nt=!0,il=!0,zl()}function en(t,s){n.width=y=k=t,n.height=P=w=s,K=j=0,St(),$t();let r=n.bbox;Ke=r.left=Tl(K*Te,.5),et=r.top=Tl(j*Te,.5),Je=r.width=Tl(k*Te,.5),wt=r.height=Tl(w*Te,.5)}const xn=3;function Qn(){let t=!1,s=0;for(;!t;){s++;let r=gr(s),o=wr(s);t=s==xn||r&&o,t||(en(n.width,n.height),il=!0)}}function Xt({width:t,height:s}){$l(t,s)}n.setSize=Xt;function St(){let t=!1,s=!1,r=!1,o=!1;H.forEach((f,v)=>{if(f.show&&f._show){let{side:_,_size:M}=f,A=_%2,G=f.label!=null?f.labelSize:0,U=M+G;U>0&&(A?(k-=U,_==3?(K+=U,o=!0):r=!0):(w-=U,_==0?(j+=U,t=!0):s=!0))}}),bl[0]=t,bl[1]=r,bl[2]=s,bl[3]=o,k-=hl[1]+hl[3],K+=hl[3],w-=hl[2]+hl[0],j+=hl[0]}function $t(){let t=K+k,s=j+w,r=K,o=j;function f(v,_){switch(v){case 1:return t+=_,t-_;case 2:return s+=_,s-_;case 3:return r-=_,r+_;case 0:return o-=_,o+_}}H.forEach((v,_)=>{if(v.show&&v._show){let M=v.side;v._pos=f(M,v._size),v.label!=null&&(v._lpos=f(M,v.labelSize))}})}if(W.dataIdx==null){let t=W.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=ge(t.prox),o=t.bias??=0;W.dataIdx=(f,v,_,M)=>{if(v==0)return _;let A=_,G=r(f,v,_,M)??Fe,U=G>=0&&G<Fe,J=T.ori==0?k:w,ue=W.left,ke=l[0],Se=l[v];if(s.has(Se[_])){A=null;let ve=null,ae=null,ne;if(o==0||o==-1)for(ne=_;ve==null&&ne-- >0;)s.has(Se[ne])||(ve=ne);if(o==0||o==1)for(ne=_;ae==null&&ne++<Se.length;)s.has(Se[ne])||(ae=ne);if(ve!=null||ae!=null)if(U){let Ge=ve==null?-1/0:F(ke[ve],T,J,0),je=ae==null?1/0:F(ke[ae],T,J,0),dt=ue-Ge,Pe=je-ue;dt<=Pe?dt<=G&&(A=ve):Pe<=G&&(A=ae)}else A=ae==null?ve:ve==null?ae:_-ve<=ae-_?ve:ae}else U&&nt(ue-F(ke[_],T,J,0))>G&&(A=null);return A}}const Yt=t=>{W.event=t};W.idxs=de,W._lock=!1;let Ze=W.points;Ze.show=ge(Ze.show),Ze.size=ge(Ze.size),Ze.stroke=ge(Ze.stroke),Ze.width=ge(Ze.width),Ze.fill=ge(Ze.fill);const Vt=n.focus=Xe({},e.focus||{alpha:.3},W.focus),cl=Vt.prox>=0,fl=cl&&Ze.one;let At=[],dl=[],pl=[];function bn(t,s){let r=Ze.show(n,s);if(r instanceof HTMLElement)return Ft(r,co),Ft(r,t.class),sl(r,-10,-10,k,w),V.insertBefore(r,At[s]),r}function Sn(t,s){if(a==1||s>0){let r=a==1&&E[t.scale].time,o=t.value;t.value=r?Ji(o)?la(ie,ta(o,I)):o||oe:o||Tu,t.label=t.label||(r?gu:mu)}if(fl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Gu||Do,t.fillTo=ge(t.fillTo||Lu),t.pxAlign=+ye(t.pxAlign,L),t.pxRound=fa(t.pxAlign),t.stroke=ge(t.stroke||null),t.fill=ge(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Mu(Mt(1,t.width),1),o=t.points=Xe({},{size:r,width:Mt(1,r*.2),stroke:t.stroke,space:r*2,paths:Hu,_stroke:null,_fill:null},t.points);o.show=ge(o.show),o.filter=ge(o.filter),o.fill=ge(o.fill),o.stroke=ge(o.stroke),o.paths=ge(o.paths),o.pxAlign=t.pxAlign}if(_e){let r=Bt(t,s);me.splice(s,0,r[0]),We.splice(s,0,r[1]),re.values.push(null)}if(De){de.splice(s,0,null);let r=null;fl?s==0&&(r=bn(t,s)):s>0&&(r=bn(t,s)),At.splice(s,0,r),dl.splice(s,0,0),pl.splice(s,0,0)}ft("addSeries",s)}function ur(t,s){s=s??S.length,t=a==1?Vs(t,s,sa,ua):Vs(t,s,{},oa),S.splice(s,0,t),Sn(S[s],s)}n.addSeries=ur;function cr(t){if(S.splice(t,1),_e){re.values.splice(t,1),We.splice(t,1);let s=me.splice(t,1)[0];B(null,s.firstChild),s.remove()}De&&(de.splice(t,1),At.splice(t,1)[0].remove(),dl.splice(t,1),pl.splice(t,1)),ft("delSeries",t)}n.delSeries=cr;const bl=[!1,!1,!1,!1];function fr(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=E[t.scale];o==null&&(t.scale=r?S[1].scale:O,o=E[t.scale]);let f=o.time;t.size=ge(t.size),t.space=ge(t.space),t.rotate=ge(t.rotate),_l(t.incrs)&&t.incrs.forEach(_=>{!xl.has(_)&&xl.set(_,La(_))}),t.incrs=ge(t.incrs||(o.distr==2?Qo:f?q==1?$o:lu:Ml)),t.splits=ge(t.splits||(f&&o.distr==1?Ae:o.distr==3?Fs:o.distr==4?xu:_u)),t.stroke=ge(t.stroke),t.grid.stroke=ge(t.grid.stroke),t.ticks.stroke=ge(t.ticks.stroke),t.border.stroke=ge(t.border.stroke);let v=t.values;t.values=_l(v)&&!_l(v[0])?ge(v):f?_l(v)?ea(ie,$i(v,I)):Ji(v)?iu(ie,v):v||pe:v||wu,t.filter=ge(t.filter||(o.distr>=3&&o.log==10?yu:o.distr==3&&o.log==2?ku:Aa)),t.font=va(t.font),t.labelFont=va(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(bl[s]=!0,t._el=It(ao,g))}}function tn(t,s,r,o){let[f,v,_,M]=r,A=s%2,G=0;return A==0&&(M||v)&&(G=s==0&&!f||s==2&&!_?tt(na.size/3):0),A==1&&(f||_)&&(G=s==1&&!v||s==3&&!M?tt(aa.size/2):0),G}const ti=n.padding=(e.padding||[tn,tn,tn,tn]).map(t=>ge(ye(t,tn))),hl=n._padding=ti.map((t,s)=>t(n,s,bl,0));let ht,rt=null,ot=null;const yn=a==1?S[0].idxs:null;let jt=null,ln=!1;function li(t,s){if(l=t??[],n.data=n._data=l,a==2){ht=0;for(let r=1;r<S.length;r++)ht+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),jt=l[0],ht=jt.length;let r=l;if(ee==2){r=l.slice();let o=r[0]=Array(ht);for(let f=0;f<ht;f++)o[f]=f}n._data=l=r}if(Fl(!0),ft("setData"),ee==2&&(Nt=!0),s!==!1){let r=T;r.auto(n,ln)?Xn():ml(O,r.min,r.max),at=at||W.left>=0,bt=!0,zl()}}n.setData=li;function Xn(){ln=!0;let t,s;a==1&&(ht>0?(rt=yn[0]=0,ot=yn[1]=ht-1,t=l[0][rt],s=l[0][ot],ee==2?(t=rt,s=ot):t==s&&(ee==3?[t,s]=Un(t,t,T.log,!1):ee==4?[t,s]=Us(t,t,T.log,!1):T.time?s=t+tt(86400/q):[t,s]=Vn(t,s,Ys,!0))):(rt=yn[0]=t=null,ot=yn[1]=s=null)),ml(O,t,s)}let kn,Rl,$n,es,ts,ls,ns,ss,is,Dt;function ni(t,s,r,o,f,v){t??=Pi,r??=qs,o??="butt",f??=Pi,v??="round",t!=kn&&(h.strokeStyle=kn=t),f!=Rl&&(h.fillStyle=Rl=f),s!=$n&&(h.lineWidth=$n=s),v!=ts&&(h.lineJoin=ts=v),o!=ls&&(h.lineCap=ls=o),r!=es&&h.setLineDash(es=r)}function si(t,s,r,o){s!=Rl&&(h.fillStyle=Rl=s),t!=ns&&(h.font=ns=t),r!=ss&&(h.textAlign=ss=r),o!=is&&(h.textBaseline=is=o)}function as(t,s,r,o,f=0){if(o.length>0&&t.auto(n,ln)&&(s==null||s.min==null)){let v=ye(rt,0),_=ye(ot,o.length-1),M=r.min==null?yo(o,v,_,f,t.distr==3):[r.min,r.max];t.min=Qt(t.min,r.min=M[0]),t.max=Mt(t.max,r.max=M[1])}}const ii={min:null,max:null};function dr(){for(let o in E){let f=E[o];Y[o]==null&&(f.min==null||Y[O]!=null&&f.auto(n,ln))&&(Y[o]=ii)}for(let o in E){let f=E[o];Y[o]==null&&f.from!=null&&Y[f.from]!=null&&(Y[o]=ii)}Y[O]!=null&&Fl(!0);let t={};for(let o in Y){let f=Y[o];if(f!=null){let v=t[o]=Kl(E[o],Po);if(f.min!=null)Xe(v,f);else if(o!=O||a==2)if(ht==0&&v.from==null){let _=v.range(n,null,null,o);v.min=_[0],v.max=_[1]}else v.min=Fe,v.max=-Fe}}if(ht>0){S.forEach((o,f)=>{if(a==1){let v=o.scale,_=Y[v];if(_==null)return;let M=t[v];if(f==0){let A=M.range(n,M.min,M.max,v);M.min=A[0],M.max=A[1],rt=Zt(M.min,l[0]),ot=Zt(M.max,l[0]),ot-rt>1&&(l[0][rt]<M.min&&rt++,l[0][ot]>M.max&&ot--),o.min=jt[rt],o.max=jt[ot]}else o.show&&o.auto&&as(M,_,o,l[f],o.sorted);o.idxs[0]=rt,o.idxs[1]=ot}else if(f>0&&o.show&&o.auto){let[v,_]=o.facets,M=v.scale,A=_.scale,[G,U]=l[f],J=t[M],ue=t[A];J!=null&&as(J,Y[M],v,G,v.sorted),ue!=null&&as(ue,Y[A],_,U,_.sorted),o.min=_.min,o.max=_.max}});for(let o in t){let f=t[o],v=Y[o];if(f.from==null&&(v==null||v.min==null)){let _=f.range(n,f.min==Fe?null:f.min,f.max==-Fe?null:f.max,o);f.min=_[0],f.max=_[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let v=t[f.from];if(v.min==null)f.min=f.max=null;else{let _=f.range(n,v.min,v.max,o);f.min=_[0],f.max=_[1]}}}let s={},r=!1;for(let o in t){let f=t[o],v=E[o];if(v.min!=f.min||v.max!=f.max){v.min=f.min,v.max=f.max;let _=v.distr;v._min=_==3?rl(v.min):_==4?ys(v.min,v.asinh):_==100?v.fwd(v.min):v.min,v._max=_==3?rl(v.max):_==4?ys(v.max,v.asinh):_==100?v.fwd(v.max):v.max,s[o]=r=!0}}if(r){S.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Nt=!0,ft("setScale",o);De&&W.left>=0&&(at=bt=!0)}for(let o in Y)Y[o]=null}function pr(t){let s=Rs(rt-1,0,ht-1),r=Rs(ot+1,0,ht-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<ht-1;)r++;return[s,r]}function hr(){if(ht>0){let t=S.some(s=>s._focus)&&Dt!=Vt.alpha;t&&(h.globalAlpha=Dt=Vt.alpha),S.forEach((s,r)=>{if(r>0&&s.show&&(ai(r,!1),ai(r,!0),s._paths==null)){let o=Dt;Dt!=s.alpha&&(h.globalAlpha=Dt=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Dt!=o&&(h.globalAlpha=Dt=o)}}),S.forEach((s,r)=>{if(r>0&&s.show){let o=Dt;Dt!=s.alpha&&(h.globalAlpha=Dt=s.alpha),s._paths!=null&&ri(r,!1);{let f=s._paths!=null?s._paths.gaps:null,v=s.points.show(n,r,rt,ot,f),_=s.points.filter(n,r,v,f);(v||_)&&(s.points._paths=s.points.paths(n,r,rt,ot,_),ri(r,!0))}Dt!=o&&(h.globalAlpha=Dt=o),ft("drawSeries",r)}}),t&&(h.globalAlpha=Dt=1)}}function ai(t,s){let r=s?S[t].points:S[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function ri(t,s){let r=s?S[t].points:S[t],{stroke:o,fill:f,clip:v,flags:_,_stroke:M=r._stroke,_fill:A=r._fill,_width:G=r.width}=r._paths;G=ze(G*Te,3);let U=null,J=G%2/2;s&&A==null&&(A=G>0?"#fff":M);let ue=r.pxAlign==1&&J>0;if(ue&&h.translate(J,J),!s){let ke=Ke-G/2,Se=et-G/2,ve=Je+G,ae=wt+G;U=new Path2D,U.rect(ke,Se,ve,ae)}s?rs(M,G,r.dash,r.cap,A,o,f,_,v):vr(t,M,G,r.dash,r.cap,A,o,f,_,U,v),ue&&h.translate(-J,-J)}function vr(t,s,r,o,f,v,_,M,A,G,U){let J=!1;A!=0&&se.forEach((ue,ke)=>{if(ue.series[0]==t){let Se=S[ue.series[1]],ve=l[ue.series[1]],ae=(Se._paths||gn).band;_l(ae)&&(ae=ue.dir==1?ae[0]:ae[1]);let ne,Ge=null;Se.show&&ae&&To(ve,rt,ot)?(Ge=ue.fill(n,ke)||v,ne=Se._paths.clip):ae=null,rs(s,r,o,f,Ge,_,M,A,G,U,ne,ae),J=!0}}),J||rs(s,r,o,f,v,_,M,A,G,U)}const oi=Jl|Os;function rs(t,s,r,o,f,v,_,M,A,G,U,J){ni(t,s,r,o,f),(A||G||J)&&(h.save(),A&&h.clip(A),G&&h.clip(G)),J?(M&oi)==oi?(h.clip(J),U&&h.clip(U),Mn(f,_),Tn(t,v,s)):M&Os?(Mn(f,_),h.clip(J),Tn(t,v,s)):M&Jl&&(h.save(),h.clip(J),U&&h.clip(U),Mn(f,_),h.restore(),Tn(t,v,s)):(Mn(f,_),Tn(t,v,s)),(A||G||J)&&h.restore()}function Tn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{h.strokeStyle=kn=f,h.stroke(o)}):s!=null&&t&&h.stroke(s))}function Mn(t,s){s instanceof Map?s.forEach((r,o)=>{h.fillStyle=Rl=o,h.fill(r)}):s!=null&&t&&h.fill(s)}function mr(t,s,r,o){let f=H[t],v;if(o<=0)v=[0,0];else{let _=f._space=f.space(n,t,s,r,o),M=f._incrs=f.incrs(n,t,s,r,o,_);v=ju(s,r,M,o,_)}return f._found=v}function os(t,s,r,o,f,v,_,M,A,G){let U=_%2/2;L==1&&h.translate(U,U),ni(M,_,A,G,M),h.beginPath();let J,ue,ke,Se,ve=f+(o==0||o==3?-v:v);r==0?(ue=f,Se=ve):(J=f,ke=ve);for(let ae=0;ae<t.length;ae++)s[ae]!=null&&(r==0?J=ke=t[ae]:ue=Se=t[ae],h.moveTo(J,ue),h.lineTo(ke,Se));h.stroke(),L==1&&h.translate(-U,-U)}function gr(t){let s=!0;return H.forEach((r,o)=>{if(!r.show)return;let f=E[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Fl(!1));return}else r._show||(s=!1,r._show=!0,Fl(!1));let v=r.side,_=v%2,{min:M,max:A}=f,[G,U]=mr(o,M,A,_==0?k:w);if(U==0)return;let J=f.distr==2,ue=r._splits=r.splits(n,o,M,A,G,U,J),ke=f.distr==2?ue.map(ne=>jt[ne]):ue,Se=f.distr==2?jt[ue[1]]-jt[ue[0]]:G,ve=r._values=r.values(n,r.filter(n,ke,o,U,Se),o,U,Se);r._rotate=v==2?r.rotate(n,ve,o,U):0;let ae=r._size;r._size=Wt(r.size(n,ve,o,t)),ae!=null&&r._size!=ae&&(s=!1)}),s}function wr(t){let s=!0;return ti.forEach((r,o)=>{let f=r(n,o,bl,t);f!=hl[o]&&(s=!1),hl[o]=f}),s}function _r(){for(let t=0;t<H.length;t++){let s=H[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,v,_=s.stroke(n,t),M=r==0||r==3?-1:1,[A,G]=s._found;if(s.label!=null){let kt=s.labelGap*M,Rt=tt((s._lpos+kt)*Te);si(s.labelFont[0],_,"center",r==2?cn:Ci),h.save(),o==1?(f=v=0,h.translate(Rt,tt(et+wt/2)),h.rotate((r==3?-zn:zn)/2)):(f=tt(Ke+Je/2),v=Rt);let kl=Ma(s.label)?s.label(n,t,A,G):s.label;h.fillText(kl,f,v),h.restore()}if(G==0)continue;let U=E[s.scale],J=o==0?Je:wt,ue=o==0?Ke:et,ke=s._splits,Se=U.distr==2?ke.map(kt=>jt[kt]):ke,ve=U.distr==2?jt[ke[1]]-jt[ke[0]]:A,ae=s.ticks,ne=s.border,Ge=ae.show?ae.size:0,je=tt(Ge*Te),dt=tt((s.alignTo==2?s._size-Ge-s.gap:s.gap)*Te),Pe=s._rotate*-zn/180,qe=z(s._pos*Te),Ct=(je+dt)*M,yt=qe+Ct;v=o==0?yt:0,f=o==1?yt:0;let Gt=s.font[0],qt=s.align==1?Bl:s.align==2?xs:Pe>0?Bl:Pe<0?xs:o==0?"center":r==3?xs:Bl,ll=Pe||o==1?"middle":r==2?cn:Ci;si(Gt,_,qt,ll);let Pt=s.font[1]*s.lineGap,Ht=ke.map(kt=>z(d(kt,U,J,ue))),Kt=s._values;for(let kt=0;kt<Kt.length;kt++){let Rt=Kt[kt];if(Rt!=null){o==0?f=Ht[kt]:v=Ht[kt],Rt=""+Rt;let kl=Rt.indexOf(`
`)==-1?[Rt]:Rt.split(/\n/gm);for(let Tt=0;Tt<kl.length;Tt++){let Ei=kl[Tt];Pe?(h.save(),h.translate(f,v+Tt*Pt),h.rotate(Pe),h.fillText(Ei,0,0),h.restore()):h.fillText(Ei,f,v+Tt*Pt)}}}ae.show&&os(Ht,ae.filter(n,Se,t,G,ve),o,r,qe,je,ze(ae.width*Te,3),ae.stroke(n,t),ae.dash,ae.cap);let nl=s.grid;nl.show&&os(Ht,nl.filter(n,Se,t,G,ve),o,o==0?2:1,o==0?et:Ke,o==0?wt:Je,ze(nl.width*Te,3),nl.stroke(n,t),nl.dash,nl.cap),ne.show&&os([qe],[1],o==0?1:0,o==0?1:2,o==1?et:Ke,o==1?wt:Je,ze(ne.width*Te,3),ne.stroke(n,t),ne.dash,ne.cap)}ft("drawAxes")}function Fl(t){S.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let En=!1,us=!1,nn=[];function xr(){us=!1;for(let t=0;t<nn.length;t++)ft(...nn[t]);nn.length=0}function zl(){En||(Go(ui),En=!0)}function br(t,s=!1){En=!0,us=s,t(n),ui(),s&&nn.length>0&&queueMicrotask(xr)}n.batch=br;function ui(){if(Ut&&(dr(),Ut=!1),Nt&&(Qn(),Nt=!1),il){if(He(N,Bl,K),He(N,cn,j),He(N,pn,k),He(N,hn,w),He(V,Bl,K),He(V,cn,j),He(V,pn,k),He(V,hn,w),He(g,pn,y),He(g,hn,P),x.width=tt(y*Te),x.height=tt(P*Te),H.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let v=f===3||f===0?r:0,_=f%2==1;He(t,_?"left":"top",o-v),He(t,_?"width":"height",r),He(t,_?"top":"left",_?j:K),He(t,_?"height":"width",_?w:k),Cs(t,El)}else Ft(t,El)}),kn=Rl=$n=ts=ls=ns=ss=is=es=null,Dt=1,rn(!0),K!=le||j!=be||k!=he||w!=Ue){Fl(!1);let t=k/he,s=w/Ue;if(De&&!at&&W.left>=0){W.left*=t,W.top*=s,Ol&&sl(Ol,tt(W.left),0,k,w),Nl&&sl(Nl,0,tt(W.top),k,w);for(let r=0;r<At.length;r++){let o=At[r];o!=null&&(dl[r]*=t,pl[r]*=s,sl(o,Wt(dl[r]),Wt(pl[r]),k,w))}}if(Ve.show&&!ul&&Ve.left>=0&&Ve.width>0){Ve.left*=t,Ve.width*=t,Ve.top*=s,Ve.height*=s;for(let r in vs)He(Hl,r,Ve[r])}le=K,be=j,he=k,Ue=w}ft("setSize"),il=!1}y>0&&P>0&&(h.clearRect(0,0,x.width,x.height),ft("drawClear"),C.forEach(t=>t()),ft("draw")),Ve.show&&ul&&(An(Ve),ul=!1),De&&at&&(yl(null,!0,!1),at=!1),re.show&&re.live&&bt&&(ps(),bt=!1),p||(p=!0,n.status=1,ft("ready")),ln=!1,En=!1}n.redraw=(t,s)=>{Nt=s||!1,t!==!1?ml(O,T.min,T.max):zl()};function cs(t,s){let r=E[t];if(r.from==null){if(ht==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(ht>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==O&&r.distr==2&&ht>0&&(s.min=Zt(s.min,l[0]),s.max=Zt(s.max,l[0]),s.min==s.max&&s.max++),Y[t]=s,Ut=!0,zl()}}n.setScale=cs;let fs,ds,Ol,Nl,ci,fi,Vl,Gl,di,pi,Ne,Be,vl=!1;const vt=W.drag;let ut=vt.x,ct=vt.y;De&&(W.x&&(fs=It(oo,V)),W.y&&(ds=It(uo,V)),T.ori==0?(Ol=fs,Nl=ds):(Ol=ds,Nl=fs),Ne=W.left,Be=W.top);const Ve=n.select=Xe({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Hl=Ve.show?It(ro,Ve.over?V:N):null;function An(t,s){if(Ve.show){for(let r in t)Ve[r]=t[r],r in vs&&He(Hl,r,t[r]);s!==!1&&ft("setSelect")}}n.setSelect=An;function Sr(t){if(S[t].show)_e&&Cs(me[t],El);else if(_e&&Ft(me[t],El),De){let r=fl?At[0]:At[t];r!=null&&sl(r,-10,-10,k,w)}}function ml(t,s,r){cs(t,{min:s,max:r})}function el(t,s,r,o){s.focus!=null&&Er(t),s.show!=null&&S.forEach((f,v)=>{v>0&&(t==v||t==null)&&(f.show=s.show,Sr(v),a==2?(ml(f.facets[0].scale,null,null),ml(f.facets[1].scale,null,null)):ml(f.scale,null,null),zl())}),r!==!1&&ft("setSeries",t,s),o&&on("setSeries",n,t,s)}n.setSeries=el;function yr(t,s){Xe(se[t],s)}function kr(t,s){t.fill=ge(t.fill||null),t.dir=ye(t.dir,-1),s=s??se.length,se.splice(s,0,t)}function Tr(t){t==null?se.length=0:se.splice(t,1)}n.addBand=kr,n.setBand=yr,n.delBand=Tr;function Mr(t,s){S[t].alpha=s,De&&At[t]!=null&&(At[t].style.opacity=s),_e&&me[t]&&(me[t].style.opacity=s)}let al,gl,Sl;const Il={focus:!0};function Er(t){if(t!=Sl){let s=t==null,r=Vt.alpha!=1;S.forEach((o,f)=>{if(a==1||f>0){let v=s||f==0||f==t;o._focus=s?null:v,r&&Mr(f,v?1:Vt.alpha)}}),Sl=t,r&&zl()}}_e&&cl&&Ye(zi,ce,t=>{W._lock||(Yt(t),Sl!=null&&el(null,Il,!0,Qe.setSeries))});function tl(t,s,r){let o=E[s];r&&(t=t/Te-(o.ori==1?j:K));let f=k;o.ori==1&&(f=w,t=f-t),o.dir==-1&&(t=f-t);let v=o._min,_=o._max,M=t/f,A=v+(_-v)*M,G=o.distr;return G==3?jl(10,A):G==4?Eo(A,o.asinh):G==100?o.bwd(A):A}function Ar(t,s){let r=tl(t,O,s);return Zt(r,l[0],rt,ot)}n.valToIdx=t=>Zt(t,l[0]),n.posToIdx=Ar,n.posToVal=tl,n.valToPos=(t,s,r)=>E[s].ori==0?c(t,E[s],r?Je:k,r?Ke:0):u(t,E[s],r?wt:w,r?et:0),n.setCursor=(t,s,r)=>{Ne=t.left,Be=t.top,yl(null,s,r)};function hi(t,s){He(Hl,Bl,Ve.left=t),He(Hl,pn,Ve.width=s)}function vi(t,s){He(Hl,cn,Ve.top=t),He(Hl,hn,Ve.height=s)}let sn=T.ori==0?hi:vi,an=T.ori==1?hi:vi;function Dr(){if(_e&&re.live)for(let t=a==2?1:0;t<S.length;t++){if(t==0&&Le)continue;let s=re.values[t],r=0;for(let o in s)We[t][r++].firstChild.nodeValue=s[o]}}function ps(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{de[o]=r}):Co(t.idx)||de.fill(t.idx),re.idx=de[0]),_e&&re.live){for(let r=0;r<S.length;r++)(r>0||a==1&&!Le)&&Lr(r,de[r]);Dr()}bt=!1,s!==!1&&ft("setLegend")}n.setLegend=ps;function Lr(t,s){let r=S[t],o=t==0&&ee==2?jt:l[t],f;Le?f=r.values(n,t,s)??$e:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?$e:{_:f}),re.values[t]=f}function yl(t,s,r){di=Ne,pi=Be,[Ne,Be]=W.move(n,Ne,Be),W.left=Ne,W.top=Be,De&&(Ol&&sl(Ol,tt(Ne),0,k,w),Nl&&sl(Nl,0,tt(Be),k,w));let o,f=rt>ot;al=Fe,gl=null;let v=T.ori==0?k:w,_=T.ori==1?k:w;if(Ne<0||ht==0||f){o=W.idx=null;for(let M=0;M<S.length;M++){let A=At[M];A!=null&&sl(A,-10,-10,k,w)}cl&&el(null,Il,!0,t==null&&Qe.setSeries),re.live&&(de.fill(o),bt=!0)}else{let M,A,G;a==1&&(M=T.ori==0?Ne:Be,A=tl(M,O),o=W.idx=Zt(A,l[0],rt,ot),G=F(l[0][o],T,v,0));let U=-10,J=-10,ue=0,ke=0,Se=!0,ve="",ae="";for(let ne=a==2?1:0;ne<S.length;ne++){let Ge=S[ne],je=de[ne],dt=je==null?null:a==1?l[ne][je]:l[ne][1][je],Pe=W.dataIdx(n,ne,o,A),qe=Pe==null?null:a==1?l[ne][Pe]:l[ne][1][Pe];if(bt=bt||qe!=dt||Pe!=je,de[ne]=Pe,ne>0&&Ge.show){let Ct=Pe==null?-10:Pe==o?G:F(a==1?l[0][Pe]:l[ne][0][Pe],T,v,0),yt=qe==null?-10:te(qe,a==1?E[Ge.scale]:E[Ge.facets[1].scale],_,0);if(cl&&qe!=null){let Gt=T.ori==1?Ne:Be,qt=nt(Vt.dist(n,ne,Pe,yt,Gt));if(qt<al){let ll=Vt.bias;if(ll!=0){let Pt=tl(Gt,Ge.scale),Ht=qe>=0?1:-1,Kt=Pt>=0?1:-1;Kt==Ht&&(Kt==1?ll==1?qe>=Pt:qe<=Pt:ll==1?qe<=Pt:qe>=Pt)&&(al=qt,gl=ne)}else al=qt,gl=ne}}if(bt||fl){let Gt,qt;T.ori==0?(Gt=Ct,qt=yt):(Gt=yt,qt=Ct);let ll,Pt,Ht,Kt,nl,kt,Rt=!0,kl=Ze.bbox;if(kl!=null){Rt=!1;let Tt=kl(n,ne);Ht=Tt.left,Kt=Tt.top,ll=Tt.width,Pt=Tt.height}else Ht=Gt,Kt=qt,ll=Pt=Ze.size(n,ne);if(kt=Ze.fill(n,ne),nl=Ze.stroke(n,ne),fl)ne==gl&&al<=Vt.prox&&(U=Ht,J=Kt,ue=ll,ke=Pt,Se=Rt,ve=kt,ae=nl);else{let Tt=At[ne];Tt!=null&&(dl[ne]=Ht,pl[ne]=Kt,Wi(Tt,ll,Pt,Rt),Hi(Tt,kt,nl),sl(Tt,Wt(Ht),Wt(Kt),k,w))}}}}if(fl){let ne=Vt.prox,Ge=Sl==null?al<=ne:al>ne||gl!=Sl;if(bt||Ge){let je=At[0];je!=null&&(dl[0]=U,pl[0]=J,Wi(je,ue,ke,Se),Hi(je,ve,ae),sl(je,Wt(U),Wt(J),k,w))}}}if(Ve.show&&vl)if(t!=null){let[M,A]=Qe.scales,[G,U]=Qe.match,[J,ue]=t.cursor.sync.scales,ke=t.cursor.drag;if(ut=ke._x,ct=ke._y,ut||ct){let{left:Se,top:ve,width:ae,height:ne}=t.select,Ge=t.scales[J].ori,je=t.posToVal,dt,Pe,qe,Ct,yt,Gt=M!=null&&G(M,J),qt=A!=null&&U(A,ue);Gt&&ut?(Ge==0?(dt=Se,Pe=ae):(dt=ve,Pe=ne),qe=E[M],Ct=F(je(dt,J),qe,v,0),yt=F(je(dt+Pe,J),qe,v,0),sn(Qt(Ct,yt),nt(yt-Ct))):sn(0,v),qt&&ct?(Ge==1?(dt=Se,Pe=ae):(dt=ve,Pe=ne),qe=E[A],Ct=te(je(dt,ue),qe,_,0),yt=te(je(dt+Pe,ue),qe,_,0),an(Qt(Ct,yt),nt(yt-Ct))):an(0,_)}else ms()}else{let M=nt(di-ci),A=nt(pi-fi);if(T.ori==1){let ue=M;M=A,A=ue}ut=vt.x&&M>=vt.dist,ct=vt.y&&A>=vt.dist;let G=vt.uni;G!=null?ut&&ct&&(ut=M>=G,ct=A>=G,!ut&&!ct&&(A>M?ct=!0:ut=!0)):vt.x&&vt.y&&(ut||ct)&&(ut=ct=!0);let U,J;ut&&(T.ori==0?(U=Vl,J=Ne):(U=Gl,J=Be),sn(Qt(U,J),nt(J-U)),ct||an(0,_)),ct&&(T.ori==1?(U=Vl,J=Ne):(U=Gl,J=Be),an(Qt(U,J),nt(J-U)),ut||sn(0,v)),!ut&&!ct&&(sn(0,0),an(0,0))}if(vt._x=ut,vt._y=ct,t==null){if(r){if(Mi!=null){let[M,A]=Qe.scales;Qe.values[0]=M!=null?tl(T.ori==0?Ne:Be,M):null,Qe.values[1]=A!=null?tl(T.ori==1?Ne:Be,A):null}on(bs,n,Ne,Be,k,w,o)}if(cl){let M=r&&Qe.setSeries,A=Vt.prox;Sl==null?al<=A&&el(gl,Il,!0,M):al>A?el(null,Il,!0,M):gl!=Sl&&el(gl,Il,!0,M)}}bt&&(re.idx=o,ps()),s!==!1&&ft("setCursor")}let wl=null;Object.defineProperty(n,"rect",{get(){return wl==null&&rn(!1),wl}});function rn(t=!1){t?wl=null:(wl=V.getBoundingClientRect(),ft("syncRect",wl))}function mi(t,s,r,o,f,v,_){W._lock||vl&&t!=null&&t.movementX==0&&t.movementY==0||(hs(t,s,r,o,f,v,_,!1,t!=null),t!=null?yl(null,!0,!0):yl(s,!0,!1))}function hs(t,s,r,o,f,v,_,M,A){if(wl==null&&rn(!1),Yt(t),t!=null)r=t.clientX-wl.left,o=t.clientY-wl.top;else{if(r<0||o<0){Ne=-10,Be=-10;return}let[G,U]=Qe.scales,J=s.cursor.sync,[ue,ke]=J.values,[Se,ve]=J.scales,[ae,ne]=Qe.match,Ge=s.axes[0].side%2==1,je=T.ori==0?k:w,dt=T.ori==1?k:w,Pe=Ge?v:f,qe=Ge?f:v,Ct=Ge?o:r,yt=Ge?r:o;if(Se!=null?r=ae(G,Se)?d(ue,E[G],je,0):-10:r=je*(Ct/Pe),ve!=null?o=ne(U,ve)?d(ke,E[U],dt,0):-10:o=dt*(yt/qe),T.ori==1){let Gt=r;r=o,o=Gt}}A&&(s==null||s.cursor.event.type==bs)&&((r<=1||r>=k-1)&&(r=Tl(r,k)),(o<=1||o>=w-1)&&(o=Tl(o,w))),M?(ci=r,fi=o,[Vl,Gl]=W.move(n,r,o)):(Ne=r,Be=o)}const vs={width:0,height:0,left:0,top:0};function ms(){An(vs,!1)}let gi,wi,_i,xi;function bi(t,s,r,o,f,v,_){vl=!0,ut=ct=vt._x=vt._y=!1,hs(t,s,r,o,f,v,_,!0,!1),t!=null&&(Ye(Ss,Ds,Si,!1),on(Ri,n,Vl,Gl,k,w,null));let{left:M,top:A,width:G,height:U}=Ve;gi=M,wi=A,_i=G,xi=U}function Si(t,s,r,o,f,v,_){vl=vt._x=vt._y=!1,hs(t,s,r,o,f,v,_,!1,!0);let{left:M,top:A,width:G,height:U}=Ve,J=G>0||U>0,ue=gi!=M||wi!=A||_i!=G||xi!=U;if(J&&ue&&An(Ve),vt.setScale&&J&&ue){let ke=M,Se=G,ve=A,ae=U;if(T.ori==1&&(ke=A,Se=U,ve=M,ae=G),ut&&ml(O,tl(ke,O),tl(ke+Se,O)),ct)for(let ne in E){let Ge=E[ne];ne!=O&&Ge.from==null&&Ge.min!=Fe&&ml(ne,tl(ve+ae,ne),tl(ve,ne))}ms()}else W.lock&&(W._lock=!W._lock,yl(s,!0,t!=null));t!=null&&(B(Ss,Ds),on(Ss,n,Ne,Be,k,w,null))}function Cr(t,s,r,o,f,v,_){if(W._lock)return;Yt(t);let M=vl;if(vl){let A=!0,G=!0,U=10,J,ue;T.ori==0?(J=ut,ue=ct):(J=ct,ue=ut),J&&ue&&(A=Ne<=U||Ne>=k-U,G=Be<=U||Be>=w-U),J&&A&&(Ne=Ne<Vl?0:k),ue&&G&&(Be=Be<Gl?0:w),yl(null,!0,!0),vl=!1}Ne=-10,Be=-10,de.fill(null),yl(null,!0,!0),M&&(vl=M)}function yi(t,s,r,o,f,v,_){W._lock||(Yt(t),Xn(),ms(),t!=null&&on(Oi,n,Ne,Be,k,w,null))}function ki(){H.forEach(qu),$l(n.width,n.height,!0)}Ll(Nn,Yl,ki);const Wl={};Wl.mousedown=bi,Wl.mousemove=mi,Wl.mouseup=Si,Wl.dblclick=yi,Wl.setSeries=(t,s,r,o)=>{let f=Qe.match[2];r=f(n,s,r),r!=-1&&el(r,o,!0,!1)},De&&(Ye(Ri,V,bi),Ye(bs,V,mi),Ye(Fi,V,t=>{Yt(t),rn(!1)}),Ye(zi,V,Cr),Ye(Oi,V,yi),Ns.add(n),n.syncRect=rn);const Dn=n.hooks=e.hooks||{};function ft(t,s,r){us?nn.push([t,s,r]):t in Dn&&Dn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Dn[s]=(Dn[s]||[]).concat(t.hooks[s])});const Ti=(t,s,r)=>r,Qe=Xe({key:null,setSeries:!1,filters:{pub:qi,sub:qi},scales:[O,S[1]?S[1].scale:null],match:[Ki,Ki,Ti],values:[null,null]},W.sync);Qe.match.length==2&&Qe.match.push(Ti),W.sync=Qe;const Mi=Qe.key,gs=Za(Mi);function on(t,s,r,o,f,v,_){Qe.filters.pub(t,s,r,o,f,v,_)&&gs.pub(t,s,r,o,f,v,_)}gs.sub(n);function Pr(t,s,r,o,f,v,_){Qe.filters.sub(t,s,r,o,f,v,_)&&Wl[t](null,s,r,o,f,v,_)}n.pub=Pr;function Rr(){gs.unsub(n),Ns.delete(n),Et.clear(),Ps(Nn,Yl,ki),m.remove(),ce?.remove(),ft("destroy")}n.destroy=Rr;function ws(){ft("init",e,l),li(l||e.data,!1),Y[O]?cs(O,Y[O]):Xn(),ul=Ve.show&&(Ve.width>0||Ve.height>0),at=bt=!0,$l(e.width,e.height)}return S.forEach(Sn),H.forEach(fr),i?i instanceof HTMLElement?(i.appendChild(m),ws()):i(n,ws):ws(),n}st.assign=Xe;st.fmtNum=js;st.rangeNum=Vn;st.rangeLog=Un;st.rangeAsinh=Us;st.orient=Pl;st.pxRatio=Te;st.join=Vo;st.fmtDate=Ks,st.tzDate=Jo;st.sync=Za;{st.addGap=Cu,st.clipGaps=qn;let e=st.paths={points:lr};e.linear=sr,e.stepped=Fu,e.bars=zu,e.spline=Nu}const or="/api",Ku=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ju(e,l=24){const i=await fetch(`${or}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Zu(e=24){const l=await fetch(`${or}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Qu=Oe('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=Oe('<button type="button" class="og-btn svelte-3wi8ix" title="Click to set Original Gravity"><span class="stat-value svelte-3wi8ix"> </span> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),$u=Oe('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Gravity</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div></div></div>'),ec=Oe('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function tc(e,l){In(l,!0);const i=.5,n=1.2,a=32,c=212;let u=lt(!1),d=lt(""),p=lt(null),m=Lt(()=>Rn.config.temp_units==="C"),x=Lt(_a),h=Lt(()=>{if(l.readings.length===0)return null;const C=l.readings.filter(fe=>fe.status!=="invalid");if(C.length===0)return null;const Z=[...C].sort((fe,Le)=>new Date(fe.timestamp).getTime()-new Date(Le.timestamp).getTime()),Q=Z[0],T=Z[Z.length-1],ee=Z.map(fe=>fe.sg_calibrated??fe.sg_raw).filter(fe=>fe!==null&&fe>=i&&fe<=n),F=Z.map(fe=>fe.temp_calibrated??fe.temp_raw).filter(fe=>fe!==null&&fe>=a&&fe<=c);if(ee.length===0)return null;const te=ee[ee.length-1],Y=ee[0],ie=Math.max(...ee),I=Math.min(...ee),Ae=new Date(Q.timestamp).getTime(),pe=new Date(T.timestamp).getTime(),de=(pe-Ae)/(1e3*60*60*24),re=de>0?(te-Y)/de:0;let W=null,_e=null,De=null,we=null;if(F.length>0){const fe=F[F.length-1],Le=F.reduce((mt,gt)=>mt+gt,0)/F.length,$e=Math.max(...F),pt=Math.min(...F);W=b(m)?dn(fe):fe,_e=b(m)?dn(Le):Le,De=b(m)?dn($e):$e,we=b(m)?dn(pt):pt}let ce=0;const Re=.001;for(let fe=ee.length-2;fe>=0;fe--)if(Math.abs(ee[fe]-te)>Re){const Le=new Date(Z[fe+1].timestamp).getTime();ce=(pe-Le)/(1e3*60*60*24);break}let Ie=null,me=null;const We=l.originalGravity;return We!==null&&We>1&&(Ie=(We-te)/(We-1)*100,me=(We-te)*131.25),{currentSg:te,firstSg:Y,highSg:ie,lowSg:I,currentTemp:W,avgTemp:_e,highTemp:De,lowTemp:we,fermRate:re,durationDays:de,daysAtCurrentSg:ce,apparentAttenuation:Ie,abv:me}});function g(){Me(d,l.originalGravity?.toFixed(3)??"",!0),Me(u,!0),setTimeout(()=>b(p)?.focus(),0)}function N(){const C=b(d).trim();if(!C)l.onOgChange(null);else{const Z=parseFloat(C);!isNaN(Z)&&Z>=.99&&Z<=1.2&&l.onOgChange(Z)}Me(u,!1)}function V(C){C.key==="Enter"?N():C.key==="Escape"&&Me(u,!1)}function L(C){return C.toFixed(3)}function z(C){return`${C>=0?"+":""}${C.toFixed(4)}`}function q(C){return C<1?`${(C*24).toFixed(1)}h`:`${C.toFixed(1)}d`}function S(C){return C===null?"--":C.toFixed(1)}function H(C){return C===null?"--":`${C.toFixed(1)}%`}var E=ma(),se=Gs(E);{var O=C=>{var Z=$u(),Q=R(Z),T=R(Q),ee=X(R(T),2),F=X(R(ee),2),te=R(F,!0);D(F),D(ee);var Y=X(ee,2),ie=X(R(Y),2),I=R(ie,!0);D(ie),D(Y);var Ae=X(Y,2),pe=X(R(Ae),2),oe=R(pe,!0);D(pe),D(Ae);var de=X(Ae,2),re=X(R(de),2),W=R(re,!0);D(re),D(de),D(T);var _e=X(T,2),De=X(R(_e),2),we=X(R(De),2),ce=R(we,!0),Re=X(ce),Ie=R(Re,!0);D(Re),D(we),D(De);var me=X(De,2),We=X(R(me),2),fe=R(We,!0),Le=X(fe),$e=R(Le,!0);D(Le),D(We),D(me);var pt=X(me,2),mt=X(R(pt),2),gt=R(mt,!0),Bt=X(gt),Et=R(Bt,!0);D(Bt),D(mt),D(pt);var Ye=X(pt,2),B=X(R(Ye),2),y=R(B,!0),P=X(y),k=R(P,!0);D(P),D(B),D(Ye),D(_e),D(Q);var w=X(Q,2),K=R(w),j=X(R(K),2);let le;var be=R(j);D(j),D(K);var he=X(K,2),Ue=X(R(he),2),Ke=R(Ue,!0);D(Ue),D(he);var et=X(he,2),Je=X(R(et),2),wt=R(Je,!0);D(Je),D(et);var Ut=X(et,2),il=X(R(Ut),2);{var Nt=Xt=>{var St=Qu();xa(St),St.__keydown=V,Hs(St,$t=>Me(p,$t),()=>b(p)),ga("blur",St,N),ba(St,()=>b(d),$t=>Me(d,$t)),Ce(Xt,St)},at=Xt=>{var St=Xu();St.__click=g;var $t=R(St),Yt=R($t,!0);D($t),Al(2),D(St),_t(Ze=>xe(Yt,Ze),[()=>l.originalGravity?L(l.originalGravity):"--"]),Ce(Xt,St)};xt(il,Xt=>{b(u)?Xt(Nt):Xt(at,!1)})}D(Ut);var ul=X(Ut,2),bt=X(R(ul),2),$l=R(bt,!0);D(bt),D(ul);var en=X(ul,2),xn=X(R(en),2),Qn=R(xn,!0);D(xn),D(en),D(w),D(Z),_t((Xt,St,$t,Yt,Ze,Vt,cl,fl,At,dl,pl,bn,Sn)=>{xe(te,Xt),xe(I,St),xe(oe,$t),xe(W,Yt),xe(ce,Ze),xe(Ie,b(x)),xe(fe,Vt),xe($e,b(x)),xe(gt,cl),xe(Et,b(x)),xe(y,fl),xe(k,b(x)),le=Dl(j,1,"stat-value rate svelte-3wi8ix",null,le,{fermenting:b(h).fermRate<0}),xe(be,`${At??""}/day`),xe(Ke,dl),xe(wt,pl),xe($l,bn),xe(Qn,Sn)},[()=>L(b(h).currentSg),()=>L(b(h).firstSg),()=>L(b(h).highSg),()=>L(b(h).lowSg),()=>S(b(h).currentTemp),()=>S(b(h).avgTemp),()=>S(b(h).highTemp),()=>S(b(h).lowTemp),()=>z(b(h).fermRate),()=>q(b(h).durationDays),()=>q(b(h).daysAtCurrentSg),()=>H(b(h).apparentAttenuation),()=>H(b(h).abv)]),Ce(C,Z)},$=C=>{var Z=ec();Ce(C,Z)};xt(se,C=>{b(h)?C(O):C($,!1)})}Ce(e,E),Wn()}Hn(["keydown","click"]);var lc=Oe('<button type="button"> </button>'),nc=Oe("<option> </option>"),sc=Oe('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),ic=Oe('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),ac=Oe('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),rc=Oe('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div> <!></div>');function oc(e,l){In(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Lt(()=>Rn.config.smoothing_enabled),c=Lt(()=>Rn.config.smoothing_samples),u=lt("UTC"),d=lt(0),p=lt(3),m=As(l,"originalGravity",3,null),x=Lt(()=>Rn.config.temp_units==="C"),h,g=null,N=lt(!0),V=lt(null),L=lt(24),z=lt(Ai([])),q=lt(Ai([]));const S={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},H="#facc15",E="rgba(250, 204, 21, 0.3)",se="#71717a",O="#a1a1aa",$="rgba(255, 255, 255, 0.04)",C="#22d3ee";function Z(B,y,P){const k=new Date(B*1e3);try{return P?k.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:y}):k.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:y})}catch(w){return console.warn("Invalid timezone:",y,w),P?k.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):k.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function Q(B,y,P){const k=H,w=S[l.tiltColor]||O;return{width:B,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(K,j,le)=>{const be=(le-j)*.1||.005;return[j-be,le+be]}},temp:{auto:!0,range:(K,j,le)=>{const be=le-j,he=10;if(be<he){const Ke=(le+j)/2;return[Ke-he/2,Ke+he/2]}const Ue=be*.1;return[j-Ue,le+Ue]}}},axes:[{stroke:se,grid:{stroke:$,width:1},ticks:{stroke:$,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(K,j)=>j.map(le=>Z(le,P,b(L)<=24))},{scale:"sg",stroke:k,grid:{stroke:$,width:1},ticks:{stroke:$,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(K,j)=>j.map(le=>le.toFixed(3)),side:3},{scale:"temp",stroke:w,grid:{show:!1},ticks:{stroke:$,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(K,j)=>j.map(le=>le.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:k,width:2,fill:(K,j)=>{const le=K.ctx.createLinearGradient(0,K.bbox.top,0,K.bbox.top+K.bbox.height);return le.addColorStop(0,E),le.addColorStop(1,"transparent"),le},points:{show:!1},paths:st.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:w,width:1.5,dash:[4,4],points:{show:!1},paths:st.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:C,width:1.5,dash:[2,4],points:{show:!1},paths:st.paths.spline?.()}]}}function T(B,y){if(y<=1)return B;const P=[];for(let k=0;k<B.length;k++){const w=[],K=Math.floor(y/2);for(let j=Math.max(0,k-K);j<=Math.min(B.length-1,k+K);j++){const le=B[j];le!==null&&w.push(le)}w.length>0?P.push(w.reduce((j,le)=>j+le,0)/w.length):P.push(null)}return P}function ee(B,y,P,k,w){if(B.length<=w)return[B,y,P,k];const K=Math.ceil(B.length/w),j=[],le=[],be=[],he=[];for(let Ue=0;Ue<B.length;Ue+=K){const Ke=Math.min(Ue+K,B.length);let et=0,Je=0,wt=0,Ut=0,il=0,Nt=0;for(let at=Ue;at<Ke;at++)y[at]!==null&&(et+=y[at],Je++),P[at]!==null&&(wt+=P[at],Ut++),k[at]!==null&&(il+=k[at],Nt++);j.push(B[Math.floor((Ue+Ke-1)/2)]),le.push(Je>0?et/Je:null),be.push(Ut>0?wt/Ut:null),he.push(Nt>0?il/Nt:null)}return[j,le,be,he]}function F(B){return!B.endsWith("Z")&&!B.match(/[+-]\d{2}:\d{2}$/)&&(B=B+"Z"),new Date(B).getTime()/1e3}function te(B,y,P){if(B.length===0||y.length===0)return y.map(()=>null);const k=[...B].sort((j,le)=>F(j.timestamp)-F(le.timestamp)),w=k.map(j=>F(j.timestamp)),K=k.map(j=>j.temperature===null?null:P?j.temperature:j.temperature*9/5+32);return y.map(j=>{let le=null,be=null;for(let he=0;he<w.length;he++)if(w[he]<=j&&(le={time:w[he],temp:K[he]}),w[he]>=j&&be===null){be={time:w[he],temp:K[he]};break}if(le&&be&&le.temp!==null&&be.temp!==null){if(le.time===be.time)return le.temp;const he=(j-le.time)/(be.time-le.time);return le.temp+he*(be.temp-le.temp)}return le!==null&&le.temp!==null?le.temp:be!==null&&be.temp!==null?be.temp:null})}function Y(B,y,P){const k=[...B].reverse();let w=[],K=[],j=[];for(const he of k){w.push(F(he.timestamp)),K.push(he.sg_calibrated??he.sg_raw);const Ue=he.temp_calibrated??he.temp_raw;Ue!==null?j.push(P?dn(Ue):Ue):j.push(null)}let le=te(y,w,P);return b(a)&&b(c)>1&&(K=T(K,b(c)),j=T(j,b(c)),le=T(le,b(c))),[w,K,j,le]=ee(w,K,j,le,500),[w,K,j,le]}const ie=3e4;async function I(B=!1){const P=Date.now()-b(d);if(!(!B&&b(d)>0&&P<ie)){Me(N,!0),Me(V,null);try{const[k,w]=await Promise.all([Ju(l.tiltId,b(L)),Zu(b(L)).catch(()=>[])]);Me(z,k,!0),Me(q,w,!0),Ae()}catch(k){Me(V,k instanceof Error?k.message:"Failed to load data",!0)}finally{Me(d,Date.now(),!0),Me(N,!1)}}}function Ae(){if(!h||b(z).length===0)return;const B=Y(b(z),b(q),b(x)),y=Q(h.clientWidth,b(x),b(u));g&&g.destroy(),g=new st(y,B,h)}function pe(){g&&h&&g.setSize({width:h.clientWidth,height:220})}let oe=null;function de(){if(oe&&(clearInterval(oe),oe=null),b(p)>0){const B=b(p)*60*1e3;oe=setInterval(()=>{b(N)||I(!1)},B)}}wa(async()=>{const B=localStorage.getItem(i);if(B!==null){const y=parseInt(B,10);Number.isNaN(y)||Me(p,y,!0)}try{const y=await fetch("/api/system/timezone");if(y.ok){const P=await y.json();Me(u,P.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await I(!0),window.addEventListener("resize",pe),de()}),Gr(()=>{g?.destroy(),window.removeEventListener("resize",pe),oe&&clearInterval(oe)}),Es(()=>{b(x)!==void 0&&b(z).length>0&&h&&Ae()}),Es(()=>{b(a),b(c),b(z).length>0&&h&&Ae()});function re(B){const y=Number(B.target.value);Me(p,y,!0),localStorage.setItem(i,String(y)),de(),I(!0)}var W=rc(),_e=R(W),De=R(_e);wn(De,21,()=>Ku,On,(B,y)=>{var P=lc();let k;P.__click=()=>{b(L)!==b(y).hours&&(Me(L,b(y).hours,!0),I(!0))};var w=R(P,!0);D(P),_t(()=>{k=Dl(P,1,"range-btn svelte-1e832qd",null,k,{active:b(L)===b(y).hours}),xe(w,b(y).label)}),Ce(B,P)}),D(De);var we=X(De,2),ce=R(we),Re=X(R(ce),2);Re.__change=re,wn(Re,21,()=>n,On,(B,y)=>{var P=nc(),k=R(P,!0);D(P);var w={};_t(()=>{xe(k,b(y).label),w!==(w=b(y).value)&&(P.value=(P.__value=b(y).value)??"")}),Ce(B,P)}),D(Re);var Ie;Jr(Re),D(ce);var me=X(ce,2),We=X(R(me),2),fe=R(We);Al(2),D(We),Al(2),D(me),D(we),D(_e);var Le=X(_e,2),$e=R(Le);{var pt=B=>{var y=sc();Ce(B,y)};xt($e,B=>{b(N)&&B(pt)})}var mt=X($e,2);{var gt=B=>{var y=ic(),P=X(R(y),2);P.__click=()=>I(!0),D(y),Ce(B,y)},Bt=B=>{var y=ma(),P=Gs(y);{var k=w=>{var K=ac();Ce(w,K)};xt(P,w=>{b(z).length===0&&w(k)},!0)}Ce(B,y)};xt(mt,B=>{b(V)?B(gt):B(Bt,!1)})}D(Le),Hs(Le,B=>h=B,()=>h);var Et=X(Le,2);{var Ye=B=>{{let y=Lt(()=>l.onOgChange??(()=>{}));tc(B,{get readings(){return b(z)},get originalGravity(){return m()},get onOgChange(){return b(y)}})}};xt(Et,B=>{b(z).length>0&&B(Ye)})}D(W),_t(()=>{Ie!==(Ie=b(p))&&(Re.value=(Re.__value=b(p))??"",Zr(Re,b(p))),Fn(fe,`background: ${(S[l.tiltColor]||"var(--text-secondary)")??""};`)}),Ce(e,W),Wn()}Hn(["click","change"]);var uc=Oe('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),cc=Oe('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),fc=Oe('<div class="w-1 rounded-sm transition-all"></div>'),dc=Oe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),pc=Oe("<div><!></div>"),hc=Oe('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),vc=Oe('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> </p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Gravity</p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function mc(e,l){In(l,!0);let i=As(l,"expanded",3,!1),n=As(l,"wide",3,!1),a=lt(!1);Es(()=>{i()&&!b(a)&&Me(a,!0)});let c=lt(!1),u=lt(""),d=lt(null),p=lt(!1);function m(){Me(u,l.tilt.beer_name,!0),Me(c,!0),setTimeout(()=>b(d)?.focus(),0)}async function x(){if(b(p))return;const y=b(u).trim();if(!y||y===l.tilt.beer_name){Me(c,!1);return}Me(p,!0);const P=await Yr(l.tilt.id,y);Me(p,!1),P&&Me(c,!1)}function h(y){y.key==="Enter"?x():y.key==="Escape"&&Me(c,!1)}async function g(y){await jr(l.tilt.id,y)}let N=Lt(_a);const V={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function L(y){return y.toFixed(3)}function z(y){return Br(y)}function q(y){return y>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:y>=-60?{bars:3,color:"var(--positive)",label:"Good"}:y>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function S(y){const P=Math.floor((Date.now()-new Date(y).getTime())/1e3);if(P<10)return"just now";if(P<60)return`${P}s ago`;const k=Math.floor(P/60);if(k<60)return`${k}m ago`;const w=Math.floor(k/60);return w<24?`${w}h ago`:`${Math.floor(w/24)}d ago`}let H=Lt(()=>V[l.tilt.color]||"var(--tilt-black)"),E=Lt(()=>q(l.tilt.rssi)),se=Lt(()=>S(l.tilt.last_seen));var O=vc();let $;var C=R(O),Z=X(C,2),Q=R(Z),T=R(Q),ee=R(T);{var F=y=>{var P=uc();xa(P),P.__keydown=h,Hs(P,k=>Me(d,k),()=>b(d)),_t(()=>P.disabled=b(p)),ga("blur",P,x),ba(P,()=>b(u),k=>Me(u,k)),Ce(y,P)},te=y=>{var P=cc();P.__click=m;var k=R(P),w=R(k,!0);D(k),Al(2),D(P),_t(()=>xe(w,l.tilt.beer_name)),Ce(y,P)};xt(ee,y=>{b(c)?y(F):y(te,!1)})}var Y=X(ee,2),ie=R(Y),I=X(ie,2),Ae=R(I,!0);D(I),D(Y),D(T);var pe=X(T,2),oe=R(pe);wn(oe,20,()=>Array(4),On,(y,P,k)=>{var w=fc();_t(()=>Fn(w,`
								height: ${8+k*4}px;
								background: ${(k<b(E).bars?b(E).color:"var(--bg-hover)")??""};
								opacity: ${k<b(E).bars?1:.4};
							`)),Ce(y,w)}),D(oe);var de=X(oe,2),re=R(de);D(de),D(pe),D(Q);var W=X(Q,2),_e=R(W),De=R(_e),we=R(De,!0);D(De),Al(2),D(_e);var ce=X(_e,2),Re=R(ce),Ie=R(Re,!0),me=X(Ie),We=R(me,!0);D(me),D(Re),Al(2),D(ce),D(W);var fe=X(W,2);{var Le=y=>{var P=dc(),k=X(R(P),2),w=R(k,!0);D(k);var K=X(k,4),j=R(K);D(K),D(P),_t((le,be)=>{xe(w,le),xe(j,`${be??""}${b(N)??""}`)},[()=>L(l.tilt.sg_raw),()=>z(l.tilt.temp_raw)]),Ce(y,P)};xt(fe,y=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&y(Le)})}var $e=X(fe,2);{var pt=y=>{var P=pc();let k;var w=R(P);Qr(w,()=>l.tilt.id,K=>{oc(K,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color},get originalGravity(){return l.tilt.original_gravity},onOgChange:g})}),D(P),_t(()=>k=Dl(P,1,"chart-section svelte-3twv7v",null,k,{hidden:!i()})),Ce(y,P)};xt($e,y=>{b(a)&&y(pt)})}var mt=X($e,2),gt=R(mt),Bt=R(gt);D(gt);var Et=X(gt,2),Ye=R(Et);{var B=y=>{var P=hc();P.__click=function(...K){l.onToggleExpand?.apply(this,K)};var k=R(P);let w;D(P),_t(()=>{Di(P,"aria-label",i()?"Collapse chart":"Expand chart"),w=Dl(k,0,"w-4 h-4 transition-transform",null,w,{"rotate-180":i()})}),Ce(y,P)};xt(Ye,y=>{l.onToggleExpand&&y(B)})}Al(2),D(Et),D(mt),D(Z),D(O),_t((y,P)=>{$=Dl(O,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,$,{expanded:i(),wide:n()}),Fn(C,`background: ${b(H)??""};`),Fn(ie,`background: ${b(H)??""};`),xe(Ae,l.tilt.color),Di(pe,"title",`${b(E).label??""} signal (${l.tilt.rssi??""} dBm)`),xe(re,`${l.tilt.rssi??""} dBm`),xe(we,y),xe(Ie,P),xe(We,b(N)),xe(Bt,`Updated ${b(se)??""}`)},[()=>L(l.tilt.sg),()=>z(l.tilt.temp)]),Ce(e,O),Wn()}Hn(["keydown","click"]);var gc=Oe('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),wc=Oe('<div class="alerts-list svelte-1uha8ag"></div>'),_c=Oe('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),xc=Oe('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),bc=Oe('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),Sc=Oe('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),yc=Oe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),kc=Oe("<div></div>"),Tc=Oe("<!> <!>",1);function Vc(e,l){In(l,!0);let i=lt(!1),n=lt(!1);wa(()=>{const L=localStorage.getItem("brewsignal_alerts_dismissed"),z=localStorage.getItem("brewsignal_alerts_dismissed_time");return L==="true"&&z&&Date.now()-parseInt(z,10)<360*60*1e3&&Me(i,!0),qr(),()=>{Kr()}});let a=Lt(()=>Array.from(_s.tilts.values())),c=lt(null);function u(L){Me(c,b(c)===L?null:L,!0)}function d(){Me(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function p(){Me(n,!b(n))}var m=Tc();Ur("1uha8ag",L=>{Hr(()=>{Ir.title="Dashboard | BrewSignal"})});var x=Gs(m);{var h=L=>{var z=xc(),q=R(z),S=R(q),H=X(R(S),4),E=R(H,!0);D(H),D(S);var se=X(S,2);se.__click=d,D(q);var O=X(q,2);{var $=Q=>{var T=wc();wn(T,21,()=>un.alerts,On,(ee,F)=>{var te=gc();let Y;var ie=R(te),I=R(ie);D(ie);var Ae=X(ie,2),pe=R(Ae,!0);D(Ae),D(te),_t(()=>{Y=Dl(te,1,"alert-item svelte-1uha8ag",null,Y,{warning:b(F).level==="warning",critical:b(F).level==="critical"}),xe(I,`${b(F).day??""}:`),xe(pe,b(F).message)}),Ce(ee,te)}),D(T),Ce(Q,T)};xt(O,Q=>{b(n)||Q($)})}var C=X(O,2);{var Z=Q=>{var T=_c();T.__click=p;var ee=R(T,!0);D(T),_t(()=>xe(ee,b(n)?`Show ${un.alerts.length} alerts`:"Show less")),Ce(Q,T)};xt(C,Q=>{un.alerts.length>3&&Q(Z)})}D(z),_t(()=>xe(E,un.alerts.length)),Ce(L,z)};xt(x,L=>{un.alerts.length>0&&!b(i)&&L(h)})}var g=X(x,2);{var N=L=>{var z=yc(),q=X(R(z),4),S=R(q);{var H=$=>{var C=Fr("Waiting for Tilt hydrometers to broadcast...");Ce($,C)},E=$=>{var C=bc();Ce($,C)};xt(S,$=>{_s.connected?$(H):$(E,!1)})}D(q);var se=X(q,2);{var O=$=>{var C=Sc();Ce($,C)};xt(se,$=>{_s.connected&&$(O)})}D(z),Ce(L,z)},V=L=>{var z=kc();let q;wn(z,21,()=>b(a),S=>S.id,(S,H)=>{{let E=Lt(()=>b(c)===b(H).id),se=Lt(()=>b(a).length===1);mc(S,{get tilt(){return b(H)},get expanded(){return b(E)},get wide(){return b(se)},onToggleExpand:()=>u(b(H).id)})}}),D(z),_t(()=>q=Dl(z,1,"tilt-grid svelte-1uha8ag",null,q,{"single-tilt":b(a).length===1})),Ce(L,z)};xt(g,L=>{b(a).length===0?L(N):L(V,!1)})}Ce(e,m),Wn()}Hn(["click"]);export{Vc as component};
