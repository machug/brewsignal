import{d as Jn,c as Wn,a as De,f as ze,s as be,e as ba}from"../chunks/DFbRLFGc.js";import{o as Or,R as Gr,b7 as Nr,b as zr,ah as $n,ar as zl,c as p,ai as Ie,aj as Zn,al as M,an as k,ak as I,ao as Qe,as as mt,s as ye,at as Dl,p as Un,ap as ya,aL as Vr,aq as Os,e as Ir,am as Br}from"../chunks/-s7GvDYA.js";import{e as En,i as Yn}from"../chunks/DSjxYGfQ.js";import{B as Hr,i as _t}from"../chunks/DiA6E_7b.js";import{h as Wr}from"../chunks/BsCIOrMO.js";import{s as wl}from"../chunks/DC-wEq0z.js";import{t as Sa}from"../chunks/BJZu1gQI.js";import{w as gn}from"../chunks/fpvWZG4p.js";import{r as ka,s as An}from"../chunks/CXlnwKpw.js";import{s as Sn}from"../chunks/CxDjpI2d.js";import{b as Ta}from"../chunks/BXlrlxF0.js";import{b as qs}from"../chunks/heAMOb8F.js";import{p as kn}from"../chunks/BPBk5V8z.js";import{g as Ur}from"../chunks/gdSOnDSl.js";import{f as wn,c as Bn,d as js,b as Ks,g as Ma,e as Yr}from"../chunks/BH1aWYKn.js";import{T as qr,h as jr,j as Kr,u as Jr,f as $r,a as Zr}from"../chunks/yKyIUm6R.js";import{i as Qr,s as Xr}from"../chunks/D9NHjgjI.js";function eo(e,l,i){Or&&Gr();var n=new Hr(e),a=!Nr();zr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const to=!0,St="u-",lo="uplot",no=St+"hz",so=St+"vt",io=St+"title",ao=St+"wrap",ro=St+"under",oo=St+"over",uo=St+"axis",Nl=St+"off",co=St+"select",fo=St+"cursor-x",po=St+"cursor-y",vo=St+"cursor-pt",ho=St+"legend",go=St+"live",mo=St+"inline",_o=St+"series",wo=St+"marker",Oi=St+"label",xo=St+"value",xn="width",bn="height",mn="top",Gi="bottom",Ql="left",As="right",Js="#000",Ni=Js+"0",Ds="mousemove",zi="mousedown",Ls="mouseup",Vi="mouseenter",Ii="mouseleave",Bi="dblclick",bo="resize",yo="scroll",Hi="change",qn="dppxchange",$s="--",an=typeof window<"u",Gs=an?document:null,en=an?window:null,So=an?navigator:null;let Ne,zn;function Ns(){let e=devicePixelRatio;Ne!=e&&(Ne=e,zn&&Vs(Hi,zn,Ns),zn=matchMedia(`(min-resolution: ${Ne-.001}dppx) and (max-resolution: ${Ne+.001}dppx)`),Vl(Hi,zn,Ns),en.dispatchEvent(new CustomEvent(qn)))}function $t(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function zs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Ze(e,l,i){e.style[l]=i+"px"}function ol(e,l,i,n){let a=Gs.createElement(e);return l!=null&&$t(a,l),i?.insertBefore(a,n),a}function tl(e,l){return ol("div",e,l)}const Wi=new WeakMap;function gl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Wi.get(e);c!=u&&(e.style.transform=c,Wi.set(e,c),l<0||i<0||l>n||i>a?$t(e,Nl):zs(e,Nl))}const Ui=new WeakMap;function Yi(e,l,i){let n=l+i,a=Ui.get(e);n!=a&&(Ui.set(e,n),e.style.background=l,e.style.borderColor=i)}const qi=new WeakMap;function ji(e,l,i,n){let a=l+""+i,c=qi.get(e);a!=c&&(qi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Zs={passive:!0},ko={...Zs,capture:!0};function Vl(e,l,i,n){l.addEventListener(e,i,n?ko:Zs)}function Vs(e,l,i,n){l.removeEventListener(e,i,Zs)}an&&Ns();function ul(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:Zt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ea(e){return(i,n,a)=>{let c=-1,u=-1;for(let d=n;d<=a;d++)if(e(i[d])){c=d;break}for(let d=a;d>=n;d--)if(e(i[d])){u=d;break}return[c,u]}}const Aa=e=>e!=null,Da=e=>e!=null&&e>0,Qn=Ea(Aa),To=Ea(Da);function Mo(e,l,i,n=0,a=!1){let c=a?To:Qn,u=a?Da:Aa;[l,i]=c(e,l,i);let d=e[l],v=e[l];if(l>-1)if(n==1)d=e[l],v=e[i];else if(n==-1)d=e[i],v=e[l];else for(let h=l;h<=i;h++){let b=e[h];u(b)&&(b<d?d=b:b>v&&(v=b))}return[d??We,v??-We]}function Xn(e,l,i,n){let a=$i(e),c=$i(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?xl:La,d=a==1?Zt:ll,v=c==1?ll:Zt,h=d(u(bt(e))),b=v(u(bt(l))),m=tn(i,h),_=tn(i,b);return i==10&&(h<0&&(m=Ue(m,-h)),b<0&&(_=Ue(_,-b))),n||i==2?(e=m*a,l=_*c):(e=Fa(e,m),l=es(l,_)),[e,l]}function Qs(e,l,i,n){let a=Xn(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Xs=.1,Ki={mode:3,pad:Xs},Tn={pad:0,soft:null,mode:0},Eo={min:Tn,max:Tn};function jn(e,l,i,n){return ts(i)?Ji(e,l,i):(Tn.pad=i,Tn.soft=n?0:null,Tn.mode=n?3:0,Ji(e,l,Eo))}function Oe(e,l){return e??l}function Ao(e,l,i){for(l=Oe(l,0),i=Oe(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ji(e,l,i){let n=i.min,a=i.max,c=Oe(n.pad,0),u=Oe(a.pad,0),d=Oe(n.hard,-We),v=Oe(a.hard,We),h=Oe(n.soft,We),b=Oe(a.soft,-We),m=Oe(n.mode,0),_=Oe(a.mode,0),O=l-e,T=xl(O),J=Ht(bt(e),bt(l)),q=xl(J),Q=bt(q-T);(O<1e-24||Q>10)&&(O=0,(e==0||l==0)&&(O=1e-24,m==2&&h!=We&&(c=0),_==2&&b!=-We&&(u=0)));let y=O||J||1e3,j=xl(y),A=tn(10,Zt(j)),F=y*(O==0?e==0?.1:1:c),L=Ue(Fa(e-F,A/10),24),se=e>=h&&(m==1||m==3&&L<=h||m==2&&L>=h)?h:We,$=Ht(d,L<se&&e>=se?se:cl(se,L)),B=y*(O==0?l==0?.1:1:u),te=Ue(es(l+B,A/10),24),w=l<=b&&(_==1||_==3&&te>=b||_==2&&te<=b)?b:-We,N=cl(v,te>w&&l<=w?w:Ht(w,te));return $==N&&$==0&&(N=100),[$,N]}const Do=new Intl.NumberFormat(an?So.language:"en-US"),ei=e=>Do.format(e),Qt=Math,Hn=Qt.PI,bt=Qt.abs,Zt=Qt.floor,xt=Qt.round,ll=Qt.ceil,cl=Qt.min,Ht=Qt.max,tn=Qt.pow,$i=Qt.sign,xl=Qt.log10,La=Qt.log2,Lo=(e,l=1)=>Qt.sinh(e)*l,Cs=(e,l=1)=>Qt.asinh(e/l),We=1/0;function Zi(e){return(xl((e^e>>31)-(e>>31))|0)+1}function Is(e,l,i){return cl(Ht(e,l),i)}function Ca(e){return typeof e=="function"}function Ee(e){return Ca(e)?e:()=>e}const Co=()=>{},Pa=e=>e,Ra=(e,l)=>l,Po=e=>null,Qi=e=>!0,Xi=(e,l)=>e==l,Ro=/\.\d*?(?=9{6,}|0{6,})/gm,Il=e=>{if(Ga(e)||Ll.has(e))return e;const l=`${e}`,i=l.match(Ro);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Il(a)}e${c}`}return Ue(e,n)};function Ol(e,l){return Il(Ue(Il(e/l))*l)}function es(e,l){return Il(ll(Il(e/l))*l)}function Fa(e,l){return Il(Zt(Il(e/l))*l)}function Ue(e,l=0){if(Ga(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return xt(n)/i}const Ll=new Map;function Oa(e){return((""+e).split(".")[1]||"").length}function Dn(e,l,i,n){let a=[],c=n.map(Oa);for(let u=l;u<i;u++){let d=bt(u),v=Ue(tn(e,u),d);for(let h=0;h<n.length;h++){let b=e==10?+`${n[h]}e${u}`:n[h]*v,m=(u>=0?0:d)+(u>=c[h]?0:c[h]),_=e==10?b:Ue(b,m);a.push(_),Ll.set(_,m)}}return a}const Mn={},ti=[],ln=[null,null],Al=Array.isArray,Ga=Number.isInteger,Fo=e=>e===void 0;function ea(e){return typeof e=="string"}function ts(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Oo(e){return e!=null&&typeof e=="object"}const Go=Object.getPrototypeOf(Uint8Array),Na="__proto__";function nn(e,l=ts){let i;if(Al(e)){let n=e.find(a=>a!=null);if(Al(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=nn(e[a],l)}else i=e.slice()}else if(e instanceof Go)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Na&&(i[n]=nn(e[n],l))}else i=e;return i}function gt(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Na&&(ts(e[a])?gt(e[a],nn(n[a])):e[a]=nn(n[a]))}return e}const No=0,zo=1,Vo=2;function Io(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Bo(e,l){if(Uo(e)){let u=e[0].slice();for(let d=1;d<e.length;d++)u.push(...e[d].slice(1));return Yo(u[0])||(u=Wo(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let v=e[u][0],h=v.length;for(let b=0;b<h;b++)i.add(v[b])}let n=[Array.from(i).sort((u,d)=>u-d)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let d=e[u],v=d[0];for(let h=1;h<d.length;h++){let b=d[h],m=Array(a).fill(void 0),_=l?l[u][h]:zo,O=[];for(let T=0;T<b.length;T++){let J=b[T],q=c.get(v[T]);J===null?_!=No&&(m[q]=J,_==Vo&&O.push(q)):m[q]=J}Io(m,O,a),n.push(m)}}return n}const Ho=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Wo(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],d=Array(i);for(let v=0;v<i;v++)d[v]=u[n[v]];a.push(d)}return a}function Uo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Yo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=Ht(1,Zt((a-n+1)/l));for(let u=e[n],d=n+c;d<=a;d+=c){const v=e[d];if(v!=null){if(v<=u)return!1;u=v}}return!0}const za=["January","February","March","April","May","June","July","August","September","October","November","December"],Va=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ia(e){return e.slice(0,3)}const qo=Va.map(Ia),jo=za.map(Ia),Ko={MMMM:za,MMM:jo,WWWW:Va,WWW:qo};function _n(e){return(e<10?"0":"")+e}function Jo(e){return(e<10?"00":e<100?"0":"")+e}const $o={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>_n(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>_n(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>_n(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>_n(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>_n(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Jo(e.getMilliseconds())};function li(e,l){l=l||Ko;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?$o[a[1]]:a[0]);return c=>{let u="";for(let d=0;d<i.length;d++)u+=typeof i[d]=="string"?i[d]:i[d](c,l);return u}}const Zo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Qo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Zo?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ba=e=>e%1==0,Kn=[1,2,2.5,5],Xo=Dn(10,-32,0,Kn),Ha=Dn(10,0,32,Kn),eu=Ha.filter(Ba),Gl=Xo.concat(Ha),ni=`
`,Wa="{YYYY}",ta=ni+Wa,Ua="{M}/{D}",yn=ni+Ua,Vn=yn+"/{YY}",Ya="{aa}",tu="{h}:{mm}",Xl=tu+Ya,la=ni+Xl,na=":{ss}",Ve=null;function qa(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,v=(e==1?Dn(10,0,3,Kn).filter(Ba):Dn(10,-3,0,Kn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const h=[[u,Wa,Ve,Ve,Ve,Ve,Ve,Ve,1],[a*28,"{MMM}",ta,Ve,Ve,Ve,Ve,Ve,1],[a,Ua,ta,Ve,Ve,Ve,Ve,Ve,1],[n,"{h}"+Ya,Vn,Ve,yn,Ve,Ve,Ve,1],[i,Xl,Vn,Ve,yn,Ve,Ve,Ve,1],[l,na,Vn+" "+Xl,Ve,yn+" "+Xl,Ve,la,Ve,1],[e,na+".{fff}",Vn+" "+Xl,Ve,yn+" "+Xl,Ve,la,Ve,1]];function b(m){return(_,O,T,J,q,Q)=>{let y=[],j=q>=u,A=q>=c&&q<u,F=m(T),L=Ue(F*e,3),se=Ps(F.getFullYear(),j?0:F.getMonth(),A||j?1:F.getDate()),$=Ue(se*e,3);if(A||j){let B=A?q/c:0,te=j?q/u:0,w=L==$?L:Ue(Ps(se.getFullYear()+te,se.getMonth()+B,1)*e,3),N=new Date(xt(w/e)),P=N.getFullYear(),X=N.getMonth();for(let E=0;w<=J;E++){let K=Ps(P+te*E,X+B*E,1),C=K-m(Ue(K*e,3));w=Ue((+K+C)*e,3),w<=J&&y.push(w)}}else{let B=q>=a?a:q,te=Zt(T)-Zt(L),w=$+te+es(L-$,B);y.push(w);let N=m(w),P=N.getHours()+N.getMinutes()/i+N.getSeconds()/n,X=q/n,E=_.axes[O]._space,K=Q/E;for(;w=Ue(w+q,e==1?0:3),!(w>J);)if(X>1){let C=Zt(Ue(P+X,6))%24,ue=m(w).getHours()-C;ue>1&&(ue=-1),w-=ue*n,P=(P+X)%24;let _e=y[y.length-1];Ue((w-_e)/q,3)*K>=.7&&y.push(w)}else y.push(w)}return y}}return[v,h,b]}const[lu,nu,su]=qa(1),[iu,au,ru]=qa(.001);Dn(2,-53,53,[1]);function sa(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ia(e,l){return(i,n,a,c,u)=>{let d=l.find(T=>u>=T[0])||l[l.length-1],v,h,b,m,_,O;return n.map(T=>{let J=e(T),q=J.getFullYear(),Q=J.getMonth(),y=J.getDate(),j=J.getHours(),A=J.getMinutes(),F=J.getSeconds(),L=q!=v&&d[2]||Q!=h&&d[3]||y!=b&&d[4]||j!=m&&d[5]||A!=_&&d[6]||F!=O&&d[7]||d[1];return v=q,h=Q,b=y,m=j,_=A,O=F,L(J)})}}function ou(e,l){let i=li(l);return(n,a,c,u,d)=>a.map(v=>i(e(v)))}function Ps(e,l,i){return new Date(e,l,i)}function aa(e,l){return l(e)}const uu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ra(e,l){return(i,n,a,c)=>c==null?$s:l(e(n))}function cu(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function fu(e,l){return e.series[l].fill(e,l)}const du={show:!0,live:!0,isolate:!1,mount:Co,markers:{show:!0,width:2,stroke:cu,fill:fu,dash:"solid"},idx:null,idxs:null,values:[]};function pu(e,l){let i=e.cursor.points,n=tl(),a=i.size(e,l);Ze(n,xn,a),Ze(n,bn,a);let c=a/-2;Ze(n,"marginLeft",c),Ze(n,"marginTop",c);let u=i.width(e,l,a);return u&&Ze(n,"borderWidth",u),n}function vu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function hu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function gu(e,l){return e.series[l].points.size}const Rs=[0,0];function mu(e,l,i){return Rs[0]=l,Rs[1]=i,Rs}function In(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Fs(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const _u={show:!0,x:!0,y:!0,lock:!1,move:mu,points:{one:!1,show:pu,size:gu,width:0,stroke:hu,fill:vu},bind:{mousedown:In,mouseup:In,click:In,dblclick:In,mousemove:Fs,mouseleave:Fs,mouseenter:Fs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},ja={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},si=gt({},ja,{filter:Ra}),Ka=gt({},si,{size:10}),Ja=gt({},ja,{show:!1}),ii='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',$a="bold "+ii,Za=1.5,oa={show:!0,scale:"x",stroke:Js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:$a,side:2,grid:si,ticks:Ka,border:Ja,font:ii,lineGap:Za,rotate:0},wu="Value",xu="Time",ua={show:!0,scale:"x",auto:!1,sorted:1,min:We,max:-We,idxs:[]};function bu(e,l,i,n,a){return l.map(c=>c==null?"":ei(c))}function yu(e,l,i,n,a,c,u){let d=[],v=Ll.get(a)||0;i=u?i:Ue(es(i,a),v);for(let h=i;h<=n;h=Ue(h+a,v))d.push(Object.is(h,-0)?0:h);return d}function Bs(e,l,i,n,a,c,u){const d=[],v=e.scales[e.axes[l].scale].log,h=v==10?xl:La,b=Zt(h(i));a=tn(v,b),v==10&&(a=Gl[ul(a,Gl)]);let m=i,_=a*v;v==10&&(_=Gl[ul(_,Gl)]);do d.push(m),m=m+a,v==10&&!Ll.has(m)&&(m=Ue(m,Ll.get(a))),m>=_&&(a=m,_=a*v,v==10&&(_=Gl[ul(_,Gl)]));while(m<=n);return d}function Su(e,l,i,n,a,c,u){let v=e.scales[e.axes[l].scale].asinh,h=n>v?Bs(e,l,Ht(v,i),n,a):[v],b=n>=0&&i<=0?[0]:[];return(i<-v?Bs(e,l,Ht(v,-n),-i,a):[v]).reverse().map(_=>-_).concat(b,h)}const Qa=/./,ku=/[12357]/,Tu=/[125]/,ca=/1/,Hs=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Mu(e,l,i,n,a){let c=e.axes[i],u=c.scale,d=e.scales[u],v=e.valToPos,h=c._space,b=v(10,u),m=v(9,u)-b>=h?Qa:v(7,u)-b>=h?ku:v(5,u)-b>=h?Tu:ca;if(m==ca){let _=bt(v(1,u)-b);if(_<h)return Hs(l.slice().reverse(),d.distr,m,ll(h/_)).reverse()}return Hs(l,d.distr,m,1)}function Eu(e,l,i,n,a){let c=e.axes[i],u=c.scale,d=c._space,v=e.valToPos,h=bt(v(1,u)-v(2,u));return h<d?Hs(l.slice().reverse(),3,Qa,ll(d/h)).reverse():l}function Au(e,l,i,n){return n==null?$s:l==null?"":ei(l)}const fa={show:!0,scale:"y",stroke:Js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:$a,side:3,grid:si,ticks:Ka,border:Ja,font:ii,lineGap:Za,rotate:0};function Du(e,l){let i=3+(e||1)*2;return Ue(i*l,3)}function Lu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),d=bt(u-c),v=e.series[l],h=d/(v.points.space*Ne);return n[1]-n[0]<=h}const da={scale:null,auto:!0,sorted:0,min:We,max:-We},Xa=(e,l,i,n,a)=>a,pa={show:!0,auto:!0,sorted:0,gaps:Xa,alpha:1,facets:[gt({},da,{scale:"x"}),gt({},da,{scale:"y"})]},va={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Xa,alpha:1,points:{show:Lu,filter:null},values:null,min:We,max:-We,idxs:[],path:null,clip:null};function Cu(e,l,i,n,a){return i/10}const er={time:to,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Pu=gt({},er,{time:!1,ori:1}),ha={};function tr(e,l){let i=ha[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,d,v,h){for(let b=0;b<i.plots.length;b++)i.plots[b]!=a&&i.plots[b].pub(n,a,c,u,d,v,h)}},e!=null&&(ha[e]=i)),i}const sn=1,Ws=2;function Bl(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,d=e.bbox;let v=c[0],h=n==2?c[1]:c[l],b=n==2?u[a.facets[0].scale]:u[e.series[0].scale],m=n==2?u[a.facets[1].scale]:u[a.scale],_=d.left,O=d.top,T=d.width,J=d.height,q=e.valToPosH,Q=e.valToPosV;return b.ori==0?i(a,v,h,b,m,q,Q,_,O,T,J,ns,rn,is,nr,ir):i(a,v,h,b,m,Q,q,O,_,J,T,ss,on,oi,sr,ar)}function ai(e,l){let i=0,n=0,a=Oe(e.bands,ti);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Ru(e,l,i,n,a){let c=e.mode,u=e.series[l],d=c==2?u.facets[1].scale:u.scale,v=e.scales[d];return a==-1?v.min:a==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function bl(e,l,i,n,a,c){return Bl(e,l,(u,d,v,h,b,m,_,O,T,J,q)=>{let Q=u.pxRound;const y=h.dir*(h.ori==0?1:-1),j=h.ori==0?rn:on;let A,F;y==1?(A=i,F=n):(A=n,F=i);let L=Q(m(d[A],h,J,O)),se=Q(_(v[A],b,q,T)),$=Q(m(d[F],h,J,O)),B=Q(_(c==1?b.max:b.min,b,q,T)),te=new Path2D(a);return j(te,$,B),j(te,L,B),j(te,L,se),te})}function ls(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const d=l==0?is:oi;let v=i;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let O=_[0]-v;O>0&&d(u,v,n,O,n+c),v=_[1]}}let h=i+a-v,b=10;h>0&&d(u,v,n-b/2,h,n+c+b)}return u}function Fu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ri(e,l,i,n,a,c,u){let d=[],v=e.length;for(let h=a==1?i:n;h>=i&&h<=n;h+=a)if(l[h]===null){let m=h,_=h;if(a==1)for(;++h<=n&&l[h]===null;)_=h;else for(;--h>=i&&l[h]===null;)_=h;let O=c(e[m]),T=_==m?O:c(e[_]),J=m-a;O=u<=0&&J>=0&&J<v?c(e[J]):O;let Q=_+a;T=u>=0&&Q>=0&&Q<v?c(e[Q]):T,T>=O&&d.push([O,T])}return d}function ga(e){return e==0?Pa:e==1?xt:l=>Ol(l,e)}function lr(e){let l=e==0?ns:ss,i=e==0?(a,c,u,d,v,h)=>{a.arcTo(c,u,d,v,h)}:(a,c,u,d,v,h)=>{a.arcTo(u,c,v,d,h)},n=e==0?(a,c,u,d,v)=>{a.rect(c,u,d,v)}:(a,c,u,d,v)=>{a.rect(u,c,v,d)};return(a,c,u,d,v,h=0,b=0)=>{h==0&&b==0?n(a,c,u,d,v):(h=cl(h,d/2,v/2),b=cl(b,d/2,v/2),l(a,c+h,u),i(a,c+d,u,c+d,u+v,h),i(a,c+d,u+v,c,u+v,b),i(a,c,u+v,c,u,b),i(a,c,u,c+d,u,h),a.closePath())}}const ns=(e,l,i)=>{e.moveTo(l,i)},ss=(e,l,i)=>{e.moveTo(i,l)},rn=(e,l,i)=>{e.lineTo(l,i)},on=(e,l,i)=>{e.lineTo(i,l)},is=lr(0),oi=lr(1),nr=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},sr=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},ir=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},ar=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function rr(e){return(l,i,n,a,c)=>Bl(l,i,(u,d,v,h,b,m,_,O,T,J,q)=>{let{pxRound:Q,points:y}=u,j,A;h.ori==0?(j=ns,A=nr):(j=ss,A=sr);const F=Ue(y.width*Ne,3);let L=(y.size-y.width)/2*Ne,se=Ue(L*2,3),$=new Path2D,B=new Path2D,{left:te,top:w,width:N,height:P}=l.bbox;is(B,te-se,w-se,N+se*2,P+se*2);const X=E=>{if(v[E]!=null){let K=Q(m(d[E],h,J,O)),C=Q(_(v[E],b,q,T));j($,K+L,C),A($,K,C,L,0,Hn*2)}};if(c)c.forEach(X);else for(let E=n;E<=a;E++)X(E);return{stroke:F>0?$:null,fill:$,clip:B,flags:sn|Ws}})}function or(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Ou=or(rn),Gu=or(on);function ur(e){const l=Oe(e?.alignGaps,0);return(i,n,a,c)=>Bl(i,n,(u,d,v,h,b,m,_,O,T,J,q)=>{[a,c]=Qn(v,a,c);let Q=u.pxRound,y=P=>Q(m(P,h,J,O)),j=P=>Q(_(P,b,q,T)),A,F;h.ori==0?(A=rn,F=Ou):(A=on,F=Gu);const L=h.dir*(h.ori==0?1:-1),se={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:sn},$=se.stroke;let B=!1;if(c-a>=J*4){let P=U=>i.posToVal(U,h.key,!0),X=null,E=null,K,C,Se,me=y(d[L==1?a:c]),ue=y(d[a]),_e=y(d[c]),re=P(L==1?ue+1:_e-1);for(let U=L==1?a:c;U>=a&&U<=c;U+=L){let ke=d[U],Me=(L==1?ke<re:ke>re)?me:y(ke),de=v[U];Me==me?de!=null?(C=de,X==null?(A($,Me,j(C)),K=X=E=C):C<X?X=C:C>E&&(E=C)):de===null&&(B=!0):(X!=null&&F($,me,j(X),j(E),j(K),j(C)),de!=null?(C=de,A($,Me,j(C)),X=E=K=C):(X=E=null,de===null&&(B=!0)),me=Me,re=P(me+L))}X!=null&&X!=E&&Se!=me&&F($,me,j(X),j(E),j(K),j(C))}else for(let P=L==1?a:c;P>=a&&P<=c;P+=L){let X=v[P];X===null?B=!0:X!=null&&A($,y(d[P]),j(X))}let[w,N]=ai(i,n);if(u.fill!=null||w!=0){let P=se.fill=new Path2D($),X=u.fillTo(i,n,u.min,u.max,w),E=j(X),K=y(d[a]),C=y(d[c]);L==-1&&([C,K]=[K,C]),A(P,C,E),A(P,K,E)}if(!u.spanGaps){let P=[];B&&P.push(...ri(d,v,a,c,L,y,l)),se.gaps=P=u.gaps(i,n,a,c,P),se.clip=ls(P,h.ori,O,T,J,q)}return N!=0&&(se.band=N==2?[bl(i,n,a,c,$,-1),bl(i,n,a,c,$,1)]:bl(i,n,a,c,$,N)),se})}function Nu(e){const l=Oe(e.align,1),i=Oe(e.ascDesc,!1),n=Oe(e.alignGaps,0),a=Oe(e.extend,!1);return(c,u,d,v)=>Bl(c,u,(h,b,m,_,O,T,J,q,Q,y,j)=>{[d,v]=Qn(m,d,v);let A=h.pxRound,{left:F,width:L}=c.bbox,se=ue=>A(T(ue,_,y,q)),$=ue=>A(J(ue,O,j,Q)),B=_.ori==0?rn:on;const te={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:sn},w=te.stroke,N=_.dir*(_.ori==0?1:-1);let P=$(m[N==1?d:v]),X=se(b[N==1?d:v]),E=X,K=X;a&&l==-1&&(K=F,B(w,K,P)),B(w,X,P);for(let ue=N==1?d:v;ue>=d&&ue<=v;ue+=N){let _e=m[ue];if(_e==null)continue;let re=se(b[ue]),U=$(_e);l==1?B(w,re,P):B(w,E,U),B(w,re,U),P=U,E=re}let C=E;a&&l==1&&(C=F+L,B(w,C,P));let[Se,me]=ai(c,u);if(h.fill!=null||Se!=0){let ue=te.fill=new Path2D(w),_e=h.fillTo(c,u,h.min,h.max,Se),re=$(_e);B(ue,C,re),B(ue,K,re)}if(!h.spanGaps){let ue=[];ue.push(...ri(b,m,d,v,N,se,n));let _e=h.width*Ne/2,re=i||l==1?_e:-_e,U=i||l==-1?-_e:_e;ue.forEach(ke=>{ke[0]+=re,ke[1]+=U}),te.gaps=ue=h.gaps(c,u,d,v,ue),te.clip=ls(ue,_.ori,q,Q,y,j)}return me!=0&&(te.band=me==2?[bl(c,u,d,v,w,-1),bl(c,u,d,v,w,1)]:bl(c,u,d,v,w,me)),te})}function ma(e,l,i,n,a,c,u=We){if(e.length>1){let d=null;for(let v=0,h=1/0;v<e.length;v++)if(l[v]!==void 0){if(d!=null){let b=bt(e[v]-e[d]);b<h&&(h=b,u=bt(i(e[v],n,a,c)-i(e[d],n,a,c)))}d=v}}return u}function zu(e){e=e||Mn;const l=Oe(e.size,[.6,We,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=Ee(a),u=1-l[0],d=Oe(l[1],We),v=Oe(l[2],1),h=Oe(e.disp,Mn),b=Oe(e.each,O=>{}),{fill:m,stroke:_}=h;return(O,T,J,q)=>Bl(O,T,(Q,y,j,A,F,L,se,$,B,te,w)=>{let N=Q.pxRound,P=i,X=n*Ne,E=d*Ne,K=v*Ne,C,Se;A.ori==0?[C,Se]=c(O,T):[Se,C]=c(O,T);const me=A.dir*(A.ori==0?1:-1);let ue=A.ori==0?is:oi,_e=A.ori==0?b:(G,Le,qe,Ut,Yt,Tt,Nt)=>{b(G,Le,qe,Yt,Ut,Nt,Tt)},re=Oe(O.bands,ti).find(G=>G.series[0]==T),U=re!=null?re.dir:0,ke=Q.fillTo(O,T,Q.min,Q.max,U),He=N(se(ke,F,w,B)),Me,de,st,lt=te,Ae=N(Q.width*Ne),Xe=!1,nt=null,je=null,it=null,kt=null;m!=null&&(Ae==0||_!=null)&&(Xe=!0,nt=m.values(O,T,J,q),je=new Map,new Set(nt).forEach(G=>{G!=null&&je.set(G,new Path2D)}),Ae>0&&(it=_.values(O,T,J,q),kt=new Map,new Set(it).forEach(G=>{G!=null&&kt.set(G,new Path2D)})));let{x0:pe,size:at}=h;if(pe!=null&&at!=null){P=1,y=pe.values(O,T,J,q),pe.unit==2&&(y=y.map(qe=>O.posToVal($+qe*te,A.key,!0)));let G=at.values(O,T,J,q);at.unit==2?de=G[0]*te:de=L(G[0],A,te,$)-L(0,A,te,$),lt=ma(y,j,L,A,te,$,lt),st=lt-de+X}else lt=ma(y,j,L,A,te,$,lt),st=lt*u+X,de=lt-st;st<1&&(st=0),Ae>=de/2&&(Ae=0),st<5&&(N=Pa);let Pt=st>0,ft=lt-st-(Pt?Ae:0);de=N(Is(ft,K,E)),Me=(P==0?de/2:P==me?0:de)-P*me*((P==0?X/2:0)+(Pt?Ae/2:0));const Ye={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},dt=Xe?null:new Path2D;let Rt=null;if(re!=null)Rt=O.data[re.series[1]];else{let{y0:G,y1:Le}=h;G!=null&&Le!=null&&(j=Le.values(O,T,J,q),Rt=G.values(O,T,J,q))}let Gt=C*de,ce=Se*de;for(let G=me==1?J:q;G>=J&&G<=q;G+=me){let Le=j[G];if(Le==null)continue;if(Rt!=null){let Y=Rt[G]??0;if(Le-Y==0)continue;He=se(Y,F,w,B)}let qe=A.distr!=2||h!=null?y[G]:G,Ut=L(qe,A,te,$),Yt=se(Oe(Le,ke),F,w,B),Tt=N(Ut-Me),Nt=N(Ht(Yt,He)),R=N(cl(Yt,He)),H=Nt-R;if(Le!=null){let Y=Le<0?ce:Gt,le=Le<0?Gt:ce;Xe?(Ae>0&&it[G]!=null&&ue(kt.get(it[G]),Tt,R+Zt(Ae/2),de,Ht(0,H-Ae),Y,le),nt[G]!=null&&ue(je.get(nt[G]),Tt,R+Zt(Ae/2),de,Ht(0,H-Ae),Y,le)):ue(dt,Tt,R+Zt(Ae/2),de,Ht(0,H-Ae),Y,le),_e(O,T,G,Tt-Ae/2,R,de+Ae,H)}}return Ae>0?Ye.stroke=Xe?kt:dt:Xe||(Ye._fill=Q.width==0?Q._fill:Q._stroke??Q._fill,Ye.width=0),Ye.fill=Xe?je:dt,Ye})}function Vu(e,l){const i=Oe(l?.alignGaps,0);return(n,a,c,u)=>Bl(n,a,(d,v,h,b,m,_,O,T,J,q,Q)=>{[c,u]=Qn(h,c,u);let y=d.pxRound,j=C=>y(_(C,b,q,T)),A=C=>y(O(C,m,Q,J)),F,L,se;b.ori==0?(F=ns,se=rn,L=ir):(F=ss,se=on,L=ar);const $=b.dir*(b.ori==0?1:-1);let B=j(v[$==1?c:u]),te=B,w=[],N=[];for(let C=$==1?c:u;C>=c&&C<=u;C+=$)if(h[C]!=null){let me=v[C],ue=j(me);w.push(te=ue),N.push(A(h[C]))}const P={stroke:e(w,N,F,se,L,y),fill:null,clip:null,band:null,gaps:null,flags:sn},X=P.stroke;let[E,K]=ai(n,a);if(d.fill!=null||E!=0){let C=P.fill=new Path2D(X),Se=d.fillTo(n,a,d.min,d.max,E),me=A(Se);se(C,te,me),se(C,B,me)}if(!d.spanGaps){let C=[];C.push(...ri(v,h,c,u,$,j,i)),P.gaps=C=d.gaps(n,a,c,u,C),P.clip=ls(C,b.ori,T,J,q,Q)}return K!=0&&(P.band=K==2?[bl(n,a,c,u,X,-1),bl(n,a,c,u,X,1)]:bl(n,a,c,u,X,K)),P})}function Iu(e){return Vu(Bu,e)}function Bu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),u==2)n(d,e[1],l[1]);else{let v=Array(u),h=Array(u-1),b=Array(u-1),m=Array(u-1);for(let _=0;_<u-1;_++)b[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],h[_]=b[_]/m[_];v[0]=h[0];for(let _=1;_<u-1;_++)h[_]===0||h[_-1]===0||h[_-1]>0!=h[_]>0?v[_]=0:(v[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/h[_-1]+(m[_]+2*m[_-1])/h[_]),isFinite(v[_])||(v[_]=0));v[u-1]=h[u-2];for(let _=0;_<u-1;_++)a(d,e[_]+m[_]/3,l[_]+v[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-v[_+1]*m[_]/3,e[_+1],l[_+1])}return d}const Us=new Set;function _a(){for(let e of Us)e.syncRect(!0)}an&&(Vl(bo,en,_a),Vl(yo,en,_a,!0),Vl(qn,en,()=>{yt.pxRatio=Ne}));const Hu=ur(),Wu=rr();function wa(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ys(c,u,l,i))}function Uu(e,l){return e.map((i,n)=>n==0?{}:gt({},l,i))}function Ys(e,l,i,n){return gt({},l==0?i:n,e)}function cr(e,l,i){return l==null?ln:[l,i]}const Yu=cr;function qu(e,l,i){return l==null?ln:jn(l,i,Xs,!0)}function fr(e,l,i,n){return l==null?ln:Xn(l,i,e.scales[n].log,!1)}const ju=fr;function dr(e,l,i,n){return l==null?ln:Qs(l,i,e.scales[n].log,!1)}const Ku=dr;function Ju(e,l,i,n,a){let c=Ht(Zi(e),Zi(l)),u=l-e,d=ul(a/n*u,i);do{let v=i[d],h=n*v/u;if(h>=a&&c+(v<5?Ll.get(v):0)<=17)return[v,h]}while(++d<i.length);return[0,0]}function xa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=xt((i=+a)*Ne))+"px"),[e,l,i]}function $u(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ue(l[2]*Ne,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function yt(e,l,i){const n={mode:Oe(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function d(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let v=!1;n.status=0;const h=n.root=tl(lo);if(e.id!=null&&(h.id=e.id),$t(h,e.class),e.title){let t=tl(io,h);t.textContent=e.title}const b=ol("canvas"),m=n.ctx=b.getContext("2d"),_=tl(ao,h);Vl("click",_,t=>{t.target===T&&(Ke!=jl||tt!=Kl)&&Ot.click(n,t)},!0);const O=n.under=tl(ro,_);_.appendChild(b);const T=n.over=tl(oo,_);e=nn(e);const J=+Oe(e.pxAlign,1),q=ga(J);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const Q=e.ms||.001,y=n.series=a==1?wa(e.series||[],ua,va,!1):Uu(e.series||[null],pa),j=n.axes=wa(e.axes||[],oa,fa,!0),A=n.scales={},F=n.bands=e.bands||[];F.forEach(t=>{t.fill=Ee(t.fill||null),t.dir=Oe(t.dir,-1)});const L=a==2?y[1].facets[0].scale:y[0].scale,se={axes:xr,series:hr},$=(e.drawOrder||["axes","series"]).map(t=>se[t]);function B(t){const s=t.distr==3?r=>xl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Cs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:g}=t,x=g-f;return(o-f)/x}}function te(t){let s=A[t];if(s==null){let r=(e.scales||Mn)[t]||Mn;if(r.from!=null){te(r.from);let o=gt({},A[r.from],r,{key:t});o.valToPct=B(o),A[t]=o}else{s=A[t]=gt({},t==L?er:Pu,r),s.key=t;let o=s.time,f=s.range,g=Al(f);if((t!=L||a==2&&!o)&&(g&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ki:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ki:{mode:1,hard:f[1],soft:f[1]}},g=!1),!g&&ts(f))){let x=f;f=(S,D,V)=>D==null?ln:jn(D,V,x)}s.range=Ee(f||(o?Yu:t==L?s.distr==3?ju:s.distr==4?Ku:cr:s.distr==3?fr:s.distr==4?dr:qu)),s.auto=Ee(g?!1:s.auto),s.clamp=Ee(s.clamp||Cu),s._min=s._max=null,s.valToPct=B(s)}}}te("x"),te("y"),a==1&&y.forEach(t=>{te(t.scale)}),j.forEach(t=>{te(t.scale)});for(let t in e.scales)te(t);const w=A[L],N=w.distr;let P,X;w.ori==0?($t(h,no),P=c,X=u):($t(h,so),P=u,X=c);const E={};for(let t in A){let s=A[t];(s.min!=null||s.max!=null)&&(E[t]={min:s.min,max:s.max},s.min=s.max=null)}const K=e.tzDate||(t=>new Date(xt(t/Q))),C=e.fmtDate||li,Se=Q==1?su(K):ru(K),me=ia(K,sa(Q==1?nu:au,C)),ue=ra(K,aa(uu,C)),_e=[],re=n.legend=gt({},du,e.legend),U=n.cursor=gt({},_u,{drag:{y:a==2}},e.cursor),ke=re.show,He=U.show,Me=re.markers;re.idxs=_e,Me.width=Ee(Me.width),Me.dash=Ee(Me.dash),Me.stroke=Ee(Me.stroke),Me.fill=Ee(Me.fill);let de,st,lt,Ae=[],Xe=[],nt,je=!1,it={};if(re.live){const t=y[1]?y[1].values:null;je=t!=null,nt=je?t(n,1,0):{_:0};for(let s in nt)it[s]=$s}if(ke)if(de=ol("table",ho,h),lt=ol("tbody",null,de),re.mount(n,de),je){st=ol("thead",null,de,lt);let t=ol("tr",null,st);ol("th",null,t);for(var kt in nt)ol("th",Oi,t).textContent=kt}else $t(de,mo),re.live&&$t(de,go);const pe={show:!0},at={show:!1};function Pt(t,s){if(s==0&&(je||!re.live||a==2))return ln;let r=[],o=ol("tr",_o,lt,lt.childNodes[s]);$t(o,t.class),t.show||$t(o,Nl);let f=ol("th",null,o);if(Me.show){let S=tl(wo,f);if(s>0){let D=Me.width(n,s);D&&(S.style.border=D+"px "+Me.dash(n,s)+" "+Me.stroke(n,s)),S.style.background=Me.fill(n,s)}}let g=tl(Oi,f);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(Me.show||(g.style.color=t.width>0?Me.stroke(n,s):Me.fill(n,s)),Ye("click",f,S=>{if(U._lock)return;rt(S);let D=y.indexOf(t);if((S.ctrlKey||S.metaKey)!=re.isolate){let V=y.some((W,Z)=>Z>0&&Z!=D&&W.show);y.forEach((W,Z)=>{Z>0&&dl(Z,V?Z==D?pe:at:pe,!0,ht.setSeries)})}else dl(D,{show:!t.show},!0,ht.setSeries)},!1),nl&&Ye(Vi,f,S=>{U._lock||(rt(S),dl(y.indexOf(t),$l,!0,ht.setSeries))},!1));for(var x in nt){let S=ol("td",xo,o);S.textContent="--",r.push(S)}return[o,r]}const ft=new Map;function Ye(t,s,r,o=!0){const f=ft.get(s)||{},g=U.bind[t](n,s,r,o);g&&(Vl(t,s,f[t]=g),ft.set(s,f))}function dt(t,s,r){const o=ft.get(s)||{};for(let f in o)(t==null||f==t)&&(Vs(f,s,o[f]),delete o[f]);t==null&&ft.delete(s)}let Rt=0,Gt=0,ce=0,G=0,Le=0,qe=0,Ut=Le,Yt=qe,Tt=ce,Nt=G,R=0,H=0,Y=0,le=0;n.bbox={};let oe=!1,we=!1,ee=!1,ne=!1,Ce=!1,xe=!1;function et(t,s,r){(r||t!=n.width||s!=n.height)&&z(t,s),Wl(!1),ee=!0,we=!0,Ul()}function z(t,s){n.width=Rt=ce=t,n.height=Gt=G=s,Le=qe=0,pt(),zt();let r=n.bbox;R=r.left=Ol(Le*Ne,.5),H=r.top=Ol(qe*Ne,.5),Y=r.width=Ol(ce*Ne,.5),le=r.height=Ol(G*Ne,.5)}const ie=3;function ve(){let t=!1,s=0;for(;!t;){s++;let r=_r(s),o=wr(s);t=s==ie||r&&o,t||(z(n.width,n.height),we=!0)}}function Pe({width:t,height:s}){et(t,s)}n.setSize=Pe;function pt(){let t=!1,s=!1,r=!1,o=!1;j.forEach((f,g)=>{if(f.show&&f._show){let{side:x,_size:S}=f,D=x%2,V=f.label!=null?f.labelSize:0,W=S+V;W>0&&(D?(ce-=W,x==3?(Le+=W,o=!0):r=!0):(G-=W,x==0?(qe+=W,t=!0):s=!0))}}),sl[0]=t,sl[1]=r,sl[2]=s,sl[3]=o,ce-=fl[1]+fl[3],Le+=fl[3],G-=fl[2]+fl[0],qe+=fl[0]}function zt(){let t=Le+ce,s=qe+G,r=Le,o=qe;function f(g,x){switch(g){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}j.forEach((g,x)=>{if(g.show&&g._show){let S=g.side;g._pos=f(S,g._size),g.label!=null&&(g._lpos=f(S,g.labelSize))}})}if(U.dataIdx==null){let t=U.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Ee(t.prox),o=t.bias??=0;U.dataIdx=(f,g,x,S)=>{if(g==0)return x;let D=x,V=r(f,g,x,S)??We,W=V>=0&&V<We,Z=w.ori==0?ce:G,ge=U.left,Ge=l[0],Fe=l[g];if(s.has(Fe[x])){D=null;let Te=null,fe=null,ae;if(o==0||o==-1)for(ae=x;Te==null&&ae-- >0;)s.has(Fe[ae])||(Te=ae);if(o==0||o==1)for(ae=x;fe==null&&ae++<Fe.length;)s.has(Fe[ae])||(fe=ae);if(Te!=null||fe!=null)if(W){let $e=Te==null?-1/0:P(Ge[Te],w,Z,0),ot=fe==null?1/0:P(Ge[fe],w,Z,0),Ct=ge-$e,Be=ot-ge;Ct<=Be?Ct<=V&&(D=Te):Be<=V&&(D=fe)}else D=fe==null?Te:Te==null?fe:x-Te<=fe-x?Te:fe}else W&&bt(ge-P(Ge[x],w,Z,0))>V&&(D=null);return D}}const rt=t=>{U.event=t};U.idxs=_e,U._lock=!1;let he=U.points;he.show=Ee(he.show),he.size=Ee(he.size),he.stroke=Ee(he.stroke),he.width=Ee(he.width),he.fill=Ee(he.fill);const ct=n.focus=gt({},e.focus||{alpha:.3},U.focus),nl=ct.prox>=0,wt=nl&&he.one;let Re=[],vt=[],qt=[];function yl(t,s){let r=he.show(n,s);if(r instanceof HTMLElement)return $t(r,vo),$t(r,t.class),gl(r,-10,-10,ce,G),T.insertBefore(r,Re[s]),r}function Sl(t,s){if(a==1||s>0){let r=a==1&&A[t.scale].time,o=t.value;t.value=r?ea(o)?ra(K,aa(o,C)):o||ue:o||Au,t.label=t.label||(r?xu:wu)}if(wt||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Hu||Po,t.fillTo=Ee(t.fillTo||Ru),t.pxAlign=+Oe(t.pxAlign,J),t.pxRound=ga(t.pxAlign),t.stroke=Ee(t.stroke||null),t.fill=Ee(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Du(Ht(1,t.width),1),o=t.points=gt({},{size:r,width:Ht(1,r*.2),stroke:t.stroke,space:r*2,paths:Wu,_stroke:null,_fill:null},t.points);o.show=Ee(o.show),o.filter=Ee(o.filter),o.fill=Ee(o.fill),o.stroke=Ee(o.stroke),o.paths=Ee(o.paths),o.pxAlign=t.pxAlign}if(ke){let r=Pt(t,s);Ae.splice(s,0,r[0]),Xe.splice(s,0,r[1]),re.values.push(null)}if(He){_e.splice(s,0,null);let r=null;wt?s==0&&(r=yl(t,s)):s>0&&(r=yl(t,s)),Re.splice(s,0,r),vt.splice(s,0,0),qt.splice(s,0,0)}Lt("addSeries",s)}function un(t,s){s=s??y.length,t=a==1?Ys(t,s,ua,va):Ys(t,s,{},pa),y.splice(s,0,t),Sl(y[s],s)}n.addSeries=un;function ml(t){if(y.splice(t,1),ke){re.values.splice(t,1),Xe.splice(t,1);let s=Ae.splice(t,1)[0];dt(null,s.firstChild),s.remove()}He&&(_e.splice(t,1),Re.splice(t,1)[0].remove(),vt.splice(t,1),qt.splice(t,1)),Lt("delSeries",t)}n.delSeries=ml;const sl=[!1,!1,!1,!1];function as(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=A[t.scale];o==null&&(t.scale=r?y[1].scale:L,o=A[t.scale]);let f=o.time;t.size=Ee(t.size),t.space=Ee(t.space),t.rotate=Ee(t.rotate),Al(t.incrs)&&t.incrs.forEach(x=>{!Ll.has(x)&&Ll.set(x,Oa(x))}),t.incrs=Ee(t.incrs||(o.distr==2?eu:f?Q==1?lu:iu:Gl)),t.splits=Ee(t.splits||(f&&o.distr==1?Se:o.distr==3?Bs:o.distr==4?Su:yu)),t.stroke=Ee(t.stroke),t.grid.stroke=Ee(t.grid.stroke),t.ticks.stroke=Ee(t.ticks.stroke),t.border.stroke=Ee(t.border.stroke);let g=t.values;t.values=Al(g)&&!Al(g[0])?Ee(g):f?Al(g)?ia(K,sa(g,C)):ea(g)?ou(K,g):g||me:g||bu,t.filter=Ee(t.filter||(o.distr>=3&&o.log==10?Mu:o.distr==3&&o.log==2?Eu:Ra)),t.font=xa(t.font),t.labelFont=xa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(sl[s]=!0,t._el=tl(uo,_))}}function Cl(t,s,r,o){let[f,g,x,S]=r,D=s%2,V=0;return D==0&&(S||g)&&(V=s==0&&!f||s==2&&!x?xt(oa.size/3):0),D==1&&(f||x)&&(V=s==1&&!g||s==3&&!S?xt(fa.size/2):0),V}const Ln=n.padding=(e.padding||[Cl,Cl,Cl,Cl]).map(t=>Ee(Oe(t,Cl))),fl=n._padding=Ln.map((t,s)=>t(n,s,sl,0));let Ft,Mt=null,Et=null;const Cn=a==1?y[0].idxs:null;let il=null,cn=!1;function ui(t,s){if(l=t??[],n.data=n._data=l,a==2){Ft=0;for(let r=1;r<y.length;r++)Ft+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),il=l[0],Ft=il.length;let r=l;if(N==2){r=l.slice();let o=r[0]=Array(Ft);for(let f=0;f<Ft;f++)o[f]=f}n._data=l=r}if(Wl(!0),Lt("setData"),N==2&&(ee=!0),s!==!1){let r=w;r.auto(n,cn)?rs():Tl(L,r.min,r.max),ne=ne||U.left>=0,xe=!0,Ul()}}n.setData=ui;function rs(){cn=!0;let t,s;a==1&&(Ft>0?(Mt=Cn[0]=0,Et=Cn[1]=Ft-1,t=l[0][Mt],s=l[0][Et],N==2?(t=Mt,s=Et):t==s&&(N==3?[t,s]=Xn(t,t,w.log,!1):N==4?[t,s]=Qs(t,t,w.log,!1):w.time?s=t+xt(86400/Q):[t,s]=jn(t,s,Xs,!0))):(Mt=Cn[0]=t=null,Et=Cn[1]=s=null)),Tl(L,t,s)}let Pn,Hl,os,us,cs,fs,ds,ps,vs,Wt;function ci(t,s,r,o,f,g){t??=Ni,r??=ti,o??="butt",f??=Ni,g??="round",t!=Pn&&(m.strokeStyle=Pn=t),f!=Hl&&(m.fillStyle=Hl=f),s!=os&&(m.lineWidth=os=s),g!=cs&&(m.lineJoin=cs=g),o!=fs&&(m.lineCap=fs=o),r!=us&&m.setLineDash(us=r)}function fi(t,s,r,o){s!=Hl&&(m.fillStyle=Hl=s),t!=ds&&(m.font=ds=t),r!=ps&&(m.textAlign=ps=r),o!=vs&&(m.textBaseline=vs=o)}function hs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,cn)&&(s==null||s.min==null)){let g=Oe(Mt,0),x=Oe(Et,o.length-1),S=r.min==null?Mo(o,g,x,f,t.distr==3):[r.min,r.max];t.min=cl(t.min,r.min=S[0]),t.max=Ht(t.max,r.max=S[1])}}const di={min:null,max:null};function pr(){for(let o in A){let f=A[o];E[o]==null&&(f.min==null||E[L]!=null&&f.auto(n,cn))&&(E[o]=di)}for(let o in A){let f=A[o];E[o]==null&&f.from!=null&&E[f.from]!=null&&(E[o]=di)}E[L]!=null&&Wl(!0);let t={};for(let o in E){let f=E[o];if(f!=null){let g=t[o]=nn(A[o],Oo);if(f.min!=null)gt(g,f);else if(o!=L||a==2)if(Ft==0&&g.from==null){let x=g.range(n,null,null,o);g.min=x[0],g.max=x[1]}else g.min=We,g.max=-We}}if(Ft>0){y.forEach((o,f)=>{if(a==1){let g=o.scale,x=E[g];if(x==null)return;let S=t[g];if(f==0){let D=S.range(n,S.min,S.max,g);S.min=D[0],S.max=D[1],Mt=ul(S.min,l[0]),Et=ul(S.max,l[0]),Et-Mt>1&&(l[0][Mt]<S.min&&Mt++,l[0][Et]>S.max&&Et--),o.min=il[Mt],o.max=il[Et]}else o.show&&o.auto&&hs(S,x,o,l[f],o.sorted);o.idxs[0]=Mt,o.idxs[1]=Et}else if(f>0&&o.show&&o.auto){let[g,x]=o.facets,S=g.scale,D=x.scale,[V,W]=l[f],Z=t[S],ge=t[D];Z!=null&&hs(Z,E[S],g,V,g.sorted),ge!=null&&hs(ge,E[D],x,W,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],g=E[o];if(f.from==null&&(g==null||g.min==null)){let x=f.range(n,f.min==We?null:f.min,f.max==-We?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let g=t[f.from];if(g.min==null)f.min=f.max=null;else{let x=f.range(n,g.min,g.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],g=A[o];if(g.min!=f.min||g.max!=f.max){g.min=f.min,g.max=f.max;let x=g.distr;g._min=x==3?xl(g.min):x==4?Cs(g.min,g.asinh):x==100?g.fwd(g.min):g.min,g._max=x==3?xl(g.max):x==4?Cs(g.max,g.asinh):x==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){y.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)ee=!0,Lt("setScale",o);He&&U.left>=0&&(ne=xe=!0)}for(let o in E)E[o]=null}function vr(t){let s=Is(Mt-1,0,Ft-1),r=Is(Et+1,0,Ft-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<Ft-1;)r++;return[s,r]}function hr(){if(Ft>0){let t=y.some(s=>s._focus)&&Wt!=ct.alpha;t&&(m.globalAlpha=Wt=ct.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(pi(r,!1),pi(r,!0),s._paths==null)){let o=Wt;Wt!=s.alpha&&(m.globalAlpha=Wt=s.alpha);let f=a==2?[0,l[r][0].length-1]:vr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Wt!=o&&(m.globalAlpha=Wt=o)}}),y.forEach((s,r)=>{if(r>0&&s.show){let o=Wt;Wt!=s.alpha&&(m.globalAlpha=Wt=s.alpha),s._paths!=null&&vi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,Mt,Et,f),x=s.points.filter(n,r,g,f);(g||x)&&(s.points._paths=s.points.paths(n,r,Mt,Et,x),vi(r,!0))}Wt!=o&&(m.globalAlpha=Wt=o),Lt("drawSeries",r)}}),t&&(m.globalAlpha=Wt=1)}}function pi(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function vi(t,s){let r=s?y[t].points:y[t],{stroke:o,fill:f,clip:g,flags:x,_stroke:S=r._stroke,_fill:D=r._fill,_width:V=r.width}=r._paths;V=Ue(V*Ne,3);let W=null,Z=V%2/2;s&&D==null&&(D=V>0?"#fff":S);let ge=r.pxAlign==1&&Z>0;if(ge&&m.translate(Z,Z),!s){let Ge=R-V/2,Fe=H-V/2,Te=Y+V,fe=le+V;W=new Path2D,W.rect(Ge,Fe,Te,fe)}s?gs(S,V,r.dash,r.cap,D,o,f,x,g):gr(t,S,V,r.dash,r.cap,D,o,f,x,W,g),ge&&m.translate(-Z,-Z)}function gr(t,s,r,o,f,g,x,S,D,V,W){let Z=!1;D!=0&&F.forEach((ge,Ge)=>{if(ge.series[0]==t){let Fe=y[ge.series[1]],Te=l[ge.series[1]],fe=(Fe._paths||Mn).band;Al(fe)&&(fe=ge.dir==1?fe[0]:fe[1]);let ae,$e=null;Fe.show&&fe&&Ao(Te,Mt,Et)?($e=ge.fill(n,Ge)||g,ae=Fe._paths.clip):fe=null,gs(s,r,o,f,$e,x,S,D,V,W,ae,fe),Z=!0}}),Z||gs(s,r,o,f,g,x,S,D,V,W)}const hi=sn|Ws;function gs(t,s,r,o,f,g,x,S,D,V,W,Z){ci(t,s,r,o,f),(D||V||Z)&&(m.save(),D&&m.clip(D),V&&m.clip(V)),Z?(S&hi)==hi?(m.clip(Z),W&&m.clip(W),Fn(f,x),Rn(t,g,s)):S&Ws?(Fn(f,x),m.clip(Z),Rn(t,g,s)):S&sn&&(m.save(),m.clip(Z),W&&m.clip(W),Fn(f,x),m.restore(),Rn(t,g,s)):(Fn(f,x),Rn(t,g,s)),(D||V||Z)&&m.restore()}function Rn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=Pn=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function Fn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Hl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function mr(t,s,r,o){let f=j[t],g;if(o<=0)g=[0,0];else{let x=f._space=f.space(n,t,s,r,o),S=f._incrs=f.incrs(n,t,s,r,o,x);g=Ju(s,r,S,o,x)}return f._found=g}function ms(t,s,r,o,f,g,x,S,D,V){let W=x%2/2;J==1&&m.translate(W,W),ci(S,x,D,V,S),m.beginPath();let Z,ge,Ge,Fe,Te=f+(o==0||o==3?-g:g);r==0?(ge=f,Fe=Te):(Z=f,Ge=Te);for(let fe=0;fe<t.length;fe++)s[fe]!=null&&(r==0?Z=Ge=t[fe]:ge=Fe=t[fe],m.moveTo(Z,ge),m.lineTo(Ge,Fe));m.stroke(),J==1&&m.translate(-W,-W)}function _r(t){let s=!0;return j.forEach((r,o)=>{if(!r.show)return;let f=A[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Wl(!1));return}else r._show||(s=!1,r._show=!0,Wl(!1));let g=r.side,x=g%2,{min:S,max:D}=f,[V,W]=mr(o,S,D,x==0?ce:G);if(W==0)return;let Z=f.distr==2,ge=r._splits=r.splits(n,o,S,D,V,W,Z),Ge=f.distr==2?ge.map(ae=>il[ae]):ge,Fe=f.distr==2?il[ge[1]]-il[ge[0]]:V,Te=r._values=r.values(n,r.filter(n,Ge,o,W,Fe),o,W,Fe);r._rotate=g==2?r.rotate(n,Te,o,W):0;let fe=r._size;r._size=ll(r.size(n,Te,o,t)),fe!=null&&r._size!=fe&&(s=!1)}),s}function wr(t){let s=!0;return Ln.forEach((r,o)=>{let f=r(n,o,sl,t);f!=fl[o]&&(s=!1),fl[o]=f}),s}function xr(){for(let t=0;t<j.length;t++){let s=j[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,g,x=s.stroke(n,t),S=r==0||r==3?-1:1,[D,V]=s._found;if(s.label!=null){let It=s.labelGap*S,Jt=xt((s._lpos+It)*Ne);fi(s.labelFont[0],x,"center",r==2?mn:Gi),m.save(),o==1?(f=g=0,m.translate(Jt,xt(H+le/2)),m.rotate((r==3?-Hn:Hn)/2)):(f=xt(R+Y/2),g=Jt);let Fl=Ca(s.label)?s.label(n,t,D,V):s.label;m.fillText(Fl,f,g),m.restore()}if(V==0)continue;let W=A[s.scale],Z=o==0?Y:le,ge=o==0?R:H,Ge=s._splits,Fe=W.distr==2?Ge.map(It=>il[It]):Ge,Te=W.distr==2?il[Ge[1]]-il[Ge[0]]:D,fe=s.ticks,ae=s.border,$e=fe.show?fe.size:0,ot=xt($e*Ne),Ct=xt((s.alignTo==2?s._size-$e-s.gap:s.gap)*Ne),Be=s._rotate*-Hn/180,ut=q(s._pos*Ne),jt=(ot+Ct)*S,Vt=ut+jt;g=o==0?Vt:0,f=o==1?Vt:0;let Xt=s.font[0],al=s.align==1?Ql:s.align==2?As:Be>0?Ql:Be<0?As:o==0?"center":r==3?As:Ql,vl=Be||o==1?"middle":r==2?mn:Gi;fi(Xt,x,al,vl);let Kt=s.font[1]*s.lineGap,el=Ge.map(It=>q(d(It,W,Z,ge))),rl=s._values;for(let It=0;It<rl.length;It++){let Jt=rl[It];if(Jt!=null){o==0?f=el[It]:g=el[It],Jt=""+Jt;let Fl=Jt.indexOf(`
`)==-1?[Jt]:Jt.split(/\n/gm);for(let Bt=0;Bt<Fl.length;Bt++){let Fi=Fl[Bt];Be?(m.save(),m.translate(f,g+Bt*Kt),m.rotate(Be),m.fillText(Fi,0,0),m.restore()):m.fillText(Fi,f,g+Bt*Kt)}}}fe.show&&ms(el,fe.filter(n,Fe,t,V,Te),o,r,ut,ot,Ue(fe.width*Ne,3),fe.stroke(n,t),fe.dash,fe.cap);let hl=s.grid;hl.show&&ms(el,hl.filter(n,Fe,t,V,Te),o,o==0?2:1,o==0?H:R,o==0?le:Y,Ue(hl.width*Ne,3),hl.stroke(n,t),hl.dash,hl.cap),ae.show&&ms([ut],[1],o==0?1:0,o==0?1:2,o==1?H:R,o==1?le:Y,Ue(ae.width*Ne,3),ae.stroke(n,t),ae.dash,ae.cap)}Lt("drawAxes")}function Wl(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let On=!1,_s=!1,fn=[];function br(){_s=!1;for(let t=0;t<fn.length;t++)Lt(...fn[t]);fn.length=0}function Ul(){On||(Ho(gi),On=!0)}function yr(t,s=!1){On=!0,_s=s,t(n),gi(),s&&fn.length>0&&queueMicrotask(br)}n.batch=yr;function gi(){if(oe&&(pr(),oe=!1),ee&&(ve(),ee=!1),we){if(Ze(O,Ql,Le),Ze(O,mn,qe),Ze(O,xn,ce),Ze(O,bn,G),Ze(T,Ql,Le),Ze(T,mn,qe),Ze(T,xn,ce),Ze(T,bn,G),Ze(_,xn,Rt),Ze(_,bn,Gt),b.width=xt(Rt*Ne),b.height=xt(Gt*Ne),j.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let g=f===3||f===0?r:0,x=f%2==1;Ze(t,x?"left":"top",o-g),Ze(t,x?"width":"height",r),Ze(t,x?"top":"left",x?qe:Le),Ze(t,x?"height":"width",x?G:ce),zs(t,Nl)}else $t(t,Nl)}),Pn=Hl=os=cs=fs=ds=ps=vs=us=null,Wt=1,vn(!0),Le!=Ut||qe!=Yt||ce!=Tt||G!=Nt){Wl(!1);let t=ce/Tt,s=G/Nt;if(He&&!ne&&U.left>=0){U.left*=t,U.top*=s,Yl&&gl(Yl,xt(U.left),0,ce,G),ql&&gl(ql,0,xt(U.top),ce,G);for(let r=0;r<Re.length;r++){let o=Re[r];o!=null&&(vt[r]*=t,qt[r]*=s,gl(o,ll(vt[r]),ll(qt[r]),ce,G))}}if(Je.show&&!Ce&&Je.left>=0&&Je.width>0){Je.left*=t,Je.width*=t,Je.top*=s,Je.height*=s;for(let r in ks)Ze(Jl,r,Je[r])}Ut=Le,Yt=qe,Tt=ce,Nt=G}Lt("setSize"),we=!1}Rt>0&&Gt>0&&(m.clearRect(0,0,b.width,b.height),Lt("drawClear"),$.forEach(t=>t()),Lt("draw")),Je.show&&Ce&&(Gn(Je),Ce=!1),He&&ne&&(Rl(null,!0,!1),ne=!1),re.show&&re.live&&xe&&(ys(),xe=!1),v||(v=!0,n.status=1,Lt("ready")),cn=!1,On=!1}n.redraw=(t,s)=>{ee=s||!1,t!==!1?Tl(L,w.min,w.max):Ul()};function ws(t,s){let r=A[t];if(r.from==null){if(Ft==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(Ft>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==L&&r.distr==2&&Ft>0&&(s.min=ul(s.min,l[0]),s.max=ul(s.max,l[0]),s.min==s.max&&s.max++),E[t]=s,oe=!0,Ul()}}n.setScale=ws;let xs,bs,Yl,ql,mi,_i,jl,Kl,wi,xi,Ke,tt,kl=!1;const Ot=U.drag;let At=Ot.x,Dt=Ot.y;He&&(U.x&&(xs=tl(fo,T)),U.y&&(bs=tl(po,T)),w.ori==0?(Yl=xs,ql=bs):(Yl=bs,ql=xs),Ke=U.left,tt=U.top);const Je=n.select=gt({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Jl=Je.show?tl(co,Je.over?T:O):null;function Gn(t,s){if(Je.show){for(let r in t)Je[r]=t[r],r in ks&&Ze(Jl,r,t[r]);s!==!1&&Lt("setSelect")}}n.setSelect=Gn;function Sr(t){if(y[t].show)ke&&zs(Ae[t],Nl);else if(ke&&$t(Ae[t],Nl),He){let r=wt?Re[0]:Re[t];r!=null&&gl(r,-10,-10,ce,G)}}function Tl(t,s,r){ws(t,{min:s,max:r})}function dl(t,s,r,o){s.focus!=null&&Ar(t),s.show!=null&&y.forEach((f,g)=>{g>0&&(t==g||t==null)&&(f.show=s.show,Sr(g),a==2?(Tl(f.facets[0].scale,null,null),Tl(f.facets[1].scale,null,null)):Tl(f.scale,null,null),Ul())}),r!==!1&&Lt("setSeries",t,s),o&&hn("setSeries",n,t,s)}n.setSeries=dl;function kr(t,s){gt(F[t],s)}function Tr(t,s){t.fill=Ee(t.fill||null),t.dir=Oe(t.dir,-1),s=s??F.length,F.splice(s,0,t)}function Mr(t){t==null?F.length=0:F.splice(t,1)}n.addBand=Tr,n.setBand=kr,n.delBand=Mr;function Er(t,s){y[t].alpha=s,He&&Re[t]!=null&&(Re[t].style.opacity=s),ke&&Ae[t]&&(Ae[t].style.opacity=s)}let _l,Ml,Pl;const $l={focus:!0};function Ar(t){if(t!=Pl){let s=t==null,r=ct.alpha!=1;y.forEach((o,f)=>{if(a==1||f>0){let g=s||f==0||f==t;o._focus=s?null:g,r&&Er(f,g?1:ct.alpha)}}),Pl=t,r&&Ul()}}ke&&nl&&Ye(Ii,de,t=>{U._lock||(rt(t),Pl!=null&&dl(null,$l,!0,ht.setSeries))});function pl(t,s,r){let o=A[s];r&&(t=t/Ne-(o.ori==1?qe:Le));let f=ce;o.ori==1&&(f=G,t=f-t),o.dir==-1&&(t=f-t);let g=o._min,x=o._max,S=t/f,D=g+(x-g)*S,V=o.distr;return V==3?tn(10,D):V==4?Lo(D,o.asinh):V==100?o.bwd(D):D}function Dr(t,s){let r=pl(t,L,s);return ul(r,l[0],Mt,Et)}n.valToIdx=t=>ul(t,l[0]),n.posToIdx=Dr,n.posToVal=pl,n.valToPos=(t,s,r)=>A[s].ori==0?c(t,A[s],r?Y:ce,r?R:0):u(t,A[s],r?le:G,r?H:0),n.setCursor=(t,s,r)=>{Ke=t.left,tt=t.top,Rl(null,s,r)};function bi(t,s){Ze(Jl,Ql,Je.left=t),Ze(Jl,xn,Je.width=s)}function yi(t,s){Ze(Jl,mn,Je.top=t),Ze(Jl,bn,Je.height=s)}let dn=w.ori==0?bi:yi,pn=w.ori==1?bi:yi;function Lr(){if(ke&&re.live)for(let t=a==2?1:0;t<y.length;t++){if(t==0&&je)continue;let s=re.values[t],r=0;for(let o in s)Xe[t][r++].firstChild.nodeValue=s[o]}}function ys(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{_e[o]=r}):Fo(t.idx)||_e.fill(t.idx),re.idx=_e[0]),ke&&re.live){for(let r=0;r<y.length;r++)(r>0||a==1&&!je)&&Cr(r,_e[r]);Lr()}xe=!1,s!==!1&&Lt("setLegend")}n.setLegend=ys;function Cr(t,s){let r=y[t],o=t==0&&N==2?il:l[t],f;je?f=r.values(n,t,s)??it:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?it:{_:f}),re.values[t]=f}function Rl(t,s,r){wi=Ke,xi=tt,[Ke,tt]=U.move(n,Ke,tt),U.left=Ke,U.top=tt,He&&(Yl&&gl(Yl,xt(Ke),0,ce,G),ql&&gl(ql,0,xt(tt),ce,G));let o,f=Mt>Et;_l=We,Ml=null;let g=w.ori==0?ce:G,x=w.ori==1?ce:G;if(Ke<0||Ft==0||f){o=U.idx=null;for(let S=0;S<y.length;S++){let D=Re[S];D!=null&&gl(D,-10,-10,ce,G)}nl&&dl(null,$l,!0,t==null&&ht.setSeries),re.live&&(_e.fill(o),xe=!0)}else{let S,D,V;a==1&&(S=w.ori==0?Ke:tt,D=pl(S,L),o=U.idx=ul(D,l[0],Mt,Et),V=P(l[0][o],w,g,0));let W=-10,Z=-10,ge=0,Ge=0,Fe=!0,Te="",fe="";for(let ae=a==2?1:0;ae<y.length;ae++){let $e=y[ae],ot=_e[ae],Ct=ot==null?null:a==1?l[ae][ot]:l[ae][1][ot],Be=U.dataIdx(n,ae,o,D),ut=Be==null?null:a==1?l[ae][Be]:l[ae][1][Be];if(xe=xe||ut!=Ct||Be!=ot,_e[ae]=Be,ae>0&&$e.show){let jt=Be==null?-10:Be==o?V:P(a==1?l[0][Be]:l[ae][0][Be],w,g,0),Vt=ut==null?-10:X(ut,a==1?A[$e.scale]:A[$e.facets[1].scale],x,0);if(nl&&ut!=null){let Xt=w.ori==1?Ke:tt,al=bt(ct.dist(n,ae,Be,Vt,Xt));if(al<_l){let vl=ct.bias;if(vl!=0){let Kt=pl(Xt,$e.scale),el=ut>=0?1:-1,rl=Kt>=0?1:-1;rl==el&&(rl==1?vl==1?ut>=Kt:ut<=Kt:vl==1?ut<=Kt:ut>=Kt)&&(_l=al,Ml=ae)}else _l=al,Ml=ae}}if(xe||wt){let Xt,al;w.ori==0?(Xt=jt,al=Vt):(Xt=Vt,al=jt);let vl,Kt,el,rl,hl,It,Jt=!0,Fl=he.bbox;if(Fl!=null){Jt=!1;let Bt=Fl(n,ae);el=Bt.left,rl=Bt.top,vl=Bt.width,Kt=Bt.height}else el=Xt,rl=al,vl=Kt=he.size(n,ae);if(It=he.fill(n,ae),hl=he.stroke(n,ae),wt)ae==Ml&&_l<=ct.prox&&(W=el,Z=rl,ge=vl,Ge=Kt,Fe=Jt,Te=It,fe=hl);else{let Bt=Re[ae];Bt!=null&&(vt[ae]=el,qt[ae]=rl,ji(Bt,vl,Kt,Jt),Yi(Bt,It,hl),gl(Bt,ll(el),ll(rl),ce,G))}}}}if(wt){let ae=ct.prox,$e=Pl==null?_l<=ae:_l>ae||Ml!=Pl;if(xe||$e){let ot=Re[0];ot!=null&&(vt[0]=W,qt[0]=Z,ji(ot,ge,Ge,Fe),Yi(ot,Te,fe),gl(ot,ll(W),ll(Z),ce,G))}}}if(Je.show&&kl)if(t!=null){let[S,D]=ht.scales,[V,W]=ht.match,[Z,ge]=t.cursor.sync.scales,Ge=t.cursor.drag;if(At=Ge._x,Dt=Ge._y,At||Dt){let{left:Fe,top:Te,width:fe,height:ae}=t.select,$e=t.scales[Z].ori,ot=t.posToVal,Ct,Be,ut,jt,Vt,Xt=S!=null&&V(S,Z),al=D!=null&&W(D,ge);Xt&&At?($e==0?(Ct=Fe,Be=fe):(Ct=Te,Be=ae),ut=A[S],jt=P(ot(Ct,Z),ut,g,0),Vt=P(ot(Ct+Be,Z),ut,g,0),dn(cl(jt,Vt),bt(Vt-jt))):dn(0,g),al&&Dt?($e==1?(Ct=Fe,Be=fe):(Ct=Te,Be=ae),ut=A[D],jt=X(ot(Ct,ge),ut,x,0),Vt=X(ot(Ct+Be,ge),ut,x,0),pn(cl(jt,Vt),bt(Vt-jt))):pn(0,x)}else Ts()}else{let S=bt(wi-mi),D=bt(xi-_i);if(w.ori==1){let ge=S;S=D,D=ge}At=Ot.x&&S>=Ot.dist,Dt=Ot.y&&D>=Ot.dist;let V=Ot.uni;V!=null?At&&Dt&&(At=S>=V,Dt=D>=V,!At&&!Dt&&(D>S?Dt=!0:At=!0)):Ot.x&&Ot.y&&(At||Dt)&&(At=Dt=!0);let W,Z;At&&(w.ori==0?(W=jl,Z=Ke):(W=Kl,Z=tt),dn(cl(W,Z),bt(Z-W)),Dt||pn(0,x)),Dt&&(w.ori==1?(W=jl,Z=Ke):(W=Kl,Z=tt),pn(cl(W,Z),bt(Z-W)),At||dn(0,g)),!At&&!Dt&&(dn(0,0),pn(0,0))}if(Ot._x=At,Ot._y=Dt,t==null){if(r){if(Ri!=null){let[S,D]=ht.scales;ht.values[0]=S!=null?pl(w.ori==0?Ke:tt,S):null,ht.values[1]=D!=null?pl(w.ori==1?Ke:tt,D):null}hn(Ds,n,Ke,tt,ce,G,o)}if(nl){let S=r&&ht.setSeries,D=ct.prox;Pl==null?_l<=D&&dl(Ml,$l,!0,S):_l>D?dl(null,$l,!0,S):Ml!=Pl&&dl(Ml,$l,!0,S)}}xe&&(re.idx=o,ys()),s!==!1&&Lt("setCursor")}let El=null;Object.defineProperty(n,"rect",{get(){return El==null&&vn(!1),El}});function vn(t=!1){t?El=null:(El=T.getBoundingClientRect(),Lt("syncRect",El))}function Si(t,s,r,o,f,g,x){U._lock||kl&&t!=null&&t.movementX==0&&t.movementY==0||(Ss(t,s,r,o,f,g,x,!1,t!=null),t!=null?Rl(null,!0,!0):Rl(s,!0,!1))}function Ss(t,s,r,o,f,g,x,S,D){if(El==null&&vn(!1),rt(t),t!=null)r=t.clientX-El.left,o=t.clientY-El.top;else{if(r<0||o<0){Ke=-10,tt=-10;return}let[V,W]=ht.scales,Z=s.cursor.sync,[ge,Ge]=Z.values,[Fe,Te]=Z.scales,[fe,ae]=ht.match,$e=s.axes[0].side%2==1,ot=w.ori==0?ce:G,Ct=w.ori==1?ce:G,Be=$e?g:f,ut=$e?f:g,jt=$e?o:r,Vt=$e?r:o;if(Fe!=null?r=fe(V,Fe)?d(ge,A[V],ot,0):-10:r=ot*(jt/Be),Te!=null?o=ae(W,Te)?d(Ge,A[W],Ct,0):-10:o=Ct*(Vt/ut),w.ori==1){let Xt=r;r=o,o=Xt}}D&&(s==null||s.cursor.event.type==Ds)&&((r<=1||r>=ce-1)&&(r=Ol(r,ce)),(o<=1||o>=G-1)&&(o=Ol(o,G))),S?(mi=r,_i=o,[jl,Kl]=U.move(n,r,o)):(Ke=r,tt=o)}const ks={width:0,height:0,left:0,top:0};function Ts(){Gn(ks,!1)}let ki,Ti,Mi,Ei;function Ai(t,s,r,o,f,g,x){kl=!0,At=Dt=Ot._x=Ot._y=!1,Ss(t,s,r,o,f,g,x,!0,!1),t!=null&&(Ye(Ls,Gs,Di,!1),hn(zi,n,jl,Kl,ce,G,null));let{left:S,top:D,width:V,height:W}=Je;ki=S,Ti=D,Mi=V,Ei=W}function Di(t,s,r,o,f,g,x){kl=Ot._x=Ot._y=!1,Ss(t,s,r,o,f,g,x,!1,!0);let{left:S,top:D,width:V,height:W}=Je,Z=V>0||W>0,ge=ki!=S||Ti!=D||Mi!=V||Ei!=W;if(Z&&ge&&Gn(Je),Ot.setScale&&Z&&ge){let Ge=S,Fe=V,Te=D,fe=W;if(w.ori==1&&(Ge=D,Fe=W,Te=S,fe=V),At&&Tl(L,pl(Ge,L),pl(Ge+Fe,L)),Dt)for(let ae in A){let $e=A[ae];ae!=L&&$e.from==null&&$e.min!=We&&Tl(ae,pl(Te+fe,ae),pl(Te,ae))}Ts()}else U.lock&&(U._lock=!U._lock,Rl(s,!0,t!=null));t!=null&&(dt(Ls,Gs),hn(Ls,n,Ke,tt,ce,G,null))}function Pr(t,s,r,o,f,g,x){if(U._lock)return;rt(t);let S=kl;if(kl){let D=!0,V=!0,W=10,Z,ge;w.ori==0?(Z=At,ge=Dt):(Z=Dt,ge=At),Z&&ge&&(D=Ke<=W||Ke>=ce-W,V=tt<=W||tt>=G-W),Z&&D&&(Ke=Ke<jl?0:ce),ge&&V&&(tt=tt<Kl?0:G),Rl(null,!0,!0),kl=!1}Ke=-10,tt=-10,_e.fill(null),Rl(null,!0,!0),S&&(kl=S)}function Li(t,s,r,o,f,g,x){U._lock||(rt(t),rs(),Ts(),t!=null&&hn(Bi,n,Ke,tt,ce,G,null))}function Ci(){j.forEach($u),et(n.width,n.height,!0)}Vl(qn,en,Ci);const Zl={};Zl.mousedown=Ai,Zl.mousemove=Si,Zl.mouseup=Di,Zl.dblclick=Li,Zl.setSeries=(t,s,r,o)=>{let f=ht.match[2];r=f(n,s,r),r!=-1&&dl(r,o,!0,!1)},He&&(Ye(zi,T,Ai),Ye(Ds,T,Si),Ye(Vi,T,t=>{rt(t),vn(!1)}),Ye(Ii,T,Pr),Ye(Bi,T,Li),Us.add(n),n.syncRect=vn);const Nn=n.hooks=e.hooks||{};function Lt(t,s,r){_s?fn.push([t,s,r]):t in Nn&&Nn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Nn[s]=(Nn[s]||[]).concat(t.hooks[s])});const Pi=(t,s,r)=>r,ht=gt({key:null,setSeries:!1,filters:{pub:Qi,sub:Qi},scales:[L,y[1]?y[1].scale:null],match:[Xi,Xi,Pi],values:[null,null]},U.sync);ht.match.length==2&&ht.match.push(Pi),U.sync=ht;const Ri=ht.key,Ms=tr(Ri);function hn(t,s,r,o,f,g,x){ht.filters.pub(t,s,r,o,f,g,x)&&Ms.pub(t,s,r,o,f,g,x)}Ms.sub(n);function Rr(t,s,r,o,f,g,x){ht.filters.sub(t,s,r,o,f,g,x)&&Zl[t](null,s,r,o,f,g,x)}n.pub=Rr;function Fr(){Ms.unsub(n),Us.delete(n),ft.clear(),Vs(qn,en,Ci),h.remove(),de?.remove(),Lt("destroy")}n.destroy=Fr;function Es(){Lt("init",e,l),ui(l||e.data,!1),E[L]?ws(L,E[L]):rs(),Ce=Je.show&&(Je.width>0||Je.height>0),ne=xe=!0,et(e.width,e.height)}return y.forEach(Sl),j.forEach(as),i?i instanceof HTMLElement?(i.appendChild(h),Es()):i(n,Es):Es(),n}yt.assign=gt;yt.fmtNum=ei;yt.rangeNum=jn;yt.rangeLog=Xn;yt.rangeAsinh=Qs;yt.orient=Bl;yt.pxRatio=Ne;yt.join=Bo;yt.fmtDate=li,yt.tzDate=Qo;yt.sync=tr;{yt.addGap=Fu,yt.clipGaps=ls;let e=yt.paths={points:rr};e.linear=ur,e.stepped=Nu,e.bars=zu,e.spline=Iu}var Zu=ze('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Qu=ze('<span class="estimated-badge svelte-3wi8ix">est</span>'),Xu=ze('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),ec=ze('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),tc=ze('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),lc=ze('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function nc(e,l){$n(l,!0);const i=.5,n=1.2,a=32,c=212;function u(w,N){const P=[...w].sort((C,Se)=>C-Se),X=N/100*(P.length-1),E=Math.floor(X),K=Math.ceil(X);return E===K?P[E]:P[E]+(P[K]-P[E])*(X-E)}let d=kn(l,"trend",3,null),v=Qe(!1),h=Qe(""),b=Qe(null),m=Ie(()=>Bn.config.temp_units==="C"),_=Ie(Ma),O=Ie(Ks),T=Ie(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(pe=>pe.status!=="invalid");if(w.length===0)return null;const N=[...w].sort((pe,at)=>new Date(pe.timestamp).getTime()-new Date(at.timestamp).getTime()),P=N[0],X=N[N.length-1],E=N.map(pe=>pe.sg_calibrated??pe.sg_raw).filter(pe=>pe!==null&&pe>=i&&pe<=n),K=N.map(pe=>pe.temp_calibrated??pe.temp_raw).filter(pe=>pe!==null&&pe>=a&&pe<=c);if(E.length===0)return null;const C=E[E.length-1],Se=E[0],me=u(E,95),ue=u(E,5),_e=new Date(P.timestamp).getTime(),re=new Date(X.timestamp).getTime(),ke=(re-_e)/(1e3*60*60*24),He=ke>0?(C-Se)/ke:0;let Me=null,de=null,st=null,lt=null;if(K.length>0){const pe=K[K.length-1],at=K.reduce((Ye,dt)=>Ye+dt,0)/K.length,Pt=u(K,95),ft=u(K,5);Me=p(m)?wn(pe):pe,de=p(m)?wn(at):at,st=p(m)?wn(Pt):Pt,lt=p(m)?wn(ft):ft}let Ae=0;const Xe=.001;for(let pe=E.length-2;pe>=0;pe--)if(Math.abs(E[pe]-C)>Xe){const at=new Date(N[pe+1].timestamp).getTime();Ae=(re-at)/(1e3*60*60*24);break}let nt=null,je=null;const it=l.originalGravity??me,kt=l.originalGravity===null;return it>1&&it>C&&(nt=(it-C)/(it-1)*100,je=(it-C)*131.25),{currentSg:C,firstSg:Se,highSg:me,lowSg:ue,currentTemp:Me,avgTemp:de,highTemp:st,lowTemp:lt,fermRate:He,durationDays:ke,daysAtCurrentSg:Ae,apparentAttenuation:nt,abv:je,ogIsEstimated:kt,effectiveOg:it}});function J(){ye(h,l.originalGravity?.toFixed(3)??"",!0),ye(v,!0),setTimeout(()=>p(b)?.focus(),0)}function q(){const w=p(h).trim();if(!w)l.onOgChange(null);else{const N=parseFloat(w);!isNaN(N)&&N>=.99&&N<=1.2&&l.onOgChange(N)}ye(v,!1)}function Q(w){w.key==="Enter"?q():w.key==="Escape"&&ye(v,!1)}function y(w){return js(w)}function j(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function A(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function F(w){return w===null?"--":w.toFixed(1)}function L(w){return w===null?"--":`${w.toFixed(1)}%`}var se=Wn(),$=zl(se);{var B=w=>{var N=tc(),P=M(N),X=M(P),E=M(X),K=M(E,!0);k(E);var C=I(E,2),Se=I(M(C),2),me=M(Se,!0);k(Se),k(C);var ue=I(C,2),_e=I(M(ue),2),re=M(_e,!0);k(_e),k(ue);var U=I(ue,2),ke=I(M(U),2),He=M(ke,!0);k(ke),k(U);var Me=I(U,2),de=I(M(Me),2),st=M(de,!0);k(de),k(Me),k(X);var lt=I(X,2),Ae=I(M(lt),2),Xe=I(M(Ae),2),nt=M(Xe,!0),je=I(nt),it=M(je,!0);k(je),k(Xe),k(Ae);var kt=I(Ae,2),pe=I(M(kt),2),at=M(pe,!0),Pt=I(at),ft=M(Pt,!0);k(Pt),k(pe),k(kt);var Ye=I(kt,2),dt=I(M(Ye),2),Rt=M(dt,!0),Gt=I(Rt),ce=M(Gt,!0);k(Gt),k(dt),k(Ye);var G=I(Ye,2),Le=I(M(G),2),qe=M(Le,!0),Ut=I(qe),Yt=M(Ut,!0);k(Ut),k(Le),k(G),k(lt),k(P);var Tt=I(P,2),Nt=M(Tt),R=I(M(Nt),2);let H;var Y=M(R);k(R),k(Nt);var le=I(Nt,2),oe=I(M(le),2),we=M(oe,!0);k(oe),k(le);var ee=I(le,2),ne=I(M(ee),2),Ce=M(ne,!0);k(ne),k(ee);var xe=I(ee,2),et=I(M(xe),2);{var z=wt=>{var Re=Zu();ka(Re),Re.__keydown=Q,qs(Re,vt=>ye(b,vt),()=>p(b)),ba("blur",Re,q),Ta(Re,()=>p(h),vt=>ye(h,vt)),De(wt,Re)},ie=wt=>{var Re=Xu();Re.__click=J;var vt=M(Re);let qt;var yl=M(vt,!0);k(vt);var Sl=I(vt,2);{var un=ml=>{var sl=Qu();De(ml,sl)};_t(Sl,ml=>{p(T).ogIsEstimated&&ml(un)})}Dl(2),k(Re),mt(ml=>{An(Re,"title",p(T).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),qt=wl(vt,1,"stat-value svelte-3wi8ix",null,qt,{estimated:p(T).ogIsEstimated}),be(yl,ml)},[()=>y(p(T).effectiveOg)]),De(wt,Re)};_t(et,wt=>{p(v)?wt(z):wt(ie,!1)})}k(xe);var ve=I(xe,2),Pe=I(M(ve),2),pt=M(Pe,!0);k(Pe),k(ve);var zt=I(ve,2),rt=I(M(zt),2),he=M(rt,!0);k(rt),k(zt);var ct=I(zt,2);{var nl=wt=>{var Re=ec(),vt=I(M(Re),2),qt=M(vt,!0);k(vt),Dl(2),k(Re),mt((yl,Sl)=>{An(Re,"title",`Estimated time until target FG (R=${yl??""})`),be(qt,Sl)},[()=>d().r2.toFixed(2),()=>A(d().daysToFg)]),De(wt,Re)};_t(ct,wt=>{d()?.daysToFg!==null&&d()?.daysToFg!==void 0&&wt(nl)})}k(Tt),k(N),mt((wt,Re,vt,qt,yl,Sl,un,ml,sl,as,Cl,Ln,fl)=>{be(K,p(O)==="SG"?"Gravity":p(O)==="P"?"Plato":"Brix"),be(me,wt),be(re,Re),be(He,vt),be(st,qt),be(nt,yl),be(it,p(_)),be(at,Sl),be(ft,p(_)),be(Rt,un),be(ce,p(_)),be(qe,ml),be(Yt,p(_)),H=wl(R,1,"stat-value rate svelte-3wi8ix",null,H,{fermenting:p(T).fermRate<0}),be(Y,`${sl??""}/day`),be(we,as),be(Ce,Cl),be(pt,Ln),be(he,fl)},[()=>y(p(T).currentSg),()=>y(p(T).firstSg),()=>y(p(T).highSg),()=>y(p(T).lowSg),()=>F(p(T).currentTemp),()=>F(p(T).avgTemp),()=>F(p(T).highTemp),()=>F(p(T).lowTemp),()=>j(p(T).fermRate),()=>A(p(T).durationDays),()=>A(p(T).daysAtCurrentSg),()=>L(p(T).apparentAttenuation),()=>L(p(T).abv)]),De(w,N)},te=w=>{var N=lc();De(w,N)};_t($,w=>{p(T)?w(B):w(te,!1)})}De(e,se),Zn()}Jn(["keydown","click"]);var sc=ze('<button type="button"> </button>'),ic=ze("<option> </option>"),ac=ze('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),rc=ze('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),oc=ze('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),uc=ze('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function cc(e,l){$n(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Ie(()=>Bn.config.smoothing_enabled),c=Ie(()=>Bn.config.smoothing_samples),u=Qe("UTC"),d=Qe(0),v=Qe(3),h=kn(l,"originalGravity",3,null),b=Ie(()=>Bn.config.temp_units==="C"),m=Ie(Ks),_,O=null,T=Qe(!0),J=Qe(null),q=Qe(24),Q=Qe(Un([])),y=Qe(Un([])),j=Qe(null);const A={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},F="#facc15",L="rgba(250, 204, 21, 0.3)",se="#71717a",$="#a1a1aa",B="rgba(255, 255, 255, 0.04)",te="#22d3ee",w="rgba(250, 204, 21, 0.5)",N="brewsignal_chart_trend_enabled";let P=Qe(!0);function X(R,H,Y=1.01){const le=[];for(let he=0;he<R.length;he++)H[he]!==null&&le.push([R[he],H[he]]);if(le.length<10)return null;const oe=le.length;let we=0,ee=0,ne=0,Ce=0;for(const[he,ct]of le)we+=he,ee+=ct,ne+=he*ct,Ce+=he*he;const xe=oe*Ce-we*we;if(Math.abs(xe)<1e-10)return null;const et=(oe*ne-we*ee)/xe,z=(ee-et*we)/oe,ie=ee/oe;let ve=0,Pe=0;for(const[he,ct]of le){const nl=et*he+z;ve+=(ct-nl)**2,Pe+=(ct-ie)**2}const pt=Pe>0?1-ve/Pe:0;let zt=null,rt=null;if(et<0&&pt>.3){const he=R[R.length-1],ct=(Y-z)/et;ct>he&&(rt=(ct-he)/(1440*60),rt>0&&rt<60?zt=Y:rt=null)}return{slope:et,intercept:z,r2:pt,predictedFg:zt,daysToFg:rt}}function E(R,H){return R.map(Y=>H.slope*Y+H.intercept)}function K(R,H,Y){const le=new Date(R*1e3);try{return Y?le.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:H}):le.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:H})}catch(oe){return console.warn("Invalid timezone:",H,oe),Y?le.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):le.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function C(R,H,Y){const le=F,oe=A[l.tiltColor]||$;return{width:R,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(we,ee,ne)=>{const Ce=(ne-ee)*.1||.005;return[ee-Ce,ne+Ce]}},temp:{auto:!0,range:(we,ee,ne)=>{const Ce=ne-ee,xe=10;if(Ce<xe){const z=(ne+ee)/2;return[z-xe/2,z+xe/2]}const et=Ce*.1;return[ee-et,ne+et]}}},axes:[{stroke:se,grid:{stroke:B,width:1},ticks:{stroke:B,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(we,ee)=>ee.map(ne=>K(ne,Y,p(q)<=24))},{scale:"sg",stroke:le,grid:{stroke:B,width:1},ticks:{stroke:B,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(we,ee)=>ee.map(ne=>js(ne)),side:3},{scale:"temp",stroke:oe,grid:{show:!1},ticks:{stroke:B,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(we,ee)=>ee.map(ne=>ne.toFixed(0)+""),side:1}],series:[{},{label:p(m)==="SG"?"Gravity":p(m)==="P"?"Plato":"Brix",scale:"sg",stroke:le,width:2,fill:(we,ee)=>{const ne=we.ctx.createLinearGradient(0,we.bbox.top,0,we.bbox.top+we.bbox.height);return ne.addColorStop(0,L),ne.addColorStop(1,"transparent"),ne},points:{show:!1},paths:yt.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:oe,width:1.5,dash:[4,4],points:{show:!1},paths:yt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:te,width:1.5,dash:[2,4],points:{show:!1},paths:yt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:w,width:2,dash:[8,4],points:{show:!1},show:p(P)}]}}function Se(R,H){if(H<=1)return R;const Y=[];for(let le=0;le<R.length;le++){const oe=[],we=Math.floor(H/2);for(let ee=Math.max(0,le-we);ee<=Math.min(R.length-1,le+we);ee++){const ne=R[ee];ne!==null&&oe.push(ne)}oe.length>0?Y.push(oe.reduce((ee,ne)=>ee+ne,0)/oe.length):Y.push(null)}return Y}function me(R,H,Y,le,oe){if(R.length<=oe)return[R,H,Y,le];const we=Math.ceil(R.length/oe),ee=[],ne=[],Ce=[],xe=[];for(let et=0;et<R.length;et+=we){const z=Math.min(et+we,R.length);let ie=0,ve=0,Pe=0,pt=0,zt=0,rt=0;for(let he=et;he<z;he++)H[he]!==null&&(ie+=H[he],ve++),Y[he]!==null&&(Pe+=Y[he],pt++),le[he]!==null&&(zt+=le[he],rt++);ee.push(R[Math.floor((et+z-1)/2)]),ne.push(ve>0?ie/ve:null),Ce.push(pt>0?Pe/pt:null),xe.push(rt>0?zt/rt:null)}return[ee,ne,Ce,xe]}function ue(R){return!R.endsWith("Z")&&!R.match(/[+-]\d{2}:\d{2}$/)&&(R=R+"Z"),new Date(R).getTime()/1e3}function _e(R,H,Y){if(R.length===0||H.length===0)return H.map(()=>null);const le=[...R].sort((ee,ne)=>ue(ee.timestamp)-ue(ne.timestamp)),oe=le.map(ee=>ue(ee.timestamp)),we=le.map(ee=>ee.temperature===null?null:Y?ee.temperature:ee.temperature*9/5+32);return H.map(ee=>{let ne=null,Ce=null;for(let xe=0;xe<oe.length;xe++)if(oe[xe]<=ee&&(ne={time:oe[xe],temp:we[xe]}),oe[xe]>=ee&&Ce===null){Ce={time:oe[xe],temp:we[xe]};break}if(ne&&Ce&&ne.temp!==null&&Ce.temp!==null){if(ne.time===Ce.time)return ne.temp;const xe=(ee-ne.time)/(Ce.time-ne.time);return ne.temp+xe*(Ce.temp-ne.temp)}return ne!==null&&ne.temp!==null?ne.temp:Ce!==null&&Ce.temp!==null?Ce.temp:null})}function re(R,H,Y){const le=[...R].reverse();let oe=[],we=[],ee=[];for(const z of le){oe.push(ue(z.timestamp)),we.push(z.sg_calibrated??z.sg_raw);const ie=z.temp_calibrated??z.temp_raw;ie!==null?ee.push(Y?wn(ie):ie):ee.push(null)}let ne=_e(H,oe,Y);p(a)&&p(c)>1&&(we=Se(we,p(c)),ee=Se(ee,p(c)),ne=Se(ne,p(c))),[oe,we,ee,ne]=me(oe,we,ee,ne,500);const xe=X(oe,we);ye(j,xe,!0);const et=xe?E(oe,xe):oe.map(()=>null);return[oe,we,ee,ne,et]}const U=3e4;async function ke(R=!1){const Y=Date.now()-p(d);if(!(!R&&p(d)>0&&Y<U)){ye(T,!0),ye(J,null);try{const[le,oe]=await Promise.all([jr(l.tiltId,p(q)),Kr(p(q)).catch(()=>[])]);ye(Q,le,!0),ye(y,oe,!0),He()}catch(le){ye(J,le instanceof Error?le.message:"Failed to load data",!0)}finally{ye(d,Date.now(),!0),ye(T,!1)}}}function He(){if(!_||p(Q).length===0)return;const R=re(p(Q),p(y),p(b)),H=C(_.clientWidth,p(b),p(u));O&&O.destroy(),O=new yt(H,R,_)}function Me(){O&&_&&O.setSize({width:_.clientWidth,height:220})}let de=null;function st(){if(de&&(clearInterval(de),de=null),p(v)>0){const R=p(v)*60*1e3;de=setInterval(()=>{p(T)||ke(!1)},R)}}ya(async()=>{const R=localStorage.getItem(i);if(R!==null){const Y=parseInt(R,10);Number.isNaN(Y)||ye(v,Y,!0)}const H=localStorage.getItem(N);H!==null&&ye(P,H==="true");try{const Y=await fetch("/api/system/timezone");if(Y.ok){const le=await Y.json();ye(u,le.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await ke(!0),window.addEventListener("resize",Me),st()}),Vr(()=>{O?.destroy(),window.removeEventListener("resize",Me),de&&clearInterval(de)}),Os(()=>{p(b)!==void 0&&p(Q).length>0&&_&&He()}),Os(()=>{p(a),p(c),p(Q).length>0&&_&&He()});function lt(R){const H=Number(R.target.value);ye(v,H,!0),localStorage.setItem(i,String(H)),st(),ke(!0)}function Ae(){ye(P,!p(P)),localStorage.setItem(N,String(p(P))),O&&O.setSeries(4,{show:p(P)})}var Xe=uc(),nt=M(Xe),je=M(nt);En(je,21,()=>qr,Yn,(R,H)=>{var Y=sc();let le;Y.__click=()=>{p(q)!==p(H).hours&&(ye(q,p(H).hours,!0),ke(!0))};var oe=M(Y,!0);k(Y),mt(()=>{le=wl(Y,1,"range-btn svelte-12kwequ",null,le,{active:p(q)===p(H).hours}),be(oe,p(H).label)}),De(R,Y)}),k(je);var it=I(je,2),kt=M(it),pe=I(M(kt),2);pe.__change=lt,En(pe,21,()=>n,Yn,(R,H)=>{var Y=ic(),le=M(Y,!0);k(Y);var oe={};mt(()=>{be(le,p(H).label),oe!==(oe=p(H).value)&&(Y.value=(Y.__value=p(H).value)??"")}),De(R,Y)}),k(pe);var at;Qr(pe),k(kt);var Pt=I(kt,2),ft=I(M(Pt),2),Ye=M(ft);Dl(2),k(ft);var dt=I(ft,4);let Rt;dt.__click=Ae;var Gt=M(dt);Sn(Gt,"background: rgba(250, 204, 21, 0.5);"),Dl(2),k(dt),k(Pt),k(it),k(nt);var ce=I(nt,2),G=M(ce);{var Le=R=>{var H=ac();De(R,H)};_t(G,R=>{p(T)&&R(Le)})}var qe=I(G,2);{var Ut=R=>{var H=rc(),Y=I(M(H),2);Y.__click=()=>ke(!0),k(H),De(R,H)},Yt=R=>{var H=Wn(),Y=zl(H);{var le=oe=>{var we=oc();De(oe,we)};_t(Y,oe=>{p(Q).length===0&&oe(le)},!0)}De(R,H)};_t(qe,R=>{p(J)?R(Ut):R(Yt,!1)})}k(ce),qs(ce,R=>_=R,()=>_);var Tt=I(ce,2);{var Nt=R=>{{let H=Ie(()=>l.onOgChange??(()=>{})),Y=Ie(()=>p(j)?{predictedFg:p(j).predictedFg,daysToFg:p(j).daysToFg,r2:p(j).r2}:null);nc(R,{get readings(){return p(Q)},get originalGravity(){return h()},get onOgChange(){return p(H)},get trend(){return p(Y)}})}};_t(Tt,R=>{p(Q).length>0&&R(Nt)})}k(Xe),mt(()=>{at!==(at=p(v))&&(pe.value=(pe.__value=p(v))??"",Xr(pe,p(v))),Sn(Ye,`background: ${(A[l.tiltColor]||"var(--text-secondary)")??""};`),Rt=wl(dt,1,"legend-item legend-toggle svelte-12kwequ",null,Rt,{"legend-disabled":!p(P)}),An(dt,"title",p(P)?"Hide trend line":"Show trend line")}),De(e,Xe),Zn()}Jn(["click","change"]);var fc=ze('<input type="text" class="beer-name-input svelte-1k5rb4o" maxlength="100"/>'),dc=ze('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),pc=ze('<div class="w-1 rounded-sm transition-all"></div>'),vc=ze('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),hc=ze(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),gc=ze('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),mc=ze('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),_c=ze("<div><!></div>"),wc=ze('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),xc=ze('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><div class="flex items-center gap-3"><span class="text-[11px] text-[var(--text-muted)]"> </span> <button type="button" class="batch-link svelte-1k5rb4o" title="View batch details"> <svg class="batch-link-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function bc(e,l){$n(l,!0);let i=kn(l,"batch",7),n=kn(l,"expanded",3,!1),a=kn(l,"wide",3,!1),c=Ie(()=>{if(!i().device_id)return null;const z=i().device_id.match(/^(?:tilt-)?(\w+)$/i);if(!z?.[1])return null;const ie=z[1].toUpperCase();for(const ve of Sa.tilts.values())if(ve.color.toUpperCase()===ie)return ve;return null}),u=Ie(()=>i().name||i().recipe?.name||`Batch #${i().batch_number}`),d=Ie(()=>l.progress?.measured?.current_sg??i().measured_og??1),v=Ie(()=>l.progress?.temperature?.current??null),h=Ie(()=>p(c)?.color??"BLACK"),b=Ie(()=>p(c)?.rssi??null),m=Ie(()=>p(c)?.paired??!0),_=Ie(()=>p(c)?.last_seen??new Date().toISOString()),O=Ie(()=>p(c)?.sg_raw??p(d)),T=Ie(()=>p(c)?.temp_raw??p(v)),J=Qe(!1);Os(()=>{n()&&!p(J)&&ye(J,!0)});let q=Qe(!1),Q=Qe(""),y=Qe(null),j=Qe(!1);function A(){ye(Q,p(u),!0),ye(q,!0),setTimeout(()=>p(y)?.focus(),0)}async function F(){if(p(j))return;const z=p(Q).trim();if(!z||z===p(u)){ye(q,!1);return}ye(j,!0);try{await Jr(i().id,{name:z}),i().name=z,ye(q,!1)}catch(ie){console.error("Failed to update batch name:",ie)}finally{ye(j,!1)}}function L(z){z.key==="Enter"?F():z.key==="Escape"&&ye(q,!1)}let se=Ie(Ma),$=Ie(Ks);const B={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function te(z){return js(z)}function w(z){return Yr(z)}function N(z){return z>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:z>=-60?{bars:3,color:"var(--positive)",label:"Good"}:z>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function P(z){const ie=Math.floor((Date.now()-new Date(z).getTime())/1e3);if(ie<10)return"just now";if(ie<60)return`${ie}s ago`;const ve=Math.floor(ie/60);if(ve<60)return`${ve}m ago`;const Pe=Math.floor(ve/60);return Pe<24?`${Pe}h ago`:`${Math.floor(Pe/24)}d ago`}let X=Ie(()=>B[p(h)]||"var(--tilt-black)"),E=Ie(()=>p(b)!==null?N(p(b)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),K=Ie(()=>P(p(_)));var C=xc();let Se;var me=M(C),ue=I(me,2),_e=M(ue),re=M(_e),U=M(re);{var ke=z=>{var ie=fc();ka(ie),ie.__keydown=L,qs(ie,ve=>ye(y,ve),()=>p(y)),mt(()=>ie.disabled=p(j)),ba("blur",ie,F),Ta(ie,()=>p(Q),ve=>ye(Q,ve)),De(z,ie)},He=z=>{var ie=dc();ie.__click=A;var ve=M(ie),Pe=M(ve,!0);k(ve),Dl(2),k(ie),mt(()=>be(Pe,p(u))),De(z,ie)};_t(U,z=>{p(q)?z(ke):z(He,!1)})}var Me=I(U,2),de=M(Me),st=I(de,2),lt=M(st,!0);k(st),k(Me),k(re);var Ae=I(re,2),Xe=M(Ae),nt=M(Xe);En(nt,20,()=>Array(4),Yn,(z,ie,ve)=>{var Pe=pc();mt(()=>Sn(Pe,`
									height: ${8+ve*4}px;
									background: ${(ve<p(E).bars?p(E).color:"var(--bg-hover)")??""};
									opacity: ${ve<p(E).bars?1:.4};
								`)),De(z,Pe)}),k(nt);var je=I(nt,2),it=M(je);k(je),k(Xe);var kt=I(Xe,2);{var pe=z=>{var ie=vc();De(z,ie)};_t(kt,z=>{p(m)||z(pe)})}k(Ae),k(_e);var at=I(_e,2),Pt=M(at),ft=M(Pt),Ye=M(ft,!0),dt=I(Ye),Rt=M(dt,!0);k(dt),k(ft);var Gt=I(ft,2),ce=M(Gt,!0);k(Gt),k(Pt);var G=I(Pt,2),Le=M(G),qe=M(Le);{var Ut=z=>{var ie=hc(),ve=zl(ie,!0),Pe=I(ve),pt=M(Pe,!0);k(Pe),mt(zt=>{be(ve,zt),be(pt,p(se))},[()=>w(p(v))]),De(z,ie)},Yt=z=>{var ie=gc(),ve=I(zl(ie)),Pe=M(ve,!0);k(ve),mt(()=>be(Pe,p(se))),De(z,ie)};_t(qe,z=>{p(v)!==null?z(Ut):z(Yt,!1)})}k(Le),Dl(2),k(G),k(at);var Tt=I(at,2);{var Nt=z=>{var ie=mc(),ve=I(M(ie),2),Pe=M(ve,!0);k(ve);var pt=I(ve,4),zt=M(pt);k(pt),k(ie),mt((rt,he)=>{be(Pe,rt),be(zt,`${he??""}${p(se)??""}`)},[()=>te(p(O)),()=>p(T)!==null?w(p(T)):"--"]),De(z,ie)};_t(Tt,z=>{(p(d)!==p(O)||p(v)!==p(T))&&p(c)&&z(Nt)})}var R=I(Tt,2);{var H=z=>{var ie=_c();let ve;var Pe=M(ie);eo(Pe,()=>i().id,pt=>{cc(pt,{get batchId(){return i().id},get deviceColor(){return p(h)},get originalGravity(){return i().measured_og}})}),k(ie),mt(()=>ve=wl(ie,1,"chart-section svelte-1k5rb4o",null,ve,{hidden:!n()})),De(z,ie)};_t(R,z=>{p(J)&&z(H)})}var Y=I(R,2),le=M(Y),oe=M(le),we=M(oe);k(oe);var ee=I(oe,2);ee.__click=()=>Ur(`/batches/${i().id}`);var ne=M(ee);Dl(),k(ee),k(le);var Ce=I(le,2),xe=M(Ce);{var et=z=>{var ie=wc();ie.__click=function(...pt){l.onToggleExpand?.apply(this,pt)};var ve=M(ie);let Pe;k(ie),mt(()=>{An(ie,"aria-label",n()?"Collapse chart":"Expand chart"),Pe=wl(ve,0,"w-4 h-4 transition-transform",null,Pe,{"rotate-180":n()})}),De(z,ie)};_t(xe,z=>{l.onToggleExpand&&z(et)})}Dl(2),k(Ce),k(Y),k(ue),k(C),mt(z=>{Se=wl(C,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,Se,{expanded:n(),wide:a()}),Sn(me,`background: ${p(X)??""};`),Sn(de,`background: ${p(X)??""};`),be(lt,p(h)),An(Xe,"title",`${p(E).label??""} signal (${p(b)??"N/A"??""} dBm)`),be(it,`${p(b)??"N/A"??""} dBm`),be(Ye,z),be(Rt,p($)!=="SG"?p($):""),be(ce,p($)==="SG"?"Gravity":p($)==="P"?"Plato":"Brix"),be(we,`Updated ${p(K)??""}`),be(ne,`Batch #${i().batch_number??i().id??""} `)},[()=>te(p(d))]),De(e,C),Zn()}Jn(["keydown","click"]);var yc=ze('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Sc=ze('<div class="alerts-list svelte-1uha8ag"></div>'),kc=ze('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Tc=ze('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Mc=ze('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Ec=ze('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Ac=ze('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Dc=ze("<div></div>"),Lc=ze("<!> <!>",1);function Kc(e,l){$n(l,!0);let i=Qe(!1),n=Qe(!1),a=Qe(Un([])),c=Qe(Un(new Map)),u=Qe(!0),d=Qe(null);ya(async()=>{const F=localStorage.getItem("brewsignal_alerts_dismissed"),L=localStorage.getItem("brewsignal_alerts_dismissed_time");F==="true"&&L&&Date.now()-parseInt(L,10)<360*60*1e3&&ye(i,!0),await v()});async function v(){ye(u,!0),ye(d,null);try{const F=await $r();ye(a,F.filter(B=>B.status==="fermenting"||B.status==="conditioning"),!0);const L=p(a).map(async B=>{try{const te=await Zr(B.id);return[B.id,te]}catch{return null}}),se=await Promise.all(L),$=new Map;for(const B of se)B&&$.set(B[0],B[1]);ye(c,$,!0)}catch(F){ye(d,F instanceof Error?F.message:"Failed to load batches",!0)}finally{ye(u,!1)}}let h=Ie(()=>new Map(p(a).filter(F=>F.device_id&&(F.status==="fermenting"||F.status==="conditioning")).map(F=>[F.device_id,F.id]))),b=Ie(()=>{const F=new Map(p(c));for(const[L,se]of p(h)){const $=Sa.tilts.get(L);if($){const B=F.get(se)||{batch_id:se,measured:{},temperature:{},progress:{},targets:{}};F.set(se,{...B,measured:{...B.measured,current_sg:$.sg},temperature:{...B.temperature,current:$.temp,status:B.temperature?.yeast_min!==void 0&&B.temperature?.yeast_max!==void 0?$.temp<B.temperature.yeast_min?"too_cold":$.temp>B.temperature.yeast_max?"too_hot":"in_range":B.temperature?.status}})}}return F}),m=Qe(null);function _(F){ye(m,p(m)===F?null:F,!0)}function O(){ye(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function T(){ye(n,!p(n))}var J=Lc();Wr("1uha8ag",F=>{Ir(()=>{Br.title="Dashboard | BrewSignal"})});var q=zl(J);{var Q=F=>{var L=Tc(),se=M(L),$=M(se),B=I(M($),4),te=M(B,!0);k(B),k($);var w=I($,2);w.__click=O,k(se);var N=I(se,2);{var P=K=>{var C=Sc();En(C,21,()=>gn.alerts,Yn,(Se,me)=>{var ue=yc();let _e;var re=M(ue),U=M(re);k(re);var ke=I(re,2),He=M(ke,!0);k(ke),k(ue),mt(()=>{_e=wl(ue,1,"alert-item svelte-1uha8ag",null,_e,{warning:p(me).level==="warning",critical:p(me).level==="critical"}),be(U,`${p(me).day??""}:`),be(He,p(me).message)}),De(Se,ue)}),k(C),De(K,C)};_t(N,K=>{p(n)||K(P)})}var X=I(N,2);{var E=K=>{var C=kc();C.__click=T;var Se=M(C,!0);k(C),mt(()=>be(Se,p(n)?`Show ${gn.alerts.length} alerts`:"Show less")),De(K,C)};_t(X,K=>{gn.alerts.length>3&&K(E)})}k(L),mt(()=>be(te,gn.alerts.length)),De(F,L)};_t(q,F=>{gn.alerts.length>0&&!p(i)&&F(Q)})}var y=I(q,2);{var j=F=>{var L=Mc();De(F,L)},A=F=>{var L=Wn(),se=zl(L);{var $=te=>{var w=Ec(),N=I(M(w),4),P=M(N,!0);k(N),k(w),mt(()=>be(P,p(d))),De(te,w)},B=te=>{var w=Wn(),N=zl(w);{var P=E=>{var K=Ac();De(E,K)},X=E=>{var K=Dc();let C;En(K,21,()=>p(a),Se=>Se.id,(Se,me)=>{{let ue=Ie(()=>p(b).get(p(me).id)),_e=Ie(()=>p(m)===p(me).id),re=Ie(()=>p(a).length===1);bc(Se,{get batch(){return p(me)},get progress(){return p(ue)},get expanded(){return p(_e)},get wide(){return p(re)},onToggleExpand:()=>_(p(me).id)})}}),k(K),mt(()=>C=wl(K,1,"tilt-grid svelte-1uha8ag",null,C,{"single-tilt":p(a).length===1})),De(E,K)};_t(N,E=>{p(a).length===0?E(P):E(X,!1)},!0)}De(te,w)};_t(se,te=>{p(d)?te($):te(B,!1)},!0)}De(F,L)};_t(y,F=>{p(u)?F(j):F(A,!1)})}De(e,J),Zn()}Jn(["click"]);export{Kc as component};
