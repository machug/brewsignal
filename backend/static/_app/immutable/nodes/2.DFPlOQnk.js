import{d as vs,c as Cn,a as ge,f as Se,s as me,e as Si}from"../chunks/CsQfwH0S.js";import{h as Fr,K as Or,b7 as Br,b as Gr,ah as hs,at as Ul,c as u,ai as Ce,aj as gs,al as S,an as x,ak as G,aq as Le,ar as Qe,s as te,as as Wl,p as ln,ao as ki,aL as Ir,ap as os,e as Nr,am as zr}from"../chunks/fKkNMI8q.js";import{e as Ln,i as $n}from"../chunks/COk1ZY4R.js";import{B as Vr,i as Je}from"../chunks/BvBRaQNg.js";import{h as Hr}from"../chunks/DLseniaC.js";import{s as sl}from"../chunks/BDI2zAFW.js";import{t as Ti}from"../chunks/C8NDSE1R.js";import{w as Un}from"../chunks/k2D9zoAh.js";import{r as Ei,s as Ml}from"../chunks/DbN3nGCc.js";import{s as ml}from"../chunks/CcRNvR1k.js";import{b as Mi}from"../chunks/C-0Ur6Zf.js";import{b as ea}from"../chunks/CqqoqCZR.js";import{p as Mn}from"../chunks/CllCHKBI.js";import{c as us,d as En,b as ta,g as Ai,e as Wr}from"../chunks/CPwbAm-l.js";import{T as Ur,t as Yr,v as qr,w as jr,x as Kr,y as Jr,z as Zr,A as Qr,j as $r}from"../chunks/BYOGxEKx.js";import{i as Xr,s as eo}from"../chunks/C8srtpii.js";function to(e,l,i){Fr&&Or();var n=new Vr(e),a=!Br();Gr(()=>{var f=l();a&&f!==null&&typeof f=="object"&&(f={}),n.ensure(f,i)})}const lo=!0,Ft="u-",no="uplot",so=Ft+"hz",ao=Ft+"vt",io=Ft+"title",ro=Ft+"wrap",oo=Ft+"under",uo=Ft+"over",co=Ft+"axis",cn=Ft+"off",fo=Ft+"select",po=Ft+"cursor-x",vo=Ft+"cursor-y",ho=Ft+"cursor-pt",go=Ft+"legend",mo=Ft+"live",_o=Ft+"inline",wo=Ft+"series",bo=Ft+"marker",Ga=Ft+"label",xo=Ft+"value",jn="width",Kn="height",Yn="top",Ia="bottom",kn="left",Gs="right",la="#000",Na=la+"0",Is="mousemove",za="mousedown",Ns="mouseup",Va="mouseenter",Ha="mouseleave",Wa="dblclick",yo="resize",So="scroll",Ua="change",fs="dppxchange",na="--",On=typeof window<"u",Us=On?document:null,An=On?window:null,ko=On?navigator:null;let We,as;function Ys(){let e=devicePixelRatio;We!=e&&(We=e,as&&js(Ua,as,Ys),as=matchMedia(`(min-resolution: ${We-.001}dppx) and (max-resolution: ${We+.001}dppx)`),fn(Ua,as,Ys),An.dispatchEvent(new CustomEvent(fs)))}function gl(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function qs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function ot(e,l,i){e.style[l]=i+"px"}function Fl(e,l,i,n){let a=Us.createElement(e);return l!=null&&gl(a,l),i?.insertBefore(a,n),a}function Tl(e,l){return Fl("div",e,l)}const Ya=new WeakMap;function Hl(e,l,i,n,a){let f="translate("+l+"px,"+i+"px)",c=Ya.get(e);f!=c&&(e.style.transform=f,Ya.set(e,f),l<0||i<0||l>n||i>a?gl(e,cn):qs(e,cn))}const qa=new WeakMap;function ja(e,l,i){let n=l+i,a=qa.get(e);n!=a&&(qa.set(e,n),e.style.background=l,e.style.borderColor=i)}const Ka=new WeakMap;function Ja(e,l,i,n){let a=l+""+i,f=Ka.get(e);a!=f&&(Ka.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const sa={passive:!0},To={...sa,capture:!0};function fn(e,l,i,n){l.addEventListener(e,i,n?To:sa)}function js(e,l,i,n){l.removeEventListener(e,i,sa)}On&&Ys();function Ol(e,l,i,n){let a;i=i||0,n=n||l.length-1;let f=n<=2147483647;for(;n-i>1;)a=f?i+n>>1:_l((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ci(e){return(i,n,a)=>{let f=-1,c=-1;for(let p=n;p<=a;p++)if(e(i[p])){f=p;break}for(let p=a;p>=n;p--)if(e(i[p])){c=p;break}return[f,c]}}const Li=e=>e!=null,Di=e=>e!=null&&e>0,ms=Ci(Li),Eo=Ci(Di);function Mo(e,l,i,n=0,a=!1){let f=a?Eo:ms,c=a?Di:Li;[l,i]=f(e,l,i);let p=e[l],v=e[l];if(l>-1)if(n==1)p=e[l],v=e[i];else if(n==-1)p=e[i],v=e[l];else for(let h=l;h<=i;h++){let y=e[h];c(y)&&(y<p?p=y:y>v&&(v=y))}return[p??lt,v??-lt]}function _s(e,l,i,n){let a=$a(e),f=$a(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let c=i==10?jl:Ri,p=a==1?_l:El,v=f==1?El:_l,h=p(c(Pt(e))),y=v(c(Pt(l))),m=Dn(i,h),_=Dn(i,y);return i==10&&(h<0&&(m=nt(m,-h)),y<0&&(_=nt(_,-y))),n||i==2?(e=m*a,l=_*f):(e=Bi(e,m),l=ws(l,_)),[e,l]}function aa(e,l,i,n){let a=_s(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const ia=.1,Za={mode:3,pad:ia},Zn={pad:0,soft:null,mode:0},Ao={min:Zn,max:Zn};function ds(e,l,i,n){return bs(i)?Qa(e,l,i):(Zn.pad=i,Zn.soft=n?0:null,Zn.mode=n?3:0,Qa(e,l,Ao))}function ze(e,l){return e??l}function Co(e,l,i){for(l=ze(l,0),i=ze(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Qa(e,l,i){let n=i.min,a=i.max,f=ze(n.pad,0),c=ze(a.pad,0),p=ze(n.hard,-lt),v=ze(a.hard,lt),h=ze(n.soft,lt),y=ze(a.soft,-lt),m=ze(n.mode,0),_=ze(a.mode,0),q=l-e,T=jl(q),z=al(Pt(e),Pt(l)),le=jl(z),re=Pt(le-T);(q<1e-24||re>10)&&(q=0,(e==0||l==0)&&(q=1e-24,m==2&&h!=lt&&(f=0),_==2&&y!=-lt&&(c=0)));let k=q||z||1e3,K=jl(k),C=Dn(10,_l(K)),B=k*(q==0?e==0?.1:1:f),L=nt(Bi(e-B,C/10),24),ae=e>=h&&(m==1||m==3&&L<=h||m==2&&L>=h)?h:lt,X=al(p,L<ae&&e>=ae?ae:Bl(ae,L)),Z=k*(q==0?l==0?.1:1:c),ne=nt(ws(l+Z,C/10),24),w=l<=y&&(_==1||_==3&&ne>=y||_==2&&ne<=y)?y:-lt,N=Bl(v,ne>w&&l<=w?w:al(w,ne));return X==N&&X==0&&(N=100),[X,N]}const Lo=new Intl.NumberFormat(On?ko.language:"en-US"),ra=e=>Lo.format(e),wl=Math,cs=wl.PI,Pt=wl.abs,_l=wl.floor,Rt=wl.round,El=wl.ceil,Bl=wl.min,al=wl.max,Dn=wl.pow,$a=wl.sign,jl=wl.log10,Ri=wl.log2,Do=(e,l=1)=>wl.sinh(e)*l,zs=(e,l=1)=>wl.asinh(e/l),lt=1/0;function Xa(e){return(jl((e^e>>31)-(e>>31))|0)+1}function Ks(e,l,i){return Bl(al(e,l),i)}function Pi(e){return typeof e=="function"}function De(e){return Pi(e)?e:()=>e}const Ro=()=>{},Fi=e=>e,Oi=(e,l)=>l,Po=e=>null,ei=e=>!0,ti=(e,l)=>e==l,Fo=/\.\d*?(?=9{6,}|0{6,})/gm,dn=e=>{if(Ii(e)||nn.has(e))return e;const l=`${e}`,i=l.match(Fo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,f]=l.split("e");return+`${dn(a)}e${f}`}return nt(e,n)};function on(e,l){return dn(nt(dn(e/l))*l)}function ws(e,l){return dn(El(dn(e/l))*l)}function Bi(e,l){return dn(_l(dn(e/l))*l)}function nt(e,l=0){if(Ii(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return Rt(n)/i}const nn=new Map;function Gi(e){return((""+e).split(".")[1]||"").length}function Xn(e,l,i,n){let a=[],f=n.map(Gi);for(let c=l;c<i;c++){let p=Pt(c),v=nt(Dn(e,c),p);for(let h=0;h<n.length;h++){let y=e==10?+`${n[h]}e${c}`:n[h]*v,m=(c>=0?0:p)+(c>=f[h]?0:f[h]),_=e==10?y:nt(y,m);a.push(_),nn.set(_,m)}}return a}const Qn={},oa=[],Rn=[null,null],tn=Array.isArray,Ii=Number.isInteger,Oo=e=>e===void 0;function li(e){return typeof e=="string"}function bs(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Bo(e){return e!=null&&typeof e=="object"}const Go=Object.getPrototypeOf(Uint8Array),Ni="__proto__";function Pn(e,l=bs){let i;if(tn(e)){let n=e.find(a=>a!=null);if(tn(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=Pn(e[a],l)}else i=e.slice()}else if(e instanceof Go)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Ni&&(i[n]=Pn(e[n],l))}else i=e;return i}function Ct(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Ni&&(bs(e[a])?Ct(e[a],Pn(n[a])):e[a]=Pn(n[a]))}return e}const Io=0,No=1,zo=2;function Vo(e,l,i){for(let n=0,a,f=-1;n<l.length;n++){let c=l[n];if(c>f){for(a=c-1;a>=0&&e[a]==null;)e[a--]=null;for(a=c+1;a<i&&e[a]==null;)e[f=a++]=null}}}function Ho(e,l){if(Yo(e)){let c=e[0].slice();for(let p=1;p<e.length;p++)c.push(...e[p].slice(1));return qo(c[0])||(c=Uo(c)),c}let i=new Set;for(let c=0;c<e.length;c++){let v=e[c][0],h=v.length;for(let y=0;y<h;y++)i.add(v[y])}let n=[Array.from(i).sort((c,p)=>c-p)],a=n[0].length,f=new Map;for(let c=0;c<a;c++)f.set(n[0][c],c);for(let c=0;c<e.length;c++){let p=e[c],v=p[0];for(let h=1;h<p.length;h++){let y=p[h],m=Array(a).fill(void 0),_=l?l[c][h]:No,q=[];for(let T=0;T<y.length;T++){let z=y[T],le=f.get(v[T]);z===null?_!=Io&&(m[le]=z,_==zo&&q.push(le)):m[le]=z}Vo(m,q,a),n.push(m)}}return n}const Wo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Uo(e){let l=e[0],i=l.length,n=Array(i);for(let f=0;f<n.length;f++)n[f]=f;n.sort((f,c)=>l[f]-l[c]);let a=[];for(let f=0;f<e.length;f++){let c=e[f],p=Array(i);for(let v=0;v<i;v++)p[v]=c[n[v]];a.push(p)}return a}function Yo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let f=0;f<i;f++)if(a[f]!=l[f])return!1}}return!0}function qo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const f=al(1,_l((a-n+1)/l));for(let c=e[n],p=n+f;p<=a;p+=f){const v=e[p];if(v!=null){if(v<=c)return!1;c=v}}return!0}const zi=["January","February","March","April","May","June","July","August","September","October","November","December"],Vi=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Hi(e){return e.slice(0,3)}const jo=Vi.map(Hi),Ko=zi.map(Hi),Jo={MMMM:zi,MMM:Ko,WWWW:Vi,WWW:jo};function qn(e){return(e<10?"0":"")+e}function Zo(e){return(e<10?"00":e<100?"0":"")+e}const Qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>qn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>qn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>qn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>qn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>qn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Zo(e.getMilliseconds())};function ua(e,l){l=l||Jo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?Qo[a[1]]:a[0]);return f=>{let c="";for(let p=0;p<i.length;p++)c+=typeof i[p]=="string"?i[p]:i[p](f,l);return c}}const $o=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Xo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==$o?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Wi=e=>e%1==0,ps=[1,2,2.5,5],eu=Xn(10,-32,0,ps),Ui=Xn(10,0,32,ps),tu=Ui.filter(Wi),un=eu.concat(Ui),ca=`
`,Yi="{YYYY}",ni=ca+Yi,qi="{M}/{D}",Jn=ca+qi,is=Jn+"/{YY}",ji="{aa}",lu="{h}:{mm}",Tn=lu+ji,si=ca+Tn,ai=":{ss}",Ye=null;function Ki(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,f=a*30,c=a*365,v=(e==1?Xn(10,0,3,ps).filter(Wi):Xn(10,-3,0,ps)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,f,f*2,f*3,f*4,f*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const h=[[c,Yi,Ye,Ye,Ye,Ye,Ye,Ye,1],[a*28,"{MMM}",ni,Ye,Ye,Ye,Ye,Ye,1],[a,qi,ni,Ye,Ye,Ye,Ye,Ye,1],[n,"{h}"+ji,is,Ye,Jn,Ye,Ye,Ye,1],[i,Tn,is,Ye,Jn,Ye,Ye,Ye,1],[l,ai,is+" "+Tn,Ye,Jn+" "+Tn,Ye,si,Ye,1],[e,ai+".{fff}",is+" "+Tn,Ye,Jn+" "+Tn,Ye,si,Ye,1]];function y(m){return(_,q,T,z,le,re)=>{let k=[],K=le>=c,C=le>=f&&le<c,B=m(T),L=nt(B*e,3),ae=Vs(B.getFullYear(),K?0:B.getMonth(),C||K?1:B.getDate()),X=nt(ae*e,3);if(C||K){let Z=C?le/f:0,ne=K?le/c:0,w=L==X?L:nt(Vs(ae.getFullYear()+ne,ae.getMonth()+Z,1)*e,3),N=new Date(Rt(w/e)),I=N.getFullYear(),se=N.getMonth();for(let O=0;w<=z;O++){let Q=Vs(I+ne*O,se+Z*O,1),P=Q-m(nt(Q*e,3));w=nt((+Q+P)*e,3),w<=z&&k.push(w)}}else{let Z=le>=a?a:le,ne=_l(T)-_l(L),w=X+ne+ws(L-X,Z);k.push(w);let N=m(w),I=N.getHours()+N.getMinutes()/i+N.getSeconds()/n,se=le/n,O=_.axes[q]._space,Q=re/O;for(;w=nt(w+le,e==1?0:3),!(w>z);)if(se>1){let P=_l(nt(I+se,6))%24,ue=m(w).getHours()-P;ue>1&&(ue=-1),w-=ue*n,I=(I+se)%24;let ye=k[k.length-1];nt((w-ye)/le,3)*Q>=.7&&k.push(w)}else k.push(w)}return k}}return[v,h,y]}const[nu,su,au]=Ki(1),[iu,ru,ou]=Ki(.001);Xn(2,-53,53,[1]);function ii(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ri(e,l){return(i,n,a,f,c)=>{let p=l.find(T=>c>=T[0])||l[l.length-1],v,h,y,m,_,q;return n.map(T=>{let z=e(T),le=z.getFullYear(),re=z.getMonth(),k=z.getDate(),K=z.getHours(),C=z.getMinutes(),B=z.getSeconds(),L=le!=v&&p[2]||re!=h&&p[3]||k!=y&&p[4]||K!=m&&p[5]||C!=_&&p[6]||B!=q&&p[7]||p[1];return v=le,h=re,y=k,m=K,_=C,q=B,L(z)})}}function uu(e,l){let i=ua(l);return(n,a,f,c,p)=>a.map(v=>i(e(v)))}function Vs(e,l,i){return new Date(e,l,i)}function oi(e,l){return l(e)}const cu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ui(e,l){return(i,n,a,f)=>f==null?na:l(e(n))}function fu(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function du(e,l){return e.series[l].fill(e,l)}const pu={show:!0,live:!0,isolate:!1,mount:Ro,markers:{show:!0,width:2,stroke:fu,fill:du,dash:"solid"},idx:null,idxs:null,values:[]};function vu(e,l){let i=e.cursor.points,n=Tl(),a=i.size(e,l);ot(n,jn,a),ot(n,Kn,a);let f=a/-2;ot(n,"marginLeft",f),ot(n,"marginTop",f);let c=i.width(e,l,a);return c&&ot(n,"borderWidth",c),n}function hu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function gu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function mu(e,l){return e.series[l].points.size}const Hs=[0,0];function _u(e,l,i){return Hs[0]=l,Hs[1]=i,Hs}function rs(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Ws(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const wu={show:!0,x:!0,y:!0,lock:!1,move:_u,points:{one:!1,show:vu,size:mu,width:0,stroke:gu,fill:hu},bind:{mousedown:rs,mouseup:rs,click:rs,dblclick:rs,mousemove:Ws,mouseleave:Ws,mouseenter:Ws},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ji={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},fa=Ct({},Ji,{filter:Oi}),Zi=Ct({},fa,{size:10}),Qi=Ct({},Ji,{show:!1}),da='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',$i="bold "+da,Xi=1.5,ci={show:!0,scale:"x",stroke:la,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:$i,side:2,grid:fa,ticks:Zi,border:Qi,font:da,lineGap:Xi,rotate:0},bu="Value",xu="Time",fi={show:!0,scale:"x",auto:!1,sorted:1,min:lt,max:-lt,idxs:[]};function yu(e,l,i,n,a){return l.map(f=>f==null?"":ra(f))}function Su(e,l,i,n,a,f,c){let p=[],v=nn.get(a)||0;i=c?i:nt(ws(i,a),v);for(let h=i;h<=n;h=nt(h+a,v))p.push(Object.is(h,-0)?0:h);return p}function Js(e,l,i,n,a,f,c){const p=[],v=e.scales[e.axes[l].scale].log,h=v==10?jl:Ri,y=_l(h(i));a=Dn(v,y),v==10&&(a=un[Ol(a,un)]);let m=i,_=a*v;v==10&&(_=un[Ol(_,un)]);do p.push(m),m=m+a,v==10&&!nn.has(m)&&(m=nt(m,nn.get(a))),m>=_&&(a=m,_=a*v,v==10&&(_=un[Ol(_,un)]));while(m<=n);return p}function ku(e,l,i,n,a,f,c){let v=e.scales[e.axes[l].scale].asinh,h=n>v?Js(e,l,al(v,i),n,a):[v],y=n>=0&&i<=0?[0]:[];return(i<-v?Js(e,l,al(v,-n),-i,a):[v]).reverse().map(_=>-_).concat(y,h)}const er=/./,Tu=/[12357]/,Eu=/[125]/,di=/1/,Zs=(e,l,i,n)=>e.map((a,f)=>l==4&&a==0||f%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Mu(e,l,i,n,a){let f=e.axes[i],c=f.scale,p=e.scales[c],v=e.valToPos,h=f._space,y=v(10,c),m=v(9,c)-y>=h?er:v(7,c)-y>=h?Tu:v(5,c)-y>=h?Eu:di;if(m==di){let _=Pt(v(1,c)-y);if(_<h)return Zs(l.slice().reverse(),p.distr,m,El(h/_)).reverse()}return Zs(l,p.distr,m,1)}function Au(e,l,i,n,a){let f=e.axes[i],c=f.scale,p=f._space,v=e.valToPos,h=Pt(v(1,c)-v(2,c));return h<p?Zs(l.slice().reverse(),3,er,El(p/h)).reverse():l}function Cu(e,l,i,n){return n==null?na:l==null?"":ra(l)}const pi={show:!0,scale:"y",stroke:la,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:$i,side:3,grid:fa,ticks:Zi,border:Qi,font:da,lineGap:Xi,rotate:0};function Lu(e,l){let i=3+(e||1)*2;return nt(i*l,3)}function Du(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],f=e.valToPos(a[n[0]],i,!0),c=e.valToPos(a[n[1]],i,!0),p=Pt(c-f),v=e.series[l],h=p/(v.points.space*We);return n[1]-n[0]<=h}const vi={scale:null,auto:!0,sorted:0,min:lt,max:-lt},tr=(e,l,i,n,a)=>a,hi={show:!0,auto:!0,sorted:0,gaps:tr,alpha:1,facets:[Ct({},vi,{scale:"x"}),Ct({},vi,{scale:"y"})]},gi={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:tr,alpha:1,points:{show:Du,filter:null},values:null,min:lt,max:-lt,idxs:[],path:null,clip:null};function Ru(e,l,i,n,a){return i/10}const lr={time:lo,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Pu=Ct({},lr,{time:!1,ori:1}),mi={};function nr(e,l){let i=mi[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,f,c,p,v,h){for(let y=0;y<i.plots.length;y++)i.plots[y]!=a&&i.plots[y].pub(n,a,f,c,p,v,h)}},e!=null&&(mi[e]=i)),i}const Fn=1,Qs=2;function pn(e,l,i){const n=e.mode,a=e.series[l],f=n==2?e._data[l]:e._data,c=e.scales,p=e.bbox;let v=f[0],h=n==2?f[1]:f[l],y=n==2?c[a.facets[0].scale]:c[e.series[0].scale],m=n==2?c[a.facets[1].scale]:c[a.scale],_=p.left,q=p.top,T=p.width,z=p.height,le=e.valToPosH,re=e.valToPosV;return y.ori==0?i(a,v,h,y,m,le,re,_,q,T,z,ys,Bn,ks,ar,rr):i(a,v,h,y,m,re,le,q,_,z,T,Ss,Gn,ha,ir,or)}function pa(e,l){let i=0,n=0,a=ze(e.bands,oa);for(let f=0;f<a.length;f++){let c=a[f];c.series[0]==l?i=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Fu(e,l,i,n,a){let f=e.mode,c=e.series[l],p=f==2?c.facets[1].scale:c.scale,v=e.scales[p];return a==-1?v.min:a==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function Kl(e,l,i,n,a,f){return pn(e,l,(c,p,v,h,y,m,_,q,T,z,le)=>{let re=c.pxRound;const k=h.dir*(h.ori==0?1:-1),K=h.ori==0?Bn:Gn;let C,B;k==1?(C=i,B=n):(C=n,B=i);let L=re(m(p[C],h,z,q)),ae=re(_(v[C],y,le,T)),X=re(m(p[B],h,z,q)),Z=re(_(f==1?y.max:y.min,y,le,T)),ne=new Path2D(a);return K(ne,X,Z),K(ne,L,Z),K(ne,L,ae),ne})}function xs(e,l,i,n,a,f){let c=null;if(e.length>0){c=new Path2D;const p=l==0?ks:ha;let v=i;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let q=_[0]-v;q>0&&p(c,v,n,q,n+f),v=_[1]}}let h=i+a-v,y=10;h>0&&p(c,v,n-y/2,h,n+f+y)}return c}function Ou(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function va(e,l,i,n,a,f,c){let p=[],v=e.length;for(let h=a==1?i:n;h>=i&&h<=n;h+=a)if(l[h]===null){let m=h,_=h;if(a==1)for(;++h<=n&&l[h]===null;)_=h;else for(;--h>=i&&l[h]===null;)_=h;let q=f(e[m]),T=_==m?q:f(e[_]),z=m-a;q=c<=0&&z>=0&&z<v?f(e[z]):q;let re=_+a;T=c>=0&&re>=0&&re<v?f(e[re]):T,T>=q&&p.push([q,T])}return p}function _i(e){return e==0?Fi:e==1?Rt:l=>on(l,e)}function sr(e){let l=e==0?ys:Ss,i=e==0?(a,f,c,p,v,h)=>{a.arcTo(f,c,p,v,h)}:(a,f,c,p,v,h)=>{a.arcTo(c,f,v,p,h)},n=e==0?(a,f,c,p,v)=>{a.rect(f,c,p,v)}:(a,f,c,p,v)=>{a.rect(c,f,v,p)};return(a,f,c,p,v,h=0,y=0)=>{h==0&&y==0?n(a,f,c,p,v):(h=Bl(h,p/2,v/2),y=Bl(y,p/2,v/2),l(a,f+h,c),i(a,f+p,c,f+p,c+v,h),i(a,f+p,c+v,f,c+v,y),i(a,f,c+v,f,c,y),i(a,f,c,f+p,c,h),a.closePath())}}const ys=(e,l,i)=>{e.moveTo(l,i)},Ss=(e,l,i)=>{e.moveTo(i,l)},Bn=(e,l,i)=>{e.lineTo(l,i)},Gn=(e,l,i)=>{e.lineTo(i,l)},ks=sr(0),ha=sr(1),ar=(e,l,i,n,a,f)=>{e.arc(l,i,n,a,f)},ir=(e,l,i,n,a,f)=>{e.arc(i,l,n,a,f)},rr=(e,l,i,n,a,f,c)=>{e.bezierCurveTo(l,i,n,a,f,c)},or=(e,l,i,n,a,f,c)=>{e.bezierCurveTo(i,l,a,n,c,f)};function ur(e){return(l,i,n,a,f)=>pn(l,i,(c,p,v,h,y,m,_,q,T,z,le)=>{let{pxRound:re,points:k}=c,K,C;h.ori==0?(K=ys,C=ar):(K=Ss,C=ir);const B=nt(k.width*We,3);let L=(k.size-k.width)/2*We,ae=nt(L*2,3),X=new Path2D,Z=new Path2D,{left:ne,top:w,width:N,height:I}=l.bbox;ks(Z,ne-ae,w-ae,N+ae*2,I+ae*2);const se=O=>{if(v[O]!=null){let Q=re(m(p[O],h,z,q)),P=re(_(v[O],y,le,T));K(X,Q+L,P),C(X,Q,P,L,0,cs*2)}};if(f)f.forEach(se);else for(let O=n;O<=a;O++)se(O);return{stroke:B>0?X:null,fill:X,clip:Z,flags:Fn|Qs}})}function cr(e){return(l,i,n,a,f,c)=>{n!=a&&(f!=n&&c!=n&&e(l,i,n),f!=a&&c!=a&&e(l,i,a),e(l,i,c))}}const Bu=cr(Bn),Gu=cr(Gn);function fr(e){const l=ze(e?.alignGaps,0);return(i,n,a,f)=>pn(i,n,(c,p,v,h,y,m,_,q,T,z,le)=>{[a,f]=ms(v,a,f);let re=c.pxRound,k=I=>re(m(I,h,z,q)),K=I=>re(_(I,y,le,T)),C,B;h.ori==0?(C=Bn,B=Bu):(C=Gn,B=Gu);const L=h.dir*(h.ori==0?1:-1),ae={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Fn},X=ae.stroke;let Z=!1;if(f-a>=z*4){let I=$=>i.posToVal($,h.key,!0),se=null,O=null,Q,P,Pe,_e=k(p[L==1?a:f]),ue=k(p[a]),ye=k(p[f]),fe=I(L==1?ue+1:ye-1);for(let $=L==1?a:f;$>=a&&$<=f;$+=L){let Fe=p[$],xe=(L==1?Fe<fe:Fe>fe)?_e:k(Fe),de=v[$];xe==_e?de!=null?(P=de,se==null?(C(X,xe,K(P)),Q=se=O=P):P<se?se=P:P>O&&(O=P)):de===null&&(Z=!0):(se!=null&&B(X,_e,K(se),K(O),K(Q),K(P)),de!=null?(P=de,C(X,xe,K(P)),se=O=Q=P):(se=O=null,de===null&&(Z=!0)),_e=xe,fe=I(_e+L))}se!=null&&se!=O&&Pe!=_e&&B(X,_e,K(se),K(O),K(Q),K(P))}else for(let I=L==1?a:f;I>=a&&I<=f;I+=L){let se=v[I];se===null?Z=!0:se!=null&&C(X,k(p[I]),K(se))}let[w,N]=pa(i,n);if(c.fill!=null||w!=0){let I=ae.fill=new Path2D(X),se=c.fillTo(i,n,c.min,c.max,w),O=K(se),Q=k(p[a]),P=k(p[f]);L==-1&&([P,Q]=[Q,P]),C(I,P,O),C(I,Q,O)}if(!c.spanGaps){let I=[];Z&&I.push(...va(p,v,a,f,L,k,l)),ae.gaps=I=c.gaps(i,n,a,f,I),ae.clip=xs(I,h.ori,q,T,z,le)}return N!=0&&(ae.band=N==2?[Kl(i,n,a,f,X,-1),Kl(i,n,a,f,X,1)]:Kl(i,n,a,f,X,N)),ae})}function Iu(e){const l=ze(e.align,1),i=ze(e.ascDesc,!1),n=ze(e.alignGaps,0),a=ze(e.extend,!1);return(f,c,p,v)=>pn(f,c,(h,y,m,_,q,T,z,le,re,k,K)=>{[p,v]=ms(m,p,v);let C=h.pxRound,{left:B,width:L}=f.bbox,ae=ue=>C(T(ue,_,k,le)),X=ue=>C(z(ue,q,K,re)),Z=_.ori==0?Bn:Gn;const ne={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Fn},w=ne.stroke,N=_.dir*(_.ori==0?1:-1);let I=X(m[N==1?p:v]),se=ae(y[N==1?p:v]),O=se,Q=se;a&&l==-1&&(Q=B,Z(w,Q,I)),Z(w,se,I);for(let ue=N==1?p:v;ue>=p&&ue<=v;ue+=N){let ye=m[ue];if(ye==null)continue;let fe=ae(y[ue]),$=X(ye);l==1?Z(w,fe,I):Z(w,O,$),Z(w,fe,$),I=$,O=fe}let P=O;a&&l==1&&(P=B+L,Z(w,P,I));let[Pe,_e]=pa(f,c);if(h.fill!=null||Pe!=0){let ue=ne.fill=new Path2D(w),ye=h.fillTo(f,c,h.min,h.max,Pe),fe=X(ye);Z(ue,P,fe),Z(ue,Q,fe)}if(!h.spanGaps){let ue=[];ue.push(...va(y,m,p,v,N,ae,n));let ye=h.width*We/2,fe=i||l==1?ye:-ye,$=i||l==-1?-ye:ye;ue.forEach(Fe=>{Fe[0]+=fe,Fe[1]+=$}),ne.gaps=ue=h.gaps(f,c,p,v,ue),ne.clip=xs(ue,_.ori,le,re,k,K)}return _e!=0&&(ne.band=_e==2?[Kl(f,c,p,v,w,-1),Kl(f,c,p,v,w,1)]:Kl(f,c,p,v,w,_e)),ne})}function wi(e,l,i,n,a,f,c=lt){if(e.length>1){let p=null;for(let v=0,h=1/0;v<e.length;v++)if(l[v]!==void 0){if(p!=null){let y=Pt(e[v]-e[p]);y<h&&(h=y,c=Pt(i(e[v],n,a,f)-i(e[p],n,a,f)))}p=v}}return c}function Nu(e){e=e||Qn;const l=ze(e.size,[.6,lt,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const f=De(a),c=1-l[0],p=ze(l[1],lt),v=ze(l[2],1),h=ze(e.disp,Qn),y=ze(e.each,q=>{}),{fill:m,stroke:_}=h;return(q,T,z,le)=>pn(q,T,(re,k,K,C,B,L,ae,X,Z,ne,w)=>{let N=re.pxRound,I=i,se=n*We,O=p*We,Q=v*We,P,Pe;C.ori==0?[P,Pe]=f(q,T):[Pe,P]=f(q,T);const _e=C.dir*(C.ori==0?1:-1);let ue=C.ori==0?ks:ha,ye=C.ori==0?y:(H,Ee,tt,ol,ul,Ot,Zt)=>{y(H,Ee,tt,ul,ol,Zt,Ot)},fe=ze(q.bands,oa).find(H=>H.series[0]==T),$=fe!=null?fe.dir:0,Fe=re.fillTo(q,T,re.min,re.max,$),Be=N(ae(Fe,B,w,Z)),xe,de,$e,Xe=ne,Me=N(re.width*We),wt=!1,Et=null,ut=null,dt=null,Lt=null;m!=null&&(Me==0||_!=null)&&(wt=!0,Et=m.values(q,T,z,le),ut=new Map,new Set(Et).forEach(H=>{H!=null&&ut.set(H,new Path2D)}),Me>0&&(dt=_.values(q,T,z,le),Lt=new Map,new Set(dt).forEach(H=>{H!=null&&Lt.set(H,new Path2D)})));let{x0:Te,size:vt}=h;if(Te!=null&&vt!=null){I=1,k=Te.values(q,T,z,le),Te.unit==2&&(k=k.map(tt=>q.posToVal(X+tt*ne,C.key,!0)));let H=vt.values(q,T,z,le);vt.unit==2?de=H[0]*ne:de=L(H[0],C,ne,X)-L(0,C,ne,X),Xe=wi(k,K,L,C,ne,X,Xe),$e=Xe-de+se}else Xe=wi(k,K,L,C,ne,X,Xe),$e=Xe*c+se,de=Xe-$e;$e<1&&($e=0),Me>=de/2&&(Me=0),$e<5&&(N=Fi);let Kt=$e>0,bt=Xe-$e-(Kt?Me:0);de=N(Ks(bt,Q,O)),xe=(I==0?de/2:I==_e?0:de)-I*_e*((I==0?se/2:0)+(Kt?Me/2:0));const et={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Jt=wt?null:new Path2D;let zt=null;if(fe!=null)zt=q.data[fe.series[1]];else{let{y0:H,y1:Ee}=h;H!=null&&Ee!=null&&(K=Ee.values(q,T,z,le),zt=H.values(q,T,z,le))}let Dt=P*de,ve=Pe*de;for(let H=_e==1?z:le;H>=z&&H<=le;H+=_e){let Ee=K[H];if(Ee==null)continue;if(zt!=null){let ct=zt[H]??0;if(Ee-ct==0)continue;Be=ae(ct,B,w,Z)}let tt=C.distr!=2||h!=null?k[H]:H,ol=L(tt,C,ne,X),ul=ae(ze(Ee,Fe),B,w,Z),Ot=N(ol-xe),Zt=N(al(ul,Be)),pt=N(Bl(ul,Be)),xt=Zt-pt;if(Ee!=null){let ct=Ee<0?ve:Dt,ht=Ee<0?Dt:ve;wt?(Me>0&&dt[H]!=null&&ue(Lt.get(dt[H]),Ot,pt+_l(Me/2),de,al(0,xt-Me),ct,ht),Et[H]!=null&&ue(ut.get(Et[H]),Ot,pt+_l(Me/2),de,al(0,xt-Me),ct,ht)):ue(Jt,Ot,pt+_l(Me/2),de,al(0,xt-Me),ct,ht),ye(q,T,H,Ot-Me/2,pt,de+Me,xt)}}return Me>0?et.stroke=wt?Lt:Jt:wt||(et._fill=re.width==0?re._fill:re._stroke??re._fill,et.width=0),et.fill=wt?ut:Jt,et})}function zu(e,l){const i=ze(l?.alignGaps,0);return(n,a,f,c)=>pn(n,a,(p,v,h,y,m,_,q,T,z,le,re)=>{[f,c]=ms(h,f,c);let k=p.pxRound,K=P=>k(_(P,y,le,T)),C=P=>k(q(P,m,re,z)),B,L,ae;y.ori==0?(B=ys,ae=Bn,L=rr):(B=Ss,ae=Gn,L=or);const X=y.dir*(y.ori==0?1:-1);let Z=K(v[X==1?f:c]),ne=Z,w=[],N=[];for(let P=X==1?f:c;P>=f&&P<=c;P+=X)if(h[P]!=null){let _e=v[P],ue=K(_e);w.push(ne=ue),N.push(C(h[P]))}const I={stroke:e(w,N,B,ae,L,k),fill:null,clip:null,band:null,gaps:null,flags:Fn},se=I.stroke;let[O,Q]=pa(n,a);if(p.fill!=null||O!=0){let P=I.fill=new Path2D(se),Pe=p.fillTo(n,a,p.min,p.max,O),_e=C(Pe);ae(P,ne,_e),ae(P,Z,_e)}if(!p.spanGaps){let P=[];P.push(...va(v,h,f,c,X,K,i)),I.gaps=P=p.gaps(n,a,f,c,P),I.clip=xs(P,y.ori,T,z,le,re)}return Q!=0&&(I.band=Q==2?[Kl(n,a,f,c,se,-1),Kl(n,a,f,c,se,1)]:Kl(n,a,f,c,se,Q)),I})}function Vu(e){return zu(Hu,e)}function Hu(e,l,i,n,a,f){const c=e.length;if(c<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),c==2)n(p,e[1],l[1]);else{let v=Array(c),h=Array(c-1),y=Array(c-1),m=Array(c-1);for(let _=0;_<c-1;_++)y[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],h[_]=y[_]/m[_];v[0]=h[0];for(let _=1;_<c-1;_++)h[_]===0||h[_-1]===0||h[_-1]>0!=h[_]>0?v[_]=0:(v[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/h[_-1]+(m[_]+2*m[_-1])/h[_]),isFinite(v[_])||(v[_]=0));v[c-1]=h[c-2];for(let _=0;_<c-1;_++)a(p,e[_]+m[_]/3,l[_]+v[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-v[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const $s=new Set;function bi(){for(let e of $s)e.syncRect(!0)}On&&(fn(yo,An,bi),fn(So,An,bi,!0),fn(fs,An,()=>{Tt.pxRatio=We}));const Wu=fr(),Uu=ur();function xi(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((f,c)=>Xs(f,c,l,i))}function Yu(e,l){return e.map((i,n)=>n==0?{}:Ct({},l,i))}function Xs(e,l,i,n){return Ct({},l==0?i:n,e)}function dr(e,l,i){return l==null?Rn:[l,i]}const qu=dr;function ju(e,l,i){return l==null?Rn:ds(l,i,ia,!0)}function pr(e,l,i,n){return l==null?Rn:_s(l,i,e.scales[n].log,!1)}const Ku=pr;function vr(e,l,i,n){return l==null?Rn:aa(l,i,e.scales[n].log,!1)}const Ju=vr;function Zu(e,l,i,n,a){let f=al(Xa(e),Xa(l)),c=l-e,p=Ol(a/n*c,i);do{let v=i[p],h=n*v/c;if(h>=a&&f+(v<5?nn.get(v):0)<=17)return[v,h]}while(++p<i.length);return[0,0]}function yi(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=Rt((i=+a)*We))+"px"),[e,l,i]}function Qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=nt(l[2]*We,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function Tt(e,l,i){const n={mode:ze(e.mode,1)},a=n.mode;function f(t,s,r,o){let d=s.valToPct(t);return o+r*(s.dir==-1?1-d:d)}function c(t,s,r,o){let d=s.valToPct(t);return o+r*(s.dir==-1?d:1-d)}function p(t,s,r,o){return s.ori==0?f(t,s,r,o):c(t,s,r,o)}n.valToPosH=f,n.valToPosV=c;let v=!1;n.status=0;const h=n.root=Tl(no);if(e.id!=null&&(h.id=e.id),gl(h,e.class),e.title){let t=Tl(io,h);t.textContent=e.title}const y=Fl("canvas"),m=n.ctx=y.getContext("2d"),_=Tl(ro,h);fn("click",_,t=>{t.target===T&&(at!=wn||ft!=bn)&&Yt.click(n,t)},!0);const q=n.under=Tl(oo,_);_.appendChild(y);const T=n.over=Tl(uo,_);e=Pn(e);const z=+ze(e.pxAlign,1),le=_i(z);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const re=e.ms||.001,k=n.series=a==1?xi(e.series||[],fi,gi,!1):Yu(e.series||[null],hi),K=n.axes=xi(e.axes||[],ci,pi,!0),C=n.scales={},B=n.bands=e.bands||[];B.forEach(t=>{t.fill=De(t.fill||null),t.dir=ze(t.dir,-1)});const L=a==2?k[1].facets[0].scale:k[0].scale,ae={axes:wr,series:In},X=(e.drawOrder||["axes","series"]).map(t=>ae[t]);function Z(t){const s=t.distr==3?r=>jl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>zs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:d,_max:g}=t,b=g-d;return(o-d)/b}}function ne(t){let s=C[t];if(s==null){let r=(e.scales||Qn)[t]||Qn;if(r.from!=null){ne(r.from);let o=Ct({},C[r.from],r,{key:t});o.valToPct=Z(o),C[t]=o}else{s=C[t]=Ct({},t==L?lr:Pu,r),s.key=t;let o=s.time,d=s.range,g=tn(d);if((t!=L||a==2&&!o)&&(g&&(d[0]==null||d[1]==null)&&(d={min:d[0]==null?Za:{mode:1,hard:d[0],soft:d[0]},max:d[1]==null?Za:{mode:1,hard:d[1],soft:d[1]}},g=!1),!g&&bs(d))){let b=d;d=(M,F,Y)=>F==null?Rn:ds(F,Y,b)}s.range=De(d||(o?qu:t==L?s.distr==3?Ku:s.distr==4?Ju:dr:s.distr==3?pr:s.distr==4?vr:ju)),s.auto=De(g?!1:s.auto),s.clamp=De(s.clamp||Ru),s._min=s._max=null,s.valToPct=Z(s)}}}ne("x"),ne("y"),a==1&&k.forEach(t=>{ne(t.scale)}),K.forEach(t=>{ne(t.scale)});for(let t in e.scales)ne(t);const w=C[L],N=w.distr;let I,se;w.ori==0?(gl(h,so),I=f,se=c):(gl(h,ao),I=c,se=f);const O={};for(let t in C){let s=C[t];(s.min!=null||s.max!=null)&&(O[t]={min:s.min,max:s.max},s.min=s.max=null)}const Q=e.tzDate||(t=>new Date(Rt(t/re))),P=e.fmtDate||ua,Pe=re==1?au(Q):ou(Q),_e=ri(Q,ii(re==1?su:ru,P)),ue=ui(Q,oi(cu,P)),ye=[],fe=n.legend=Ct({},pu,e.legend),$=n.cursor=Ct({},wu,{drag:{y:a==2}},e.cursor),Fe=fe.show,Be=$.show,xe=fe.markers;fe.idxs=ye,xe.width=De(xe.width),xe.dash=De(xe.dash),xe.stroke=De(xe.stroke),xe.fill=De(xe.fill);let de,$e,Xe,Me=[],wt=[],Et,ut=!1,dt={};if(fe.live){const t=k[1]?k[1].values:null;ut=t!=null,Et=ut?t(n,1,0):{_:0};for(let s in Et)dt[s]=na}if(Fe)if(de=Fl("table",go,h),Xe=Fl("tbody",null,de),fe.mount(n,de),ut){$e=Fl("thead",null,de,Xe);let t=Fl("tr",null,$e);Fl("th",null,t);for(var Lt in Et)Fl("th",Ga,t).textContent=Lt}else gl(de,_o),fe.live&&gl(de,mo);const Te={show:!0},vt={show:!1};function Kt(t,s){if(s==0&&(ut||!fe.live||a==2))return Rn;let r=[],o=Fl("tr",wo,Xe,Xe.childNodes[s]);gl(o,t.class),t.show||gl(o,cn);let d=Fl("th",null,o);if(xe.show){let M=Tl(bo,d);if(s>0){let F=xe.width(n,s);F&&(M.style.border=F+"px "+xe.dash(n,s)+" "+xe.stroke(n,s)),M.style.background=xe.fill(n,s)}}let g=Tl(Ga,d);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(xe.show||(g.style.color=t.width>0?xe.stroke(n,s):xe.fill(n,s)),et("click",d,M=>{if($._lock)return;Qt(M);let F=k.indexOf(t);if((M.ctrlKey||M.metaKey)!=fe.isolate){let Y=k.some((J,ee)=>ee>0&&ee!=F&&J.show);k.forEach((J,ee)=>{ee>0&&Il(ee,Y?ee==F?Te:vt:Te,!0,At.setSeries)})}else Il(F,{show:!t.show},!0,At.setSeries)},!1),dl&&et(Va,d,M=>{$._lock||(Qt(M),Il(k.indexOf(t),yn,!0,At.setSeries))},!1));for(var b in Et){let M=Fl("td",xo,o);M.textContent="--",r.push(M)}return[o,r]}const bt=new Map;function et(t,s,r,o=!0){const d=bt.get(s)||{},g=$.bind[t](n,s,r,o);g&&(fn(t,s,d[t]=g),bt.set(s,d))}function Jt(t,s,r){const o=bt.get(s)||{};for(let d in o)(t==null||d==t)&&(js(d,s,o[d]),delete o[d]);t==null&&bt.delete(s)}let zt=0,Dt=0,ve=0,H=0,Ee=0,tt=0,ol=Ee,ul=tt,Ot=ve,Zt=H,pt=0,xt=0,ct=0,ht=0;n.bbox={};let cl=!1,Al=!1,Vt=!1,Mt=!1,bl=!1,gt=!1;function Cl(t,s,r){(r||t!=n.width||s!=n.height)&&Jl(t,s),hn(!1),Vt=!0,Al=!0,gn()}function Jl(t,s){n.width=zt=ve=t,n.height=Dt=H=s,Ee=tt=0,fl(),Gl();let r=n.bbox;pt=r.left=on(Ee*We,.5),xt=r.top=on(tt*We,.5),ct=r.width=on(ve*We,.5),ht=r.height=on(H*We,.5)}const xl=3;function Ll(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=_r(s);t=s==xl||r&&o,t||(Jl(n.width,n.height),Al=!0)}}function Zl({width:t,height:s}){Cl(t,s)}n.setSize=Zl;function fl(){let t=!1,s=!1,r=!1,o=!1;K.forEach((d,g)=>{if(d.show&&d._show){let{side:b,_size:M}=d,F=b%2,Y=d.label!=null?d.labelSize:0,J=M+Y;J>0&&(F?(ve-=J,b==3?(Ee+=J,o=!0):r=!0):(H-=J,b==0?(tt+=J,t=!0):s=!0))}}),Oe[0]=t,Oe[1]=r,Oe[2]=s,Oe[3]=o,ve-=E[1]+E[3],Ee+=E[3],H-=E[2]+E[0],tt+=E[0]}function Gl(){let t=Ee+ve,s=tt+H,r=Ee,o=tt;function d(g,b){switch(g){case 1:return t+=b,t-b;case 2:return s+=b,s-b;case 3:return r-=b,r+b;case 0:return o-=b,o+b}}K.forEach((g,b)=>{if(g.show&&g._show){let M=g.side;g._pos=d(M,g._size),g.label!=null&&(g._lpos=d(M,g.labelSize))}})}if($.dataIdx==null){let t=$.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=De(t.prox),o=t.bias??=0;$.dataIdx=(d,g,b,M)=>{if(g==0)return b;let F=b,Y=r(d,g,b,M)??lt,J=Y>=0&&Y<lt,ee=w.ori==0?ve:H,be=$.left,He=l[0],Ne=l[g];if(s.has(Ne[b])){F=null;let Ae=null,he=null,ce;if(o==0||o==-1)for(ce=b;Ae==null&&ce-- >0;)s.has(Ne[ce])||(Ae=ce);if(o==0||o==1)for(ce=b;he==null&&ce++<Ne.length;)s.has(Ne[ce])||(he=ce);if(Ae!=null||he!=null)if(J){let rt=Ae==null?-1/0:I(He[Ae],w,ee,0),mt=he==null?1/0:I(He[he],w,ee,0),Nt=be-rt,Ze=mt-be;Nt<=Ze?Nt<=Y&&(F=Ae):Ze<=Y&&(F=he)}else F=he==null?Ae:Ae==null?he:b-Ae<=he-b?Ae:he}else J&&Pt(be-I(He[b],w,ee,0))>Y&&(F=null);return F}}const Qt=t=>{$.event=t};$.idxs=ye,$._lock=!1;let qe=$.points;qe.show=De(qe.show),qe.size=De(qe.size),qe.stroke=De(qe.stroke),qe.width=De(qe.width),qe.fill=De(qe.fill);const Ht=n.focus=Ct({},e.focus||{alpha:.3},$.focus),dl=Ht.prox>=0,st=dl&&qe.one;let Ge=[],yt=[],R=[];function j(t,s){let r=qe.show(n,s);if(r instanceof HTMLElement)return gl(r,ho),gl(r,t.class),Hl(r,-10,-10,ve,H),T.insertBefore(r,Ge[s]),r}function ie(t,s){if(a==1||s>0){let r=a==1&&C[t.scale].time,o=t.value;t.value=r?li(o)?ui(Q,oi(o,P)):o||ue:o||Cu,t.label=t.label||(r?xu:bu)}if(st||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Wu||Po,t.fillTo=De(t.fillTo||Fu),t.pxAlign=+ze(t.pxAlign,z),t.pxRound=_i(t.pxAlign),t.stroke=De(t.stroke||null),t.fill=De(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Lu(al(1,t.width),1),o=t.points=Ct({},{size:r,width:al(1,r*.2),stroke:t.stroke,space:r*2,paths:Uu,_stroke:null,_fill:null},t.points);o.show=De(o.show),o.filter=De(o.filter),o.fill=De(o.fill),o.stroke=De(o.stroke),o.paths=De(o.paths),o.pxAlign=t.pxAlign}if(Fe){let r=Kt(t,s);Me.splice(s,0,r[0]),wt.splice(s,0,r[1]),fe.values.push(null)}if(Be){ye.splice(s,0,null);let r=null;st?s==0&&(r=j(t,s)):s>0&&(r=j(t,s)),Ge.splice(s,0,r),yt.splice(s,0,0),R.splice(s,0,0)}It("addSeries",s)}function we(t,s){s=s??k.length,t=a==1?Xs(t,s,fi,gi):Xs(t,s,{},hi),k.splice(s,0,t),ie(k[s],s)}n.addSeries=we;function ke(t){if(k.splice(t,1),Fe){fe.values.splice(t,1),wt.splice(t,1);let s=Me.splice(t,1)[0];Jt(null,s.firstChild),s.remove()}Be&&(ye.splice(t,1),Ge.splice(t,1)[0].remove(),yt.splice(t,1),R.splice(t,1)),It("delSeries",t)}n.delSeries=ke;const Oe=[!1,!1,!1,!1];function je(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=C[t.scale];o==null&&(t.scale=r?k[1].scale:L,o=C[t.scale]);let d=o.time;t.size=De(t.size),t.space=De(t.space),t.rotate=De(t.rotate),tn(t.incrs)&&t.incrs.forEach(b=>{!nn.has(b)&&nn.set(b,Gi(b))}),t.incrs=De(t.incrs||(o.distr==2?tu:d?re==1?nu:iu:un)),t.splits=De(t.splits||(d&&o.distr==1?Pe:o.distr==3?Js:o.distr==4?ku:Su)),t.stroke=De(t.stroke),t.grid.stroke=De(t.grid.stroke),t.ticks.stroke=De(t.ticks.stroke),t.border.stroke=De(t.border.stroke);let g=t.values;t.values=tn(g)&&!tn(g[0])?De(g):d?tn(g)?ri(Q,ii(g,P)):li(g)?uu(Q,g):g||_e:g||yu,t.filter=De(t.filter||(o.distr>=3&&o.log==10?Mu:o.distr==3&&o.log==2?Au:Oi)),t.font=yi(t.font),t.labelFont=yi(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(Oe[s]=!0,t._el=Tl(co,_))}}function Ke(t,s,r,o){let[d,g,b,M]=r,F=s%2,Y=0;return F==0&&(M||g)&&(Y=s==0&&!d||s==2&&!b?Rt(ci.size/3):0),F==1&&(d||b)&&(Y=s==1&&!g||s==3&&!M?Rt(pi.size/2):0),Y}const St=n.padding=(e.padding||[Ke,Ke,Ke,Ke]).map(t=>De(ze(t,Ke))),E=n._padding=St.map((t,s)=>t(n,s,Oe,0));let A,W=null,V=null;const pe=a==1?k[0].idxs:null;let U=null,D=!1;function oe(t,s){if(l=t??[],n.data=n._data=l,a==2){A=0;for(let r=1;r<k.length;r++)A+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),U=l[0],A=U.length;let r=l;if(N==2){r=l.slice();let o=r[0]=Array(A);for(let d=0;d<A;d++)o[d]=d}n._data=l=r}if(hn(!0),It("setData"),N==2&&(Vt=!0),s!==!1){let r=w;r.auto(n,D)?Ie():$l(L,r.min,r.max),Mt=Mt||$.left>=0,gt=!0,gn()}}n.setData=oe;function Ie(){D=!0;let t,s;a==1&&(A>0?(W=pe[0]=0,V=pe[1]=A-1,t=l[0][W],s=l[0][V],N==2?(t=W,s=V):t==s&&(N==3?[t,s]=_s(t,t,w.log,!1):N==4?[t,s]=aa(t,t,w.log,!1):w.time?s=t+Rt(86400/re):[t,s]=ds(t,s,ia,!0))):(W=pe[0]=t=null,V=pe[1]=s=null)),$l(L,t,s)}let Ve,kt,qt,il,$t,jt,Xt,yl,Wt,Re;function Ue(t,s,r,o,d,g){t??=Na,r??=oa,o??="butt",d??=Na,g??="round",t!=Ve&&(m.strokeStyle=Ve=t),d!=kt&&(m.fillStyle=kt=d),s!=qt&&(m.lineWidth=qt=s),g!=$t&&(m.lineJoin=$t=g),o!=jt&&(m.lineCap=jt=o),r!=il&&m.setLineDash(il=r)}function Ut(t,s,r,o){s!=kt&&(m.fillStyle=kt=s),t!=Xt&&(m.font=Xt=t),r!=yl&&(m.textAlign=yl=r),o!=Wt&&(m.textBaseline=Wt=o)}function rl(t,s,r,o,d=0){if(o.length>0&&t.auto(n,D)&&(s==null||s.min==null)){let g=ze(W,0),b=ze(V,o.length-1),M=r.min==null?Mo(o,g,b,d,t.distr==3):[r.min,r.max];t.min=Bl(t.min,r.min=M[0]),t.max=al(t.max,r.max=M[1])}}const Dl={min:null,max:null};function Yl(){for(let o in C){let d=C[o];O[o]==null&&(d.min==null||O[L]!=null&&d.auto(n,D))&&(O[o]=Dl)}for(let o in C){let d=C[o];O[o]==null&&d.from!=null&&O[d.from]!=null&&(O[o]=Dl)}O[L]!=null&&hn(!0);let t={};for(let o in O){let d=O[o];if(d!=null){let g=t[o]=Pn(C[o],Bo);if(d.min!=null)Ct(g,d);else if(o!=L||a==2)if(A==0&&g.from==null){let b=g.range(n,null,null,o);g.min=b[0],g.max=b[1]}else g.min=lt,g.max=-lt}}if(A>0){k.forEach((o,d)=>{if(a==1){let g=o.scale,b=O[g];if(b==null)return;let M=t[g];if(d==0){let F=M.range(n,M.min,M.max,g);M.min=F[0],M.max=F[1],W=Ol(M.min,l[0]),V=Ol(M.max,l[0]),V-W>1&&(l[0][W]<M.min&&W++,l[0][V]>M.max&&V--),o.min=U[W],o.max=U[V]}else o.show&&o.auto&&rl(M,b,o,l[d],o.sorted);o.idxs[0]=W,o.idxs[1]=V}else if(d>0&&o.show&&o.auto){let[g,b]=o.facets,M=g.scale,F=b.scale,[Y,J]=l[d],ee=t[M],be=t[F];ee!=null&&rl(ee,O[M],g,Y,g.sorted),be!=null&&rl(be,O[F],b,J,b.sorted),o.min=b.min,o.max=b.max}});for(let o in t){let d=t[o],g=O[o];if(d.from==null&&(g==null||g.min==null)){let b=d.range(n,d.min==lt?null:d.min,d.max==-lt?null:d.max,o);d.min=b[0],d.max=b[1]}}}for(let o in t){let d=t[o];if(d.from!=null){let g=t[d.from];if(g.min==null)d.min=d.max=null;else{let b=d.range(n,g.min,g.max,o);d.min=b[0],d.max=b[1]}}}let s={},r=!1;for(let o in t){let d=t[o],g=C[o];if(g.min!=d.min||g.max!=d.max){g.min=d.min,g.max=d.max;let b=g.distr;g._min=b==3?jl(g.min):b==4?zs(g.min,g.asinh):b==100?g.fwd(g.min):g.min,g._max=b==3?jl(g.max):b==4?zs(g.max,g.asinh):b==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){k.forEach((o,d)=>{a==2?d>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Vt=!0,It("setScale",o);Be&&$.left>=0&&(Mt=gt=!0)}for(let o in O)O[o]=null}function vn(t){let s=Ks(W-1,0,A-1),r=Ks(V+1,0,A-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<A-1;)r++;return[s,r]}function In(){if(A>0){let t=k.some(s=>s._focus)&&Re!=Ht.alpha;t&&(m.globalAlpha=Re=Ht.alpha),k.forEach((s,r)=>{if(r>0&&s.show&&(el(r,!1),el(r,!0),s._paths==null)){let o=Re;Re!=s.alpha&&(m.globalAlpha=Re=s.alpha);let d=a==2?[0,l[r][0].length-1]:vn(l[r]);s._paths=s.paths(n,r,d[0],d[1]),Re!=o&&(m.globalAlpha=Re=o)}}),k.forEach((s,r)=>{if(r>0&&s.show){let o=Re;Re!=s.alpha&&(m.globalAlpha=Re=s.alpha),s._paths!=null&&ga(r,!1);{let d=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,W,V,d),b=s.points.filter(n,r,g,d);(g||b)&&(s.points._paths=s.points.paths(n,r,W,V,b),ga(r,!0))}Re!=o&&(m.globalAlpha=Re=o),It("drawSeries",r)}}),t&&(m.globalAlpha=Re=1)}}function el(t,s){let r=s?k[t].points:k[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function ga(t,s){let r=s?k[t].points:k[t],{stroke:o,fill:d,clip:g,flags:b,_stroke:M=r._stroke,_fill:F=r._fill,_width:Y=r.width}=r._paths;Y=nt(Y*We,3);let J=null,ee=Y%2/2;s&&F==null&&(F=Y>0?"#fff":M);let be=r.pxAlign==1&&ee>0;if(be&&m.translate(ee,ee),!s){let He=pt-Y/2,Ne=xt-Y/2,Ae=ct+Y,he=ht+Y;J=new Path2D,J.rect(He,Ne,Ae,he)}s?Ts(M,Y,r.dash,r.cap,F,o,d,b,g):hr(t,M,Y,r.dash,r.cap,F,o,d,b,J,g),be&&m.translate(-ee,-ee)}function hr(t,s,r,o,d,g,b,M,F,Y,J){let ee=!1;F!=0&&B.forEach((be,He)=>{if(be.series[0]==t){let Ne=k[be.series[1]],Ae=l[be.series[1]],he=(Ne._paths||Qn).band;tn(he)&&(he=be.dir==1?he[0]:he[1]);let ce,rt=null;Ne.show&&he&&Co(Ae,W,V)?(rt=be.fill(n,He)||g,ce=Ne._paths.clip):he=null,Ts(s,r,o,d,rt,b,M,F,Y,J,ce,he),ee=!0}}),ee||Ts(s,r,o,d,g,b,M,F,Y,J)}const ma=Fn|Qs;function Ts(t,s,r,o,d,g,b,M,F,Y,J,ee){Ue(t,s,r,o,d),(F||Y||ee)&&(m.save(),F&&m.clip(F),Y&&m.clip(Y)),ee?(M&ma)==ma?(m.clip(ee),J&&m.clip(J),ts(d,b),es(t,g,s)):M&Qs?(ts(d,b),m.clip(ee),es(t,g,s)):M&Fn&&(m.save(),m.clip(ee),J&&m.clip(J),ts(d,b),m.restore(),es(t,g,s)):(ts(d,b),es(t,g,s)),(F||Y||ee)&&m.restore()}function es(t,s,r){r>0&&(s instanceof Map?s.forEach((o,d)=>{m.strokeStyle=Ve=d,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function ts(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=kt=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function gr(t,s,r,o){let d=K[t],g;if(o<=0)g=[0,0];else{let b=d._space=d.space(n,t,s,r,o),M=d._incrs=d.incrs(n,t,s,r,o,b);g=Zu(s,r,M,o,b)}return d._found=g}function Es(t,s,r,o,d,g,b,M,F,Y){let J=b%2/2;z==1&&m.translate(J,J),Ue(M,b,F,Y,M),m.beginPath();let ee,be,He,Ne,Ae=d+(o==0||o==3?-g:g);r==0?(be=d,Ne=Ae):(ee=d,He=Ae);for(let he=0;he<t.length;he++)s[he]!=null&&(r==0?ee=He=t[he]:be=Ne=t[he],m.moveTo(ee,be),m.lineTo(He,Ne));m.stroke(),z==1&&m.translate(-J,-J)}function mr(t){let s=!0;return K.forEach((r,o)=>{if(!r.show)return;let d=C[r.scale];if(d.min==null){r._show&&(s=!1,r._show=!1,hn(!1));return}else r._show||(s=!1,r._show=!0,hn(!1));let g=r.side,b=g%2,{min:M,max:F}=d,[Y,J]=gr(o,M,F,b==0?ve:H);if(J==0)return;let ee=d.distr==2,be=r._splits=r.splits(n,o,M,F,Y,J,ee),He=d.distr==2?be.map(ce=>U[ce]):be,Ne=d.distr==2?U[be[1]]-U[be[0]]:Y,Ae=r._values=r.values(n,r.filter(n,He,o,J,Ne),o,J,Ne);r._rotate=g==2?r.rotate(n,Ae,o,J):0;let he=r._size;r._size=El(r.size(n,Ae,o,t)),he!=null&&r._size!=he&&(s=!1)}),s}function _r(t){let s=!0;return St.forEach((r,o)=>{let d=r(n,o,Oe,t);d!=E[o]&&(s=!1),E[o]=d}),s}function wr(){for(let t=0;t<K.length;t++){let s=K[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,d,g,b=s.stroke(n,t),M=r==0||r==3?-1:1,[F,Y]=s._found;if(s.label!=null){let ll=s.labelGap*M,hl=Rt((s._lpos+ll)*We);Ut(s.labelFont[0],b,"center",r==2?Yn:Ia),m.save(),o==1?(d=g=0,m.translate(hl,Rt(xt+ht/2)),m.rotate((r==3?-cs:cs)/2)):(d=Rt(pt+ct/2),g=hl);let rn=Pi(s.label)?s.label(n,t,F,Y):s.label;m.fillText(rn,d,g),m.restore()}if(Y==0)continue;let J=C[s.scale],ee=o==0?ct:ht,be=o==0?pt:xt,He=s._splits,Ne=J.distr==2?He.map(ll=>U[ll]):He,Ae=J.distr==2?U[He[1]]-U[He[0]]:F,he=s.ticks,ce=s.border,rt=he.show?he.size:0,mt=Rt(rt*We),Nt=Rt((s.alignTo==2?s._size-rt-s.gap:s.gap)*We),Ze=s._rotate*-cs/180,_t=le(s._pos*We),pl=(mt+Nt)*M,tl=_t+pl;g=o==0?tl:0,d=o==1?tl:0;let Sl=s.font[0],Rl=s.align==1?kn:s.align==2?Gs:Ze>0?kn:Ze<0?Gs:o==0?"center":r==3?Gs:kn,zl=Ze||o==1?"middle":r==2?Yn:Ia;Ut(Sl,b,Rl,zl);let vl=s.font[1]*s.lineGap,kl=He.map(ll=>le(p(ll,J,ee,be))),Pl=s._values;for(let ll=0;ll<Pl.length;ll++){let hl=Pl[ll];if(hl!=null){o==0?d=kl[ll]:g=kl[ll],hl=""+hl;let rn=hl.indexOf(`
`)==-1?[hl]:hl.split(/\n/gm);for(let nl=0;nl<rn.length;nl++){let Ba=rn[nl];Ze?(m.save(),m.translate(d,g+nl*vl),m.rotate(Ze),m.fillText(Ba,0,0),m.restore()):m.fillText(Ba,d,g+nl*vl)}}}he.show&&Es(kl,he.filter(n,Ne,t,Y,Ae),o,r,_t,mt,nt(he.width*We,3),he.stroke(n,t),he.dash,he.cap);let Vl=s.grid;Vl.show&&Es(kl,Vl.filter(n,Ne,t,Y,Ae),o,o==0?2:1,o==0?xt:pt,o==0?ht:ct,nt(Vl.width*We,3),Vl.stroke(n,t),Vl.dash,Vl.cap),ce.show&&Es([_t],[1],o==0?1:0,o==0?1:2,o==1?xt:pt,o==1?ht:ct,nt(ce.width*We,3),ce.stroke(n,t),ce.dash,ce.cap)}It("drawAxes")}function hn(t){k.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let ls=!1,Ms=!1,Nn=[];function br(){Ms=!1;for(let t=0;t<Nn.length;t++)It(...Nn[t]);Nn.length=0}function gn(){ls||(Wo(_a),ls=!0)}function xr(t,s=!1){ls=!0,Ms=s,t(n),_a(),s&&Nn.length>0&&queueMicrotask(br)}n.batch=xr;function _a(){if(cl&&(Yl(),cl=!1),Vt&&(Ll(),Vt=!1),Al){if(ot(q,kn,Ee),ot(q,Yn,tt),ot(q,jn,ve),ot(q,Kn,H),ot(T,kn,Ee),ot(T,Yn,tt),ot(T,jn,ve),ot(T,Kn,H),ot(_,jn,zt),ot(_,Kn,Dt),y.width=Rt(zt*We),y.height=Rt(Dt*We),K.forEach(({_el:t,_show:s,_size:r,_pos:o,side:d})=>{if(t!=null)if(s){let g=d===3||d===0?r:0,b=d%2==1;ot(t,b?"left":"top",o-g),ot(t,b?"width":"height",r),ot(t,b?"top":"left",b?tt:Ee),ot(t,b?"height":"width",b?H:ve),qs(t,cn)}else gl(t,cn)}),Ve=kt=qt=$t=jt=Xt=yl=Wt=il=null,Re=1,Hn(!0),Ee!=ol||tt!=ul||ve!=Ot||H!=Zt){hn(!1);let t=ve/Ot,s=H/Zt;if(Be&&!Mt&&$.left>=0){$.left*=t,$.top*=s,mn&&Hl(mn,Rt($.left),0,ve,H),_n&&Hl(_n,0,Rt($.top),ve,H);for(let r=0;r<Ge.length;r++){let o=Ge[r];o!=null&&(yt[r]*=t,R[r]*=s,Hl(o,El(yt[r]),El(R[r]),ve,H))}}if(it.show&&!bl&&it.left>=0&&it.width>0){it.left*=t,it.width*=t,it.top*=s,it.height*=s;for(let r in Ps)ot(xn,r,it[r])}ol=Ee,ul=tt,Ot=ve,Zt=H}It("setSize"),Al=!1}zt>0&&Dt>0&&(m.clearRect(0,0,y.width,y.height),It("drawClear"),X.forEach(t=>t()),It("draw")),it.show&&bl&&(ns(it),bl=!1),Be&&Mt&&(an(null,!0,!1),Mt=!1),fe.show&&fe.live&&gt&&(Ds(),gt=!1),v||(v=!0,n.status=1,It("ready")),D=!1,ls=!1}n.redraw=(t,s)=>{Vt=s||!1,t!==!1?$l(L,w.min,w.max):gn()};function As(t,s){let r=C[t];if(r.from==null){if(A==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(A>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==L&&r.distr==2&&A>0&&(s.min=Ol(s.min,l[0]),s.max=Ol(s.max,l[0]),s.min==s.max&&s.max++),O[t]=s,cl=!0,gn()}}n.setScale=As;let Cs,Ls,mn,_n,wa,ba,wn,bn,xa,ya,at,ft,Ql=!1;const Yt=$.drag;let Bt=Yt.x,Gt=Yt.y;Be&&($.x&&(Cs=Tl(po,T)),$.y&&(Ls=Tl(vo,T)),w.ori==0?(mn=Cs,_n=Ls):(mn=Ls,_n=Cs),at=$.left,ft=$.top);const it=n.select=Ct({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),xn=it.show?Tl(fo,it.over?T:q):null;function ns(t,s){if(it.show){for(let r in t)it[r]=t[r],r in Ps&&ot(xn,r,t[r]);s!==!1&&It("setSelect")}}n.setSelect=ns;function yr(t){if(k[t].show)Fe&&qs(Me[t],cn);else if(Fe&&gl(Me[t],cn),Be){let r=st?Ge[0]:Ge[t];r!=null&&Hl(r,-10,-10,ve,H)}}function $l(t,s,r){As(t,{min:s,max:r})}function Il(t,s,r,o){s.focus!=null&&Mr(t),s.show!=null&&k.forEach((d,g)=>{g>0&&(t==g||t==null)&&(d.show=s.show,yr(g),a==2?($l(d.facets[0].scale,null,null),$l(d.facets[1].scale,null,null)):$l(d.scale,null,null),gn())}),r!==!1&&It("setSeries",t,s),o&&Wn("setSeries",n,t,s)}n.setSeries=Il;function Sr(t,s){Ct(B[t],s)}function kr(t,s){t.fill=De(t.fill||null),t.dir=ze(t.dir,-1),s=s??B.length,B.splice(s,0,t)}function Tr(t){t==null?B.length=0:B.splice(t,1)}n.addBand=kr,n.setBand=Sr,n.delBand=Tr;function Er(t,s){k[t].alpha=s,Be&&Ge[t]!=null&&(Ge[t].style.opacity=s),Fe&&Me[t]&&(Me[t].style.opacity=s)}let ql,Xl,sn;const yn={focus:!0};function Mr(t){if(t!=sn){let s=t==null,r=Ht.alpha!=1;k.forEach((o,d)=>{if(a==1||d>0){let g=s||d==0||d==t;o._focus=s?null:g,r&&Er(d,g?1:Ht.alpha)}}),sn=t,r&&gn()}}Fe&&dl&&et(Ha,de,t=>{$._lock||(Qt(t),sn!=null&&Il(null,yn,!0,At.setSeries))});function Nl(t,s,r){let o=C[s];r&&(t=t/We-(o.ori==1?tt:Ee));let d=ve;o.ori==1&&(d=H,t=d-t),o.dir==-1&&(t=d-t);let g=o._min,b=o._max,M=t/d,F=g+(b-g)*M,Y=o.distr;return Y==3?Dn(10,F):Y==4?Do(F,o.asinh):Y==100?o.bwd(F):F}function Ar(t,s){let r=Nl(t,L,s);return Ol(r,l[0],W,V)}n.valToIdx=t=>Ol(t,l[0]),n.posToIdx=Ar,n.posToVal=Nl,n.valToPos=(t,s,r)=>C[s].ori==0?f(t,C[s],r?ct:ve,r?pt:0):c(t,C[s],r?ht:H,r?xt:0),n.setCursor=(t,s,r)=>{at=t.left,ft=t.top,an(null,s,r)};function Sa(t,s){ot(xn,kn,it.left=t),ot(xn,jn,it.width=s)}function ka(t,s){ot(xn,Yn,it.top=t),ot(xn,Kn,it.height=s)}let zn=w.ori==0?Sa:ka,Vn=w.ori==1?Sa:ka;function Cr(){if(Fe&&fe.live)for(let t=a==2?1:0;t<k.length;t++){if(t==0&&ut)continue;let s=fe.values[t],r=0;for(let o in s)wt[t][r++].firstChild.nodeValue=s[o]}}function Ds(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{ye[o]=r}):Oo(t.idx)||ye.fill(t.idx),fe.idx=ye[0]),Fe&&fe.live){for(let r=0;r<k.length;r++)(r>0||a==1&&!ut)&&Lr(r,ye[r]);Cr()}gt=!1,s!==!1&&It("setLegend")}n.setLegend=Ds;function Lr(t,s){let r=k[t],o=t==0&&N==2?U:l[t],d;ut?d=r.values(n,t,s)??dt:(d=r.value(n,s==null?null:o[s],t,s),d=d==null?dt:{_:d}),fe.values[t]=d}function an(t,s,r){xa=at,ya=ft,[at,ft]=$.move(n,at,ft),$.left=at,$.top=ft,Be&&(mn&&Hl(mn,Rt(at),0,ve,H),_n&&Hl(_n,0,Rt(ft),ve,H));let o,d=W>V;ql=lt,Xl=null;let g=w.ori==0?ve:H,b=w.ori==1?ve:H;if(at<0||A==0||d){o=$.idx=null;for(let M=0;M<k.length;M++){let F=Ge[M];F!=null&&Hl(F,-10,-10,ve,H)}dl&&Il(null,yn,!0,t==null&&At.setSeries),fe.live&&(ye.fill(o),gt=!0)}else{let M,F,Y;a==1&&(M=w.ori==0?at:ft,F=Nl(M,L),o=$.idx=Ol(F,l[0],W,V),Y=I(l[0][o],w,g,0));let J=-10,ee=-10,be=0,He=0,Ne=!0,Ae="",he="";for(let ce=a==2?1:0;ce<k.length;ce++){let rt=k[ce],mt=ye[ce],Nt=mt==null?null:a==1?l[ce][mt]:l[ce][1][mt],Ze=$.dataIdx(n,ce,o,F),_t=Ze==null?null:a==1?l[ce][Ze]:l[ce][1][Ze];if(gt=gt||_t!=Nt||Ze!=mt,ye[ce]=Ze,ce>0&&rt.show){let pl=Ze==null?-10:Ze==o?Y:I(a==1?l[0][Ze]:l[ce][0][Ze],w,g,0),tl=_t==null?-10:se(_t,a==1?C[rt.scale]:C[rt.facets[1].scale],b,0);if(dl&&_t!=null){let Sl=w.ori==1?at:ft,Rl=Pt(Ht.dist(n,ce,Ze,tl,Sl));if(Rl<ql){let zl=Ht.bias;if(zl!=0){let vl=Nl(Sl,rt.scale),kl=_t>=0?1:-1,Pl=vl>=0?1:-1;Pl==kl&&(Pl==1?zl==1?_t>=vl:_t<=vl:zl==1?_t<=vl:_t>=vl)&&(ql=Rl,Xl=ce)}else ql=Rl,Xl=ce}}if(gt||st){let Sl,Rl;w.ori==0?(Sl=pl,Rl=tl):(Sl=tl,Rl=pl);let zl,vl,kl,Pl,Vl,ll,hl=!0,rn=qe.bbox;if(rn!=null){hl=!1;let nl=rn(n,ce);kl=nl.left,Pl=nl.top,zl=nl.width,vl=nl.height}else kl=Sl,Pl=Rl,zl=vl=qe.size(n,ce);if(ll=qe.fill(n,ce),Vl=qe.stroke(n,ce),st)ce==Xl&&ql<=Ht.prox&&(J=kl,ee=Pl,be=zl,He=vl,Ne=hl,Ae=ll,he=Vl);else{let nl=Ge[ce];nl!=null&&(yt[ce]=kl,R[ce]=Pl,Ja(nl,zl,vl,hl),ja(nl,ll,Vl),Hl(nl,El(kl),El(Pl),ve,H))}}}}if(st){let ce=Ht.prox,rt=sn==null?ql<=ce:ql>ce||Xl!=sn;if(gt||rt){let mt=Ge[0];mt!=null&&(yt[0]=J,R[0]=ee,Ja(mt,be,He,Ne),ja(mt,Ae,he),Hl(mt,El(J),El(ee),ve,H))}}}if(it.show&&Ql)if(t!=null){let[M,F]=At.scales,[Y,J]=At.match,[ee,be]=t.cursor.sync.scales,He=t.cursor.drag;if(Bt=He._x,Gt=He._y,Bt||Gt){let{left:Ne,top:Ae,width:he,height:ce}=t.select,rt=t.scales[ee].ori,mt=t.posToVal,Nt,Ze,_t,pl,tl,Sl=M!=null&&Y(M,ee),Rl=F!=null&&J(F,be);Sl&&Bt?(rt==0?(Nt=Ne,Ze=he):(Nt=Ae,Ze=ce),_t=C[M],pl=I(mt(Nt,ee),_t,g,0),tl=I(mt(Nt+Ze,ee),_t,g,0),zn(Bl(pl,tl),Pt(tl-pl))):zn(0,g),Rl&&Gt?(rt==1?(Nt=Ne,Ze=he):(Nt=Ae,Ze=ce),_t=C[F],pl=se(mt(Nt,be),_t,b,0),tl=se(mt(Nt+Ze,be),_t,b,0),Vn(Bl(pl,tl),Pt(tl-pl))):Vn(0,b)}else Fs()}else{let M=Pt(xa-wa),F=Pt(ya-ba);if(w.ori==1){let be=M;M=F,F=be}Bt=Yt.x&&M>=Yt.dist,Gt=Yt.y&&F>=Yt.dist;let Y=Yt.uni;Y!=null?Bt&&Gt&&(Bt=M>=Y,Gt=F>=Y,!Bt&&!Gt&&(F>M?Gt=!0:Bt=!0)):Yt.x&&Yt.y&&(Bt||Gt)&&(Bt=Gt=!0);let J,ee;Bt&&(w.ori==0?(J=wn,ee=at):(J=bn,ee=ft),zn(Bl(J,ee),Pt(ee-J)),Gt||Vn(0,b)),Gt&&(w.ori==1?(J=wn,ee=at):(J=bn,ee=ft),Vn(Bl(J,ee),Pt(ee-J)),Bt||zn(0,g)),!Bt&&!Gt&&(zn(0,0),Vn(0,0))}if(Yt._x=Bt,Yt._y=Gt,t==null){if(r){if(Oa!=null){let[M,F]=At.scales;At.values[0]=M!=null?Nl(w.ori==0?at:ft,M):null,At.values[1]=F!=null?Nl(w.ori==1?at:ft,F):null}Wn(Is,n,at,ft,ve,H,o)}if(dl){let M=r&&At.setSeries,F=Ht.prox;sn==null?ql<=F&&Il(Xl,yn,!0,M):ql>F?Il(null,yn,!0,M):Xl!=sn&&Il(Xl,yn,!0,M)}}gt&&(fe.idx=o,Ds()),s!==!1&&It("setCursor")}let en=null;Object.defineProperty(n,"rect",{get(){return en==null&&Hn(!1),en}});function Hn(t=!1){t?en=null:(en=T.getBoundingClientRect(),It("syncRect",en))}function Ta(t,s,r,o,d,g,b){$._lock||Ql&&t!=null&&t.movementX==0&&t.movementY==0||(Rs(t,s,r,o,d,g,b,!1,t!=null),t!=null?an(null,!0,!0):an(s,!0,!1))}function Rs(t,s,r,o,d,g,b,M,F){if(en==null&&Hn(!1),Qt(t),t!=null)r=t.clientX-en.left,o=t.clientY-en.top;else{if(r<0||o<0){at=-10,ft=-10;return}let[Y,J]=At.scales,ee=s.cursor.sync,[be,He]=ee.values,[Ne,Ae]=ee.scales,[he,ce]=At.match,rt=s.axes[0].side%2==1,mt=w.ori==0?ve:H,Nt=w.ori==1?ve:H,Ze=rt?g:d,_t=rt?d:g,pl=rt?o:r,tl=rt?r:o;if(Ne!=null?r=he(Y,Ne)?p(be,C[Y],mt,0):-10:r=mt*(pl/Ze),Ae!=null?o=ce(J,Ae)?p(He,C[J],Nt,0):-10:o=Nt*(tl/_t),w.ori==1){let Sl=r;r=o,o=Sl}}F&&(s==null||s.cursor.event.type==Is)&&((r<=1||r>=ve-1)&&(r=on(r,ve)),(o<=1||o>=H-1)&&(o=on(o,H))),M?(wa=r,ba=o,[wn,bn]=$.move(n,r,o)):(at=r,ft=o)}const Ps={width:0,height:0,left:0,top:0};function Fs(){ns(Ps,!1)}let Ea,Ma,Aa,Ca;function La(t,s,r,o,d,g,b){Ql=!0,Bt=Gt=Yt._x=Yt._y=!1,Rs(t,s,r,o,d,g,b,!0,!1),t!=null&&(et(Ns,Us,Da,!1),Wn(za,n,wn,bn,ve,H,null));let{left:M,top:F,width:Y,height:J}=it;Ea=M,Ma=F,Aa=Y,Ca=J}function Da(t,s,r,o,d,g,b){Ql=Yt._x=Yt._y=!1,Rs(t,s,r,o,d,g,b,!1,!0);let{left:M,top:F,width:Y,height:J}=it,ee=Y>0||J>0,be=Ea!=M||Ma!=F||Aa!=Y||Ca!=J;if(ee&&be&&ns(it),Yt.setScale&&ee&&be){let He=M,Ne=Y,Ae=F,he=J;if(w.ori==1&&(He=F,Ne=J,Ae=M,he=Y),Bt&&$l(L,Nl(He,L),Nl(He+Ne,L)),Gt)for(let ce in C){let rt=C[ce];ce!=L&&rt.from==null&&rt.min!=lt&&$l(ce,Nl(Ae+he,ce),Nl(Ae,ce))}Fs()}else $.lock&&($._lock=!$._lock,an(s,!0,t!=null));t!=null&&(Jt(Ns,Us),Wn(Ns,n,at,ft,ve,H,null))}function Dr(t,s,r,o,d,g,b){if($._lock)return;Qt(t);let M=Ql;if(Ql){let F=!0,Y=!0,J=10,ee,be;w.ori==0?(ee=Bt,be=Gt):(ee=Gt,be=Bt),ee&&be&&(F=at<=J||at>=ve-J,Y=ft<=J||ft>=H-J),ee&&F&&(at=at<wn?0:ve),be&&Y&&(ft=ft<bn?0:H),an(null,!0,!0),Ql=!1}at=-10,ft=-10,ye.fill(null),an(null,!0,!0),M&&(Ql=M)}function Ra(t,s,r,o,d,g,b){$._lock||(Qt(t),Ie(),Fs(),t!=null&&Wn(Wa,n,at,ft,ve,H,null))}function Pa(){K.forEach(Qu),Cl(n.width,n.height,!0)}fn(fs,An,Pa);const Sn={};Sn.mousedown=La,Sn.mousemove=Ta,Sn.mouseup=Da,Sn.dblclick=Ra,Sn.setSeries=(t,s,r,o)=>{let d=At.match[2];r=d(n,s,r),r!=-1&&Il(r,o,!0,!1)},Be&&(et(za,T,La),et(Is,T,Ta),et(Va,T,t=>{Qt(t),Hn(!1)}),et(Ha,T,Dr),et(Wa,T,Ra),$s.add(n),n.syncRect=Hn);const ss=n.hooks=e.hooks||{};function It(t,s,r){Ms?Nn.push([t,s,r]):t in ss&&ss[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)ss[s]=(ss[s]||[]).concat(t.hooks[s])});const Fa=(t,s,r)=>r,At=Ct({key:null,setSeries:!1,filters:{pub:ei,sub:ei},scales:[L,k[1]?k[1].scale:null],match:[ti,ti,Fa],values:[null,null]},$.sync);At.match.length==2&&At.match.push(Fa),$.sync=At;const Oa=At.key,Os=nr(Oa);function Wn(t,s,r,o,d,g,b){At.filters.pub(t,s,r,o,d,g,b)&&Os.pub(t,s,r,o,d,g,b)}Os.sub(n);function Rr(t,s,r,o,d,g,b){At.filters.sub(t,s,r,o,d,g,b)&&Sn[t](null,s,r,o,d,g,b)}n.pub=Rr;function Pr(){Os.unsub(n),$s.delete(n),bt.clear(),js(fs,An,Pa),h.remove(),de?.remove(),It("destroy")}n.destroy=Pr;function Bs(){It("init",e,l),oe(l||e.data,!1),O[L]?As(L,O[L]):Ie(),bl=it.show&&(it.width>0||it.height>0),Mt=gt=!0,Cl(e.width,e.height)}return k.forEach(ie),K.forEach(je),i?i instanceof HTMLElement?(i.appendChild(h),Bs()):i(n,Bs):Bs(),n}Tt.assign=Ct;Tt.fmtNum=ra;Tt.rangeNum=ds;Tt.rangeLog=_s;Tt.rangeAsinh=aa;Tt.orient=pn;Tt.pxRatio=We;Tt.join=Ho;Tt.fmtDate=ua,Tt.tzDate=Xo;Tt.sync=nr;{Tt.addGap=Ou,Tt.clipGaps=xs;let e=Tt.paths={points:ur};e.linear=fr,e.stepped=Iu,e.bars=Nu,e.spline=Vu}var $u=Se('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=Se('<span class="estimated-badge svelte-3wi8ix">est</span>'),ec=Se('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),tc=Se('<span class="estimated-badge svelte-3wi8ix">est</span>'),lc=Se("<span> </span> <!>",1),nc=Se('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),sc=Se('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),ac=Se('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function ic(e,l){hs(l,!0);const i=.5,n=1.2,a=0,f=100;function c(w,N){const I=[...w].sort((P,Pe)=>P-Pe),se=N/100*(I.length-1),O=Math.floor(se),Q=Math.ceil(se);return O===Q?I[O]:I[O]+(I[Q]-I[O])*(se-O)}let p=Mn(l,"trend",3,null),v=Le(!1),h=Le(""),y=Le(null),m=Ce(()=>us.config.temp_units==="C"),_=Ce(Ai),q=Ce(ta),T=Ce(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(Te=>Te.status!=="invalid");if(w.length===0)return null;const N=[...w].sort((Te,vt)=>new Date(Te.timestamp).getTime()-new Date(vt.timestamp).getTime()),I=N[0],se=N[N.length-1],O=N.map(Te=>Te.sg_calibrated??Te.sg_raw).filter(Te=>Te!==null&&Te>=i&&Te<=n),Q=N.map(Te=>Te.temp_calibrated??Te.temp_raw).filter(Te=>Te!==null&&Te>=a&&Te<=f);if(O.length===0)return null;const P=O[O.length-1],Pe=O[0],_e=c(O,95),ue=c(O,5),ye=new Date(I.timestamp).getTime(),fe=new Date(se.timestamp).getTime(),Fe=(fe-ye)/(1e3*60*60*24),Be=Fe>0?(P-Pe)/Fe:0;let xe=null,de=null,$e=null,Xe=null;if(Q.length>0){const Te=Q[Q.length-1],vt=Q.reduce((et,Jt)=>et+Jt,0)/Q.length,Kt=c(Q,95),bt=c(Q,5);xe=u(m)?Te:Te*9/5+32,de=u(m)?vt:vt*9/5+32,$e=u(m)?Kt:Kt*9/5+32,Xe=u(m)?bt:bt*9/5+32}let Me=0;const wt=.001;for(let Te=O.length-2;Te>=0;Te--)if(Math.abs(O[Te]-P)>wt){const vt=new Date(N[Te+1].timestamp).getTime();Me=(fe-vt)/(1e3*60*60*24);break}let Et=null,ut=null;const dt=l.originalGravity??_e,Lt=l.originalGravity===null;return dt>1&&dt>P&&(Et=(dt-P)/(dt-1)*100,ut=(dt-P)*131.25),{currentSg:P,firstSg:Pe,highSg:_e,lowSg:ue,currentTemp:xe,avgTemp:de,highTemp:$e,lowTemp:Xe,fermRate:Be,durationDays:Fe,daysAtCurrentSg:Me,apparentAttenuation:Et,abv:ut,ogIsEstimated:Lt,effectiveOg:dt}});function z(){te(h,l.originalGravity?.toFixed(3)??"",!0),te(v,!0),setTimeout(()=>u(y)?.focus(),0)}function le(){const w=u(h).trim();if(!w)l.onOgChange?.(null);else{const N=parseFloat(w);!isNaN(N)&&N>=.99&&N<=1.2&&l.onOgChange?.(N)}te(v,!1)}function re(w){w.key==="Enter"?le():w.key==="Escape"&&te(v,!1)}function k(w){return En(w)}function K(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function C(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function B(w){return w===null?"--":w.toFixed(1)}function L(w){return w===null?"--":`${w.toFixed(1)}%`}var ae=Cn(),X=Ul(ae);{var Z=w=>{var N=sc(),I=S(N),se=S(I),O=S(se),Q=S(O,!0);x(O);var P=G(O,2),Pe=G(S(P),2),_e=S(Pe,!0);x(Pe),x(P);var ue=G(P,2),ye=G(S(ue),2),fe=S(ye,!0);x(ye),x(ue);var $=G(ue,2),Fe=G(S($),2),Be=S(Fe,!0);x(Fe),x($);var xe=G($,2),de=G(S(xe),2),$e=S(de,!0);x(de),x(xe),x(se);var Xe=G(se,2),Me=G(S(Xe),2),wt=G(S(Me),2),Et=S(wt,!0),ut=G(Et),dt=S(ut,!0);x(ut),x(wt),x(Me);var Lt=G(Me,2),Te=G(S(Lt),2),vt=S(Te,!0),Kt=G(vt),bt=S(Kt,!0);x(Kt),x(Te),x(Lt);var et=G(Lt,2),Jt=G(S(et),2),zt=S(Jt,!0),Dt=G(zt),ve=S(Dt,!0);x(Dt),x(Jt),x(et);var H=G(et,2),Ee=G(S(H),2),tt=S(Ee,!0),ol=G(tt),ul=S(ol,!0);x(ol),x(Ee),x(H),x(Xe),x(I);var Ot=G(I,2),Zt=S(Ot),pt=G(S(Zt),2);let xt;var ct=S(pt);x(pt),x(Zt);var ht=G(Zt,2),cl=G(S(ht),2),Al=S(cl,!0);x(cl),x(ht);var Vt=G(ht,2),Mt=G(S(Vt),2),bl=S(Mt,!0);x(Mt),x(Vt);var gt=G(Vt,2),Cl=G(S(gt),2);{var Jl=st=>{var Ge=$u();Ei(Ge),Ge.__keydown=re,ea(Ge,yt=>te(y,yt),()=>u(y)),Si("blur",Ge,le),Mi(Ge,()=>u(h),yt=>te(h,yt)),ge(st,Ge)},xl=st=>{var Ge=Cn(),yt=Ul(Ge);{var R=ie=>{var we=ec();we.__click=z;var ke=S(we);let Oe;var je=S(ke,!0);x(ke);var Ke=G(ke,2);{var St=E=>{var A=Xu();ge(E,A)};Je(Ke,E=>{u(T).ogIsEstimated&&E(St)})}Wl(2),x(we),Qe(E=>{Ml(we,"title",u(T).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Oe=sl(ke,1,"stat-value svelte-3wi8ix",null,Oe,{estimated:u(T).ogIsEstimated}),me(je,E)},[()=>k(u(T).effectiveOg)]),ge(ie,we)},j=ie=>{var we=lc(),ke=Ul(we);let Oe;var je=S(ke,!0);x(ke);var Ke=G(ke,2);{var St=E=>{var A=tc();ge(E,A)};Je(Ke,E=>{u(T).ogIsEstimated&&E(St)})}Qe(E=>{Oe=sl(ke,1,"stat-value svelte-3wi8ix",null,Oe,{estimated:u(T).ogIsEstimated}),me(je,E)},[()=>k(u(T).effectiveOg)]),ge(ie,we)};Je(yt,ie=>{l.onOgChange?ie(R):ie(j,!1)},!0)}ge(st,Ge)};Je(Cl,st=>{l.onOgChange&&u(v)?st(Jl):st(xl,!1)})}x(gt);var Ll=G(gt,2),Zl=G(S(Ll),2),fl=S(Zl,!0);x(Zl),x(Ll);var Gl=G(Ll,2),Qt=G(S(Gl),2),qe=S(Qt,!0);x(Qt),x(Gl);var Ht=G(Gl,2);{var dl=st=>{var Ge=nc(),yt=G(S(Ge),2),R=S(yt,!0);x(yt),Wl(2),x(Ge),Qe((j,ie)=>{Ml(Ge,"title",`Estimated time until target FG (R=${j??""})`),me(R,ie)},[()=>p().r2.toFixed(2),()=>C(p().daysToFg)]),ge(st,Ge)};Je(Ht,st=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&st(dl)})}x(Ot),x(N),Qe((st,Ge,yt,R,j,ie,we,ke,Oe,je,Ke,St,E)=>{me(Q,u(q)==="SG"?"Gravity":u(q)==="P"?"Plato":"Brix"),me(_e,st),me(fe,Ge),me(Be,yt),me($e,R),me(Et,j),me(dt,u(_)),me(vt,ie),me(bt,u(_)),me(zt,we),me(ve,u(_)),me(tt,ke),me(ul,u(_)),xt=sl(pt,1,"stat-value rate svelte-3wi8ix",null,xt,{fermenting:u(T).fermRate<0}),me(ct,`${Oe??""}/day`),me(Al,je),me(bl,Ke),me(fl,St),me(qe,E)},[()=>k(u(T).currentSg),()=>k(u(T).firstSg),()=>k(u(T).highSg),()=>k(u(T).lowSg),()=>B(u(T).currentTemp),()=>B(u(T).avgTemp),()=>B(u(T).highTemp),()=>B(u(T).lowTemp),()=>K(u(T).fermRate),()=>C(u(T).durationDays),()=>C(u(T).daysAtCurrentSg),()=>L(u(T).apparentAttenuation),()=>L(u(T).abv)]),ge(w,N)},ne=w=>{var N=ac();ge(w,N)};Je(X,w=>{u(T)?w(Z):w(ne,!1)})}ge(e,ae),gs()}vs(["keydown","click"]);var rc=Se('<button type="button"> </button>'),oc=Se("<option> </option>"),uc=Se('<button type="button"><span class="legend-dot anomaly-dot svelte-12kwequ"></span> <span> </span></button>'),cc=Se('<button type="button"><span class="legend-line legend-line-dotted svelte-12kwequ"></span> <span>Battery</span></button>'),fc=Se('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),dc=Se('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),pc=Se('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),vc=Se('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <button type="button"><span class="legend-line legend-line-dotted svelte-12kwequ"></span> <span>Ambient</span></button> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Chamber</span></button> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button> <!> <!></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function hc(e,l){hs(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Ce(()=>us.config.smoothing_enabled),f=Ce(()=>us.config.smoothing_samples),c=Le("UTC"),p=Le(0),v=Le(3),h=Mn(l,"deviceColor",3,"BLACK"),y=Mn(l,"originalGravity",3,null),m=Mn(l,"controlEvents",19,()=>[]),_=Ce(()=>us.config.temp_units==="C"),q=Ce(ta),T,z=null,le=Le(!0),re=Le(null),k=Le(24),K=Le(ln([])),C=Le(ln([])),B=Le(ln([])),L=Le(null),ae=Le(null);const X={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},Z="#facc15",ne="rgba(250, 204, 21, 0.3)",w="#71717a",N="#a1a1aa",I="rgba(255, 255, 255, 0.04)",se="#22d3ee",O="#a78bfa",Q="rgba(250, 204, 21, 0.5)",P="#ef4444",Pe="#22c55e",_e="brewsignal_chart_trend_enabled";let ue=Le(!0);const ye="brewsignal_chart_ambient_enabled",fe="brewsignal_chart_chamber_enabled",$="brewsignal_chart_anomaly_enabled",Fe="brewsignal_chart_battery_enabled";let Be=Le(!0),xe=Le(!0),de=Le(!0),$e=Le(!0),Xe=Le(!1),Me=Le(ln([])),wt=Le(ln([]));function Et(E,A,W=1.01){const V=[];for(let Re=0;Re<E.length;Re++)A[Re]!==null&&V.push([E[Re],A[Re]]);if(V.length<10)return null;const pe=V.length;let U=0,D=0,oe=0,Ie=0;for(const[Re,Ue]of V)U+=Re,D+=Ue,oe+=Re*Ue,Ie+=Re*Re;const Ve=pe*Ie-U*U;if(Math.abs(Ve)<1e-10)return null;const kt=(pe*oe-U*D)/Ve,qt=(D-kt*U)/pe,il=D/pe;let $t=0,jt=0;for(const[Re,Ue]of V){const Ut=kt*Re+qt;$t+=(Ue-Ut)**2,jt+=(Ue-il)**2}const Xt=jt>0?1-$t/jt:0;let yl=null,Wt=null;if(kt<0&&Xt>.3){const Re=E[E.length-1],Ue=(W-qt)/kt;Ue>Re&&(Wt=(Ue-Re)/(1440*60),Wt>0&&Wt<60?yl=W:Wt=null)}return{slope:kt,intercept:qt,r2:Xt,predictedFg:yl,daysToFg:Wt}}function ut(E){const A=[];let W=null,V=null;for(const U of E){const D=bt(U.timestamp);U.action==="heat_on"?W=D:U.action==="heat_off"&&W!==null?(A.push({type:"heating",startTime:W,endTime:D}),W=null):U.action==="cool_on"?V=D:U.action==="cool_off"&&V!==null&&(A.push({type:"cooling",startTime:V,endTime:D}),V=null)}const pe=Date.now()/1e3;return W!==null&&A.push({type:"heating",startTime:W,endTime:pe}),V!==null&&A.push({type:"cooling",startTime:V,endTime:pe}),A}function dt(E,A){return E.map(W=>A.slope*W+A.intercept)}function Lt(E,A,W){const V=new Date(E*1e3);try{return W?V.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:A}):V.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:A})}catch(pe){return console.warn("Invalid timezone:",A,pe),W?V.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):V.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function Te(E,A,W){const V=Z,pe=X[h()]||N;return{width:E,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[U=>{const D=U.cursor.idx;if(D==null)return;const oe=U.root.querySelector(".u-legend");oe&&(oe.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`)}]},scales:{x:{time:!0},sg:{auto:!0,range:(U,D,oe)=>{const Ie=(oe-D)*.1||.005;return[D-Ie,oe+Ie]}},temp:{auto:!0,range:(U,D,oe)=>{const Ie=oe-D,Ve=10;if(Ie<Ve){const qt=(oe+D)/2;return[qt-Ve/2,qt+Ve/2]}const kt=Ie*.1;return[D-kt,oe+kt]}},battery:{auto:!1,range:[0,105]}},axes:[{stroke:w,grid:{stroke:I,width:1},ticks:{stroke:I,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(U,D)=>D.map(oe=>Lt(oe,W,u(k)<=24))},{scale:"sg",stroke:V,grid:{stroke:I,width:1},ticks:{stroke:I,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(U,D)=>D.map(oe=>En(oe)),side:3},{scale:"temp",stroke:pe,grid:{show:!1},ticks:{stroke:I,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(U,D)=>D.map(oe=>oe.toFixed(0)+""),side:1}],series:[{value:(U,D)=>Lt(D,W,!1)+" "+Lt(D,W,!0)},{label:u(q)==="SG"?"Gravity":u(q)==="P"?"Plato":"Brix",scale:"sg",stroke:V,width:2,value:(U,D)=>D!==null?En(D):"--",fill:(U,D)=>{const oe=U.ctx.createLinearGradient(0,U.bbox.top,0,U.bbox.top+U.bbox.height);return oe.addColorStop(0,ne),oe.addColorStop(1,"transparent"),oe},points:{show:!1},paths:Tt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:pe,width:1.5,dash:[4,4],value:(U,D)=>D!==null?D.toFixed(1)+"":"--",points:{show:!1},paths:Tt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:se,width:1.5,dash:[2,4],value:(U,D)=>D!==null?D.toFixed(1)+"":"--",points:{show:!1},paths:Tt.paths.spline?.(),show:u(Be)},{label:"Chamber",scale:"temp",stroke:O,width:1.5,dash:[4,2],value:(U,D)=>D!==null?D.toFixed(1)+"":"--",points:{show:!1},paths:Tt.paths.spline?.(),show:u(xe)},{label:"Trend",scale:"sg",stroke:Q,width:2,dash:[8,4],value:(U,D)=>D!==null?En(D):"--",points:{show:!1},show:u(ue)},{label:"Anomaly",scale:"sg",stroke:P,width:0,value:(U,D)=>D!==null?En(D)+" ":"--",points:{show:!0,size:8,fill:P,stroke:"#ffffff",width:2},show:u(de)},{label:"Battery",scale:"battery",stroke:Pe,width:1.5,dash:[2,2],value:(U,D)=>D!==null?D.toFixed(0)+"%":"--",points:{show:!1},paths:Tt.paths.spline?.(),show:u($e)}]}}function vt(E,A){if(A<=1)return E;const W=[];for(let V=0;V<E.length;V++){const pe=[],U=Math.floor(A/2);for(let D=Math.max(0,V-U);D<=Math.min(E.length-1,V+U);D++){const oe=E[D];oe!==null&&pe.push(oe)}pe.length>0?W.push(pe.reduce((D,oe)=>D+oe,0)/pe.length):W.push(null)}return W}function Kt(E,A,W,V,pe,U,D){if(E.length<=D)return[E,A,W,V,pe,U];const oe=Math.ceil(E.length/D),Ie=[],Ve=[],kt=[],qt=[],il=[],$t=[];for(let jt=0;jt<E.length;jt+=oe){const Xt=Math.min(jt+oe,E.length);let yl=0,Wt=0,Re=0,Ue=0,Ut=0,rl=0,Dl=0,Yl=0,vn=0,In=0;for(let el=jt;el<Xt;el++)A[el]!==null&&(yl+=A[el],Wt++),W[el]!==null&&(Re+=W[el],Ue++),V[el]!==null&&(Ut+=V[el],rl++),pe[el]!==null&&(Dl+=pe[el],Yl++),U[el]!==null&&(vn+=U[el],In++);Ie.push(E[Math.floor((jt+Xt-1)/2)]),Ve.push(Wt>0?yl/Wt:null),kt.push(Ue>0?Re/Ue:null),qt.push(rl>0?Ut/rl:null),il.push(Yl>0?Dl/Yl:null),$t.push(In>0?vn/In:null)}return[Ie,Ve,kt,qt,il,$t]}function bt(E){return!E.endsWith("Z")&&!E.match(/[+-]\d{2}:\d{2}$/)&&(E=E+"Z"),new Date(E).getTime()/1e3}function et(E,A,W){if(E.length===0||A.length===0)return A.map(()=>null);const V=[...E].sort((D,oe)=>bt(D.timestamp)-bt(oe.timestamp)),pe=V.map(D=>bt(D.timestamp)),U=V.map(D=>D.temperature===null?null:W?D.temperature:D.temperature*9/5+32);return A.map(D=>{let oe=null,Ie=null;for(let Ve=0;Ve<pe.length;Ve++)if(pe[Ve]<=D&&(oe={time:pe[Ve],temp:U[Ve]}),pe[Ve]>=D&&Ie===null){Ie={time:pe[Ve],temp:U[Ve]};break}if(oe&&Ie&&oe.temp!==null&&Ie.temp!==null){if(oe.time===Ie.time)return oe.temp;const Ve=(D-oe.time)/(Ie.time-oe.time);return oe.temp+Ve*(Ie.temp-oe.temp)}return oe!==null&&oe.temp!==null?oe.temp:Ie!==null&&Ie.temp!==null?Ie.temp:null})}function Jt(E,A,W,V){const pe=[...E].reverse();let U=[],D=[],oe=[],Ie=[],Ve=[];const kt=[];let qt=!1;for(const Ue of pe){const Ut=bt(Ue.timestamp),rl=Ue.sg_calibrated??Ue.sg_raw;if(U.push(Ut),D.push(rl),Ue.is_anomaly&&rl!==null){Ve.push(rl);let Yl=[];if(Ue.anomaly_reasons)try{Yl=JSON.parse(Ue.anomaly_reasons)}catch{Yl=Ue.anomaly_reasons.split(",").map(vn=>vn.trim())}kt.push({timestamp:Ut,sg:rl,reasons:Yl})}else Ve.push(null);const Dl=Ue.temp_calibrated??Ue.temp_raw;Dl!==null?oe.push(V?Dl:Dl*9/5+32):oe.push(null),Ue.battery_percent!==null&&Ue.battery_percent!==void 0?(Ie.push(Ue.battery_percent),qt=!0):Ie.push(null)}te(Xe,qt,!0),te(Me,kt,!0);let il=et(A,U,V),$t=et(W,U,V);u(a)&&u(f)>1&&(D=vt(D,u(f)),oe=vt(oe,u(f)),il=vt(il,u(f)),$t=vt($t,u(f)));const jt=500,Xt=[...U],yl=[...Ve];[U,D,oe,il,$t,Ie]=Kt(U,D,oe,il,$t,Ie,jt),Ve=U.map(Ue=>{for(let Ut=0;Ut<Xt.length;Ut++)if(yl[Ut]!==null){const rl=Math.abs(Xt[Ut]-Ue),Dl=(Xt[Xt.length-1]-Xt[0])/jt;if(rl<=Dl)return yl[Ut]}return null});const Wt=Et(U,D);te(L,Wt,!0);const Re=Wt?dt(U,Wt):U.map(()=>null);return[U,D,oe,il,$t,Re,Ve,Ie]}const zt=3e4;async function Dt(E=!1){const W=Date.now()-u(p);if(!(!E&&u(p)>0&&W<zt)){te(le,!0),te(re,null);try{if(!u(ae)){const V=await Yr(l.batchId);te(ae,V.device_id??null,!0)}if(u(ae)){const[V,pe,U]=await Promise.all([qr(u(ae),u(k),l.batchId),jr(u(k)).catch(()=>[]),Kr(u(k)).catch(()=>[])]);te(K,V,!0),te(C,pe,!0),te(B,U,!0),ve()}else te(K,[],!0),te(C,[],!0),te(B,[],!0),te(re,"No device assigned to this batch")}catch(V){te(re,V instanceof Error?V.message:"Failed to load data",!0)}finally{te(p,Date.now(),!0),te(le,!1)}}}function ve(){if(!T||u(K).length===0)return;const E=Jt(u(K),u(C),u(B),u(_)),A=Te(T.clientWidth,u(_),u(c));z&&z.destroy(),z=new Tt(A,E,T)}function H(){z&&T&&z.setSize({width:T.clientWidth,height:220})}let Ee=null;function tt(){if(Ee&&(clearInterval(Ee),Ee=null),u(v)>0){const E=u(v)*60*1e3;Ee=setInterval(()=>{u(le)||Dt(!1)},E)}}ki(async()=>{const E=localStorage.getItem(i);if(E!==null){const D=parseInt(E,10);Number.isNaN(D)||te(v,D,!0)}const A=localStorage.getItem(_e);A!==null&&te(ue,A==="true");const W=localStorage.getItem(ye);W!==null&&te(Be,W==="true");const V=localStorage.getItem(fe);V!==null&&te(xe,V==="true");const pe=localStorage.getItem($);pe!==null&&te(de,pe==="true");const U=localStorage.getItem(Fe);U!==null&&te($e,U==="true");try{const D=await fetch("/api/system/timezone");if(D.ok){const oe=await D.json();te(c,oe.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await Dt(!0),window.addEventListener("resize",H),tt()}),Ir(()=>{z?.destroy(),window.removeEventListener("resize",H),Ee&&clearInterval(Ee)}),os(()=>{m()&&m().length>0?te(wt,ut(m()),!0):te(wt,[],!0)}),os(()=>{u(_)!==void 0&&u(K).length>0&&T&&ve()}),os(()=>{u(a),u(f),u(K).length>0&&T&&ve()});function ol(E){const A=Number(E.target.value);te(v,A,!0),localStorage.setItem(i,String(A)),tt(),Dt(!0)}function ul(){te(ue,!u(ue)),localStorage.setItem(_e,String(u(ue))),z&&z.setSeries(5,{show:u(ue)})}function Ot(){te(Be,!u(Be)),localStorage.setItem(ye,String(u(Be))),z&&z.setSeries(3,{show:u(Be)})}function Zt(){te(xe,!u(xe)),localStorage.setItem(fe,String(u(xe))),z&&z.setSeries(4,{show:u(xe)})}function pt(){te(de,!u(de)),localStorage.setItem($,String(u(de))),z&&z.setSeries(6,{show:u(de)})}function xt(){te($e,!u($e)),localStorage.setItem(Fe,String(u($e))),z&&z.setSeries(7,{show:u($e)})}var ct=vc(),ht=S(ct),cl=S(ht);Ln(cl,21,()=>Ur,$n,(E,A)=>{var W=rc();let V;W.__click=()=>{u(k)!==u(A).hours&&(te(k,u(A).hours,!0),Dt(!0))};var pe=S(W,!0);x(W),Qe(()=>{V=sl(W,1,"range-btn svelte-12kwequ",null,V,{active:u(k)===u(A).hours}),me(pe,u(A).label)}),ge(E,W)}),x(cl);var Al=G(cl,2),Vt=S(Al),Mt=G(S(Vt),2);Mt.__change=ol,Ln(Mt,21,()=>n,$n,(E,A)=>{var W=oc(),V=S(W,!0);x(W);var pe={};Qe(()=>{me(V,u(A).label),pe!==(pe=u(A).value)&&(W.value=(W.__value=u(A).value)??"")}),ge(E,W)}),x(Mt);var bl;Xr(Mt),x(Vt);var gt=G(Vt,2),Cl=G(S(gt),2),Jl=S(Cl);Wl(2),x(Cl);var xl=G(Cl,2);let Ll;xl.__click=Ot;var Zl=S(xl);ml(Zl,"background: #22d3ee;"),Wl(2),x(xl);var fl=G(xl,2);let Gl;fl.__click=Zt;var Qt=S(fl);ml(Qt,"background: #a78bfa;"),Wl(2),x(fl);var qe=G(fl,2);let Ht;qe.__click=ul;var dl=S(qe);ml(dl,"background: rgba(250, 204, 21, 0.5);"),Wl(2),x(qe);var st=G(qe,2);{var Ge=E=>{var A=uc();let W;A.__click=pt;var V=S(A);ml(V,"background: #ef4444;");var pe=G(V,2),U=S(pe);x(pe),x(A),Qe(()=>{W=sl(A,1,"legend-item legend-toggle anomaly-toggle svelte-12kwequ",null,W,{"legend-disabled":!u(de)}),Ml(A,"title",u(de)?"Hide anomaly markers":"Show anomaly markers"),me(U,`Anomalies (${u(Me).length??""})`)}),ge(E,A)};Je(st,E=>{u(Me).length>0&&E(Ge)})}var yt=G(st,2);{var R=E=>{var A=cc();let W;A.__click=xt;var V=S(A);ml(V,"background: #22c55e;"),Wl(2),x(A),Qe(()=>{W=sl(A,1,"legend-item legend-toggle svelte-12kwequ",null,W,{"legend-disabled":!u($e)}),Ml(A,"title",u($e)?"Hide battery level":"Show battery level")}),ge(E,A)};Je(yt,E=>{u(Xe)&&E(R)})}x(gt),x(Al),x(ht);var j=G(ht,2),ie=S(j);{var we=E=>{var A=fc();ge(E,A)};Je(ie,E=>{u(le)&&E(we)})}var ke=G(ie,2);{var Oe=E=>{var A=dc(),W=G(S(A),2);W.__click=()=>Dt(!0),x(A),ge(E,A)},je=E=>{var A=Cn(),W=Ul(A);{var V=pe=>{var U=pc();ge(pe,U)};Je(W,pe=>{u(K).length===0&&pe(V)},!0)}ge(E,A)};Je(ke,E=>{u(re)?E(Oe):E(je,!1)})}x(j),ea(j,E=>T=E,()=>T);var Ke=G(j,2);{var St=E=>{{let A=Ce(()=>u(L)?{predictedFg:u(L).predictedFg,daysToFg:u(L).daysToFg,r2:u(L).r2}:null);ic(E,{get readings(){return u(K)},get originalGravity(){return y()},get trend(){return u(A)}})}};Je(Ke,E=>{u(K).length>0&&E(St)})}x(ct),Qe(()=>{bl!==(bl=u(v))&&(Mt.value=(Mt.__value=u(v))??"",eo(Mt,u(v))),ml(Jl,`background: ${(X[h()]||"var(--text-secondary)")??""};`),Ll=sl(xl,1,"legend-item legend-toggle svelte-12kwequ",null,Ll,{"legend-disabled":!u(Be)}),Ml(xl,"title",u(Be)?"Hide ambient temp":"Show ambient temp"),Gl=sl(fl,1,"legend-item legend-toggle svelte-12kwequ",null,Gl,{"legend-disabled":!u(xe)}),Ml(fl,"title",u(xe)?"Hide chamber temp":"Show chamber temp"),Ht=sl(qe,1,"legend-item legend-toggle svelte-12kwequ",null,Ht,{"legend-disabled":!u(ue)}),Ml(qe,"title",u(ue)?"Hide trend line":"Show trend line")}),ge(e,ct),gs()}vs(["click","change"]);var gc=Se('<span class="error-message svelte-1k5rb4o"> </span>'),mc=Se('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),_c=Se('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),wc=Se('<div class="w-1 rounded-sm transition-all"></div>'),bc=Se('<div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div>'),xc=Se('<div class="flex flex-col items-end gap-1"><div class="battery-icon svelte-1k5rb4o"><div class="battery-level svelte-1k5rb4o"></div></div> <span class="text-[10px] font-mono"> </span></div>'),yc=Se('<div class="confidence-badge svelte-1k5rb4o"><span class="text-xs"> </span> <span class="text-[10px]"> </span></div>'),Sc=Se('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),kc=Se("<li> </li>"),Tc=Se('<div class="anomaly-alert svelte-1k5rb4o"><div class="flex items-start gap-2"><svg class="w-5 h-5 flex-shrink-0 mt-0.5 svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="flex-1"><p class="font-semibold text-sm mb-1">Anomaly Detected</p> <ul class="text-xs space-y-0.5 svelte-1k5rb4o"></ul></div></div></div>'),Ec=Se(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),Mc=Se('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),Ac=Se('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Cc=Se("<div><!></div>"),Lc=Se('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Dc=Se('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><!> <!> <!></div></div> <!> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function Rc(e,l){hs(l,!0);let i=Mn(l,"expanded",3,!1),n=Mn(l,"wide",3,!1),a=Ce(()=>l.batch.device_id?Ti.tilts.get(l.batch.device_id)??null:null),f=Ce(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),c=Ce(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=Ce(()=>l.progress?.temperature?.current??null),v=Ce(()=>u(a)?.color??"BLACK"),h=Ce(()=>u(a)?.rssi??null),y=Ce(()=>u(a)?.battery_percent??null),m=Ce(()=>u(a)?.device_type??null),_=Ce(()=>u(m)==="tilt"||u(m)===null),q=Ce(()=>u(a)?.paired??!0),T=Ce(()=>u(a)?.last_seen??new Date().toISOString()),z=Ce(()=>u(a)?.sg_raw??u(c)),le=Ce(()=>u(a)?.temp_raw??u(p)),re=Ce(()=>u(a)?.confidence??null),k=Ce(()=>u(a)?.is_anomaly??!1),K=Ce(()=>u(a)?.anomaly_reasons??[]),C=Ce(()=>$(u(re))),B=Le(!1),L=Le(ln([])),ae=Le(!1);os(()=>{i()&&!u(B)&&(te(B,!0),u(ae)||Jr(l.batch.id,168).then(R=>{te(L,R,!0),te(ae,!0)}).catch(R=>{console.error("Failed to fetch control events:",R),te(L,[],!0),te(ae,!0)}))});let X=Le(!1),Z=Le(""),ne=Le(null),w=Le(!1),N=Le(null);function I(){te(Z,u(f),!0),te(X,!0),te(N,null),setTimeout(()=>u(ne)?.focus(),0)}async function se(){if(u(w))return;const R=u(Z).trim();if(!R||R===u(f)){te(X,!1),te(N,null);return}te(w,!0),te(N,null);try{await Zr(l.batch.id,{name:R}),te(X,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(j){console.error("Failed to update batch name:",j),te(N,j instanceof Error?j.message:"Failed to save batch name",!0)}finally{te(w,!1)}}function O(R){R.key==="Enter"?se():R.key==="Escape"&&te(X,!1)}let Q=Ce(Ai),P=Ce(ta);const Pe={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function _e(R){return En(R)}function ue(R){return Wr(R)}function ye(R){return R>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:R>=-60?{bars:3,color:"var(--positive)",label:"Good"}:R>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function fe(R){return R>=80?{color:"var(--positive)",label:"Good"}:R>=40?{color:"var(--warning)",label:"Medium"}:R>=20?{color:"var(--warning)",label:"Low"}:{color:"var(--negative)",label:"Critical"}}function $(R){return R==null?null:R>=.8?{emoji:"",label:"High",color:"var(--positive)"}:R>=.5?{emoji:"",label:"Medium",color:"var(--warning)"}:{emoji:"",label:"Low",color:"var(--negative)"}}function Fe(R){const j=Math.floor((Date.now()-new Date(R).getTime())/1e3);if(j<10)return"just now";if(j<60)return`${j}s ago`;const ie=Math.floor(j/60);if(ie<60)return`${ie}m ago`;const we=Math.floor(ie/60);return we<24?`${we}h ago`:`${Math.floor(we/24)}d ago`}let Be=Ce(()=>Pe[u(v)]||"var(--tilt-black)"),xe=Ce(()=>u(h)!==null?ye(u(h)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),de=Ce(()=>u(y)!==null?fe(u(y)):null),$e=Ce(()=>Fe(u(T)));var Xe=Dc();let Me;var wt=S(Xe),Et=G(wt,2),ut=S(Et),dt=S(ut),Lt=S(dt);{var Te=R=>{var j=mc(),ie=S(j);Ei(ie),ie.__keydown=O;let we;ea(ie,je=>te(ne,je),()=>u(ne));var ke=G(ie,2);{var Oe=je=>{var Ke=gc(),St=S(Ke,!0);x(Ke),Qe(()=>me(St,u(N))),ge(je,Ke)};Je(ke,je=>{u(N)&&je(Oe)})}x(j),Qe(()=>{ie.disabled=u(w),we=sl(ie,1,"beer-name-input svelte-1k5rb4o",null,we,{error:u(N)})}),Si("blur",ie,se),Mi(ie,()=>u(Z),je=>te(Z,je)),ge(R,j)},vt=R=>{var j=_c();j.__click=I;var ie=S(j),we=S(ie,!0);x(ie),Wl(2),x(j),Qe(()=>me(we,u(f))),ge(R,j)};Je(Lt,R=>{u(X)?R(Te):R(vt,!1)})}var Kt=G(Lt,2),bt=S(Kt),et=G(bt,2),Jt=S(et,!0);x(et),x(Kt),x(dt);var zt=G(dt,2),Dt=S(zt);{var ve=R=>{var j=bc(),ie=S(j);Ln(ie,20,()=>Array(4),$n,(Oe,je,Ke)=>{var St=wc();Qe(()=>ml(St,`
										height: ${8+Ke*4}px;
										background: ${(Ke<u(xe).bars?u(xe).color:"var(--bg-hover)")??""};
										opacity: ${Ke<u(xe).bars?1:.4};
									`)),ge(Oe,St)}),x(ie);var we=G(ie,2),ke=S(we);x(we),x(j),Qe(()=>{Ml(j,"title",`${u(xe).label??""} signal (${u(h)??""} dBm)`),me(ke,`${u(h)??""} dBm`)}),ge(R,j)},H=R=>{var j=Cn(),ie=Ul(j);{var we=ke=>{var Oe=xc(),je=S(Oe),Ke=S(je);x(je);var St=G(je,2),E=S(St);x(St),x(Oe),Qe(()=>{Ml(Oe,"title",`Battery: ${u(de).label??""} (${u(y)??""}%)`),ml(je,`border-color: ${u(de).color??""};`),ml(Ke,`width: ${u(y)??""}%; background: ${u(de).color??""};`),ml(St,`color: ${u(de).color??""};`),me(E,`${u(y)??""}%`)}),ge(ke,Oe)};Je(ie,ke=>{u(de)&&u(y)!==null&&ke(we)},!0)}ge(R,j)};Je(Dt,R=>{u(_)&&u(h)!==null?R(ve):R(H,!1)})}var Ee=G(Dt,2);{var tt=R=>{var j=yc(),ie=S(j),we=S(ie,!0);x(ie);var ke=G(ie,2),Oe=S(ke,!0);x(ke),x(j),Qe(je=>{Ml(j,"title",`ML confidence: ${u(C).label??""} (${je??""}%)`),me(we,u(C).emoji),ml(ke,`color: ${u(C).color??""};`),me(Oe,u(C).label)},[()=>(u(re)*100).toFixed(0)]),ge(R,j)};Je(Ee,R=>{u(C)&&R(tt)})}var ol=G(Ee,2);{var ul=R=>{var j=Sc();ge(R,j)};Je(ol,R=>{u(q)||R(ul)})}x(zt),x(ut);var Ot=G(ut,2);{var Zt=R=>{var j=Tc(),ie=S(j),we=G(S(ie),2),ke=G(S(we),2);Ln(ke,21,()=>u(K),$n,(Oe,je)=>{var Ke=kc(),St=S(Ke);x(Ke),Qe(()=>me(St,` ${u(je)??""}`)),ge(Oe,Ke)}),x(ke),x(we),x(ie),x(j),ge(R,j)};Je(Ot,R=>{u(k)&&u(K).length>0&&R(Zt)})}var pt=G(Ot,2),xt=S(pt),ct=S(xt),ht=S(ct,!0),cl=G(ht),Al=S(cl,!0);x(cl),x(ct);var Vt=G(ct,2),Mt=S(Vt,!0);x(Vt),x(xt);var bl=G(xt,2),gt=S(bl),Cl=S(gt);{var Jl=R=>{var j=Ec(),ie=Ul(j,!0),we=G(ie),ke=S(we,!0);x(we),Qe(Oe=>{me(ie,Oe),me(ke,u(Q))},[()=>ue(u(p))]),ge(R,j)},xl=R=>{var j=Mc(),ie=G(Ul(j)),we=S(ie,!0);x(ie),Qe(()=>me(we,u(Q))),ge(R,j)};Je(Cl,R=>{u(p)!==null?R(Jl):R(xl,!1)})}x(gt),Wl(2),x(bl),x(pt);var Ll=G(pt,2);{var Zl=R=>{var j=Ac(),ie=G(S(j),2),we=S(ie,!0);x(ie);var ke=G(ie,4),Oe=S(ke);x(ke),x(j),Qe((je,Ke)=>{me(we,je),me(Oe,`${Ke??""}${u(Q)??""}`)},[()=>_e(u(z)),()=>u(le)!==null?ue(u(le)):"--"]),ge(R,j)};Je(Ll,R=>{(u(c)!==u(z)||u(p)!==u(le))&&u(a)&&R(Zl)})}var fl=G(Ll,2);{var Gl=R=>{var j=Cc();let ie;var we=S(j);to(we,()=>l.batch.id,ke=>{hc(ke,{get batchId(){return l.batch.id},get deviceColor(){return u(v)},get originalGravity(){return l.batch.measured_og},get controlEvents(){return u(L)}})}),x(j),Qe(()=>ie=sl(j,1,"chart-section svelte-1k5rb4o",null,ie,{hidden:!i()})),ge(R,j)};Je(fl,R=>{u(B)&&R(Gl)})}var Qt=G(fl,2),qe=S(Qt),Ht=S(qe);x(qe);var dl=G(qe,2),st=S(dl),Ge=G(st,2);{var yt=R=>{var j=Lc();j.__click=function(...ke){l.onToggleExpand?.apply(this,ke)};var ie=S(j);let we;x(j),Qe(()=>{Ml(j,"aria-label",i()?"Collapse chart":"Expand chart"),we=sl(ie,0,"w-4 h-4 transition-transform",null,we,{"rotate-180":i()})}),ge(R,j)};Je(Ge,R=>{l.onToggleExpand&&R(yt)})}Wl(2),x(dl),x(Qt),x(Et),x(Xe),Qe(R=>{Me=sl(Xe,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,Me,{expanded:i(),wide:n()}),ml(wt,`background: ${u(Be)??""};`),ml(bt,`background: ${u(Be)??""};`),me(Jt,u(v)),me(ht,R),me(Al,u(P)!=="SG"?u(P):""),me(Mt,u(P)==="SG"?"Gravity":u(P)==="P"?"Plato":"Brix"),me(Ht,`Updated ${u($e)??""}`),Ml(st,"href",`/batches/${l.batch.id??""}`)},[()=>_e(u(c))]),ge(e,Xe),gs()}vs(["keydown","click"]);var Pc=Se('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Fc=Se('<div class="alerts-list svelte-1uha8ag"></div>'),Oc=Se('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Bc=Se('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Gc=Se('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Ic=Se('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Nc=Se('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),zc=Se("<div></div>"),Vc=Se("<!> <!>",1);function sf(e,l){hs(l,!0);let i=Le(!1),n=Le(!1),a=Le(ln([])),f=Le(ln(new Map)),c=Le(!0),p=Le(null);ki(async()=>{const B=localStorage.getItem("brewsignal_alerts_dismissed"),L=localStorage.getItem("brewsignal_alerts_dismissed_time");B==="true"&&L&&Date.now()-parseInt(L,10)<360*60*1e3&&te(i,!0),await v()});async function v(){te(c,!0),te(p,null);try{const B=await Qr();te(a,B.filter(Z=>Z.status==="fermenting"||Z.status==="conditioning"),!0);const L=u(a).map(async Z=>{try{const ne=await $r(Z.id);return[Z.id,ne]}catch{return null}}),ae=await Promise.all(L),X=new Map;for(const Z of ae)Z&&X.set(Z[0],Z[1]);te(f,X,!0)}catch(B){te(p,B instanceof Error?B.message:"Failed to load batches",!0)}finally{te(c,!1)}}let h=Ce(()=>new Map(u(a).filter(B=>B.device_id&&(B.status==="fermenting"||B.status==="conditioning")).map(B=>[B.device_id,B.id]))),y=Ce(()=>{const B=new Map(u(f));for(const[L,ae]of u(h)){const X=Ti.tilts.get(L);if(X){const Z=B.get(ae)||{batch_id:ae,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}},ne=X.sg,w=X.temp;B.set(ae,{...Z,measured:{...Z.measured,current_sg:ne},temperature:{...Z.temperature,current:w,status:Z.temperature.yeast_min!==void 0&&Z.temperature.yeast_max!==void 0?w<Z.temperature.yeast_min?"too_cold":w>Z.temperature.yeast_max?"too_hot":"in_range":Z.temperature.status}})}}return B}),m=Le(null);function _(B){te(m,u(m)===B?null:B,!0)}function q(){te(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function T(){te(n,!u(n))}var z=Vc();Hr("1uha8ag",B=>{Nr(()=>{zr.title="Dashboard | BrewSignal"})});var le=Ul(z);{var re=B=>{var L=Bc(),ae=S(L),X=S(ae),Z=G(S(X),4),ne=S(Z,!0);x(Z),x(X);var w=G(X,2);w.__click=q,x(ae);var N=G(ae,2);{var I=Q=>{var P=Fc();Ln(P,21,()=>Un.alerts,$n,(Pe,_e)=>{var ue=Pc();let ye;var fe=S(ue),$=S(fe);x(fe);var Fe=G(fe,2),Be=S(Fe,!0);x(Fe),x(ue),Qe(()=>{ye=sl(ue,1,"alert-item svelte-1uha8ag",null,ye,{warning:u(_e).level==="warning",critical:u(_e).level==="critical"}),me($,`${u(_e).day??""}:`),me(Be,u(_e).message)}),ge(Pe,ue)}),x(P),ge(Q,P)};Je(N,Q=>{u(n)||Q(I)})}var se=G(N,2);{var O=Q=>{var P=Oc();P.__click=T;var Pe=S(P,!0);x(P),Qe(()=>me(Pe,u(n)?`Show ${Un.alerts.length} alerts`:"Show less")),ge(Q,P)};Je(se,Q=>{Un.alerts.length>3&&Q(O)})}x(L),Qe(()=>me(ne,Un.alerts.length)),ge(B,L)};Je(le,B=>{Un.alerts.length>0&&!u(i)&&B(re)})}var k=G(le,2);{var K=B=>{var L=Gc();ge(B,L)},C=B=>{var L=Cn(),ae=Ul(L);{var X=ne=>{var w=Ic(),N=G(S(w),4),I=S(N,!0);x(N),x(w),Qe(()=>me(I,u(p))),ge(ne,w)},Z=ne=>{var w=Cn(),N=Ul(w);{var I=O=>{var Q=Nc();ge(O,Q)},se=O=>{var Q=zc();let P;Ln(Q,21,()=>u(a),Pe=>Pe.id,(Pe,_e)=>{{let ue=Ce(()=>u(y).get(u(_e).id)),ye=Ce(()=>u(m)===u(_e).id),fe=Ce(()=>u(a).length===1);Rc(Pe,{get batch(){return u(_e)},get progress(){return u(ue)},get expanded(){return u(ye)},get wide(){return u(fe)},onToggleExpand:()=>_(u(_e).id),onBatchUpdated:v})}}),x(Q),Qe(()=>P=sl(Q,1,"tilt-grid svelte-1uha8ag",null,P,{"single-tilt":u(a).length===1})),ge(O,Q)};Je(N,O=>{u(a).length===0?O(I):O(se,!1)},!0)}ge(ne,w)};Je(ae,ne=>{u(p)?ne(X):ne(Z,!1)},!0)}ge(B,L)};Je(k,B=>{u(c)?B(K):B(C,!1)})}ge(e,z),gs()}vs(["click"]);export{sf as component};
