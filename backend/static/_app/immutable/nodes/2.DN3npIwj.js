import{d as bs,c as ls,a as Ce,f as Fe,s as ye,e as Ei}from"../chunks/BQ88CgEU.js";import{o as Or,R as Nr,b7 as Gr,b as Ir,ah as xs,ar as Vl,c as f,ai as Ke,aj as ys,al as M,an as T,ak as G,ao as Pe,as as bt,s as X,at as Cl,p as Zl,ap as Mi,aL as zr,aq as Jn,e as Br,am as Vr}from"../chunks/CGXqq0_G.js";import{e as ns,i as ms}from"../chunks/payu-7ZH.js";import{B as Hr,i as ht}from"../chunks/ziKwUJ4R.js";import{h as Wr}from"../chunks/BP8qDDK3.js";import{s as Ll}from"../chunks/DqcjHxzZ.js";import{t as Ai}from"../chunks/DThvY6M2.js";import{w as Yn}from"../chunks/BwsdUUZq.js";import{r as yn,s as kn}from"../chunks/D2zVhfuI.js";import{s as $n}from"../chunks/BSw_pJTS.js";import{b as Ci,a as us}from"../chunks/D6uZGgMj.js";import{b as aa}from"../chunks/C39ACuyu.js";import{p as Tn}from"../chunks/B3wItnqC.js";import{c as hs,d as Sn,b as ia,g as Di,e as Ur}from"../chunks/Dq6yox8V.js";import{T as qr,o as Yr,q as Kr,s as jr,t as Jr,u as Zr,v as Qr,w as Xr,g as $r}from"../chunks/B9N6dDoA.js";import{i as eo,s as to}from"../chunks/C5J5lxM1.js";function lo(e,l,a){Or&&Nr();var n=new Hr(e),i=!Gr();Ir(()=>{var u=l();i&&u!==null&&typeof u=="object"&&(u={}),n.ensure(u,a)})}const no=!0,Gt="u-",so="uplot",ao=Gt+"hz",io=Gt+"vt",ro=Gt+"title",oo=Gt+"wrap",co=Gt+"under",uo=Gt+"over",fo=Gt+"axis",sn=Gt+"off",po=Gt+"select",ho=Gt+"cursor-x",vo=Gt+"cursor-y",mo=Gt+"cursor-pt",go=Gt+"legend",_o=Gt+"live",wo=Gt+"inline",bo=Gt+"series",xo=Gt+"marker",Ba=Gt+"label",yo=Gt+"value",Zn="width",Qn="height",Kn="top",Va="bottom",bn="left",Hs="right",ra="#000",Ha=ra+"0",Ws="mousemove",Wa="mousedown",Us="mouseup",Ua="mouseenter",qa="mouseleave",Ya="dblclick",So="resize",ko="scroll",Ka="change",gs="dppxchange",oa="--",Ln=typeof window<"u",Js=Ln?document:null,En=Ln?window:null,To=Ln?navigator:null;let We,fs;function Zs(){let e=devicePixelRatio;We!=e&&(We=e,fs&&Xs(Ka,fs,Zs),fs=matchMedia(`(min-resolution: ${We-.001}dppx) and (max-resolution: ${We+.001}dppx)`),an(Ka,fs,Zs),En.dispatchEvent(new CustomEvent(gs)))}function hl(e,l){if(l!=null){let a=e.classList;!a.contains(l)&&a.add(l)}}function Qs(e,l){let a=e.classList;a.contains(l)&&a.remove(l)}function rt(e,l,a){e.style[l]=a+"px"}function Ml(e,l,a,n){let i=Js.createElement(e);return l!=null&&hl(i,l),a?.insertBefore(i,n),i}function xl(e,l){return Ml("div",e,l)}const ja=new WeakMap;function Il(e,l,a,n,i){let u="translate("+l+"px,"+a+"px)",c=ja.get(e);u!=c&&(e.style.transform=u,ja.set(e,u),l<0||a<0||l>n||a>i?hl(e,sn):Qs(e,sn))}const Ja=new WeakMap;function Za(e,l,a){let n=l+a,i=Ja.get(e);n!=i&&(Ja.set(e,n),e.style.background=l,e.style.borderColor=a)}const Qa=new WeakMap;function Xa(e,l,a,n){let i=l+""+a,u=Qa.get(e);i!=u&&(Qa.set(e,i),e.style.height=a+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-a/2+"px":0)}const ca={passive:!0},Eo={...ca,capture:!0};function an(e,l,a,n){l.addEventListener(e,a,n?Eo:ca)}function Xs(e,l,a,n){l.removeEventListener(e,a,ca)}Ln&&Zs();function Al(e,l,a,n){let i;a=a||0,n=n||l.length-1;let u=n<=2147483647;for(;n-a>1;)i=u?a+n>>1:vl((a+n)/2),l[i]<e?a=i:n=i;return e-l[a]<=l[n]-e?a:n}function Li(e){return(a,n,i)=>{let u=-1,c=-1;for(let p=n;p<=i;p++)if(e(a[p])){u=p;break}for(let p=i;p>=n;p--)if(e(a[p])){c=p;break}return[u,c]}}const Pi=e=>e!=null,Ri=e=>e!=null&&e>0,Ss=Li(Pi),Mo=Li(Ri);function Ao(e,l,a,n=0,i=!1){let u=i?Mo:Ss,c=i?Ri:Pi;[l,a]=u(e,l,a);let p=e[l],h=e[l];if(l>-1)if(n==1)p=e[l],h=e[a];else if(n==-1)p=e[a],h=e[l];else for(let v=l;v<=a;v++){let k=e[v];c(k)&&(k<p?p=k:k>h&&(h=k))}return[p??$e,h??-$e]}function ks(e,l,a,n){let i=ti(e),u=ti(l);e==l&&(i==-1?(e*=a,l/=a):(e/=a,l*=a));let c=a==10?Hl:Fi,p=i==1?vl:yl,h=u==1?yl:vl,v=p(c(Nt(e))),k=h(c(Nt(l))),g=Mn(a,v),_=Mn(a,k);return a==10&&(v<0&&(g=et(g,-v)),k<0&&(_=et(_,-k))),n||a==2?(e=g*i,l=_*u):(e=Ii(e,g),l=Ts(l,_)),[e,l]}function ua(e,l,a,n){let i=ks(e,l,a,n);return e==0&&(i[0]=0),l==0&&(i[1]=0),i}const fa=.1,$a={mode:3,pad:fa},es={pad:0,soft:null,mode:0},Co={min:es,max:es};function _s(e,l,a,n){return Es(a)?ei(e,l,a):(es.pad=a,es.soft=n?0:null,es.mode=n?3:0,ei(e,l,Co))}function Ie(e,l){return e??l}function Do(e,l,a){for(l=Ie(l,0),a=Ie(a,e.length-1);l<=a;){if(e[l]!=null)return!0;l++}return!1}function ei(e,l,a){let n=a.min,i=a.max,u=Ie(n.pad,0),c=Ie(i.pad,0),p=Ie(n.hard,-$e),h=Ie(i.hard,$e),v=Ie(n.soft,$e),k=Ie(i.soft,-$e),g=Ie(n.mode,0),_=Ie(i.mode,0),V=l-e,S=Hl(V),H=sl(Nt(e),Nt(l)),$=Hl(H),re=Nt($-S);(V<1e-24||re>10)&&(V=0,(e==0||l==0)&&(V=1e-24,g==2&&v!=$e&&(u=0),_==2&&k!=-$e&&(c=0)));let y=V||H||1e3,W=Hl(y),A=Mn(10,vl(W)),D=y*(V==0?e==0?.1:1:u),C=et(Ii(e-D,A/10),24),ae=e>=v&&(g==1||g==3&&C<=v||g==2&&C>=v)?v:$e,ee=sl(p,C<ae&&e>=ae?ae:Dl(ae,C)),J=y*(V==0?l==0?.1:1:c),le=et(Ts(l+J,A/10),24),b=l<=k&&(_==1||_==3&&le>=k||_==2&&le<=k)?k:-$e,z=Dl(h,le>b&&l<=b?b:sl(b,le));return ee==z&&ee==0&&(z=100),[ee,z]}const Lo=new Intl.NumberFormat(Ln?To.language:"en-US"),da=e=>Lo.format(e),ml=Math,vs=ml.PI,Nt=ml.abs,vl=ml.floor,Ot=ml.round,yl=ml.ceil,Dl=ml.min,sl=ml.max,Mn=ml.pow,ti=ml.sign,Hl=ml.log10,Fi=ml.log2,Po=(e,l=1)=>ml.sinh(e)*l,qs=(e,l=1)=>ml.asinh(e/l),$e=1/0;function li(e){return(Hl((e^e>>31)-(e>>31))|0)+1}function $s(e,l,a){return Dl(sl(e,l),a)}function Oi(e){return typeof e=="function"}function Le(e){return Oi(e)?e:()=>e}const Ro=()=>{},Ni=e=>e,Gi=(e,l)=>l,Fo=e=>null,ni=e=>!0,si=(e,l)=>e==l,Oo=/\.\d*?(?=9{6,}|0{6,})/gm,rn=e=>{if(Bi(e)||Ql.has(e))return e;const l=`${e}`,a=l.match(Oo);if(a==null)return e;let n=a[0].length-1;if(l.indexOf("e-")!=-1){let[i,u]=l.split("e");return+`${rn(i)}e${u}`}return et(e,n)};function ln(e,l){return rn(et(rn(e/l))*l)}function Ts(e,l){return rn(yl(rn(e/l))*l)}function Ii(e,l){return rn(vl(rn(e/l))*l)}function et(e,l=0){if(Bi(e))return e;let a=10**l,n=e*a*(1+Number.EPSILON);return Ot(n)/a}const Ql=new Map;function zi(e){return((""+e).split(".")[1]||"").length}function ss(e,l,a,n){let i=[],u=n.map(zi);for(let c=l;c<a;c++){let p=Nt(c),h=et(Mn(e,c),p);for(let v=0;v<n.length;v++){let k=e==10?+`${n[v]}e${c}`:n[v]*h,g=(c>=0?0:p)+(c>=u[v]?0:u[v]),_=e==10?k:et(k,g);i.push(_),Ql.set(_,g)}}return i}const ts={},pa=[],An=[null,null],Jl=Array.isArray,Bi=Number.isInteger,No=e=>e===void 0;function ai(e){return typeof e=="string"}function Es(e){let l=!1;if(e!=null){let a=e.constructor;l=a==null||a==Object}return l}function Go(e){return e!=null&&typeof e=="object"}const Io=Object.getPrototypeOf(Uint8Array),Vi="__proto__";function Cn(e,l=Es){let a;if(Jl(e)){let n=e.find(i=>i!=null);if(Jl(n)||l(n)){a=Array(e.length);for(let i=0;i<e.length;i++)a[i]=Cn(e[i],l)}else a=e.slice()}else if(e instanceof Io)a=e.slice();else if(l(e)){a={};for(let n in e)n!=Vi&&(a[n]=Cn(e[n],l))}else a=e;return a}function Dt(e){let l=arguments;for(let a=1;a<l.length;a++){let n=l[a];for(let i in n)i!=Vi&&(Es(e[i])?Dt(e[i],Cn(n[i])):e[i]=Cn(n[i]))}return e}const zo=0,Bo=1,Vo=2;function Ho(e,l,a){for(let n=0,i,u=-1;n<l.length;n++){let c=l[n];if(c>u){for(i=c-1;i>=0&&e[i]==null;)e[i--]=null;for(i=c+1;i<a&&e[i]==null;)e[u=i++]=null}}}function Wo(e,l){if(Yo(e)){let c=e[0].slice();for(let p=1;p<e.length;p++)c.push(...e[p].slice(1));return Ko(c[0])||(c=qo(c)),c}let a=new Set;for(let c=0;c<e.length;c++){let h=e[c][0],v=h.length;for(let k=0;k<v;k++)a.add(h[k])}let n=[Array.from(a).sort((c,p)=>c-p)],i=n[0].length,u=new Map;for(let c=0;c<i;c++)u.set(n[0][c],c);for(let c=0;c<e.length;c++){let p=e[c],h=p[0];for(let v=1;v<p.length;v++){let k=p[v],g=Array(i).fill(void 0),_=l?l[c][v]:Bo,V=[];for(let S=0;S<k.length;S++){let H=k[S],$=u.get(h[S]);H===null?_!=zo&&(g[$]=H,_==Vo&&V.push($)):g[$]=H}Ho(g,V,i),n.push(g)}}return n}const Uo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function qo(e){let l=e[0],a=l.length,n=Array(a);for(let u=0;u<n.length;u++)n[u]=u;n.sort((u,c)=>l[u]-l[c]);let i=[];for(let u=0;u<e.length;u++){let c=e[u],p=Array(a);for(let h=0;h<a;h++)p[h]=c[n[h]];i.push(p)}return i}function Yo(e){let l=e[0][0],a=l.length;for(let n=1;n<e.length;n++){let i=e[n][0];if(i.length!=a)return!1;if(i!=l){for(let u=0;u<a;u++)if(i[u]!=l[u])return!1}}return!0}function Ko(e,l=100){const a=e.length;if(a<=1)return!0;let n=0,i=a-1;for(;n<=i&&e[n]==null;)n++;for(;i>=n&&e[i]==null;)i--;if(i<=n)return!0;const u=sl(1,vl((i-n+1)/l));for(let c=e[n],p=n+u;p<=i;p+=u){const h=e[p];if(h!=null){if(h<=c)return!1;c=h}}return!0}const Hi=["January","February","March","April","May","June","July","August","September","October","November","December"],Wi=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ui(e){return e.slice(0,3)}const jo=Wi.map(Ui),Jo=Hi.map(Ui),Zo={MMMM:Hi,MMM:Jo,WWWW:Wi,WWW:jo};function jn(e){return(e<10?"0":"")+e}function Qo(e){return(e<10?"00":e<100?"0":"")+e}const Xo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>jn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>jn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>jn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>jn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>jn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Qo(e.getMilliseconds())};function ha(e,l){l=l||Zo;let a=[],n=/\{([a-z]+)\}|[^{]+/gi,i;for(;i=n.exec(e);)a.push(i[0][0]=="{"?Xo[i[1]]:i[0]);return u=>{let c="";for(let p=0;p<a.length;p++)c+=typeof a[p]=="string"?a[p]:a[p](u,l);return c}}const $o=new Intl.DateTimeFormat().resolvedOptions().timeZone;function ec(e,l){let a;return l=="UTC"||l=="Etc/UTC"?a=new Date(+e+e.getTimezoneOffset()*6e4):l==$o?a=e:(a=new Date(e.toLocaleString("en-US",{timeZone:l})),a.setMilliseconds(e.getMilliseconds())),a}const qi=e=>e%1==0,ws=[1,2,2.5,5],tc=ss(10,-32,0,ws),Yi=ss(10,0,32,ws),lc=Yi.filter(qi),nn=tc.concat(Yi),va=`
`,Ki="{YYYY}",ii=va+Ki,ji="{M}/{D}",Xn=va+ji,ds=Xn+"/{YY}",Ji="{aa}",nc="{h}:{mm}",xn=nc+Ji,ri=va+xn,oi=":{ss}",Ue=null;function Zi(e){let l=e*1e3,a=l*60,n=a*60,i=n*24,u=i*30,c=i*365,h=(e==1?ss(10,0,3,ws).filter(qi):ss(10,-3,0,ws)).concat([l,l*5,l*10,l*15,l*30,a,a*5,a*10,a*15,a*30,n,n*2,n*3,n*4,n*6,n*8,n*12,i,i*2,i*3,i*4,i*5,i*6,i*7,i*8,i*9,i*10,i*15,u,u*2,u*3,u*4,u*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const v=[[c,Ki,Ue,Ue,Ue,Ue,Ue,Ue,1],[i*28,"{MMM}",ii,Ue,Ue,Ue,Ue,Ue,1],[i,ji,ii,Ue,Ue,Ue,Ue,Ue,1],[n,"{h}"+Ji,ds,Ue,Xn,Ue,Ue,Ue,1],[a,xn,ds,Ue,Xn,Ue,Ue,Ue,1],[l,oi,ds+" "+xn,Ue,Xn+" "+xn,Ue,ri,Ue,1],[e,oi+".{fff}",ds+" "+xn,Ue,Xn+" "+xn,Ue,ri,Ue,1]];function k(g){return(_,V,S,H,$,re)=>{let y=[],W=$>=c,A=$>=u&&$<c,D=g(S),C=et(D*e,3),ae=Ys(D.getFullYear(),W?0:D.getMonth(),A||W?1:D.getDate()),ee=et(ae*e,3);if(A||W){let J=A?$/u:0,le=W?$/c:0,b=C==ee?C:et(Ys(ae.getFullYear()+le,ae.getMonth()+J,1)*e,3),z=new Date(Ot(b/e)),F=z.getFullYear(),ne=z.getMonth();for(let R=0;b<=H;R++){let Z=Ys(F+le*R,ne+J*R,1),L=Z-g(et(Z*e,3));b=et((+Z+L)*e,3),b<=H&&y.push(b)}}else{let J=$>=i?i:$,le=vl(S)-vl(C),b=ee+le+Ts(C-ee,J);y.push(b);let z=g(b),F=z.getHours()+z.getMinutes()/a+z.getSeconds()/n,ne=$/n,R=_.axes[V]._space,Z=re/R;for(;b=et(b+$,e==1?0:3),!(b>H);)if(ne>1){let L=vl(et(F+ne,6))%24,de=g(b).getHours()-L;de>1&&(de=-1),b-=de*n,F=(F+ne)%24;let _e=y[y.length-1];et((b-_e)/$,3)*Z>=.7&&y.push(b)}else y.push(b)}return y}}return[h,v,k]}const[sc,ac,ic]=Zi(1),[rc,oc,cc]=Zi(.001);ss(2,-53,53,[1]);function ci(e,l){return e.map(a=>a.map((n,i)=>i==0||i==8||n==null?n:l(i==1||a[8]==0?n:a[1]+n)))}function ui(e,l){return(a,n,i,u,c)=>{let p=l.find(S=>c>=S[0])||l[l.length-1],h,v,k,g,_,V;return n.map(S=>{let H=e(S),$=H.getFullYear(),re=H.getMonth(),y=H.getDate(),W=H.getHours(),A=H.getMinutes(),D=H.getSeconds(),C=$!=h&&p[2]||re!=v&&p[3]||y!=k&&p[4]||W!=g&&p[5]||A!=_&&p[6]||D!=V&&p[7]||p[1];return h=$,v=re,k=y,g=W,_=A,V=D,C(H)})}}function uc(e,l){let a=ha(l);return(n,i,u,c,p)=>i.map(h=>a(e(h)))}function Ys(e,l,a){return new Date(e,l,a)}function fi(e,l){return l(e)}const fc="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function di(e,l){return(a,n,i,u)=>u==null?oa:l(e(n))}function dc(e,l){let a=e.series[l];return a.width?a.stroke(e,l):a.points.width?a.points.stroke(e,l):null}function pc(e,l){return e.series[l].fill(e,l)}const hc={show:!0,live:!0,isolate:!1,mount:Ro,markers:{show:!0,width:2,stroke:dc,fill:pc,dash:"solid"},idx:null,idxs:null,values:[]};function vc(e,l){let a=e.cursor.points,n=xl(),i=a.size(e,l);rt(n,Zn,i),rt(n,Qn,i);let u=i/-2;rt(n,"marginLeft",u),rt(n,"marginTop",u);let c=a.width(e,l,i);return c&&rt(n,"borderWidth",c),n}function mc(e,l){let a=e.series[l].points;return a._fill||a._stroke}function gc(e,l){let a=e.series[l].points;return a._stroke||a._fill}function _c(e,l){return e.series[l].points.size}const Ks=[0,0];function wc(e,l,a){return Ks[0]=l,Ks[1]=a,Ks}function ps(e,l,a,n=!0){return i=>{i.button==0&&(!n||i.target==l)&&a(i)}}function js(e,l,a,n=!0){return i=>{(!n||i.target==l)&&a(i)}}const bc={show:!0,x:!0,y:!0,lock:!1,move:wc,points:{one:!1,show:vc,size:_c,width:0,stroke:gc,fill:mc},bind:{mousedown:ps,mouseup:ps,click:ps,dblclick:ps,mousemove:js,mouseleave:js,mouseenter:js},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,a,n,i)=>n-i,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Qi={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ma=Dt({},Qi,{filter:Gi}),Xi=Dt({},ma,{size:10}),$i=Dt({},Qi,{show:!1}),ga='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',er="bold "+ga,tr=1.5,pi={show:!0,scale:"x",stroke:ra,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:er,side:2,grid:ma,ticks:Xi,border:$i,font:ga,lineGap:tr,rotate:0},xc="Value",yc="Time",hi={show:!0,scale:"x",auto:!1,sorted:1,min:$e,max:-$e,idxs:[]};function Sc(e,l,a,n,i){return l.map(u=>u==null?"":da(u))}function kc(e,l,a,n,i,u,c){let p=[],h=Ql.get(i)||0;a=c?a:et(Ts(a,i),h);for(let v=a;v<=n;v=et(v+i,h))p.push(Object.is(v,-0)?0:v);return p}function ea(e,l,a,n,i,u,c){const p=[],h=e.scales[e.axes[l].scale].log,v=h==10?Hl:Fi,k=vl(v(a));i=Mn(h,k),h==10&&(i=nn[Al(i,nn)]);let g=a,_=i*h;h==10&&(_=nn[Al(_,nn)]);do p.push(g),g=g+i,h==10&&!Ql.has(g)&&(g=et(g,Ql.get(i))),g>=_&&(i=g,_=i*h,h==10&&(_=nn[Al(_,nn)]));while(g<=n);return p}function Tc(e,l,a,n,i,u,c){let h=e.scales[e.axes[l].scale].asinh,v=n>h?ea(e,l,sl(h,a),n,i):[h],k=n>=0&&a<=0?[0]:[];return(a<-h?ea(e,l,sl(h,-n),-a,i):[h]).reverse().map(_=>-_).concat(k,v)}const lr=/./,Ec=/[12357]/,Mc=/[125]/,vi=/1/,ta=(e,l,a,n)=>e.map((i,u)=>l==4&&i==0||u%n==0&&a.test(i.toExponential()[i<0?1:0])?i:null);function Ac(e,l,a,n,i){let u=e.axes[a],c=u.scale,p=e.scales[c],h=e.valToPos,v=u._space,k=h(10,c),g=h(9,c)-k>=v?lr:h(7,c)-k>=v?Ec:h(5,c)-k>=v?Mc:vi;if(g==vi){let _=Nt(h(1,c)-k);if(_<v)return ta(l.slice().reverse(),p.distr,g,yl(v/_)).reverse()}return ta(l,p.distr,g,1)}function Cc(e,l,a,n,i){let u=e.axes[a],c=u.scale,p=u._space,h=e.valToPos,v=Nt(h(1,c)-h(2,c));return v<p?ta(l.slice().reverse(),3,lr,yl(p/v)).reverse():l}function Dc(e,l,a,n){return n==null?oa:l==null?"":da(l)}const mi={show:!0,scale:"y",stroke:ra,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:er,side:3,grid:ma,ticks:Xi,border:$i,font:ga,lineGap:tr,rotate:0};function Lc(e,l){let a=3+(e||1)*2;return et(a*l,3)}function Pc(e,l){let{scale:a,idxs:n}=e.series[0],i=e._data[0],u=e.valToPos(i[n[0]],a,!0),c=e.valToPos(i[n[1]],a,!0),p=Nt(c-u),h=e.series[l],v=p/(h.points.space*We);return n[1]-n[0]<=v}const gi={scale:null,auto:!0,sorted:0,min:$e,max:-$e},nr=(e,l,a,n,i)=>i,_i={show:!0,auto:!0,sorted:0,gaps:nr,alpha:1,facets:[Dt({},gi,{scale:"x"}),Dt({},gi,{scale:"y"})]},wi={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:nr,alpha:1,points:{show:Pc,filter:null},values:null,min:$e,max:-$e,idxs:[],path:null,clip:null};function Rc(e,l,a,n,i){return a/10}const sr={time:no,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Fc=Dt({},sr,{time:!1,ori:1}),bi={};function ar(e,l){let a=bi[e];return a||(a={key:e,plots:[],sub(n){a.plots.push(n)},unsub(n){a.plots=a.plots.filter(i=>i!=n)},pub(n,i,u,c,p,h,v){for(let k=0;k<a.plots.length;k++)a.plots[k]!=i&&a.plots[k].pub(n,i,u,c,p,h,v)}},e!=null&&(bi[e]=a)),a}const Dn=1,la=2;function on(e,l,a){const n=e.mode,i=e.series[l],u=n==2?e._data[l]:e._data,c=e.scales,p=e.bbox;let h=u[0],v=n==2?u[1]:u[l],k=n==2?c[i.facets[0].scale]:c[e.series[0].scale],g=n==2?c[i.facets[1].scale]:c[i.scale],_=p.left,V=p.top,S=p.width,H=p.height,$=e.valToPosH,re=e.valToPosV;return k.ori==0?a(i,h,v,k,g,$,re,_,V,S,H,As,Pn,Ds,rr,cr):a(i,h,v,k,g,re,$,V,_,H,S,Cs,Rn,ba,or,ur)}function _a(e,l){let a=0,n=0,i=Ie(e.bands,pa);for(let u=0;u<i.length;u++){let c=i[u];c.series[0]==l?a=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[a,n==1?-1:n==2?1:n==3?2:0]}function Oc(e,l,a,n,i){let u=e.mode,c=e.series[l],p=u==2?c.facets[1].scale:c.scale,h=e.scales[p];return i==-1?h.min:i==1?h.max:h.distr==3?h.dir==1?h.min:h.max:0}function Wl(e,l,a,n,i,u){return on(e,l,(c,p,h,v,k,g,_,V,S,H,$)=>{let re=c.pxRound;const y=v.dir*(v.ori==0?1:-1),W=v.ori==0?Pn:Rn;let A,D;y==1?(A=a,D=n):(A=n,D=a);let C=re(g(p[A],v,H,V)),ae=re(_(h[A],k,$,S)),ee=re(g(p[D],v,H,V)),J=re(_(u==1?k.max:k.min,k,$,S)),le=new Path2D(i);return W(le,ee,J),W(le,C,J),W(le,C,ae),le})}function Ms(e,l,a,n,i,u){let c=null;if(e.length>0){c=new Path2D;const p=l==0?Ds:ba;let h=a;for(let g=0;g<e.length;g++){let _=e[g];if(_[1]>_[0]){let V=_[0]-h;V>0&&p(c,h,n,V,n+u),h=_[1]}}let v=a+i-h,k=10;v>0&&p(c,h,n-k/2,v,n+u+k)}return c}function Nc(e,l,a){let n=e[e.length-1];n&&n[0]==l?n[1]=a:e.push([l,a])}function wa(e,l,a,n,i,u,c){let p=[],h=e.length;for(let v=i==1?a:n;v>=a&&v<=n;v+=i)if(l[v]===null){let g=v,_=v;if(i==1)for(;++v<=n&&l[v]===null;)_=v;else for(;--v>=a&&l[v]===null;)_=v;let V=u(e[g]),S=_==g?V:u(e[_]),H=g-i;V=c<=0&&H>=0&&H<h?u(e[H]):V;let re=_+i;S=c>=0&&re>=0&&re<h?u(e[re]):S,S>=V&&p.push([V,S])}return p}function xi(e){return e==0?Ni:e==1?Ot:l=>ln(l,e)}function ir(e){let l=e==0?As:Cs,a=e==0?(i,u,c,p,h,v)=>{i.arcTo(u,c,p,h,v)}:(i,u,c,p,h,v)=>{i.arcTo(c,u,h,p,v)},n=e==0?(i,u,c,p,h)=>{i.rect(u,c,p,h)}:(i,u,c,p,h)=>{i.rect(c,u,h,p)};return(i,u,c,p,h,v=0,k=0)=>{v==0&&k==0?n(i,u,c,p,h):(v=Dl(v,p/2,h/2),k=Dl(k,p/2,h/2),l(i,u+v,c),a(i,u+p,c,u+p,c+h,v),a(i,u+p,c+h,u,c+h,k),a(i,u,c+h,u,c,k),a(i,u,c,u+p,c,v),i.closePath())}}const As=(e,l,a)=>{e.moveTo(l,a)},Cs=(e,l,a)=>{e.moveTo(a,l)},Pn=(e,l,a)=>{e.lineTo(l,a)},Rn=(e,l,a)=>{e.lineTo(a,l)},Ds=ir(0),ba=ir(1),rr=(e,l,a,n,i,u)=>{e.arc(l,a,n,i,u)},or=(e,l,a,n,i,u)=>{e.arc(a,l,n,i,u)},cr=(e,l,a,n,i,u,c)=>{e.bezierCurveTo(l,a,n,i,u,c)},ur=(e,l,a,n,i,u,c)=>{e.bezierCurveTo(a,l,i,n,c,u)};function fr(e){return(l,a,n,i,u)=>on(l,a,(c,p,h,v,k,g,_,V,S,H,$)=>{let{pxRound:re,points:y}=c,W,A;v.ori==0?(W=As,A=rr):(W=Cs,A=or);const D=et(y.width*We,3);let C=(y.size-y.width)/2*We,ae=et(C*2,3),ee=new Path2D,J=new Path2D,{left:le,top:b,width:z,height:F}=l.bbox;Ds(J,le-ae,b-ae,z+ae*2,F+ae*2);const ne=R=>{if(h[R]!=null){let Z=re(g(p[R],v,H,V)),L=re(_(h[R],k,$,S));W(ee,Z+C,L),A(ee,Z,L,C,0,vs*2)}};if(u)u.forEach(ne);else for(let R=n;R<=i;R++)ne(R);return{stroke:D>0?ee:null,fill:ee,clip:J,flags:Dn|la}})}function dr(e){return(l,a,n,i,u,c)=>{n!=i&&(u!=n&&c!=n&&e(l,a,n),u!=i&&c!=i&&e(l,a,i),e(l,a,c))}}const Gc=dr(Pn),Ic=dr(Rn);function pr(e){const l=Ie(e?.alignGaps,0);return(a,n,i,u)=>on(a,n,(c,p,h,v,k,g,_,V,S,H,$)=>{[i,u]=Ss(h,i,u);let re=c.pxRound,y=F=>re(g(F,v,H,V)),W=F=>re(_(F,k,$,S)),A,D;v.ori==0?(A=Pn,D=Gc):(A=Rn,D=Ic);const C=v.dir*(v.ori==0?1:-1),ae={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Dn},ee=ae.stroke;let J=!1;if(u-i>=H*4){let F=Y=>a.posToVal(Y,v.key,!0),ne=null,R=null,Z,L,Se,ge=y(p[C==1?i:u]),de=y(p[i]),_e=y(p[u]),ce=F(C==1?de+1:_e-1);for(let Y=C==1?i:u;Y>=i&&Y<=u;Y+=C){let ke=p[Y],Me=(C==1?ke<ce:ke>ce)?ge:y(ke),be=h[Y];Me==ge?be!=null?(L=be,ne==null?(A(ee,Me,W(L)),Z=ne=R=L):L<ne?ne=L:L>R&&(R=L)):be===null&&(J=!0):(ne!=null&&D(ee,ge,W(ne),W(R),W(Z),W(L)),be!=null?(L=be,A(ee,Me,W(L)),ne=R=Z=L):(ne=R=null,be===null&&(J=!0)),ge=Me,ce=F(ge+C))}ne!=null&&ne!=R&&Se!=ge&&D(ee,ge,W(ne),W(R),W(Z),W(L))}else for(let F=C==1?i:u;F>=i&&F<=u;F+=C){let ne=h[F];ne===null?J=!0:ne!=null&&A(ee,y(p[F]),W(ne))}let[b,z]=_a(a,n);if(c.fill!=null||b!=0){let F=ae.fill=new Path2D(ee),ne=c.fillTo(a,n,c.min,c.max,b),R=W(ne),Z=y(p[i]),L=y(p[u]);C==-1&&([L,Z]=[Z,L]),A(F,L,R),A(F,Z,R)}if(!c.spanGaps){let F=[];J&&F.push(...wa(p,h,i,u,C,y,l)),ae.gaps=F=c.gaps(a,n,i,u,F),ae.clip=Ms(F,v.ori,V,S,H,$)}return z!=0&&(ae.band=z==2?[Wl(a,n,i,u,ee,-1),Wl(a,n,i,u,ee,1)]:Wl(a,n,i,u,ee,z)),ae})}function zc(e){const l=Ie(e.align,1),a=Ie(e.ascDesc,!1),n=Ie(e.alignGaps,0),i=Ie(e.extend,!1);return(u,c,p,h)=>on(u,c,(v,k,g,_,V,S,H,$,re,y,W)=>{[p,h]=Ss(g,p,h);let A=v.pxRound,{left:D,width:C}=u.bbox,ae=de=>A(S(de,_,y,$)),ee=de=>A(H(de,V,W,re)),J=_.ori==0?Pn:Rn;const le={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Dn},b=le.stroke,z=_.dir*(_.ori==0?1:-1);let F=ee(g[z==1?p:h]),ne=ae(k[z==1?p:h]),R=ne,Z=ne;i&&l==-1&&(Z=D,J(b,Z,F)),J(b,ne,F);for(let de=z==1?p:h;de>=p&&de<=h;de+=z){let _e=g[de];if(_e==null)continue;let ce=ae(k[de]),Y=ee(_e);l==1?J(b,ce,F):J(b,R,Y),J(b,ce,Y),F=Y,R=ce}let L=R;i&&l==1&&(L=D+C,J(b,L,F));let[Se,ge]=_a(u,c);if(v.fill!=null||Se!=0){let de=le.fill=new Path2D(b),_e=v.fillTo(u,c,v.min,v.max,Se),ce=ee(_e);J(de,L,ce),J(de,Z,ce)}if(!v.spanGaps){let de=[];de.push(...wa(k,g,p,h,z,ae,n));let _e=v.width*We/2,ce=a||l==1?_e:-_e,Y=a||l==-1?-_e:_e;de.forEach(ke=>{ke[0]+=ce,ke[1]+=Y}),le.gaps=de=v.gaps(u,c,p,h,de),le.clip=Ms(de,_.ori,$,re,y,W)}return ge!=0&&(le.band=ge==2?[Wl(u,c,p,h,b,-1),Wl(u,c,p,h,b,1)]:Wl(u,c,p,h,b,ge)),le})}function yi(e,l,a,n,i,u,c=$e){if(e.length>1){let p=null;for(let h=0,v=1/0;h<e.length;h++)if(l[h]!==void 0){if(p!=null){let k=Nt(e[h]-e[p]);k<v&&(v=k,c=Nt(a(e[h],n,i,u)-a(e[p],n,i,u)))}p=h}}return c}function Bc(e){e=e||ts;const l=Ie(e.size,[.6,$e,1]),a=e.align||0,n=e.gap||0;let i=e.radius;i=i==null?[0,0]:typeof i=="number"?[i,0]:i;const u=Le(i),c=1-l[0],p=Ie(l[1],$e),h=Ie(l[2],1),v=Ie(e.disp,ts),k=Ie(e.each,V=>{}),{fill:g,stroke:_}=v;return(V,S,H,$)=>on(V,S,(re,y,W,A,D,C,ae,ee,J,le,b)=>{let z=re.pxRound,F=a,ne=n*We,R=p*We,Z=h*We,L,Se;A.ori==0?[L,Se]=u(V,S):[Se,L]=u(V,S);const ge=A.dir*(A.ori==0?1:-1);let de=A.ori==0?Ds:ba,_e=A.ori==0?k:(I,Oe,qe,jt,Xt,Lt,Jt)=>{k(I,Oe,qe,Xt,jt,Jt,Lt)},ce=Ie(V.bands,pa).find(I=>I.series[0]==S),Y=ce!=null?ce.dir:0,ke=re.fillTo(V,S,re.min,re.max,Y),Qe=z(ae(ke,D,b,J)),Me,be,tt,ot=le,Re=z(re.width*We),yt=!1,Tt=null,je=null,ft=null,dt=null;g!=null&&(Re==0||_!=null)&&(yt=!0,Tt=g.values(V,S,H,$),je=new Map,new Set(Tt).forEach(I=>{I!=null&&je.set(I,new Path2D)}),Re>0&&(ft=_.values(V,S,H,$),dt=new Map,new Set(ft).forEach(I=>{I!=null&&dt.set(I,new Path2D)})));let{x0:Ae,size:Et}=v;if(Ae!=null&&Et!=null){F=1,y=Ae.values(V,S,H,$),Ae.unit==2&&(y=y.map(qe=>V.posToVal(ee+qe*le,A.key,!0)));let I=Et.values(V,S,H,$);Et.unit==2?be=I[0]*le:be=C(I[0],A,le,ee)-C(0,A,le,ee),ot=yi(y,W,C,A,le,ee,ot),tt=ot-be+ne}else ot=yi(y,W,C,A,le,ee,ot),tt=ot*c+ne,be=ot-tt;tt<1&&(tt=0),Re>=be/2&&(Re=0),tt<5&&(z=Ni);let al=tt>0,It=ot-tt-(al?Re:0);be=z($s(It,Z,R)),Me=(F==0?be/2:F==ge?0:be)-F*ge*((F==0?ne/2:0)+(al?Re/2:0));const ze={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},St=yt?null:new Path2D;let zt=null;if(ce!=null)zt=V.data[ce.series[1]];else{let{y0:I,y1:Oe}=v;I!=null&&Oe!=null&&(W=Oe.values(V,S,H,$),zt=I.values(V,S,H,$))}let Mt=L*be,me=Se*be;for(let I=ge==1?H:$;I>=H&&I<=$;I+=ge){let Oe=W[I];if(Oe==null)continue;if(zt!=null){let vt=zt[I]??0;if(Oe-vt==0)continue;Qe=ae(vt,D,b,J)}let qe=A.distr!=2||v!=null?y[I]:I,jt=C(qe,A,le,ee),Xt=ae(Ie(Oe,ke),D,b,J),Lt=z(jt-Me),Jt=z(sl(Xt,Qe)),ct=z(Dl(Xt,Qe)),lt=Jt-ct;if(Oe!=null){let vt=Oe<0?me:Mt,At=Oe<0?Mt:me;yt?(Re>0&&ft[I]!=null&&de(dt.get(ft[I]),Lt,ct+vl(Re/2),be,sl(0,lt-Re),vt,At),Tt[I]!=null&&de(je.get(Tt[I]),Lt,ct+vl(Re/2),be,sl(0,lt-Re),vt,At)):de(St,Lt,ct+vl(Re/2),be,sl(0,lt-Re),vt,At),_e(V,S,I,Lt-Re/2,ct,be+Re,lt)}}return Re>0?ze.stroke=yt?dt:St:yt||(ze._fill=re.width==0?re._fill:re._stroke??re._fill,ze.width=0),ze.fill=yt?je:St,ze})}function Vc(e,l){const a=Ie(l?.alignGaps,0);return(n,i,u,c)=>on(n,i,(p,h,v,k,g,_,V,S,H,$,re)=>{[u,c]=Ss(v,u,c);let y=p.pxRound,W=L=>y(_(L,k,$,S)),A=L=>y(V(L,g,re,H)),D,C,ae;k.ori==0?(D=As,ae=Pn,C=cr):(D=Cs,ae=Rn,C=ur);const ee=k.dir*(k.ori==0?1:-1);let J=W(h[ee==1?u:c]),le=J,b=[],z=[];for(let L=ee==1?u:c;L>=u&&L<=c;L+=ee)if(v[L]!=null){let ge=h[L],de=W(ge);b.push(le=de),z.push(A(v[L]))}const F={stroke:e(b,z,D,ae,C,y),fill:null,clip:null,band:null,gaps:null,flags:Dn},ne=F.stroke;let[R,Z]=_a(n,i);if(p.fill!=null||R!=0){let L=F.fill=new Path2D(ne),Se=p.fillTo(n,i,p.min,p.max,R),ge=A(Se);ae(L,le,ge),ae(L,J,ge)}if(!p.spanGaps){let L=[];L.push(...wa(h,v,u,c,ee,W,a)),F.gaps=L=p.gaps(n,i,u,c,L),F.clip=Ms(L,k.ori,S,H,$,re)}return Z!=0&&(F.band=Z==2?[Wl(n,i,u,c,ne,-1),Wl(n,i,u,c,ne,1)]:Wl(n,i,u,c,ne,Z)),F})}function Hc(e){return Vc(Wc,e)}function Wc(e,l,a,n,i,u){const c=e.length;if(c<2)return null;const p=new Path2D;if(a(p,e[0],l[0]),c==2)n(p,e[1],l[1]);else{let h=Array(c),v=Array(c-1),k=Array(c-1),g=Array(c-1);for(let _=0;_<c-1;_++)k[_]=l[_+1]-l[_],g[_]=e[_+1]-e[_],v[_]=k[_]/g[_];h[0]=v[0];for(let _=1;_<c-1;_++)v[_]===0||v[_-1]===0||v[_-1]>0!=v[_]>0?h[_]=0:(h[_]=3*(g[_-1]+g[_])/((2*g[_]+g[_-1])/v[_-1]+(g[_]+2*g[_-1])/v[_]),isFinite(h[_])||(h[_]=0));h[c-1]=v[c-2];for(let _=0;_<c-1;_++)i(p,e[_]+g[_]/3,l[_]+h[_]*g[_]/3,e[_+1]-g[_]/3,l[_+1]-h[_+1]*g[_]/3,e[_+1],l[_+1])}return p}const na=new Set;function Si(){for(let e of na)e.syncRect(!0)}Ln&&(an(So,En,Si),an(ko,En,Si,!0),an(gs,En,()=>{xt.pxRatio=We}));const Uc=pr(),qc=fr();function ki(e,l,a,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((u,c)=>sa(u,c,l,a))}function Yc(e,l){return e.map((a,n)=>n==0?{}:Dt({},l,a))}function sa(e,l,a,n){return Dt({},l==0?a:n,e)}function hr(e,l,a){return l==null?An:[l,a]}const Kc=hr;function jc(e,l,a){return l==null?An:_s(l,a,fa,!0)}function vr(e,l,a,n){return l==null?An:ks(l,a,e.scales[n].log,!1)}const Jc=vr;function mr(e,l,a,n){return l==null?An:ua(l,a,e.scales[n].log,!1)}const Zc=mr;function Qc(e,l,a,n,i){let u=sl(li(e),li(l)),c=l-e,p=Al(i/n*c,a);do{let h=a[p],v=n*h/c;if(v>=i&&u+(h<5?Ql.get(h):0)<=17)return[h,v]}while(++p<a.length);return[0,0]}function Ti(e){let l,a;return e=e.replace(/(\d+)px/,(n,i)=>(l=Ot((a=+i)*We))+"px"),[e,l,a]}function Xc(e){e.show&&[e.font,e.labelFont].forEach(l=>{let a=et(l[2]*We,1);l[0]=l[0].replace(/[0-9.]+px/,a+"px"),l[1]=a})}function xt(e,l,a){const n={mode:Ie(e.mode,1)},i=n.mode;function u(t,s,r,o){let d=s.valToPct(t);return o+r*(s.dir==-1?1-d:d)}function c(t,s,r,o){let d=s.valToPct(t);return o+r*(s.dir==-1?d:1-d)}function p(t,s,r,o){return s.ori==0?u(t,s,r,o):c(t,s,r,o)}n.valToPosH=u,n.valToPosV=c;let h=!1;n.status=0;const v=n.root=xl(so);if(e.id!=null&&(v.id=e.id),hl(v,e.class),e.title){let t=xl(ro,v);t.textContent=e.title}const k=Ml("canvas"),g=n.ctx=k.getContext("2d"),_=xl(oo,v);an("click",_,t=>{t.target===S&&(st!=vn||ut!=mn)&&Kt.click(n,t)},!0);const V=n.under=xl(co,_);_.appendChild(k);const S=n.over=xl(uo,_);e=Cn(e);const H=+Ie(e.pxAlign,1),$=xi(H);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const re=e.ms||.001,y=n.series=i==1?ki(e.series||[],hi,wi,!1):Yc(e.series||[null],_i),W=n.axes=ki(e.axes||[],pi,mi,!0),A=n.scales={},D=n.bands=e.bands||[];D.forEach(t=>{t.fill=Le(t.fill||null),t.dir=Ie(t.dir,-1)});const C=i==2?y[1].facets[0].scale:y[0].scale,ae={axes:br,series:Gn},ee=(e.drawOrder||["axes","series"]).map(t=>ae[t]);function J(t){const s=t.distr==3?r=>Hl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>qs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:d,_max:m}=t,x=m-d;return(o-d)/x}}function le(t){let s=A[t];if(s==null){let r=(e.scales||ts)[t]||ts;if(r.from!=null){le(r.from);let o=Dt({},A[r.from],r,{key:t});o.valToPct=J(o),A[t]=o}else{s=A[t]=Dt({},t==C?sr:Fc,r),s.key=t;let o=s.time,d=s.range,m=Jl(d);if((t!=C||i==2&&!o)&&(m&&(d[0]==null||d[1]==null)&&(d={min:d[0]==null?$a:{mode:1,hard:d[0],soft:d[0]},max:d[1]==null?$a:{mode:1,hard:d[1],soft:d[1]}},m=!1),!m&&Es(d))){let x=d;d=(E,P,q)=>P==null?An:_s(P,q,x)}s.range=Le(d||(o?Kc:t==C?s.distr==3?Jc:s.distr==4?Zc:hr:s.distr==3?vr:s.distr==4?mr:jc)),s.auto=Le(m?!1:s.auto),s.clamp=Le(s.clamp||Rc),s._min=s._max=null,s.valToPct=J(s)}}}le("x"),le("y"),i==1&&y.forEach(t=>{le(t.scale)}),W.forEach(t=>{le(t.scale)});for(let t in e.scales)le(t);const b=A[C],z=b.distr;let F,ne;b.ori==0?(hl(v,ao),F=u,ne=c):(hl(v,io),F=c,ne=u);const R={};for(let t in A){let s=A[t];(s.min!=null||s.max!=null)&&(R[t]={min:s.min,max:s.max},s.min=s.max=null)}const Z=e.tzDate||(t=>new Date(Ot(t/re))),L=e.fmtDate||ha,Se=re==1?ic(Z):cc(Z),ge=ui(Z,ci(re==1?ac:oc,L)),de=di(Z,fi(fc,L)),_e=[],ce=n.legend=Dt({},hc,e.legend),Y=n.cursor=Dt({},bc,{drag:{y:i==2}},e.cursor),ke=ce.show,Qe=Y.show,Me=ce.markers;ce.idxs=_e,Me.width=Le(Me.width),Me.dash=Le(Me.dash),Me.stroke=Le(Me.stroke),Me.fill=Le(Me.fill);let be,tt,ot,Re=[],yt=[],Tt,je=!1,ft={};if(ce.live){const t=y[1]?y[1].values:null;je=t!=null,Tt=je?t(n,1,0):{_:0};for(let s in Tt)ft[s]=oa}if(ke)if(be=Ml("table",go,v),ot=Ml("tbody",null,be),ce.mount(n,be),je){tt=Ml("thead",null,be,ot);let t=Ml("tr",null,tt);Ml("th",null,t);for(var dt in Tt)Ml("th",Ba,t).textContent=dt}else hl(be,wo),ce.live&&hl(be,_o);const Ae={show:!0},Et={show:!1};function al(t,s){if(s==0&&(je||!ce.live||i==2))return An;let r=[],o=Ml("tr",bo,ot,ot.childNodes[s]);hl(o,t.class),t.show||hl(o,sn);let d=Ml("th",null,o);if(Me.show){let E=xl(xo,d);if(s>0){let P=Me.width(n,s);P&&(E.style.border=P+"px "+Me.dash(n,s)+" "+Me.stroke(n,s)),E.style.background=Me.fill(n,s)}}let m=xl(Ba,d);t.label instanceof HTMLElement?m.appendChild(t.label):m.textContent=t.label,s>0&&(Me.show||(m.style.color=t.width>0?Me.stroke(n,s):Me.fill(n,s)),ze("click",d,E=>{if(Y._lock)return;nt(E);let P=y.indexOf(t);if((E.ctrlKey||E.metaKey)!=ce.isolate){let q=y.some((K,Q)=>Q>0&&Q!=P&&K.show);y.forEach((K,Q)=>{Q>0&&Fl(Q,q?Q==P?Ae:Et:Ae,!0,Ct.setSeries)})}else Fl(P,{show:!t.show},!0,Ct.setSeries)},!1),Pl&&ze(Ua,d,E=>{Y._lock||(nt(E),Fl(y.indexOf(t),_n,!0,Ct.setSeries))},!1));for(var x in Tt){let E=Ml("td",yo,o);E.textContent="--",r.push(E)}return[o,r]}const It=new Map;function ze(t,s,r,o=!0){const d=It.get(s)||{},m=Y.bind[t](n,s,r,o);m&&(an(t,s,d[t]=m),It.set(s,d))}function St(t,s,r){const o=It.get(s)||{};for(let d in o)(t==null||d==t)&&(Xs(d,s,o[d]),delete o[d]);t==null&&It.delete(s)}let zt=0,Mt=0,me=0,I=0,Oe=0,qe=0,jt=Oe,Xt=qe,Lt=me,Jt=I,ct=0,lt=0,vt=0,At=0;n.bbox={};let ol=!1,gl=!1,Pt=!1,Zt=!1,Sl=!1,mt=!1;function kl(t,s,r){(r||t!=n.width||s!=n.height)&&se(t,s),fn(!1),Pt=!0,gl=!0,dn()}function se(t,s){n.width=zt=me=t,n.height=Mt=I=s,Oe=qe=0,Bt(),$t();let r=n.bbox;ct=r.left=ln(Oe*We,.5),lt=r.top=ln(qe*We,.5),vt=r.width=ln(me*We,.5),At=r.height=ln(I*We,.5)}const he=3;function xe(){let t=!1,s=0;for(;!t;){s++;let r=_r(s),o=wr(s);t=s==he||r&&o,t||(se(n.width,n.height),gl=!0)}}function Ne({width:t,height:s}){kl(t,s)}n.setSize=Ne;function Bt(){let t=!1,s=!1,r=!1,o=!1;W.forEach((d,m)=>{if(d.show&&d._show){let{side:x,_size:E}=d,P=x%2,q=d.label!=null?d.labelSize:0,K=E+q;K>0&&(P?(me-=K,x==3?(Oe+=K,o=!0):r=!0):(I-=K,x==0?(qe+=K,t=!0):s=!0))}}),ie[0]=t,ie[1]=r,ie[2]=s,ie[3]=o,me-=fe[1]+fe[3],Oe+=fe[3],I-=fe[2]+fe[0],qe+=fe[0]}function $t(){let t=Oe+me,s=qe+I,r=Oe,o=qe;function d(m,x){switch(m){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}W.forEach((m,x)=>{if(m.show&&m._show){let E=m.side;m._pos=d(E,m._size),m.label!=null&&(m._lpos=d(E,m.labelSize))}})}if(Y.dataIdx==null){let t=Y.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Le(t.prox),o=t.bias??=0;Y.dataIdx=(d,m,x,E)=>{if(m==0)return x;let P=x,q=r(d,m,x,E)??$e,K=q>=0&&q<$e,Q=b.ori==0?me:I,we=Y.left,He=l[0],Ge=l[m];if(s.has(Ge[x])){P=null;let De=null,ve=null,ue;if(o==0||o==-1)for(ue=x;De==null&&ue-- >0;)s.has(Ge[ue])||(De=ue);if(o==0||o==1)for(ue=x;ve==null&&ue++<Ge.length;)s.has(Ge[ue])||(ve=ue);if(De!=null||ve!=null)if(K){let it=De==null?-1/0:F(He[De],b,Q,0),_t=ve==null?1/0:F(He[ve],b,Q,0),qt=we-it,Ze=_t-we;qt<=Ze?qt<=q&&(P=De):Ze<=q&&(P=ve)}else P=ve==null?De:De==null?ve:x-De<=ve-x?De:ve}else K&&Nt(we-F(He[x],b,Q,0))>q&&(P=null);return P}}const nt=t=>{Y.event=t};Y.idxs=_e,Y._lock=!1;let Xe=Y.points;Xe.show=Le(Xe.show),Xe.size=Le(Xe.size),Xe.stroke=Le(Xe.stroke),Xe.width=Le(Xe.width),Xe.fill=Le(Xe.fill);const Qt=n.focus=Dt({},e.focus||{alpha:.3},Y.focus),Pl=Qt.prox>=0,kt=Pl&&Xe.one;let Be=[],Rt=[],il=[];function O(t,s){let r=Xe.show(n,s);if(r instanceof HTMLElement)return hl(r,mo),hl(r,t.class),Il(r,-10,-10,me,I),S.insertBefore(r,Be[s]),r}function U(t,s){if(i==1||s>0){let r=i==1&&A[t.scale].time,o=t.value;t.value=r?ai(o)?di(Z,fi(o,L)):o||de:o||Dc,t.label=t.label||(r?yc:xc)}if(kt||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Uc||Fo,t.fillTo=Le(t.fillTo||Oc),t.pxAlign=+Ie(t.pxAlign,H),t.pxRound=xi(t.pxAlign),t.stroke=Le(t.stroke||null),t.fill=Le(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Lc(sl(1,t.width),1),o=t.points=Dt({},{size:r,width:sl(1,r*.2),stroke:t.stroke,space:r*2,paths:qc,_stroke:null,_fill:null},t.points);o.show=Le(o.show),o.filter=Le(o.filter),o.fill=Le(o.fill),o.stroke=Le(o.stroke),o.paths=Le(o.paths),o.pxAlign=t.pxAlign}if(ke){let r=al(t,s);Re.splice(s,0,r[0]),yt.splice(s,0,r[1]),ce.values.push(null)}if(Qe){_e.splice(s,0,null);let r=null;kt?s==0&&(r=O(t,s)):s>0&&(r=O(t,s)),Be.splice(s,0,r),Rt.splice(s,0,0),il.splice(s,0,0)}Ut("addSeries",s)}function te(t,s){s=s??y.length,t=i==1?sa(t,s,hi,wi):sa(t,s,{},_i),y.splice(s,0,t),U(y[s],s)}n.addSeries=te;function j(t){if(y.splice(t,1),ke){ce.values.splice(t,1),yt.splice(t,1);let s=Re.splice(t,1)[0];St(null,s.firstChild),s.remove()}Qe&&(_e.splice(t,1),Be.splice(t,1)[0].remove(),Rt.splice(t,1),il.splice(t,1)),Ut("delSeries",t)}n.delSeries=j;const ie=[!1,!1,!1,!1];function N(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=A[t.scale];o==null&&(t.scale=r?y[1].scale:C,o=A[t.scale]);let d=o.time;t.size=Le(t.size),t.space=Le(t.space),t.rotate=Le(t.rotate),Jl(t.incrs)&&t.incrs.forEach(x=>{!Ql.has(x)&&Ql.set(x,zi(x))}),t.incrs=Le(t.incrs||(o.distr==2?lc:d?re==1?sc:rc:nn)),t.splits=Le(t.splits||(d&&o.distr==1?Se:o.distr==3?ea:o.distr==4?Tc:kc)),t.stroke=Le(t.stroke),t.grid.stroke=Le(t.grid.stroke),t.ticks.stroke=Le(t.ticks.stroke),t.border.stroke=Le(t.border.stroke);let m=t.values;t.values=Jl(m)&&!Jl(m[0])?Le(m):d?Jl(m)?ui(Z,ci(m,L)):ai(m)?uc(Z,m):m||ge:m||Sc,t.filter=Le(t.filter||(o.distr>=3&&o.log==10?Ac:o.distr==3&&o.log==2?Cc:Gi)),t.font=Ti(t.font),t.labelFont=Ti(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(ie[s]=!0,t._el=xl(fo,_))}}function w(t,s,r,o){let[d,m,x,E]=r,P=s%2,q=0;return P==0&&(E||m)&&(q=s==0&&!d||s==2&&!x?Ot(pi.size/3):0),P==1&&(d||x)&&(q=s==1&&!m||s==3&&!E?Ot(mi.size/2):0),q}const B=n.padding=(e.padding||[w,w,w,w]).map(t=>Le(Ie(t,w))),fe=n._padding=B.map((t,s)=>t(n,s,ie,0));let oe,Te=null,pe=null;const Ye=i==1?y[0].idxs:null;let Ve=null,pt=!1;function rl(t,s){if(l=t??[],n.data=n._data=l,i==2){oe=0;for(let r=1;r<y.length;r++)oe+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Ve=l[0],oe=Ve.length;let r=l;if(z==2){r=l.slice();let o=r[0]=Array(oe);for(let d=0;d<oe;d++)o[d]=d}n._data=l=r}if(fn(!0),Ut("setData"),z==2&&(Pt=!0),s!==!1){let r=b;r.auto(n,pt)?cl():Yl(C,r.min,r.max),Zt=Zt||Y.left>=0,mt=!0,dn()}}n.setData=rl;function cl(){pt=!0;let t,s;i==1&&(oe>0?(Te=Ye[0]=0,pe=Ye[1]=oe-1,t=l[0][Te],s=l[0][pe],z==2?(t=Te,s=pe):t==s&&(z==3?[t,s]=ks(t,t,b.log,!1):z==4?[t,s]=ua(t,t,b.log,!1):b.time?s=t+Ot(86400/re):[t,s]=_s(t,s,fa,!0))):(Te=Ye[0]=t=null,pe=Ye[1]=s=null)),Yl(C,t,s)}let el,Je,Vt,_l,zl,ul,Ul,Ee,Yt,Ft;function Rl(t,s,r,o,d,m){t??=Ha,r??=pa,o??="butt",d??=Ha,m??="round",t!=el&&(g.strokeStyle=el=t),d!=Je&&(g.fillStyle=Je=d),s!=Vt&&(g.lineWidth=Vt=s),m!=zl&&(g.lineJoin=zl=m),o!=ul&&(g.lineCap=ul=o),r!=_l&&g.setLineDash(_l=r)}function Fn(t,s,r,o){s!=Je&&(g.fillStyle=Je=s),t!=Ul&&(g.font=Ul=t),r!=Ee&&(g.textAlign=Ee=r),o!=Yt&&(g.textBaseline=Yt=o)}function Xl(t,s,r,o,d=0){if(o.length>0&&t.auto(n,pt)&&(s==null||s.min==null)){let m=Ie(Te,0),x=Ie(pe,o.length-1),E=r.min==null?Ao(o,m,x,d,t.distr==3):[r.min,r.max];t.min=Dl(t.min,r.min=E[0]),t.max=sl(t.max,r.max=E[1])}}const On={min:null,max:null};function Nn(){for(let o in A){let d=A[o];R[o]==null&&(d.min==null||R[C]!=null&&d.auto(n,pt))&&(R[o]=On)}for(let o in A){let d=A[o];R[o]==null&&d.from!=null&&R[d.from]!=null&&(R[o]=On)}R[C]!=null&&fn(!0);let t={};for(let o in R){let d=R[o];if(d!=null){let m=t[o]=Cn(A[o],Go);if(d.min!=null)Dt(m,d);else if(o!=C||i==2)if(oe==0&&m.from==null){let x=m.range(n,null,null,o);m.min=x[0],m.max=x[1]}else m.min=$e,m.max=-$e}}if(oe>0){y.forEach((o,d)=>{if(i==1){let m=o.scale,x=R[m];if(x==null)return;let E=t[m];if(d==0){let P=E.range(n,E.min,E.max,m);E.min=P[0],E.max=P[1],Te=Al(E.min,l[0]),pe=Al(E.max,l[0]),pe-Te>1&&(l[0][Te]<E.min&&Te++,l[0][pe]>E.max&&pe--),o.min=Ve[Te],o.max=Ve[pe]}else o.show&&o.auto&&Xl(E,x,o,l[d],o.sorted);o.idxs[0]=Te,o.idxs[1]=pe}else if(d>0&&o.show&&o.auto){let[m,x]=o.facets,E=m.scale,P=x.scale,[q,K]=l[d],Q=t[E],we=t[P];Q!=null&&Xl(Q,R[E],m,q,m.sorted),we!=null&&Xl(we,R[P],x,K,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let d=t[o],m=R[o];if(d.from==null&&(m==null||m.min==null)){let x=d.range(n,d.min==$e?null:d.min,d.max==-$e?null:d.max,o);d.min=x[0],d.max=x[1]}}}for(let o in t){let d=t[o];if(d.from!=null){let m=t[d.from];if(m.min==null)d.min=d.max=null;else{let x=d.range(n,m.min,m.max,o);d.min=x[0],d.max=x[1]}}}let s={},r=!1;for(let o in t){let d=t[o],m=A[o];if(m.min!=d.min||m.max!=d.max){m.min=d.min,m.max=d.max;let x=m.distr;m._min=x==3?Hl(m.min):x==4?qs(m.min,m.asinh):x==100?m.fwd(m.min):m.min,m._max=x==3?Hl(m.max):x==4?qs(m.max,m.asinh):x==100?m.fwd(m.max):m.max,s[o]=r=!0}}if(r){y.forEach((o,d)=>{i==2?d>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Pt=!0,Ut("setScale",o);Qe&&Y.left>=0&&(Zt=mt=!0)}for(let o in R)R[o]=null}function as(t){let s=$s(Te-1,0,oe-1),r=$s(pe+1,0,oe-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<oe-1;)r++;return[s,r]}function Gn(){if(oe>0){let t=y.some(s=>s._focus)&&Ft!=Qt.alpha;t&&(g.globalAlpha=Ft=Qt.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(In(r,!1),In(r,!0),s._paths==null)){let o=Ft;Ft!=s.alpha&&(g.globalAlpha=Ft=s.alpha);let d=i==2?[0,l[r][0].length-1]:as(l[r]);s._paths=s.paths(n,r,d[0],d[1]),Ft!=o&&(g.globalAlpha=Ft=o)}}),y.forEach((s,r)=>{if(r>0&&s.show){let o=Ft;Ft!=s.alpha&&(g.globalAlpha=Ft=s.alpha),s._paths!=null&&cn(r,!1);{let d=s._paths!=null?s._paths.gaps:null,m=s.points.show(n,r,Te,pe,d),x=s.points.filter(n,r,m,d);(m||x)&&(s.points._paths=s.points.paths(n,r,Te,pe,x),cn(r,!0))}Ft!=o&&(g.globalAlpha=Ft=o),Ut("drawSeries",r)}}),t&&(g.globalAlpha=Ft=1)}}function In(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function cn(t,s){let r=s?y[t].points:y[t],{stroke:o,fill:d,clip:m,flags:x,_stroke:E=r._stroke,_fill:P=r._fill,_width:q=r.width}=r._paths;q=et(q*We,3);let K=null,Q=q%2/2;s&&P==null&&(P=q>0?"#fff":E);let we=r.pxAlign==1&&Q>0;if(we&&g.translate(Q,Q),!s){let He=ct-q/2,Ge=lt-q/2,De=vt+q,ve=At+q;K=new Path2D,K.rect(He,Ge,De,ve)}s?un(E,q,r.dash,r.cap,P,o,d,x,m):zn(t,E,q,r.dash,r.cap,P,o,d,x,K,m),we&&g.translate(-Q,-Q)}function zn(t,s,r,o,d,m,x,E,P,q,K){let Q=!1;P!=0&&D.forEach((we,He)=>{if(we.series[0]==t){let Ge=y[we.series[1]],De=l[we.series[1]],ve=(Ge._paths||ts).band;Jl(ve)&&(ve=we.dir==1?ve[0]:ve[1]);let ue,it=null;Ge.show&&ve&&Do(De,Te,pe)?(it=we.fill(n,He)||m,ue=Ge._paths.clip):ve=null,un(s,r,o,d,it,x,E,P,q,K,ue,ve),Q=!0}}),Q||un(s,r,o,d,m,x,E,P,q,K)}const Bn=Dn|la;function un(t,s,r,o,d,m,x,E,P,q,K,Q){Rl(t,s,r,o,d),(P||q||Q)&&(g.save(),P&&g.clip(P),q&&g.clip(q)),Q?(E&Bn)==Bn?(g.clip(Q),K&&g.clip(K),is(d,x),gt(t,m,s)):E&la?(is(d,x),g.clip(Q),gt(t,m,s)):E&Dn&&(g.save(),g.clip(Q),K&&g.clip(K),is(d,x),g.restore(),gt(t,m,s)):(is(d,x),gt(t,m,s)),(P||q||Q)&&g.restore()}function gt(t,s,r){r>0&&(s instanceof Map?s.forEach((o,d)=>{g.strokeStyle=el=d,g.stroke(o)}):s!=null&&t&&g.stroke(s))}function is(t,s){s instanceof Map?s.forEach((r,o)=>{g.fillStyle=Je=o,g.fill(r)}):s!=null&&t&&g.fill(s)}function gr(t,s,r,o){let d=W[t],m;if(o<=0)m=[0,0];else{let x=d._space=d.space(n,t,s,r,o),E=d._incrs=d.incrs(n,t,s,r,o,x);m=Qc(s,r,E,o,x)}return d._found=m}function Ls(t,s,r,o,d,m,x,E,P,q){let K=x%2/2;H==1&&g.translate(K,K),Rl(E,x,P,q,E),g.beginPath();let Q,we,He,Ge,De=d+(o==0||o==3?-m:m);r==0?(we=d,Ge=De):(Q=d,He=De);for(let ve=0;ve<t.length;ve++)s[ve]!=null&&(r==0?Q=He=t[ve]:we=Ge=t[ve],g.moveTo(Q,we),g.lineTo(He,Ge));g.stroke(),H==1&&g.translate(-K,-K)}function _r(t){let s=!0;return W.forEach((r,o)=>{if(!r.show)return;let d=A[r.scale];if(d.min==null){r._show&&(s=!1,r._show=!1,fn(!1));return}else r._show||(s=!1,r._show=!0,fn(!1));let m=r.side,x=m%2,{min:E,max:P}=d,[q,K]=gr(o,E,P,x==0?me:I);if(K==0)return;let Q=d.distr==2,we=r._splits=r.splits(n,o,E,P,q,K,Q),He=d.distr==2?we.map(ue=>Ve[ue]):we,Ge=d.distr==2?Ve[we[1]]-Ve[we[0]]:q,De=r._values=r.values(n,r.filter(n,He,o,K,Ge),o,K,Ge);r._rotate=m==2?r.rotate(n,De,o,K):0;let ve=r._size;r._size=yl(r.size(n,De,o,t)),ve!=null&&r._size!=ve&&(s=!1)}),s}function wr(t){let s=!0;return B.forEach((r,o)=>{let d=r(n,o,ie,t);d!=fe[o]&&(s=!1),fe[o]=d}),s}function br(){for(let t=0;t<W.length;t++){let s=W[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,d,m,x=s.stroke(n,t),E=r==0||r==3?-1:1,[P,q]=s._found;if(s.label!=null){let ll=s.labelGap*E,pl=Ot((s._lpos+ll)*We);Fn(s.labelFont[0],x,"center",r==2?Kn:Va),g.save(),o==1?(d=m=0,g.translate(pl,Ot(lt+At/2)),g.rotate((r==3?-vs:vs)/2)):(d=Ot(ct+vt/2),m=pl);let tn=Oi(s.label)?s.label(n,t,P,q):s.label;g.fillText(tn,d,m),g.restore()}if(q==0)continue;let K=A[s.scale],Q=o==0?vt:At,we=o==0?ct:lt,He=s._splits,Ge=K.distr==2?He.map(ll=>Ve[ll]):He,De=K.distr==2?Ve[He[1]]-Ve[He[0]]:P,ve=s.ticks,ue=s.border,it=ve.show?ve.size:0,_t=Ot(it*We),qt=Ot((s.alignTo==2?s._size-it-s.gap:s.gap)*We),Ze=s._rotate*-vs/180,wt=$(s._pos*We),fl=(_t+qt)*E,tl=wt+fl;m=o==0?tl:0,d=o==1?tl:0;let wl=s.font[0],Tl=s.align==1?bn:s.align==2?Hs:Ze>0?bn:Ze<0?Hs:o==0?"center":r==3?Hs:bn,Nl=Ze||o==1?"middle":r==2?Kn:Va;Fn(wl,x,Tl,Nl);let dl=s.font[1]*s.lineGap,bl=He.map(ll=>$(p(ll,K,Q,we))),El=s._values;for(let ll=0;ll<El.length;ll++){let pl=El[ll];if(pl!=null){o==0?d=bl[ll]:m=bl[ll],pl=""+pl;let tn=pl.indexOf(`
`)==-1?[pl]:pl.split(/\n/gm);for(let nl=0;nl<tn.length;nl++){let za=tn[nl];Ze?(g.save(),g.translate(d,m+nl*dl),g.rotate(Ze),g.fillText(za,0,0),g.restore()):g.fillText(za,d,m+nl*dl)}}}ve.show&&Ls(bl,ve.filter(n,Ge,t,q,De),o,r,wt,_t,et(ve.width*We,3),ve.stroke(n,t),ve.dash,ve.cap);let Gl=s.grid;Gl.show&&Ls(bl,Gl.filter(n,Ge,t,q,De),o,o==0?2:1,o==0?lt:ct,o==0?At:vt,et(Gl.width*We,3),Gl.stroke(n,t),Gl.dash,Gl.cap),ue.show&&Ls([wt],[1],o==0?1:0,o==0?1:2,o==1?lt:ct,o==1?At:vt,et(ue.width*We,3),ue.stroke(n,t),ue.dash,ue.cap)}Ut("drawAxes")}function fn(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(i==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let rs=!1,Ps=!1,Vn=[];function xr(){Ps=!1;for(let t=0;t<Vn.length;t++)Ut(...Vn[t]);Vn.length=0}function dn(){rs||(Uo(xa),rs=!0)}function yr(t,s=!1){rs=!0,Ps=s,t(n),xa(),s&&Vn.length>0&&queueMicrotask(xr)}n.batch=yr;function xa(){if(ol&&(Nn(),ol=!1),Pt&&(xe(),Pt=!1),gl){if(rt(V,bn,Oe),rt(V,Kn,qe),rt(V,Zn,me),rt(V,Qn,I),rt(S,bn,Oe),rt(S,Kn,qe),rt(S,Zn,me),rt(S,Qn,I),rt(_,Zn,zt),rt(_,Qn,Mt),k.width=Ot(zt*We),k.height=Ot(Mt*We),W.forEach(({_el:t,_show:s,_size:r,_pos:o,side:d})=>{if(t!=null)if(s){let m=d===3||d===0?r:0,x=d%2==1;rt(t,x?"left":"top",o-m),rt(t,x?"width":"height",r),rt(t,x?"top":"left",x?qe:Oe),rt(t,x?"height":"width",x?I:me),Qs(t,sn)}else hl(t,sn)}),el=Je=Vt=zl=ul=Ul=Ee=Yt=_l=null,Ft=1,Un(!0),Oe!=jt||qe!=Xt||me!=Lt||I!=Jt){fn(!1);let t=me/Lt,s=I/Jt;if(Qe&&!Zt&&Y.left>=0){Y.left*=t,Y.top*=s,pn&&Il(pn,Ot(Y.left),0,me,I),hn&&Il(hn,0,Ot(Y.top),me,I);for(let r=0;r<Be.length;r++){let o=Be[r];o!=null&&(Rt[r]*=t,il[r]*=s,Il(o,yl(Rt[r]),yl(il[r]),me,I))}}if(at.show&&!Sl&&at.left>=0&&at.width>0){at.left*=t,at.width*=t,at.top*=s,at.height*=s;for(let r in Is)rt(gn,r,at[r])}jt=Oe,Xt=qe,Lt=me,Jt=I}Ut("setSize"),gl=!1}zt>0&&Mt>0&&(g.clearRect(0,0,k.width,k.height),Ut("drawClear"),ee.forEach(t=>t()),Ut("draw")),at.show&&Sl&&(os(at),Sl=!1),Qe&&Zt&&(en(null,!0,!1),Zt=!1),ce.show&&ce.live&&mt&&(Ns(),mt=!1),h||(h=!0,n.status=1,Ut("ready")),pt=!1,rs=!1}n.redraw=(t,s)=>{Pt=s||!1,t!==!1?Yl(C,b.min,b.max):dn()};function Rs(t,s){let r=A[t];if(r.from==null){if(oe==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(oe>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==C&&r.distr==2&&oe>0&&(s.min=Al(s.min,l[0]),s.max=Al(s.max,l[0]),s.min==s.max&&s.max++),R[t]=s,ol=!0,dn()}}n.setScale=Rs;let Fs,Os,pn,hn,ya,Sa,vn,mn,ka,Ta,st,ut,ql=!1;const Kt=Y.drag;let Ht=Kt.x,Wt=Kt.y;Qe&&(Y.x&&(Fs=xl(ho,S)),Y.y&&(Os=xl(vo,S)),b.ori==0?(pn=Fs,hn=Os):(pn=Os,hn=Fs),st=Y.left,ut=Y.top);const at=n.select=Dt({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),gn=at.show?xl(po,at.over?S:V):null;function os(t,s){if(at.show){for(let r in t)at[r]=t[r],r in Is&&rt(gn,r,t[r]);s!==!1&&Ut("setSelect")}}n.setSelect=os;function Sr(t){if(y[t].show)ke&&Qs(Re[t],sn);else if(ke&&hl(Re[t],sn),Qe){let r=kt?Be[0]:Be[t];r!=null&&Il(r,-10,-10,me,I)}}function Yl(t,s,r){Rs(t,{min:s,max:r})}function Fl(t,s,r,o){s.focus!=null&&Ar(t),s.show!=null&&y.forEach((d,m)=>{m>0&&(t==m||t==null)&&(d.show=s.show,Sr(m),i==2?(Yl(d.facets[0].scale,null,null),Yl(d.facets[1].scale,null,null)):Yl(d.scale,null,null),dn())}),r!==!1&&Ut("setSeries",t,s),o&&qn("setSeries",n,t,s)}n.setSeries=Fl;function kr(t,s){Dt(D[t],s)}function Tr(t,s){t.fill=Le(t.fill||null),t.dir=Ie(t.dir,-1),s=s??D.length,D.splice(s,0,t)}function Er(t){t==null?D.length=0:D.splice(t,1)}n.addBand=Tr,n.setBand=kr,n.delBand=Er;function Mr(t,s){y[t].alpha=s,Qe&&Be[t]!=null&&(Be[t].style.opacity=s),ke&&Re[t]&&(Re[t].style.opacity=s)}let Bl,Kl,$l;const _n={focus:!0};function Ar(t){if(t!=$l){let s=t==null,r=Qt.alpha!=1;y.forEach((o,d)=>{if(i==1||d>0){let m=s||d==0||d==t;o._focus=s?null:m,r&&Mr(d,m?1:Qt.alpha)}}),$l=t,r&&dn()}}ke&&Pl&&ze(qa,be,t=>{Y._lock||(nt(t),$l!=null&&Fl(null,_n,!0,Ct.setSeries))});function Ol(t,s,r){let o=A[s];r&&(t=t/We-(o.ori==1?qe:Oe));let d=me;o.ori==1&&(d=I,t=d-t),o.dir==-1&&(t=d-t);let m=o._min,x=o._max,E=t/d,P=m+(x-m)*E,q=o.distr;return q==3?Mn(10,P):q==4?Po(P,o.asinh):q==100?o.bwd(P):P}function Cr(t,s){let r=Ol(t,C,s);return Al(r,l[0],Te,pe)}n.valToIdx=t=>Al(t,l[0]),n.posToIdx=Cr,n.posToVal=Ol,n.valToPos=(t,s,r)=>A[s].ori==0?u(t,A[s],r?vt:me,r?ct:0):c(t,A[s],r?At:I,r?lt:0),n.setCursor=(t,s,r)=>{st=t.left,ut=t.top,en(null,s,r)};function Ea(t,s){rt(gn,bn,at.left=t),rt(gn,Zn,at.width=s)}function Ma(t,s){rt(gn,Kn,at.top=t),rt(gn,Qn,at.height=s)}let Hn=b.ori==0?Ea:Ma,Wn=b.ori==1?Ea:Ma;function Dr(){if(ke&&ce.live)for(let t=i==2?1:0;t<y.length;t++){if(t==0&&je)continue;let s=ce.values[t],r=0;for(let o in s)yt[t][r++].firstChild.nodeValue=s[o]}}function Ns(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{_e[o]=r}):No(t.idx)||_e.fill(t.idx),ce.idx=_e[0]),ke&&ce.live){for(let r=0;r<y.length;r++)(r>0||i==1&&!je)&&Lr(r,_e[r]);Dr()}mt=!1,s!==!1&&Ut("setLegend")}n.setLegend=Ns;function Lr(t,s){let r=y[t],o=t==0&&z==2?Ve:l[t],d;je?d=r.values(n,t,s)??ft:(d=r.value(n,s==null?null:o[s],t,s),d=d==null?ft:{_:d}),ce.values[t]=d}function en(t,s,r){ka=st,Ta=ut,[st,ut]=Y.move(n,st,ut),Y.left=st,Y.top=ut,Qe&&(pn&&Il(pn,Ot(st),0,me,I),hn&&Il(hn,0,Ot(ut),me,I));let o,d=Te>pe;Bl=$e,Kl=null;let m=b.ori==0?me:I,x=b.ori==1?me:I;if(st<0||oe==0||d){o=Y.idx=null;for(let E=0;E<y.length;E++){let P=Be[E];P!=null&&Il(P,-10,-10,me,I)}Pl&&Fl(null,_n,!0,t==null&&Ct.setSeries),ce.live&&(_e.fill(o),mt=!0)}else{let E,P,q;i==1&&(E=b.ori==0?st:ut,P=Ol(E,C),o=Y.idx=Al(P,l[0],Te,pe),q=F(l[0][o],b,m,0));let K=-10,Q=-10,we=0,He=0,Ge=!0,De="",ve="";for(let ue=i==2?1:0;ue<y.length;ue++){let it=y[ue],_t=_e[ue],qt=_t==null?null:i==1?l[ue][_t]:l[ue][1][_t],Ze=Y.dataIdx(n,ue,o,P),wt=Ze==null?null:i==1?l[ue][Ze]:l[ue][1][Ze];if(mt=mt||wt!=qt||Ze!=_t,_e[ue]=Ze,ue>0&&it.show){let fl=Ze==null?-10:Ze==o?q:F(i==1?l[0][Ze]:l[ue][0][Ze],b,m,0),tl=wt==null?-10:ne(wt,i==1?A[it.scale]:A[it.facets[1].scale],x,0);if(Pl&&wt!=null){let wl=b.ori==1?st:ut,Tl=Nt(Qt.dist(n,ue,Ze,tl,wl));if(Tl<Bl){let Nl=Qt.bias;if(Nl!=0){let dl=Ol(wl,it.scale),bl=wt>=0?1:-1,El=dl>=0?1:-1;El==bl&&(El==1?Nl==1?wt>=dl:wt<=dl:Nl==1?wt<=dl:wt>=dl)&&(Bl=Tl,Kl=ue)}else Bl=Tl,Kl=ue}}if(mt||kt){let wl,Tl;b.ori==0?(wl=fl,Tl=tl):(wl=tl,Tl=fl);let Nl,dl,bl,El,Gl,ll,pl=!0,tn=Xe.bbox;if(tn!=null){pl=!1;let nl=tn(n,ue);bl=nl.left,El=nl.top,Nl=nl.width,dl=nl.height}else bl=wl,El=Tl,Nl=dl=Xe.size(n,ue);if(ll=Xe.fill(n,ue),Gl=Xe.stroke(n,ue),kt)ue==Kl&&Bl<=Qt.prox&&(K=bl,Q=El,we=Nl,He=dl,Ge=pl,De=ll,ve=Gl);else{let nl=Be[ue];nl!=null&&(Rt[ue]=bl,il[ue]=El,Xa(nl,Nl,dl,pl),Za(nl,ll,Gl),Il(nl,yl(bl),yl(El),me,I))}}}}if(kt){let ue=Qt.prox,it=$l==null?Bl<=ue:Bl>ue||Kl!=$l;if(mt||it){let _t=Be[0];_t!=null&&(Rt[0]=K,il[0]=Q,Xa(_t,we,He,Ge),Za(_t,De,ve),Il(_t,yl(K),yl(Q),me,I))}}}if(at.show&&ql)if(t!=null){let[E,P]=Ct.scales,[q,K]=Ct.match,[Q,we]=t.cursor.sync.scales,He=t.cursor.drag;if(Ht=He._x,Wt=He._y,Ht||Wt){let{left:Ge,top:De,width:ve,height:ue}=t.select,it=t.scales[Q].ori,_t=t.posToVal,qt,Ze,wt,fl,tl,wl=E!=null&&q(E,Q),Tl=P!=null&&K(P,we);wl&&Ht?(it==0?(qt=Ge,Ze=ve):(qt=De,Ze=ue),wt=A[E],fl=F(_t(qt,Q),wt,m,0),tl=F(_t(qt+Ze,Q),wt,m,0),Hn(Dl(fl,tl),Nt(tl-fl))):Hn(0,m),Tl&&Wt?(it==1?(qt=Ge,Ze=ve):(qt=De,Ze=ue),wt=A[P],fl=ne(_t(qt,we),wt,x,0),tl=ne(_t(qt+Ze,we),wt,x,0),Wn(Dl(fl,tl),Nt(tl-fl))):Wn(0,x)}else zs()}else{let E=Nt(ka-ya),P=Nt(Ta-Sa);if(b.ori==1){let we=E;E=P,P=we}Ht=Kt.x&&E>=Kt.dist,Wt=Kt.y&&P>=Kt.dist;let q=Kt.uni;q!=null?Ht&&Wt&&(Ht=E>=q,Wt=P>=q,!Ht&&!Wt&&(P>E?Wt=!0:Ht=!0)):Kt.x&&Kt.y&&(Ht||Wt)&&(Ht=Wt=!0);let K,Q;Ht&&(b.ori==0?(K=vn,Q=st):(K=mn,Q=ut),Hn(Dl(K,Q),Nt(Q-K)),Wt||Wn(0,x)),Wt&&(b.ori==1?(K=vn,Q=st):(K=mn,Q=ut),Wn(Dl(K,Q),Nt(Q-K)),Ht||Hn(0,m)),!Ht&&!Wt&&(Hn(0,0),Wn(0,0))}if(Kt._x=Ht,Kt._y=Wt,t==null){if(r){if(Ia!=null){let[E,P]=Ct.scales;Ct.values[0]=E!=null?Ol(b.ori==0?st:ut,E):null,Ct.values[1]=P!=null?Ol(b.ori==1?st:ut,P):null}qn(Ws,n,st,ut,me,I,o)}if(Pl){let E=r&&Ct.setSeries,P=Qt.prox;$l==null?Bl<=P&&Fl(Kl,_n,!0,E):Bl>P?Fl(null,_n,!0,E):Kl!=$l&&Fl(Kl,_n,!0,E)}}mt&&(ce.idx=o,Ns()),s!==!1&&Ut("setCursor")}let jl=null;Object.defineProperty(n,"rect",{get(){return jl==null&&Un(!1),jl}});function Un(t=!1){t?jl=null:(jl=S.getBoundingClientRect(),Ut("syncRect",jl))}function Aa(t,s,r,o,d,m,x){Y._lock||ql&&t!=null&&t.movementX==0&&t.movementY==0||(Gs(t,s,r,o,d,m,x,!1,t!=null),t!=null?en(null,!0,!0):en(s,!0,!1))}function Gs(t,s,r,o,d,m,x,E,P){if(jl==null&&Un(!1),nt(t),t!=null)r=t.clientX-jl.left,o=t.clientY-jl.top;else{if(r<0||o<0){st=-10,ut=-10;return}let[q,K]=Ct.scales,Q=s.cursor.sync,[we,He]=Q.values,[Ge,De]=Q.scales,[ve,ue]=Ct.match,it=s.axes[0].side%2==1,_t=b.ori==0?me:I,qt=b.ori==1?me:I,Ze=it?m:d,wt=it?d:m,fl=it?o:r,tl=it?r:o;if(Ge!=null?r=ve(q,Ge)?p(we,A[q],_t,0):-10:r=_t*(fl/Ze),De!=null?o=ue(K,De)?p(He,A[K],qt,0):-10:o=qt*(tl/wt),b.ori==1){let wl=r;r=o,o=wl}}P&&(s==null||s.cursor.event.type==Ws)&&((r<=1||r>=me-1)&&(r=ln(r,me)),(o<=1||o>=I-1)&&(o=ln(o,I))),E?(ya=r,Sa=o,[vn,mn]=Y.move(n,r,o)):(st=r,ut=o)}const Is={width:0,height:0,left:0,top:0};function zs(){os(Is,!1)}let Ca,Da,La,Pa;function Ra(t,s,r,o,d,m,x){ql=!0,Ht=Wt=Kt._x=Kt._y=!1,Gs(t,s,r,o,d,m,x,!0,!1),t!=null&&(ze(Us,Js,Fa,!1),qn(Wa,n,vn,mn,me,I,null));let{left:E,top:P,width:q,height:K}=at;Ca=E,Da=P,La=q,Pa=K}function Fa(t,s,r,o,d,m,x){ql=Kt._x=Kt._y=!1,Gs(t,s,r,o,d,m,x,!1,!0);let{left:E,top:P,width:q,height:K}=at,Q=q>0||K>0,we=Ca!=E||Da!=P||La!=q||Pa!=K;if(Q&&we&&os(at),Kt.setScale&&Q&&we){let He=E,Ge=q,De=P,ve=K;if(b.ori==1&&(He=P,Ge=K,De=E,ve=q),Ht&&Yl(C,Ol(He,C),Ol(He+Ge,C)),Wt)for(let ue in A){let it=A[ue];ue!=C&&it.from==null&&it.min!=$e&&Yl(ue,Ol(De+ve,ue),Ol(De,ue))}zs()}else Y.lock&&(Y._lock=!Y._lock,en(s,!0,t!=null));t!=null&&(St(Us,Js),qn(Us,n,st,ut,me,I,null))}function Pr(t,s,r,o,d,m,x){if(Y._lock)return;nt(t);let E=ql;if(ql){let P=!0,q=!0,K=10,Q,we;b.ori==0?(Q=Ht,we=Wt):(Q=Wt,we=Ht),Q&&we&&(P=st<=K||st>=me-K,q=ut<=K||ut>=I-K),Q&&P&&(st=st<vn?0:me),we&&q&&(ut=ut<mn?0:I),en(null,!0,!0),ql=!1}st=-10,ut=-10,_e.fill(null),en(null,!0,!0),E&&(ql=E)}function Oa(t,s,r,o,d,m,x){Y._lock||(nt(t),cl(),zs(),t!=null&&qn(Ya,n,st,ut,me,I,null))}function Na(){W.forEach(Xc),kl(n.width,n.height,!0)}an(gs,En,Na);const wn={};wn.mousedown=Ra,wn.mousemove=Aa,wn.mouseup=Fa,wn.dblclick=Oa,wn.setSeries=(t,s,r,o)=>{let d=Ct.match[2];r=d(n,s,r),r!=-1&&Fl(r,o,!0,!1)},Qe&&(ze(Wa,S,Ra),ze(Ws,S,Aa),ze(Ua,S,t=>{nt(t),Un(!1)}),ze(qa,S,Pr),ze(Ya,S,Oa),na.add(n),n.syncRect=Un);const cs=n.hooks=e.hooks||{};function Ut(t,s,r){Ps?Vn.push([t,s,r]):t in cs&&cs[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)cs[s]=(cs[s]||[]).concat(t.hooks[s])});const Ga=(t,s,r)=>r,Ct=Dt({key:null,setSeries:!1,filters:{pub:ni,sub:ni},scales:[C,y[1]?y[1].scale:null],match:[si,si,Ga],values:[null,null]},Y.sync);Ct.match.length==2&&Ct.match.push(Ga),Y.sync=Ct;const Ia=Ct.key,Bs=ar(Ia);function qn(t,s,r,o,d,m,x){Ct.filters.pub(t,s,r,o,d,m,x)&&Bs.pub(t,s,r,o,d,m,x)}Bs.sub(n);function Rr(t,s,r,o,d,m,x){Ct.filters.sub(t,s,r,o,d,m,x)&&wn[t](null,s,r,o,d,m,x)}n.pub=Rr;function Fr(){Bs.unsub(n),na.delete(n),It.clear(),Xs(gs,En,Na),v.remove(),be?.remove(),Ut("destroy")}n.destroy=Fr;function Vs(){Ut("init",e,l),rl(l||e.data,!1),R[C]?Rs(C,R[C]):cl(),Sl=at.show&&(at.width>0||at.height>0),Zt=mt=!0,kl(e.width,e.height)}return y.forEach(U),W.forEach(N),a?a instanceof HTMLElement?(a.appendChild(v),Vs()):a(n,Vs):Vs(),n}xt.assign=Dt;xt.fmtNum=da;xt.rangeNum=_s;xt.rangeLog=ks;xt.rangeAsinh=ua;xt.orient=on;xt.pxRatio=We;xt.join=Wo;xt.fmtDate=ha,xt.tzDate=ec;xt.sync=ar;{xt.addGap=Nc,xt.clipGaps=Ms;let e=xt.paths={points:fr};e.linear=pr,e.stepped=zc,e.bars=Bc,e.spline=Hc}var $c=Fe('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),eu=Fe('<span class="estimated-badge svelte-3wi8ix">est</span>'),tu=Fe('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),lu=Fe('<span class="estimated-badge svelte-3wi8ix">est</span>'),nu=Fe("<span> </span> <!>",1),su=Fe('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),au=Fe('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),iu=Fe('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function ru(e,l){xs(l,!0);const a=.5,n=1.2,i=0,u=100;function c(b,z){const F=[...b].sort((L,Se)=>L-Se),ne=z/100*(F.length-1),R=Math.floor(ne),Z=Math.ceil(ne);return R===Z?F[R]:F[R]+(F[Z]-F[R])*(ne-R)}let p=Tn(l,"trend",3,null),h=Pe(!1),v=Pe(""),k=Pe(null),g=Ke(()=>hs.config.temp_units==="C"),_=Ke(Di),V=Ke(ia),S=Ke(()=>{if(l.readings.length===0)return null;const b=l.readings.filter(Ae=>Ae.status!=="invalid");if(b.length===0)return null;const z=[...b].sort((Ae,Et)=>new Date(Ae.timestamp).getTime()-new Date(Et.timestamp).getTime()),F=z[0],ne=z[z.length-1],R=z.map(Ae=>Ae.sg_calibrated??Ae.sg_raw).filter(Ae=>Ae!==null&&Ae>=a&&Ae<=n),Z=z.map(Ae=>Ae.temp_calibrated??Ae.temp_raw).filter(Ae=>Ae!==null&&Ae>=i&&Ae<=u);if(R.length===0)return null;const L=R[R.length-1],Se=R[0],ge=c(R,95),de=c(R,5),_e=new Date(F.timestamp).getTime(),ce=new Date(ne.timestamp).getTime(),ke=(ce-_e)/(1e3*60*60*24),Qe=ke>0?(L-Se)/ke:0;let Me=null,be=null,tt=null,ot=null;if(Z.length>0){const Ae=Z[Z.length-1],Et=Z.reduce((ze,St)=>ze+St,0)/Z.length,al=c(Z,95),It=c(Z,5);Me=f(g)?Ae:Ae*9/5+32,be=f(g)?Et:Et*9/5+32,tt=f(g)?al:al*9/5+32,ot=f(g)?It:It*9/5+32}let Re=0;const yt=.001;for(let Ae=R.length-2;Ae>=0;Ae--)if(Math.abs(R[Ae]-L)>yt){const Et=new Date(z[Ae+1].timestamp).getTime();Re=(ce-Et)/(1e3*60*60*24);break}let Tt=null,je=null;const ft=l.originalGravity??ge,dt=l.originalGravity===null;return ft>1&&ft>L&&(Tt=(ft-L)/(ft-1)*100,je=(ft-L)*131.25),{currentSg:L,firstSg:Se,highSg:ge,lowSg:de,currentTemp:Me,avgTemp:be,highTemp:tt,lowTemp:ot,fermRate:Qe,durationDays:ke,daysAtCurrentSg:Re,apparentAttenuation:Tt,abv:je,ogIsEstimated:dt,effectiveOg:ft}});function H(){X(v,l.originalGravity?.toFixed(3)??"",!0),X(h,!0),setTimeout(()=>f(k)?.focus(),0)}function $(){const b=f(v).trim();if(!b)l.onOgChange?.(null);else{const z=parseFloat(b);!isNaN(z)&&z>=.99&&z<=1.2&&l.onOgChange?.(z)}X(h,!1)}function re(b){b.key==="Enter"?$():b.key==="Escape"&&X(h,!1)}function y(b){return Sn(b)}function W(b){return`${b>=0?"+":""}${b.toFixed(4)}`}function A(b){return b<1?`${(b*24).toFixed(1)}h`:`${b.toFixed(1)}d`}function D(b){return b===null?"--":b.toFixed(1)}function C(b){return b===null?"--":`${b.toFixed(1)}%`}var ae=ls(),ee=Vl(ae);{var J=b=>{var z=au(),F=M(z),ne=M(F),R=M(ne),Z=M(R,!0);T(R);var L=G(R,2),Se=G(M(L),2),ge=M(Se,!0);T(Se),T(L);var de=G(L,2),_e=G(M(de),2),ce=M(_e,!0);T(_e),T(de);var Y=G(de,2),ke=G(M(Y),2),Qe=M(ke,!0);T(ke),T(Y);var Me=G(Y,2),be=G(M(Me),2),tt=M(be,!0);T(be),T(Me),T(ne);var ot=G(ne,2),Re=G(M(ot),2),yt=G(M(Re),2),Tt=M(yt,!0),je=G(Tt),ft=M(je,!0);T(je),T(yt),T(Re);var dt=G(Re,2),Ae=G(M(dt),2),Et=M(Ae,!0),al=G(Et),It=M(al,!0);T(al),T(Ae),T(dt);var ze=G(dt,2),St=G(M(ze),2),zt=M(St,!0),Mt=G(zt),me=M(Mt,!0);T(Mt),T(St),T(ze);var I=G(ze,2),Oe=G(M(I),2),qe=M(Oe,!0),jt=G(qe),Xt=M(jt,!0);T(jt),T(Oe),T(I),T(ot),T(F);var Lt=G(F,2),Jt=M(Lt),ct=G(M(Jt),2);let lt;var vt=M(ct);T(ct),T(Jt);var At=G(Jt,2),ol=G(M(At),2),gl=M(ol,!0);T(ol),T(At);var Pt=G(At,2),Zt=G(M(Pt),2),Sl=M(Zt,!0);T(Zt),T(Pt);var mt=G(Pt,2),kl=G(M(mt),2);{var se=kt=>{var Be=$c();yn(Be),Be.__keydown=re,aa(Be,Rt=>X(k,Rt),()=>f(k)),Ei("blur",Be,$),Ci(Be,()=>f(v),Rt=>X(v,Rt)),Ce(kt,Be)},he=kt=>{var Be=ls(),Rt=Vl(Be);{var il=U=>{var te=tu();te.__click=H;var j=M(te);let ie;var N=M(j,!0);T(j);var w=G(j,2);{var B=fe=>{var oe=eu();Ce(fe,oe)};ht(w,fe=>{f(S).ogIsEstimated&&fe(B)})}Cl(2),T(te),bt(fe=>{kn(te,"title",f(S).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),ie=Ll(j,1,"stat-value svelte-3wi8ix",null,ie,{estimated:f(S).ogIsEstimated}),ye(N,fe)},[()=>y(f(S).effectiveOg)]),Ce(U,te)},O=U=>{var te=nu(),j=Vl(te);let ie;var N=M(j,!0);T(j);var w=G(j,2);{var B=fe=>{var oe=lu();Ce(fe,oe)};ht(w,fe=>{f(S).ogIsEstimated&&fe(B)})}bt(fe=>{ie=Ll(j,1,"stat-value svelte-3wi8ix",null,ie,{estimated:f(S).ogIsEstimated}),ye(N,fe)},[()=>y(f(S).effectiveOg)]),Ce(U,te)};ht(Rt,U=>{l.onOgChange?U(il):U(O,!1)},!0)}Ce(kt,Be)};ht(kl,kt=>{l.onOgChange&&f(h)?kt(se):kt(he,!1)})}T(mt);var xe=G(mt,2),Ne=G(M(xe),2),Bt=M(Ne,!0);T(Ne),T(xe);var $t=G(xe,2),nt=G(M($t),2),Xe=M(nt,!0);T(nt),T($t);var Qt=G($t,2);{var Pl=kt=>{var Be=su(),Rt=G(M(Be),2),il=M(Rt,!0);T(Rt),Cl(2),T(Be),bt((O,U)=>{kn(Be,"title",`Estimated time until target FG (R=${O??""})`),ye(il,U)},[()=>p().r2.toFixed(2),()=>A(p().daysToFg)]),Ce(kt,Be)};ht(Qt,kt=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&kt(Pl)})}T(Lt),T(z),bt((kt,Be,Rt,il,O,U,te,j,ie,N,w,B,fe)=>{ye(Z,f(V)==="SG"?"Gravity":f(V)==="P"?"Plato":"Brix"),ye(ge,kt),ye(ce,Be),ye(Qe,Rt),ye(tt,il),ye(Tt,O),ye(ft,f(_)),ye(Et,U),ye(It,f(_)),ye(zt,te),ye(me,f(_)),ye(qe,j),ye(Xt,f(_)),lt=Ll(ct,1,"stat-value rate svelte-3wi8ix",null,lt,{fermenting:f(S).fermRate<0}),ye(vt,`${ie??""}/day`),ye(gl,N),ye(Sl,w),ye(Bt,B),ye(Xe,fe)},[()=>y(f(S).currentSg),()=>y(f(S).firstSg),()=>y(f(S).highSg),()=>y(f(S).lowSg),()=>D(f(S).currentTemp),()=>D(f(S).avgTemp),()=>D(f(S).highTemp),()=>D(f(S).lowTemp),()=>W(f(S).fermRate),()=>A(f(S).durationDays),()=>A(f(S).daysAtCurrentSg),()=>C(f(S).apparentAttenuation),()=>C(f(S).abv)]),Ce(b,z)},le=b=>{var z=iu();Ce(b,z)};ht(ee,b=>{f(S)?b(J):b(le,!1)})}Ce(e,ae),ys()}bs(["keydown","click"]);var ou=Fe('<button type="button"> </button>'),cu=Fe("<option> </option>"),uu=Fe('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),fu=Fe('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),du=Fe('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),pu=Fe('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Filtered SG</span></label> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Filtered Temp</span></label> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Anomalies</span></label> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Control Periods</span></label></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function hu(e,l){xs(l,!0);const a="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let i=Ke(()=>hs.config.smoothing_enabled),u=Ke(()=>hs.config.smoothing_samples),c=Pe("UTC"),p=Pe(0),h=Pe(3),v=Tn(l,"deviceColor",3,"BLACK"),k=Tn(l,"originalGravity",3,null),g=Tn(l,"controlEvents",19,()=>[]),_=Ke(()=>hs.config.temp_units==="C"),V=Ke(ia),S,H=null,$=Pe(!0),re=Pe(null),y=Pe(24),W=Pe(Zl([])),A=Pe(Zl([])),D=Pe(Zl([])),C=Pe(null),ae=Pe(null);const ee={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},J="#facc15",le="rgba(250, 204, 21, 0.3)",b="#71717a",z="#a1a1aa",F="rgba(255, 255, 255, 0.04)",ne="#22d3ee",R="#a78bfa",Z="rgba(250, 204, 21, 0.5)",L="brewsignal_chart_trend_enabled";let Se=Pe(!0);const ge="brewsignal_chart_show_filtered_sg",de="brewsignal_chart_show_filtered_temp";let _e=Pe(!1),ce=Pe(!1);const Y="brewsignal_chart_show_anomaly_markers";let ke=Pe(!1);const Qe="brewsignal_chart_show_control_bands";let Me=Pe(!1),be=Pe(Zl([])),tt=Pe(Zl([]));function ot(O,U,te=1.01){const j=[];for(let Je=0;Je<O.length;Je++)U[Je]!==null&&j.push([O[Je],U[Je]]);if(j.length<10)return null;const ie=j.length;let N=0,w=0,B=0,fe=0;for(const[Je,Vt]of j)N+=Je,w+=Vt,B+=Je*Vt,fe+=Je*Je;const oe=ie*fe-N*N;if(Math.abs(oe)<1e-10)return null;const Te=(ie*B-N*w)/oe,pe=(w-Te*N)/ie,Ye=w/ie;let Ve=0,pt=0;for(const[Je,Vt]of j){const _l=Te*Je+pe;Ve+=(Vt-_l)**2,pt+=(Vt-Ye)**2}const rl=pt>0?1-Ve/pt:0;let cl=null,el=null;if(Te<0&&rl>.3){const Je=O[O.length-1],Vt=(te-pe)/Te;Vt>Je&&(el=(Vt-Je)/(1440*60),el>0&&el<60?cl=te:el=null)}return{slope:Te,intercept:pe,r2:rl,predictedFg:cl,daysToFg:el}}function Re(O,U){return O.map(te=>U.slope*te+U.intercept)}function yt(O,U,te){const j=new Date(O*1e3);try{return te?j.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:U}):j.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:U})}catch(ie){return console.warn("Invalid timezone:",U,ie),te?j.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):j.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function Tt(O,U,te){const j=J,ie=ee[v()]||z;return{width:O,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[N=>{const w=N.cursor.idx;if(w==null)return;const B=N.root.querySelector(".u-legend");if(!B)return;let fe="";if(f(ke)&&f(be).length>0){const oe=N.data[0][w];if(oe!=null){const pe=f(be).find(Ye=>Math.abs(Ye.timestamp-oe)<300);if(pe){const Ye=pe.anomalyScore?.toFixed(3)??"N/A",Ve=pe.anomalyReasons??"Unknown";fe=`
										<div style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid var(--border-subtle);">
											<div style="color: #ef4444; font-weight: 600; margin-bottom: 0.25rem;"> ANOMALY</div>
											<div style="color: var(--text-muted);">Score: ${Ye}</div>
											<div style="color: var(--text-muted); margin-top: 0.25rem; max-width: 200px; white-space: normal;">${Ve}</div>
										</div>
									`}}}if(B.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`,fe){const oe=B.querySelectorAll(".u-series");if(oe.length>0){oe[oe.length-1];const Te=B.querySelector(".anomaly-info");Te&&Te.remove();const pe=document.createElement("div");pe.className="anomaly-info",pe.innerHTML=fe,B.appendChild(pe)}}else{const oe=B.querySelector(".anomaly-info");oe&&oe.remove()}}],draw:[N=>{const w=N.ctx,{left:B,top:fe,width:oe,height:Te}=N.bbox;if(f(Me)&&f(tt).length>0){w.save();for(const pe of f(tt)){const Ye=N.valToPos(pe.startTime,"x",!0),Ve=N.valToPos(pe.endTime,"x",!0);if(Ve>=B&&Ye<=B+oe){const pt=Math.max(Ye,B),rl=Math.min(Ve,B+oe);pe.type==="heating"?w.fillStyle="rgba(239, 68, 68, 0.1)":w.fillStyle="rgba(59, 130, 246, 0.1)",w.fillRect(pt,fe,rl-pt,Te)}}w.restore()}if(!(!f(ke)||f(be).length===0)){w.save();for(const pe of f(be)){if(pe.sgValue===null)continue;const Ye=N.valToPos(pe.timestamp,"x",!0),Ve=N.valToPos(pe.sgValue,"sg",!0);if(Ye>=B&&Ye<=B+oe&&Ve>=fe&&Ve<=fe+Te){w.fillStyle="#ef4444",w.strokeStyle="#991b1b",w.lineWidth=1.5;const pt=8;w.beginPath(),w.moveTo(Ye,Ve-pt),w.lineTo(Ye-pt*.866,Ve+pt*.5),w.lineTo(Ye+pt*.866,Ve+pt*.5),w.closePath(),w.fill(),w.stroke(),w.fillStyle="#ffffff",w.font="bold 8px sans-serif",w.textAlign="center",w.textBaseline="middle",w.fillText("!",Ye,Ve)}}w.restore()}}]},scales:{x:{time:!0},sg:{auto:!0,range:(N,w,B)=>{const fe=(B-w)*.1||.005;return[w-fe,B+fe]}},temp:{auto:!0,range:(N,w,B)=>{const fe=B-w,oe=10;if(fe<oe){const pe=(B+w)/2;return[pe-oe/2,pe+oe/2]}const Te=fe*.1;return[w-Te,B+Te]}}},axes:[{stroke:b,grid:{stroke:F,width:1},ticks:{stroke:F,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(N,w)=>w.map(B=>yt(B,te,f(y)<=24))},{scale:"sg",stroke:j,grid:{stroke:F,width:1},ticks:{stroke:F,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(N,w)=>w.map(B=>Sn(B)),side:3},{scale:"temp",stroke:ie,grid:{show:!1},ticks:{stroke:F,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(N,w)=>w.map(B=>B.toFixed(0)+""),side:1}],series:[{value:(N,w)=>yt(w,te,!1)+" "+yt(w,te,!0)},{label:f(V)==="SG"?"Gravity":f(V)==="P"?"Plato":"Brix",scale:"sg",stroke:j,width:2,value:(N,w)=>w!==null?Sn(w):"--",fill:(N,w)=>{const B=N.ctx.createLinearGradient(0,N.bbox.top,0,N.bbox.top+N.bbox.height);return B.addColorStop(0,le),B.addColorStop(1,"transparent"),B},points:{show:!1},paths:xt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:ie,width:1.5,dash:[4,4],value:(N,w)=>w!==null?w.toFixed(1)+"":"--",points:{show:!1},paths:xt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:ne,width:1.5,dash:[2,4],value:(N,w)=>w!==null?w.toFixed(1)+"":"--",points:{show:!1},paths:xt.paths.spline?.()},{label:"Chamber",scale:"temp",stroke:R,width:1.5,dash:[4,2],value:(N,w)=>w!==null?w.toFixed(1)+"":"--",points:{show:!1},paths:xt.paths.spline?.()},{label:"Filtered SG",show:f(_e),scale:"sg",stroke:j,width:1.5,dash:[2,2],value:(N,w)=>w!==null?Sn(w):"--",points:{show:!1},paths:xt.paths.spline?.()},{label:"Filtered Temp",show:f(ce),scale:"temp",stroke:ie,width:1,dash:[2,2],value:(N,w)=>w!==null?w.toFixed(1)+"":"--",points:{show:!1},paths:xt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:Z,width:2,dash:[8,4],value:(N,w)=>w!==null?Sn(w):"--",points:{show:!1},show:f(Se)}]}}function je(O,U){if(U<=1)return O;const te=[];for(let j=0;j<O.length;j++){const ie=[],N=Math.floor(U/2);for(let w=Math.max(0,j-N);w<=Math.min(O.length-1,j+N);w++){const B=O[w];B!==null&&ie.push(B)}ie.length>0?te.push(ie.reduce((w,B)=>w+B,0)/ie.length):te.push(null)}return te}function ft(O,U,te,j,ie,N,w,B,fe,oe,Te){if(O.length<=Te)return[O,U,te,j,ie,N,w,B,fe,oe];const pe=Math.ceil(O.length/Te),Ye=[],Ve=[],pt=[],rl=[],cl=[],el=[],Je=[],Vt=[],_l=[],zl=[];for(let ul=0;ul<O.length;ul+=pe){const Ul=Math.min(ul+pe,O.length);let Ee=0,Yt=0,Ft=0,Rl=0,Fn=0,Xl=0,On=0,Nn=0,as=0,Gn=0,In=0,cn=0,zn=!1,Bn=null,un=null;for(let gt=ul;gt<Ul;gt++)U[gt]!==null&&(Ee+=U[gt],Yt++),te[gt]!==null&&(Ft+=te[gt],Rl++),j[gt]!==null&&(Fn+=j[gt],Xl++),ie[gt]!==null&&(On+=ie[gt],Nn++),N[gt]!==null&&(as+=N[gt],Gn++),w[gt]!==null&&(In+=w[gt],cn++),B[gt]&&!zn&&(zn=!0,Bn=fe[gt],un=oe[gt]);Ye.push(O[Math.floor((ul+Ul-1)/2)]),Ve.push(Yt>0?Ee/Yt:null),pt.push(Rl>0?Ft/Rl:null),rl.push(Xl>0?Fn/Xl:null),cl.push(Nn>0?On/Nn:null),el.push(Gn>0?as/Gn:null),Je.push(cn>0?In/cn:null),Vt.push(zn),_l.push(Bn),zl.push(un)}return[Ye,Ve,pt,rl,cl,el,Je,Vt,_l,zl]}function dt(O){return!O.endsWith("Z")&&!O.match(/[+-]\d{2}:\d{2}$/)&&(O=O+"Z"),new Date(O).getTime()/1e3}function Ae(O){const U=[];let te=null,j=null;for(const N of O){const w=dt(N.timestamp);N.action==="heat_on"?te=w:N.action==="heat_off"&&te!==null?(U.push({type:"heating",startTime:te,endTime:w}),te=null):N.action==="cool_on"?j=w:N.action==="cool_off"&&j!==null&&(U.push({type:"cooling",startTime:j,endTime:w}),j=null)}const ie=Date.now()/1e3;return te!==null&&U.push({type:"heating",startTime:te,endTime:ie}),j!==null&&U.push({type:"cooling",startTime:j,endTime:ie}),U}function Et(O,U,te){if(O.length===0||U.length===0)return U.map(()=>null);const j=[...O].sort((w,B)=>dt(w.timestamp)-dt(B.timestamp)),ie=j.map(w=>dt(w.timestamp)),N=j.map(w=>w.temperature===null?null:te?w.temperature:w.temperature*9/5+32);return U.map(w=>{let B=null,fe=null;for(let oe=0;oe<ie.length;oe++)if(ie[oe]<=w&&(B={time:ie[oe],temp:N[oe]}),ie[oe]>=w&&fe===null){fe={time:ie[oe],temp:N[oe]};break}if(B&&fe&&B.temp!==null&&fe.temp!==null){if(B.time===fe.time)return B.temp;const oe=(w-B.time)/(fe.time-B.time);return B.temp+oe*(fe.temp-B.temp)}return B!==null&&B.temp!==null?B.temp:fe!==null&&fe.temp!==null?fe.temp:null})}function al(O,U,te,j){const ie=[...O].reverse();let N=[],w=[],B=[];const fe=[],oe=[],Te=[];for(const Ee of ie){const Yt=dt(Ee.timestamp);N.push(Yt);const Ft=Ee.sg_calibrated??Ee.sg_raw;w.push(Ft),fe.push(Ee.is_anomaly??!1),oe.push(Ee.anomaly_score??null),Te.push(Ee.anomaly_reasons??null);const Rl=Ee.temp_calibrated??Ee.temp_raw;Rl!==null?B.push(j?Rl:Rl*9/5+32):B.push(null)}let pe=Et(U,N,j),Ye=Et(te,N,j);const Ve=new Map(ie.filter(Ee=>Ee.sg_filtered!==null&&Ee.sg_filtered!==void 0).map(Ee=>[dt(Ee.timestamp),Ee.sg_filtered])),pt=new Map(ie.filter(Ee=>Ee.temp_filtered!==null&&Ee.temp_filtered!==void 0).map(Ee=>[dt(Ee.timestamp),Ee.temp_filtered]));let rl=N.map(Ee=>{const Yt=Ve.get(Ee);return Yt!==void 0?Yt:null}),cl=N.map(Ee=>{const Yt=pt.get(Ee);return Yt!=null?j?Yt:Yt*9/5+32:null});f(i)&&f(u)>1&&(w=je(w,f(u)),B=je(B,f(u)),pe=je(pe,f(u)),Ye=je(Ye,f(u)));const el=500;let Je,Vt,_l;[N,w,B,pe,Ye,rl,cl,Je,Vt,_l]=ft(N,w,B,pe,Ye,rl,cl,fe,oe,Te,el);const zl=[];for(let Ee=0;Ee<N.length;Ee++)Je[Ee]&&w[Ee]!==null&&zl.push({timestamp:N[Ee],sgValue:w[Ee],anomalyScore:Vt[Ee],anomalyReasons:_l[Ee]});X(be,zl,!0);const ul=ot(N,w);X(C,ul,!0);const Ul=ul?Re(N,ul):N.map(()=>null);return[N,w,B,pe,Ye,rl,cl,Ul]}const It=3e4;async function ze(O=!1){const te=Date.now()-f(p);if(!(!O&&f(p)>0&&te<It)){X($,!0),X(re,null);try{if(!f(ae)){const j=await Yr(l.batchId);X(ae,j.device_id??null,!0)}if(f(ae)){const[j,ie,N]=await Promise.all([Kr(f(ae),f(y)),jr(f(y)).catch(()=>[]),Jr(f(y)).catch(()=>[])]);X(W,j,!0),X(A,ie,!0),X(D,N,!0),St()}else X(W,[],!0),X(A,[],!0),X(D,[],!0),X(re,"No device assigned to this batch")}catch(j){X(re,j instanceof Error?j.message:"Failed to load data",!0)}finally{X(p,Date.now(),!0),X($,!1)}}}function St(){if(!S||f(W).length===0)return;const O=al(f(W),f(A),f(D),f(_)),U=Tt(S.clientWidth,f(_),f(c));H&&H.destroy(),H=new xt(U,O,S)}function zt(){H&&S&&H.setSize({width:S.clientWidth,height:220})}let Mt=null;function me(){if(Mt&&(clearInterval(Mt),Mt=null),f(h)>0){const O=f(h)*60*1e3;Mt=setInterval(()=>{f($)||ze(!1)},O)}}Mi(async()=>{const O=localStorage.getItem(a);if(O!==null){const w=parseInt(O,10);Number.isNaN(w)||X(h,w,!0)}const U=localStorage.getItem(L);U!==null&&X(Se,U==="true");const te=localStorage.getItem(ge);te!==null&&X(_e,te==="true");const j=localStorage.getItem(de);j!==null&&X(ce,j==="true");const ie=localStorage.getItem(Y);ie!==null&&X(ke,ie==="true");const N=localStorage.getItem(Qe);N!==null&&X(Me,N==="true");try{const w=await fetch("/api/system/timezone");if(w.ok){const B=await w.json();X(c,B.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await ze(!0),window.addEventListener("resize",zt),me()}),zr(()=>{H?.destroy(),window.removeEventListener("resize",zt),Mt&&clearInterval(Mt)}),Jn(()=>{g()&&g().length>0?X(tt,Ae(g()),!0):X(tt,[],!0)}),Jn(()=>{f(_)!==void 0&&f(W).length>0&&S&&St()}),Jn(()=>{f(i),f(u),f(W).length>0&&S&&St()}),Jn(()=>{f(Me),f(tt),f(W).length>0&&S&&H&&H.redraw()});function I(O){const U=Number(O.target.value);X(h,U,!0),localStorage.setItem(a,String(U)),me(),ze(!0)}function Oe(){X(Se,!f(Se)),localStorage.setItem(L,String(f(Se))),St()}function qe(){f(W).length>0&&S&&St()}var jt=pu(),Xt=M(jt),Lt=M(Xt);ns(Lt,21,()=>qr,ms,(O,U)=>{var te=ou();let j;te.__click=()=>{f(y)!==f(U).hours&&(X(y,f(U).hours,!0),ze(!0))};var ie=M(te,!0);T(te),bt(()=>{j=Ll(te,1,"range-btn svelte-12kwequ",null,j,{active:f(y)===f(U).hours}),ye(ie,f(U).label)}),Ce(O,te)}),T(Lt);var Jt=G(Lt,2),ct=M(Jt),lt=G(M(ct),2);lt.__change=I,ns(lt,21,()=>n,ms,(O,U)=>{var te=cu(),j=M(te,!0);T(te);var ie={};bt(()=>{ye(j,f(U).label),ie!==(ie=f(U).value)&&(te.value=(te.__value=f(U).value)??"")}),Ce(O,te)}),T(lt);var vt;eo(lt),T(ct);var At=G(ct,2),ol=G(M(At),2),gl=M(ol);Cl(2),T(ol);var Pt=G(ol,4);let Zt;Pt.__click=Oe;var Sl=M(Pt);$n(Sl,"background: rgba(250, 204, 21, 0.5);"),Cl(2),T(Pt);var mt=G(Pt,2),kl=M(mt);yn(kl),kl.__change=()=>{localStorage.setItem(ge,String(f(_e))),qe()},Cl(2),T(mt);var se=G(mt,2),he=M(se);yn(he),he.__change=()=>{localStorage.setItem(de,String(f(ce))),qe()},Cl(2),T(se);var xe=G(se,2),Ne=M(xe);yn(Ne),Ne.__change=()=>{localStorage.setItem(Y,String(f(ke))),qe()},Cl(2),T(xe);var Bt=G(xe,2),$t=M(Bt);yn($t),$t.__change=()=>{localStorage.setItem(Qe,String(f(Me))),H&&H.redraw()},Cl(2),T(Bt),T(At),T(Jt),T(Xt);var nt=G(Xt,2),Xe=M(nt);{var Qt=O=>{var U=uu();Ce(O,U)};ht(Xe,O=>{f($)&&O(Qt)})}var Pl=G(Xe,2);{var kt=O=>{var U=fu(),te=G(M(U),2);te.__click=()=>ze(!0),T(U),Ce(O,U)},Be=O=>{var U=ls(),te=Vl(U);{var j=ie=>{var N=du();Ce(ie,N)};ht(te,ie=>{f(W).length===0&&ie(j)},!0)}Ce(O,U)};ht(Pl,O=>{f(re)?O(kt):O(Be,!1)})}T(nt),aa(nt,O=>S=O,()=>S);var Rt=G(nt,2);{var il=O=>{{let U=Ke(()=>f(C)?{predictedFg:f(C).predictedFg,daysToFg:f(C).daysToFg,r2:f(C).r2}:null);ru(O,{get readings(){return f(W)},get originalGravity(){return k()},get trend(){return f(U)}})}};ht(Rt,O=>{f(W).length>0&&O(il)})}T(jt),bt(()=>{vt!==(vt=f(h))&&(lt.value=(lt.__value=f(h))??"",to(lt,f(h))),$n(gl,`background: ${(ee[v()]||"var(--text-secondary)")??""};`),Zt=Ll(Pt,1,"legend-item legend-toggle svelte-12kwequ",null,Zt,{"legend-disabled":!f(Se)}),kn(Pt,"title",f(Se)?"Hide trend line":"Show trend line")}),us(kl,()=>f(_e),O=>X(_e,O)),us(he,()=>f(ce),O=>X(ce,O)),us(Ne,()=>f(ke),O=>X(ke,O)),us($t,()=>f(Me),O=>X(Me,O)),Ce(e,jt),ys()}bs(["click","change"]);var vu=Fe('<span class="error-message svelte-1k5rb4o"> </span>'),mu=Fe('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),gu=Fe('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),_u=Fe('<div class="w-1 rounded-sm transition-all"></div>'),wu=Fe('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),bu=Fe(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),xu=Fe('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),yu=Fe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Su=Fe("<div><!></div>"),ku=Fe('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Tu=Fe('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function Eu(e,l){xs(l,!0);let a=Tn(l,"expanded",3,!1),n=Tn(l,"wide",3,!1),i=Ke(()=>l.batch.device_id?Ai.tilts.get(l.batch.device_id)??null:null),u=Ke(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),c=Ke(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=Ke(()=>l.progress?.temperature?.current??null),h=Ke(()=>f(i)?.color??"BLACK"),v=Ke(()=>f(i)?.rssi??null),k=Ke(()=>f(i)?.paired??!0),g=Ke(()=>f(i)?.last_seen??new Date().toISOString()),_=Ke(()=>f(i)?.sg_raw??f(c)),V=Ke(()=>f(i)?.temp_raw??f(p)),S=Pe(!1),H=Pe(Zl([])),$=Pe(!1);Jn(()=>{a()&&!f(S)&&(X(S,!0),f($)||Zr(l.batch.id,168).then(se=>{X(H,se,!0),X($,!0)}).catch(se=>{console.error("Failed to fetch control events:",se),X(H,[],!0),X($,!0)}))});let re=Pe(!1),y=Pe(""),W=Pe(null),A=Pe(!1),D=Pe(null);function C(){X(y,f(u),!0),X(re,!0),X(D,null),setTimeout(()=>f(W)?.focus(),0)}async function ae(){if(f(A))return;const se=f(y).trim();if(!se||se===f(u)){X(re,!1),X(D,null);return}X(A,!0),X(D,null);try{await Qr(l.batch.id,{name:se}),X(re,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(he){console.error("Failed to update batch name:",he),X(D,he instanceof Error?he.message:"Failed to save batch name",!0)}finally{X(A,!1)}}function ee(se){se.key==="Enter"?ae():se.key==="Escape"&&X(re,!1)}let J=Ke(Di),le=Ke(ia);const b={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function z(se){return Sn(se)}function F(se){return Ur(se)}function ne(se){return se>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:se>=-60?{bars:3,color:"var(--positive)",label:"Good"}:se>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function R(se){const he=Math.floor((Date.now()-new Date(se).getTime())/1e3);if(he<10)return"just now";if(he<60)return`${he}s ago`;const xe=Math.floor(he/60);if(xe<60)return`${xe}m ago`;const Ne=Math.floor(xe/60);return Ne<24?`${Ne}h ago`:`${Math.floor(Ne/24)}d ago`}let Z=Ke(()=>b[f(h)]||"var(--tilt-black)"),L=Ke(()=>f(v)!==null?ne(f(v)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),Se=Ke(()=>R(f(g)));var ge=Tu();let de;var _e=M(ge),ce=G(_e,2),Y=M(ce),ke=M(Y),Qe=M(ke);{var Me=se=>{var he=mu(),xe=M(he);yn(xe),xe.__keydown=ee;let Ne;aa(xe,nt=>X(W,nt),()=>f(W));var Bt=G(xe,2);{var $t=nt=>{var Xe=vu(),Qt=M(Xe,!0);T(Xe),bt(()=>ye(Qt,f(D))),Ce(nt,Xe)};ht(Bt,nt=>{f(D)&&nt($t)})}T(he),bt(()=>{xe.disabled=f(A),Ne=Ll(xe,1,"beer-name-input svelte-1k5rb4o",null,Ne,{error:f(D)})}),Ei("blur",xe,ae),Ci(xe,()=>f(y),nt=>X(y,nt)),Ce(se,he)},be=se=>{var he=gu();he.__click=C;var xe=M(he),Ne=M(xe,!0);T(xe),Cl(2),T(he),bt(()=>ye(Ne,f(u))),Ce(se,he)};ht(Qe,se=>{f(re)?se(Me):se(be,!1)})}var tt=G(Qe,2),ot=M(tt),Re=G(ot,2),yt=M(Re,!0);T(Re),T(tt),T(ke);var Tt=G(ke,2),je=M(Tt),ft=M(je);ns(ft,20,()=>Array(4),ms,(se,he,xe)=>{var Ne=_u();bt(()=>$n(Ne,`
									height: ${8+xe*4}px;
									background: ${(xe<f(L).bars?f(L).color:"var(--bg-hover)")??""};
									opacity: ${xe<f(L).bars?1:.4};
								`)),Ce(se,Ne)}),T(ft);var dt=G(ft,2),Ae=M(dt);T(dt),T(je);var Et=G(je,2);{var al=se=>{var he=wu();Ce(se,he)};ht(Et,se=>{f(k)||se(al)})}T(Tt),T(Y);var It=G(Y,2),ze=M(It),St=M(ze),zt=M(St,!0),Mt=G(zt),me=M(Mt,!0);T(Mt),T(St);var I=G(St,2),Oe=M(I,!0);T(I),T(ze);var qe=G(ze,2),jt=M(qe),Xt=M(jt);{var Lt=se=>{var he=bu(),xe=Vl(he,!0),Ne=G(xe),Bt=M(Ne,!0);T(Ne),bt($t=>{ye(xe,$t),ye(Bt,f(J))},[()=>F(f(p))]),Ce(se,he)},Jt=se=>{var he=xu(),xe=G(Vl(he)),Ne=M(xe,!0);T(xe),bt(()=>ye(Ne,f(J))),Ce(se,he)};ht(Xt,se=>{f(p)!==null?se(Lt):se(Jt,!1)})}T(jt),Cl(2),T(qe),T(It);var ct=G(It,2);{var lt=se=>{var he=yu(),xe=G(M(he),2),Ne=M(xe,!0);T(xe);var Bt=G(xe,4),$t=M(Bt);T(Bt),T(he),bt((nt,Xe)=>{ye(Ne,nt),ye($t,`${Xe??""}${f(J)??""}`)},[()=>z(f(_)),()=>f(V)!==null?F(f(V)):"--"]),Ce(se,he)};ht(ct,se=>{(f(c)!==f(_)||f(p)!==f(V))&&f(i)&&se(lt)})}var vt=G(ct,2);{var At=se=>{var he=Su();let xe;var Ne=M(he);lo(Ne,()=>l.batch.id,Bt=>{hu(Bt,{get batchId(){return l.batch.id},get deviceColor(){return f(h)},get originalGravity(){return l.batch.measured_og},get controlEvents(){return f(H)}})}),T(he),bt(()=>xe=Ll(he,1,"chart-section svelte-1k5rb4o",null,xe,{hidden:!a()})),Ce(se,he)};ht(vt,se=>{f(S)&&se(At)})}var ol=G(vt,2),gl=M(ol),Pt=M(gl);T(gl);var Zt=G(gl,2),Sl=M(Zt),mt=G(Sl,2);{var kl=se=>{var he=ku();he.__click=function(...Bt){l.onToggleExpand?.apply(this,Bt)};var xe=M(he);let Ne;T(he),bt(()=>{kn(he,"aria-label",a()?"Collapse chart":"Expand chart"),Ne=Ll(xe,0,"w-4 h-4 transition-transform",null,Ne,{"rotate-180":a()})}),Ce(se,he)};ht(mt,se=>{l.onToggleExpand&&se(kl)})}Cl(2),T(Zt),T(ol),T(ce),T(ge),bt(se=>{de=Ll(ge,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,de,{expanded:a(),wide:n()}),$n(_e,`background: ${f(Z)??""};`),$n(ot,`background: ${f(Z)??""};`),ye(yt,f(h)),kn(je,"title",`${f(L).label??""} signal (${f(v)??"N/A"??""} dBm)`),ye(Ae,`${f(v)??"N/A"??""} dBm`),ye(zt,se),ye(me,f(le)!=="SG"?f(le):""),ye(Oe,f(le)==="SG"?"Gravity":f(le)==="P"?"Plato":"Brix"),ye(Pt,`Updated ${f(Se)??""}`),kn(Sl,"href",`/batches/${l.batch.id??""}`)},[()=>z(f(c))]),Ce(e,ge),ys()}bs(["keydown","click"]);var Mu=Fe('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Au=Fe('<div class="alerts-list svelte-1uha8ag"></div>'),Cu=Fe('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Du=Fe('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Lu=Fe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Pu=Fe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Ru=Fe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Fu=Fe("<div></div>"),Ou=Fe("<!> <!>",1);function Xu(e,l){xs(l,!0);let a=Pe(!1),n=Pe(!1),i=Pe(Zl([])),u=Pe(Zl(new Map)),c=Pe(!0),p=Pe(null);Mi(async()=>{const D=localStorage.getItem("brewsignal_alerts_dismissed"),C=localStorage.getItem("brewsignal_alerts_dismissed_time");D==="true"&&C&&Date.now()-parseInt(C,10)<360*60*1e3&&X(a,!0),await h()});async function h(){X(c,!0),X(p,null);try{const D=await Xr();X(i,D.filter(J=>J.status==="fermenting"||J.status==="conditioning"),!0);const C=f(i).map(async J=>{try{const le=await $r(J.id);return[J.id,le]}catch{return null}}),ae=await Promise.all(C),ee=new Map;for(const J of ae)J&&ee.set(J[0],J[1]);X(u,ee,!0)}catch(D){X(p,D instanceof Error?D.message:"Failed to load batches",!0)}finally{X(c,!1)}}let v=Ke(()=>new Map(f(i).filter(D=>D.device_id&&(D.status==="fermenting"||D.status==="conditioning")).map(D=>[D.device_id,D.id]))),k=Ke(()=>{const D=new Map(f(u));for(const[C,ae]of f(v)){const ee=Ai.tilts.get(C);if(ee){const J=D.get(ae)||{batch_id:ae,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}};D.set(ae,{...J,measured:{...J.measured,current_sg:ee.sg},temperature:{...J.temperature,current:ee.temp,status:J.temperature.yeast_min!==void 0&&J.temperature.yeast_max!==void 0?ee.temp<J.temperature.yeast_min?"too_cold":ee.temp>J.temperature.yeast_max?"too_hot":"in_range":J.temperature.status}})}}return D}),g=Pe(null);function _(D){X(g,f(g)===D?null:D,!0)}function V(){X(a,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function S(){X(n,!f(n))}var H=Ou();Wr("1uha8ag",D=>{Br(()=>{Vr.title="Dashboard | BrewSignal"})});var $=Vl(H);{var re=D=>{var C=Du(),ae=M(C),ee=M(ae),J=G(M(ee),4),le=M(J,!0);T(J),T(ee);var b=G(ee,2);b.__click=V,T(ae);var z=G(ae,2);{var F=Z=>{var L=Au();ns(L,21,()=>Yn.alerts,ms,(Se,ge)=>{var de=Mu();let _e;var ce=M(de),Y=M(ce);T(ce);var ke=G(ce,2),Qe=M(ke,!0);T(ke),T(de),bt(()=>{_e=Ll(de,1,"alert-item svelte-1uha8ag",null,_e,{warning:f(ge).level==="warning",critical:f(ge).level==="critical"}),ye(Y,`${f(ge).day??""}:`),ye(Qe,f(ge).message)}),Ce(Se,de)}),T(L),Ce(Z,L)};ht(z,Z=>{f(n)||Z(F)})}var ne=G(z,2);{var R=Z=>{var L=Cu();L.__click=S;var Se=M(L,!0);T(L),bt(()=>ye(Se,f(n)?`Show ${Yn.alerts.length} alerts`:"Show less")),Ce(Z,L)};ht(ne,Z=>{Yn.alerts.length>3&&Z(R)})}T(C),bt(()=>ye(le,Yn.alerts.length)),Ce(D,C)};ht($,D=>{Yn.alerts.length>0&&!f(a)&&D(re)})}var y=G($,2);{var W=D=>{var C=Lu();Ce(D,C)},A=D=>{var C=ls(),ae=Vl(C);{var ee=le=>{var b=Pu(),z=G(M(b),4),F=M(z,!0);T(z),T(b),bt(()=>ye(F,f(p))),Ce(le,b)},J=le=>{var b=ls(),z=Vl(b);{var F=R=>{var Z=Ru();Ce(R,Z)},ne=R=>{var Z=Fu();let L;ns(Z,21,()=>f(i),Se=>Se.id,(Se,ge)=>{{let de=Ke(()=>f(k).get(f(ge).id)),_e=Ke(()=>f(g)===f(ge).id),ce=Ke(()=>f(i).length===1);Eu(Se,{get batch(){return f(ge)},get progress(){return f(de)},get expanded(){return f(_e)},get wide(){return f(ce)},onToggleExpand:()=>_(f(ge).id),onBatchUpdated:h})}}),T(Z),bt(()=>L=Ll(Z,1,"tilt-grid svelte-1uha8ag",null,L,{"single-tilt":f(i).length===1})),Ce(R,Z)};ht(z,R=>{f(i).length===0?R(F):R(ne,!1)},!0)}Ce(le,b)};ht(ae,le=>{f(p)?le(ee):le(J,!1)},!0)}Ce(D,C)};ht(y,D=>{f(c)?D(W):D(A,!1)})}Ce(e,H),ys()}bs(["click"]);export{Xu as component};
