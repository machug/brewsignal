import{d as Qn,c as Ln,a as ye,f as De,s as we,e as xa}from"../chunks/BQ88CgEU.js";import{o as Fr,R as Or,b7 as Nr,b as Gr,ah as Xn,ar as kl,c as d,ai as He,aj as $n,al as A,an as E,ak as B,ao as Ve,as as ct,s as ue,at as Bl,p as nn,ap as ba,aL as zr,aq as Un,e as Vr,am as Ir}from"../chunks/CGXqq0_G.js";import{e as Pn,i as Kn}from"../chunks/payu-7ZH.js";import{B as Br,i as it}from"../chunks/ziKwUJ4R.js";import{h as Hr}from"../chunks/BP8qDDK3.js";import{s as ml}from"../chunks/DqcjHxzZ.js";import{t as ya}from"../chunks/DThvY6M2.js";import{w as bn}from"../chunks/BwsdUUZq.js";import{r as Sa,s as sn}from"../chunks/D2zVhfuI.js";import{s as Mn}from"../chunks/BSw_pJTS.js";import{b as ka}from"../chunks/CL9D8AtU.js";import{b as qs}from"../chunks/C39ACuyu.js";import{p as an}from"../chunks/B3wItnqC.js";import{c as Yn,d as An,b as Ks,g as Ta,e as Wr}from"../chunks/Dq6yox8V.js";import{T as Ur,o as Yr,q as qr,s as Kr,t as jr,u as Jr,v as Zr,g as Qr}from"../chunks/CJrfidL2.js";import{i as Xr,s as $r}from"../chunks/C5J5lxM1.js";function eo(e,l,i){Fr&&Or();var n=new Br(e),a=!Nr();Gr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const to=!0,Et="u-",lo="uplot",no=Et+"hz",so=Et+"vt",io=Et+"title",ao=Et+"wrap",ro=Et+"under",oo=Et+"over",uo=Et+"axis",Il=Et+"off",co=Et+"select",fo=Et+"cursor-x",po=Et+"cursor-y",vo=Et+"cursor-pt",ho=Et+"legend",go=Et+"live",mo=Et+"inline",_o=Et+"series",wo=Et+"marker",Fi=Et+"label",xo=Et+"value",kn="width",Tn="height",yn="top",Oi="bottom",tn="left",Cs="right",js="#000",Ni=js+"0",Ds="mousemove",Gi="mousedown",Ls="mouseup",zi="mouseenter",Vi="mouseleave",Ii="dblclick",bo="resize",yo="scroll",Bi="change",jn="dppxchange",Js="--",dn=typeof window<"u",Ns=dn?document:null,rn=dn?window:null,So=dn?navigator:null;let Ne,Bn;function Gs(){let e=devicePixelRatio;Ne!=e&&(Ne=e,Bn&&Vs(Bi,Bn,Gs),Bn=matchMedia(`(min-resolution: ${Ne-.001}dppx) and (max-resolution: ${Ne+.001}dppx)`),Hl(Bi,Bn,Gs),rn.dispatchEvent(new CustomEvent(jn)))}function el(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function zs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function tt(e,l,i){e.style[l]=i+"px"}function vl(e,l,i,n){let a=Ns.createElement(e);return l!=null&&el(a,l),i?.insertBefore(a,n),a}function al(e,l){return vl("div",e,l)}const Hi=new WeakMap;function yl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Hi.get(e);c!=u&&(e.style.transform=c,Hi.set(e,c),l<0||i<0||l>n||i>a?el(e,Il):zs(e,Il))}const Wi=new WeakMap;function Ui(e,l,i){let n=l+i,a=Wi.get(e);n!=a&&(Wi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Yi=new WeakMap;function qi(e,l,i,n){let a=l+""+i,c=Yi.get(e);a!=c&&(Yi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Zs={passive:!0},ko={...Zs,capture:!0};function Hl(e,l,i,n){l.addEventListener(e,i,n?ko:Zs)}function Vs(e,l,i,n){l.removeEventListener(e,i,Zs)}dn&&Gs();function hl(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:tl((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ea(e){return(i,n,a)=>{let c=-1,u=-1;for(let p=n;p<=a;p++)if(e(i[p])){c=p;break}for(let p=a;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const Ma=e=>e!=null,Aa=e=>e!=null&&e>0,es=Ea(Ma),To=Ea(Aa);function Eo(e,l,i,n=0,a=!1){let c=a?To:es,u=a?Aa:Ma;[l,i]=c(e,l,i);let p=e[l],v=e[l];if(l>-1)if(n==1)p=e[l],v=e[i];else if(n==-1)p=e[i],v=e[l];else for(let h=l;h<=i;h++){let S=e[h];u(S)&&(S<p?p=S:S>v&&(v=S))}return[p??Ke,v??-Ke]}function ts(e,l,i,n){let a=Ji(e),c=Ji(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?Tl:Ca,p=a==1?tl:rl,v=c==1?rl:tl,h=p(u(kt(e))),S=v(u(kt(l))),m=on(i,h),_=on(i,S);return i==10&&(h<0&&(m=je(m,-h)),S<0&&(_=je(_,-S))),n||i==2?(e=m*a,l=_*c):(e=Ra(e,m),l=ls(l,_)),[e,l]}function Qs(e,l,i,n){let a=ts(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Xs=.1,Ki={mode:3,pad:Xs},Cn={pad:0,soft:null,mode:0},Mo={min:Cn,max:Cn};function Jn(e,l,i,n){return ns(i)?ji(e,l,i):(Cn.pad=i,Cn.soft=n?0:null,Cn.mode=n?3:0,ji(e,l,Mo))}function Re(e,l){return e??l}function Ao(e,l,i){for(l=Re(l,0),i=Re(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function ji(e,l,i){let n=i.min,a=i.max,c=Re(n.pad,0),u=Re(a.pad,0),p=Re(n.hard,-Ke),v=Re(a.hard,Ke),h=Re(n.soft,Ke),S=Re(a.soft,-Ke),m=Re(n.mode,0),_=Re(a.mode,0),I=l-e,k=Tl(I),U=qt(kt(e),kt(l)),X=Tl(U),ne=kt(X-k);(I<1e-24||ne>10)&&(I=0,(e==0||l==0)&&(I=1e-24,m==2&&h!=Ke&&(c=0),_==2&&S!=-Ke&&(u=0)));let y=I||U||1e3,Y=Tl(y),C=on(10,tl(Y)),D=y*(I==0?e==0?.1:1:c),L=je(Ra(e-D,C/10),24),se=e>=h&&(m==1||m==3&&L<=h||m==2&&L>=h)?h:Ke,ee=qt(p,L<se&&e>=se?se:gl(se,L)),J=y*(I==0?l==0?.1:1:u),te=je(ls(l+J,C/10),24),x=l<=S&&(_==1||_==3&&te>=S||_==2&&te<=S)?S:-Ke,N=gl(v,te>x&&l<=x?x:qt(x,te));return ee==N&&ee==0&&(N=100),[ee,N]}const Co=new Intl.NumberFormat(dn?So.language:"en-US"),$s=e=>Co.format(e),ll=Math,qn=ll.PI,kt=ll.abs,tl=ll.floor,St=ll.round,rl=ll.ceil,gl=ll.min,qt=ll.max,on=ll.pow,Ji=ll.sign,Tl=ll.log10,Ca=ll.log2,Do=(e,l=1)=>ll.sinh(e)*l,Ps=(e,l=1)=>ll.asinh(e/l),Ke=1/0;function Zi(e){return(Tl((e^e>>31)-(e>>31))|0)+1}function Is(e,l,i){return gl(qt(e,l),i)}function Da(e){return typeof e=="function"}function Ee(e){return Da(e)?e:()=>e}const Lo=()=>{},La=e=>e,Pa=(e,l)=>l,Po=e=>null,Qi=e=>!0,Xi=(e,l)=>e==l,Ro=/\.\d*?(?=9{6,}|0{6,})/gm,Wl=e=>{if(Oa(e)||Rl.has(e))return e;const l=`${e}`,i=l.match(Ro);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Wl(a)}e${c}`}return je(e,n)};function zl(e,l){return Wl(je(Wl(e/l))*l)}function ls(e,l){return Wl(rl(Wl(e/l))*l)}function Ra(e,l){return Wl(tl(Wl(e/l))*l)}function je(e,l=0){if(Oa(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return St(n)/i}const Rl=new Map;function Fa(e){return((""+e).split(".")[1]||"").length}function Rn(e,l,i,n){let a=[],c=n.map(Fa);for(let u=l;u<i;u++){let p=kt(u),v=je(on(e,u),p);for(let h=0;h<n.length;h++){let S=e==10?+`${n[h]}e${u}`:n[h]*v,m=(u>=0?0:p)+(u>=c[h]?0:c[h]),_=e==10?S:je(S,m);a.push(_),Rl.set(_,m)}}return a}const Dn={},ei=[],un=[null,null],Pl=Array.isArray,Oa=Number.isInteger,Fo=e=>e===void 0;function $i(e){return typeof e=="string"}function ns(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Oo(e){return e!=null&&typeof e=="object"}const No=Object.getPrototypeOf(Uint8Array),Na="__proto__";function cn(e,l=ns){let i;if(Pl(e)){let n=e.find(a=>a!=null);if(Pl(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=cn(e[a],l)}else i=e.slice()}else if(e instanceof No)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Na&&(i[n]=cn(e[n],l))}else i=e;return i}function wt(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Na&&(ns(e[a])?wt(e[a],cn(n[a])):e[a]=cn(n[a]))}return e}const Go=0,zo=1,Vo=2;function Io(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Bo(e,l){if(Uo(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Yo(u[0])||(u=Wo(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let v=e[u][0],h=v.length;for(let S=0;S<h;S++)i.add(v[S])}let n=[Array.from(i).sort((u,p)=>u-p)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],v=p[0];for(let h=1;h<p.length;h++){let S=p[h],m=Array(a).fill(void 0),_=l?l[u][h]:zo,I=[];for(let k=0;k<S.length;k++){let U=S[k],X=c.get(v[k]);U===null?_!=Go&&(m[X]=U,_==Vo&&I.push(X)):m[X]=U}Io(m,I,a),n.push(m)}}return n}const Ho=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Wo(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let v=0;v<i;v++)p[v]=u[n[v]];a.push(p)}return a}function Uo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Yo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=qt(1,tl((a-n+1)/l));for(let u=e[n],p=n+c;p<=a;p+=c){const v=e[p];if(v!=null){if(v<=u)return!1;u=v}}return!0}const Ga=["January","February","March","April","May","June","July","August","September","October","November","December"],za=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Va(e){return e.slice(0,3)}const qo=za.map(Va),Ko=Ga.map(Va),jo={MMMM:Ga,MMM:Ko,WWWW:za,WWW:qo};function Sn(e){return(e<10?"0":"")+e}function Jo(e){return(e<10?"00":e<100?"0":"")+e}const Zo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>Sn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>Sn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>Sn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>Sn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>Sn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Jo(e.getMilliseconds())};function ti(e,l){l=l||jo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?Zo[a[1]]:a[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Qo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Xo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Qo?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ia=e=>e%1==0,Zn=[1,2,2.5,5],$o=Rn(10,-32,0,Zn),Ba=Rn(10,0,32,Zn),eu=Ba.filter(Ia),Vl=$o.concat(Ba),li=`
`,Ha="{YYYY}",ea=li+Ha,Wa="{M}/{D}",En=li+Wa,Hn=En+"/{YY}",Ua="{aa}",tu="{h}:{mm}",ln=tu+Ua,ta=li+ln,la=":{ss}",ze=null;function Ya(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,v=(e==1?Rn(10,0,3,Zn).filter(Ia):Rn(10,-3,0,Zn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const h=[[u,Ha,ze,ze,ze,ze,ze,ze,1],[a*28,"{MMM}",ea,ze,ze,ze,ze,ze,1],[a,Wa,ea,ze,ze,ze,ze,ze,1],[n,"{h}"+Ua,Hn,ze,En,ze,ze,ze,1],[i,ln,Hn,ze,En,ze,ze,ze,1],[l,la,Hn+" "+ln,ze,En+" "+ln,ze,ta,ze,1],[e,la+".{fff}",Hn+" "+ln,ze,En+" "+ln,ze,ta,ze,1]];function S(m){return(_,I,k,U,X,ne)=>{let y=[],Y=X>=u,C=X>=c&&X<u,D=m(k),L=je(D*e,3),se=Rs(D.getFullYear(),Y?0:D.getMonth(),C||Y?1:D.getDate()),ee=je(se*e,3);if(C||Y){let J=C?X/c:0,te=Y?X/u:0,x=L==ee?L:je(Rs(se.getFullYear()+te,se.getMonth()+J,1)*e,3),N=new Date(St(x/e)),O=N.getFullYear(),le=N.getMonth();for(let F=0;x<=U;F++){let V=Rs(O+te*F,le+J*F,1),P=V-m(je(V*e,3));x=je((+V+P)*e,3),x<=U&&y.push(x)}}else{let J=X>=a?a:X,te=tl(k)-tl(L),x=ee+te+ls(L-ee,J);y.push(x);let N=m(x),O=N.getHours()+N.getMinutes()/i+N.getSeconds()/n,le=X/n,F=_.axes[I]._space,V=ne/F;for(;x=je(x+X,e==1?0:3),!(x>U);)if(le>1){let P=tl(je(O+le,6))%24,fe=m(x).getHours()-P;fe>1&&(fe=-1),x-=fe*n,O=(O+le)%24;let he=y[y.length-1];je((x-he)/X,3)*V>=.7&&y.push(x)}else y.push(x)}return y}}return[v,h,S]}const[lu,nu,su]=Ya(1),[iu,au,ru]=Ya(.001);Rn(2,-53,53,[1]);function na(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function sa(e,l){return(i,n,a,c,u)=>{let p=l.find(k=>u>=k[0])||l[l.length-1],v,h,S,m,_,I;return n.map(k=>{let U=e(k),X=U.getFullYear(),ne=U.getMonth(),y=U.getDate(),Y=U.getHours(),C=U.getMinutes(),D=U.getSeconds(),L=X!=v&&p[2]||ne!=h&&p[3]||y!=S&&p[4]||Y!=m&&p[5]||C!=_&&p[6]||D!=I&&p[7]||p[1];return v=X,h=ne,S=y,m=Y,_=C,I=D,L(U)})}}function ou(e,l){let i=ti(l);return(n,a,c,u,p)=>a.map(v=>i(e(v)))}function Rs(e,l,i){return new Date(e,l,i)}function ia(e,l){return l(e)}const uu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function aa(e,l){return(i,n,a,c)=>c==null?Js:l(e(n))}function cu(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function fu(e,l){return e.series[l].fill(e,l)}const du={show:!0,live:!0,isolate:!1,mount:Lo,markers:{show:!0,width:2,stroke:cu,fill:fu,dash:"solid"},idx:null,idxs:null,values:[]};function pu(e,l){let i=e.cursor.points,n=al(),a=i.size(e,l);tt(n,kn,a),tt(n,Tn,a);let c=a/-2;tt(n,"marginLeft",c),tt(n,"marginTop",c);let u=i.width(e,l,a);return u&&tt(n,"borderWidth",u),n}function vu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function hu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function gu(e,l){return e.series[l].points.size}const Fs=[0,0];function mu(e,l,i){return Fs[0]=l,Fs[1]=i,Fs}function Wn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Os(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const _u={show:!0,x:!0,y:!0,lock:!1,move:mu,points:{one:!1,show:pu,size:gu,width:0,stroke:hu,fill:vu},bind:{mousedown:Wn,mouseup:Wn,click:Wn,dblclick:Wn,mousemove:Os,mouseleave:Os,mouseenter:Os},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},qa={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ni=wt({},qa,{filter:Pa}),Ka=wt({},ni,{size:10}),ja=wt({},qa,{show:!1}),si='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ja="bold "+si,Za=1.5,ra={show:!0,scale:"x",stroke:js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ja,side:2,grid:ni,ticks:Ka,border:ja,font:si,lineGap:Za,rotate:0},wu="Value",xu="Time",oa={show:!0,scale:"x",auto:!1,sorted:1,min:Ke,max:-Ke,idxs:[]};function bu(e,l,i,n,a){return l.map(c=>c==null?"":$s(c))}function yu(e,l,i,n,a,c,u){let p=[],v=Rl.get(a)||0;i=u?i:je(ls(i,a),v);for(let h=i;h<=n;h=je(h+a,v))p.push(Object.is(h,-0)?0:h);return p}function Bs(e,l,i,n,a,c,u){const p=[],v=e.scales[e.axes[l].scale].log,h=v==10?Tl:Ca,S=tl(h(i));a=on(v,S),v==10&&(a=Vl[hl(a,Vl)]);let m=i,_=a*v;v==10&&(_=Vl[hl(_,Vl)]);do p.push(m),m=m+a,v==10&&!Rl.has(m)&&(m=je(m,Rl.get(a))),m>=_&&(a=m,_=a*v,v==10&&(_=Vl[hl(_,Vl)]));while(m<=n);return p}function Su(e,l,i,n,a,c,u){let v=e.scales[e.axes[l].scale].asinh,h=n>v?Bs(e,l,qt(v,i),n,a):[v],S=n>=0&&i<=0?[0]:[];return(i<-v?Bs(e,l,qt(v,-n),-i,a):[v]).reverse().map(_=>-_).concat(S,h)}const Qa=/./,ku=/[12357]/,Tu=/[125]/,ua=/1/,Hs=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Eu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=e.scales[u],v=e.valToPos,h=c._space,S=v(10,u),m=v(9,u)-S>=h?Qa:v(7,u)-S>=h?ku:v(5,u)-S>=h?Tu:ua;if(m==ua){let _=kt(v(1,u)-S);if(_<h)return Hs(l.slice().reverse(),p.distr,m,rl(h/_)).reverse()}return Hs(l,p.distr,m,1)}function Mu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=c._space,v=e.valToPos,h=kt(v(1,u)-v(2,u));return h<p?Hs(l.slice().reverse(),3,Qa,rl(p/h)).reverse():l}function Au(e,l,i,n){return n==null?Js:l==null?"":$s(l)}const ca={show:!0,scale:"y",stroke:js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ja,side:3,grid:ni,ticks:Ka,border:ja,font:si,lineGap:Za,rotate:0};function Cu(e,l){let i=3+(e||1)*2;return je(i*l,3)}function Du(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),p=kt(u-c),v=e.series[l],h=p/(v.points.space*Ne);return n[1]-n[0]<=h}const fa={scale:null,auto:!0,sorted:0,min:Ke,max:-Ke},Xa=(e,l,i,n,a)=>a,da={show:!0,auto:!0,sorted:0,gaps:Xa,alpha:1,facets:[wt({},fa,{scale:"x"}),wt({},fa,{scale:"y"})]},pa={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Xa,alpha:1,points:{show:Du,filter:null},values:null,min:Ke,max:-Ke,idxs:[],path:null,clip:null};function Lu(e,l,i,n,a){return i/10}const $a={time:to,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Pu=wt({},$a,{time:!1,ori:1}),va={};function er(e,l){let i=va[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,p,v,h){for(let S=0;S<i.plots.length;S++)i.plots[S]!=a&&i.plots[S].pub(n,a,c,u,p,v,h)}},e!=null&&(va[e]=i)),i}const fn=1,Ws=2;function Ul(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let v=c[0],h=n==2?c[1]:c[l],S=n==2?u[a.facets[0].scale]:u[e.series[0].scale],m=n==2?u[a.facets[1].scale]:u[a.scale],_=p.left,I=p.top,k=p.width,U=p.height,X=e.valToPosH,ne=e.valToPosV;return S.ori==0?i(a,v,h,S,m,X,ne,_,I,k,U,is,pn,rs,lr,sr):i(a,v,h,S,m,ne,X,I,_,U,k,as,vn,ri,nr,ir)}function ii(e,l){let i=0,n=0,a=Re(e.bands,ei);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Ru(e,l,i,n,a){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,v=e.scales[p];return a==-1?v.min:a==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function El(e,l,i,n,a,c){return Ul(e,l,(u,p,v,h,S,m,_,I,k,U,X)=>{let ne=u.pxRound;const y=h.dir*(h.ori==0?1:-1),Y=h.ori==0?pn:vn;let C,D;y==1?(C=i,D=n):(C=n,D=i);let L=ne(m(p[C],h,U,I)),se=ne(_(v[C],S,X,k)),ee=ne(m(p[D],h,U,I)),J=ne(_(c==1?S.max:S.min,S,X,k)),te=new Path2D(a);return Y(te,ee,J),Y(te,L,J),Y(te,L,se),te})}function ss(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?rs:ri;let v=i;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let I=_[0]-v;I>0&&p(u,v,n,I,n+c),v=_[1]}}let h=i+a-v,S=10;h>0&&p(u,v,n-S/2,h,n+c+S)}return u}function Fu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ai(e,l,i,n,a,c,u){let p=[],v=e.length;for(let h=a==1?i:n;h>=i&&h<=n;h+=a)if(l[h]===null){let m=h,_=h;if(a==1)for(;++h<=n&&l[h]===null;)_=h;else for(;--h>=i&&l[h]===null;)_=h;let I=c(e[m]),k=_==m?I:c(e[_]),U=m-a;I=u<=0&&U>=0&&U<v?c(e[U]):I;let ne=_+a;k=u>=0&&ne>=0&&ne<v?c(e[ne]):k,k>=I&&p.push([I,k])}return p}function ha(e){return e==0?La:e==1?St:l=>zl(l,e)}function tr(e){let l=e==0?is:as,i=e==0?(a,c,u,p,v,h)=>{a.arcTo(c,u,p,v,h)}:(a,c,u,p,v,h)=>{a.arcTo(u,c,v,p,h)},n=e==0?(a,c,u,p,v)=>{a.rect(c,u,p,v)}:(a,c,u,p,v)=>{a.rect(u,c,v,p)};return(a,c,u,p,v,h=0,S=0)=>{h==0&&S==0?n(a,c,u,p,v):(h=gl(h,p/2,v/2),S=gl(S,p/2,v/2),l(a,c+h,u),i(a,c+p,u,c+p,u+v,h),i(a,c+p,u+v,c,u+v,S),i(a,c,u+v,c,u,S),i(a,c,u,c+p,u,h),a.closePath())}}const is=(e,l,i)=>{e.moveTo(l,i)},as=(e,l,i)=>{e.moveTo(i,l)},pn=(e,l,i)=>{e.lineTo(l,i)},vn=(e,l,i)=>{e.lineTo(i,l)},rs=tr(0),ri=tr(1),lr=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},nr=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},sr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},ir=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function ar(e){return(l,i,n,a,c)=>Ul(l,i,(u,p,v,h,S,m,_,I,k,U,X)=>{let{pxRound:ne,points:y}=u,Y,C;h.ori==0?(Y=is,C=lr):(Y=as,C=nr);const D=je(y.width*Ne,3);let L=(y.size-y.width)/2*Ne,se=je(L*2,3),ee=new Path2D,J=new Path2D,{left:te,top:x,width:N,height:O}=l.bbox;rs(J,te-se,x-se,N+se*2,O+se*2);const le=F=>{if(v[F]!=null){let V=ne(m(p[F],h,U,I)),P=ne(_(v[F],S,X,k));Y(ee,V+L,P),C(ee,V,P,L,0,qn*2)}};if(c)c.forEach(le);else for(let F=n;F<=a;F++)le(F);return{stroke:D>0?ee:null,fill:ee,clip:J,flags:fn|Ws}})}function rr(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Ou=rr(pn),Nu=rr(vn);function or(e){const l=Re(e?.alignGaps,0);return(i,n,a,c)=>Ul(i,n,(u,p,v,h,S,m,_,I,k,U,X)=>{[a,c]=es(v,a,c);let ne=u.pxRound,y=O=>ne(m(O,h,U,I)),Y=O=>ne(_(O,S,X,k)),C,D;h.ori==0?(C=pn,D=Ou):(C=vn,D=Nu);const L=h.dir*(h.ori==0?1:-1),se={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:fn},ee=se.stroke;let J=!1;if(c-a>=U*4){let O=H=>i.posToVal(H,h.key,!0),le=null,F=null,V,P,Ae,ve=y(p[L==1?a:c]),fe=y(p[a]),he=y(p[c]),oe=O(L==1?fe+1:he-1);for(let H=L==1?a:c;H>=a&&H<=c;H+=L){let Me=p[H],Ce=(L==1?Me<oe:Me>oe)?ve:y(Me),xe=v[H];Ce==ve?xe!=null?(P=xe,le==null?(C(ee,Ce,Y(P)),V=le=F=P):P<le?le=P:P>F&&(F=P)):xe===null&&(J=!0):(le!=null&&D(ee,ve,Y(le),Y(F),Y(V),Y(P)),xe!=null?(P=xe,C(ee,Ce,Y(P)),le=F=V=P):(le=F=null,xe===null&&(J=!0)),ve=Ce,oe=O(ve+L))}le!=null&&le!=F&&Ae!=ve&&D(ee,ve,Y(le),Y(F),Y(V),Y(P))}else for(let O=L==1?a:c;O>=a&&O<=c;O+=L){let le=v[O];le===null?J=!0:le!=null&&C(ee,y(p[O]),Y(le))}let[x,N]=ii(i,n);if(u.fill!=null||x!=0){let O=se.fill=new Path2D(ee),le=u.fillTo(i,n,u.min,u.max,x),F=Y(le),V=y(p[a]),P=y(p[c]);L==-1&&([P,V]=[V,P]),C(O,P,F),C(O,V,F)}if(!u.spanGaps){let O=[];J&&O.push(...ai(p,v,a,c,L,y,l)),se.gaps=O=u.gaps(i,n,a,c,O),se.clip=ss(O,h.ori,I,k,U,X)}return N!=0&&(se.band=N==2?[El(i,n,a,c,ee,-1),El(i,n,a,c,ee,1)]:El(i,n,a,c,ee,N)),se})}function Gu(e){const l=Re(e.align,1),i=Re(e.ascDesc,!1),n=Re(e.alignGaps,0),a=Re(e.extend,!1);return(c,u,p,v)=>Ul(c,u,(h,S,m,_,I,k,U,X,ne,y,Y)=>{[p,v]=es(m,p,v);let C=h.pxRound,{left:D,width:L}=c.bbox,se=fe=>C(k(fe,_,y,X)),ee=fe=>C(U(fe,I,Y,ne)),J=_.ori==0?pn:vn;const te={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:fn},x=te.stroke,N=_.dir*(_.ori==0?1:-1);let O=ee(m[N==1?p:v]),le=se(S[N==1?p:v]),F=le,V=le;a&&l==-1&&(V=D,J(x,V,O)),J(x,le,O);for(let fe=N==1?p:v;fe>=p&&fe<=v;fe+=N){let he=m[fe];if(he==null)continue;let oe=se(S[fe]),H=ee(he);l==1?J(x,oe,O):J(x,F,H),J(x,oe,H),O=H,F=oe}let P=F;a&&l==1&&(P=D+L,J(x,P,O));let[Ae,ve]=ii(c,u);if(h.fill!=null||Ae!=0){let fe=te.fill=new Path2D(x),he=h.fillTo(c,u,h.min,h.max,Ae),oe=ee(he);J(fe,P,oe),J(fe,V,oe)}if(!h.spanGaps){let fe=[];fe.push(...ai(S,m,p,v,N,se,n));let he=h.width*Ne/2,oe=i||l==1?he:-he,H=i||l==-1?-he:he;fe.forEach(Me=>{Me[0]+=oe,Me[1]+=H}),te.gaps=fe=h.gaps(c,u,p,v,fe),te.clip=ss(fe,_.ori,X,ne,y,Y)}return ve!=0&&(te.band=ve==2?[El(c,u,p,v,x,-1),El(c,u,p,v,x,1)]:El(c,u,p,v,x,ve)),te})}function ga(e,l,i,n,a,c,u=Ke){if(e.length>1){let p=null;for(let v=0,h=1/0;v<e.length;v++)if(l[v]!==void 0){if(p!=null){let S=kt(e[v]-e[p]);S<h&&(h=S,u=kt(i(e[v],n,a,c)-i(e[p],n,a,c)))}p=v}}return u}function zu(e){e=e||Dn;const l=Re(e.size,[.6,Ke,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=Ee(a),u=1-l[0],p=Re(l[1],Ke),v=Re(l[2],1),h=Re(e.disp,Dn),S=Re(e.each,I=>{}),{fill:m,stroke:_}=h;return(I,k,U,X)=>Ul(I,k,(ne,y,Y,C,D,L,se,ee,J,te,x)=>{let N=ne.pxRound,O=i,le=n*Ne,F=p*Ne,V=v*Ne,P,Ae;C.ori==0?[P,Ae]=c(I,k):[Ae,P]=c(I,k);const ve=C.dir*(C.ori==0?1:-1);let fe=C.ori==0?rs:ri,he=C.ori==0?S:(z,ke,Ue,Kt,Vt,At,It)=>{S(z,ke,Ue,Vt,Kt,It,At)},oe=Re(I.bands,ei).find(z=>z.series[0]==k),H=oe!=null?oe.dir:0,Me=ne.fillTo(I,k,ne.min,ne.max,H),Ge=N(se(Me,D,x,J)),Ce,xe,ft,We=te,Se=N(ne.width*Ne),mt=!1,Ze=null,Je=null,nt=null,Ot=null;m!=null&&(Se==0||_!=null)&&(mt=!0,Ze=m.values(I,k,U,X),Je=new Map,new Set(Ze).forEach(z=>{z!=null&&Je.set(z,new Path2D)}),Se>0&&(nt=_.values(I,k,U,X),Ot=new Map,new Set(nt).forEach(z=>{z!=null&&Ot.set(z,new Path2D)})));let{x0:_e,size:dt}=h;if(_e!=null&&dt!=null){O=1,y=_e.values(I,k,U,X),_e.unit==2&&(y=y.map(Ue=>I.posToVal(ee+Ue*te,C.key,!0)));let z=dt.values(I,k,U,X);dt.unit==2?xe=z[0]*te:xe=L(z[0],C,te,ee)-L(0,C,te,ee),We=ga(y,Y,L,C,te,ee,We),ft=We-xe+le}else We=ga(y,Y,L,C,te,ee,We),ft=We*u+le,xe=We-ft;ft<1&&(ft=0),Se>=xe/2&&(Se=0),ft<5&&(N=La);let Gt=ft>0,xt=We-ft-(Gt?Se:0);xe=N(Is(xt,V,F)),Ce=(O==0?xe/2:O==ve?0:xe)-O*ve*((O==0?le/2:0)+(Gt?Se/2:0));const Ie={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},st=mt?null:new Path2D;let Mt=null;if(oe!=null)Mt=I.data[oe.series[1]];else{let{y0:z,y1:ke}=h;z!=null&&ke!=null&&(Y=ke.values(I,k,U,X),Mt=z.values(I,k,U,X))}let zt=P*xe,de=Ae*xe;for(let z=ve==1?U:X;z>=U&&z<=X;z+=ve){let ke=Y[z];if(ke==null)continue;if(Mt!=null){let pt=Mt[z]??0;if(ke-pt==0)continue;Ge=se(pt,D,x,J)}let Ue=C.distr!=2||h!=null?y[z]:z,Kt=L(Ue,C,te,ee),Vt=se(Re(ke,Me),D,x,J),At=N(Kt-Ce),It=N(qt(Vt,Ge)),at=N(gl(Vt,Ge)),bt=It-at;if(ke!=null){let pt=ke<0?de:zt,yt=ke<0?zt:de;mt?(Se>0&&nt[z]!=null&&fe(Ot.get(nt[z]),At,at+tl(Se/2),xe,qt(0,bt-Se),pt,yt),Ze[z]!=null&&fe(Je.get(Ze[z]),At,at+tl(Se/2),xe,qt(0,bt-Se),pt,yt)):fe(st,At,at+tl(Se/2),xe,qt(0,bt-Se),pt,yt),he(I,k,z,At-Se/2,at,xe+Se,bt)}}return Se>0?Ie.stroke=mt?Ot:st:mt||(Ie._fill=ne.width==0?ne._fill:ne._stroke??ne._fill,Ie.width=0),Ie.fill=mt?Je:st,Ie})}function Vu(e,l){const i=Re(l?.alignGaps,0);return(n,a,c,u)=>Ul(n,a,(p,v,h,S,m,_,I,k,U,X,ne)=>{[c,u]=es(h,c,u);let y=p.pxRound,Y=P=>y(_(P,S,X,k)),C=P=>y(I(P,m,ne,U)),D,L,se;S.ori==0?(D=is,se=pn,L=sr):(D=as,se=vn,L=ir);const ee=S.dir*(S.ori==0?1:-1);let J=Y(v[ee==1?c:u]),te=J,x=[],N=[];for(let P=ee==1?c:u;P>=c&&P<=u;P+=ee)if(h[P]!=null){let ve=v[P],fe=Y(ve);x.push(te=fe),N.push(C(h[P]))}const O={stroke:e(x,N,D,se,L,y),fill:null,clip:null,band:null,gaps:null,flags:fn},le=O.stroke;let[F,V]=ii(n,a);if(p.fill!=null||F!=0){let P=O.fill=new Path2D(le),Ae=p.fillTo(n,a,p.min,p.max,F),ve=C(Ae);se(P,te,ve),se(P,J,ve)}if(!p.spanGaps){let P=[];P.push(...ai(v,h,c,u,ee,Y,i)),O.gaps=P=p.gaps(n,a,c,u,P),O.clip=ss(P,S.ori,k,U,X,ne)}return V!=0&&(O.band=V==2?[El(n,a,c,u,le,-1),El(n,a,c,u,le,1)]:El(n,a,c,u,le,V)),O})}function Iu(e){return Vu(Bu,e)}function Bu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let v=Array(u),h=Array(u-1),S=Array(u-1),m=Array(u-1);for(let _=0;_<u-1;_++)S[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],h[_]=S[_]/m[_];v[0]=h[0];for(let _=1;_<u-1;_++)h[_]===0||h[_-1]===0||h[_-1]>0!=h[_]>0?v[_]=0:(v[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/h[_-1]+(m[_]+2*m[_-1])/h[_]),isFinite(v[_])||(v[_]=0));v[u-1]=h[u-2];for(let _=0;_<u-1;_++)a(p,e[_]+m[_]/3,l[_]+v[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-v[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const Us=new Set;function ma(){for(let e of Us)e.syncRect(!0)}dn&&(Hl(bo,rn,ma),Hl(yo,rn,ma,!0),Hl(jn,rn,()=>{Tt.pxRatio=Ne}));const Hu=or(),Wu=ar();function _a(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ys(c,u,l,i))}function Uu(e,l){return e.map((i,n)=>n==0?{}:wt({},l,i))}function Ys(e,l,i,n){return wt({},l==0?i:n,e)}function ur(e,l,i){return l==null?un:[l,i]}const Yu=ur;function qu(e,l,i){return l==null?un:Jn(l,i,Xs,!0)}function cr(e,l,i,n){return l==null?un:ts(l,i,e.scales[n].log,!1)}const Ku=cr;function fr(e,l,i,n){return l==null?un:Qs(l,i,e.scales[n].log,!1)}const ju=fr;function Ju(e,l,i,n,a){let c=qt(Zi(e),Zi(l)),u=l-e,p=hl(a/n*u,i);do{let v=i[p],h=n*v/u;if(h>=a&&c+(v<5?Rl.get(v):0)<=17)return[v,h]}while(++p<i.length);return[0,0]}function wa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=St((i=+a)*Ne))+"px"),[e,l,i]}function Zu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=je(l[2]*Ne,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function Tt(e,l,i){const n={mode:Re(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let v=!1;n.status=0;const h=n.root=al(lo);if(e.id!=null&&(h.id=e.id),el(h,e.class),e.title){let t=al(io,h);t.textContent=e.title}const S=vl("canvas"),m=n.ctx=S.getContext("2d"),_=al(ao,h);Hl("click",_,t=>{t.target===k&&(Xe!=Zl||lt!=Ql)&&Nt.click(n,t)},!0);const I=n.under=al(ro,_);_.appendChild(S);const k=n.over=al(oo,_);e=cn(e);const U=+Re(e.pxAlign,1),X=ha(U);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const ne=e.ms||.001,y=n.series=a==1?_a(e.series||[],oa,pa,!1):Uu(e.series||[null],da),Y=n.axes=_a(e.axes||[],ra,ca,!0),C=n.scales={},D=n.bands=e.bands||[];D.forEach(t=>{t.fill=Ee(t.fill||null),t.dir=Re(t.dir,-1)});const L=a==2?y[1].facets[0].scale:y[0].scale,se={axes:wr,series:vr},ee=(e.drawOrder||["axes","series"]).map(t=>se[t]);function J(t){const s=t.distr==3?r=>Tl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Ps(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:g}=t,b=g-f;return(o-f)/b}}function te(t){let s=C[t];if(s==null){let r=(e.scales||Dn)[t]||Dn;if(r.from!=null){te(r.from);let o=wt({},C[r.from],r,{key:t});o.valToPct=J(o),C[t]=o}else{s=C[t]=wt({},t==L?$a:Pu,r),s.key=t;let o=s.time,f=s.range,g=Pl(f);if((t!=L||a==2&&!o)&&(g&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ki:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ki:{mode:1,hard:f[1],soft:f[1]}},g=!1),!g&&ns(f))){let b=f;f=(T,R,W)=>R==null?un:Jn(R,W,b)}s.range=Ee(f||(o?Yu:t==L?s.distr==3?Ku:s.distr==4?ju:ur:s.distr==3?cr:s.distr==4?fr:qu)),s.auto=Ee(g?!1:s.auto),s.clamp=Ee(s.clamp||Lu),s._min=s._max=null,s.valToPct=J(s)}}}te("x"),te("y"),a==1&&y.forEach(t=>{te(t.scale)}),Y.forEach(t=>{te(t.scale)});for(let t in e.scales)te(t);const x=C[L],N=x.distr;let O,le;x.ori==0?(el(h,no),O=c,le=u):(el(h,so),O=u,le=c);const F={};for(let t in C){let s=C[t];(s.min!=null||s.max!=null)&&(F[t]={min:s.min,max:s.max},s.min=s.max=null)}const V=e.tzDate||(t=>new Date(St(t/ne))),P=e.fmtDate||ti,Ae=ne==1?su(V):ru(V),ve=sa(V,na(ne==1?nu:au,P)),fe=aa(V,ia(uu,P)),he=[],oe=n.legend=wt({},du,e.legend),H=n.cursor=wt({},_u,{drag:{y:a==2}},e.cursor),Me=oe.show,Ge=H.show,Ce=oe.markers;oe.idxs=he,Ce.width=Ee(Ce.width),Ce.dash=Ee(Ce.dash),Ce.stroke=Ee(Ce.stroke),Ce.fill=Ee(Ce.fill);let xe,ft,We,Se=[],mt=[],Ze,Je=!1,nt={};if(oe.live){const t=y[1]?y[1].values:null;Je=t!=null,Ze=Je?t(n,1,0):{_:0};for(let s in Ze)nt[s]=Js}if(Me)if(xe=vl("table",ho,h),We=vl("tbody",null,xe),oe.mount(n,xe),Je){ft=vl("thead",null,xe,We);let t=vl("tr",null,ft);vl("th",null,t);for(var Ot in Ze)vl("th",Fi,t).textContent=Ot}else el(xe,mo),oe.live&&el(xe,go);const _e={show:!0},dt={show:!1};function Gt(t,s){if(s==0&&(Je||!oe.live||a==2))return un;let r=[],o=vl("tr",_o,We,We.childNodes[s]);el(o,t.class),t.show||el(o,Il);let f=vl("th",null,o);if(Ce.show){let T=al(wo,f);if(s>0){let R=Ce.width(n,s);R&&(T.style.border=R+"px "+Ce.dash(n,s)+" "+Ce.stroke(n,s)),T.style.background=Ce.fill(n,s)}}let g=al(Fi,f);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(Ce.show||(g.style.color=t.width>0?Ce.stroke(n,s):Ce.fill(n,s)),Ie("click",f,T=>{if(H._lock)return;Be(T);let R=y.indexOf(t);if((T.ctrlKey||T.metaKey)!=oe.isolate){let W=y.some((j,Z)=>Z>0&&Z!=R&&j.show);y.forEach((j,Z)=>{Z>0&&_l(Z,W?Z==R?_e:dt:_e,!0,_t.setSeries)})}else _l(R,{show:!t.show},!0,_t.setSeries)},!1),Bt&&Ie(zi,f,T=>{H._lock||(Be(T),_l(y.indexOf(t),$l,!0,_t.setSeries))},!1));for(var b in Ze){let T=vl("td",xo,o);T.textContent="--",r.push(T)}return[o,r]}const xt=new Map;function Ie(t,s,r,o=!0){const f=xt.get(s)||{},g=H.bind[t](n,s,r,o);g&&(Hl(t,s,f[t]=g),xt.set(s,f))}function st(t,s,r){const o=xt.get(s)||{};for(let f in o)(t==null||f==t)&&(Vs(f,s,o[f]),delete o[f]);t==null&&xt.delete(s)}let Mt=0,zt=0,de=0,z=0,ke=0,Ue=0,Kt=ke,Vt=Ue,At=de,It=z,at=0,bt=0,pt=0,yt=0;n.bbox={};let ol=!1,G=!1,q=!1,K=!1,ie=!1,Q=!1;function re(t,s,r){(r||t!=n.width||s!=n.height)&&w(t,s),ql(!1),q=!0,G=!0,Kl()}function w(t,s){n.width=Mt=de=t,n.height=zt=z=s,ke=Ue=0,Le(),qe();let r=n.bbox;at=r.left=zl(ke*Ne,.5),bt=r.top=zl(Ue*Ne,.5),pt=r.width=zl(de*Ne,.5),yt=r.height=zl(z*Ne,.5)}const M=3;function $(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=_r(s);t=s==M||r&&o,t||(w(n.width,n.height),G=!0)}}function ce({width:t,height:s}){re(t,s)}n.setSize=ce;function Le(){let t=!1,s=!1,r=!1,o=!1;Y.forEach((f,g)=>{if(f.show&&f._show){let{side:b,_size:T}=f,R=b%2,W=f.label!=null?f.labelSize:0,j=T+W;j>0&&(R?(de-=j,b==3?(ke+=j,o=!0):r=!0):(z-=j,b==0?(Ue+=j,t=!0):s=!0))}}),Ht[0]=t,Ht[1]=r,Ht[2]=s,Ht[3]=o,de-=rt[1]+rt[3],ke+=rt[3],z-=rt[2]+rt[0],Ue+=rt[0]}function qe(){let t=ke+de,s=Ue+z,r=ke,o=Ue;function f(g,b){switch(g){case 1:return t+=b,t-b;case 2:return s+=b,s-b;case 3:return r-=b,r+b;case 0:return o-=b,o+b}}Y.forEach((g,b)=>{if(g.show&&g._show){let T=g.side;g._pos=f(T,g._size),g.label!=null&&(g._lpos=f(T,g.labelSize))}})}if(H.dataIdx==null){let t=H.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Ee(t.prox),o=t.bias??=0;H.dataIdx=(f,g,b,T)=>{if(g==0)return b;let R=b,W=r(f,g,b,T)??Ke,j=W>=0&&W<Ke,Z=x.ori==0?de:z,ge=H.left,Oe=l[0],Pe=l[g];if(s.has(Pe[b])){R=null;let Te=null,pe=null,ae;if(o==0||o==-1)for(ae=b;Te==null&&ae-- >0;)s.has(Pe[ae])||(Te=ae);if(o==0||o==1)for(ae=b;pe==null&&ae++<Pe.length;)s.has(Pe[ae])||(pe=ae);if(Te!=null||pe!=null)if(j){let et=Te==null?-1/0:O(Oe[Te],x,Z,0),ot=pe==null?1/0:O(Oe[pe],x,Z,0),Ft=ge-et,Ye=ot-ge;Ft<=Ye?Ft<=W&&(R=Te):Ye<=W&&(R=pe)}else R=pe==null?Te:Te==null?pe:b-Te<=pe-b?Te:pe}else j&&kt(ge-O(Oe[b],x,Z,0))>W&&(R=null);return R}}const Be=t=>{H.event=t};H.idxs=he,H._lock=!1;let Fe=H.points;Fe.show=Ee(Fe.show),Fe.size=Ee(Fe.size),Fe.stroke=Ee(Fe.stroke),Fe.width=Ee(Fe.width),Fe.fill=Ee(Fe.fill);const vt=n.focus=wt({},e.focus||{alpha:.3},H.focus),Bt=vt.prox>=0,Qe=Bt&&Fe.one;let be=[],me=[],ht=[];function ul(t,s){let r=Fe.show(n,s);if(r instanceof HTMLElement)return el(r,vo),el(r,t.class),yl(r,-10,-10,de,z),k.insertBefore(r,be[s]),r}function Jt(t,s){if(a==1||s>0){let r=a==1&&C[t.scale].time,o=t.value;t.value=r?$i(o)?aa(V,ia(o,P)):o||fe:o||Au,t.label=t.label||(r?xu:wu)}if(Qe||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Hu||Po,t.fillTo=Ee(t.fillTo||Ru),t.pxAlign=+Re(t.pxAlign,U),t.pxRound=ha(t.pxAlign),t.stroke=Ee(t.stroke||null),t.fill=Ee(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Cu(qt(1,t.width),1),o=t.points=wt({},{size:r,width:qt(1,r*.2),stroke:t.stroke,space:r*2,paths:Wu,_stroke:null,_fill:null},t.points);o.show=Ee(o.show),o.filter=Ee(o.filter),o.fill=Ee(o.fill),o.stroke=Ee(o.stroke),o.paths=Ee(o.paths),o.pxAlign=t.pxAlign}if(Me){let r=Gt(t,s);Se.splice(s,0,r[0]),mt.splice(s,0,r[1]),oe.values.push(null)}if(Ge){he.splice(s,0,null);let r=null;Qe?s==0&&(r=ul(t,s)):s>0&&(r=ul(t,s)),be.splice(s,0,r),me.splice(s,0,0),ht.splice(s,0,0)}Rt("addSeries",s)}function nl(t,s){s=s??y.length,t=a==1?Ys(t,s,oa,pa):Ys(t,s,{},da),y.splice(s,0,t),Jt(y[s],s)}n.addSeries=nl;function Zt(t){if(y.splice(t,1),Me){oe.values.splice(t,1),mt.splice(t,1);let s=Se.splice(t,1)[0];st(null,s.firstChild),s.remove()}Ge&&(he.splice(t,1),be.splice(t,1)[0].remove(),me.splice(t,1),ht.splice(t,1)),Rt("delSeries",t)}n.delSeries=Zt;const Ht=[!1,!1,!1,!1];function Fl(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=C[t.scale];o==null&&(t.scale=r?y[1].scale:L,o=C[t.scale]);let f=o.time;t.size=Ee(t.size),t.space=Ee(t.space),t.rotate=Ee(t.rotate),Pl(t.incrs)&&t.incrs.forEach(b=>{!Rl.has(b)&&Rl.set(b,Fa(b))}),t.incrs=Ee(t.incrs||(o.distr==2?eu:f?ne==1?lu:iu:Vl)),t.splits=Ee(t.splits||(f&&o.distr==1?Ae:o.distr==3?Bs:o.distr==4?Su:yu)),t.stroke=Ee(t.stroke),t.grid.stroke=Ee(t.grid.stroke),t.ticks.stroke=Ee(t.ticks.stroke),t.border.stroke=Ee(t.border.stroke);let g=t.values;t.values=Pl(g)&&!Pl(g[0])?Ee(g):f?Pl(g)?sa(V,na(g,P)):$i(g)?ou(V,g):g||ve:g||bu,t.filter=Ee(t.filter||(o.distr>=3&&o.log==10?Eu:o.distr==3&&o.log==2?Mu:Pa)),t.font=wa(t.font),t.labelFont=wa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(Ht[s]=!0,t._el=al(uo,_))}}function cl(t,s,r,o){let[f,g,b,T]=r,R=s%2,W=0;return R==0&&(T||g)&&(W=s==0&&!f||s==2&&!b?St(ra.size/3):0),R==1&&(f||b)&&(W=s==1&&!g||s==3&&!T?St(ca.size/2):0),W}const Ml=n.padding=(e.padding||[cl,cl,cl,cl]).map(t=>Ee(Re(t,cl))),rt=n._padding=Ml.map((t,s)=>t(n,s,Ht,0));let gt,Ct=null,Dt=null;const Fn=a==1?y[0].idxs:null;let fl=null,hn=!1;function oi(t,s){if(l=t??[],n.data=n._data=l,a==2){gt=0;for(let r=1;r<y.length;r++)gt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),fl=l[0],gt=fl.length;let r=l;if(N==2){r=l.slice();let o=r[0]=Array(gt);for(let f=0;f<gt;f++)o[f]=f}n._data=l=r}if(ql(!0),Rt("setData"),N==2&&(q=!0),s!==!1){let r=x;r.auto(n,hn)?os():Cl(L,r.min,r.max),K=K||H.left>=0,Q=!0,Kl()}}n.setData=oi;function os(){hn=!0;let t,s;a==1&&(gt>0?(Ct=Fn[0]=0,Dt=Fn[1]=gt-1,t=l[0][Ct],s=l[0][Dt],N==2?(t=Ct,s=Dt):t==s&&(N==3?[t,s]=ts(t,t,x.log,!1):N==4?[t,s]=Qs(t,t,x.log,!1):x.time?s=t+St(86400/ne):[t,s]=Jn(t,s,Xs,!0))):(Ct=Fn[0]=t=null,Dt=Fn[1]=s=null)),Cl(L,t,s)}let On,Yl,us,cs,fs,ds,ps,vs,hs,jt;function ui(t,s,r,o,f,g){t??=Ni,r??=ei,o??="butt",f??=Ni,g??="round",t!=On&&(m.strokeStyle=On=t),f!=Yl&&(m.fillStyle=Yl=f),s!=us&&(m.lineWidth=us=s),g!=fs&&(m.lineJoin=fs=g),o!=ds&&(m.lineCap=ds=o),r!=cs&&m.setLineDash(cs=r)}function ci(t,s,r,o){s!=Yl&&(m.fillStyle=Yl=s),t!=ps&&(m.font=ps=t),r!=vs&&(m.textAlign=vs=r),o!=hs&&(m.textBaseline=hs=o)}function gs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,hn)&&(s==null||s.min==null)){let g=Re(Ct,0),b=Re(Dt,o.length-1),T=r.min==null?Eo(o,g,b,f,t.distr==3):[r.min,r.max];t.min=gl(t.min,r.min=T[0]),t.max=qt(t.max,r.max=T[1])}}const fi={min:null,max:null};function dr(){for(let o in C){let f=C[o];F[o]==null&&(f.min==null||F[L]!=null&&f.auto(n,hn))&&(F[o]=fi)}for(let o in C){let f=C[o];F[o]==null&&f.from!=null&&F[f.from]!=null&&(F[o]=fi)}F[L]!=null&&ql(!0);let t={};for(let o in F){let f=F[o];if(f!=null){let g=t[o]=cn(C[o],Oo);if(f.min!=null)wt(g,f);else if(o!=L||a==2)if(gt==0&&g.from==null){let b=g.range(n,null,null,o);g.min=b[0],g.max=b[1]}else g.min=Ke,g.max=-Ke}}if(gt>0){y.forEach((o,f)=>{if(a==1){let g=o.scale,b=F[g];if(b==null)return;let T=t[g];if(f==0){let R=T.range(n,T.min,T.max,g);T.min=R[0],T.max=R[1],Ct=hl(T.min,l[0]),Dt=hl(T.max,l[0]),Dt-Ct>1&&(l[0][Ct]<T.min&&Ct++,l[0][Dt]>T.max&&Dt--),o.min=fl[Ct],o.max=fl[Dt]}else o.show&&o.auto&&gs(T,b,o,l[f],o.sorted);o.idxs[0]=Ct,o.idxs[1]=Dt}else if(f>0&&o.show&&o.auto){let[g,b]=o.facets,T=g.scale,R=b.scale,[W,j]=l[f],Z=t[T],ge=t[R];Z!=null&&gs(Z,F[T],g,W,g.sorted),ge!=null&&gs(ge,F[R],b,j,b.sorted),o.min=b.min,o.max=b.max}});for(let o in t){let f=t[o],g=F[o];if(f.from==null&&(g==null||g.min==null)){let b=f.range(n,f.min==Ke?null:f.min,f.max==-Ke?null:f.max,o);f.min=b[0],f.max=b[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let g=t[f.from];if(g.min==null)f.min=f.max=null;else{let b=f.range(n,g.min,g.max,o);f.min=b[0],f.max=b[1]}}}let s={},r=!1;for(let o in t){let f=t[o],g=C[o];if(g.min!=f.min||g.max!=f.max){g.min=f.min,g.max=f.max;let b=g.distr;g._min=b==3?Tl(g.min):b==4?Ps(g.min,g.asinh):b==100?g.fwd(g.min):g.min,g._max=b==3?Tl(g.max):b==4?Ps(g.max,g.asinh):b==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){y.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)q=!0,Rt("setScale",o);Ge&&H.left>=0&&(K=Q=!0)}for(let o in F)F[o]=null}function pr(t){let s=Is(Ct-1,0,gt-1),r=Is(Dt+1,0,gt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<gt-1;)r++;return[s,r]}function vr(){if(gt>0){let t=y.some(s=>s._focus)&&jt!=vt.alpha;t&&(m.globalAlpha=jt=vt.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(di(r,!1),di(r,!0),s._paths==null)){let o=jt;jt!=s.alpha&&(m.globalAlpha=jt=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),jt!=o&&(m.globalAlpha=jt=o)}}),y.forEach((s,r)=>{if(r>0&&s.show){let o=jt;jt!=s.alpha&&(m.globalAlpha=jt=s.alpha),s._paths!=null&&pi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,Ct,Dt,f),b=s.points.filter(n,r,g,f);(g||b)&&(s.points._paths=s.points.paths(n,r,Ct,Dt,b),pi(r,!0))}jt!=o&&(m.globalAlpha=jt=o),Rt("drawSeries",r)}}),t&&(m.globalAlpha=jt=1)}}function di(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function pi(t,s){let r=s?y[t].points:y[t],{stroke:o,fill:f,clip:g,flags:b,_stroke:T=r._stroke,_fill:R=r._fill,_width:W=r.width}=r._paths;W=je(W*Ne,3);let j=null,Z=W%2/2;s&&R==null&&(R=W>0?"#fff":T);let ge=r.pxAlign==1&&Z>0;if(ge&&m.translate(Z,Z),!s){let Oe=at-W/2,Pe=bt-W/2,Te=pt+W,pe=yt+W;j=new Path2D,j.rect(Oe,Pe,Te,pe)}s?ms(T,W,r.dash,r.cap,R,o,f,b,g):hr(t,T,W,r.dash,r.cap,R,o,f,b,j,g),ge&&m.translate(-Z,-Z)}function hr(t,s,r,o,f,g,b,T,R,W,j){let Z=!1;R!=0&&D.forEach((ge,Oe)=>{if(ge.series[0]==t){let Pe=y[ge.series[1]],Te=l[ge.series[1]],pe=(Pe._paths||Dn).band;Pl(pe)&&(pe=ge.dir==1?pe[0]:pe[1]);let ae,et=null;Pe.show&&pe&&Ao(Te,Ct,Dt)?(et=ge.fill(n,Oe)||g,ae=Pe._paths.clip):pe=null,ms(s,r,o,f,et,b,T,R,W,j,ae,pe),Z=!0}}),Z||ms(s,r,o,f,g,b,T,R,W,j)}const vi=fn|Ws;function ms(t,s,r,o,f,g,b,T,R,W,j,Z){ui(t,s,r,o,f),(R||W||Z)&&(m.save(),R&&m.clip(R),W&&m.clip(W)),Z?(T&vi)==vi?(m.clip(Z),j&&m.clip(j),Gn(f,b),Nn(t,g,s)):T&Ws?(Gn(f,b),m.clip(Z),Nn(t,g,s)):T&fn&&(m.save(),m.clip(Z),j&&m.clip(j),Gn(f,b),m.restore(),Nn(t,g,s)):(Gn(f,b),Nn(t,g,s)),(R||W||Z)&&m.restore()}function Nn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=On=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function Gn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Yl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function gr(t,s,r,o){let f=Y[t],g;if(o<=0)g=[0,0];else{let b=f._space=f.space(n,t,s,r,o),T=f._incrs=f.incrs(n,t,s,r,o,b);g=Ju(s,r,T,o,b)}return f._found=g}function _s(t,s,r,o,f,g,b,T,R,W){let j=b%2/2;U==1&&m.translate(j,j),ui(T,b,R,W,T),m.beginPath();let Z,ge,Oe,Pe,Te=f+(o==0||o==3?-g:g);r==0?(ge=f,Pe=Te):(Z=f,Oe=Te);for(let pe=0;pe<t.length;pe++)s[pe]!=null&&(r==0?Z=Oe=t[pe]:ge=Pe=t[pe],m.moveTo(Z,ge),m.lineTo(Oe,Pe));m.stroke(),U==1&&m.translate(-j,-j)}function mr(t){let s=!0;return Y.forEach((r,o)=>{if(!r.show)return;let f=C[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,ql(!1));return}else r._show||(s=!1,r._show=!0,ql(!1));let g=r.side,b=g%2,{min:T,max:R}=f,[W,j]=gr(o,T,R,b==0?de:z);if(j==0)return;let Z=f.distr==2,ge=r._splits=r.splits(n,o,T,R,W,j,Z),Oe=f.distr==2?ge.map(ae=>fl[ae]):ge,Pe=f.distr==2?fl[ge[1]]-fl[ge[0]]:W,Te=r._values=r.values(n,r.filter(n,Oe,o,j,Pe),o,j,Pe);r._rotate=g==2?r.rotate(n,Te,o,j):0;let pe=r._size;r._size=rl(r.size(n,Te,o,t)),pe!=null&&r._size!=pe&&(s=!1)}),s}function _r(t){let s=!0;return Ml.forEach((r,o)=>{let f=r(n,o,Ht,t);f!=rt[o]&&(s=!1),rt[o]=f}),s}function wr(){for(let t=0;t<Y.length;t++){let s=Y[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,g,b=s.stroke(n,t),T=r==0||r==3?-1:1,[R,W]=s._found;if(s.label!=null){let Ut=s.labelGap*T,$t=St((s._lpos+Ut)*Ne);ci(s.labelFont[0],b,"center",r==2?yn:Oi),m.save(),o==1?(f=g=0,m.translate($t,St(bt+yt/2)),m.rotate((r==3?-qn:qn)/2)):(f=St(at+pt/2),g=$t);let Gl=Da(s.label)?s.label(n,t,R,W):s.label;m.fillText(Gl,f,g),m.restore()}if(W==0)continue;let j=C[s.scale],Z=o==0?pt:yt,ge=o==0?at:bt,Oe=s._splits,Pe=j.distr==2?Oe.map(Ut=>fl[Ut]):Oe,Te=j.distr==2?fl[Oe[1]]-fl[Oe[0]]:R,pe=s.ticks,ae=s.border,et=pe.show?pe.size:0,ot=St(et*Ne),Ft=St((s.alignTo==2?s._size-et-s.gap:s.gap)*Ne),Ye=s._rotate*-qn/180,ut=X(s._pos*Ne),Qt=(ot+Ft)*T,Wt=ut+Qt;g=o==0?Wt:0,f=o==1?Wt:0;let sl=s.font[0],dl=s.align==1?tn:s.align==2?Cs:Ye>0?tn:Ye<0?Cs:o==0?"center":r==3?Cs:tn,xl=Ye||o==1?"middle":r==2?yn:Oi;ci(sl,b,dl,xl);let Xt=s.font[1]*s.lineGap,il=Oe.map(Ut=>X(p(Ut,j,Z,ge))),pl=s._values;for(let Ut=0;Ut<pl.length;Ut++){let $t=pl[Ut];if($t!=null){o==0?f=il[Ut]:g=il[Ut],$t=""+$t;let Gl=$t.indexOf(`
`)==-1?[$t]:$t.split(/\n/gm);for(let Yt=0;Yt<Gl.length;Yt++){let Ri=Gl[Yt];Ye?(m.save(),m.translate(f,g+Yt*Xt),m.rotate(Ye),m.fillText(Ri,0,0),m.restore()):m.fillText(Ri,f,g+Yt*Xt)}}}pe.show&&_s(il,pe.filter(n,Pe,t,W,Te),o,r,ut,ot,je(pe.width*Ne,3),pe.stroke(n,t),pe.dash,pe.cap);let bl=s.grid;bl.show&&_s(il,bl.filter(n,Pe,t,W,Te),o,o==0?2:1,o==0?bt:at,o==0?yt:pt,je(bl.width*Ne,3),bl.stroke(n,t),bl.dash,bl.cap),ae.show&&_s([ut],[1],o==0?1:0,o==0?1:2,o==1?bt:at,o==1?yt:pt,je(ae.width*Ne,3),ae.stroke(n,t),ae.dash,ae.cap)}Rt("drawAxes")}function ql(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let zn=!1,ws=!1,gn=[];function xr(){ws=!1;for(let t=0;t<gn.length;t++)Rt(...gn[t]);gn.length=0}function Kl(){zn||(Ho(hi),zn=!0)}function br(t,s=!1){zn=!0,ws=s,t(n),hi(),s&&gn.length>0&&queueMicrotask(xr)}n.batch=br;function hi(){if(ol&&(dr(),ol=!1),q&&($(),q=!1),G){if(tt(I,tn,ke),tt(I,yn,Ue),tt(I,kn,de),tt(I,Tn,z),tt(k,tn,ke),tt(k,yn,Ue),tt(k,kn,de),tt(k,Tn,z),tt(_,kn,Mt),tt(_,Tn,zt),S.width=St(Mt*Ne),S.height=St(zt*Ne),Y.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let g=f===3||f===0?r:0,b=f%2==1;tt(t,b?"left":"top",o-g),tt(t,b?"width":"height",r),tt(t,b?"top":"left",b?Ue:ke),tt(t,b?"height":"width",b?z:de),zs(t,Il)}else el(t,Il)}),On=Yl=us=fs=ds=ps=vs=hs=cs=null,jt=1,wn(!0),ke!=Kt||Ue!=Vt||de!=At||z!=It){ql(!1);let t=de/At,s=z/It;if(Ge&&!K&&H.left>=0){H.left*=t,H.top*=s,jl&&yl(jl,St(H.left),0,de,z),Jl&&yl(Jl,0,St(H.top),de,z);for(let r=0;r<be.length;r++){let o=be[r];o!=null&&(me[r]*=t,ht[r]*=s,yl(o,rl(me[r]),rl(ht[r]),de,z))}}if($e.show&&!ie&&$e.left>=0&&$e.width>0){$e.left*=t,$e.width*=t,$e.top*=s,$e.height*=s;for(let r in Ts)tt(Xl,r,$e[r])}Kt=ke,Vt=Ue,At=de,It=z}Rt("setSize"),G=!1}Mt>0&&zt>0&&(m.clearRect(0,0,S.width,S.height),Rt("drawClear"),ee.forEach(t=>t()),Rt("draw")),$e.show&&ie&&(Vn($e),ie=!1),Ge&&K&&(Nl(null,!0,!1),K=!1),oe.show&&oe.live&&Q&&(Ss(),Q=!1),v||(v=!0,n.status=1,Rt("ready")),hn=!1,zn=!1}n.redraw=(t,s)=>{q=s||!1,t!==!1?Cl(L,x.min,x.max):Kl()};function xs(t,s){let r=C[t];if(r.from==null){if(gt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(gt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==L&&r.distr==2&&gt>0&&(s.min=hl(s.min,l[0]),s.max=hl(s.max,l[0]),s.min==s.max&&s.max++),F[t]=s,ol=!0,Kl()}}n.setScale=xs;let bs,ys,jl,Jl,gi,mi,Zl,Ql,_i,wi,Xe,lt,Al=!1;const Nt=H.drag;let Lt=Nt.x,Pt=Nt.y;Ge&&(H.x&&(bs=al(fo,k)),H.y&&(ys=al(po,k)),x.ori==0?(jl=bs,Jl=ys):(jl=ys,Jl=bs),Xe=H.left,lt=H.top);const $e=n.select=wt({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Xl=$e.show?al(co,$e.over?k:I):null;function Vn(t,s){if($e.show){for(let r in t)$e[r]=t[r],r in Ts&&tt(Xl,r,t[r]);s!==!1&&Rt("setSelect")}}n.setSelect=Vn;function yr(t){if(y[t].show)Me&&zs(Se[t],Il);else if(Me&&el(Se[t],Il),Ge){let r=Qe?be[0]:be[t];r!=null&&yl(r,-10,-10,de,z)}}function Cl(t,s,r){xs(t,{min:s,max:r})}function _l(t,s,r,o){s.focus!=null&&Mr(t),s.show!=null&&y.forEach((f,g)=>{g>0&&(t==g||t==null)&&(f.show=s.show,yr(g),a==2?(Cl(f.facets[0].scale,null,null),Cl(f.facets[1].scale,null,null)):Cl(f.scale,null,null),Kl())}),r!==!1&&Rt("setSeries",t,s),o&&xn("setSeries",n,t,s)}n.setSeries=_l;function Sr(t,s){wt(D[t],s)}function kr(t,s){t.fill=Ee(t.fill||null),t.dir=Re(t.dir,-1),s=s??D.length,D.splice(s,0,t)}function Tr(t){t==null?D.length=0:D.splice(t,1)}n.addBand=kr,n.setBand=Sr,n.delBand=Tr;function Er(t,s){y[t].alpha=s,Ge&&be[t]!=null&&(be[t].style.opacity=s),Me&&Se[t]&&(Se[t].style.opacity=s)}let Sl,Dl,Ol;const $l={focus:!0};function Mr(t){if(t!=Ol){let s=t==null,r=vt.alpha!=1;y.forEach((o,f)=>{if(a==1||f>0){let g=s||f==0||f==t;o._focus=s?null:g,r&&Er(f,g?1:vt.alpha)}}),Ol=t,r&&Kl()}}Me&&Bt&&Ie(Vi,xe,t=>{H._lock||(Be(t),Ol!=null&&_l(null,$l,!0,_t.setSeries))});function wl(t,s,r){let o=C[s];r&&(t=t/Ne-(o.ori==1?Ue:ke));let f=de;o.ori==1&&(f=z,t=f-t),o.dir==-1&&(t=f-t);let g=o._min,b=o._max,T=t/f,R=g+(b-g)*T,W=o.distr;return W==3?on(10,R):W==4?Do(R,o.asinh):W==100?o.bwd(R):R}function Ar(t,s){let r=wl(t,L,s);return hl(r,l[0],Ct,Dt)}n.valToIdx=t=>hl(t,l[0]),n.posToIdx=Ar,n.posToVal=wl,n.valToPos=(t,s,r)=>C[s].ori==0?c(t,C[s],r?pt:de,r?at:0):u(t,C[s],r?yt:z,r?bt:0),n.setCursor=(t,s,r)=>{Xe=t.left,lt=t.top,Nl(null,s,r)};function xi(t,s){tt(Xl,tn,$e.left=t),tt(Xl,kn,$e.width=s)}function bi(t,s){tt(Xl,yn,$e.top=t),tt(Xl,Tn,$e.height=s)}let mn=x.ori==0?xi:bi,_n=x.ori==1?xi:bi;function Cr(){if(Me&&oe.live)for(let t=a==2?1:0;t<y.length;t++){if(t==0&&Je)continue;let s=oe.values[t],r=0;for(let o in s)mt[t][r++].firstChild.nodeValue=s[o]}}function Ss(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{he[o]=r}):Fo(t.idx)||he.fill(t.idx),oe.idx=he[0]),Me&&oe.live){for(let r=0;r<y.length;r++)(r>0||a==1&&!Je)&&Dr(r,he[r]);Cr()}Q=!1,s!==!1&&Rt("setLegend")}n.setLegend=Ss;function Dr(t,s){let r=y[t],o=t==0&&N==2?fl:l[t],f;Je?f=r.values(n,t,s)??nt:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?nt:{_:f}),oe.values[t]=f}function Nl(t,s,r){_i=Xe,wi=lt,[Xe,lt]=H.move(n,Xe,lt),H.left=Xe,H.top=lt,Ge&&(jl&&yl(jl,St(Xe),0,de,z),Jl&&yl(Jl,0,St(lt),de,z));let o,f=Ct>Dt;Sl=Ke,Dl=null;let g=x.ori==0?de:z,b=x.ori==1?de:z;if(Xe<0||gt==0||f){o=H.idx=null;for(let T=0;T<y.length;T++){let R=be[T];R!=null&&yl(R,-10,-10,de,z)}Bt&&_l(null,$l,!0,t==null&&_t.setSeries),oe.live&&(he.fill(o),Q=!0)}else{let T,R,W;a==1&&(T=x.ori==0?Xe:lt,R=wl(T,L),o=H.idx=hl(R,l[0],Ct,Dt),W=O(l[0][o],x,g,0));let j=-10,Z=-10,ge=0,Oe=0,Pe=!0,Te="",pe="";for(let ae=a==2?1:0;ae<y.length;ae++){let et=y[ae],ot=he[ae],Ft=ot==null?null:a==1?l[ae][ot]:l[ae][1][ot],Ye=H.dataIdx(n,ae,o,R),ut=Ye==null?null:a==1?l[ae][Ye]:l[ae][1][Ye];if(Q=Q||ut!=Ft||Ye!=ot,he[ae]=Ye,ae>0&&et.show){let Qt=Ye==null?-10:Ye==o?W:O(a==1?l[0][Ye]:l[ae][0][Ye],x,g,0),Wt=ut==null?-10:le(ut,a==1?C[et.scale]:C[et.facets[1].scale],b,0);if(Bt&&ut!=null){let sl=x.ori==1?Xe:lt,dl=kt(vt.dist(n,ae,Ye,Wt,sl));if(dl<Sl){let xl=vt.bias;if(xl!=0){let Xt=wl(sl,et.scale),il=ut>=0?1:-1,pl=Xt>=0?1:-1;pl==il&&(pl==1?xl==1?ut>=Xt:ut<=Xt:xl==1?ut<=Xt:ut>=Xt)&&(Sl=dl,Dl=ae)}else Sl=dl,Dl=ae}}if(Q||Qe){let sl,dl;x.ori==0?(sl=Qt,dl=Wt):(sl=Wt,dl=Qt);let xl,Xt,il,pl,bl,Ut,$t=!0,Gl=Fe.bbox;if(Gl!=null){$t=!1;let Yt=Gl(n,ae);il=Yt.left,pl=Yt.top,xl=Yt.width,Xt=Yt.height}else il=sl,pl=dl,xl=Xt=Fe.size(n,ae);if(Ut=Fe.fill(n,ae),bl=Fe.stroke(n,ae),Qe)ae==Dl&&Sl<=vt.prox&&(j=il,Z=pl,ge=xl,Oe=Xt,Pe=$t,Te=Ut,pe=bl);else{let Yt=be[ae];Yt!=null&&(me[ae]=il,ht[ae]=pl,qi(Yt,xl,Xt,$t),Ui(Yt,Ut,bl),yl(Yt,rl(il),rl(pl),de,z))}}}}if(Qe){let ae=vt.prox,et=Ol==null?Sl<=ae:Sl>ae||Dl!=Ol;if(Q||et){let ot=be[0];ot!=null&&(me[0]=j,ht[0]=Z,qi(ot,ge,Oe,Pe),Ui(ot,Te,pe),yl(ot,rl(j),rl(Z),de,z))}}}if($e.show&&Al)if(t!=null){let[T,R]=_t.scales,[W,j]=_t.match,[Z,ge]=t.cursor.sync.scales,Oe=t.cursor.drag;if(Lt=Oe._x,Pt=Oe._y,Lt||Pt){let{left:Pe,top:Te,width:pe,height:ae}=t.select,et=t.scales[Z].ori,ot=t.posToVal,Ft,Ye,ut,Qt,Wt,sl=T!=null&&W(T,Z),dl=R!=null&&j(R,ge);sl&&Lt?(et==0?(Ft=Pe,Ye=pe):(Ft=Te,Ye=ae),ut=C[T],Qt=O(ot(Ft,Z),ut,g,0),Wt=O(ot(Ft+Ye,Z),ut,g,0),mn(gl(Qt,Wt),kt(Wt-Qt))):mn(0,g),dl&&Pt?(et==1?(Ft=Pe,Ye=pe):(Ft=Te,Ye=ae),ut=C[R],Qt=le(ot(Ft,ge),ut,b,0),Wt=le(ot(Ft+Ye,ge),ut,b,0),_n(gl(Qt,Wt),kt(Wt-Qt))):_n(0,b)}else Es()}else{let T=kt(_i-gi),R=kt(wi-mi);if(x.ori==1){let ge=T;T=R,R=ge}Lt=Nt.x&&T>=Nt.dist,Pt=Nt.y&&R>=Nt.dist;let W=Nt.uni;W!=null?Lt&&Pt&&(Lt=T>=W,Pt=R>=W,!Lt&&!Pt&&(R>T?Pt=!0:Lt=!0)):Nt.x&&Nt.y&&(Lt||Pt)&&(Lt=Pt=!0);let j,Z;Lt&&(x.ori==0?(j=Zl,Z=Xe):(j=Ql,Z=lt),mn(gl(j,Z),kt(Z-j)),Pt||_n(0,b)),Pt&&(x.ori==1?(j=Zl,Z=Xe):(j=Ql,Z=lt),_n(gl(j,Z),kt(Z-j)),Lt||mn(0,g)),!Lt&&!Pt&&(mn(0,0),_n(0,0))}if(Nt._x=Lt,Nt._y=Pt,t==null){if(r){if(Pi!=null){let[T,R]=_t.scales;_t.values[0]=T!=null?wl(x.ori==0?Xe:lt,T):null,_t.values[1]=R!=null?wl(x.ori==1?Xe:lt,R):null}xn(Ds,n,Xe,lt,de,z,o)}if(Bt){let T=r&&_t.setSeries,R=vt.prox;Ol==null?Sl<=R&&_l(Dl,$l,!0,T):Sl>R?_l(null,$l,!0,T):Dl!=Ol&&_l(Dl,$l,!0,T)}}Q&&(oe.idx=o,Ss()),s!==!1&&Rt("setCursor")}let Ll=null;Object.defineProperty(n,"rect",{get(){return Ll==null&&wn(!1),Ll}});function wn(t=!1){t?Ll=null:(Ll=k.getBoundingClientRect(),Rt("syncRect",Ll))}function yi(t,s,r,o,f,g,b){H._lock||Al&&t!=null&&t.movementX==0&&t.movementY==0||(ks(t,s,r,o,f,g,b,!1,t!=null),t!=null?Nl(null,!0,!0):Nl(s,!0,!1))}function ks(t,s,r,o,f,g,b,T,R){if(Ll==null&&wn(!1),Be(t),t!=null)r=t.clientX-Ll.left,o=t.clientY-Ll.top;else{if(r<0||o<0){Xe=-10,lt=-10;return}let[W,j]=_t.scales,Z=s.cursor.sync,[ge,Oe]=Z.values,[Pe,Te]=Z.scales,[pe,ae]=_t.match,et=s.axes[0].side%2==1,ot=x.ori==0?de:z,Ft=x.ori==1?de:z,Ye=et?g:f,ut=et?f:g,Qt=et?o:r,Wt=et?r:o;if(Pe!=null?r=pe(W,Pe)?p(ge,C[W],ot,0):-10:r=ot*(Qt/Ye),Te!=null?o=ae(j,Te)?p(Oe,C[j],Ft,0):-10:o=Ft*(Wt/ut),x.ori==1){let sl=r;r=o,o=sl}}R&&(s==null||s.cursor.event.type==Ds)&&((r<=1||r>=de-1)&&(r=zl(r,de)),(o<=1||o>=z-1)&&(o=zl(o,z))),T?(gi=r,mi=o,[Zl,Ql]=H.move(n,r,o)):(Xe=r,lt=o)}const Ts={width:0,height:0,left:0,top:0};function Es(){Vn(Ts,!1)}let Si,ki,Ti,Ei;function Mi(t,s,r,o,f,g,b){Al=!0,Lt=Pt=Nt._x=Nt._y=!1,ks(t,s,r,o,f,g,b,!0,!1),t!=null&&(Ie(Ls,Ns,Ai,!1),xn(Gi,n,Zl,Ql,de,z,null));let{left:T,top:R,width:W,height:j}=$e;Si=T,ki=R,Ti=W,Ei=j}function Ai(t,s,r,o,f,g,b){Al=Nt._x=Nt._y=!1,ks(t,s,r,o,f,g,b,!1,!0);let{left:T,top:R,width:W,height:j}=$e,Z=W>0||j>0,ge=Si!=T||ki!=R||Ti!=W||Ei!=j;if(Z&&ge&&Vn($e),Nt.setScale&&Z&&ge){let Oe=T,Pe=W,Te=R,pe=j;if(x.ori==1&&(Oe=R,Pe=j,Te=T,pe=W),Lt&&Cl(L,wl(Oe,L),wl(Oe+Pe,L)),Pt)for(let ae in C){let et=C[ae];ae!=L&&et.from==null&&et.min!=Ke&&Cl(ae,wl(Te+pe,ae),wl(Te,ae))}Es()}else H.lock&&(H._lock=!H._lock,Nl(s,!0,t!=null));t!=null&&(st(Ls,Ns),xn(Ls,n,Xe,lt,de,z,null))}function Lr(t,s,r,o,f,g,b){if(H._lock)return;Be(t);let T=Al;if(Al){let R=!0,W=!0,j=10,Z,ge;x.ori==0?(Z=Lt,ge=Pt):(Z=Pt,ge=Lt),Z&&ge&&(R=Xe<=j||Xe>=de-j,W=lt<=j||lt>=z-j),Z&&R&&(Xe=Xe<Zl?0:de),ge&&W&&(lt=lt<Ql?0:z),Nl(null,!0,!0),Al=!1}Xe=-10,lt=-10,he.fill(null),Nl(null,!0,!0),T&&(Al=T)}function Ci(t,s,r,o,f,g,b){H._lock||(Be(t),os(),Es(),t!=null&&xn(Ii,n,Xe,lt,de,z,null))}function Di(){Y.forEach(Zu),re(n.width,n.height,!0)}Hl(jn,rn,Di);const en={};en.mousedown=Mi,en.mousemove=yi,en.mouseup=Ai,en.dblclick=Ci,en.setSeries=(t,s,r,o)=>{let f=_t.match[2];r=f(n,s,r),r!=-1&&_l(r,o,!0,!1)},Ge&&(Ie(Gi,k,Mi),Ie(Ds,k,yi),Ie(zi,k,t=>{Be(t),wn(!1)}),Ie(Vi,k,Lr),Ie(Ii,k,Ci),Us.add(n),n.syncRect=wn);const In=n.hooks=e.hooks||{};function Rt(t,s,r){ws?gn.push([t,s,r]):t in In&&In[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)In[s]=(In[s]||[]).concat(t.hooks[s])});const Li=(t,s,r)=>r,_t=wt({key:null,setSeries:!1,filters:{pub:Qi,sub:Qi},scales:[L,y[1]?y[1].scale:null],match:[Xi,Xi,Li],values:[null,null]},H.sync);_t.match.length==2&&_t.match.push(Li),H.sync=_t;const Pi=_t.key,Ms=er(Pi);function xn(t,s,r,o,f,g,b){_t.filters.pub(t,s,r,o,f,g,b)&&Ms.pub(t,s,r,o,f,g,b)}Ms.sub(n);function Pr(t,s,r,o,f,g,b){_t.filters.sub(t,s,r,o,f,g,b)&&en[t](null,s,r,o,f,g,b)}n.pub=Pr;function Rr(){Ms.unsub(n),Us.delete(n),xt.clear(),Vs(jn,rn,Di),h.remove(),xe?.remove(),Rt("destroy")}n.destroy=Rr;function As(){Rt("init",e,l),oi(l||e.data,!1),F[L]?xs(L,F[L]):os(),ie=$e.show&&($e.width>0||$e.height>0),K=Q=!0,re(e.width,e.height)}return y.forEach(Jt),Y.forEach(Fl),i?i instanceof HTMLElement?(i.appendChild(h),As()):i(n,As):As(),n}Tt.assign=wt;Tt.fmtNum=$s;Tt.rangeNum=Jn;Tt.rangeLog=ts;Tt.rangeAsinh=Qs;Tt.orient=Ul;Tt.pxRatio=Ne;Tt.join=Bo;Tt.fmtDate=ti,Tt.tzDate=Xo;Tt.sync=er;{Tt.addGap=Fu,Tt.clipGaps=ss;let e=Tt.paths={points:ar};e.linear=or,e.stepped=Gu,e.bars=zu,e.spline=Iu}var Qu=De('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=De('<span class="estimated-badge svelte-3wi8ix">est</span>'),$u=De('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),ec=De('<span class="estimated-badge svelte-3wi8ix">est</span>'),tc=De("<span> </span> <!>",1),lc=De('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),nc=De('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),sc=De('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function ic(e,l){Xn(l,!0);const i=.5,n=1.2,a=0,c=100;function u(x,N){const O=[...x].sort((P,Ae)=>P-Ae),le=N/100*(O.length-1),F=Math.floor(le),V=Math.ceil(le);return F===V?O[F]:O[F]+(O[V]-O[F])*(le-F)}let p=an(l,"trend",3,null),v=Ve(!1),h=Ve(""),S=Ve(null),m=He(()=>Yn.config.temp_units==="C"),_=He(Ta),I=He(Ks),k=He(()=>{if(l.readings.length===0)return null;const x=l.readings.filter(_e=>_e.status!=="invalid");if(x.length===0)return null;const N=[...x].sort((_e,dt)=>new Date(_e.timestamp).getTime()-new Date(dt.timestamp).getTime()),O=N[0],le=N[N.length-1],F=N.map(_e=>_e.sg_calibrated??_e.sg_raw).filter(_e=>_e!==null&&_e>=i&&_e<=n),V=N.map(_e=>_e.temp_calibrated??_e.temp_raw).filter(_e=>_e!==null&&_e>=a&&_e<=c);if(F.length===0)return null;const P=F[F.length-1],Ae=F[0],ve=u(F,95),fe=u(F,5),he=new Date(O.timestamp).getTime(),oe=new Date(le.timestamp).getTime(),Me=(oe-he)/(1e3*60*60*24),Ge=Me>0?(P-Ae)/Me:0;let Ce=null,xe=null,ft=null,We=null;if(V.length>0){const _e=V[V.length-1],dt=V.reduce((Ie,st)=>Ie+st,0)/V.length,Gt=u(V,95),xt=u(V,5);Ce=d(m)?_e:_e*9/5+32,xe=d(m)?dt:dt*9/5+32,ft=d(m)?Gt:Gt*9/5+32,We=d(m)?xt:xt*9/5+32}let Se=0;const mt=.001;for(let _e=F.length-2;_e>=0;_e--)if(Math.abs(F[_e]-P)>mt){const dt=new Date(N[_e+1].timestamp).getTime();Se=(oe-dt)/(1e3*60*60*24);break}let Ze=null,Je=null;const nt=l.originalGravity??ve,Ot=l.originalGravity===null;return nt>1&&nt>P&&(Ze=(nt-P)/(nt-1)*100,Je=(nt-P)*131.25),{currentSg:P,firstSg:Ae,highSg:ve,lowSg:fe,currentTemp:Ce,avgTemp:xe,highTemp:ft,lowTemp:We,fermRate:Ge,durationDays:Me,daysAtCurrentSg:Se,apparentAttenuation:Ze,abv:Je,ogIsEstimated:Ot,effectiveOg:nt}});function U(){ue(h,l.originalGravity?.toFixed(3)??"",!0),ue(v,!0),setTimeout(()=>d(S)?.focus(),0)}function X(){const x=d(h).trim();if(!x)l.onOgChange?.(null);else{const N=parseFloat(x);!isNaN(N)&&N>=.99&&N<=1.2&&l.onOgChange?.(N)}ue(v,!1)}function ne(x){x.key==="Enter"?X():x.key==="Escape"&&ue(v,!1)}function y(x){return An(x)}function Y(x){return`${x>=0?"+":""}${x.toFixed(4)}`}function C(x){return x<1?`${(x*24).toFixed(1)}h`:`${x.toFixed(1)}d`}function D(x){return x===null?"--":x.toFixed(1)}function L(x){return x===null?"--":`${x.toFixed(1)}%`}var se=Ln(),ee=kl(se);{var J=x=>{var N=nc(),O=A(N),le=A(O),F=A(le),V=A(F,!0);E(F);var P=B(F,2),Ae=B(A(P),2),ve=A(Ae,!0);E(Ae),E(P);var fe=B(P,2),he=B(A(fe),2),oe=A(he,!0);E(he),E(fe);var H=B(fe,2),Me=B(A(H),2),Ge=A(Me,!0);E(Me),E(H);var Ce=B(H,2),xe=B(A(Ce),2),ft=A(xe,!0);E(xe),E(Ce),E(le);var We=B(le,2),Se=B(A(We),2),mt=B(A(Se),2),Ze=A(mt,!0),Je=B(Ze),nt=A(Je,!0);E(Je),E(mt),E(Se);var Ot=B(Se,2),_e=B(A(Ot),2),dt=A(_e,!0),Gt=B(dt),xt=A(Gt,!0);E(Gt),E(_e),E(Ot);var Ie=B(Ot,2),st=B(A(Ie),2),Mt=A(st,!0),zt=B(Mt),de=A(zt,!0);E(zt),E(st),E(Ie);var z=B(Ie,2),ke=B(A(z),2),Ue=A(ke,!0),Kt=B(Ue),Vt=A(Kt,!0);E(Kt),E(ke),E(z),E(We),E(O);var At=B(O,2),It=A(At),at=B(A(It),2);let bt;var pt=A(at);E(at),E(It);var yt=B(It,2),ol=B(A(yt),2),G=A(ol,!0);E(ol),E(yt);var q=B(yt,2),K=B(A(q),2),ie=A(K,!0);E(K),E(q);var Q=B(q,2),re=B(A(Q),2);{var w=Qe=>{var be=Qu();Sa(be),be.__keydown=ne,qs(be,me=>ue(S,me),()=>d(S)),xa("blur",be,X),ka(be,()=>d(h),me=>ue(h,me)),ye(Qe,be)},M=Qe=>{var be=Ln(),me=kl(be);{var ht=Jt=>{var nl=$u();nl.__click=U;var Zt=A(nl);let Ht;var Fl=A(Zt,!0);E(Zt);var cl=B(Zt,2);{var Ml=rt=>{var gt=Xu();ye(rt,gt)};it(cl,rt=>{d(k).ogIsEstimated&&rt(Ml)})}Bl(2),E(nl),ct(rt=>{sn(nl,"title",d(k).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Ht=ml(Zt,1,"stat-value svelte-3wi8ix",null,Ht,{estimated:d(k).ogIsEstimated}),we(Fl,rt)},[()=>y(d(k).effectiveOg)]),ye(Jt,nl)},ul=Jt=>{var nl=tc(),Zt=kl(nl);let Ht;var Fl=A(Zt,!0);E(Zt);var cl=B(Zt,2);{var Ml=rt=>{var gt=ec();ye(rt,gt)};it(cl,rt=>{d(k).ogIsEstimated&&rt(Ml)})}ct(rt=>{Ht=ml(Zt,1,"stat-value svelte-3wi8ix",null,Ht,{estimated:d(k).ogIsEstimated}),we(Fl,rt)},[()=>y(d(k).effectiveOg)]),ye(Jt,nl)};it(me,Jt=>{l.onOgChange?Jt(ht):Jt(ul,!1)},!0)}ye(Qe,be)};it(re,Qe=>{l.onOgChange&&d(v)?Qe(w):Qe(M,!1)})}E(Q);var $=B(Q,2),ce=B(A($),2),Le=A(ce,!0);E(ce),E($);var qe=B($,2),Be=B(A(qe),2),Fe=A(Be,!0);E(Be),E(qe);var vt=B(qe,2);{var Bt=Qe=>{var be=lc(),me=B(A(be),2),ht=A(me,!0);E(me),Bl(2),E(be),ct((ul,Jt)=>{sn(be,"title",`Estimated time until target FG (R=${ul??""})`),we(ht,Jt)},[()=>p().r2.toFixed(2),()=>C(p().daysToFg)]),ye(Qe,be)};it(vt,Qe=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&Qe(Bt)})}E(At),E(N),ct((Qe,be,me,ht,ul,Jt,nl,Zt,Ht,Fl,cl,Ml,rt)=>{we(V,d(I)==="SG"?"Gravity":d(I)==="P"?"Plato":"Brix"),we(ve,Qe),we(oe,be),we(Ge,me),we(ft,ht),we(Ze,ul),we(nt,d(_)),we(dt,Jt),we(xt,d(_)),we(Mt,nl),we(de,d(_)),we(Ue,Zt),we(Vt,d(_)),bt=ml(at,1,"stat-value rate svelte-3wi8ix",null,bt,{fermenting:d(k).fermRate<0}),we(pt,`${Ht??""}/day`),we(G,Fl),we(ie,cl),we(Le,Ml),we(Fe,rt)},[()=>y(d(k).currentSg),()=>y(d(k).firstSg),()=>y(d(k).highSg),()=>y(d(k).lowSg),()=>D(d(k).currentTemp),()=>D(d(k).avgTemp),()=>D(d(k).highTemp),()=>D(d(k).lowTemp),()=>Y(d(k).fermRate),()=>C(d(k).durationDays),()=>C(d(k).daysAtCurrentSg),()=>L(d(k).apparentAttenuation),()=>L(d(k).abv)]),ye(x,N)},te=x=>{var N=sc();ye(x,N)};it(ee,x=>{d(k)?x(J):x(te,!1)})}ye(e,se),$n()}Qn(["keydown","click"]);var ac=De('<button type="button"> </button>'),rc=De("<option> </option>"),oc=De('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),uc=De('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),cc=De('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),fc=De('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function dc(e,l){Xn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=He(()=>Yn.config.smoothing_enabled),c=He(()=>Yn.config.smoothing_samples),u=Ve("UTC"),p=Ve(0),v=Ve(3),h=an(l,"deviceColor",3,"BLACK"),S=an(l,"originalGravity",3,null),m=an(l,"controlEvents",19,()=>[]),_=He(()=>Yn.config.temp_units==="C"),I=He(Ks),k,U=null,X=Ve(!0),ne=Ve(null),y=Ve(24),Y=Ve(nn([])),C=Ve(nn([])),D=Ve(null),L=Ve(null);const se={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},ee="#facc15",J="rgba(250, 204, 21, 0.3)",te="#71717a",x="#a1a1aa",N="rgba(255, 255, 255, 0.04)",O="#22d3ee",le="rgba(250, 204, 21, 0.5)",F="brewsignal_chart_trend_enabled";let V=Ve(!0),P=Ve(nn([]));function Ae(G,q,K=1.01){const ie=[];for(let me=0;me<G.length;me++)q[me]!==null&&ie.push([G[me],q[me]]);if(ie.length<10)return null;const Q=ie.length;let re=0,w=0,M=0,$=0;for(const[me,ht]of ie)re+=me,w+=ht,M+=me*ht,$+=me*me;const ce=Q*$-re*re;if(Math.abs(ce)<1e-10)return null;const Le=(Q*M-re*w)/ce,qe=(w-Le*re)/Q,Be=w/Q;let Fe=0,vt=0;for(const[me,ht]of ie){const ul=Le*me+qe;Fe+=(ht-ul)**2,vt+=(ht-Be)**2}const Bt=vt>0?1-Fe/vt:0;let Qe=null,be=null;if(Le<0&&Bt>.3){const me=G[G.length-1],ht=(K-qe)/Le;ht>me&&(be=(ht-me)/(1440*60),be>0&&be<60?Qe=K:be=null)}return{slope:Le,intercept:qe,r2:Bt,predictedFg:Qe,daysToFg:be}}function ve(G){const q=[];let K=null,ie=null;for(const re of G){const w=Ge(re.timestamp);re.action==="heat_on"?K=w:re.action==="heat_off"&&K!==null?(q.push({type:"heating",startTime:K,endTime:w}),K=null):re.action==="cool_on"?ie=w:re.action==="cool_off"&&ie!==null&&(q.push({type:"cooling",startTime:ie,endTime:w}),ie=null)}const Q=Date.now()/1e3;return K!==null&&q.push({type:"heating",startTime:K,endTime:Q}),ie!==null&&q.push({type:"cooling",startTime:ie,endTime:Q}),q}function fe(G,q){return G.map(K=>q.slope*K+q.intercept)}function he(G,q,K){const ie=new Date(G*1e3);try{return K?ie.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:q}):ie.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:q})}catch(Q){return console.warn("Invalid timezone:",q,Q),K?ie.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):ie.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function oe(G,q,K){const ie=ee,Q=se[h()]||x;return{width:G,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[re=>{const w=re.cursor.idx;if(w==null)return;const M=re.root.querySelector(".u-legend");M&&(M.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`)}]},scales:{x:{time:!0},sg:{auto:!0,range:(re,w,M)=>{const $=(M-w)*.1||.005;return[w-$,M+$]}},temp:{auto:!0,range:(re,w,M)=>{const $=M-w,ce=10;if($<ce){const qe=(M+w)/2;return[qe-ce/2,qe+ce/2]}const Le=$*.1;return[w-Le,M+Le]}}},axes:[{stroke:te,grid:{stroke:N,width:1},ticks:{stroke:N,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(re,w)=>w.map(M=>he(M,K,d(y)<=24))},{scale:"sg",stroke:ie,grid:{stroke:N,width:1},ticks:{stroke:N,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(re,w)=>w.map(M=>An(M)),side:3},{scale:"temp",stroke:Q,grid:{show:!1},ticks:{stroke:N,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(re,w)=>w.map(M=>M.toFixed(0)+""),side:1}],series:[{value:(re,w)=>he(w,K,!1)+" "+he(w,K,!0)},{label:d(I)==="SG"?"Gravity":d(I)==="P"?"Plato":"Brix",scale:"sg",stroke:ie,width:2,value:(re,w)=>w!==null?An(w):"--",fill:(re,w)=>{const M=re.ctx.createLinearGradient(0,re.bbox.top,0,re.bbox.top+re.bbox.height);return M.addColorStop(0,J),M.addColorStop(1,"transparent"),M},points:{show:!1},paths:Tt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:Q,width:1.5,dash:[4,4],value:(re,w)=>w!==null?w.toFixed(1)+"":"--",points:{show:!1},paths:Tt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:O,width:1.5,dash:[2,4],value:(re,w)=>w!==null?w.toFixed(1)+"":"--",points:{show:!1},paths:Tt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:le,width:2,dash:[8,4],value:(re,w)=>w!==null?An(w):"--",points:{show:!1},show:d(V)}]}}function H(G,q){if(q<=1)return G;const K=[];for(let ie=0;ie<G.length;ie++){const Q=[],re=Math.floor(q/2);for(let w=Math.max(0,ie-re);w<=Math.min(G.length-1,ie+re);w++){const M=G[w];M!==null&&Q.push(M)}Q.length>0?K.push(Q.reduce((w,M)=>w+M,0)/Q.length):K.push(null)}return K}function Me(G,q,K,ie,Q){if(G.length<=Q)return[G,q,K,ie];const re=Math.ceil(G.length/Q),w=[],M=[],$=[],ce=[];for(let Le=0;Le<G.length;Le+=re){const qe=Math.min(Le+re,G.length);let Be=0,Fe=0,vt=0,Bt=0,Qe=0,be=0;for(let me=Le;me<qe;me++)q[me]!==null&&(Be+=q[me],Fe++),K[me]!==null&&(vt+=K[me],Bt++),ie[me]!==null&&(Qe+=ie[me],be++);w.push(G[Math.floor((Le+qe-1)/2)]),M.push(Fe>0?Be/Fe:null),$.push(Bt>0?vt/Bt:null),ce.push(be>0?Qe/be:null)}return[w,M,$,ce]}function Ge(G){return!G.endsWith("Z")&&!G.match(/[+-]\d{2}:\d{2}$/)&&(G=G+"Z"),new Date(G).getTime()/1e3}function Ce(G,q,K){if(G.length===0||q.length===0)return q.map(()=>null);const ie=[...G].sort((w,M)=>Ge(w.timestamp)-Ge(M.timestamp)),Q=ie.map(w=>Ge(w.timestamp)),re=ie.map(w=>w.temperature===null?null:K?w.temperature:w.temperature*9/5+32);return q.map(w=>{let M=null,$=null;for(let ce=0;ce<Q.length;ce++)if(Q[ce]<=w&&(M={time:Q[ce],temp:re[ce]}),Q[ce]>=w&&$===null){$={time:Q[ce],temp:re[ce]};break}if(M&&$&&M.temp!==null&&$.temp!==null){if(M.time===$.time)return M.temp;const ce=(w-M.time)/($.time-M.time);return M.temp+ce*($.temp-M.temp)}return M!==null&&M.temp!==null?M.temp:$!==null&&$.temp!==null?$.temp:null})}function xe(G,q,K){const ie=[...G].reverse();let Q=[],re=[],w=[];for(const qe of ie){Q.push(Ge(qe.timestamp)),re.push(qe.sg_calibrated??qe.sg_raw);const Be=qe.temp_calibrated??qe.temp_raw;Be!==null?w.push(K?Be:Be*9/5+32):w.push(null)}let M=Ce(q,Q,K);d(a)&&d(c)>1&&(re=H(re,d(c)),w=H(w,d(c)),M=H(M,d(c))),[Q,re,w,M]=Me(Q,re,w,M,500);const ce=Ae(Q,re);ue(D,ce,!0);const Le=ce?fe(Q,ce):Q.map(()=>null);return[Q,re,w,M,Le]}const ft=3e4;async function We(G=!1){const K=Date.now()-d(p);if(!(!G&&d(p)>0&&K<ft)){ue(X,!0),ue(ne,null);try{if(!d(L)){const ie=await Yr(l.batchId);ue(L,ie.device_id??null,!0)}if(d(L)){const[ie,Q]=await Promise.all([qr(d(L),d(y),l.batchId),Kr(d(y)).catch(()=>[])]);ue(Y,ie,!0),ue(C,Q,!0),Se()}else ue(Y,[],!0),ue(C,[],!0),ue(ne,"No device assigned to this batch")}catch(ie){ue(ne,ie instanceof Error?ie.message:"Failed to load data",!0)}finally{ue(p,Date.now(),!0),ue(X,!1)}}}function Se(){if(!k||d(Y).length===0)return;const G=xe(d(Y),d(C),d(_)),q=oe(k.clientWidth,d(_),d(u));U&&U.destroy(),U=new Tt(q,G,k)}function mt(){U&&k&&U.setSize({width:k.clientWidth,height:220})}let Ze=null;function Je(){if(Ze&&(clearInterval(Ze),Ze=null),d(v)>0){const G=d(v)*60*1e3;Ze=setInterval(()=>{d(X)||We(!1)},G)}}ba(async()=>{const G=localStorage.getItem(i);if(G!==null){const K=parseInt(G,10);Number.isNaN(K)||ue(v,K,!0)}const q=localStorage.getItem(F);q!==null&&ue(V,q==="true");try{const K=await fetch("/api/system/timezone");if(K.ok){const ie=await K.json();ue(u,ie.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await We(!0),window.addEventListener("resize",mt),Je()}),zr(()=>{U?.destroy(),window.removeEventListener("resize",mt),Ze&&clearInterval(Ze)}),Un(()=>{m()&&m().length>0?ue(P,ve(m()),!0):ue(P,[],!0)}),Un(()=>{d(_)!==void 0&&d(Y).length>0&&k&&Se()}),Un(()=>{d(a),d(c),d(Y).length>0&&k&&Se()});function nt(G){const q=Number(G.target.value);ue(v,q,!0),localStorage.setItem(i,String(q)),Je(),We(!0)}function Ot(){ue(V,!d(V)),localStorage.setItem(F,String(d(V))),U&&U.setSeries(4,{show:d(V)})}var _e=fc(),dt=A(_e),Gt=A(dt);Pn(Gt,21,()=>Ur,Kn,(G,q)=>{var K=ac();let ie;K.__click=()=>{d(y)!==d(q).hours&&(ue(y,d(q).hours,!0),We(!0))};var Q=A(K,!0);E(K),ct(()=>{ie=ml(K,1,"range-btn svelte-12kwequ",null,ie,{active:d(y)===d(q).hours}),we(Q,d(q).label)}),ye(G,K)}),E(Gt);var xt=B(Gt,2),Ie=A(xt),st=B(A(Ie),2);st.__change=nt,Pn(st,21,()=>n,Kn,(G,q)=>{var K=rc(),ie=A(K,!0);E(K);var Q={};ct(()=>{we(ie,d(q).label),Q!==(Q=d(q).value)&&(K.value=(K.__value=d(q).value)??"")}),ye(G,K)}),E(st);var Mt;Xr(st),E(Ie);var zt=B(Ie,2),de=B(A(zt),2),z=A(de);Bl(2),E(de);var ke=B(de,4);let Ue;ke.__click=Ot;var Kt=A(ke);Mn(Kt,"background: rgba(250, 204, 21, 0.5);"),Bl(2),E(ke),E(zt),E(xt),E(dt);var Vt=B(dt,2),At=A(Vt);{var It=G=>{var q=oc();ye(G,q)};it(At,G=>{d(X)&&G(It)})}var at=B(At,2);{var bt=G=>{var q=uc(),K=B(A(q),2);K.__click=()=>We(!0),E(q),ye(G,q)},pt=G=>{var q=Ln(),K=kl(q);{var ie=Q=>{var re=cc();ye(Q,re)};it(K,Q=>{d(Y).length===0&&Q(ie)},!0)}ye(G,q)};it(at,G=>{d(ne)?G(bt):G(pt,!1)})}E(Vt),qs(Vt,G=>k=G,()=>k);var yt=B(Vt,2);{var ol=G=>{{let q=He(()=>d(D)?{predictedFg:d(D).predictedFg,daysToFg:d(D).daysToFg,r2:d(D).r2}:null);ic(G,{get readings(){return d(Y)},get originalGravity(){return S()},get trend(){return d(q)}})}};it(yt,G=>{d(Y).length>0&&G(ol)})}E(_e),ct(()=>{Mt!==(Mt=d(v))&&(st.value=(st.__value=d(v))??"",$r(st,d(v))),Mn(z,`background: ${(se[h()]||"var(--text-secondary)")??""};`),Ue=ml(ke,1,"legend-item legend-toggle svelte-12kwequ",null,Ue,{"legend-disabled":!d(V)}),sn(ke,"title",d(V)?"Hide trend line":"Show trend line")}),ye(e,_e),$n()}Qn(["click","change"]);var pc=De('<span class="error-message svelte-1k5rb4o"> </span>'),vc=De('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),hc=De('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),gc=De('<div class="w-1 rounded-sm transition-all"></div>'),mc=De('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),_c=De(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),wc=De('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),xc=De('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),bc=De("<div><!></div>"),yc=De('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Sc=De('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function kc(e,l){Xn(l,!0);let i=an(l,"expanded",3,!1),n=an(l,"wide",3,!1),a=He(()=>l.batch.device_id?ya.tilts.get(l.batch.device_id)??null:null),c=He(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),u=He(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=He(()=>l.progress?.temperature?.current??null),v=He(()=>d(a)?.color??"BLACK"),h=He(()=>d(a)?.rssi??null),S=He(()=>d(a)?.paired??!0),m=He(()=>d(a)?.last_seen??new Date().toISOString()),_=He(()=>d(a)?.sg_raw??d(u)),I=He(()=>d(a)?.temp_raw??d(p)),k=Ve(!1),U=Ve(nn([])),X=Ve(!1);Un(()=>{i()&&!d(k)&&(ue(k,!0),d(X)||jr(l.batch.id,168).then(w=>{ue(U,w,!0),ue(X,!0)}).catch(w=>{console.error("Failed to fetch control events:",w),ue(U,[],!0),ue(X,!0)}))});let ne=Ve(!1),y=Ve(""),Y=Ve(null),C=Ve(!1),D=Ve(null);function L(){ue(y,d(c),!0),ue(ne,!0),ue(D,null),setTimeout(()=>d(Y)?.focus(),0)}async function se(){if(d(C))return;const w=d(y).trim();if(!w||w===d(c)){ue(ne,!1),ue(D,null);return}ue(C,!0),ue(D,null);try{await Jr(l.batch.id,{name:w}),ue(ne,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(M){console.error("Failed to update batch name:",M),ue(D,M instanceof Error?M.message:"Failed to save batch name",!0)}finally{ue(C,!1)}}function ee(w){w.key==="Enter"?se():w.key==="Escape"&&ue(ne,!1)}let J=He(Ta),te=He(Ks);const x={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function N(w){return An(w)}function O(w){return Wr(w)}function le(w){return w>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:w>=-60?{bars:3,color:"var(--positive)",label:"Good"}:w>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function F(w){const M=Math.floor((Date.now()-new Date(w).getTime())/1e3);if(M<10)return"just now";if(M<60)return`${M}s ago`;const $=Math.floor(M/60);if($<60)return`${$}m ago`;const ce=Math.floor($/60);return ce<24?`${ce}h ago`:`${Math.floor(ce/24)}d ago`}let V=He(()=>x[d(v)]||"var(--tilt-black)"),P=He(()=>d(h)!==null?le(d(h)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),Ae=He(()=>F(d(m)));var ve=Sc();let fe;var he=A(ve),oe=B(he,2),H=A(oe),Me=A(H),Ge=A(Me);{var Ce=w=>{var M=vc(),$=A(M);Sa($),$.__keydown=ee;let ce;qs($,Be=>ue(Y,Be),()=>d(Y));var Le=B($,2);{var qe=Be=>{var Fe=pc(),vt=A(Fe,!0);E(Fe),ct(()=>we(vt,d(D))),ye(Be,Fe)};it(Le,Be=>{d(D)&&Be(qe)})}E(M),ct(()=>{$.disabled=d(C),ce=ml($,1,"beer-name-input svelte-1k5rb4o",null,ce,{error:d(D)})}),xa("blur",$,se),ka($,()=>d(y),Be=>ue(y,Be)),ye(w,M)},xe=w=>{var M=hc();M.__click=L;var $=A(M),ce=A($,!0);E($),Bl(2),E(M),ct(()=>we(ce,d(c))),ye(w,M)};it(Ge,w=>{d(ne)?w(Ce):w(xe,!1)})}var ft=B(Ge,2),We=A(ft),Se=B(We,2),mt=A(Se,!0);E(Se),E(ft),E(Me);var Ze=B(Me,2),Je=A(Ze),nt=A(Je);Pn(nt,20,()=>Array(4),Kn,(w,M,$)=>{var ce=gc();ct(()=>Mn(ce,`
									height: ${8+$*4}px;
									background: ${($<d(P).bars?d(P).color:"var(--bg-hover)")??""};
									opacity: ${$<d(P).bars?1:.4};
								`)),ye(w,ce)}),E(nt);var Ot=B(nt,2),_e=A(Ot);E(Ot),E(Je);var dt=B(Je,2);{var Gt=w=>{var M=mc();ye(w,M)};it(dt,w=>{d(S)||w(Gt)})}E(Ze),E(H);var xt=B(H,2),Ie=A(xt),st=A(Ie),Mt=A(st,!0),zt=B(Mt),de=A(zt,!0);E(zt),E(st);var z=B(st,2),ke=A(z,!0);E(z),E(Ie);var Ue=B(Ie,2),Kt=A(Ue),Vt=A(Kt);{var At=w=>{var M=_c(),$=kl(M,!0),ce=B($),Le=A(ce,!0);E(ce),ct(qe=>{we($,qe),we(Le,d(J))},[()=>O(d(p))]),ye(w,M)},It=w=>{var M=wc(),$=B(kl(M)),ce=A($,!0);E($),ct(()=>we(ce,d(J))),ye(w,M)};it(Vt,w=>{d(p)!==null?w(At):w(It,!1)})}E(Kt),Bl(2),E(Ue),E(xt);var at=B(xt,2);{var bt=w=>{var M=xc(),$=B(A(M),2),ce=A($,!0);E($);var Le=B($,4),qe=A(Le);E(Le),E(M),ct((Be,Fe)=>{we(ce,Be),we(qe,`${Fe??""}${d(J)??""}`)},[()=>N(d(_)),()=>d(I)!==null?O(d(I)):"--"]),ye(w,M)};it(at,w=>{(d(u)!==d(_)||d(p)!==d(I))&&d(a)&&w(bt)})}var pt=B(at,2);{var yt=w=>{var M=bc();let $;var ce=A(M);eo(ce,()=>l.batch.id,Le=>{dc(Le,{get batchId(){return l.batch.id},get deviceColor(){return d(v)},get originalGravity(){return l.batch.measured_og},get controlEvents(){return d(U)}})}),E(M),ct(()=>$=ml(M,1,"chart-section svelte-1k5rb4o",null,$,{hidden:!i()})),ye(w,M)};it(pt,w=>{d(k)&&w(yt)})}var ol=B(pt,2),G=A(ol),q=A(G);E(G);var K=B(G,2),ie=A(K),Q=B(ie,2);{var re=w=>{var M=yc();M.__click=function(...Le){l.onToggleExpand?.apply(this,Le)};var $=A(M);let ce;E(M),ct(()=>{sn(M,"aria-label",i()?"Collapse chart":"Expand chart"),ce=ml($,0,"w-4 h-4 transition-transform",null,ce,{"rotate-180":i()})}),ye(w,M)};it(Q,w=>{l.onToggleExpand&&w(re)})}Bl(2),E(K),E(ol),E(oe),E(ve),ct(w=>{fe=ml(ve,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,fe,{expanded:i(),wide:n()}),Mn(he,`background: ${d(V)??""};`),Mn(We,`background: ${d(V)??""};`),we(mt,d(v)),sn(Je,"title",`${d(P).label??""} signal (${d(h)??"N/A"??""} dBm)`),we(_e,`${d(h)??"N/A"??""} dBm`),we(Mt,w),we(de,d(te)!=="SG"?d(te):""),we(ke,d(te)==="SG"?"Gravity":d(te)==="P"?"Plato":"Brix"),we(q,`Updated ${d(Ae)??""}`),sn(ie,"href",`/batches/${l.batch.id??""}`)},[()=>N(d(u))]),ye(e,ve),$n()}Qn(["keydown","click"]);var Tc=De('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Ec=De('<div class="alerts-list svelte-1uha8ag"></div>'),Mc=De('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Ac=De('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Cc=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Dc=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Lc=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Pc=De("<div></div>"),Rc=De("<!> <!>",1);function Zc(e,l){Xn(l,!0);let i=Ve(!1),n=Ve(!1),a=Ve(nn([])),c=Ve(nn(new Map)),u=Ve(!0),p=Ve(null);ba(async()=>{const D=localStorage.getItem("brewsignal_alerts_dismissed"),L=localStorage.getItem("brewsignal_alerts_dismissed_time");D==="true"&&L&&Date.now()-parseInt(L,10)<360*60*1e3&&ue(i,!0),await v()});async function v(){ue(u,!0),ue(p,null);try{const D=await Zr();ue(a,D.filter(J=>J.status==="fermenting"||J.status==="conditioning"),!0);const L=d(a).map(async J=>{try{const te=await Qr(J.id);return[J.id,te]}catch{return null}}),se=await Promise.all(L),ee=new Map;for(const J of se)J&&ee.set(J[0],J[1]);ue(c,ee,!0)}catch(D){ue(p,D instanceof Error?D.message:"Failed to load batches",!0)}finally{ue(u,!1)}}let h=He(()=>new Map(d(a).filter(D=>D.device_id&&(D.status==="fermenting"||D.status==="conditioning")).map(D=>[D.device_id,D.id]))),S=He(()=>{const D=new Map(d(c));for(const[L,se]of d(h)){const ee=ya.tilts.get(L);if(ee){const J=D.get(se)||{batch_id:se,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}};D.set(se,{...J,measured:{...J.measured,current_sg:ee.sg},temperature:{...J.temperature,current:ee.temp,status:J.temperature.yeast_min!==void 0&&J.temperature.yeast_max!==void 0?ee.temp<J.temperature.yeast_min?"too_cold":ee.temp>J.temperature.yeast_max?"too_hot":"in_range":J.temperature.status}})}}return D}),m=Ve(null);function _(D){ue(m,d(m)===D?null:D,!0)}function I(){ue(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function k(){ue(n,!d(n))}var U=Rc();Hr("1uha8ag",D=>{Vr(()=>{Ir.title="Dashboard | BrewSignal"})});var X=kl(U);{var ne=D=>{var L=Ac(),se=A(L),ee=A(se),J=B(A(ee),4),te=A(J,!0);E(J),E(ee);var x=B(ee,2);x.__click=I,E(se);var N=B(se,2);{var O=V=>{var P=Ec();Pn(P,21,()=>bn.alerts,Kn,(Ae,ve)=>{var fe=Tc();let he;var oe=A(fe),H=A(oe);E(oe);var Me=B(oe,2),Ge=A(Me,!0);E(Me),E(fe),ct(()=>{he=ml(fe,1,"alert-item svelte-1uha8ag",null,he,{warning:d(ve).level==="warning",critical:d(ve).level==="critical"}),we(H,`${d(ve).day??""}:`),we(Ge,d(ve).message)}),ye(Ae,fe)}),E(P),ye(V,P)};it(N,V=>{d(n)||V(O)})}var le=B(N,2);{var F=V=>{var P=Mc();P.__click=k;var Ae=A(P,!0);E(P),ct(()=>we(Ae,d(n)?`Show ${bn.alerts.length} alerts`:"Show less")),ye(V,P)};it(le,V=>{bn.alerts.length>3&&V(F)})}E(L),ct(()=>we(te,bn.alerts.length)),ye(D,L)};it(X,D=>{bn.alerts.length>0&&!d(i)&&D(ne)})}var y=B(X,2);{var Y=D=>{var L=Cc();ye(D,L)},C=D=>{var L=Ln(),se=kl(L);{var ee=te=>{var x=Dc(),N=B(A(x),4),O=A(N,!0);E(N),E(x),ct(()=>we(O,d(p))),ye(te,x)},J=te=>{var x=Ln(),N=kl(x);{var O=F=>{var V=Lc();ye(F,V)},le=F=>{var V=Pc();let P;Pn(V,21,()=>d(a),Ae=>Ae.id,(Ae,ve)=>{{let fe=He(()=>d(S).get(d(ve).id)),he=He(()=>d(m)===d(ve).id),oe=He(()=>d(a).length===1);kc(Ae,{get batch(){return d(ve)},get progress(){return d(fe)},get expanded(){return d(he)},get wide(){return d(oe)},onToggleExpand:()=>_(d(ve).id),onBatchUpdated:v})}}),E(V),ct(()=>P=ml(V,1,"tilt-grid svelte-1uha8ag",null,P,{"single-tilt":d(a).length===1})),ye(F,V)};it(N,F=>{d(a).length===0?F(O):F(le,!1)},!0)}ye(te,x)};it(se,te=>{d(p)?te(ee):te(J,!1)},!0)}ye(D,L)};it(y,D=>{d(u)?D(Y):D(C,!1)})}ye(e,U),$n()}Qn(["click"]);export{Zc as component};
