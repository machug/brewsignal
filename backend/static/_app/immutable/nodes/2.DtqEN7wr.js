import{d as vs,c as Qn,a as xe,f as Te,s as _e,e as Si}from"../chunks/CsQfwH0S.js";import{h as Fr,K as Or,b7 as Br,b as Nr,ah as hs,at as Kl,c as u,ai as Oe,aj as gs,al as S,an as x,ak as N,aq as Ce,ar as et,s as le,as as Wl,p as ln,ao as ki,aL as Gr,ap as os,e as Ir,am as zr}from"../chunks/fKkNMI8q.js";import{e as Cn,i as $n}from"../chunks/COk1ZY4R.js";import{B as Vr,i as Ze}from"../chunks/BvBRaQNg.js";import{h as Hr}from"../chunks/DLseniaC.js";import{s as sl}from"../chunks/BDI2zAFW.js";import{t as Ti}from"../chunks/C8NDSE1R.js";import{w as Wn}from"../chunks/k2D9zoAh.js";import{r as Ei,s as Pl}from"../chunks/DbN3nGCc.js";import{s as Hl}from"../chunks/CcRNvR1k.js";import{b as Mi}from"../chunks/C-0Ur6Zf.js";import{b as ea}from"../chunks/CqqoqCZR.js";import{p as Mn}from"../chunks/CllCHKBI.js";import{c as us,d as En,b as ta,g as Ai,e as Wr}from"../chunks/CPwbAm-l.js";import{T as Ur,q as Yr,s as qr,t as jr,v as Kr,w as Jr,x as Zr,y as Qr,j as $r}from"../chunks/i8VL_lOf.js";import{i as Xr,s as eo}from"../chunks/C8srtpii.js";function to(e,l,a){Fr&&Or();var n=new Vr(e),i=!Br();Nr(()=>{var f=l();i&&f!==null&&typeof f=="object"&&(f={}),n.ensure(f,a)})}const lo=!0,Dt="u-",no="uplot",so=Dt+"hz",ao=Dt+"vt",io=Dt+"title",ro=Dt+"wrap",oo=Dt+"under",uo=Dt+"over",co=Dt+"axis",cn=Dt+"off",fo=Dt+"select",po=Dt+"cursor-x",vo=Dt+"cursor-y",ho=Dt+"cursor-pt",go=Dt+"legend",mo=Dt+"live",_o=Dt+"inline",wo=Dt+"series",bo=Dt+"marker",Na=Dt+"label",xo=Dt+"value",qn="width",jn="height",Un="top",Ga="bottom",kn="left",Ns="right",la="#000",Ia=la+"0",Gs="mousemove",za="mousedown",Is="mouseup",Va="mouseenter",Ha="mouseleave",Wa="dblclick",yo="resize",So="scroll",Ua="change",fs="dppxchange",na="--",Fn=typeof window<"u",Us=Fn?document:null,An=Fn?window:null,ko=Fn?navigator:null;let Ve,as;function Ys(){let e=devicePixelRatio;Ve!=e&&(Ve=e,as&&js(Ua,as,Ys),as=matchMedia(`(min-resolution: ${Ve-.001}dppx) and (max-resolution: ${Ve+.001}dppx)`),fn(Ua,as,Ys),An.dispatchEvent(new CustomEvent(fs)))}function pl(e,l){if(l!=null){let a=e.classList;!a.contains(l)&&a.add(l)}}function qs(e,l){let a=e.classList;a.contains(l)&&a.remove(l)}function st(e,l,a){e.style[l]=a+"px"}function Dl(e,l,a,n){let i=Us.createElement(e);return l!=null&&pl(i,l),a?.insertBefore(i,n),i}function yl(e,l){return Dl("div",e,l)}const Ya=new WeakMap;function Vl(e,l,a,n,i){let f="translate("+l+"px,"+a+"px)",c=Ya.get(e);f!=c&&(e.style.transform=f,Ya.set(e,f),l<0||a<0||l>n||a>i?pl(e,cn):qs(e,cn))}const qa=new WeakMap;function ja(e,l,a){let n=l+a,i=qa.get(e);n!=i&&(qa.set(e,n),e.style.background=l,e.style.borderColor=a)}const Ka=new WeakMap;function Ja(e,l,a,n){let i=l+""+a,f=Ka.get(e);i!=f&&(Ka.set(e,i),e.style.height=a+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-a/2+"px":0)}const sa={passive:!0},To={...sa,capture:!0};function fn(e,l,a,n){l.addEventListener(e,a,n?To:sa)}function js(e,l,a,n){l.removeEventListener(e,a,sa)}Fn&&Ys();function Rl(e,l,a,n){let i;a=a||0,n=n||l.length-1;let f=n<=2147483647;for(;n-a>1;)i=f?a+n>>1:vl((a+n)/2),l[i]<e?a=i:n=i;return e-l[a]<=l[n]-e?a:n}function Ci(e){return(a,n,i)=>{let f=-1,c=-1;for(let p=n;p<=i;p++)if(e(a[p])){f=p;break}for(let p=i;p>=n;p--)if(e(a[p])){c=p;break}return[f,c]}}const Li=e=>e!=null,Di=e=>e!=null&&e>0,ms=Ci(Li),Eo=Ci(Di);function Mo(e,l,a,n=0,i=!1){let f=i?Eo:ms,c=i?Di:Li;[l,a]=f(e,l,a);let p=e[l],v=e[l];if(l>-1)if(n==1)p=e[l],v=e[a];else if(n==-1)p=e[a],v=e[l];else for(let h=l;h<=a;h++){let k=e[h];c(k)&&(k<p?p=k:k>v&&(v=k))}return[p??Qe,v??-Qe]}function _s(e,l,a,n){let i=$a(e),f=$a(l);e==l&&(i==-1?(e*=a,l/=a):(e/=a,l*=a));let c=a==10?Jl:Ri,p=i==1?vl:Sl,v=f==1?Sl:vl,h=p(c(Lt(e))),k=v(c(Lt(l))),m=Ln(a,h),_=Ln(a,k);return a==10&&(h<0&&(m=$e(m,-h)),k<0&&(_=$e(_,-k))),n||a==2?(e=m*i,l=_*f):(e=Bi(e,m),l=ws(l,_)),[e,l]}function aa(e,l,a,n){let i=_s(e,l,a,n);return e==0&&(i[0]=0),l==0&&(i[1]=0),i}const ia=.1,Za={mode:3,pad:ia},Jn={pad:0,soft:null,mode:0},Ao={min:Jn,max:Jn};function ds(e,l,a,n){return bs(a)?Qa(e,l,a):(Jn.pad=a,Jn.soft=n?0:null,Jn.mode=n?3:0,Qa(e,l,Ao))}function Ge(e,l){return e??l}function Co(e,l,a){for(l=Ge(l,0),a=Ge(a,e.length-1);l<=a;){if(e[l]!=null)return!0;l++}return!1}function Qa(e,l,a){let n=a.min,i=a.max,f=Ge(n.pad,0),c=Ge(i.pad,0),p=Ge(n.hard,-Qe),v=Ge(i.hard,Qe),h=Ge(n.soft,Qe),k=Ge(i.soft,-Qe),m=Ge(n.mode,0),_=Ge(i.mode,0),Y=l-e,T=Jl(Y),I=al(Lt(e),Lt(l)),se=Jl(I),re=Lt(se-T);(Y<1e-24||re>10)&&(Y=0,(e==0||l==0)&&(Y=1e-24,m==2&&h!=Qe&&(f=0),_==2&&k!=-Qe&&(c=0)));let y=Y||I||1e3,Z=Jl(y),D=Ln(10,vl(Z)),P=y*(Y==0?e==0?.1:1:f),A=$e(Bi(e-P,D/10),24),ae=e>=h&&(m==1||m==3&&A<=h||m==2&&A>=h)?h:Qe,ne=al(p,A<ae&&e>=ae?ae:Fl(ae,A)),K=y*(Y==0?l==0?.1:1:c),ie=$e(ws(l+K,D/10),24),w=l<=k&&(_==1||_==3&&ie>=k||_==2&&ie<=k)?k:-Qe,U=Fl(v,ie>w&&l<=w?w:al(w,ie));return ne==U&&ne==0&&(U=100),[ne,U]}const Lo=new Intl.NumberFormat(Fn?ko.language:"en-US"),ra=e=>Lo.format(e),hl=Math,cs=hl.PI,Lt=hl.abs,vl=hl.floor,Ct=hl.round,Sl=hl.ceil,Fl=hl.min,al=hl.max,Ln=hl.pow,$a=hl.sign,Jl=hl.log10,Ri=hl.log2,Do=(e,l=1)=>hl.sinh(e)*l,zs=(e,l=1)=>hl.asinh(e/l),Qe=1/0;function Xa(e){return(Jl((e^e>>31)-(e>>31))|0)+1}function Ks(e,l,a){return Fl(al(e,l),a)}function Pi(e){return typeof e=="function"}function Le(e){return Pi(e)?e:()=>e}const Ro=()=>{},Fi=e=>e,Oi=(e,l)=>l,Po=e=>null,ei=e=>!0,ti=(e,l)=>e==l,Fo=/\.\d*?(?=9{6,}|0{6,})/gm,dn=e=>{if(Gi(e)||nn.has(e))return e;const l=`${e}`,a=l.match(Fo);if(a==null)return e;let n=a[0].length-1;if(l.indexOf("e-")!=-1){let[i,f]=l.split("e");return+`${dn(i)}e${f}`}return $e(e,n)};function on(e,l){return dn($e(dn(e/l))*l)}function ws(e,l){return dn(Sl(dn(e/l))*l)}function Bi(e,l){return dn(vl(dn(e/l))*l)}function $e(e,l=0){if(Gi(e))return e;let a=10**l,n=e*a*(1+Number.EPSILON);return Ct(n)/a}const nn=new Map;function Ni(e){return((""+e).split(".")[1]||"").length}function Xn(e,l,a,n){let i=[],f=n.map(Ni);for(let c=l;c<a;c++){let p=Lt(c),v=$e(Ln(e,c),p);for(let h=0;h<n.length;h++){let k=e==10?+`${n[h]}e${c}`:n[h]*v,m=(c>=0?0:p)+(c>=f[h]?0:f[h]),_=e==10?k:$e(k,m);i.push(_),nn.set(_,m)}}return i}const Zn={},oa=[],Dn=[null,null],tn=Array.isArray,Gi=Number.isInteger,Oo=e=>e===void 0;function li(e){return typeof e=="string"}function bs(e){let l=!1;if(e!=null){let a=e.constructor;l=a==null||a==Object}return l}function Bo(e){return e!=null&&typeof e=="object"}const No=Object.getPrototypeOf(Uint8Array),Ii="__proto__";function Rn(e,l=bs){let a;if(tn(e)){let n=e.find(i=>i!=null);if(tn(n)||l(n)){a=Array(e.length);for(let i=0;i<e.length;i++)a[i]=Rn(e[i],l)}else a=e.slice()}else if(e instanceof No)a=e.slice();else if(l(e)){a={};for(let n in e)n!=Ii&&(a[n]=Rn(e[n],l))}else a=e;return a}function St(e){let l=arguments;for(let a=1;a<l.length;a++){let n=l[a];for(let i in n)i!=Ii&&(bs(e[i])?St(e[i],Rn(n[i])):e[i]=Rn(n[i]))}return e}const Go=0,Io=1,zo=2;function Vo(e,l,a){for(let n=0,i,f=-1;n<l.length;n++){let c=l[n];if(c>f){for(i=c-1;i>=0&&e[i]==null;)e[i--]=null;for(i=c+1;i<a&&e[i]==null;)e[f=i++]=null}}}function Ho(e,l){if(Yo(e)){let c=e[0].slice();for(let p=1;p<e.length;p++)c.push(...e[p].slice(1));return qo(c[0])||(c=Uo(c)),c}let a=new Set;for(let c=0;c<e.length;c++){let v=e[c][0],h=v.length;for(let k=0;k<h;k++)a.add(v[k])}let n=[Array.from(a).sort((c,p)=>c-p)],i=n[0].length,f=new Map;for(let c=0;c<i;c++)f.set(n[0][c],c);for(let c=0;c<e.length;c++){let p=e[c],v=p[0];for(let h=1;h<p.length;h++){let k=p[h],m=Array(i).fill(void 0),_=l?l[c][h]:Io,Y=[];for(let T=0;T<k.length;T++){let I=k[T],se=f.get(v[T]);I===null?_!=Go&&(m[se]=I,_==zo&&Y.push(se)):m[se]=I}Vo(m,Y,i),n.push(m)}}return n}const Wo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Uo(e){let l=e[0],a=l.length,n=Array(a);for(let f=0;f<n.length;f++)n[f]=f;n.sort((f,c)=>l[f]-l[c]);let i=[];for(let f=0;f<e.length;f++){let c=e[f],p=Array(a);for(let v=0;v<a;v++)p[v]=c[n[v]];i.push(p)}return i}function Yo(e){let l=e[0][0],a=l.length;for(let n=1;n<e.length;n++){let i=e[n][0];if(i.length!=a)return!1;if(i!=l){for(let f=0;f<a;f++)if(i[f]!=l[f])return!1}}return!0}function qo(e,l=100){const a=e.length;if(a<=1)return!0;let n=0,i=a-1;for(;n<=i&&e[n]==null;)n++;for(;i>=n&&e[i]==null;)i--;if(i<=n)return!0;const f=al(1,vl((i-n+1)/l));for(let c=e[n],p=n+f;p<=i;p+=f){const v=e[p];if(v!=null){if(v<=c)return!1;c=v}}return!0}const zi=["January","February","March","April","May","June","July","August","September","October","November","December"],Vi=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Hi(e){return e.slice(0,3)}const jo=Vi.map(Hi),Ko=zi.map(Hi),Jo={MMMM:zi,MMM:Ko,WWWW:Vi,WWW:jo};function Yn(e){return(e<10?"0":"")+e}function Zo(e){return(e<10?"00":e<100?"0":"")+e}const Qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>Yn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>Yn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>Yn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>Yn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>Yn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Zo(e.getMilliseconds())};function ua(e,l){l=l||Jo;let a=[],n=/\{([a-z]+)\}|[^{]+/gi,i;for(;i=n.exec(e);)a.push(i[0][0]=="{"?Qo[i[1]]:i[0]);return f=>{let c="";for(let p=0;p<a.length;p++)c+=typeof a[p]=="string"?a[p]:a[p](f,l);return c}}const $o=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Xo(e,l){let a;return l=="UTC"||l=="Etc/UTC"?a=new Date(+e+e.getTimezoneOffset()*6e4):l==$o?a=e:(a=new Date(e.toLocaleString("en-US",{timeZone:l})),a.setMilliseconds(e.getMilliseconds())),a}const Wi=e=>e%1==0,ps=[1,2,2.5,5],eu=Xn(10,-32,0,ps),Ui=Xn(10,0,32,ps),tu=Ui.filter(Wi),un=eu.concat(Ui),ca=`
`,Yi="{YYYY}",ni=ca+Yi,qi="{M}/{D}",Kn=ca+qi,is=Kn+"/{YY}",ji="{aa}",lu="{h}:{mm}",Tn=lu+ji,si=ca+Tn,ai=":{ss}",Ue=null;function Ki(e){let l=e*1e3,a=l*60,n=a*60,i=n*24,f=i*30,c=i*365,v=(e==1?Xn(10,0,3,ps).filter(Wi):Xn(10,-3,0,ps)).concat([l,l*5,l*10,l*15,l*30,a,a*5,a*10,a*15,a*30,n,n*2,n*3,n*4,n*6,n*8,n*12,i,i*2,i*3,i*4,i*5,i*6,i*7,i*8,i*9,i*10,i*15,f,f*2,f*3,f*4,f*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const h=[[c,Yi,Ue,Ue,Ue,Ue,Ue,Ue,1],[i*28,"{MMM}",ni,Ue,Ue,Ue,Ue,Ue,1],[i,qi,ni,Ue,Ue,Ue,Ue,Ue,1],[n,"{h}"+ji,is,Ue,Kn,Ue,Ue,Ue,1],[a,Tn,is,Ue,Kn,Ue,Ue,Ue,1],[l,ai,is+" "+Tn,Ue,Kn+" "+Tn,Ue,si,Ue,1],[e,ai+".{fff}",is+" "+Tn,Ue,Kn+" "+Tn,Ue,si,Ue,1]];function k(m){return(_,Y,T,I,se,re)=>{let y=[],Z=se>=c,D=se>=f&&se<c,P=m(T),A=$e(P*e,3),ae=Vs(P.getFullYear(),Z?0:P.getMonth(),D||Z?1:P.getDate()),ne=$e(ae*e,3);if(D||Z){let K=D?se/f:0,ie=Z?se/c:0,w=A==ne?A:$e(Vs(ae.getFullYear()+ie,ae.getMonth()+K,1)*e,3),U=new Date(Ct(w/e)),B=U.getFullYear(),ee=U.getMonth();for(let F=0;w<=I;F++){let X=Vs(B+ie*F,ee+K*F,1),O=X-m($e(X*e,3));w=$e((+X+O)*e,3),w<=I&&y.push(w)}}else{let K=se>=i?i:se,ie=vl(T)-vl(A),w=ne+ie+ws(A-ne,K);y.push(w);let U=m(w),B=U.getHours()+U.getMinutes()/a+U.getSeconds()/n,ee=se/n,F=_.axes[Y]._space,X=re/F;for(;w=$e(w+se,e==1?0:3),!(w>I);)if(ee>1){let O=vl($e(B+ee,6))%24,fe=m(w).getHours()-O;fe>1&&(fe=-1),w-=fe*n,B=(B+ee)%24;let be=y[y.length-1];$e((w-be)/se,3)*X>=.7&&y.push(w)}else y.push(w)}return y}}return[v,h,k]}const[nu,su,au]=Ki(1),[iu,ru,ou]=Ki(.001);Xn(2,-53,53,[1]);function ii(e,l){return e.map(a=>a.map((n,i)=>i==0||i==8||n==null?n:l(i==1||a[8]==0?n:a[1]+n)))}function ri(e,l){return(a,n,i,f,c)=>{let p=l.find(T=>c>=T[0])||l[l.length-1],v,h,k,m,_,Y;return n.map(T=>{let I=e(T),se=I.getFullYear(),re=I.getMonth(),y=I.getDate(),Z=I.getHours(),D=I.getMinutes(),P=I.getSeconds(),A=se!=v&&p[2]||re!=h&&p[3]||y!=k&&p[4]||Z!=m&&p[5]||D!=_&&p[6]||P!=Y&&p[7]||p[1];return v=se,h=re,k=y,m=Z,_=D,Y=P,A(I)})}}function uu(e,l){let a=ua(l);return(n,i,f,c,p)=>i.map(v=>a(e(v)))}function Vs(e,l,a){return new Date(e,l,a)}function oi(e,l){return l(e)}const cu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ui(e,l){return(a,n,i,f)=>f==null?na:l(e(n))}function fu(e,l){let a=e.series[l];return a.width?a.stroke(e,l):a.points.width?a.points.stroke(e,l):null}function du(e,l){return e.series[l].fill(e,l)}const pu={show:!0,live:!0,isolate:!1,mount:Ro,markers:{show:!0,width:2,stroke:fu,fill:du,dash:"solid"},idx:null,idxs:null,values:[]};function vu(e,l){let a=e.cursor.points,n=yl(),i=a.size(e,l);st(n,qn,i),st(n,jn,i);let f=i/-2;st(n,"marginLeft",f),st(n,"marginTop",f);let c=a.width(e,l,i);return c&&st(n,"borderWidth",c),n}function hu(e,l){let a=e.series[l].points;return a._fill||a._stroke}function gu(e,l){let a=e.series[l].points;return a._stroke||a._fill}function mu(e,l){return e.series[l].points.size}const Hs=[0,0];function _u(e,l,a){return Hs[0]=l,Hs[1]=a,Hs}function rs(e,l,a,n=!0){return i=>{i.button==0&&(!n||i.target==l)&&a(i)}}function Ws(e,l,a,n=!0){return i=>{(!n||i.target==l)&&a(i)}}const wu={show:!0,x:!0,y:!0,lock:!1,move:_u,points:{one:!1,show:vu,size:mu,width:0,stroke:gu,fill:hu},bind:{mousedown:rs,mouseup:rs,click:rs,dblclick:rs,mousemove:Ws,mouseleave:Ws,mouseenter:Ws},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,a,n,i)=>n-i,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ji={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},fa=St({},Ji,{filter:Oi}),Zi=St({},fa,{size:10}),Qi=St({},Ji,{show:!1}),da='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',$i="bold "+da,Xi=1.5,ci={show:!0,scale:"x",stroke:la,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:$i,side:2,grid:fa,ticks:Zi,border:Qi,font:da,lineGap:Xi,rotate:0},bu="Value",xu="Time",fi={show:!0,scale:"x",auto:!1,sorted:1,min:Qe,max:-Qe,idxs:[]};function yu(e,l,a,n,i){return l.map(f=>f==null?"":ra(f))}function Su(e,l,a,n,i,f,c){let p=[],v=nn.get(i)||0;a=c?a:$e(ws(a,i),v);for(let h=a;h<=n;h=$e(h+i,v))p.push(Object.is(h,-0)?0:h);return p}function Js(e,l,a,n,i,f,c){const p=[],v=e.scales[e.axes[l].scale].log,h=v==10?Jl:Ri,k=vl(h(a));i=Ln(v,k),v==10&&(i=un[Rl(i,un)]);let m=a,_=i*v;v==10&&(_=un[Rl(_,un)]);do p.push(m),m=m+i,v==10&&!nn.has(m)&&(m=$e(m,nn.get(i))),m>=_&&(i=m,_=i*v,v==10&&(_=un[Rl(_,un)]));while(m<=n);return p}function ku(e,l,a,n,i,f,c){let v=e.scales[e.axes[l].scale].asinh,h=n>v?Js(e,l,al(v,a),n,i):[v],k=n>=0&&a<=0?[0]:[];return(a<-v?Js(e,l,al(v,-n),-a,i):[v]).reverse().map(_=>-_).concat(k,h)}const er=/./,Tu=/[12357]/,Eu=/[125]/,di=/1/,Zs=(e,l,a,n)=>e.map((i,f)=>l==4&&i==0||f%n==0&&a.test(i.toExponential()[i<0?1:0])?i:null);function Mu(e,l,a,n,i){let f=e.axes[a],c=f.scale,p=e.scales[c],v=e.valToPos,h=f._space,k=v(10,c),m=v(9,c)-k>=h?er:v(7,c)-k>=h?Tu:v(5,c)-k>=h?Eu:di;if(m==di){let _=Lt(v(1,c)-k);if(_<h)return Zs(l.slice().reverse(),p.distr,m,Sl(h/_)).reverse()}return Zs(l,p.distr,m,1)}function Au(e,l,a,n,i){let f=e.axes[a],c=f.scale,p=f._space,v=e.valToPos,h=Lt(v(1,c)-v(2,c));return h<p?Zs(l.slice().reverse(),3,er,Sl(p/h)).reverse():l}function Cu(e,l,a,n){return n==null?na:l==null?"":ra(l)}const pi={show:!0,scale:"y",stroke:la,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:$i,side:3,grid:fa,ticks:Zi,border:Qi,font:da,lineGap:Xi,rotate:0};function Lu(e,l){let a=3+(e||1)*2;return $e(a*l,3)}function Du(e,l){let{scale:a,idxs:n}=e.series[0],i=e._data[0],f=e.valToPos(i[n[0]],a,!0),c=e.valToPos(i[n[1]],a,!0),p=Lt(c-f),v=e.series[l],h=p/(v.points.space*Ve);return n[1]-n[0]<=h}const vi={scale:null,auto:!0,sorted:0,min:Qe,max:-Qe},tr=(e,l,a,n,i)=>i,hi={show:!0,auto:!0,sorted:0,gaps:tr,alpha:1,facets:[St({},vi,{scale:"x"}),St({},vi,{scale:"y"})]},gi={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:tr,alpha:1,points:{show:Du,filter:null},values:null,min:Qe,max:-Qe,idxs:[],path:null,clip:null};function Ru(e,l,a,n,i){return a/10}const lr={time:lo,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Pu=St({},lr,{time:!1,ori:1}),mi={};function nr(e,l){let a=mi[e];return a||(a={key:e,plots:[],sub(n){a.plots.push(n)},unsub(n){a.plots=a.plots.filter(i=>i!=n)},pub(n,i,f,c,p,v,h){for(let k=0;k<a.plots.length;k++)a.plots[k]!=i&&a.plots[k].pub(n,i,f,c,p,v,h)}},e!=null&&(mi[e]=a)),a}const Pn=1,Qs=2;function pn(e,l,a){const n=e.mode,i=e.series[l],f=n==2?e._data[l]:e._data,c=e.scales,p=e.bbox;let v=f[0],h=n==2?f[1]:f[l],k=n==2?c[i.facets[0].scale]:c[e.series[0].scale],m=n==2?c[i.facets[1].scale]:c[i.scale],_=p.left,Y=p.top,T=p.width,I=p.height,se=e.valToPosH,re=e.valToPosV;return k.ori==0?a(i,v,h,k,m,se,re,_,Y,T,I,ys,On,ks,ar,rr):a(i,v,h,k,m,re,se,Y,_,I,T,Ss,Bn,ha,ir,or)}function pa(e,l){let a=0,n=0,i=Ge(e.bands,oa);for(let f=0;f<i.length;f++){let c=i[f];c.series[0]==l?a=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[a,n==1?-1:n==2?1:n==3?2:0]}function Fu(e,l,a,n,i){let f=e.mode,c=e.series[l],p=f==2?c.facets[1].scale:c.scale,v=e.scales[p];return i==-1?v.min:i==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function Zl(e,l,a,n,i,f){return pn(e,l,(c,p,v,h,k,m,_,Y,T,I,se)=>{let re=c.pxRound;const y=h.dir*(h.ori==0?1:-1),Z=h.ori==0?On:Bn;let D,P;y==1?(D=a,P=n):(D=n,P=a);let A=re(m(p[D],h,I,Y)),ae=re(_(v[D],k,se,T)),ne=re(m(p[P],h,I,Y)),K=re(_(f==1?k.max:k.min,k,se,T)),ie=new Path2D(i);return Z(ie,ne,K),Z(ie,A,K),Z(ie,A,ae),ie})}function xs(e,l,a,n,i,f){let c=null;if(e.length>0){c=new Path2D;const p=l==0?ks:ha;let v=a;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let Y=_[0]-v;Y>0&&p(c,v,n,Y,n+f),v=_[1]}}let h=a+i-v,k=10;h>0&&p(c,v,n-k/2,h,n+f+k)}return c}function Ou(e,l,a){let n=e[e.length-1];n&&n[0]==l?n[1]=a:e.push([l,a])}function va(e,l,a,n,i,f,c){let p=[],v=e.length;for(let h=i==1?a:n;h>=a&&h<=n;h+=i)if(l[h]===null){let m=h,_=h;if(i==1)for(;++h<=n&&l[h]===null;)_=h;else for(;--h>=a&&l[h]===null;)_=h;let Y=f(e[m]),T=_==m?Y:f(e[_]),I=m-i;Y=c<=0&&I>=0&&I<v?f(e[I]):Y;let re=_+i;T=c>=0&&re>=0&&re<v?f(e[re]):T,T>=Y&&p.push([Y,T])}return p}function _i(e){return e==0?Fi:e==1?Ct:l=>on(l,e)}function sr(e){let l=e==0?ys:Ss,a=e==0?(i,f,c,p,v,h)=>{i.arcTo(f,c,p,v,h)}:(i,f,c,p,v,h)=>{i.arcTo(c,f,v,p,h)},n=e==0?(i,f,c,p,v)=>{i.rect(f,c,p,v)}:(i,f,c,p,v)=>{i.rect(c,f,v,p)};return(i,f,c,p,v,h=0,k=0)=>{h==0&&k==0?n(i,f,c,p,v):(h=Fl(h,p/2,v/2),k=Fl(k,p/2,v/2),l(i,f+h,c),a(i,f+p,c,f+p,c+v,h),a(i,f+p,c+v,f,c+v,k),a(i,f,c+v,f,c,k),a(i,f,c,f+p,c,h),i.closePath())}}const ys=(e,l,a)=>{e.moveTo(l,a)},Ss=(e,l,a)=>{e.moveTo(a,l)},On=(e,l,a)=>{e.lineTo(l,a)},Bn=(e,l,a)=>{e.lineTo(a,l)},ks=sr(0),ha=sr(1),ar=(e,l,a,n,i,f)=>{e.arc(l,a,n,i,f)},ir=(e,l,a,n,i,f)=>{e.arc(a,l,n,i,f)},rr=(e,l,a,n,i,f,c)=>{e.bezierCurveTo(l,a,n,i,f,c)},or=(e,l,a,n,i,f,c)=>{e.bezierCurveTo(a,l,i,n,c,f)};function ur(e){return(l,a,n,i,f)=>pn(l,a,(c,p,v,h,k,m,_,Y,T,I,se)=>{let{pxRound:re,points:y}=c,Z,D;h.ori==0?(Z=ys,D=ar):(Z=Ss,D=ir);const P=$e(y.width*Ve,3);let A=(y.size-y.width)/2*Ve,ae=$e(A*2,3),ne=new Path2D,K=new Path2D,{left:ie,top:w,width:U,height:B}=l.bbox;ks(K,ie-ae,w-ae,U+ae*2,B+ae*2);const ee=F=>{if(v[F]!=null){let X=re(m(p[F],h,I,Y)),O=re(_(v[F],k,se,T));Z(ne,X+A,O),D(ne,X,O,A,0,cs*2)}};if(f)f.forEach(ee);else for(let F=n;F<=i;F++)ee(F);return{stroke:P>0?ne:null,fill:ne,clip:K,flags:Pn|Qs}})}function cr(e){return(l,a,n,i,f,c)=>{n!=i&&(f!=n&&c!=n&&e(l,a,n),f!=i&&c!=i&&e(l,a,i),e(l,a,c))}}const Bu=cr(On),Nu=cr(Bn);function fr(e){const l=Ge(e?.alignGaps,0);return(a,n,i,f)=>pn(a,n,(c,p,v,h,k,m,_,Y,T,I,se)=>{[i,f]=ms(v,i,f);let re=c.pxRound,y=B=>re(m(B,h,I,Y)),Z=B=>re(_(B,k,se,T)),D,P;h.ori==0?(D=On,P=Bu):(D=Bn,P=Nu);const A=h.dir*(h.ori==0?1:-1),ae={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Pn},ne=ae.stroke;let K=!1;if(f-i>=I*4){let B=$=>a.posToVal($,h.key,!0),ee=null,F=null,X,O,Re,we=y(p[A==1?i:f]),fe=y(p[i]),be=y(p[f]),ue=B(A==1?fe+1:be-1);for(let $=A==1?i:f;$>=i&&$<=f;$+=A){let Ee=p[$],ye=(A==1?Ee<ue:Ee>ue)?we:y(Ee),he=v[$];ye==we?he!=null?(O=he,ee==null?(D(ne,ye,Z(O)),X=ee=F=O):O<ee?ee=O:O>F&&(F=O)):he===null&&(K=!0):(ee!=null&&P(ne,we,Z(ee),Z(F),Z(X),Z(O)),he!=null?(O=he,D(ne,ye,Z(O)),ee=F=X=O):(ee=F=null,he===null&&(K=!0)),we=ye,ue=B(we+A))}ee!=null&&ee!=F&&Re!=we&&P(ne,we,Z(ee),Z(F),Z(X),Z(O))}else for(let B=A==1?i:f;B>=i&&B<=f;B+=A){let ee=v[B];ee===null?K=!0:ee!=null&&D(ne,y(p[B]),Z(ee))}let[w,U]=pa(a,n);if(c.fill!=null||w!=0){let B=ae.fill=new Path2D(ne),ee=c.fillTo(a,n,c.min,c.max,w),F=Z(ee),X=y(p[i]),O=y(p[f]);A==-1&&([O,X]=[X,O]),D(B,O,F),D(B,X,F)}if(!c.spanGaps){let B=[];K&&B.push(...va(p,v,i,f,A,y,l)),ae.gaps=B=c.gaps(a,n,i,f,B),ae.clip=xs(B,h.ori,Y,T,I,se)}return U!=0&&(ae.band=U==2?[Zl(a,n,i,f,ne,-1),Zl(a,n,i,f,ne,1)]:Zl(a,n,i,f,ne,U)),ae})}function Gu(e){const l=Ge(e.align,1),a=Ge(e.ascDesc,!1),n=Ge(e.alignGaps,0),i=Ge(e.extend,!1);return(f,c,p,v)=>pn(f,c,(h,k,m,_,Y,T,I,se,re,y,Z)=>{[p,v]=ms(m,p,v);let D=h.pxRound,{left:P,width:A}=f.bbox,ae=fe=>D(T(fe,_,y,se)),ne=fe=>D(I(fe,Y,Z,re)),K=_.ori==0?On:Bn;const ie={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Pn},w=ie.stroke,U=_.dir*(_.ori==0?1:-1);let B=ne(m[U==1?p:v]),ee=ae(k[U==1?p:v]),F=ee,X=ee;i&&l==-1&&(X=P,K(w,X,B)),K(w,ee,B);for(let fe=U==1?p:v;fe>=p&&fe<=v;fe+=U){let be=m[fe];if(be==null)continue;let ue=ae(k[fe]),$=ne(be);l==1?K(w,ue,B):K(w,F,$),K(w,ue,$),B=$,F=ue}let O=F;i&&l==1&&(O=P+A,K(w,O,B));let[Re,we]=pa(f,c);if(h.fill!=null||Re!=0){let fe=ie.fill=new Path2D(w),be=h.fillTo(f,c,h.min,h.max,Re),ue=ne(be);K(fe,O,ue),K(fe,X,ue)}if(!h.spanGaps){let fe=[];fe.push(...va(k,m,p,v,U,ae,n));let be=h.width*Ve/2,ue=a||l==1?be:-be,$=a||l==-1?-be:be;fe.forEach(Ee=>{Ee[0]+=ue,Ee[1]+=$}),ie.gaps=fe=h.gaps(f,c,p,v,fe),ie.clip=xs(fe,_.ori,se,re,y,Z)}return we!=0&&(ie.band=we==2?[Zl(f,c,p,v,w,-1),Zl(f,c,p,v,w,1)]:Zl(f,c,p,v,w,we)),ie})}function wi(e,l,a,n,i,f,c=Qe){if(e.length>1){let p=null;for(let v=0,h=1/0;v<e.length;v++)if(l[v]!==void 0){if(p!=null){let k=Lt(e[v]-e[p]);k<h&&(h=k,c=Lt(a(e[v],n,i,f)-a(e[p],n,i,f)))}p=v}}return c}function Iu(e){e=e||Zn;const l=Ge(e.size,[.6,Qe,1]),a=e.align||0,n=e.gap||0;let i=e.radius;i=i==null?[0,0]:typeof i=="number"?[i,0]:i;const f=Le(i),c=1-l[0],p=Ge(l[1],Qe),v=Ge(l[2],1),h=Ge(e.disp,Zn),k=Ge(e.each,Y=>{}),{fill:m,stroke:_}=h;return(Y,T,I,se)=>pn(Y,T,(re,y,Z,D,P,A,ae,ne,K,ie,w)=>{let U=re.pxRound,B=a,ee=n*Ve,F=p*Ve,X=v*Ve,O,Re;D.ori==0?[O,Re]=f(Y,T):[Re,O]=f(Y,T);const we=D.dir*(D.ori==0?1:-1);let fe=D.ori==0?ks:ha,be=D.ori==0?k:(V,ke,Ke,Jt,Zt,Et,Ut)=>{k(V,ke,Ke,Zt,Jt,Ut,Et)},ue=Ge(Y.bands,oa).find(V=>V.series[0]==T),$=ue!=null?ue.dir:0,Ee=re.fillTo(Y,T,re.min,re.max,$),Pe=U(ae(Ee,P,w,K)),ye,he,Ye,Xe=ie,Me=U(re.width*Ve),bt=!1,kt=null,rt=null,ft=null,Tt=null;m!=null&&(Me==0||_!=null)&&(bt=!0,kt=m.values(Y,T,I,se),rt=new Map,new Set(kt).forEach(V=>{V!=null&&rt.set(V,new Path2D)}),Me>0&&(ft=_.values(Y,T,I,se),Tt=new Map,new Set(ft).forEach(V=>{V!=null&&Tt.set(V,new Path2D)})));let{x0:Se,size:ot}=h;if(Se!=null&&ot!=null){B=1,y=Se.values(Y,T,I,se),Se.unit==2&&(y=y.map(Ke=>Y.posToVal(ne+Ke*ie,D.key,!0)));let V=ot.values(Y,T,I,se);ot.unit==2?he=V[0]*ie:he=A(V[0],D,ie,ne)-A(0,D,ie,ne),Xe=wi(y,Z,A,D,ie,ne,Xe),Ye=Xe-he+ee}else Xe=wi(y,Z,A,D,ie,ne,Xe),Ye=Xe*c+ee,he=Xe-Ye;Ye<1&&(Ye=0),Me>=he/2&&(Me=0),Ye<5&&(U=Fi);let Nt=Ye>0,dt=Xe-Ye-(Nt?Me:0);he=U(Ks(dt,X,F)),ye=(B==0?he/2:B==we?0:he)-B*we*((B==0?ee/2:0)+(Nt?Me/2:0));const je={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Kt=bt?null:new Path2D;let Gt=null;if(ue!=null)Gt=Y.data[ue.series[1]];else{let{y0:V,y1:ke}=h;V!=null&&ke!=null&&(Z=ke.values(Y,T,I,se),Gt=V.values(Y,T,I,se))}let Rt=O*he,pe=Re*he;for(let V=we==1?I:se;V>=I&&V<=se;V+=we){let ke=Z[V];if(ke==null)continue;if(Gt!=null){let ut=Gt[V]??0;if(ke-ut==0)continue;Pe=ae(ut,P,w,K)}let Ke=D.distr!=2||h!=null?y[V]:V,Jt=A(Ke,D,ie,ne),Zt=ae(Ge(ke,Ee),P,w,K),Et=U(Jt-ye),Ut=U(al(Zt,Pe)),pt=U(Fl(Zt,Pe)),Mt=Ut-pt;if(ke!=null){let ut=ke<0?pe:Rt,mt=ke<0?Rt:pe;bt?(Me>0&&ft[V]!=null&&fe(Tt.get(ft[V]),Et,pt+vl(Me/2),he,al(0,Mt-Me),ut,mt),kt[V]!=null&&fe(rt.get(kt[V]),Et,pt+vl(Me/2),he,al(0,Mt-Me),ut,mt)):fe(Kt,Et,pt+vl(Me/2),he,al(0,Mt-Me),ut,mt),be(Y,T,V,Et-Me/2,pt,he+Me,Mt)}}return Me>0?je.stroke=bt?Tt:Kt:bt||(je._fill=re.width==0?re._fill:re._stroke??re._fill,je.width=0),je.fill=bt?rt:Kt,je})}function zu(e,l){const a=Ge(l?.alignGaps,0);return(n,i,f,c)=>pn(n,i,(p,v,h,k,m,_,Y,T,I,se,re)=>{[f,c]=ms(h,f,c);let y=p.pxRound,Z=O=>y(_(O,k,se,T)),D=O=>y(Y(O,m,re,I)),P,A,ae;k.ori==0?(P=ys,ae=On,A=rr):(P=Ss,ae=Bn,A=or);const ne=k.dir*(k.ori==0?1:-1);let K=Z(v[ne==1?f:c]),ie=K,w=[],U=[];for(let O=ne==1?f:c;O>=f&&O<=c;O+=ne)if(h[O]!=null){let we=v[O],fe=Z(we);w.push(ie=fe),U.push(D(h[O]))}const B={stroke:e(w,U,P,ae,A,y),fill:null,clip:null,band:null,gaps:null,flags:Pn},ee=B.stroke;let[F,X]=pa(n,i);if(p.fill!=null||F!=0){let O=B.fill=new Path2D(ee),Re=p.fillTo(n,i,p.min,p.max,F),we=D(Re);ae(O,ie,we),ae(O,K,we)}if(!p.spanGaps){let O=[];O.push(...va(v,h,f,c,ne,Z,a)),B.gaps=O=p.gaps(n,i,f,c,O),B.clip=xs(O,k.ori,T,I,se,re)}return X!=0&&(B.band=X==2?[Zl(n,i,f,c,ee,-1),Zl(n,i,f,c,ee,1)]:Zl(n,i,f,c,ee,X)),B})}function Vu(e){return zu(Hu,e)}function Hu(e,l,a,n,i,f){const c=e.length;if(c<2)return null;const p=new Path2D;if(a(p,e[0],l[0]),c==2)n(p,e[1],l[1]);else{let v=Array(c),h=Array(c-1),k=Array(c-1),m=Array(c-1);for(let _=0;_<c-1;_++)k[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],h[_]=k[_]/m[_];v[0]=h[0];for(let _=1;_<c-1;_++)h[_]===0||h[_-1]===0||h[_-1]>0!=h[_]>0?v[_]=0:(v[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/h[_-1]+(m[_]+2*m[_-1])/h[_]),isFinite(v[_])||(v[_]=0));v[c-1]=h[c-2];for(let _=0;_<c-1;_++)i(p,e[_]+m[_]/3,l[_]+v[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-v[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const $s=new Set;function bi(){for(let e of $s)e.syncRect(!0)}Fn&&(fn(yo,An,bi),fn(So,An,bi,!0),fn(fs,An,()=>{wt.pxRatio=Ve}));const Wu=fr(),Uu=ur();function xi(e,l,a,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((f,c)=>Xs(f,c,l,a))}function Yu(e,l){return e.map((a,n)=>n==0?{}:St({},l,a))}function Xs(e,l,a,n){return St({},l==0?a:n,e)}function dr(e,l,a){return l==null?Dn:[l,a]}const qu=dr;function ju(e,l,a){return l==null?Dn:ds(l,a,ia,!0)}function pr(e,l,a,n){return l==null?Dn:_s(l,a,e.scales[n].log,!1)}const Ku=pr;function vr(e,l,a,n){return l==null?Dn:aa(l,a,e.scales[n].log,!1)}const Ju=vr;function Zu(e,l,a,n,i){let f=al(Xa(e),Xa(l)),c=l-e,p=Rl(i/n*c,a);do{let v=a[p],h=n*v/c;if(h>=i&&f+(v<5?nn.get(v):0)<=17)return[v,h]}while(++p<a.length);return[0,0]}function yi(e){let l,a;return e=e.replace(/(\d+)px/,(n,i)=>(l=Ct((a=+i)*Ve))+"px"),[e,l,a]}function Qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let a=$e(l[2]*Ve,1);l[0]=l[0].replace(/[0-9.]+px/,a+"px"),l[1]=a})}function wt(e,l,a){const n={mode:Ge(e.mode,1)},i=n.mode;function f(t,s,r,o){let d=s.valToPct(t);return o+r*(s.dir==-1?1-d:d)}function c(t,s,r,o){let d=s.valToPct(t);return o+r*(s.dir==-1?d:1-d)}function p(t,s,r,o){return s.ori==0?f(t,s,r,o):c(t,s,r,o)}n.valToPosH=f,n.valToPosV=c;let v=!1;n.status=0;const h=n.root=yl(no);if(e.id!=null&&(h.id=e.id),pl(h,e.class),e.title){let t=yl(io,h);t.textContent=e.title}const k=Dl("canvas"),m=n.ctx=k.getContext("2d"),_=yl(ro,h);fn("click",_,t=>{t.target===T&&(tt!=wn||it!=bn)&&Wt.click(n,t)},!0);const Y=n.under=yl(oo,_);_.appendChild(k);const T=n.over=yl(uo,_);e=Rn(e);const I=+Ge(e.pxAlign,1),se=_i(I);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const re=e.ms||.001,y=n.series=i==1?xi(e.series||[],fi,gi,!1):Yu(e.series||[null],hi),Z=n.axes=xi(e.axes||[],ci,pi,!0),D=n.scales={},P=n.bands=e.bands||[];P.forEach(t=>{t.fill=Le(t.fill||null),t.dir=Ge(t.dir,-1)});const A=i==2?y[1].facets[0].scale:y[0].scale,ae={axes:wr,series:Nn},ne=(e.drawOrder||["axes","series"]).map(t=>ae[t]);function K(t){const s=t.distr==3?r=>Jl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>zs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:d,_max:g}=t,b=g-d;return(o-d)/b}}function ie(t){let s=D[t];if(s==null){let r=(e.scales||Zn)[t]||Zn;if(r.from!=null){ie(r.from);let o=St({},D[r.from],r,{key:t});o.valToPct=K(o),D[t]=o}else{s=D[t]=St({},t==A?lr:Pu,r),s.key=t;let o=s.time,d=s.range,g=tn(d);if((t!=A||i==2&&!o)&&(g&&(d[0]==null||d[1]==null)&&(d={min:d[0]==null?Za:{mode:1,hard:d[0],soft:d[0]},max:d[1]==null?Za:{mode:1,hard:d[1],soft:d[1]}},g=!1),!g&&bs(d))){let b=d;d=(M,R,J)=>R==null?Dn:ds(R,J,b)}s.range=Le(d||(o?qu:t==A?s.distr==3?Ku:s.distr==4?Ju:dr:s.distr==3?pr:s.distr==4?vr:ju)),s.auto=Le(g?!1:s.auto),s.clamp=Le(s.clamp||Ru),s._min=s._max=null,s.valToPct=K(s)}}}ie("x"),ie("y"),i==1&&y.forEach(t=>{ie(t.scale)}),Z.forEach(t=>{ie(t.scale)});for(let t in e.scales)ie(t);const w=D[A],U=w.distr;let B,ee;w.ori==0?(pl(h,so),B=f,ee=c):(pl(h,ao),B=c,ee=f);const F={};for(let t in D){let s=D[t];(s.min!=null||s.max!=null)&&(F[t]={min:s.min,max:s.max},s.min=s.max=null)}const X=e.tzDate||(t=>new Date(Ct(t/re))),O=e.fmtDate||ua,Re=re==1?au(X):ou(X),we=ri(X,ii(re==1?su:ru,O)),fe=ui(X,oi(cu,O)),be=[],ue=n.legend=St({},pu,e.legend),$=n.cursor=St({},wu,{drag:{y:i==2}},e.cursor),Ee=ue.show,Pe=$.show,ye=ue.markers;ue.idxs=be,ye.width=Le(ye.width),ye.dash=Le(ye.dash),ye.stroke=Le(ye.stroke),ye.fill=Le(ye.fill);let he,Ye,Xe,Me=[],bt=[],kt,rt=!1,ft={};if(ue.live){const t=y[1]?y[1].values:null;rt=t!=null,kt=rt?t(n,1,0):{_:0};for(let s in kt)ft[s]=na}if(Ee)if(he=Dl("table",go,h),Xe=Dl("tbody",null,he),ue.mount(n,he),rt){Ye=Dl("thead",null,he,Xe);let t=Dl("tr",null,Ye);Dl("th",null,t);for(var Tt in kt)Dl("th",Na,t).textContent=Tt}else pl(he,_o),ue.live&&pl(he,mo);const Se={show:!0},ot={show:!1};function Nt(t,s){if(s==0&&(rt||!ue.live||i==2))return Dn;let r=[],o=Dl("tr",wo,Xe,Xe.childNodes[s]);pl(o,t.class),t.show||pl(o,cn);let d=Dl("th",null,o);if(ye.show){let M=yl(bo,d);if(s>0){let R=ye.width(n,s);R&&(M.style.border=R+"px "+ye.dash(n,s)+" "+ye.stroke(n,s)),M.style.background=ye.fill(n,s)}}let g=yl(Na,d);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(ye.show||(g.style.color=t.width>0?ye.stroke(n,s):ye.fill(n,s)),je("click",d,M=>{if($._lock)return;Qt(M);let R=y.indexOf(t);if((M.ctrlKey||M.metaKey)!=ue.isolate){let J=y.some((Q,te)=>te>0&&te!=R&&Q.show);y.forEach((Q,te)=>{te>0&&Nl(te,J?te==R?Se:ot:Se,!0,yt.setSeries)})}else Nl(R,{show:!t.show},!0,yt.setSeries)},!1),G&&je(Va,d,M=>{$._lock||(Qt(M),Nl(y.indexOf(t),yn,!0,yt.setSeries))},!1));for(var b in kt){let M=Dl("td",xo,o);M.textContent="--",r.push(M)}return[o,r]}const dt=new Map;function je(t,s,r,o=!0){const d=dt.get(s)||{},g=$.bind[t](n,s,r,o);g&&(fn(t,s,d[t]=g),dt.set(s,d))}function Kt(t,s,r){const o=dt.get(s)||{};for(let d in o)(t==null||d==t)&&(js(d,s,o[d]),delete o[d]);t==null&&dt.delete(s)}let Gt=0,Rt=0,pe=0,V=0,ke=0,Ke=0,Jt=ke,Zt=Ke,Et=pe,Ut=V,pt=0,Mt=0,ut=0,mt=0;n.bbox={};let ol=!1,gl=!1,Yt=!1,xt=!1,kl=!1,vt=!1;function Tl(t,s,r){(r||t!=n.width||s!=n.height)&&Ul(t,s),hn(!1),Yt=!0,gl=!0,gn()}function Ul(t,s){n.width=Gt=pe=t,n.height=Rt=V=s,ke=Ke=0,_l(),Ml();let r=n.bbox;pt=r.left=on(ke*Ve,.5),Mt=r.top=on(Ke*Ve,.5),ut=r.width=on(pe*Ve,.5),mt=r.height=on(V*Ve,.5)}const ml=3;function El(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=_r(s);t=s==ml||r&&o,t||(Ul(n.width,n.height),gl=!0)}}function Ol({width:t,height:s}){Tl(t,s)}n.setSize=Ol;function _l(){let t=!1,s=!1,r=!1,o=!1;Z.forEach((d,g)=>{if(d.show&&d._show){let{side:b,_size:M}=d,R=b%2,J=d.label!=null?d.labelSize:0,Q=M+J;Q>0&&(R?(pe-=Q,b==3?(ke+=Q,o=!0):r=!0):(V-=Q,b==0?(Ke+=Q,t=!0):s=!0))}}),zt[0]=t,zt[1]=r,zt[2]=s,zt[3]=o,pe-=E[1]+E[3],ke+=E[3],V-=E[2]+E[0],Ke+=E[0]}function Ml(){let t=ke+pe,s=Ke+V,r=ke,o=Ke;function d(g,b){switch(g){case 1:return t+=b,t-b;case 2:return s+=b,s-b;case 3:return r-=b,r+b;case 0:return o-=b,o+b}}Z.forEach((g,b)=>{if(g.show&&g._show){let M=g.side;g._pos=d(M,g._size),g.label!=null&&(g._lpos=d(M,g.labelSize))}})}if($.dataIdx==null){let t=$.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Le(t.prox),o=t.bias??=0;$.dataIdx=(d,g,b,M)=>{if(g==0)return b;let R=b,J=r(d,g,b,M)??Qe,Q=J>=0&&J<Qe,te=w.ori==0?pe:V,me=$.left,ze=l[0],Ne=l[g];if(s.has(Ne[b])){R=null;let Ae=null,ve=null,ce;if(o==0||o==-1)for(ce=b;Ae==null&&ce-- >0;)s.has(Ne[ce])||(Ae=ce);if(o==0||o==1)for(ce=b;ve==null&&ce++<Ne.length;)s.has(Ne[ce])||(ve=ce);if(Ae!=null||ve!=null)if(Q){let nt=Ae==null?-1/0:B(ze[Ae],w,te,0),ht=ve==null?1/0:B(ze[ve],w,te,0),Bt=me-nt,qe=ht-me;Bt<=qe?Bt<=J&&(R=Ae):qe<=J&&(R=ve)}else R=ve==null?Ae:Ae==null?ve:b-Ae<=ve-b?Ae:ve}else Q&&Lt(me-B(ze[b],w,te,0))>J&&(R=null);return R}}const Qt=t=>{$.event=t};$.idxs=be,$._lock=!1;let Je=$.points;Je.show=Le(Je.show),Je.size=Le(Je.size),Je.stroke=Le(Je.stroke),Je.width=Le(Je.width),Je.fill=Le(Je.fill);const It=n.focus=St({},e.focus||{alpha:.3},$.focus),G=It.prox>=0,q=G&&Je.one;let j=[],ge=[],Fe=[];function ct(t,s){let r=Je.show(n,s);if(r instanceof HTMLElement)return pl(r,ho),pl(r,t.class),Vl(r,-10,-10,pe,V),T.insertBefore(r,j[s]),r}function He(t,s){if(i==1||s>0){let r=i==1&&D[t.scale].time,o=t.value;t.value=r?li(o)?ui(X,oi(o,O)):o||fe:o||Cu,t.label=t.label||(r?xu:bu)}if(q||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Wu||Po,t.fillTo=Le(t.fillTo||Fu),t.pxAlign=+Ge(t.pxAlign,I),t.pxRound=_i(t.pxAlign),t.stroke=Le(t.stroke||null),t.fill=Le(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Lu(al(1,t.width),1),o=t.points=St({},{size:r,width:al(1,r*.2),stroke:t.stroke,space:r*2,paths:Uu,_stroke:null,_fill:null},t.points);o.show=Le(o.show),o.filter=Le(o.filter),o.fill=Le(o.fill),o.stroke=Le(o.stroke),o.paths=Le(o.paths),o.pxAlign=t.pxAlign}if(Ee){let r=Nt(t,s);Me.splice(s,0,r[0]),bt.splice(s,0,r[1]),ue.values.push(null)}if(Pe){be.splice(s,0,null);let r=null;q?s==0&&(r=ct(t,s)):s>0&&(r=ct(t,s)),j.splice(s,0,r),ge.splice(s,0,0),Fe.splice(s,0,0)}Ot("addSeries",s)}function at(t,s){s=s??y.length,t=i==1?Xs(t,s,fi,gi):Xs(t,s,{},hi),y.splice(s,0,t),He(y[s],s)}n.addSeries=at;function At(t){if(y.splice(t,1),Ee){ue.values.splice(t,1),bt.splice(t,1);let s=Me.splice(t,1)[0];Kt(null,s.firstChild),s.remove()}Pe&&(be.splice(t,1),j.splice(t,1)[0].remove(),ge.splice(t,1),Fe.splice(t,1)),Ot("delSeries",t)}n.delSeries=At;const zt=[!1,!1,!1,!1];function Yl(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=D[t.scale];o==null&&(t.scale=r?y[1].scale:A,o=D[t.scale]);let d=o.time;t.size=Le(t.size),t.space=Le(t.space),t.rotate=Le(t.rotate),tn(t.incrs)&&t.incrs.forEach(b=>{!nn.has(b)&&nn.set(b,Ni(b))}),t.incrs=Le(t.incrs||(o.distr==2?tu:d?re==1?nu:iu:un)),t.splits=Le(t.splits||(d&&o.distr==1?Re:o.distr==3?Js:o.distr==4?ku:Su)),t.stroke=Le(t.stroke),t.grid.stroke=Le(t.grid.stroke),t.ticks.stroke=Le(t.ticks.stroke),t.border.stroke=Le(t.border.stroke);let g=t.values;t.values=tn(g)&&!tn(g[0])?Le(g):d?tn(g)?ri(X,ii(g,O)):li(g)?uu(X,g):g||we:g||yu,t.filter=Le(t.filter||(o.distr>=3&&o.log==10?Mu:o.distr==3&&o.log==2?Au:Oi)),t.font=yi(t.font),t.labelFont=yi(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(zt[s]=!0,t._el=yl(co,_))}}function ul(t,s,r,o){let[d,g,b,M]=r,R=s%2,J=0;return R==0&&(M||g)&&(J=s==0&&!d||s==2&&!b?Ct(ci.size/3):0),R==1&&(d||b)&&(J=s==1&&!g||s==3&&!M?Ct(pi.size/2):0),J}const Bl=n.padding=(e.padding||[ul,ul,ul,ul]).map(t=>Le(Ge(t,ul))),E=n._padding=Bl.map((t,s)=>t(n,s,zt,0));let C,H=null,z=null;const de=i==1?y[0].idxs:null;let W=null,L=!1;function oe(t,s){if(l=t??[],n.data=n._data=l,i==2){C=0;for(let r=1;r<y.length;r++)C+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),W=l[0],C=W.length;let r=l;if(U==2){r=l.slice();let o=r[0]=Array(C);for(let d=0;d<C;d++)o[d]=d}n._data=l=r}if(hn(!0),Ot("setData"),U==2&&(Yt=!0),s!==!1){let r=w;r.auto(n,L)?Be():$l(A,r.min,r.max),xt=xt||$.left>=0,vt=!0,gn()}}n.setData=oe;function Be(){L=!0;let t,s;i==1&&(C>0?(H=de[0]=0,z=de[1]=C-1,t=l[0][H],s=l[0][z],U==2?(t=H,s=z):t==s&&(U==3?[t,s]=_s(t,t,w.log,!1):U==4?[t,s]=aa(t,t,w.log,!1):w.time?s=t+Ct(86400/re):[t,s]=ds(t,s,ia,!0))):(H=de[0]=t=null,z=de[1]=s=null)),$l(A,t,s)}let Ie,_t,qt,il,$t,jt,Xt,wl,Vt,De;function We(t,s,r,o,d,g){t??=Ia,r??=oa,o??="butt",d??=Ia,g??="round",t!=Ie&&(m.strokeStyle=Ie=t),d!=_t&&(m.fillStyle=_t=d),s!=qt&&(m.lineWidth=qt=s),g!=$t&&(m.lineJoin=$t=g),o!=jt&&(m.lineCap=jt=o),r!=il&&m.setLineDash(il=r)}function Ht(t,s,r,o){s!=_t&&(m.fillStyle=_t=s),t!=Xt&&(m.font=Xt=t),r!=wl&&(m.textAlign=wl=r),o!=Vt&&(m.textBaseline=Vt=o)}function rl(t,s,r,o,d=0){if(o.length>0&&t.auto(n,L)&&(s==null||s.min==null)){let g=Ge(H,0),b=Ge(z,o.length-1),M=r.min==null?Mo(o,g,b,d,t.distr==3):[r.min,r.max];t.min=Fl(t.min,r.min=M[0]),t.max=al(t.max,r.max=M[1])}}const Al={min:null,max:null};function ql(){for(let o in D){let d=D[o];F[o]==null&&(d.min==null||F[A]!=null&&d.auto(n,L))&&(F[o]=Al)}for(let o in D){let d=D[o];F[o]==null&&d.from!=null&&F[d.from]!=null&&(F[o]=Al)}F[A]!=null&&hn(!0);let t={};for(let o in F){let d=F[o];if(d!=null){let g=t[o]=Rn(D[o],Bo);if(d.min!=null)St(g,d);else if(o!=A||i==2)if(C==0&&g.from==null){let b=g.range(n,null,null,o);g.min=b[0],g.max=b[1]}else g.min=Qe,g.max=-Qe}}if(C>0){y.forEach((o,d)=>{if(i==1){let g=o.scale,b=F[g];if(b==null)return;let M=t[g];if(d==0){let R=M.range(n,M.min,M.max,g);M.min=R[0],M.max=R[1],H=Rl(M.min,l[0]),z=Rl(M.max,l[0]),z-H>1&&(l[0][H]<M.min&&H++,l[0][z]>M.max&&z--),o.min=W[H],o.max=W[z]}else o.show&&o.auto&&rl(M,b,o,l[d],o.sorted);o.idxs[0]=H,o.idxs[1]=z}else if(d>0&&o.show&&o.auto){let[g,b]=o.facets,M=g.scale,R=b.scale,[J,Q]=l[d],te=t[M],me=t[R];te!=null&&rl(te,F[M],g,J,g.sorted),me!=null&&rl(me,F[R],b,Q,b.sorted),o.min=b.min,o.max=b.max}});for(let o in t){let d=t[o],g=F[o];if(d.from==null&&(g==null||g.min==null)){let b=d.range(n,d.min==Qe?null:d.min,d.max==-Qe?null:d.max,o);d.min=b[0],d.max=b[1]}}}for(let o in t){let d=t[o];if(d.from!=null){let g=t[d.from];if(g.min==null)d.min=d.max=null;else{let b=d.range(n,g.min,g.max,o);d.min=b[0],d.max=b[1]}}}let s={},r=!1;for(let o in t){let d=t[o],g=D[o];if(g.min!=d.min||g.max!=d.max){g.min=d.min,g.max=d.max;let b=g.distr;g._min=b==3?Jl(g.min):b==4?zs(g.min,g.asinh):b==100?g.fwd(g.min):g.min,g._max=b==3?Jl(g.max):b==4?zs(g.max,g.asinh):b==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){y.forEach((o,d)=>{i==2?d>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Yt=!0,Ot("setScale",o);Pe&&$.left>=0&&(xt=vt=!0)}for(let o in F)F[o]=null}function vn(t){let s=Ks(H-1,0,C-1),r=Ks(z+1,0,C-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<C-1;)r++;return[s,r]}function Nn(){if(C>0){let t=y.some(s=>s._focus)&&De!=It.alpha;t&&(m.globalAlpha=De=It.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(el(r,!1),el(r,!0),s._paths==null)){let o=De;De!=s.alpha&&(m.globalAlpha=De=s.alpha);let d=i==2?[0,l[r][0].length-1]:vn(l[r]);s._paths=s.paths(n,r,d[0],d[1]),De!=o&&(m.globalAlpha=De=o)}}),y.forEach((s,r)=>{if(r>0&&s.show){let o=De;De!=s.alpha&&(m.globalAlpha=De=s.alpha),s._paths!=null&&ga(r,!1);{let d=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,H,z,d),b=s.points.filter(n,r,g,d);(g||b)&&(s.points._paths=s.points.paths(n,r,H,z,b),ga(r,!0))}De!=o&&(m.globalAlpha=De=o),Ot("drawSeries",r)}}),t&&(m.globalAlpha=De=1)}}function el(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function ga(t,s){let r=s?y[t].points:y[t],{stroke:o,fill:d,clip:g,flags:b,_stroke:M=r._stroke,_fill:R=r._fill,_width:J=r.width}=r._paths;J=$e(J*Ve,3);let Q=null,te=J%2/2;s&&R==null&&(R=J>0?"#fff":M);let me=r.pxAlign==1&&te>0;if(me&&m.translate(te,te),!s){let ze=pt-J/2,Ne=Mt-J/2,Ae=ut+J,ve=mt+J;Q=new Path2D,Q.rect(ze,Ne,Ae,ve)}s?Ts(M,J,r.dash,r.cap,R,o,d,b,g):hr(t,M,J,r.dash,r.cap,R,o,d,b,Q,g),me&&m.translate(-te,-te)}function hr(t,s,r,o,d,g,b,M,R,J,Q){let te=!1;R!=0&&P.forEach((me,ze)=>{if(me.series[0]==t){let Ne=y[me.series[1]],Ae=l[me.series[1]],ve=(Ne._paths||Zn).band;tn(ve)&&(ve=me.dir==1?ve[0]:ve[1]);let ce,nt=null;Ne.show&&ve&&Co(Ae,H,z)?(nt=me.fill(n,ze)||g,ce=Ne._paths.clip):ve=null,Ts(s,r,o,d,nt,b,M,R,J,Q,ce,ve),te=!0}}),te||Ts(s,r,o,d,g,b,M,R,J,Q)}const ma=Pn|Qs;function Ts(t,s,r,o,d,g,b,M,R,J,Q,te){We(t,s,r,o,d),(R||J||te)&&(m.save(),R&&m.clip(R),J&&m.clip(J)),te?(M&ma)==ma?(m.clip(te),Q&&m.clip(Q),ts(d,b),es(t,g,s)):M&Qs?(ts(d,b),m.clip(te),es(t,g,s)):M&Pn&&(m.save(),m.clip(te),Q&&m.clip(Q),ts(d,b),m.restore(),es(t,g,s)):(ts(d,b),es(t,g,s)),(R||J||te)&&m.restore()}function es(t,s,r){r>0&&(s instanceof Map?s.forEach((o,d)=>{m.strokeStyle=Ie=d,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function ts(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=_t=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function gr(t,s,r,o){let d=Z[t],g;if(o<=0)g=[0,0];else{let b=d._space=d.space(n,t,s,r,o),M=d._incrs=d.incrs(n,t,s,r,o,b);g=Zu(s,r,M,o,b)}return d._found=g}function Es(t,s,r,o,d,g,b,M,R,J){let Q=b%2/2;I==1&&m.translate(Q,Q),We(M,b,R,J,M),m.beginPath();let te,me,ze,Ne,Ae=d+(o==0||o==3?-g:g);r==0?(me=d,Ne=Ae):(te=d,ze=Ae);for(let ve=0;ve<t.length;ve++)s[ve]!=null&&(r==0?te=ze=t[ve]:me=Ne=t[ve],m.moveTo(te,me),m.lineTo(ze,Ne));m.stroke(),I==1&&m.translate(-Q,-Q)}function mr(t){let s=!0;return Z.forEach((r,o)=>{if(!r.show)return;let d=D[r.scale];if(d.min==null){r._show&&(s=!1,r._show=!1,hn(!1));return}else r._show||(s=!1,r._show=!0,hn(!1));let g=r.side,b=g%2,{min:M,max:R}=d,[J,Q]=gr(o,M,R,b==0?pe:V);if(Q==0)return;let te=d.distr==2,me=r._splits=r.splits(n,o,M,R,J,Q,te),ze=d.distr==2?me.map(ce=>W[ce]):me,Ne=d.distr==2?W[me[1]]-W[me[0]]:J,Ae=r._values=r.values(n,r.filter(n,ze,o,Q,Ne),o,Q,Ne);r._rotate=g==2?r.rotate(n,Ae,o,Q):0;let ve=r._size;r._size=Sl(r.size(n,Ae,o,t)),ve!=null&&r._size!=ve&&(s=!1)}),s}function _r(t){let s=!0;return Bl.forEach((r,o)=>{let d=r(n,o,zt,t);d!=E[o]&&(s=!1),E[o]=d}),s}function wr(){for(let t=0;t<Z.length;t++){let s=Z[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,d,g,b=s.stroke(n,t),M=r==0||r==3?-1:1,[R,J]=s._found;if(s.label!=null){let ll=s.labelGap*M,dl=Ct((s._lpos+ll)*Ve);Ht(s.labelFont[0],b,"center",r==2?Un:Ga),m.save(),o==1?(d=g=0,m.translate(dl,Ct(Mt+mt/2)),m.rotate((r==3?-cs:cs)/2)):(d=Ct(pt+ut/2),g=dl);let rn=Pi(s.label)?s.label(n,t,R,J):s.label;m.fillText(rn,d,g),m.restore()}if(J==0)continue;let Q=D[s.scale],te=o==0?ut:mt,me=o==0?pt:Mt,ze=s._splits,Ne=Q.distr==2?ze.map(ll=>W[ll]):ze,Ae=Q.distr==2?W[ze[1]]-W[ze[0]]:R,ve=s.ticks,ce=s.border,nt=ve.show?ve.size:0,ht=Ct(nt*Ve),Bt=Ct((s.alignTo==2?s._size-nt-s.gap:s.gap)*Ve),qe=s._rotate*-cs/180,gt=se(s._pos*Ve),cl=(ht+Bt)*M,tl=gt+cl;g=o==0?tl:0,d=o==1?tl:0;let bl=s.font[0],Cl=s.align==1?kn:s.align==2?Ns:qe>0?kn:qe<0?Ns:o==0?"center":r==3?Ns:kn,Il=qe||o==1?"middle":r==2?Un:Ga;Ht(bl,b,Cl,Il);let fl=s.font[1]*s.lineGap,xl=ze.map(ll=>se(p(ll,Q,te,me))),Ll=s._values;for(let ll=0;ll<Ll.length;ll++){let dl=Ll[ll];if(dl!=null){o==0?d=xl[ll]:g=xl[ll],dl=""+dl;let rn=dl.indexOf(`
`)==-1?[dl]:dl.split(/\n/gm);for(let nl=0;nl<rn.length;nl++){let Ba=rn[nl];qe?(m.save(),m.translate(d,g+nl*fl),m.rotate(qe),m.fillText(Ba,0,0),m.restore()):m.fillText(Ba,d,g+nl*fl)}}}ve.show&&Es(xl,ve.filter(n,Ne,t,J,Ae),o,r,gt,ht,$e(ve.width*Ve,3),ve.stroke(n,t),ve.dash,ve.cap);let zl=s.grid;zl.show&&Es(xl,zl.filter(n,Ne,t,J,Ae),o,o==0?2:1,o==0?Mt:pt,o==0?mt:ut,$e(zl.width*Ve,3),zl.stroke(n,t),zl.dash,zl.cap),ce.show&&Es([gt],[1],o==0?1:0,o==0?1:2,o==1?Mt:pt,o==1?mt:ut,$e(ce.width*Ve,3),ce.stroke(n,t),ce.dash,ce.cap)}Ot("drawAxes")}function hn(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(i==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let ls=!1,Ms=!1,Gn=[];function br(){Ms=!1;for(let t=0;t<Gn.length;t++)Ot(...Gn[t]);Gn.length=0}function gn(){ls||(Wo(_a),ls=!0)}function xr(t,s=!1){ls=!0,Ms=s,t(n),_a(),s&&Gn.length>0&&queueMicrotask(br)}n.batch=xr;function _a(){if(ol&&(ql(),ol=!1),Yt&&(El(),Yt=!1),gl){if(st(Y,kn,ke),st(Y,Un,Ke),st(Y,qn,pe),st(Y,jn,V),st(T,kn,ke),st(T,Un,Ke),st(T,qn,pe),st(T,jn,V),st(_,qn,Gt),st(_,jn,Rt),k.width=Ct(Gt*Ve),k.height=Ct(Rt*Ve),Z.forEach(({_el:t,_show:s,_size:r,_pos:o,side:d})=>{if(t!=null)if(s){let g=d===3||d===0?r:0,b=d%2==1;st(t,b?"left":"top",o-g),st(t,b?"width":"height",r),st(t,b?"top":"left",b?Ke:ke),st(t,b?"height":"width",b?V:pe),qs(t,cn)}else pl(t,cn)}),Ie=_t=qt=$t=jt=Xt=wl=Vt=il=null,De=1,Vn(!0),ke!=Jt||Ke!=Zt||pe!=Et||V!=Ut){hn(!1);let t=pe/Et,s=V/Ut;if(Pe&&!xt&&$.left>=0){$.left*=t,$.top*=s,mn&&Vl(mn,Ct($.left),0,pe,V),_n&&Vl(_n,0,Ct($.top),pe,V);for(let r=0;r<j.length;r++){let o=j[r];o!=null&&(ge[r]*=t,Fe[r]*=s,Vl(o,Sl(ge[r]),Sl(Fe[r]),pe,V))}}if(lt.show&&!kl&&lt.left>=0&&lt.width>0){lt.left*=t,lt.width*=t,lt.top*=s,lt.height*=s;for(let r in Ps)st(xn,r,lt[r])}Jt=ke,Zt=Ke,Et=pe,Ut=V}Ot("setSize"),gl=!1}Gt>0&&Rt>0&&(m.clearRect(0,0,k.width,k.height),Ot("drawClear"),ne.forEach(t=>t()),Ot("draw")),lt.show&&kl&&(ns(lt),kl=!1),Pe&&xt&&(an(null,!0,!1),xt=!1),ue.show&&ue.live&&vt&&(Ds(),vt=!1),v||(v=!0,n.status=1,Ot("ready")),L=!1,ls=!1}n.redraw=(t,s)=>{Yt=s||!1,t!==!1?$l(A,w.min,w.max):gn()};function As(t,s){let r=D[t];if(r.from==null){if(C==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(C>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==A&&r.distr==2&&C>0&&(s.min=Rl(s.min,l[0]),s.max=Rl(s.max,l[0]),s.min==s.max&&s.max++),F[t]=s,ol=!0,gn()}}n.setScale=As;let Cs,Ls,mn,_n,wa,ba,wn,bn,xa,ya,tt,it,Ql=!1;const Wt=$.drag;let Pt=Wt.x,Ft=Wt.y;Pe&&($.x&&(Cs=yl(po,T)),$.y&&(Ls=yl(vo,T)),w.ori==0?(mn=Cs,_n=Ls):(mn=Ls,_n=Cs),tt=$.left,it=$.top);const lt=n.select=St({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),xn=lt.show?yl(fo,lt.over?T:Y):null;function ns(t,s){if(lt.show){for(let r in t)lt[r]=t[r],r in Ps&&st(xn,r,t[r]);s!==!1&&Ot("setSelect")}}n.setSelect=ns;function yr(t){if(y[t].show)Ee&&qs(Me[t],cn);else if(Ee&&pl(Me[t],cn),Pe){let r=q?j[0]:j[t];r!=null&&Vl(r,-10,-10,pe,V)}}function $l(t,s,r){As(t,{min:s,max:r})}function Nl(t,s,r,o){s.focus!=null&&Mr(t),s.show!=null&&y.forEach((d,g)=>{g>0&&(t==g||t==null)&&(d.show=s.show,yr(g),i==2?($l(d.facets[0].scale,null,null),$l(d.facets[1].scale,null,null)):$l(d.scale,null,null),gn())}),r!==!1&&Ot("setSeries",t,s),o&&Hn("setSeries",n,t,s)}n.setSeries=Nl;function Sr(t,s){St(P[t],s)}function kr(t,s){t.fill=Le(t.fill||null),t.dir=Ge(t.dir,-1),s=s??P.length,P.splice(s,0,t)}function Tr(t){t==null?P.length=0:P.splice(t,1)}n.addBand=kr,n.setBand=Sr,n.delBand=Tr;function Er(t,s){y[t].alpha=s,Pe&&j[t]!=null&&(j[t].style.opacity=s),Ee&&Me[t]&&(Me[t].style.opacity=s)}let jl,Xl,sn;const yn={focus:!0};function Mr(t){if(t!=sn){let s=t==null,r=It.alpha!=1;y.forEach((o,d)=>{if(i==1||d>0){let g=s||d==0||d==t;o._focus=s?null:g,r&&Er(d,g?1:It.alpha)}}),sn=t,r&&gn()}}Ee&&G&&je(Ha,he,t=>{$._lock||(Qt(t),sn!=null&&Nl(null,yn,!0,yt.setSeries))});function Gl(t,s,r){let o=D[s];r&&(t=t/Ve-(o.ori==1?Ke:ke));let d=pe;o.ori==1&&(d=V,t=d-t),o.dir==-1&&(t=d-t);let g=o._min,b=o._max,M=t/d,R=g+(b-g)*M,J=o.distr;return J==3?Ln(10,R):J==4?Do(R,o.asinh):J==100?o.bwd(R):R}function Ar(t,s){let r=Gl(t,A,s);return Rl(r,l[0],H,z)}n.valToIdx=t=>Rl(t,l[0]),n.posToIdx=Ar,n.posToVal=Gl,n.valToPos=(t,s,r)=>D[s].ori==0?f(t,D[s],r?ut:pe,r?pt:0):c(t,D[s],r?mt:V,r?Mt:0),n.setCursor=(t,s,r)=>{tt=t.left,it=t.top,an(null,s,r)};function Sa(t,s){st(xn,kn,lt.left=t),st(xn,qn,lt.width=s)}function ka(t,s){st(xn,Un,lt.top=t),st(xn,jn,lt.height=s)}let In=w.ori==0?Sa:ka,zn=w.ori==1?Sa:ka;function Cr(){if(Ee&&ue.live)for(let t=i==2?1:0;t<y.length;t++){if(t==0&&rt)continue;let s=ue.values[t],r=0;for(let o in s)bt[t][r++].firstChild.nodeValue=s[o]}}function Ds(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{be[o]=r}):Oo(t.idx)||be.fill(t.idx),ue.idx=be[0]),Ee&&ue.live){for(let r=0;r<y.length;r++)(r>0||i==1&&!rt)&&Lr(r,be[r]);Cr()}vt=!1,s!==!1&&Ot("setLegend")}n.setLegend=Ds;function Lr(t,s){let r=y[t],o=t==0&&U==2?W:l[t],d;rt?d=r.values(n,t,s)??ft:(d=r.value(n,s==null?null:o[s],t,s),d=d==null?ft:{_:d}),ue.values[t]=d}function an(t,s,r){xa=tt,ya=it,[tt,it]=$.move(n,tt,it),$.left=tt,$.top=it,Pe&&(mn&&Vl(mn,Ct(tt),0,pe,V),_n&&Vl(_n,0,Ct(it),pe,V));let o,d=H>z;jl=Qe,Xl=null;let g=w.ori==0?pe:V,b=w.ori==1?pe:V;if(tt<0||C==0||d){o=$.idx=null;for(let M=0;M<y.length;M++){let R=j[M];R!=null&&Vl(R,-10,-10,pe,V)}G&&Nl(null,yn,!0,t==null&&yt.setSeries),ue.live&&(be.fill(o),vt=!0)}else{let M,R,J;i==1&&(M=w.ori==0?tt:it,R=Gl(M,A),o=$.idx=Rl(R,l[0],H,z),J=B(l[0][o],w,g,0));let Q=-10,te=-10,me=0,ze=0,Ne=!0,Ae="",ve="";for(let ce=i==2?1:0;ce<y.length;ce++){let nt=y[ce],ht=be[ce],Bt=ht==null?null:i==1?l[ce][ht]:l[ce][1][ht],qe=$.dataIdx(n,ce,o,R),gt=qe==null?null:i==1?l[ce][qe]:l[ce][1][qe];if(vt=vt||gt!=Bt||qe!=ht,be[ce]=qe,ce>0&&nt.show){let cl=qe==null?-10:qe==o?J:B(i==1?l[0][qe]:l[ce][0][qe],w,g,0),tl=gt==null?-10:ee(gt,i==1?D[nt.scale]:D[nt.facets[1].scale],b,0);if(G&&gt!=null){let bl=w.ori==1?tt:it,Cl=Lt(It.dist(n,ce,qe,tl,bl));if(Cl<jl){let Il=It.bias;if(Il!=0){let fl=Gl(bl,nt.scale),xl=gt>=0?1:-1,Ll=fl>=0?1:-1;Ll==xl&&(Ll==1?Il==1?gt>=fl:gt<=fl:Il==1?gt<=fl:gt>=fl)&&(jl=Cl,Xl=ce)}else jl=Cl,Xl=ce}}if(vt||q){let bl,Cl;w.ori==0?(bl=cl,Cl=tl):(bl=tl,Cl=cl);let Il,fl,xl,Ll,zl,ll,dl=!0,rn=Je.bbox;if(rn!=null){dl=!1;let nl=rn(n,ce);xl=nl.left,Ll=nl.top,Il=nl.width,fl=nl.height}else xl=bl,Ll=Cl,Il=fl=Je.size(n,ce);if(ll=Je.fill(n,ce),zl=Je.stroke(n,ce),q)ce==Xl&&jl<=It.prox&&(Q=xl,te=Ll,me=Il,ze=fl,Ne=dl,Ae=ll,ve=zl);else{let nl=j[ce];nl!=null&&(ge[ce]=xl,Fe[ce]=Ll,Ja(nl,Il,fl,dl),ja(nl,ll,zl),Vl(nl,Sl(xl),Sl(Ll),pe,V))}}}}if(q){let ce=It.prox,nt=sn==null?jl<=ce:jl>ce||Xl!=sn;if(vt||nt){let ht=j[0];ht!=null&&(ge[0]=Q,Fe[0]=te,Ja(ht,me,ze,Ne),ja(ht,Ae,ve),Vl(ht,Sl(Q),Sl(te),pe,V))}}}if(lt.show&&Ql)if(t!=null){let[M,R]=yt.scales,[J,Q]=yt.match,[te,me]=t.cursor.sync.scales,ze=t.cursor.drag;if(Pt=ze._x,Ft=ze._y,Pt||Ft){let{left:Ne,top:Ae,width:ve,height:ce}=t.select,nt=t.scales[te].ori,ht=t.posToVal,Bt,qe,gt,cl,tl,bl=M!=null&&J(M,te),Cl=R!=null&&Q(R,me);bl&&Pt?(nt==0?(Bt=Ne,qe=ve):(Bt=Ae,qe=ce),gt=D[M],cl=B(ht(Bt,te),gt,g,0),tl=B(ht(Bt+qe,te),gt,g,0),In(Fl(cl,tl),Lt(tl-cl))):In(0,g),Cl&&Ft?(nt==1?(Bt=Ne,qe=ve):(Bt=Ae,qe=ce),gt=D[R],cl=ee(ht(Bt,me),gt,b,0),tl=ee(ht(Bt+qe,me),gt,b,0),zn(Fl(cl,tl),Lt(tl-cl))):zn(0,b)}else Fs()}else{let M=Lt(xa-wa),R=Lt(ya-ba);if(w.ori==1){let me=M;M=R,R=me}Pt=Wt.x&&M>=Wt.dist,Ft=Wt.y&&R>=Wt.dist;let J=Wt.uni;J!=null?Pt&&Ft&&(Pt=M>=J,Ft=R>=J,!Pt&&!Ft&&(R>M?Ft=!0:Pt=!0)):Wt.x&&Wt.y&&(Pt||Ft)&&(Pt=Ft=!0);let Q,te;Pt&&(w.ori==0?(Q=wn,te=tt):(Q=bn,te=it),In(Fl(Q,te),Lt(te-Q)),Ft||zn(0,b)),Ft&&(w.ori==1?(Q=wn,te=tt):(Q=bn,te=it),zn(Fl(Q,te),Lt(te-Q)),Pt||In(0,g)),!Pt&&!Ft&&(In(0,0),zn(0,0))}if(Wt._x=Pt,Wt._y=Ft,t==null){if(r){if(Oa!=null){let[M,R]=yt.scales;yt.values[0]=M!=null?Gl(w.ori==0?tt:it,M):null,yt.values[1]=R!=null?Gl(w.ori==1?tt:it,R):null}Hn(Gs,n,tt,it,pe,V,o)}if(G){let M=r&&yt.setSeries,R=It.prox;sn==null?jl<=R&&Nl(Xl,yn,!0,M):jl>R?Nl(null,yn,!0,M):Xl!=sn&&Nl(Xl,yn,!0,M)}}vt&&(ue.idx=o,Ds()),s!==!1&&Ot("setCursor")}let en=null;Object.defineProperty(n,"rect",{get(){return en==null&&Vn(!1),en}});function Vn(t=!1){t?en=null:(en=T.getBoundingClientRect(),Ot("syncRect",en))}function Ta(t,s,r,o,d,g,b){$._lock||Ql&&t!=null&&t.movementX==0&&t.movementY==0||(Rs(t,s,r,o,d,g,b,!1,t!=null),t!=null?an(null,!0,!0):an(s,!0,!1))}function Rs(t,s,r,o,d,g,b,M,R){if(en==null&&Vn(!1),Qt(t),t!=null)r=t.clientX-en.left,o=t.clientY-en.top;else{if(r<0||o<0){tt=-10,it=-10;return}let[J,Q]=yt.scales,te=s.cursor.sync,[me,ze]=te.values,[Ne,Ae]=te.scales,[ve,ce]=yt.match,nt=s.axes[0].side%2==1,ht=w.ori==0?pe:V,Bt=w.ori==1?pe:V,qe=nt?g:d,gt=nt?d:g,cl=nt?o:r,tl=nt?r:o;if(Ne!=null?r=ve(J,Ne)?p(me,D[J],ht,0):-10:r=ht*(cl/qe),Ae!=null?o=ce(Q,Ae)?p(ze,D[Q],Bt,0):-10:o=Bt*(tl/gt),w.ori==1){let bl=r;r=o,o=bl}}R&&(s==null||s.cursor.event.type==Gs)&&((r<=1||r>=pe-1)&&(r=on(r,pe)),(o<=1||o>=V-1)&&(o=on(o,V))),M?(wa=r,ba=o,[wn,bn]=$.move(n,r,o)):(tt=r,it=o)}const Ps={width:0,height:0,left:0,top:0};function Fs(){ns(Ps,!1)}let Ea,Ma,Aa,Ca;function La(t,s,r,o,d,g,b){Ql=!0,Pt=Ft=Wt._x=Wt._y=!1,Rs(t,s,r,o,d,g,b,!0,!1),t!=null&&(je(Is,Us,Da,!1),Hn(za,n,wn,bn,pe,V,null));let{left:M,top:R,width:J,height:Q}=lt;Ea=M,Ma=R,Aa=J,Ca=Q}function Da(t,s,r,o,d,g,b){Ql=Wt._x=Wt._y=!1,Rs(t,s,r,o,d,g,b,!1,!0);let{left:M,top:R,width:J,height:Q}=lt,te=J>0||Q>0,me=Ea!=M||Ma!=R||Aa!=J||Ca!=Q;if(te&&me&&ns(lt),Wt.setScale&&te&&me){let ze=M,Ne=J,Ae=R,ve=Q;if(w.ori==1&&(ze=R,Ne=Q,Ae=M,ve=J),Pt&&$l(A,Gl(ze,A),Gl(ze+Ne,A)),Ft)for(let ce in D){let nt=D[ce];ce!=A&&nt.from==null&&nt.min!=Qe&&$l(ce,Gl(Ae+ve,ce),Gl(Ae,ce))}Fs()}else $.lock&&($._lock=!$._lock,an(s,!0,t!=null));t!=null&&(Kt(Is,Us),Hn(Is,n,tt,it,pe,V,null))}function Dr(t,s,r,o,d,g,b){if($._lock)return;Qt(t);let M=Ql;if(Ql){let R=!0,J=!0,Q=10,te,me;w.ori==0?(te=Pt,me=Ft):(te=Ft,me=Pt),te&&me&&(R=tt<=Q||tt>=pe-Q,J=it<=Q||it>=V-Q),te&&R&&(tt=tt<wn?0:pe),me&&J&&(it=it<bn?0:V),an(null,!0,!0),Ql=!1}tt=-10,it=-10,be.fill(null),an(null,!0,!0),M&&(Ql=M)}function Ra(t,s,r,o,d,g,b){$._lock||(Qt(t),Be(),Fs(),t!=null&&Hn(Wa,n,tt,it,pe,V,null))}function Pa(){Z.forEach(Qu),Tl(n.width,n.height,!0)}fn(fs,An,Pa);const Sn={};Sn.mousedown=La,Sn.mousemove=Ta,Sn.mouseup=Da,Sn.dblclick=Ra,Sn.setSeries=(t,s,r,o)=>{let d=yt.match[2];r=d(n,s,r),r!=-1&&Nl(r,o,!0,!1)},Pe&&(je(za,T,La),je(Gs,T,Ta),je(Va,T,t=>{Qt(t),Vn(!1)}),je(Ha,T,Dr),je(Wa,T,Ra),$s.add(n),n.syncRect=Vn);const ss=n.hooks=e.hooks||{};function Ot(t,s,r){Ms?Gn.push([t,s,r]):t in ss&&ss[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)ss[s]=(ss[s]||[]).concat(t.hooks[s])});const Fa=(t,s,r)=>r,yt=St({key:null,setSeries:!1,filters:{pub:ei,sub:ei},scales:[A,y[1]?y[1].scale:null],match:[ti,ti,Fa],values:[null,null]},$.sync);yt.match.length==2&&yt.match.push(Fa),$.sync=yt;const Oa=yt.key,Os=nr(Oa);function Hn(t,s,r,o,d,g,b){yt.filters.pub(t,s,r,o,d,g,b)&&Os.pub(t,s,r,o,d,g,b)}Os.sub(n);function Rr(t,s,r,o,d,g,b){yt.filters.sub(t,s,r,o,d,g,b)&&Sn[t](null,s,r,o,d,g,b)}n.pub=Rr;function Pr(){Os.unsub(n),$s.delete(n),dt.clear(),js(fs,An,Pa),h.remove(),he?.remove(),Ot("destroy")}n.destroy=Pr;function Bs(){Ot("init",e,l),oe(l||e.data,!1),F[A]?As(A,F[A]):Be(),kl=lt.show&&(lt.width>0||lt.height>0),xt=vt=!0,Tl(e.width,e.height)}return y.forEach(He),Z.forEach(Yl),a?a instanceof HTMLElement?(a.appendChild(h),Bs()):a(n,Bs):Bs(),n}wt.assign=St;wt.fmtNum=ra;wt.rangeNum=ds;wt.rangeLog=_s;wt.rangeAsinh=aa;wt.orient=pn;wt.pxRatio=Ve;wt.join=Ho;wt.fmtDate=ua,wt.tzDate=Xo;wt.sync=nr;{wt.addGap=Ou,wt.clipGaps=xs;let e=wt.paths={points:ur};e.linear=fr,e.stepped=Gu,e.bars=Iu,e.spline=Vu}var $u=Te('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=Te('<span class="estimated-badge svelte-3wi8ix">est</span>'),ec=Te('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),tc=Te('<span class="estimated-badge svelte-3wi8ix">est</span>'),lc=Te("<span> </span> <!>",1),nc=Te('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),sc=Te('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),ac=Te('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function ic(e,l){hs(l,!0);const a=.5,n=1.2,i=0,f=100;function c(w,U){const B=[...w].sort((O,Re)=>O-Re),ee=U/100*(B.length-1),F=Math.floor(ee),X=Math.ceil(ee);return F===X?B[F]:B[F]+(B[X]-B[F])*(ee-F)}let p=Mn(l,"trend",3,null),v=Ce(!1),h=Ce(""),k=Ce(null),m=Oe(()=>us.config.temp_units==="C"),_=Oe(Ai),Y=Oe(ta),T=Oe(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(Se=>Se.status!=="invalid");if(w.length===0)return null;const U=[...w].sort((Se,ot)=>new Date(Se.timestamp).getTime()-new Date(ot.timestamp).getTime()),B=U[0],ee=U[U.length-1],F=U.map(Se=>Se.sg_calibrated??Se.sg_raw).filter(Se=>Se!==null&&Se>=a&&Se<=n),X=U.map(Se=>Se.temp_calibrated??Se.temp_raw).filter(Se=>Se!==null&&Se>=i&&Se<=f);if(F.length===0)return null;const O=F[F.length-1],Re=F[0],we=c(F,95),fe=c(F,5),be=new Date(B.timestamp).getTime(),ue=new Date(ee.timestamp).getTime(),Ee=(ue-be)/(1e3*60*60*24),Pe=Ee>0?(O-Re)/Ee:0;let ye=null,he=null,Ye=null,Xe=null;if(X.length>0){const Se=X[X.length-1],ot=X.reduce((je,Kt)=>je+Kt,0)/X.length,Nt=c(X,95),dt=c(X,5);ye=u(m)?Se:Se*9/5+32,he=u(m)?ot:ot*9/5+32,Ye=u(m)?Nt:Nt*9/5+32,Xe=u(m)?dt:dt*9/5+32}let Me=0;const bt=.001;for(let Se=F.length-2;Se>=0;Se--)if(Math.abs(F[Se]-O)>bt){const ot=new Date(U[Se+1].timestamp).getTime();Me=(ue-ot)/(1e3*60*60*24);break}let kt=null,rt=null;const ft=l.originalGravity??we,Tt=l.originalGravity===null;return ft>1&&ft>O&&(kt=(ft-O)/(ft-1)*100,rt=(ft-O)*131.25),{currentSg:O,firstSg:Re,highSg:we,lowSg:fe,currentTemp:ye,avgTemp:he,highTemp:Ye,lowTemp:Xe,fermRate:Pe,durationDays:Ee,daysAtCurrentSg:Me,apparentAttenuation:kt,abv:rt,ogIsEstimated:Tt,effectiveOg:ft}});function I(){le(h,l.originalGravity?.toFixed(3)??"",!0),le(v,!0),setTimeout(()=>u(k)?.focus(),0)}function se(){const w=u(h).trim();if(!w)l.onOgChange?.(null);else{const U=parseFloat(w);!isNaN(U)&&U>=.99&&U<=1.2&&l.onOgChange?.(U)}le(v,!1)}function re(w){w.key==="Enter"?se():w.key==="Escape"&&le(v,!1)}function y(w){return En(w)}function Z(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function D(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function P(w){return w===null?"--":w.toFixed(1)}function A(w){return w===null?"--":`${w.toFixed(1)}%`}var ae=Qn(),ne=Kl(ae);{var K=w=>{var U=sc(),B=S(U),ee=S(B),F=S(ee),X=S(F,!0);x(F);var O=N(F,2),Re=N(S(O),2),we=S(Re,!0);x(Re),x(O);var fe=N(O,2),be=N(S(fe),2),ue=S(be,!0);x(be),x(fe);var $=N(fe,2),Ee=N(S($),2),Pe=S(Ee,!0);x(Ee),x($);var ye=N($,2),he=N(S(ye),2),Ye=S(he,!0);x(he),x(ye),x(ee);var Xe=N(ee,2),Me=N(S(Xe),2),bt=N(S(Me),2),kt=S(bt,!0),rt=N(kt),ft=S(rt,!0);x(rt),x(bt),x(Me);var Tt=N(Me,2),Se=N(S(Tt),2),ot=S(Se,!0),Nt=N(ot),dt=S(Nt,!0);x(Nt),x(Se),x(Tt);var je=N(Tt,2),Kt=N(S(je),2),Gt=S(Kt,!0),Rt=N(Gt),pe=S(Rt,!0);x(Rt),x(Kt),x(je);var V=N(je,2),ke=N(S(V),2),Ke=S(ke,!0),Jt=N(Ke),Zt=S(Jt,!0);x(Jt),x(ke),x(V),x(Xe),x(B);var Et=N(B,2),Ut=S(Et),pt=N(S(Ut),2);let Mt;var ut=S(pt);x(pt),x(Ut);var mt=N(Ut,2),ol=N(S(mt),2),gl=S(ol,!0);x(ol),x(mt);var Yt=N(mt,2),xt=N(S(Yt),2),kl=S(xt,!0);x(xt),x(Yt);var vt=N(Yt,2),Tl=N(S(vt),2);{var Ul=q=>{var j=$u();Ei(j),j.__keydown=re,ea(j,ge=>le(k,ge),()=>u(k)),Si("blur",j,se),Mi(j,()=>u(h),ge=>le(h,ge)),xe(q,j)},ml=q=>{var j=Qn(),ge=Kl(j);{var Fe=He=>{var at=ec();at.__click=I;var At=S(at);let zt;var Yl=S(At,!0);x(At);var ul=N(At,2);{var Bl=E=>{var C=Xu();xe(E,C)};Ze(ul,E=>{u(T).ogIsEstimated&&E(Bl)})}Wl(2),x(at),et(E=>{Pl(at,"title",u(T).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),zt=sl(At,1,"stat-value svelte-3wi8ix",null,zt,{estimated:u(T).ogIsEstimated}),_e(Yl,E)},[()=>y(u(T).effectiveOg)]),xe(He,at)},ct=He=>{var at=lc(),At=Kl(at);let zt;var Yl=S(At,!0);x(At);var ul=N(At,2);{var Bl=E=>{var C=tc();xe(E,C)};Ze(ul,E=>{u(T).ogIsEstimated&&E(Bl)})}et(E=>{zt=sl(At,1,"stat-value svelte-3wi8ix",null,zt,{estimated:u(T).ogIsEstimated}),_e(Yl,E)},[()=>y(u(T).effectiveOg)]),xe(He,at)};Ze(ge,He=>{l.onOgChange?He(Fe):He(ct,!1)},!0)}xe(q,j)};Ze(Tl,q=>{l.onOgChange&&u(v)?q(Ul):q(ml,!1)})}x(vt);var El=N(vt,2),Ol=N(S(El),2),_l=S(Ol,!0);x(Ol),x(El);var Ml=N(El,2),Qt=N(S(Ml),2),Je=S(Qt,!0);x(Qt),x(Ml);var It=N(Ml,2);{var G=q=>{var j=nc(),ge=N(S(j),2),Fe=S(ge,!0);x(ge),Wl(2),x(j),et((ct,He)=>{Pl(j,"title",`Estimated time until target FG (R=${ct??""})`),_e(Fe,He)},[()=>p().r2.toFixed(2),()=>D(p().daysToFg)]),xe(q,j)};Ze(It,q=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&q(G)})}x(Et),x(U),et((q,j,ge,Fe,ct,He,at,At,zt,Yl,ul,Bl,E)=>{_e(X,u(Y)==="SG"?"Gravity":u(Y)==="P"?"Plato":"Brix"),_e(we,q),_e(ue,j),_e(Pe,ge),_e(Ye,Fe),_e(kt,ct),_e(ft,u(_)),_e(ot,He),_e(dt,u(_)),_e(Gt,at),_e(pe,u(_)),_e(Ke,At),_e(Zt,u(_)),Mt=sl(pt,1,"stat-value rate svelte-3wi8ix",null,Mt,{fermenting:u(T).fermRate<0}),_e(ut,`${zt??""}/day`),_e(gl,Yl),_e(kl,ul),_e(_l,Bl),_e(Je,E)},[()=>y(u(T).currentSg),()=>y(u(T).firstSg),()=>y(u(T).highSg),()=>y(u(T).lowSg),()=>P(u(T).currentTemp),()=>P(u(T).avgTemp),()=>P(u(T).highTemp),()=>P(u(T).lowTemp),()=>Z(u(T).fermRate),()=>D(u(T).durationDays),()=>D(u(T).daysAtCurrentSg),()=>A(u(T).apparentAttenuation),()=>A(u(T).abv)]),xe(w,U)},ie=w=>{var U=ac();xe(w,U)};Ze(ne,w=>{u(T)?w(K):w(ie,!1)})}xe(e,ae),gs()}vs(["keydown","click"]);var rc=Te('<button type="button"> </button>'),oc=Te("<option> </option>"),uc=Te('<button type="button"><span class="legend-dot anomaly-dot svelte-12kwequ"></span> <span> </span></button>'),cc=Te('<button type="button"><span class="legend-line legend-line-dotted svelte-12kwequ"></span> <span>Battery</span></button>'),fc=Te('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),dc=Te('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),pc=Te('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),vc=Te('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <button type="button"><span class="legend-line legend-line-dotted svelte-12kwequ"></span> <span>Ambient</span></button> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Chamber</span></button> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button> <!> <!></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function hc(e,l){hs(l,!0);const a="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let i=Oe(()=>us.config.smoothing_enabled),f=Oe(()=>us.config.smoothing_samples),c=Ce("UTC"),p=Ce(0),v=Ce(3),h=Mn(l,"deviceColor",3,"BLACK"),k=Mn(l,"originalGravity",3,null),m=Mn(l,"controlEvents",19,()=>[]),_=Oe(()=>us.config.temp_units==="C"),Y=Oe(ta),T,I=null,se=Ce(!0),re=Ce(null),y=Ce(24),Z=Ce(ln([])),D=Ce(ln([])),P=Ce(ln([])),A=Ce(null),ae=Ce(null);const ne={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},K="#facc15",ie="rgba(250, 204, 21, 0.3)",w="#71717a",U="#a1a1aa",B="rgba(255, 255, 255, 0.04)",ee="#22d3ee",F="#a78bfa",X="rgba(250, 204, 21, 0.5)",O="#ef4444",Re="#22c55e",we="brewsignal_chart_trend_enabled";let fe=Ce(!0);const be="brewsignal_chart_ambient_enabled",ue="brewsignal_chart_chamber_enabled",$="brewsignal_chart_anomaly_enabled",Ee="brewsignal_chart_battery_enabled";let Pe=Ce(!0),ye=Ce(!0),he=Ce(!0),Ye=Ce(!0),Xe=Ce(!1),Me=Ce(ln([])),bt=Ce(ln([]));function kt(E,C,H=1.01){const z=[];for(let De=0;De<E.length;De++)C[De]!==null&&z.push([E[De],C[De]]);if(z.length<10)return null;const de=z.length;let W=0,L=0,oe=0,Be=0;for(const[De,We]of z)W+=De,L+=We,oe+=De*We,Be+=De*De;const Ie=de*Be-W*W;if(Math.abs(Ie)<1e-10)return null;const _t=(de*oe-W*L)/Ie,qt=(L-_t*W)/de,il=L/de;let $t=0,jt=0;for(const[De,We]of z){const Ht=_t*De+qt;$t+=(We-Ht)**2,jt+=(We-il)**2}const Xt=jt>0?1-$t/jt:0;let wl=null,Vt=null;if(_t<0&&Xt>.3){const De=E[E.length-1],We=(H-qt)/_t;We>De&&(Vt=(We-De)/(1440*60),Vt>0&&Vt<60?wl=H:Vt=null)}return{slope:_t,intercept:qt,r2:Xt,predictedFg:wl,daysToFg:Vt}}function rt(E){const C=[];let H=null,z=null;for(const W of E){const L=dt(W.timestamp);W.action==="heat_on"?H=L:W.action==="heat_off"&&H!==null?(C.push({type:"heating",startTime:H,endTime:L}),H=null):W.action==="cool_on"?z=L:W.action==="cool_off"&&z!==null&&(C.push({type:"cooling",startTime:z,endTime:L}),z=null)}const de=Date.now()/1e3;return H!==null&&C.push({type:"heating",startTime:H,endTime:de}),z!==null&&C.push({type:"cooling",startTime:z,endTime:de}),C}function ft(E,C){return E.map(H=>C.slope*H+C.intercept)}function Tt(E,C,H){const z=new Date(E*1e3);try{return H?z.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:C}):z.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:C})}catch(de){return console.warn("Invalid timezone:",C,de),H?z.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):z.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function Se(E,C,H){const z=K,de=ne[h()]||U;return{width:E,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[W=>{const L=W.cursor.idx;if(L==null)return;const oe=W.root.querySelector(".u-legend");oe&&(oe.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`)}]},scales:{x:{time:!0},sg:{auto:!0,range:(W,L,oe)=>{const Be=(oe-L)*.1||.005;return[L-Be,oe+Be]}},temp:{auto:!0,range:(W,L,oe)=>{const Be=oe-L,Ie=10;if(Be<Ie){const qt=(oe+L)/2;return[qt-Ie/2,qt+Ie/2]}const _t=Be*.1;return[L-_t,oe+_t]}},battery:{auto:!1,range:[0,105]}},axes:[{stroke:w,grid:{stroke:B,width:1},ticks:{stroke:B,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(W,L)=>L.map(oe=>Tt(oe,H,u(y)<=24))},{scale:"sg",stroke:z,grid:{stroke:B,width:1},ticks:{stroke:B,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(W,L)=>L.map(oe=>En(oe)),side:3},{scale:"temp",stroke:de,grid:{show:!1},ticks:{stroke:B,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(W,L)=>L.map(oe=>oe.toFixed(0)+""),side:1}],series:[{value:(W,L)=>Tt(L,H,!1)+" "+Tt(L,H,!0)},{label:u(Y)==="SG"?"Gravity":u(Y)==="P"?"Plato":"Brix",scale:"sg",stroke:z,width:2,value:(W,L)=>L!==null?En(L):"--",fill:(W,L)=>{const oe=W.ctx.createLinearGradient(0,W.bbox.top,0,W.bbox.top+W.bbox.height);return oe.addColorStop(0,ie),oe.addColorStop(1,"transparent"),oe},points:{show:!1},paths:wt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:de,width:1.5,dash:[4,4],value:(W,L)=>L!==null?L.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:ee,width:1.5,dash:[2,4],value:(W,L)=>L!==null?L.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.(),show:u(Pe)},{label:"Chamber",scale:"temp",stroke:F,width:1.5,dash:[4,2],value:(W,L)=>L!==null?L.toFixed(1)+"":"--",points:{show:!1},paths:wt.paths.spline?.(),show:u(ye)},{label:"Trend",scale:"sg",stroke:X,width:2,dash:[8,4],value:(W,L)=>L!==null?En(L):"--",points:{show:!1},show:u(fe)},{label:"Anomaly",scale:"sg",stroke:O,width:0,value:(W,L)=>L!==null?En(L)+" ":"--",points:{show:!0,size:8,fill:O,stroke:"#ffffff",width:2},show:u(he)},{label:"Battery",scale:"battery",stroke:Re,width:1.5,dash:[2,2],value:(W,L)=>L!==null?L.toFixed(0)+"%":"--",points:{show:!1},paths:wt.paths.spline?.(),show:u(Ye)}]}}function ot(E,C){if(C<=1)return E;const H=[];for(let z=0;z<E.length;z++){const de=[],W=Math.floor(C/2);for(let L=Math.max(0,z-W);L<=Math.min(E.length-1,z+W);L++){const oe=E[L];oe!==null&&de.push(oe)}de.length>0?H.push(de.reduce((L,oe)=>L+oe,0)/de.length):H.push(null)}return H}function Nt(E,C,H,z,de,W,L){if(E.length<=L)return[E,C,H,z,de,W];const oe=Math.ceil(E.length/L),Be=[],Ie=[],_t=[],qt=[],il=[],$t=[];for(let jt=0;jt<E.length;jt+=oe){const Xt=Math.min(jt+oe,E.length);let wl=0,Vt=0,De=0,We=0,Ht=0,rl=0,Al=0,ql=0,vn=0,Nn=0;for(let el=jt;el<Xt;el++)C[el]!==null&&(wl+=C[el],Vt++),H[el]!==null&&(De+=H[el],We++),z[el]!==null&&(Ht+=z[el],rl++),de[el]!==null&&(Al+=de[el],ql++),W[el]!==null&&(vn+=W[el],Nn++);Be.push(E[Math.floor((jt+Xt-1)/2)]),Ie.push(Vt>0?wl/Vt:null),_t.push(We>0?De/We:null),qt.push(rl>0?Ht/rl:null),il.push(ql>0?Al/ql:null),$t.push(Nn>0?vn/Nn:null)}return[Be,Ie,_t,qt,il,$t]}function dt(E){return!E.endsWith("Z")&&!E.match(/[+-]\d{2}:\d{2}$/)&&(E=E+"Z"),new Date(E).getTime()/1e3}function je(E,C,H){if(E.length===0||C.length===0)return C.map(()=>null);const z=[...E].sort((L,oe)=>dt(L.timestamp)-dt(oe.timestamp)),de=z.map(L=>dt(L.timestamp)),W=z.map(L=>L.temperature===null?null:H?L.temperature:L.temperature*9/5+32);return C.map(L=>{let oe=null,Be=null;for(let Ie=0;Ie<de.length;Ie++)if(de[Ie]<=L&&(oe={time:de[Ie],temp:W[Ie]}),de[Ie]>=L&&Be===null){Be={time:de[Ie],temp:W[Ie]};break}if(oe&&Be&&oe.temp!==null&&Be.temp!==null){if(oe.time===Be.time)return oe.temp;const Ie=(L-oe.time)/(Be.time-oe.time);return oe.temp+Ie*(Be.temp-oe.temp)}return oe!==null&&oe.temp!==null?oe.temp:Be!==null&&Be.temp!==null?Be.temp:null})}function Kt(E,C,H,z){const de=[...E].reverse();let W=[],L=[],oe=[],Be=[],Ie=[];const _t=[];let qt=!1;for(const We of de){const Ht=dt(We.timestamp),rl=We.sg_calibrated??We.sg_raw;if(W.push(Ht),L.push(rl),We.is_anomaly&&rl!==null){Ie.push(rl);let ql=[];if(We.anomaly_reasons)try{ql=JSON.parse(We.anomaly_reasons)}catch{ql=We.anomaly_reasons.split(",").map(vn=>vn.trim())}_t.push({timestamp:Ht,sg:rl,reasons:ql})}else Ie.push(null);const Al=We.temp_calibrated??We.temp_raw;Al!==null?oe.push(z?Al:Al*9/5+32):oe.push(null),We.battery_percent!==null&&We.battery_percent!==void 0?(Be.push(We.battery_percent),qt=!0):Be.push(null)}le(Xe,qt,!0),le(Me,_t,!0);let il=je(C,W,z),$t=je(H,W,z);u(i)&&u(f)>1&&(L=ot(L,u(f)),oe=ot(oe,u(f)),il=ot(il,u(f)),$t=ot($t,u(f)));const jt=500,Xt=[...W],wl=[...Ie];[W,L,oe,il,$t,Be]=Nt(W,L,oe,il,$t,Be,jt),Ie=W.map(We=>{for(let Ht=0;Ht<Xt.length;Ht++)if(wl[Ht]!==null){const rl=Math.abs(Xt[Ht]-We),Al=(Xt[Xt.length-1]-Xt[0])/jt;if(rl<=Al)return wl[Ht]}return null});const Vt=kt(W,L);le(A,Vt,!0);const De=Vt?ft(W,Vt):W.map(()=>null);return[W,L,oe,il,$t,De,Ie,Be]}const Gt=3e4;async function Rt(E=!1){const H=Date.now()-u(p);if(!(!E&&u(p)>0&&H<Gt)){le(se,!0),le(re,null);try{if(!u(ae)){const z=await Yr(l.batchId);le(ae,z.device_id??null,!0)}if(u(ae)){const[z,de,W]=await Promise.all([qr(u(ae),u(y),l.batchId),jr(u(y)).catch(()=>[]),Kr(u(y)).catch(()=>[])]);le(Z,z,!0),le(D,de,!0),le(P,W,!0),pe()}else le(Z,[],!0),le(D,[],!0),le(P,[],!0),le(re,"No device assigned to this batch")}catch(z){le(re,z instanceof Error?z.message:"Failed to load data",!0)}finally{le(p,Date.now(),!0),le(se,!1)}}}function pe(){if(!T||u(Z).length===0)return;const E=Kt(u(Z),u(D),u(P),u(_)),C=Se(T.clientWidth,u(_),u(c));I&&I.destroy(),I=new wt(C,E,T)}function V(){I&&T&&I.setSize({width:T.clientWidth,height:220})}let ke=null;function Ke(){if(ke&&(clearInterval(ke),ke=null),u(v)>0){const E=u(v)*60*1e3;ke=setInterval(()=>{u(se)||Rt(!1)},E)}}ki(async()=>{const E=localStorage.getItem(a);if(E!==null){const L=parseInt(E,10);Number.isNaN(L)||le(v,L,!0)}const C=localStorage.getItem(we);C!==null&&le(fe,C==="true");const H=localStorage.getItem(be);H!==null&&le(Pe,H==="true");const z=localStorage.getItem(ue);z!==null&&le(ye,z==="true");const de=localStorage.getItem($);de!==null&&le(he,de==="true");const W=localStorage.getItem(Ee);W!==null&&le(Ye,W==="true");try{const L=await fetch("/api/system/timezone");if(L.ok){const oe=await L.json();le(c,oe.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await Rt(!0),window.addEventListener("resize",V),Ke()}),Gr(()=>{I?.destroy(),window.removeEventListener("resize",V),ke&&clearInterval(ke)}),os(()=>{m()&&m().length>0?le(bt,rt(m()),!0):le(bt,[],!0)}),os(()=>{u(_)!==void 0&&u(Z).length>0&&T&&pe()}),os(()=>{u(i),u(f),u(Z).length>0&&T&&pe()});function Jt(E){const C=Number(E.target.value);le(v,C,!0),localStorage.setItem(a,String(C)),Ke(),Rt(!0)}function Zt(){le(fe,!u(fe)),localStorage.setItem(we,String(u(fe))),I&&I.setSeries(5,{show:u(fe)})}function Et(){le(Pe,!u(Pe)),localStorage.setItem(be,String(u(Pe))),I&&I.setSeries(3,{show:u(Pe)})}function Ut(){le(ye,!u(ye)),localStorage.setItem(ue,String(u(ye))),I&&I.setSeries(4,{show:u(ye)})}function pt(){le(he,!u(he)),localStorage.setItem($,String(u(he))),I&&I.setSeries(6,{show:u(he)})}function Mt(){le(Ye,!u(Ye)),localStorage.setItem(Ee,String(u(Ye))),I&&I.setSeries(7,{show:u(Ye)})}var ut=vc(),mt=S(ut),ol=S(mt);Cn(ol,21,()=>Ur,$n,(E,C)=>{var H=rc();let z;H.__click=()=>{u(y)!==u(C).hours&&(le(y,u(C).hours,!0),Rt(!0))};var de=S(H,!0);x(H),et(()=>{z=sl(H,1,"range-btn svelte-12kwequ",null,z,{active:u(y)===u(C).hours}),_e(de,u(C).label)}),xe(E,H)}),x(ol);var gl=N(ol,2),Yt=S(gl),xt=N(S(Yt),2);xt.__change=Jt,Cn(xt,21,()=>n,$n,(E,C)=>{var H=oc(),z=S(H,!0);x(H);var de={};et(()=>{_e(z,u(C).label),de!==(de=u(C).value)&&(H.value=(H.__value=u(C).value)??"")}),xe(E,H)}),x(xt);var kl;Xr(xt),x(Yt);var vt=N(Yt,2),Tl=N(S(vt),2),Ul=S(Tl);Wl(2),x(Tl);var ml=N(Tl,2);let El;ml.__click=Et;var Ol=S(ml);Hl(Ol,"background: #22d3ee;"),Wl(2),x(ml);var _l=N(ml,2);let Ml;_l.__click=Ut;var Qt=S(_l);Hl(Qt,"background: #a78bfa;"),Wl(2),x(_l);var Je=N(_l,2);let It;Je.__click=Zt;var G=S(Je);Hl(G,"background: rgba(250, 204, 21, 0.5);"),Wl(2),x(Je);var q=N(Je,2);{var j=E=>{var C=uc();let H;C.__click=pt;var z=S(C);Hl(z,"background: #ef4444;");var de=N(z,2),W=S(de);x(de),x(C),et(()=>{H=sl(C,1,"legend-item legend-toggle anomaly-toggle svelte-12kwequ",null,H,{"legend-disabled":!u(he)}),Pl(C,"title",u(he)?"Hide anomaly markers":"Show anomaly markers"),_e(W,`Anomalies (${u(Me).length??""})`)}),xe(E,C)};Ze(q,E=>{u(Me).length>0&&E(j)})}var ge=N(q,2);{var Fe=E=>{var C=cc();let H;C.__click=Mt;var z=S(C);Hl(z,"background: #22c55e;"),Wl(2),x(C),et(()=>{H=sl(C,1,"legend-item legend-toggle svelte-12kwequ",null,H,{"legend-disabled":!u(Ye)}),Pl(C,"title",u(Ye)?"Hide battery level":"Show battery level")}),xe(E,C)};Ze(ge,E=>{u(Xe)&&E(Fe)})}x(vt),x(gl),x(mt);var ct=N(mt,2),He=S(ct);{var at=E=>{var C=fc();xe(E,C)};Ze(He,E=>{u(se)&&E(at)})}var At=N(He,2);{var zt=E=>{var C=dc(),H=N(S(C),2);H.__click=()=>Rt(!0),x(C),xe(E,C)},Yl=E=>{var C=Qn(),H=Kl(C);{var z=de=>{var W=pc();xe(de,W)};Ze(H,de=>{u(Z).length===0&&de(z)},!0)}xe(E,C)};Ze(At,E=>{u(re)?E(zt):E(Yl,!1)})}x(ct),ea(ct,E=>T=E,()=>T);var ul=N(ct,2);{var Bl=E=>{{let C=Oe(()=>u(A)?{predictedFg:u(A).predictedFg,daysToFg:u(A).daysToFg,r2:u(A).r2}:null);ic(E,{get readings(){return u(Z)},get originalGravity(){return k()},get trend(){return u(C)}})}};Ze(ul,E=>{u(Z).length>0&&E(Bl)})}x(ut),et(()=>{kl!==(kl=u(v))&&(xt.value=(xt.__value=u(v))??"",eo(xt,u(v))),Hl(Ul,`background: ${(ne[h()]||"var(--text-secondary)")??""};`),El=sl(ml,1,"legend-item legend-toggle svelte-12kwequ",null,El,{"legend-disabled":!u(Pe)}),Pl(ml,"title",u(Pe)?"Hide ambient temp":"Show ambient temp"),Ml=sl(_l,1,"legend-item legend-toggle svelte-12kwequ",null,Ml,{"legend-disabled":!u(ye)}),Pl(_l,"title",u(ye)?"Hide chamber temp":"Show chamber temp"),It=sl(Je,1,"legend-item legend-toggle svelte-12kwequ",null,It,{"legend-disabled":!u(fe)}),Pl(Je,"title",u(fe)?"Hide trend line":"Show trend line")}),xe(e,ut),gs()}vs(["click","change"]);var gc=Te('<span class="error-message svelte-1k5rb4o"> </span>'),mc=Te('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),_c=Te('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),wc=Te('<div class="w-1 rounded-sm transition-all"></div>'),bc=Te('<div class="confidence-badge svelte-1k5rb4o"><span class="text-xs"> </span> <span class="text-[10px]"> </span></div>'),xc=Te('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),yc=Te("<li> </li>"),Sc=Te('<div class="anomaly-alert svelte-1k5rb4o"><div class="flex items-start gap-2"><svg class="w-5 h-5 flex-shrink-0 mt-0.5 svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="flex-1"><p class="font-semibold text-sm mb-1">Anomaly Detected</p> <ul class="text-xs space-y-0.5 svelte-1k5rb4o"></ul></div></div></div>'),kc=Te(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),Tc=Te('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),Ec=Te('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Mc=Te("<div><!></div>"),Ac=Te('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Cc=Te('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!> <!></div></div> <!> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function Lc(e,l){hs(l,!0);let a=Mn(l,"expanded",3,!1),n=Mn(l,"wide",3,!1),i=Oe(()=>l.batch.device_id?Ti.tilts.get(l.batch.device_id)??null:null),f=Oe(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),c=Oe(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=Oe(()=>l.progress?.temperature?.current??null),v=Oe(()=>u(i)?.color??"BLACK"),h=Oe(()=>u(i)?.rssi??null),k=Oe(()=>u(i)?.paired??!0),m=Oe(()=>u(i)?.last_seen??new Date().toISOString()),_=Oe(()=>u(i)?.sg_raw??u(c)),Y=Oe(()=>u(i)?.temp_raw??u(p)),T=Oe(()=>u(i)?.confidence??null),I=Oe(()=>u(i)?.is_anomaly??!1),se=Oe(()=>u(i)?.anomaly_reasons??[]),re=Oe(()=>we(u(T))),y=Ce(!1),Z=Ce(ln([])),D=Ce(!1);os(()=>{a()&&!u(y)&&(le(y,!0),u(D)||Jr(l.batch.id,168).then(G=>{le(Z,G,!0),le(D,!0)}).catch(G=>{console.error("Failed to fetch control events:",G),le(Z,[],!0),le(D,!0)}))});let P=Ce(!1),A=Ce(""),ae=Ce(null),ne=Ce(!1),K=Ce(null);function ie(){le(A,u(f),!0),le(P,!0),le(K,null),setTimeout(()=>u(ae)?.focus(),0)}async function w(){if(u(ne))return;const G=u(A).trim();if(!G||G===u(f)){le(P,!1),le(K,null);return}le(ne,!0),le(K,null);try{await Zr(l.batch.id,{name:G}),le(P,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(q){console.error("Failed to update batch name:",q),le(K,q instanceof Error?q.message:"Failed to save batch name",!0)}finally{le(ne,!1)}}function U(G){G.key==="Enter"?w():G.key==="Escape"&&le(P,!1)}let B=Oe(Ai),ee=Oe(ta);const F={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function X(G){return En(G)}function O(G){return Wr(G)}function Re(G){return G>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:G>=-60?{bars:3,color:"var(--positive)",label:"Good"}:G>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function we(G){return G==null?null:G>=.8?{emoji:"",label:"High",color:"var(--positive)"}:G>=.5?{emoji:"",label:"Medium",color:"var(--warning)"}:{emoji:"",label:"Low",color:"var(--negative)"}}function fe(G){const q=Math.floor((Date.now()-new Date(G).getTime())/1e3);if(q<10)return"just now";if(q<60)return`${q}s ago`;const j=Math.floor(q/60);if(j<60)return`${j}m ago`;const ge=Math.floor(j/60);return ge<24?`${ge}h ago`:`${Math.floor(ge/24)}d ago`}let be=Oe(()=>F[u(v)]||"var(--tilt-black)"),ue=Oe(()=>u(h)!==null?Re(u(h)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),$=Oe(()=>fe(u(m)));var Ee=Cc();let Pe;var ye=S(Ee),he=N(ye,2),Ye=S(he),Xe=S(Ye),Me=S(Xe);{var bt=G=>{var q=mc(),j=S(q);Ei(j),j.__keydown=U;let ge;ea(j,He=>le(ae,He),()=>u(ae));var Fe=N(j,2);{var ct=He=>{var at=gc(),At=S(at,!0);x(at),et(()=>_e(At,u(K))),xe(He,at)};Ze(Fe,He=>{u(K)&&He(ct)})}x(q),et(()=>{j.disabled=u(ne),ge=sl(j,1,"beer-name-input svelte-1k5rb4o",null,ge,{error:u(K)})}),Si("blur",j,w),Mi(j,()=>u(A),He=>le(A,He)),xe(G,q)},kt=G=>{var q=_c();q.__click=ie;var j=S(q),ge=S(j,!0);x(j),Wl(2),x(q),et(()=>_e(ge,u(f))),xe(G,q)};Ze(Me,G=>{u(P)?G(bt):G(kt,!1)})}var rt=N(Me,2),ft=S(rt),Tt=N(ft,2),Se=S(Tt,!0);x(Tt),x(rt),x(Xe);var ot=N(Xe,2),Nt=S(ot),dt=S(Nt);Cn(dt,20,()=>Array(4),$n,(G,q,j)=>{var ge=wc();et(()=>Hl(ge,`
									height: ${8+j*4}px;
									background: ${(j<u(ue).bars?u(ue).color:"var(--bg-hover)")??""};
									opacity: ${j<u(ue).bars?1:.4};
								`)),xe(G,ge)}),x(dt);var je=N(dt,2),Kt=S(je);x(je),x(Nt);var Gt=N(Nt,2);{var Rt=G=>{var q=bc(),j=S(q),ge=S(j,!0);x(j);var Fe=N(j,2),ct=S(Fe,!0);x(Fe),x(q),et(He=>{Pl(q,"title",`ML confidence: ${u(re).label??""} (${He??""}%)`),_e(ge,u(re).emoji),Hl(Fe,`color: ${u(re).color??""};`),_e(ct,u(re).label)},[()=>(u(T)*100).toFixed(0)]),xe(G,q)};Ze(Gt,G=>{u(re)&&G(Rt)})}var pe=N(Gt,2);{var V=G=>{var q=xc();xe(G,q)};Ze(pe,G=>{u(k)||G(V)})}x(ot),x(Ye);var ke=N(Ye,2);{var Ke=G=>{var q=Sc(),j=S(q),ge=N(S(j),2),Fe=N(S(ge),2);Cn(Fe,21,()=>u(se),$n,(ct,He)=>{var at=yc(),At=S(at);x(at),et(()=>_e(At,` ${u(He)??""}`)),xe(ct,at)}),x(Fe),x(ge),x(j),x(q),xe(G,q)};Ze(ke,G=>{u(I)&&u(se).length>0&&G(Ke)})}var Jt=N(ke,2),Zt=S(Jt),Et=S(Zt),Ut=S(Et,!0),pt=N(Ut),Mt=S(pt,!0);x(pt),x(Et);var ut=N(Et,2),mt=S(ut,!0);x(ut),x(Zt);var ol=N(Zt,2),gl=S(ol),Yt=S(gl);{var xt=G=>{var q=kc(),j=Kl(q,!0),ge=N(j),Fe=S(ge,!0);x(ge),et(ct=>{_e(j,ct),_e(Fe,u(B))},[()=>O(u(p))]),xe(G,q)},kl=G=>{var q=Tc(),j=N(Kl(q)),ge=S(j,!0);x(j),et(()=>_e(ge,u(B))),xe(G,q)};Ze(Yt,G=>{u(p)!==null?G(xt):G(kl,!1)})}x(gl),Wl(2),x(ol),x(Jt);var vt=N(Jt,2);{var Tl=G=>{var q=Ec(),j=N(S(q),2),ge=S(j,!0);x(j);var Fe=N(j,4),ct=S(Fe);x(Fe),x(q),et((He,at)=>{_e(ge,He),_e(ct,`${at??""}${u(B)??""}`)},[()=>X(u(_)),()=>u(Y)!==null?O(u(Y)):"--"]),xe(G,q)};Ze(vt,G=>{(u(c)!==u(_)||u(p)!==u(Y))&&u(i)&&G(Tl)})}var Ul=N(vt,2);{var ml=G=>{var q=Mc();let j;var ge=S(q);to(ge,()=>l.batch.id,Fe=>{hc(Fe,{get batchId(){return l.batch.id},get deviceColor(){return u(v)},get originalGravity(){return l.batch.measured_og},get controlEvents(){return u(Z)}})}),x(q),et(()=>j=sl(q,1,"chart-section svelte-1k5rb4o",null,j,{hidden:!a()})),xe(G,q)};Ze(Ul,G=>{u(y)&&G(ml)})}var El=N(Ul,2),Ol=S(El),_l=S(Ol);x(Ol);var Ml=N(Ol,2),Qt=S(Ml),Je=N(Qt,2);{var It=G=>{var q=Ac();q.__click=function(...Fe){l.onToggleExpand?.apply(this,Fe)};var j=S(q);let ge;x(q),et(()=>{Pl(q,"aria-label",a()?"Collapse chart":"Expand chart"),ge=sl(j,0,"w-4 h-4 transition-transform",null,ge,{"rotate-180":a()})}),xe(G,q)};Ze(Je,G=>{l.onToggleExpand&&G(It)})}Wl(2),x(Ml),x(El),x(he),x(Ee),et(G=>{Pe=sl(Ee,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,Pe,{expanded:a(),wide:n()}),Hl(ye,`background: ${u(be)??""};`),Hl(ft,`background: ${u(be)??""};`),_e(Se,u(v)),Pl(Nt,"title",`${u(ue).label??""} signal (${u(h)??"N/A"??""} dBm)`),_e(Kt,`${u(h)??"N/A"??""} dBm`),_e(Ut,G),_e(Mt,u(ee)!=="SG"?u(ee):""),_e(mt,u(ee)==="SG"?"Gravity":u(ee)==="P"?"Plato":"Brix"),_e(_l,`Updated ${u($)??""}`),Pl(Qt,"href",`/batches/${l.batch.id??""}`)},[()=>X(u(c))]),xe(e,Ee),gs()}vs(["keydown","click"]);var Dc=Te('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Rc=Te('<div class="alerts-list svelte-1uha8ag"></div>'),Pc=Te('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Fc=Te('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Oc=Te('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Bc=Te('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Nc=Te('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Gc=Te("<div></div>"),Ic=Te("<!> <!>",1);function lf(e,l){hs(l,!0);let a=Ce(!1),n=Ce(!1),i=Ce(ln([])),f=Ce(ln(new Map)),c=Ce(!0),p=Ce(null);ki(async()=>{const P=localStorage.getItem("brewsignal_alerts_dismissed"),A=localStorage.getItem("brewsignal_alerts_dismissed_time");P==="true"&&A&&Date.now()-parseInt(A,10)<360*60*1e3&&le(a,!0),await v()});async function v(){le(c,!0),le(p,null);try{const P=await Qr();le(i,P.filter(K=>K.status==="fermenting"||K.status==="conditioning"),!0);const A=u(i).map(async K=>{try{const ie=await $r(K.id);return[K.id,ie]}catch{return null}}),ae=await Promise.all(A),ne=new Map;for(const K of ae)K&&ne.set(K[0],K[1]);le(f,ne,!0)}catch(P){le(p,P instanceof Error?P.message:"Failed to load batches",!0)}finally{le(c,!1)}}let h=Oe(()=>new Map(u(i).filter(P=>P.device_id&&(P.status==="fermenting"||P.status==="conditioning")).map(P=>[P.device_id,P.id]))),k=Oe(()=>{const P=new Map(u(f));for(const[A,ae]of u(h)){const ne=Ti.tilts.get(A);if(ne){const K=P.get(ae)||{batch_id:ae,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}},ie=ne.sg,w=ne.temp;P.set(ae,{...K,measured:{...K.measured,current_sg:ie},temperature:{...K.temperature,current:w,status:K.temperature.yeast_min!==void 0&&K.temperature.yeast_max!==void 0?w<K.temperature.yeast_min?"too_cold":w>K.temperature.yeast_max?"too_hot":"in_range":K.temperature.status}})}}return P}),m=Ce(null);function _(P){le(m,u(m)===P?null:P,!0)}function Y(){le(a,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function T(){le(n,!u(n))}var I=Ic();Hr("1uha8ag",P=>{Ir(()=>{zr.title="Dashboard | BrewSignal"})});var se=Kl(I);{var re=P=>{var A=Fc(),ae=S(A),ne=S(ae),K=N(S(ne),4),ie=S(K,!0);x(K),x(ne);var w=N(ne,2);w.__click=Y,x(ae);var U=N(ae,2);{var B=X=>{var O=Rc();Cn(O,21,()=>Wn.alerts,$n,(Re,we)=>{var fe=Dc();let be;var ue=S(fe),$=S(ue);x(ue);var Ee=N(ue,2),Pe=S(Ee,!0);x(Ee),x(fe),et(()=>{be=sl(fe,1,"alert-item svelte-1uha8ag",null,be,{warning:u(we).level==="warning",critical:u(we).level==="critical"}),_e($,`${u(we).day??""}:`),_e(Pe,u(we).message)}),xe(Re,fe)}),x(O),xe(X,O)};Ze(U,X=>{u(n)||X(B)})}var ee=N(U,2);{var F=X=>{var O=Pc();O.__click=T;var Re=S(O,!0);x(O),et(()=>_e(Re,u(n)?`Show ${Wn.alerts.length} alerts`:"Show less")),xe(X,O)};Ze(ee,X=>{Wn.alerts.length>3&&X(F)})}x(A),et(()=>_e(ie,Wn.alerts.length)),xe(P,A)};Ze(se,P=>{Wn.alerts.length>0&&!u(a)&&P(re)})}var y=N(se,2);{var Z=P=>{var A=Oc();xe(P,A)},D=P=>{var A=Qn(),ae=Kl(A);{var ne=ie=>{var w=Bc(),U=N(S(w),4),B=S(U,!0);x(U),x(w),et(()=>_e(B,u(p))),xe(ie,w)},K=ie=>{var w=Qn(),U=Kl(w);{var B=F=>{var X=Nc();xe(F,X)},ee=F=>{var X=Gc();let O;Cn(X,21,()=>u(i),Re=>Re.id,(Re,we)=>{{let fe=Oe(()=>u(k).get(u(we).id)),be=Oe(()=>u(m)===u(we).id),ue=Oe(()=>u(i).length===1);Lc(Re,{get batch(){return u(we)},get progress(){return u(fe)},get expanded(){return u(be)},get wide(){return u(ue)},onToggleExpand:()=>_(u(we).id),onBatchUpdated:v})}}),x(X),et(()=>O=sl(X,1,"tilt-grid svelte-1uha8ag",null,O,{"single-tilt":u(i).length===1})),xe(F,X)};Ze(U,F=>{u(i).length===0?F(B):F(ee,!1)},!0)}xe(ie,w)};Ze(ae,ie=>{u(p)?ie(ne):ie(K,!1)},!0)}xe(P,A)};Ze(y,P=>{u(c)?P(Z):P(D,!1)})}xe(e,I),gs()}vs(["click"]);export{lf as component};
