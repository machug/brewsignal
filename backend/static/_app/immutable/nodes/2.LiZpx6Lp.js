import{d as Es,f as Oe,s as mt,a as Fe,c as Dr,e as Lr,t as Cr}from"../chunks/CFOZdz7i.js";import{ab as Ms,ac as it,p as wi,ad as ao,s as Ae,aD as Pr,ae as kn,g as L,am as Qt,ah as ue,aj as le,al as _t,ag as xe,an as Ol,af as As,ak as uo,V as Rr,ai as zr}from"../chunks/DNJZA-dt.js";import{e as cn,i as Mn}from"../chunks/CpBggV5R.js";import{i as Tt}from"../chunks/BO1qSlwS.js";import{c as rs,f as Fr,s as bi,g as Vr,d as Nr,r as Or,h as Wr}from"../chunks/5cCizkKl.js";import{s as Wl}from"../chunks/DmZ1uaxI.js";import{u as Hr,c as Ir,d as Gr,a as as}from"../chunks/CLxvjUC1.js";import{w as tn}from"../chunks/BbKcrH-x.js";import{s as Tn}from"../chunks/yxveMfi8.js";import{b as Br}from"../chunks/Hs0hQ20N.js";import{b as co,p as Si}from"../chunks/D2iJ0C1G.js";import{i as Ur,s as Yr}from"../chunks/O2uN-0fS.js";const qr=!0,je="u-",jr="uplot",Kr=je+"hz",Jr=je+"vt",Zr=je+"title",Qr=je+"wrap",$r=je+"under",Xr=je+"over",ea=je+"axis",vl=je+"off",ta=je+"select",la=je+"cursor-x",na=je+"cursor-y",sa=je+"cursor-pt",ia=je+"legend",oa=je+"live",ra=je+"inline",aa=je+"series",ua=je+"marker",xi=je+"label",ca=je+"value",sn="width",on="height",ln="top",yi="bottom",Vl="left",us="right",Ds="#000",ki=Ds+"0",cs="mousemove",Ti="mousedown",fs="mouseup",Ei="mouseenter",Mi="mouseleave",Ai="dblclick",fa="resize",da="scroll",Di="change",An="dppxchange",Ls="--",Yl=typeof window<"u",gs=Yl?document:null,Hl=Yl?window:null,pa=Yl?navigator:null;let be,Sn;function vs(){let e=devicePixelRatio;be!=e&&(be=e,Sn&&ws(Di,Sn,vs),Sn=matchMedia(`(min-resolution: ${be-.001}dppx) and (max-resolution: ${be+.001}dppx)`),_l(Di,Sn,vs),Hl.dispatchEvent(new CustomEvent(An)))}function kt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function _s(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Pe(e,l,i){e.style[l]=i+"px"}function Gt(e,l,i,n){let o=gs.createElement(e);return l!=null&&kt(o,l),i?.insertBefore(o,n),o}function Ft(e,l){return Gt("div",e,l)}const Li=new WeakMap;function Zt(e,l,i,n,o){let c="translate("+l+"px,"+i+"px)",u=Li.get(e);c!=u&&(e.style.transform=c,Li.set(e,c),l<0||i<0||l>n||i>o?kt(e,vl):_s(e,vl))}const Ci=new WeakMap;function Pi(e,l,i){let n=l+i,o=Ci.get(e);n!=o&&(Ci.set(e,n),e.style.background=l,e.style.borderColor=i)}const Ri=new WeakMap;function zi(e,l,i,n){let o=l+""+i,c=Ri.get(e);o!=c&&(Ri.set(e,o),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Cs={passive:!0},ha={...Cs,capture:!0};function _l(e,l,i,n){l.addEventListener(e,i,n?ha:Cs)}function ws(e,l,i,n){l.removeEventListener(e,i,Cs)}Yl&&vs();function Bt(e,l,i,n){let o;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)o=c?i+n>>1:Et((i+n)/2),l[o]<e?i=o:n=o;return e-l[i]<=l[n]-e?i:n}function fo(e){return(i,n,o)=>{let c=-1,u=-1;for(let d=n;d<=o;d++)if(e(i[d])){c=d;break}for(let d=o;d>=n;d--)if(e(i[d])){u=d;break}return[c,u]}}const po=e=>e!=null,ho=e=>e!=null&&e>0,Cn=fo(po),ma=fo(ho);function ga(e,l,i,n=0,o=!1){let c=o?ma:Cn,u=o?ho:po;[l,i]=c(e,l,i);let d=e[l],p=e[l];if(l>-1)if(n==1)d=e[l],p=e[i];else if(n==-1)d=e[i],p=e[l];else for(let h=l;h<=i;h++){let b=e[h];u(b)&&(b<d?d=b:b>p&&(p=b))}return[d??Te,p??-Te]}function Pn(e,l,i,n){let o=Ni(e),c=Ni(l);e==l&&(o==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?el:mo,d=o==1?Et:Vt,p=c==1?Vt:Et,h=d(u(Ye(e))),b=p(u(Ye(l))),g=Il(i,h),v=Il(i,b);return i==10&&(h<0&&(g=Ee(g,-h)),b<0&&(v=Ee(v,-b))),n||i==2?(e=g*o,l=v*c):(e=wo(e,g),l=Rn(l,v)),[e,l]}function Ps(e,l,i,n){let o=Pn(e,l,i,n);return e==0&&(o[0]=0),l==0&&(o[1]=0),o}const Rs=.1,Fi={mode:3,pad:Rs},an={pad:0,soft:null,mode:0},va={min:an,max:an};function Dn(e,l,i,n){return zn(i)?Vi(e,l,i):(an.pad=i,an.soft=n?0:null,an.mode=n?3:0,Vi(e,l,va))}function ve(e,l){return e??l}function _a(e,l,i){for(l=ve(l,0),i=ve(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Vi(e,l,i){let n=i.min,o=i.max,c=ve(n.pad,0),u=ve(o.pad,0),d=ve(n.hard,-Te),p=ve(o.hard,Te),h=ve(n.soft,Te),b=ve(o.soft,-Te),g=ve(n.mode,0),v=ve(o.mode,0),F=l-e,R=el(F),A=gt(Ye(e),Ye(l)),C=el(A),I=Ye(C-R);(F<1e-24||I>10)&&(F=0,(e==0||l==0)&&(F=1e-24,g==2&&h!=Te&&(c=0),v==2&&b!=-Te&&(u=0)));let S=F||A||1e3,N=el(S),E=Il(10,Et(N)),X=S*(F==0?e==0?.1:1:c),P=Ee(wo(e-X,E/10),24),Y=e>=h&&(g==1||g==3&&P<=h||g==2&&P>=h)?h:Te,Z=gt(d,P<Y&&e>=Y?Y:Ut(Y,P)),ae=S*(F==0?l==0?.1:1:u),K=Ee(Rn(l+ae,E/10),24),k=l<=b&&(v==1||v==3&&K>=b||v==2&&K<=b)?b:-Te,ne=Ut(p,K>k&&l<=k?k:gt(k,K));return Z==ne&&Z==0&&(ne=100),[Z,ne]}const wa=new Intl.NumberFormat(Yl?pa.language:"en-US"),zs=e=>wa.format(e),Mt=Math,En=Mt.PI,Ye=Mt.abs,Et=Mt.floor,Ue=Mt.round,Vt=Mt.ceil,Ut=Mt.min,gt=Mt.max,Il=Mt.pow,Ni=Mt.sign,el=Mt.log10,mo=Mt.log2,ba=(e,l=1)=>Mt.sinh(e)*l,ds=(e,l=1)=>Mt.asinh(e/l),Te=1/0;function Oi(e){return(el((e^e>>31)-(e>>31))|0)+1}function bs(e,l,i){return Ut(gt(e,l),i)}function go(e){return typeof e=="function"}function he(e){return go(e)?e:()=>e}const Sa=()=>{},vo=e=>e,_o=(e,l)=>l,xa=e=>null,Wi=e=>!0,Hi=(e,l)=>e==l,ya=/\.\d*?(?=9{6,}|0{6,})/gm,wl=e=>{if(So(e)||al.has(e))return e;const l=`${e}`,i=l.match(ya);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[o,c]=l.split("e");return+`${wl(o)}e${c}`}return Ee(e,n)};function ml(e,l){return wl(Ee(wl(e/l))*l)}function Rn(e,l){return wl(Vt(wl(e/l))*l)}function wo(e,l){return wl(Et(wl(e/l))*l)}function Ee(e,l=0){if(So(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return Ue(n)/i}const al=new Map;function bo(e){return((""+e).split(".")[1]||"").length}function fn(e,l,i,n){let o=[],c=n.map(bo);for(let u=l;u<i;u++){let d=Ye(u),p=Ee(Il(e,u),d);for(let h=0;h<n.length;h++){let b=e==10?+`${n[h]}e${u}`:n[h]*p,g=(u>=0?0:d)+(u>=c[h]?0:c[h]),v=e==10?b:Ee(b,g);o.push(v),al.set(v,g)}}return o}const un={},Fs=[],Gl=[null,null],rl=Array.isArray,So=Number.isInteger,ka=e=>e===void 0;function Ii(e){return typeof e=="string"}function zn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Ta(e){return e!=null&&typeof e=="object"}const Ea=Object.getPrototypeOf(Uint8Array),xo="__proto__";function Bl(e,l=zn){let i;if(rl(e)){let n=e.find(o=>o!=null);if(rl(n)||l(n)){i=Array(e.length);for(let o=0;o<e.length;o++)i[o]=Bl(e[o],l)}else i=e.slice()}else if(e instanceof Ea)i=e.slice();else if(l(e)){i={};for(let n in e)n!=xo&&(i[n]=Bl(e[n],l))}else i=e;return i}function Ge(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let o in n)o!=xo&&(zn(e[o])?Ge(e[o],Bl(n[o])):e[o]=Bl(n[o]))}return e}const Ma=0,Aa=1,Da=2;function La(e,l,i){for(let n=0,o,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(o=u-1;o>=0&&e[o]==null;)e[o--]=null;for(o=u+1;o<i&&e[o]==null;)e[c=o++]=null}}}function Ca(e,l){if(za(e)){let u=e[0].slice();for(let d=1;d<e.length;d++)u.push(...e[d].slice(1));return Fa(u[0])||(u=Ra(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let p=e[u][0],h=p.length;for(let b=0;b<h;b++)i.add(p[b])}let n=[Array.from(i).sort((u,d)=>u-d)],o=n[0].length,c=new Map;for(let u=0;u<o;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let d=e[u],p=d[0];for(let h=1;h<d.length;h++){let b=d[h],g=Array(o).fill(void 0),v=l?l[u][h]:Aa,F=[];for(let R=0;R<b.length;R++){let A=b[R],C=c.get(p[R]);A===null?v!=Ma&&(g[C]=A,v==Da&&F.push(C)):g[C]=A}La(g,F,o),n.push(g)}}return n}const Pa=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ra(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let o=[];for(let c=0;c<e.length;c++){let u=e[c],d=Array(i);for(let p=0;p<i;p++)d[p]=u[n[p]];o.push(d)}return o}function za(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let o=e[n][0];if(o.length!=i)return!1;if(o!=l){for(let c=0;c<i;c++)if(o[c]!=l[c])return!1}}return!0}function Fa(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,o=i-1;for(;n<=o&&e[n]==null;)n++;for(;o>=n&&e[o]==null;)o--;if(o<=n)return!0;const c=gt(1,Et((o-n+1)/l));for(let u=e[n],d=n+c;d<=o;d+=c){const p=e[d];if(p!=null){if(p<=u)return!1;u=p}}return!0}const yo=["January","February","March","April","May","June","July","August","September","October","November","December"],ko=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function To(e){return e.slice(0,3)}const Va=ko.map(To),Na=yo.map(To),Oa={MMMM:yo,MMM:Na,WWWW:ko,WWW:Va};function nn(e){return(e<10?"0":"")+e}function Wa(e){return(e<10?"00":e<100?"0":"")+e}const Ha={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>nn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>nn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>nn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>nn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>nn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Wa(e.getMilliseconds())};function Vs(e,l){l=l||Oa;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,o;for(;o=n.exec(e);)i.push(o[0][0]=="{"?Ha[o[1]]:o[0]);return c=>{let u="";for(let d=0;d<i.length;d++)u+=typeof i[d]=="string"?i[d]:i[d](c,l);return u}}const Ia=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Ga(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ia?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Eo=e=>e%1==0,Ln=[1,2,2.5,5],Ba=fn(10,-32,0,Ln),Mo=fn(10,0,32,Ln),Ua=Mo.filter(Eo),gl=Ba.concat(Mo),Ns=`
`,Ao="{YYYY}",Gi=Ns+Ao,Do="{M}/{D}",rn=Ns+Do,xn=rn+"/{YY}",Lo="{aa}",Ya="{h}:{mm}",Nl=Ya+Lo,Bi=Ns+Nl,Ui=":{ss}",Se=null;function Co(e){let l=e*1e3,i=l*60,n=i*60,o=n*24,c=o*30,u=o*365,p=(e==1?fn(10,0,3,Ln).filter(Eo):fn(10,-3,0,Ln)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,o,o*2,o*3,o*4,o*5,o*6,o*7,o*8,o*9,o*10,o*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const h=[[u,Ao,Se,Se,Se,Se,Se,Se,1],[o*28,"{MMM}",Gi,Se,Se,Se,Se,Se,1],[o,Do,Gi,Se,Se,Se,Se,Se,1],[n,"{h}"+Lo,xn,Se,rn,Se,Se,Se,1],[i,Nl,xn,Se,rn,Se,Se,Se,1],[l,Ui,xn+" "+Nl,Se,rn+" "+Nl,Se,Bi,Se,1],[e,Ui+".{fff}",xn+" "+Nl,Se,rn+" "+Nl,Se,Bi,Se,1]];function b(g){return(v,F,R,A,C,I)=>{let S=[],N=C>=u,E=C>=c&&C<u,X=g(R),P=Ee(X*e,3),Y=ps(X.getFullYear(),N?0:X.getMonth(),E||N?1:X.getDate()),Z=Ee(Y*e,3);if(E||N){let ae=E?C/c:0,K=N?C/u:0,k=P==Z?P:Ee(ps(Y.getFullYear()+K,Y.getMonth()+ae,1)*e,3),ne=new Date(Ue(k/e)),O=ne.getFullYear(),Q=ne.getMonth();for(let B=0;k<=A;B++){let se=ps(O+K*B,Q+ae*B,1),G=se-g(Ee(se*e,3));k=Ee((+se+G)*e,3),k<=A&&S.push(k)}}else{let ae=C>=o?o:C,K=Et(R)-Et(P),k=Z+K+Rn(P-Z,ae);S.push(k);let ne=g(k),O=ne.getHours()+ne.getMinutes()/i+ne.getSeconds()/n,Q=C/n,B=v.axes[F]._space,se=I/B;for(;k=Ee(k+C,e==1?0:3),!(k>A);)if(Q>1){let G=Et(Ee(O+Q,6))%24,fe=g(k).getHours()-G;fe>1&&(fe=-1),k-=fe*n,O=(O+Q)%24;let me=S[S.length-1];Ee((k-me)/C,3)*se>=.7&&S.push(k)}else S.push(k)}return S}}return[p,h,b]}const[qa,ja,Ka]=Co(1),[Ja,Za,Qa]=Co(.001);fn(2,-53,53,[1]);function Yi(e,l){return e.map(i=>i.map((n,o)=>o==0||o==8||n==null?n:l(o==1||i[8]==0?n:i[1]+n)))}function qi(e,l){return(i,n,o,c,u)=>{let d=l.find(R=>u>=R[0])||l[l.length-1],p,h,b,g,v,F;return n.map(R=>{let A=e(R),C=A.getFullYear(),I=A.getMonth(),S=A.getDate(),N=A.getHours(),E=A.getMinutes(),X=A.getSeconds(),P=C!=p&&d[2]||I!=h&&d[3]||S!=b&&d[4]||N!=g&&d[5]||E!=v&&d[6]||X!=F&&d[7]||d[1];return p=C,h=I,b=S,g=N,v=E,F=X,P(A)})}}function $a(e,l){let i=Vs(l);return(n,o,c,u,d)=>o.map(p=>i(e(p)))}function ps(e,l,i){return new Date(e,l,i)}function ji(e,l){return l(e)}const Xa="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Ki(e,l){return(i,n,o,c)=>c==null?Ls:l(e(n))}function eu(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function tu(e,l){return e.series[l].fill(e,l)}const lu={show:!0,live:!0,isolate:!1,mount:Sa,markers:{show:!0,width:2,stroke:eu,fill:tu,dash:"solid"},idx:null,idxs:null,values:[]};function nu(e,l){let i=e.cursor.points,n=Ft(),o=i.size(e,l);Pe(n,sn,o),Pe(n,on,o);let c=o/-2;Pe(n,"marginLeft",c),Pe(n,"marginTop",c);let u=i.width(e,l,o);return u&&Pe(n,"borderWidth",u),n}function su(e,l){let i=e.series[l].points;return i._fill||i._stroke}function iu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function ou(e,l){return e.series[l].points.size}const hs=[0,0];function ru(e,l,i){return hs[0]=l,hs[1]=i,hs}function yn(e,l,i,n=!0){return o=>{o.button==0&&(!n||o.target==l)&&i(o)}}function ms(e,l,i,n=!0){return o=>{(!n||o.target==l)&&i(o)}}const au={show:!0,x:!0,y:!0,lock:!1,move:ru,points:{one:!1,show:nu,size:ou,width:0,stroke:iu,fill:su},bind:{mousedown:yn,mouseup:yn,click:yn,dblclick:yn,mousemove:ms,mouseleave:ms,mouseenter:ms},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,o)=>n-o,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Po={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Os=Ge({},Po,{filter:_o}),Ro=Ge({},Os,{size:10}),zo=Ge({},Po,{show:!1}),Ws='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Fo="bold "+Ws,Vo=1.5,Ji={show:!0,scale:"x",stroke:Ds,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Fo,side:2,grid:Os,ticks:Ro,border:zo,font:Ws,lineGap:Vo,rotate:0},uu="Value",cu="Time",Zi={show:!0,scale:"x",auto:!1,sorted:1,min:Te,max:-Te,idxs:[]};function fu(e,l,i,n,o){return l.map(c=>c==null?"":zs(c))}function du(e,l,i,n,o,c,u){let d=[],p=al.get(o)||0;i=u?i:Ee(Rn(i,o),p);for(let h=i;h<=n;h=Ee(h+o,p))d.push(Object.is(h,-0)?0:h);return d}function Ss(e,l,i,n,o,c,u){const d=[],p=e.scales[e.axes[l].scale].log,h=p==10?el:mo,b=Et(h(i));o=Il(p,b),p==10&&(o=gl[Bt(o,gl)]);let g=i,v=o*p;p==10&&(v=gl[Bt(v,gl)]);do d.push(g),g=g+o,p==10&&!al.has(g)&&(g=Ee(g,al.get(o))),g>=v&&(o=g,v=o*p,p==10&&(v=gl[Bt(v,gl)]));while(g<=n);return d}function pu(e,l,i,n,o,c,u){let p=e.scales[e.axes[l].scale].asinh,h=n>p?Ss(e,l,gt(p,i),n,o):[p],b=n>=0&&i<=0?[0]:[];return(i<-p?Ss(e,l,gt(p,-n),-i,o):[p]).reverse().map(v=>-v).concat(b,h)}const No=/./,hu=/[12357]/,mu=/[125]/,Qi=/1/,xs=(e,l,i,n)=>e.map((o,c)=>l==4&&o==0||c%n==0&&i.test(o.toExponential()[o<0?1:0])?o:null);function gu(e,l,i,n,o){let c=e.axes[i],u=c.scale,d=e.scales[u],p=e.valToPos,h=c._space,b=p(10,u),g=p(9,u)-b>=h?No:p(7,u)-b>=h?hu:p(5,u)-b>=h?mu:Qi;if(g==Qi){let v=Ye(p(1,u)-b);if(v<h)return xs(l.slice().reverse(),d.distr,g,Vt(h/v)).reverse()}return xs(l,d.distr,g,1)}function vu(e,l,i,n,o){let c=e.axes[i],u=c.scale,d=c._space,p=e.valToPos,h=Ye(p(1,u)-p(2,u));return h<d?xs(l.slice().reverse(),3,No,Vt(d/h)).reverse():l}function _u(e,l,i,n){return n==null?Ls:l==null?"":zs(l)}const $i={show:!0,scale:"y",stroke:Ds,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Fo,side:3,grid:Os,ticks:Ro,border:zo,font:Ws,lineGap:Vo,rotate:0};function wu(e,l){let i=3+(e||1)*2;return Ee(i*l,3)}function bu(e,l){let{scale:i,idxs:n}=e.series[0],o=e._data[0],c=e.valToPos(o[n[0]],i,!0),u=e.valToPos(o[n[1]],i,!0),d=Ye(u-c),p=e.series[l],h=d/(p.points.space*be);return n[1]-n[0]<=h}const Xi={scale:null,auto:!0,sorted:0,min:Te,max:-Te},Oo=(e,l,i,n,o)=>o,eo={show:!0,auto:!0,sorted:0,gaps:Oo,alpha:1,facets:[Ge({},Xi,{scale:"x"}),Ge({},Xi,{scale:"y"})]},to={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Oo,alpha:1,points:{show:bu,filter:null},values:null,min:Te,max:-Te,idxs:[],path:null,clip:null};function Su(e,l,i,n,o){return i/10}const Wo={time:qr,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},xu=Ge({},Wo,{time:!1,ori:1}),lo={};function Ho(e,l){let i=lo[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(o=>o!=n)},pub(n,o,c,u,d,p,h){for(let b=0;b<i.plots.length;b++)i.plots[b]!=o&&i.plots[b].pub(n,o,c,u,d,p,h)}},e!=null&&(lo[e]=i)),i}const Ul=1,ys=2;function bl(e,l,i){const n=e.mode,o=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,d=e.bbox;let p=c[0],h=n==2?c[1]:c[l],b=n==2?u[o.facets[0].scale]:u[e.series[0].scale],g=n==2?u[o.facets[1].scale]:u[o.scale],v=d.left,F=d.top,R=d.width,A=d.height,C=e.valToPosH,I=e.valToPosV;return b.ori==0?i(o,p,h,b,g,C,I,v,F,R,A,Vn,ql,On,Go,Uo):i(o,p,h,b,g,I,C,F,v,A,R,Nn,jl,Gs,Bo,Yo)}function Hs(e,l){let i=0,n=0,o=ve(e.bands,Fs);for(let c=0;c<o.length;c++){let u=o[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function yu(e,l,i,n,o){let c=e.mode,u=e.series[l],d=c==2?u.facets[1].scale:u.scale,p=e.scales[d];return o==-1?p.min:o==1?p.max:p.distr==3?p.dir==1?p.min:p.max:0}function tl(e,l,i,n,o,c){return bl(e,l,(u,d,p,h,b,g,v,F,R,A,C)=>{let I=u.pxRound;const S=h.dir*(h.ori==0?1:-1),N=h.ori==0?ql:jl;let E,X;S==1?(E=i,X=n):(E=n,X=i);let P=I(g(d[E],h,A,F)),Y=I(v(p[E],b,C,R)),Z=I(g(d[X],h,A,F)),ae=I(v(c==1?b.max:b.min,b,C,R)),K=new Path2D(o);return N(K,Z,ae),N(K,P,ae),N(K,P,Y),K})}function Fn(e,l,i,n,o,c){let u=null;if(e.length>0){u=new Path2D;const d=l==0?On:Gs;let p=i;for(let g=0;g<e.length;g++){let v=e[g];if(v[1]>v[0]){let F=v[0]-p;F>0&&d(u,p,n,F,n+c),p=v[1]}}let h=i+o-p,b=10;h>0&&d(u,p,n-b/2,h,n+c+b)}return u}function ku(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function Is(e,l,i,n,o,c,u){let d=[],p=e.length;for(let h=o==1?i:n;h>=i&&h<=n;h+=o)if(l[h]===null){let g=h,v=h;if(o==1)for(;++h<=n&&l[h]===null;)v=h;else for(;--h>=i&&l[h]===null;)v=h;let F=c(e[g]),R=v==g?F:c(e[v]),A=g-o;F=u<=0&&A>=0&&A<p?c(e[A]):F;let I=v+o;R=u>=0&&I>=0&&I<p?c(e[I]):R,R>=F&&d.push([F,R])}return d}function no(e){return e==0?vo:e==1?Ue:l=>ml(l,e)}function Io(e){let l=e==0?Vn:Nn,i=e==0?(o,c,u,d,p,h)=>{o.arcTo(c,u,d,p,h)}:(o,c,u,d,p,h)=>{o.arcTo(u,c,p,d,h)},n=e==0?(o,c,u,d,p)=>{o.rect(c,u,d,p)}:(o,c,u,d,p)=>{o.rect(u,c,p,d)};return(o,c,u,d,p,h=0,b=0)=>{h==0&&b==0?n(o,c,u,d,p):(h=Ut(h,d/2,p/2),b=Ut(b,d/2,p/2),l(o,c+h,u),i(o,c+d,u,c+d,u+p,h),i(o,c+d,u+p,c,u+p,b),i(o,c,u+p,c,u,b),i(o,c,u,c+d,u,h),o.closePath())}}const Vn=(e,l,i)=>{e.moveTo(l,i)},Nn=(e,l,i)=>{e.moveTo(i,l)},ql=(e,l,i)=>{e.lineTo(l,i)},jl=(e,l,i)=>{e.lineTo(i,l)},On=Io(0),Gs=Io(1),Go=(e,l,i,n,o,c)=>{e.arc(l,i,n,o,c)},Bo=(e,l,i,n,o,c)=>{e.arc(i,l,n,o,c)},Uo=(e,l,i,n,o,c,u)=>{e.bezierCurveTo(l,i,n,o,c,u)},Yo=(e,l,i,n,o,c,u)=>{e.bezierCurveTo(i,l,o,n,u,c)};function qo(e){return(l,i,n,o,c)=>bl(l,i,(u,d,p,h,b,g,v,F,R,A,C)=>{let{pxRound:I,points:S}=u,N,E;h.ori==0?(N=Vn,E=Go):(N=Nn,E=Bo);const X=Ee(S.width*be,3);let P=(S.size-S.width)/2*be,Y=Ee(P*2,3),Z=new Path2D,ae=new Path2D,{left:K,top:k,width:ne,height:O}=l.bbox;On(ae,K-Y,k-Y,ne+Y*2,O+Y*2);const Q=B=>{if(p[B]!=null){let se=I(g(d[B],h,A,F)),G=I(v(p[B],b,C,R));N(Z,se+P,G),E(Z,se,G,P,0,En*2)}};if(c)c.forEach(Q);else for(let B=n;B<=o;B++)Q(B);return{stroke:X>0?Z:null,fill:Z,clip:ae,flags:Ul|ys}})}function jo(e){return(l,i,n,o,c,u)=>{n!=o&&(c!=n&&u!=n&&e(l,i,n),c!=o&&u!=o&&e(l,i,o),e(l,i,u))}}const Tu=jo(ql),Eu=jo(jl);function Ko(e){const l=ve(e?.alignGaps,0);return(i,n,o,c)=>bl(i,n,(u,d,p,h,b,g,v,F,R,A,C)=>{[o,c]=Cn(p,o,c);let I=u.pxRound,S=O=>I(g(O,h,A,F)),N=O=>I(v(O,b,C,R)),E,X;h.ori==0?(E=ql,X=Tu):(E=jl,X=Eu);const P=h.dir*(h.ori==0?1:-1),Y={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Ul},Z=Y.stroke;let ae=!1;if(c-o>=A*4){let O=H=>i.posToVal(H,h.key,!0),Q=null,B=null,se,G,Re,de=S(d[P==1?o:c]),fe=S(d[o]),me=S(d[c]),ie=O(P==1?fe+1:me-1);for(let H=P==1?o:c;H>=o&&H<=c;H+=P){let Me=d[H],_e=(P==1?Me<ie:Me>ie)?de:S(Me),ce=p[H];_e==de?ce!=null?(G=ce,Q==null?(E(Z,_e,N(G)),se=Q=B=G):G<Q?Q=G:G>B&&(B=G)):ce===null&&(ae=!0):(Q!=null&&X(Z,de,N(Q),N(B),N(se),N(G)),ce!=null?(G=ce,E(Z,_e,N(G)),Q=B=se=G):(Q=B=null,ce===null&&(ae=!0)),de=_e,ie=O(de+P))}Q!=null&&Q!=B&&Re!=de&&X(Z,de,N(Q),N(B),N(se),N(G))}else for(let O=P==1?o:c;O>=o&&O<=c;O+=P){let Q=p[O];Q===null?ae=!0:Q!=null&&E(Z,S(d[O]),N(Q))}let[k,ne]=Hs(i,n);if(u.fill!=null||k!=0){let O=Y.fill=new Path2D(Z),Q=u.fillTo(i,n,u.min,u.max,k),B=N(Q),se=S(d[o]),G=S(d[c]);P==-1&&([G,se]=[se,G]),E(O,G,B),E(O,se,B)}if(!u.spanGaps){let O=[];ae&&O.push(...Is(d,p,o,c,P,S,l)),Y.gaps=O=u.gaps(i,n,o,c,O),Y.clip=Fn(O,h.ori,F,R,A,C)}return ne!=0&&(Y.band=ne==2?[tl(i,n,o,c,Z,-1),tl(i,n,o,c,Z,1)]:tl(i,n,o,c,Z,ne)),Y})}function Mu(e){const l=ve(e.align,1),i=ve(e.ascDesc,!1),n=ve(e.alignGaps,0),o=ve(e.extend,!1);return(c,u,d,p)=>bl(c,u,(h,b,g,v,F,R,A,C,I,S,N)=>{[d,p]=Cn(g,d,p);let E=h.pxRound,{left:X,width:P}=c.bbox,Y=fe=>E(R(fe,v,S,C)),Z=fe=>E(A(fe,F,N,I)),ae=v.ori==0?ql:jl;const K={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Ul},k=K.stroke,ne=v.dir*(v.ori==0?1:-1);let O=Z(g[ne==1?d:p]),Q=Y(b[ne==1?d:p]),B=Q,se=Q;o&&l==-1&&(se=X,ae(k,se,O)),ae(k,Q,O);for(let fe=ne==1?d:p;fe>=d&&fe<=p;fe+=ne){let me=g[fe];if(me==null)continue;let ie=Y(b[fe]),H=Z(me);l==1?ae(k,ie,O):ae(k,B,H),ae(k,ie,H),O=H,B=ie}let G=B;o&&l==1&&(G=X+P,ae(k,G,O));let[Re,de]=Hs(c,u);if(h.fill!=null||Re!=0){let fe=K.fill=new Path2D(k),me=h.fillTo(c,u,h.min,h.max,Re),ie=Z(me);ae(fe,G,ie),ae(fe,se,ie)}if(!h.spanGaps){let fe=[];fe.push(...Is(b,g,d,p,ne,Y,n));let me=h.width*be/2,ie=i||l==1?me:-me,H=i||l==-1?-me:me;fe.forEach(Me=>{Me[0]+=ie,Me[1]+=H}),K.gaps=fe=h.gaps(c,u,d,p,fe),K.clip=Fn(fe,v.ori,C,I,S,N)}return de!=0&&(K.band=de==2?[tl(c,u,d,p,k,-1),tl(c,u,d,p,k,1)]:tl(c,u,d,p,k,de)),K})}function so(e,l,i,n,o,c,u=Te){if(e.length>1){let d=null;for(let p=0,h=1/0;p<e.length;p++)if(l[p]!==void 0){if(d!=null){let b=Ye(e[p]-e[d]);b<h&&(h=b,u=Ye(i(e[p],n,o,c)-i(e[d],n,o,c)))}d=p}}return u}function Au(e){e=e||un;const l=ve(e.size,[.6,Te,1]),i=e.align||0,n=e.gap||0;let o=e.radius;o=o==null?[0,0]:typeof o=="number"?[o,0]:o;const c=he(o),u=1-l[0],d=ve(l[1],Te),p=ve(l[2],1),h=ve(e.disp,un),b=ve(e.each,F=>{}),{fill:g,stroke:v}=h;return(F,R,A,C)=>bl(F,R,(I,S,N,E,X,P,Y,Z,ae,K,k)=>{let ne=I.pxRound,O=i,Q=n*be,B=d*be,se=p*be,G,Re;E.ori==0?[G,Re]=c(F,R):[Re,G]=c(F,R);const de=E.dir*(E.ori==0?1:-1);let fe=E.ori==0?On:Gs,me=E.ori==0?b:(_,ee,oe,We,wt,bt,Ot)=>{b(_,ee,oe,wt,We,Ot,bt)},ie=ve(F.bands,Fs).find(_=>_.series[0]==R),H=ie!=null?ie.dir:0,Me=I.fillTo(F,R,I.min,I.max,H),He=ne(Y(Me,X,k,ae)),_e,ce,tt,Be=K,ye=ne(I.width*be),ut=!1,ct=null,Ke=null,At=null,Nt=null;g!=null&&(ye==0||v!=null)&&(ut=!0,ct=g.values(F,R,A,C),Ke=new Map,new Set(ct).forEach(_=>{_!=null&&Ke.set(_,new Path2D)}),ye>0&&(At=v.values(F,R,A,C),Nt=new Map,new Set(At).forEach(_=>{_!=null&&Nt.set(_,new Path2D)})));let{x0:Dt,size:$t}=h;if(Dt!=null&&$t!=null){O=1,S=Dt.values(F,R,A,C),Dt.unit==2&&(S=S.map(oe=>F.posToVal(Z+oe*K,E.key,!0)));let _=$t.values(F,R,A,C);$t.unit==2?ce=_[0]*K:ce=P(_[0],E,K,Z)-P(0,E,K,Z),Be=so(S,N,P,E,K,Z,Be),tt=Be-ce+Q}else Be=so(S,N,P,E,K,Z,Be),tt=Be*u+Q,ce=Be-tt;tt<1&&(tt=0),ye>=ce/2&&(ye=0),tt<5&&(ne=vo);let U=tt>0,j=Be-tt-(U?ye:0);ce=ne(bs(j,se,B)),_e=(O==0?ce/2:O==de?0:ce)-O*de*((O==0?Q/2:0)+(U?ye/2:0));const $={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},D=ut?null:new Path2D;let M=null;if(ie!=null)M=F.data[ie.series[1]];else{let{y0:_,y1:ee}=h;_!=null&&ee!=null&&(N=ee.values(F,R,A,C),M=_.values(F,R,A,C))}let q=G*ce,x=Re*ce;for(let _=de==1?A:C;_>=A&&_<=C;_+=de){let ee=N[_];if(ee==null)continue;if(M!=null){let lt=M[_]??0;if(ee-lt==0)continue;He=Y(lt,X,k,ae)}let oe=E.distr!=2||h!=null?S[_]:_,We=P(oe,E,K,Z),wt=Y(ve(ee,Me),X,k,ae),bt=ne(We-_e),Ot=ne(gt(wt,He)),ot=ne(Ut(wt,He)),rt=Ot-ot;if(ee!=null){let lt=ee<0?x:q,ft=ee<0?q:x;ut?(ye>0&&At[_]!=null&&fe(Nt.get(At[_]),bt,ot+Et(ye/2),ce,gt(0,rt-ye),lt,ft),ct[_]!=null&&fe(Ke.get(ct[_]),bt,ot+Et(ye/2),ce,gt(0,rt-ye),lt,ft)):fe(D,bt,ot+Et(ye/2),ce,gt(0,rt-ye),lt,ft),me(F,R,_,bt-ye/2,ot,ce+ye,rt)}}return ye>0?$.stroke=ut?Nt:D:ut||($._fill=I.width==0?I._fill:I._stroke??I._fill,$.width=0),$.fill=ut?Ke:D,$})}function Du(e,l){const i=ve(l?.alignGaps,0);return(n,o,c,u)=>bl(n,o,(d,p,h,b,g,v,F,R,A,C,I)=>{[c,u]=Cn(h,c,u);let S=d.pxRound,N=G=>S(v(G,b,C,R)),E=G=>S(F(G,g,I,A)),X,P,Y;b.ori==0?(X=Vn,Y=ql,P=Uo):(X=Nn,Y=jl,P=Yo);const Z=b.dir*(b.ori==0?1:-1);let ae=N(p[Z==1?c:u]),K=ae,k=[],ne=[];for(let G=Z==1?c:u;G>=c&&G<=u;G+=Z)if(h[G]!=null){let de=p[G],fe=N(de);k.push(K=fe),ne.push(E(h[G]))}const O={stroke:e(k,ne,X,Y,P,S),fill:null,clip:null,band:null,gaps:null,flags:Ul},Q=O.stroke;let[B,se]=Hs(n,o);if(d.fill!=null||B!=0){let G=O.fill=new Path2D(Q),Re=d.fillTo(n,o,d.min,d.max,B),de=E(Re);Y(G,K,de),Y(G,ae,de)}if(!d.spanGaps){let G=[];G.push(...Is(p,h,c,u,Z,N,i)),O.gaps=G=d.gaps(n,o,c,u,G),O.clip=Fn(G,b.ori,R,A,C,I)}return se!=0&&(O.band=se==2?[tl(n,o,c,u,Q,-1),tl(n,o,c,u,Q,1)]:tl(n,o,c,u,Q,se)),O})}function Lu(e){return Du(Cu,e)}function Cu(e,l,i,n,o,c){const u=e.length;if(u<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),u==2)n(d,e[1],l[1]);else{let p=Array(u),h=Array(u-1),b=Array(u-1),g=Array(u-1);for(let v=0;v<u-1;v++)b[v]=l[v+1]-l[v],g[v]=e[v+1]-e[v],h[v]=b[v]/g[v];p[0]=h[0];for(let v=1;v<u-1;v++)h[v]===0||h[v-1]===0||h[v-1]>0!=h[v]>0?p[v]=0:(p[v]=3*(g[v-1]+g[v])/((2*g[v]+g[v-1])/h[v-1]+(g[v]+2*g[v-1])/h[v]),isFinite(p[v])||(p[v]=0));p[u-1]=h[u-2];for(let v=0;v<u-1;v++)o(d,e[v]+g[v]/3,l[v]+p[v]*g[v]/3,e[v+1]-g[v]/3,l[v+1]-p[v+1]*g[v]/3,e[v+1],l[v+1])}return d}const ks=new Set;function io(){for(let e of ks)e.syncRect(!0)}Yl&&(_l(fa,Hl,io),_l(da,Hl,io,!0),_l(An,Hl,()=>{qe.pxRatio=be}));const Pu=Ko(),Ru=qo();function oo(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ts(c,u,l,i))}function zu(e,l){return e.map((i,n)=>n==0?{}:Ge({},l,i))}function Ts(e,l,i,n){return Ge({},l==0?i:n,e)}function Jo(e,l,i){return l==null?Gl:[l,i]}const Fu=Jo;function Vu(e,l,i){return l==null?Gl:Dn(l,i,Rs,!0)}function Zo(e,l,i,n){return l==null?Gl:Pn(l,i,e.scales[n].log,!1)}const Nu=Zo;function Qo(e,l,i,n){return l==null?Gl:Ps(l,i,e.scales[n].log,!1)}const Ou=Qo;function Wu(e,l,i,n,o){let c=gt(Oi(e),Oi(l)),u=l-e,d=Bt(o/n*u,i);do{let p=i[d],h=n*p/u;if(h>=o&&c+(p<5?al.get(p):0)<=17)return[p,h]}while(++d<i.length);return[0,0]}function ro(e){let l,i;return e=e.replace(/(\d+)px/,(n,o)=>(l=Ue((i=+o)*be))+"px"),[e,l,i]}function Hu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ee(l[2]*be,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function qe(e,l,i){const n={mode:ve(e.mode,1)},o=n.mode;function c(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?1-f:f)}function u(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?f:1-f)}function d(t,s,r,a){return s.ori==0?c(t,s,r,a):u(t,s,r,a)}n.valToPosH=c,n.valToPosV=u;let p=!1;n.status=0;const h=n.root=Ft(jr);if(e.id!=null&&(h.id=e.id),kt(h,e.class),e.title){let t=Ft(Zr,h);t.textContent=e.title}const b=Gt("canvas"),g=n.ctx=b.getContext("2d"),v=Ft(Qr,h);_l("click",v,t=>{t.target===R&&(De!=Cl||ze!=Pl)&&st.click(n,t)},!0);const F=n.under=Ft($r,v);v.appendChild(b);const R=n.over=Ft(Xr,v);e=Bl(e);const A=+ve(e.pxAlign,1),C=no(A);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const I=e.ms||.001,S=n.series=o==1?oo(e.series||[],Zi,to,!1):zu(e.series||[null],eo),N=n.axes=oo(e.axes||[],Ji,$i,!0),E=n.scales={},X=n.bands=e.bands||[];X.forEach(t=>{t.fill=he(t.fill||null),t.dir=ve(t.dir,-1)});const P=o==2?S[1].facets[0].scale:S[0].scale,Y={axes:hr,series:ur},Z=(e.drawOrder||["axes","series"]).map(t=>Y[t]);function ae(t){const s=t.distr==3?r=>el(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>ds(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let a=s(r),{_min:f,_max:m}=t,w=m-f;return(a-f)/w}}function K(t){let s=E[t];if(s==null){let r=(e.scales||un)[t]||un;if(r.from!=null){K(r.from);let a=Ge({},E[r.from],r,{key:t});a.valToPct=ae(a),E[t]=a}else{s=E[t]=Ge({},t==P?Wo:xu,r),s.key=t;let a=s.time,f=s.range,m=rl(f);if((t!=P||o==2&&!a)&&(m&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Fi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Fi:{mode:1,hard:f[1],soft:f[1]}},m=!1),!m&&zn(f))){let w=f;f=(y,T,z)=>T==null?Gl:Dn(T,z,w)}s.range=he(f||(a?Fu:t==P?s.distr==3?Nu:s.distr==4?Ou:Jo:s.distr==3?Zo:s.distr==4?Qo:Vu)),s.auto=he(m?!1:s.auto),s.clamp=he(s.clamp||Su),s._min=s._max=null,s.valToPct=ae(s)}}}K("x"),K("y"),o==1&&S.forEach(t=>{K(t.scale)}),N.forEach(t=>{K(t.scale)});for(let t in e.scales)K(t);const k=E[P],ne=k.distr;let O,Q;k.ori==0?(kt(h,Kr),O=c,Q=u):(kt(h,Jr),O=u,Q=c);const B={};for(let t in E){let s=E[t];(s.min!=null||s.max!=null)&&(B[t]={min:s.min,max:s.max},s.min=s.max=null)}const se=e.tzDate||(t=>new Date(Ue(t/I))),G=e.fmtDate||Vs,Re=I==1?Ka(se):Qa(se),de=qi(se,Yi(I==1?ja:Za,G)),fe=Ki(se,ji(Xa,G)),me=[],ie=n.legend=Ge({},lu,e.legend),H=n.cursor=Ge({},au,{drag:{y:o==2}},e.cursor),Me=ie.show,He=H.show,_e=ie.markers;ie.idxs=me,_e.width=he(_e.width),_e.dash=he(_e.dash),_e.stroke=he(_e.stroke),_e.fill=he(_e.fill);let ce,tt,Be,ye=[],ut=[],ct,Ke=!1,At={};if(ie.live){const t=S[1]?S[1].values:null;Ke=t!=null,ct=Ke?t(n,1,0):{_:0};for(let s in ct)At[s]=Ls}if(Me)if(ce=Gt("table",ia,h),Be=Gt("tbody",null,ce),ie.mount(n,ce),Ke){tt=Gt("thead",null,ce,Be);let t=Gt("tr",null,tt);Gt("th",null,t);for(var Nt in ct)Gt("th",xi,t).textContent=Nt}else kt(ce,ra),ie.live&&kt(ce,oa);const Dt={show:!0},$t={show:!1};function U(t,s){if(s==0&&(Ke||!ie.live||o==2))return Gl;let r=[],a=Gt("tr",aa,Be,Be.childNodes[s]);kt(a,t.class),t.show||kt(a,vl);let f=Gt("th",null,a);if(_e.show){let y=Ft(ua,f);if(s>0){let T=_e.width(n,s);T&&(y.style.border=T+"px "+_e.dash(n,s)+" "+_e.stroke(n,s)),y.style.background=_e.fill(n,s)}}let m=Ft(xi,f);t.label instanceof HTMLElement?m.appendChild(t.label):m.textContent=t.label,s>0&&(_e.show||(m.style.color=t.width>0?_e.stroke(n,s):_e.fill(n,s)),$("click",f,y=>{if(H._lock)return;cl(y);let T=S.indexOf(t);if((y.ctrlKey||y.metaKey)!=ie.isolate){let z=S.some((V,W)=>W>0&&W!=T&&V.show);S.forEach((V,W)=>{W>0&&qt(W,z?W==T?Dt:$t:Dt,!0,Ie.setSeries)})}else qt(T,{show:!t.show},!0,Ie.setSeries)},!1),xl&&$(Ei,f,y=>{H._lock||(cl(y),qt(S.indexOf(t),zl,!0,Ie.setSeries))},!1));for(var w in ct){let y=Gt("td",ca,a);y.textContent="--",r.push(y)}return[a,r]}const j=new Map;function $(t,s,r,a=!0){const f=j.get(s)||{},m=H.bind[t](n,s,r,a);m&&(_l(t,s,f[t]=m),j.set(s,f))}function D(t,s,r){const a=j.get(s)||{};for(let f in a)(t==null||f==t)&&(ws(f,s,a[f]),delete a[f]);t==null&&j.delete(s)}let M=0,q=0,x=0,_=0,ee=0,oe=0,We=ee,wt=oe,bt=x,Ot=_,ot=0,rt=0,lt=0,ft=0;n.bbox={};let Lt=!1,dn=!1,Sl=!1,ul=!1,pn=!1,Ct=!1;function Wn(t,s,r){(r||t!=n.width||s!=n.height)&&Bs(t,s),Ml(!1),Sl=!0,dn=!0,Al()}function Bs(t,s){n.width=M=x=t,n.height=q=_=s,ee=oe=0,lr(),nr();let r=n.bbox;ot=r.left=ml(ee*be,.5),rt=r.top=ml(oe*be,.5),lt=r.width=ml(x*be,.5),ft=r.height=ml(_*be,.5)}const Xo=3;function er(){let t=!1,s=0;for(;!t;){s++;let r=dr(s),a=pr(s);t=s==Xo||r&&a,t||(Bs(n.width,n.height),dn=!0)}}function tr({width:t,height:s}){Wn(t,s)}n.setSize=tr;function lr(){let t=!1,s=!1,r=!1,a=!1;N.forEach((f,m)=>{if(f.show&&f._show){let{side:w,_size:y}=f,T=w%2,z=f.label!=null?f.labelSize:0,V=y+z;V>0&&(T?(x-=V,w==3?(ee+=V,a=!0):r=!0):(_-=V,w==0?(oe+=V,t=!0):s=!0))}}),fl[0]=t,fl[1]=r,fl[2]=s,fl[3]=a,x-=ll[1]+ll[3],ee+=ll[3],_-=ll[2]+ll[0],oe+=ll[0]}function nr(){let t=ee+x,s=oe+_,r=ee,a=oe;function f(m,w){switch(m){case 1:return t+=w,t-w;case 2:return s+=w,s-w;case 3:return r-=w,r+w;case 0:return a-=w,a+w}}N.forEach((m,w)=>{if(m.show&&m._show){let y=m.side;m._pos=f(y,m._size),m.label!=null&&(m._lpos=f(y,m.labelSize))}})}if(H.dataIdx==null){let t=H.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=he(t.prox),a=t.bias??=0;H.dataIdx=(f,m,w,y)=>{if(m==0)return w;let T=w,z=r(f,m,w,y)??Te,V=z>=0&&z<Te,W=k.ori==0?x:_,re=H.left,we=l[0],ge=l[m];if(s.has(ge[w])){T=null;let pe=null,te=null,J;if(a==0||a==-1)for(J=w;pe==null&&J-- >0;)s.has(ge[J])||(pe=J);if(a==0||a==1)for(J=w;te==null&&J++<ge.length;)s.has(ge[J])||(te=J);if(pe!=null||te!=null)if(V){let Ce=pe==null?-1/0:O(we[pe],k,W,0),Ve=te==null?1/0:O(we[te],k,W,0),et=re-Ce,ke=Ve-re;et<=ke?et<=z&&(T=pe):ke<=z&&(T=te)}else T=te==null?pe:pe==null?te:w-pe<=te-w?pe:te}else V&&Ye(re-O(we[w],k,W,0))>z&&(T=null);return T}}const cl=t=>{H.event=t};H.idxs=me,H._lock=!1;let at=H.points;at.show=he(at.show),at.size=he(at.size),at.stroke=he(at.stroke),at.width=he(at.width),at.fill=he(at.fill);const Yt=n.focus=Ge({},e.focus||{alpha:.3},H.focus),xl=Yt.prox>=0,yl=xl&&at.one;let Pt=[],kl=[],Tl=[];function Us(t,s){let r=at.show(n,s);if(r instanceof HTMLElement)return kt(r,sa),kt(r,t.class),Zt(r,-10,-10,x,_),R.insertBefore(r,Pt[s]),r}function Ys(t,s){if(o==1||s>0){let r=o==1&&E[t.scale].time,a=t.value;t.value=r?Ii(a)?Ki(se,ji(a,G)):a||fe:a||_u,t.label=t.label||(r?cu:uu)}if(yl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Pu||xa,t.fillTo=he(t.fillTo||yu),t.pxAlign=+ve(t.pxAlign,A),t.pxRound=no(t.pxAlign),t.stroke=he(t.stroke||null),t.fill=he(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=wu(gt(1,t.width),1),a=t.points=Ge({},{size:r,width:gt(1,r*.2),stroke:t.stroke,space:r*2,paths:Ru,_stroke:null,_fill:null},t.points);a.show=he(a.show),a.filter=he(a.filter),a.fill=he(a.fill),a.stroke=he(a.stroke),a.paths=he(a.paths),a.pxAlign=t.pxAlign}if(Me){let r=U(t,s);ye.splice(s,0,r[0]),ut.splice(s,0,r[1]),ie.values.push(null)}if(He){me.splice(s,0,null);let r=null;yl?s==0&&(r=Us(t,s)):s>0&&(r=Us(t,s)),Pt.splice(s,0,r),kl.splice(s,0,0),Tl.splice(s,0,0)}Xe("addSeries",s)}function sr(t,s){s=s??S.length,t=o==1?Ts(t,s,Zi,to):Ts(t,s,{},eo),S.splice(s,0,t),Ys(S[s],s)}n.addSeries=sr;function ir(t){if(S.splice(t,1),Me){ie.values.splice(t,1),ut.splice(t,1);let s=ye.splice(t,1)[0];D(null,s.firstChild),s.remove()}He&&(me.splice(t,1),Pt.splice(t,1)[0].remove(),kl.splice(t,1),Tl.splice(t,1)),Xe("delSeries",t)}n.delSeries=ir;const fl=[!1,!1,!1,!1];function or(t,s){if(t._show=t.show,t.show){let r=t.side%2,a=E[t.scale];a==null&&(t.scale=r?S[1].scale:P,a=E[t.scale]);let f=a.time;t.size=he(t.size),t.space=he(t.space),t.rotate=he(t.rotate),rl(t.incrs)&&t.incrs.forEach(w=>{!al.has(w)&&al.set(w,bo(w))}),t.incrs=he(t.incrs||(a.distr==2?Ua:f?I==1?qa:Ja:gl)),t.splits=he(t.splits||(f&&a.distr==1?Re:a.distr==3?Ss:a.distr==4?pu:du)),t.stroke=he(t.stroke),t.grid.stroke=he(t.grid.stroke),t.ticks.stroke=he(t.ticks.stroke),t.border.stroke=he(t.border.stroke);let m=t.values;t.values=rl(m)&&!rl(m[0])?he(m):f?rl(m)?qi(se,Yi(m,G)):Ii(m)?$a(se,m):m||de:m||fu,t.filter=he(t.filter||(a.distr>=3&&a.log==10?gu:a.distr==3&&a.log==2?vu:_o)),t.font=ro(t.font),t.labelFont=ro(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(fl[s]=!0,t._el=Ft(ea,v))}}function Kl(t,s,r,a){let[f,m,w,y]=r,T=s%2,z=0;return T==0&&(y||m)&&(z=s==0&&!f||s==2&&!w?Ue(Ji.size/3):0),T==1&&(f||w)&&(z=s==1&&!m||s==3&&!y?Ue($i.size/2):0),z}const qs=n.padding=(e.padding||[Kl,Kl,Kl,Kl]).map(t=>he(ve(t,Kl))),ll=n._padding=qs.map((t,s)=>t(n,s,fl,0));let nt,Je=null,Ze=null;const hn=o==1?S[0].idxs:null;let Wt=null,Jl=!1;function js(t,s){if(l=t??[],n.data=n._data=l,o==2){nt=0;for(let r=1;r<S.length;r++)nt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Wt=l[0],nt=Wt.length;let r=l;if(ne==2){r=l.slice();let a=r[0]=Array(nt);for(let f=0;f<nt;f++)a[f]=f}n._data=l=r}if(Ml(!0),Xe("setData"),ne==2&&(Sl=!0),s!==!1){let r=k;r.auto(n,Jl)?Hn():sl(P,r.min,r.max),ul=ul||H.left>=0,Ct=!0,Al()}}n.setData=js;function Hn(){Jl=!0;let t,s;o==1&&(nt>0?(Je=hn[0]=0,Ze=hn[1]=nt-1,t=l[0][Je],s=l[0][Ze],ne==2?(t=Je,s=Ze):t==s&&(ne==3?[t,s]=Pn(t,t,k.log,!1):ne==4?[t,s]=Ps(t,t,k.log,!1):k.time?s=t+Ue(86400/I):[t,s]=Dn(t,s,Rs,!0))):(Je=hn[0]=t=null,Ze=hn[1]=s=null)),sl(P,t,s)}let mn,El,In,Gn,Bn,Un,Yn,qn,jn,vt;function Ks(t,s,r,a,f,m){t??=ki,r??=Fs,a??="butt",f??=ki,m??="round",t!=mn&&(g.strokeStyle=mn=t),f!=El&&(g.fillStyle=El=f),s!=In&&(g.lineWidth=In=s),m!=Bn&&(g.lineJoin=Bn=m),a!=Un&&(g.lineCap=Un=a),r!=Gn&&g.setLineDash(Gn=r)}function Js(t,s,r,a){s!=El&&(g.fillStyle=El=s),t!=Yn&&(g.font=Yn=t),r!=qn&&(g.textAlign=qn=r),a!=jn&&(g.textBaseline=jn=a)}function Kn(t,s,r,a,f=0){if(a.length>0&&t.auto(n,Jl)&&(s==null||s.min==null)){let m=ve(Je,0),w=ve(Ze,a.length-1),y=r.min==null?ga(a,m,w,f,t.distr==3):[r.min,r.max];t.min=Ut(t.min,r.min=y[0]),t.max=gt(t.max,r.max=y[1])}}const Zs={min:null,max:null};function rr(){for(let a in E){let f=E[a];B[a]==null&&(f.min==null||B[P]!=null&&f.auto(n,Jl))&&(B[a]=Zs)}for(let a in E){let f=E[a];B[a]==null&&f.from!=null&&B[f.from]!=null&&(B[a]=Zs)}B[P]!=null&&Ml(!0);let t={};for(let a in B){let f=B[a];if(f!=null){let m=t[a]=Bl(E[a],Ta);if(f.min!=null)Ge(m,f);else if(a!=P||o==2)if(nt==0&&m.from==null){let w=m.range(n,null,null,a);m.min=w[0],m.max=w[1]}else m.min=Te,m.max=-Te}}if(nt>0){S.forEach((a,f)=>{if(o==1){let m=a.scale,w=B[m];if(w==null)return;let y=t[m];if(f==0){let T=y.range(n,y.min,y.max,m);y.min=T[0],y.max=T[1],Je=Bt(y.min,l[0]),Ze=Bt(y.max,l[0]),Ze-Je>1&&(l[0][Je]<y.min&&Je++,l[0][Ze]>y.max&&Ze--),a.min=Wt[Je],a.max=Wt[Ze]}else a.show&&a.auto&&Kn(y,w,a,l[f],a.sorted);a.idxs[0]=Je,a.idxs[1]=Ze}else if(f>0&&a.show&&a.auto){let[m,w]=a.facets,y=m.scale,T=w.scale,[z,V]=l[f],W=t[y],re=t[T];W!=null&&Kn(W,B[y],m,z,m.sorted),re!=null&&Kn(re,B[T],w,V,w.sorted),a.min=w.min,a.max=w.max}});for(let a in t){let f=t[a],m=B[a];if(f.from==null&&(m==null||m.min==null)){let w=f.range(n,f.min==Te?null:f.min,f.max==-Te?null:f.max,a);f.min=w[0],f.max=w[1]}}}for(let a in t){let f=t[a];if(f.from!=null){let m=t[f.from];if(m.min==null)f.min=f.max=null;else{let w=f.range(n,m.min,m.max,a);f.min=w[0],f.max=w[1]}}}let s={},r=!1;for(let a in t){let f=t[a],m=E[a];if(m.min!=f.min||m.max!=f.max){m.min=f.min,m.max=f.max;let w=m.distr;m._min=w==3?el(m.min):w==4?ds(m.min,m.asinh):w==100?m.fwd(m.min):m.min,m._max=w==3?el(m.max):w==4?ds(m.max,m.asinh):w==100?m.fwd(m.max):m.max,s[a]=r=!0}}if(r){S.forEach((a,f)=>{o==2?f>0&&s.y&&(a._paths=null):s[a.scale]&&(a._paths=null)});for(let a in s)Sl=!0,Xe("setScale",a);He&&H.left>=0&&(ul=Ct=!0)}for(let a in B)B[a]=null}function ar(t){let s=bs(Je-1,0,nt-1),r=bs(Ze+1,0,nt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<nt-1;)r++;return[s,r]}function ur(){if(nt>0){let t=S.some(s=>s._focus)&&vt!=Yt.alpha;t&&(g.globalAlpha=vt=Yt.alpha),S.forEach((s,r)=>{if(r>0&&s.show&&(Qs(r,!1),Qs(r,!0),s._paths==null)){let a=vt;vt!=s.alpha&&(g.globalAlpha=vt=s.alpha);let f=o==2?[0,l[r][0].length-1]:ar(l[r]);s._paths=s.paths(n,r,f[0],f[1]),vt!=a&&(g.globalAlpha=vt=a)}}),S.forEach((s,r)=>{if(r>0&&s.show){let a=vt;vt!=s.alpha&&(g.globalAlpha=vt=s.alpha),s._paths!=null&&$s(r,!1);{let f=s._paths!=null?s._paths.gaps:null,m=s.points.show(n,r,Je,Ze,f),w=s.points.filter(n,r,m,f);(m||w)&&(s.points._paths=s.points.paths(n,r,Je,Ze,w),$s(r,!0))}vt!=a&&(g.globalAlpha=vt=a),Xe("drawSeries",r)}}),t&&(g.globalAlpha=vt=1)}}function Qs(t,s){let r=s?S[t].points:S[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function $s(t,s){let r=s?S[t].points:S[t],{stroke:a,fill:f,clip:m,flags:w,_stroke:y=r._stroke,_fill:T=r._fill,_width:z=r.width}=r._paths;z=Ee(z*be,3);let V=null,W=z%2/2;s&&T==null&&(T=z>0?"#fff":y);let re=r.pxAlign==1&&W>0;if(re&&g.translate(W,W),!s){let we=ot-z/2,ge=rt-z/2,pe=lt+z,te=ft+z;V=new Path2D,V.rect(we,ge,pe,te)}s?Jn(y,z,r.dash,r.cap,T,a,f,w,m):cr(t,y,z,r.dash,r.cap,T,a,f,w,V,m),re&&g.translate(-W,-W)}function cr(t,s,r,a,f,m,w,y,T,z,V){let W=!1;T!=0&&X.forEach((re,we)=>{if(re.series[0]==t){let ge=S[re.series[1]],pe=l[re.series[1]],te=(ge._paths||un).band;rl(te)&&(te=re.dir==1?te[0]:te[1]);let J,Ce=null;ge.show&&te&&_a(pe,Je,Ze)?(Ce=re.fill(n,we)||m,J=ge._paths.clip):te=null,Jn(s,r,a,f,Ce,w,y,T,z,V,J,te),W=!0}}),W||Jn(s,r,a,f,m,w,y,T,z,V)}const Xs=Ul|ys;function Jn(t,s,r,a,f,m,w,y,T,z,V,W){Ks(t,s,r,a,f),(T||z||W)&&(g.save(),T&&g.clip(T),z&&g.clip(z)),W?(y&Xs)==Xs?(g.clip(W),V&&g.clip(V),vn(f,w),gn(t,m,s)):y&ys?(vn(f,w),g.clip(W),gn(t,m,s)):y&Ul&&(g.save(),g.clip(W),V&&g.clip(V),vn(f,w),g.restore(),gn(t,m,s)):(vn(f,w),gn(t,m,s)),(T||z||W)&&g.restore()}function gn(t,s,r){r>0&&(s instanceof Map?s.forEach((a,f)=>{g.strokeStyle=mn=f,g.stroke(a)}):s!=null&&t&&g.stroke(s))}function vn(t,s){s instanceof Map?s.forEach((r,a)=>{g.fillStyle=El=a,g.fill(r)}):s!=null&&t&&g.fill(s)}function fr(t,s,r,a){let f=N[t],m;if(a<=0)m=[0,0];else{let w=f._space=f.space(n,t,s,r,a),y=f._incrs=f.incrs(n,t,s,r,a,w);m=Wu(s,r,y,a,w)}return f._found=m}function Zn(t,s,r,a,f,m,w,y,T,z){let V=w%2/2;A==1&&g.translate(V,V),Ks(y,w,T,z,y),g.beginPath();let W,re,we,ge,pe=f+(a==0||a==3?-m:m);r==0?(re=f,ge=pe):(W=f,we=pe);for(let te=0;te<t.length;te++)s[te]!=null&&(r==0?W=we=t[te]:re=ge=t[te],g.moveTo(W,re),g.lineTo(we,ge));g.stroke(),A==1&&g.translate(-V,-V)}function dr(t){let s=!0;return N.forEach((r,a)=>{if(!r.show)return;let f=E[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Ml(!1));return}else r._show||(s=!1,r._show=!0,Ml(!1));let m=r.side,w=m%2,{min:y,max:T}=f,[z,V]=fr(a,y,T,w==0?x:_);if(V==0)return;let W=f.distr==2,re=r._splits=r.splits(n,a,y,T,z,V,W),we=f.distr==2?re.map(J=>Wt[J]):re,ge=f.distr==2?Wt[re[1]]-Wt[re[0]]:z,pe=r._values=r.values(n,r.filter(n,we,a,V,ge),a,V,ge);r._rotate=m==2?r.rotate(n,pe,a,V):0;let te=r._size;r._size=Vt(r.size(n,pe,a,t)),te!=null&&r._size!=te&&(s=!1)}),s}function pr(t){let s=!0;return qs.forEach((r,a)=>{let f=r(n,a,fl,t);f!=ll[a]&&(s=!1),ll[a]=f}),s}function hr(){for(let t=0;t<N.length;t++){let s=N[t];if(!s.show||!s._show)continue;let r=s.side,a=r%2,f,m,w=s.stroke(n,t),y=r==0||r==3?-1:1,[T,z]=s._found;if(s.label!=null){let pt=s.labelGap*y,yt=Ue((s._lpos+pt)*be);Js(s.labelFont[0],w,"center",r==2?ln:yi),g.save(),a==1?(f=m=0,g.translate(yt,Ue(rt+ft/2)),g.rotate((r==3?-En:En)/2)):(f=Ue(ot+lt/2),m=yt);let hl=go(s.label)?s.label(n,t,T,z):s.label;g.fillText(hl,f,m),g.restore()}if(z==0)continue;let V=E[s.scale],W=a==0?lt:ft,re=a==0?ot:rt,we=s._splits,ge=V.distr==2?we.map(pt=>Wt[pt]):we,pe=V.distr==2?Wt[we[1]]-Wt[we[0]]:T,te=s.ticks,J=s.border,Ce=te.show?te.size:0,Ve=Ue(Ce*be),et=Ue((s.alignTo==2?s._size-Ce-s.gap:s.gap)*be),ke=s._rotate*-En/180,Ne=C(s._pos*be),St=(Ve+et)*y,dt=Ne+St;m=a==0?dt:0,f=a==1?dt:0;let Rt=s.font[0],Ht=s.align==1?Vl:s.align==2?us:ke>0?Vl:ke<0?us:a==0?"center":r==3?us:Vl,Kt=ke||a==1?"middle":r==2?ln:yi;Js(Rt,w,Ht,Kt);let xt=s.font[1]*s.lineGap,zt=we.map(pt=>C(d(pt,V,W,re))),It=s._values;for(let pt=0;pt<It.length;pt++){let yt=It[pt];if(yt!=null){a==0?f=zt[pt]:m=zt[pt],yt=""+yt;let hl=yt.indexOf(`
`)==-1?[yt]:yt.split(/\n/gm);for(let ht=0;ht<hl.length;ht++){let _i=hl[ht];ke?(g.save(),g.translate(f,m+ht*xt),g.rotate(ke),g.fillText(_i,0,0),g.restore()):g.fillText(_i,f,m+ht*xt)}}}te.show&&Zn(zt,te.filter(n,ge,t,z,pe),a,r,Ne,Ve,Ee(te.width*be,3),te.stroke(n,t),te.dash,te.cap);let Jt=s.grid;Jt.show&&Zn(zt,Jt.filter(n,ge,t,z,pe),a,a==0?2:1,a==0?rt:ot,a==0?ft:lt,Ee(Jt.width*be,3),Jt.stroke(n,t),Jt.dash,Jt.cap),J.show&&Zn([Ne],[1],a==0?1:0,a==0?1:2,a==1?rt:ot,a==1?ft:lt,Ee(J.width*be,3),J.stroke(n,t),J.dash,J.cap)}Xe("drawAxes")}function Ml(t){S.forEach((s,r)=>{r>0&&(s._paths=null,t&&(o==1?(s.min=null,s.max=null):s.facets.forEach(a=>{a.min=null,a.max=null})))})}let _n=!1,Qn=!1,Zl=[];function mr(){Qn=!1;for(let t=0;t<Zl.length;t++)Xe(...Zl[t]);Zl.length=0}function Al(){_n||(Pa(ei),_n=!0)}function gr(t,s=!1){_n=!0,Qn=s,t(n),ei(),s&&Zl.length>0&&queueMicrotask(mr)}n.batch=gr;function ei(){if(Lt&&(rr(),Lt=!1),Sl&&(er(),Sl=!1),dn){if(Pe(F,Vl,ee),Pe(F,ln,oe),Pe(F,sn,x),Pe(F,on,_),Pe(R,Vl,ee),Pe(R,ln,oe),Pe(R,sn,x),Pe(R,on,_),Pe(v,sn,M),Pe(v,on,q),b.width=Ue(M*be),b.height=Ue(q*be),N.forEach(({_el:t,_show:s,_size:r,_pos:a,side:f})=>{if(t!=null)if(s){let m=f===3||f===0?r:0,w=f%2==1;Pe(t,w?"left":"top",a-m),Pe(t,w?"width":"height",r),Pe(t,w?"top":"left",w?oe:ee),Pe(t,w?"height":"width",w?_:x),_s(t,vl)}else kt(t,vl)}),mn=El=In=Bn=Un=Yn=qn=jn=Gn=null,vt=1,Xl(!0),ee!=We||oe!=wt||x!=bt||_!=Ot){Ml(!1);let t=x/bt,s=_/Ot;if(He&&!ul&&H.left>=0){H.left*=t,H.top*=s,Dl&&Zt(Dl,Ue(H.left),0,x,_),Ll&&Zt(Ll,0,Ue(H.top),x,_);for(let r=0;r<Pt.length;r++){let a=Pt[r];a!=null&&(kl[r]*=t,Tl[r]*=s,Zt(a,Vt(kl[r]),Vt(Tl[r]),x,_))}}if(Le.show&&!pn&&Le.left>=0&&Le.width>0){Le.left*=t,Le.width*=t,Le.top*=s,Le.height*=s;for(let r in ns)Pe(Rl,r,Le[r])}We=ee,wt=oe,bt=x,Ot=_}Xe("setSize"),dn=!1}M>0&&q>0&&(g.clearRect(0,0,b.width,b.height),Xe("drawClear"),Z.forEach(t=>t()),Xe("draw")),Le.show&&pn&&(wn(Le),pn=!1),He&&ul&&(pl(null,!0,!1),ul=!1),ie.show&&ie.live&&Ct&&(ts(),Ct=!1),p||(p=!0,n.status=1,Xe("ready")),Jl=!1,_n=!1}n.redraw=(t,s)=>{Sl=s||!1,t!==!1?sl(P,k.min,k.max):Al()};function $n(t,s){let r=E[t];if(r.from==null){if(nt==0){let a=r.range(n,s.min,s.max,t);s.min=a[0],s.max=a[1]}if(s.min>s.max){let a=s.min;s.min=s.max,s.max=a}if(nt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==P&&r.distr==2&&nt>0&&(s.min=Bt(s.min,l[0]),s.max=Bt(s.max,l[0]),s.min==s.max&&s.max++),B[t]=s,Lt=!0,Al()}}n.setScale=$n;let Xn,es,Dl,Ll,ti,li,Cl,Pl,ni,si,De,ze,nl=!1;const st=H.drag;let Qe=st.x,$e=st.y;He&&(H.x&&(Xn=Ft(la,R)),H.y&&(es=Ft(na,R)),k.ori==0?(Dl=Xn,Ll=es):(Dl=es,Ll=Xn),De=H.left,ze=H.top);const Le=n.select=Ge({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Rl=Le.show?Ft(ta,Le.over?R:F):null;function wn(t,s){if(Le.show){for(let r in t)Le[r]=t[r],r in ns&&Pe(Rl,r,t[r]);s!==!1&&Xe("setSelect")}}n.setSelect=wn;function vr(t){if(S[t].show)Me&&_s(ye[t],vl);else if(Me&&kt(ye[t],vl),He){let r=yl?Pt[0]:Pt[t];r!=null&&Zt(r,-10,-10,x,_)}}function sl(t,s,r){$n(t,{min:s,max:r})}function qt(t,s,r,a){s.focus!=null&&xr(t),s.show!=null&&S.forEach((f,m)=>{m>0&&(t==m||t==null)&&(f.show=s.show,vr(m),o==2?(sl(f.facets[0].scale,null,null),sl(f.facets[1].scale,null,null)):sl(f.scale,null,null),Al())}),r!==!1&&Xe("setSeries",t,s),a&&en("setSeries",n,t,s)}n.setSeries=qt;function _r(t,s){Ge(X[t],s)}function wr(t,s){t.fill=he(t.fill||null),t.dir=ve(t.dir,-1),s=s??X.length,X.splice(s,0,t)}function br(t){t==null?X.length=0:X.splice(t,1)}n.addBand=wr,n.setBand=_r,n.delBand=br;function Sr(t,s){S[t].alpha=s,He&&Pt[t]!=null&&(Pt[t].style.opacity=s),Me&&ye[t]&&(ye[t].style.opacity=s)}let Xt,il,dl;const zl={focus:!0};function xr(t){if(t!=dl){let s=t==null,r=Yt.alpha!=1;S.forEach((a,f)=>{if(o==1||f>0){let m=s||f==0||f==t;a._focus=s?null:m,r&&Sr(f,m?1:Yt.alpha)}}),dl=t,r&&Al()}}Me&&xl&&$(Mi,ce,t=>{H._lock||(cl(t),dl!=null&&qt(null,zl,!0,Ie.setSeries))});function jt(t,s,r){let a=E[s];r&&(t=t/be-(a.ori==1?oe:ee));let f=x;a.ori==1&&(f=_,t=f-t),a.dir==-1&&(t=f-t);let m=a._min,w=a._max,y=t/f,T=m+(w-m)*y,z=a.distr;return z==3?Il(10,T):z==4?ba(T,a.asinh):z==100?a.bwd(T):T}function yr(t,s){let r=jt(t,P,s);return Bt(r,l[0],Je,Ze)}n.valToIdx=t=>Bt(t,l[0]),n.posToIdx=yr,n.posToVal=jt,n.valToPos=(t,s,r)=>E[s].ori==0?c(t,E[s],r?lt:x,r?ot:0):u(t,E[s],r?ft:_,r?rt:0),n.setCursor=(t,s,r)=>{De=t.left,ze=t.top,pl(null,s,r)};function ii(t,s){Pe(Rl,Vl,Le.left=t),Pe(Rl,sn,Le.width=s)}function oi(t,s){Pe(Rl,ln,Le.top=t),Pe(Rl,on,Le.height=s)}let Ql=k.ori==0?ii:oi,$l=k.ori==1?ii:oi;function kr(){if(Me&&ie.live)for(let t=o==2?1:0;t<S.length;t++){if(t==0&&Ke)continue;let s=ie.values[t],r=0;for(let a in s)ut[t][r++].firstChild.nodeValue=s[a]}}function ts(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,a)=>{me[a]=r}):ka(t.idx)||me.fill(t.idx),ie.idx=me[0]),Me&&ie.live){for(let r=0;r<S.length;r++)(r>0||o==1&&!Ke)&&Tr(r,me[r]);kr()}Ct=!1,s!==!1&&Xe("setLegend")}n.setLegend=ts;function Tr(t,s){let r=S[t],a=t==0&&ne==2?Wt:l[t],f;Ke?f=r.values(n,t,s)??At:(f=r.value(n,s==null?null:a[s],t,s),f=f==null?At:{_:f}),ie.values[t]=f}function pl(t,s,r){ni=De,si=ze,[De,ze]=H.move(n,De,ze),H.left=De,H.top=ze,He&&(Dl&&Zt(Dl,Ue(De),0,x,_),Ll&&Zt(Ll,0,Ue(ze),x,_));let a,f=Je>Ze;Xt=Te,il=null;let m=k.ori==0?x:_,w=k.ori==1?x:_;if(De<0||nt==0||f){a=H.idx=null;for(let y=0;y<S.length;y++){let T=Pt[y];T!=null&&Zt(T,-10,-10,x,_)}xl&&qt(null,zl,!0,t==null&&Ie.setSeries),ie.live&&(me.fill(a),Ct=!0)}else{let y,T,z;o==1&&(y=k.ori==0?De:ze,T=jt(y,P),a=H.idx=Bt(T,l[0],Je,Ze),z=O(l[0][a],k,m,0));let V=-10,W=-10,re=0,we=0,ge=!0,pe="",te="";for(let J=o==2?1:0;J<S.length;J++){let Ce=S[J],Ve=me[J],et=Ve==null?null:o==1?l[J][Ve]:l[J][1][Ve],ke=H.dataIdx(n,J,a,T),Ne=ke==null?null:o==1?l[J][ke]:l[J][1][ke];if(Ct=Ct||Ne!=et||ke!=Ve,me[J]=ke,J>0&&Ce.show){let St=ke==null?-10:ke==a?z:O(o==1?l[0][ke]:l[J][0][ke],k,m,0),dt=Ne==null?-10:Q(Ne,o==1?E[Ce.scale]:E[Ce.facets[1].scale],w,0);if(xl&&Ne!=null){let Rt=k.ori==1?De:ze,Ht=Ye(Yt.dist(n,J,ke,dt,Rt));if(Ht<Xt){let Kt=Yt.bias;if(Kt!=0){let xt=jt(Rt,Ce.scale),zt=Ne>=0?1:-1,It=xt>=0?1:-1;It==zt&&(It==1?Kt==1?Ne>=xt:Ne<=xt:Kt==1?Ne<=xt:Ne>=xt)&&(Xt=Ht,il=J)}else Xt=Ht,il=J}}if(Ct||yl){let Rt,Ht;k.ori==0?(Rt=St,Ht=dt):(Rt=dt,Ht=St);let Kt,xt,zt,It,Jt,pt,yt=!0,hl=at.bbox;if(hl!=null){yt=!1;let ht=hl(n,J);zt=ht.left,It=ht.top,Kt=ht.width,xt=ht.height}else zt=Rt,It=Ht,Kt=xt=at.size(n,J);if(pt=at.fill(n,J),Jt=at.stroke(n,J),yl)J==il&&Xt<=Yt.prox&&(V=zt,W=It,re=Kt,we=xt,ge=yt,pe=pt,te=Jt);else{let ht=Pt[J];ht!=null&&(kl[J]=zt,Tl[J]=It,zi(ht,Kt,xt,yt),Pi(ht,pt,Jt),Zt(ht,Vt(zt),Vt(It),x,_))}}}}if(yl){let J=Yt.prox,Ce=dl==null?Xt<=J:Xt>J||il!=dl;if(Ct||Ce){let Ve=Pt[0];Ve!=null&&(kl[0]=V,Tl[0]=W,zi(Ve,re,we,ge),Pi(Ve,pe,te),Zt(Ve,Vt(V),Vt(W),x,_))}}}if(Le.show&&nl)if(t!=null){let[y,T]=Ie.scales,[z,V]=Ie.match,[W,re]=t.cursor.sync.scales,we=t.cursor.drag;if(Qe=we._x,$e=we._y,Qe||$e){let{left:ge,top:pe,width:te,height:J}=t.select,Ce=t.scales[W].ori,Ve=t.posToVal,et,ke,Ne,St,dt,Rt=y!=null&&z(y,W),Ht=T!=null&&V(T,re);Rt&&Qe?(Ce==0?(et=ge,ke=te):(et=pe,ke=J),Ne=E[y],St=O(Ve(et,W),Ne,m,0),dt=O(Ve(et+ke,W),Ne,m,0),Ql(Ut(St,dt),Ye(dt-St))):Ql(0,m),Ht&&$e?(Ce==1?(et=ge,ke=te):(et=pe,ke=J),Ne=E[T],St=Q(Ve(et,re),Ne,w,0),dt=Q(Ve(et+ke,re),Ne,w,0),$l(Ut(St,dt),Ye(dt-St))):$l(0,w)}else ss()}else{let y=Ye(ni-ti),T=Ye(si-li);if(k.ori==1){let re=y;y=T,T=re}Qe=st.x&&y>=st.dist,$e=st.y&&T>=st.dist;let z=st.uni;z!=null?Qe&&$e&&(Qe=y>=z,$e=T>=z,!Qe&&!$e&&(T>y?$e=!0:Qe=!0)):st.x&&st.y&&(Qe||$e)&&(Qe=$e=!0);let V,W;Qe&&(k.ori==0?(V=Cl,W=De):(V=Pl,W=ze),Ql(Ut(V,W),Ye(W-V)),$e||$l(0,w)),$e&&(k.ori==1?(V=Cl,W=De):(V=Pl,W=ze),$l(Ut(V,W),Ye(W-V)),Qe||Ql(0,m)),!Qe&&!$e&&(Ql(0,0),$l(0,0))}if(st._x=Qe,st._y=$e,t==null){if(r){if(vi!=null){let[y,T]=Ie.scales;Ie.values[0]=y!=null?jt(k.ori==0?De:ze,y):null,Ie.values[1]=T!=null?jt(k.ori==1?De:ze,T):null}en(cs,n,De,ze,x,_,a)}if(xl){let y=r&&Ie.setSeries,T=Yt.prox;dl==null?Xt<=T&&qt(il,zl,!0,y):Xt>T?qt(null,zl,!0,y):il!=dl&&qt(il,zl,!0,y)}}Ct&&(ie.idx=a,ts()),s!==!1&&Xe("setCursor")}let ol=null;Object.defineProperty(n,"rect",{get(){return ol==null&&Xl(!1),ol}});function Xl(t=!1){t?ol=null:(ol=R.getBoundingClientRect(),Xe("syncRect",ol))}function ri(t,s,r,a,f,m,w){H._lock||nl&&t!=null&&t.movementX==0&&t.movementY==0||(ls(t,s,r,a,f,m,w,!1,t!=null),t!=null?pl(null,!0,!0):pl(s,!0,!1))}function ls(t,s,r,a,f,m,w,y,T){if(ol==null&&Xl(!1),cl(t),t!=null)r=t.clientX-ol.left,a=t.clientY-ol.top;else{if(r<0||a<0){De=-10,ze=-10;return}let[z,V]=Ie.scales,W=s.cursor.sync,[re,we]=W.values,[ge,pe]=W.scales,[te,J]=Ie.match,Ce=s.axes[0].side%2==1,Ve=k.ori==0?x:_,et=k.ori==1?x:_,ke=Ce?m:f,Ne=Ce?f:m,St=Ce?a:r,dt=Ce?r:a;if(ge!=null?r=te(z,ge)?d(re,E[z],Ve,0):-10:r=Ve*(St/ke),pe!=null?a=J(V,pe)?d(we,E[V],et,0):-10:a=et*(dt/Ne),k.ori==1){let Rt=r;r=a,a=Rt}}T&&(s==null||s.cursor.event.type==cs)&&((r<=1||r>=x-1)&&(r=ml(r,x)),(a<=1||a>=_-1)&&(a=ml(a,_))),y?(ti=r,li=a,[Cl,Pl]=H.move(n,r,a)):(De=r,ze=a)}const ns={width:0,height:0,left:0,top:0};function ss(){wn(ns,!1)}let ai,ui,ci,fi;function di(t,s,r,a,f,m,w){nl=!0,Qe=$e=st._x=st._y=!1,ls(t,s,r,a,f,m,w,!0,!1),t!=null&&($(fs,gs,pi,!1),en(Ti,n,Cl,Pl,x,_,null));let{left:y,top:T,width:z,height:V}=Le;ai=y,ui=T,ci=z,fi=V}function pi(t,s,r,a,f,m,w){nl=st._x=st._y=!1,ls(t,s,r,a,f,m,w,!1,!0);let{left:y,top:T,width:z,height:V}=Le,W=z>0||V>0,re=ai!=y||ui!=T||ci!=z||fi!=V;if(W&&re&&wn(Le),st.setScale&&W&&re){let we=y,ge=z,pe=T,te=V;if(k.ori==1&&(we=T,ge=V,pe=y,te=z),Qe&&sl(P,jt(we,P),jt(we+ge,P)),$e)for(let J in E){let Ce=E[J];J!=P&&Ce.from==null&&Ce.min!=Te&&sl(J,jt(pe+te,J),jt(pe,J))}ss()}else H.lock&&(H._lock=!H._lock,pl(s,!0,t!=null));t!=null&&(D(fs,gs),en(fs,n,De,ze,x,_,null))}function Er(t,s,r,a,f,m,w){if(H._lock)return;cl(t);let y=nl;if(nl){let T=!0,z=!0,V=10,W,re;k.ori==0?(W=Qe,re=$e):(W=$e,re=Qe),W&&re&&(T=De<=V||De>=x-V,z=ze<=V||ze>=_-V),W&&T&&(De=De<Cl?0:x),re&&z&&(ze=ze<Pl?0:_),pl(null,!0,!0),nl=!1}De=-10,ze=-10,me.fill(null),pl(null,!0,!0),y&&(nl=y)}function hi(t,s,r,a,f,m,w){H._lock||(cl(t),Hn(),ss(),t!=null&&en(Ai,n,De,ze,x,_,null))}function mi(){N.forEach(Hu),Wn(n.width,n.height,!0)}_l(An,Hl,mi);const Fl={};Fl.mousedown=di,Fl.mousemove=ri,Fl.mouseup=pi,Fl.dblclick=hi,Fl.setSeries=(t,s,r,a)=>{let f=Ie.match[2];r=f(n,s,r),r!=-1&&qt(r,a,!0,!1)},He&&($(Ti,R,di),$(cs,R,ri),$(Ei,R,t=>{cl(t),Xl(!1)}),$(Mi,R,Er),$(Ai,R,hi),ks.add(n),n.syncRect=Xl);const bn=n.hooks=e.hooks||{};function Xe(t,s,r){Qn?Zl.push([t,s,r]):t in bn&&bn[t].forEach(a=>{a.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)bn[s]=(bn[s]||[]).concat(t.hooks[s])});const gi=(t,s,r)=>r,Ie=Ge({key:null,setSeries:!1,filters:{pub:Wi,sub:Wi},scales:[P,S[1]?S[1].scale:null],match:[Hi,Hi,gi],values:[null,null]},H.sync);Ie.match.length==2&&Ie.match.push(gi),H.sync=Ie;const vi=Ie.key,is=Ho(vi);function en(t,s,r,a,f,m,w){Ie.filters.pub(t,s,r,a,f,m,w)&&is.pub(t,s,r,a,f,m,w)}is.sub(n);function Mr(t,s,r,a,f,m,w){Ie.filters.sub(t,s,r,a,f,m,w)&&Fl[t](null,s,r,a,f,m,w)}n.pub=Mr;function Ar(){is.unsub(n),ks.delete(n),j.clear(),ws(An,Hl,mi),h.remove(),ce?.remove(),Xe("destroy")}n.destroy=Ar;function os(){Xe("init",e,l),js(l||e.data,!1),B[P]?$n(P,B[P]):Hn(),pn=Le.show&&(Le.width>0||Le.height>0),ul=Ct=!0,Wn(e.width,e.height)}return S.forEach(Ys),N.forEach(or),i?i instanceof HTMLElement?(i.appendChild(h),os()):i(n,os):os(),n}qe.assign=Ge;qe.fmtNum=zs;qe.rangeNum=Dn;qe.rangeLog=Pn;qe.rangeAsinh=Ps;qe.orient=bl;qe.pxRatio=be;qe.join=Ca;qe.fmtDate=Vs,qe.tzDate=Ga;qe.sync=Ho;{qe.addGap=ku,qe.clipGaps=Fn;let e=qe.paths={points:qo};e.linear=Ko,e.stepped=Mu,e.bars=Au,e.spline=Lu}const $o="/api",Iu=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Gu(e,l=24){const i=await fetch(`${$o}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Bu(e=24){const l=await fetch(`${$o}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Uu=Oe('<button type="button"> </button>'),Yu=Oe("<option> </option>"),qu=Oe('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),ju=Oe('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),Ku=Oe('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),Ju=Oe('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div></div>');function Zu(e,l){Ms(l,!0);const i="tiltui_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let o=Qt(()=>rs.config.smoothing_enabled),c=Qt(()=>rs.config.smoothing_samples),u=it("UTC"),d=it(!1),p=it(0),h=it(3),b=Qt(()=>rs.config.temp_units==="C"),g,v=null,F=it(!0),R=it(null),A=it(24),C=it(wi([])),I=it(wi([]));const S={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},N="#facc15",E="rgba(250, 204, 21, 0.3)",X="#71717a",P="#a1a1aa",Y="rgba(255, 255, 255, 0.04)",Z="#22d3ee";function ae(U,j,$){const D=new Date(U*1e3);try{return $?D.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:j}):D.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:j})}catch(M){return console.warn("Invalid timezone:",j,M),$?D.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):D.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function K(U,j,$){const D=N,M=S[l.tiltColor]||P;return{width:U,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(q,x,_)=>{const ee=(_-x)*.1||.005;return[x-ee,_+ee]}},temp:{auto:!0,range:(q,x,_)=>{const ee=_-x,oe=10;if(ee<oe){const wt=(_+x)/2;return[wt-oe/2,wt+oe/2]}const We=ee*.1;return[x-We,_+We]}}},axes:[{stroke:X,grid:{stroke:Y,width:1},ticks:{stroke:Y,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(q,x)=>x.map(_=>ae(_,$,L(A)<=24))},{scale:"sg",stroke:D,grid:{stroke:Y,width:1},ticks:{stroke:Y,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(q,x)=>x.map(_=>_.toFixed(3)),side:3},{scale:"temp",stroke:M,grid:{show:!1},ticks:{stroke:Y,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(q,x)=>x.map(_=>_.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:D,width:2,fill:(q,x)=>{const _=q.ctx.createLinearGradient(0,q.bbox.top,0,q.bbox.top+q.bbox.height);return _.addColorStop(0,E),_.addColorStop(1,"transparent"),_},points:{show:!1},paths:qe.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:M,width:1.5,dash:[4,4],points:{show:!1},paths:qe.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:Z,width:1.5,dash:[2,4],points:{show:!1},paths:qe.paths.spline?.()}]}}function k(U,j){if(j<=1)return U;const $=[];for(let D=0;D<U.length;D++){const M=[],q=Math.floor(j/2);for(let x=Math.max(0,D-q);x<=Math.min(U.length-1,D+q);x++){const _=U[x];_!==null&&M.push(_)}M.length>0?$.push(M.reduce((x,_)=>x+_,0)/M.length):$.push(null)}return $}function ne(U,j,$,D,M){if(U.length<=M)return[U,j,$,D];const q=Math.ceil(U.length/M),x=[],_=[],ee=[],oe=[];for(let We=0;We<U.length;We+=q){const wt=Math.min(We+q,U.length);let bt=0,Ot=0,ot=0,rt=0,lt=0,ft=0;for(let Lt=We;Lt<wt;Lt++)j[Lt]!==null&&(bt+=j[Lt],Ot++),$[Lt]!==null&&(ot+=$[Lt],rt++),D[Lt]!==null&&(lt+=D[Lt],ft++);x.push(U[Math.floor((We+wt-1)/2)]),_.push(Ot>0?bt/Ot:null),ee.push(rt>0?ot/rt:null),oe.push(ft>0?lt/ft:null)}return[x,_,ee,oe]}function O(U){return!U.endsWith("Z")&&!U.match(/[+-]\d{2}:\d{2}$/)&&(U=U+"Z"),new Date(U).getTime()/1e3}function Q(U,j,$){if(U.length===0||j.length===0)return j.map(()=>null);const D=[...U].sort((x,_)=>O(x.timestamp)-O(_.timestamp)),M=D.map(x=>O(x.timestamp)),q=D.map(x=>x.temperature===null?null:$?x.temperature:x.temperature*9/5+32);return j.map(x=>{let _=null,ee=null;for(let oe=0;oe<M.length;oe++)if(M[oe]<=x&&(_={time:M[oe],temp:q[oe]}),M[oe]>=x&&ee===null){ee={time:M[oe],temp:q[oe]};break}if(_&&ee&&_.temp!==null&&ee.temp!==null){if(_.time===ee.time)return _.temp;const oe=(x-_.time)/(ee.time-_.time);return _.temp+oe*(ee.temp-_.temp)}return _!==null&&_.temp!==null?_.temp:ee!==null&&ee.temp!==null?ee.temp:null})}function B(U,j,$){const D=[...U].reverse();let M=[],q=[],x=[];for(const oe of D){M.push(O(oe.timestamp)),q.push(oe.sg_calibrated??oe.sg_raw);const We=oe.temp_calibrated??oe.temp_raw;We!==null?x.push($?Fr(We):We):x.push(null)}let _=Q(j,M,$);return L(o)&&L(c)>1&&(q=k(q,L(c)),x=k(x,L(c)),_=k(_,L(c))),[M,q,x,_]=ne(M,q,x,_,500),[M,q,x,_]}async function se(U=!1){const j=L(h)*60*1e3,$=Date.now();if(!(!U&&L(h)>0&&$-L(p)<j-500)){Ae(F,!0),Ae(R,null);try{const[D,M]=await Promise.all([Gu(l.tiltId,L(A)),Bu(L(A)).catch(()=>[])]);Ae(C,D,!0),Ae(I,M,!0),G()}catch(D){Ae(R,D instanceof Error?D.message:"Failed to load data",!0)}finally{Ae(p,Date.now(),!0),Ae(F,!1)}}}function G(){if(!g||L(C).length===0)return;const U=B(L(C),L(I),L(b)),j=K(g.clientWidth,L(b),L(u));v&&v.destroy(),v=new qe(j,U,g)}function Re(){v&&g&&v.setSize({width:g.clientWidth,height:220})}let de=null;function fe(){if(de&&(clearInterval(de),de=null),L(h)>0){const U=L(h)*60*1e3;de=setInterval(()=>{L(F)||se()},U)}}ao(async()=>{const U=localStorage.getItem(i);if(U!==null){const j=parseInt(U,10);Number.isNaN(j)||Ae(h,j,!0)}try{const j=await fetch("/api/system/timezone");if(j.ok){const $=await j.json();Ae(u,$.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await se(!0),Ae(d,!0),window.addEventListener("resize",Re),fe()}),Pr(()=>{v?.destroy(),window.removeEventListener("resize",Re),de&&clearInterval(de)}),kn(()=>{L(d)&&L(A)&&se(!0)}),kn(()=>{L(b)!==void 0&&L(C).length>0&&g&&G()}),kn(()=>{L(o),L(c),L(C).length>0&&g&&G()});function me(U){const j=Number(U.target.value);Ae(h,j,!0),localStorage.setItem(i,String(j)),fe(),se(!0)}var ie=Ju(),H=ue(ie),Me=ue(H);cn(Me,21,()=>Iu,Mn,(U,j)=>{var $=Uu();let D;$.__click=()=>Ae(A,L(j).hours,!0);var M=ue($,!0);le($),_t(()=>{D=Wl($,1,"range-btn svelte-1e832qd",null,D,{active:L(A)===L(j).hours}),mt(M,L(j).label)}),Fe(U,$)}),le(Me);var He=xe(Me,2),_e=ue(He),ce=xe(ue(_e),2);ce.__change=me,cn(ce,21,()=>n,Mn,(U,j)=>{var $=Yu(),D=ue($,!0);le($);var M={};_t(()=>{mt(D,L(j).label),M!==(M=L(j).value)&&($.value=($.__value=L(j).value)??"")}),Fe(U,$)}),le(ce);var tt;Ur(ce),le(_e);var Be=xe(_e,2),ye=xe(ue(Be),2),ut=ue(ye);Ol(2),le(ye),Ol(2),le(Be),le(He),le(H);var ct=xe(H,2),Ke=ue(ct);{var At=U=>{var j=qu();Fe(U,j)};Tt(Ke,U=>{L(F)&&U(At)})}var Nt=xe(Ke,2);{var Dt=U=>{var j=ju(),$=xe(ue(j),2);$.__click=se,le(j),Fe(U,j)},$t=U=>{var j=Dr(),$=uo(j);{var D=M=>{var q=Ku();Fe(M,q)};Tt($,M=>{L(C).length===0&&M(D)},!0)}Fe(U,j)};Tt(Nt,U=>{L(R)?U(Dt):U($t,!1)})}le(ct),co(ct,U=>g=U,()=>g),le(ie),_t(()=>{tt!==(tt=L(h))&&(ce.value=(ce.__value=L(h))??"",Yr(ce,L(h))),Tn(ut,`background: ${(S[l.tiltColor]||"var(--text-secondary)")??""};`)}),Fe(e,ie),As()}Es(["click","change"]);var Qu=Oe('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),$u=Oe('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),Xu=Oe('<div class="w-1 rounded-sm transition-all"></div>'),ec=Oe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),tc=Oe("<div><!></div>"),lc=Oe('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),nc=Oe('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> </p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Gravity</p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!> <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function sc(e,l){Ms(l,!0);let i=Si(l,"expanded",3,!1),n=Si(l,"wide",3,!1),o=it(!1);kn(()=>{i()&&!L(o)&&Ae(o,!0)});let c=it(!1),u=it(""),d=it(null),p=it(!1);function h(){Ae(u,l.tilt.beer_name,!0),Ae(c,!0),setTimeout(()=>L(d)?.focus(),0)}async function b(){if(L(p))return;const D=L(u).trim();if(!D||D===l.tilt.beer_name){Ae(c,!1);return}Ae(p,!0);const M=await Hr(l.tilt.id,D);Ae(p,!1),M&&Ae(c,!1)}function g(D){D.key==="Enter"?b():D.key==="Escape"&&Ae(c,!1)}let v=Qt(Vr);const F={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function R(D){return D.toFixed(3)}function A(D){return Nr(D)}function C(D){return D>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:D>=-60?{bars:3,color:"var(--positive)",label:"Good"}:D>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function I(D){const M=Math.floor((Date.now()-new Date(D).getTime())/1e3);if(M<10)return"just now";if(M<60)return`${M}s ago`;const q=Math.floor(M/60);if(q<60)return`${q}m ago`;const x=Math.floor(q/60);return x<24?`${x}h ago`:`${Math.floor(x/24)}d ago`}let S=Qt(()=>F[l.tilt.color]||"var(--tilt-black)"),N=Qt(()=>C(l.tilt.rssi)),E=Qt(()=>I(l.tilt.last_seen));var X=nc();let P;var Y=ue(X),Z=xe(Y,2),ae=ue(Z),K=ue(ae),k=ue(K);{var ne=D=>{var M=Qu();Or(M),M.__keydown=g,co(M,q=>Ae(d,q),()=>L(d)),_t(()=>M.disabled=L(p)),Lr("blur",M,b),Br(M,()=>L(u),q=>Ae(u,q)),Fe(D,M)},O=D=>{var M=$u();M.__click=h;var q=ue(M),x=ue(q,!0);le(q),Ol(2),le(M),_t(()=>mt(x,l.tilt.beer_name)),Fe(D,M)};Tt(k,D=>{L(c)?D(ne):D(O,!1)})}var Q=xe(k,2),B=ue(Q),se=xe(B,2),G=ue(se,!0);le(se),le(Q),le(K);var Re=xe(K,2),de=ue(Re);cn(de,20,()=>Array(4),Mn,(D,M,q)=>{var x=Xu();_t(()=>Tn(x,`
								height: ${8+q*4}px;
								background: ${(q<L(N).bars?L(N).color:"var(--bg-hover)")??""};
								opacity: ${q<L(N).bars?1:.4};
							`)),Fe(D,x)}),le(de);var fe=xe(de,2),me=ue(fe);le(fe),le(Re),le(ae);var ie=xe(ae,2),H=ue(ie),Me=ue(H),He=ue(Me,!0);le(Me),Ol(2),le(H);var _e=xe(H,2),ce=ue(_e),tt=ue(ce,!0),Be=xe(tt),ye=ue(Be,!0);le(Be),le(ce),Ol(2),le(_e),le(ie);var ut=xe(ie,2);{var ct=D=>{var M=ec(),q=xe(ue(M),2),x=ue(q,!0);le(q);var _=xe(q,4),ee=ue(_);le(_),le(M),_t((oe,We)=>{mt(x,oe),mt(ee,`${We??""}${L(v)??""}`)},[()=>R(l.tilt.sg_raw),()=>A(l.tilt.temp_raw)]),Fe(D,M)};Tt(ut,D=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&D(ct)})}var Ke=xe(ut,2);{var At=D=>{var M=tc();let q;var x=ue(M);Zu(x,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color}}),le(M),_t(()=>q=Wl(M,1,"chart-section svelte-3twv7v",null,q,{hidden:!i()})),Fe(D,M)};Tt(Ke,D=>{L(o)&&D(At)})}var Nt=xe(Ke,2),Dt=ue(Nt),$t=ue(Dt);le(Dt);var U=xe(Dt,2),j=ue(U);{var $=D=>{var M=lc();M.__click=function(..._){l.onToggleExpand?.apply(this,_)};var q=ue(M);let x;le(M),_t(()=>{bi(M,"aria-label",i()?"Collapse chart":"Expand chart"),x=Wl(q,0,"w-4 h-4 transition-transform",null,x,{"rotate-180":i()})}),Fe(D,M)};Tt(j,D=>{l.onToggleExpand&&D($)})}Ol(2),le(U),le(Nt),le(Z),le(X),_t((D,M)=>{P=Wl(X,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,P,{expanded:i(),wide:n()}),Tn(Y,`background: ${L(S)??""};`),Tn(B,`background: ${L(S)??""};`),mt(G,l.tilt.color),bi(Re,"title",`${L(N).label??""} signal (${l.tilt.rssi??""} dBm)`),mt(me,`${l.tilt.rssi??""} dBm`),mt(He,D),mt(tt,M),mt(ye,L(v)),mt($t,`Updated ${L(E)??""}`)},[()=>R(l.tilt.sg),()=>A(l.tilt.temp)]),Fe(e,X),As()}Es(["keydown","click"]);var ic=Oe('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),oc=Oe('<div class="alerts-list svelte-1uha8ag"></div>'),rc=Oe('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),ac=Oe('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),uc=Oe('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),cc=Oe('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),fc=Oe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),dc=Oe("<div></div>"),pc=Oe("<!> <!>",1);function Ec(e,l){Ms(l,!0);let i=it(!1),n=it(!1);ao(()=>{const A=localStorage.getItem("tiltui_alerts_dismissed"),C=localStorage.getItem("tiltui_alerts_dismissed_time");return A==="true"&&C&&Date.now()-parseInt(C,10)<360*60*1e3&&Ae(i,!0),Ir(),()=>{Gr()}});let o=Qt(()=>Array.from(as.tilts.values())),c=it(null);function u(A){Ae(c,L(c)===A?null:A,!0)}function d(){Ae(i,!0),localStorage.setItem("tiltui_alerts_dismissed","true"),localStorage.setItem("tiltui_alerts_dismissed_time",Date.now().toString())}function p(){Ae(n,!L(n))}var h=pc();Wr("1uha8ag",A=>{Rr(()=>{zr.title="Dashboard | Tilt UI"})});var b=uo(h);{var g=A=>{var C=ac(),I=ue(C),S=ue(I),N=xe(ue(S),4),E=ue(N,!0);le(N),le(S);var X=xe(S,2);X.__click=d,le(I);var P=xe(I,2);{var Y=K=>{var k=oc();cn(k,21,()=>tn.alerts,Mn,(ne,O)=>{var Q=ic();let B;var se=ue(Q),G=ue(se);le(se);var Re=xe(se,2),de=ue(Re,!0);le(Re),le(Q),_t(()=>{B=Wl(Q,1,"alert-item svelte-1uha8ag",null,B,{warning:L(O).level==="warning",critical:L(O).level==="critical"}),mt(G,`${L(O).day??""}:`),mt(de,L(O).message)}),Fe(ne,Q)}),le(k),Fe(K,k)};Tt(P,K=>{L(n)||K(Y)})}var Z=xe(P,2);{var ae=K=>{var k=rc();k.__click=p;var ne=ue(k,!0);le(k),_t(()=>mt(ne,L(n)?`Show ${tn.alerts.length} alerts`:"Show less")),Fe(K,k)};Tt(Z,K=>{tn.alerts.length>3&&K(ae)})}le(C),_t(()=>mt(E,tn.alerts.length)),Fe(A,C)};Tt(b,A=>{tn.alerts.length>0&&!L(i)&&A(g)})}var v=xe(b,2);{var F=A=>{var C=fc(),I=xe(ue(C),4),S=ue(I);{var N=Y=>{var Z=Cr("Waiting for Tilt hydrometers to broadcast...");Fe(Y,Z)},E=Y=>{var Z=uc();Fe(Y,Z)};Tt(S,Y=>{as.connected?Y(N):Y(E,!1)})}le(I);var X=xe(I,2);{var P=Y=>{var Z=cc();Fe(Y,Z)};Tt(X,Y=>{as.connected&&Y(P)})}le(C),Fe(A,C)},R=A=>{var C=dc();let I;cn(C,21,()=>L(o),S=>S.id,(S,N)=>{{let E=Qt(()=>L(c)===L(N).id),X=Qt(()=>L(o).length===1);sc(S,{get tilt(){return L(N)},get expanded(){return L(E)},get wide(){return L(X)},onToggleExpand:()=>u(L(N).id)})}}),le(C),_t(()=>I=Wl(C,1,"tilt-grid svelte-1uha8ag",null,I,{"single-tilt":L(o).length===1})),Fe(A,C)};Tt(v,A=>{L(o).length===0?A(F):A(R,!1)})}Fe(e,h),As()}Es(["click"]);export{Ec as component};
