import{d as $n,c as Fn,a as ke,f as Re,s as Se,e as Si}from"../chunks/BQ88CgEU.js";import{o as Or,R as Gr,b7 as Nr,b as zr,ah as es,ar as Al,c as d,ai as He,aj as ts,al as E,an as y,ak as I,ao as Be,as as xt,s as fe,at as Ml,p as Dn,ap as yi,aL as Ir,aq as Ns,e as Br,am as Vr}from"../chunks/CGXqq0_G.js";import{e as On,i as jn}from"../chunks/payu-7ZH.js";import{B as Hr,i as dt}from"../chunks/ziKwUJ4R.js";import{h as Wr}from"../chunks/BP8qDDK3.js";import{s as wl}from"../chunks/DqcjHxzZ.js";import{t as ki}from"../chunks/DThvY6M2.js";import{w as kn}from"../chunks/BwsdUUZq.js";import{r as Jn,s as cn}from"../chunks/D2zVhfuI.js";import{s as Ln}from"../chunks/BSw_pJTS.js";import{b as Ti,a as Oa}from"../chunks/D6uZGgMj.js";import{b as js}from"../chunks/C39ACuyu.js";import{p as Gn}from"../chunks/B3wItnqC.js";import{c as qn,d as un,b as Js,g as Ei,e as Ur}from"../chunks/Dq6yox8V.js";import{T as Yr,o as qr,q as Kr,s as jr,t as Jr,u as Zr,v as Qr,g as Xr}from"../chunks/DnjU_VlB.js";import{i as $r,s as eo}from"../chunks/C5J5lxM1.js";function to(e,l,a){Or&&Gr();var n=new Hr(e),i=!Nr();zr(()=>{var c=l();i&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,a)})}const lo=!0,Ft="u-",no="uplot",so=Ft+"hz",ao=Ft+"vt",io=Ft+"title",ro=Ft+"wrap",oo=Ft+"under",uo=Ft+"over",co=Ft+"axis",Yl=Ft+"off",fo=Ft+"select",po=Ft+"cursor-x",ho=Ft+"cursor-y",vo=Ft+"cursor-pt",go=Ft+"legend",mo=Ft+"live",_o=Ft+"inline",wo=Ft+"series",xo=Ft+"marker",Ga=Ft+"label",bo=Ft+"value",Mn="width",An="height",Tn="top",Na="bottom",rn="left",Ds="right",Zs="#000",za=Zs+"0",Ls="mousemove",Ia="mousedown",Ps="mouseup",Ba="mouseenter",Va="mouseleave",Ha="dblclick",So="resize",yo="scroll",Wa="change",Zn="dppxchange",Qs="--",gn=typeof window<"u",zs=gn?document:null,fn=gn?window:null,ko=gn?navigator:null;let ze,Wn;function Is(){let e=devicePixelRatio;ze!=e&&(ze=e,Wn&&Vs(Wa,Wn,Is),Wn=matchMedia(`(min-resolution: ${ze-.001}dppx) and (max-resolution: ${ze+.001}dppx)`),ql(Wa,Wn,Is),fn.dispatchEvent(new CustomEvent(Zn)))}function il(e,l){if(l!=null){let a=e.classList;!a.contains(l)&&a.add(l)}}function Bs(e,l){let a=e.classList;a.contains(l)&&a.remove(l)}function st(e,l,a){e.style[l]=a+"px"}function gl(e,l,a,n){let i=zs.createElement(e);return l!=null&&il(i,l),a?.insertBefore(i,n),i}function dl(e,l){return gl("div",e,l)}const Ua=new WeakMap;function Tl(e,l,a,n,i){let c="translate("+l+"px,"+a+"px)",u=Ua.get(e);c!=u&&(e.style.transform=c,Ua.set(e,c),l<0||a<0||l>n||a>i?il(e,Yl):Bs(e,Yl))}const Ya=new WeakMap;function qa(e,l,a){let n=l+a,i=Ya.get(e);n!=i&&(Ya.set(e,n),e.style.background=l,e.style.borderColor=a)}const Ka=new WeakMap;function ja(e,l,a,n){let i=l+""+a,c=Ka.get(e);i!=c&&(Ka.set(e,i),e.style.height=a+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-a/2+"px":0)}const Xs={passive:!0},To={...Xs,capture:!0};function ql(e,l,a,n){l.addEventListener(e,a,n?To:Xs)}function Vs(e,l,a,n){l.removeEventListener(e,a,Xs)}gn&&Is();function ml(e,l,a,n){let i;a=a||0,n=n||l.length-1;let c=n<=2147483647;for(;n-a>1;)i=c?a+n>>1:rl((a+n)/2),l[i]<e?a=i:n=i;return e-l[a]<=l[n]-e?a:n}function Mi(e){return(a,n,i)=>{let c=-1,u=-1;for(let p=n;p<=i;p++)if(e(a[p])){c=p;break}for(let p=i;p>=n;p--)if(e(a[p])){u=p;break}return[c,u]}}const Ai=e=>e!=null,Ci=e=>e!=null&&e>0,ls=Mi(Ai),Eo=Mi(Ci);function Mo(e,l,a,n=0,i=!1){let c=i?Eo:ls,u=i?Ci:Ai;[l,a]=c(e,l,a);let p=e[l],h=e[l];if(l>-1)if(n==1)p=e[l],h=e[a];else if(n==-1)p=e[a],h=e[l];else for(let v=l;v<=a;v++){let S=e[v];u(S)&&(S<p?p=S:S>h&&(h=S))}return[p??je,h??-je]}function ns(e,l,a,n){let i=Qa(e),c=Qa(l);e==l&&(i==-1?(e*=a,l/=a):(e/=a,l*=a));let u=a==10?Cl:Di,p=i==1?rl:pl,h=c==1?pl:rl,v=p(u(Rt(e))),S=h(u(Rt(l))),m=dn(a,v),_=dn(a,S);return a==10&&(v<0&&(m=Je(m,-v)),S<0&&(_=Je(_,-S))),n||a==2?(e=m*i,l=_*c):(e=Fi(e,m),l=ss(l,_)),[e,l]}function $s(e,l,a,n){let i=ns(e,l,a,n);return e==0&&(i[0]=0),l==0&&(i[1]=0),i}const ea=.1,Ja={mode:3,pad:ea},Pn={pad:0,soft:null,mode:0},Ao={min:Pn,max:Pn};function Qn(e,l,a,n){return as(a)?Za(e,l,a):(Pn.pad=a,Pn.soft=n?0:null,Pn.mode=n?3:0,Za(e,l,Ao))}function Oe(e,l){return e??l}function Co(e,l,a){for(l=Oe(l,0),a=Oe(a,e.length-1);l<=a;){if(e[l]!=null)return!0;l++}return!1}function Za(e,l,a){let n=a.min,i=a.max,c=Oe(n.pad,0),u=Oe(i.pad,0),p=Oe(n.hard,-je),h=Oe(i.hard,je),v=Oe(n.soft,je),S=Oe(i.soft,-je),m=Oe(n.mode,0),_=Oe(i.mode,0),G=l-e,k=Cl(G),W=Xt(Rt(e),Rt(l)),Q=Cl(W),ee=Rt(Q-k);(G<1e-24||ee>10)&&(G=0,(e==0||l==0)&&(G=1e-24,m==2&&v!=je&&(c=0),_==2&&S!=-je&&(u=0)));let b=G||W||1e3,U=Cl(b),C=dn(10,rl(U)),F=b*(G==0?e==0?.1:1:c),A=Je(Fi(e-F,C/10),24),le=e>=v&&(m==1||m==3&&A<=v||m==2&&A>=v)?v:je,j=Xt(p,A<le&&e>=le?le:_l(le,A)),J=b*(G==0?l==0?.1:1:u),ne=Je(ss(l+J,C/10),24),w=l<=S&&(_==1||_==3&&ne>=S||_==2&&ne<=S)?S:-je,z=_l(h,ne>w&&l<=w?w:Xt(w,ne));return j==z&&j==0&&(z=100),[j,z]}const Do=new Intl.NumberFormat(gn?ko.language:"en-US"),ta=e=>Do.format(e),ol=Math,Kn=ol.PI,Rt=ol.abs,rl=ol.floor,Pt=ol.round,pl=ol.ceil,_l=ol.min,Xt=ol.max,dn=ol.pow,Qa=ol.sign,Cl=ol.log10,Di=ol.log2,Lo=(e,l=1)=>ol.sinh(e)*l,Rs=(e,l=1)=>ol.asinh(e/l),je=1/0;function Xa(e){return(Cl((e^e>>31)-(e>>31))|0)+1}function Hs(e,l,a){return _l(Xt(e,l),a)}function Li(e){return typeof e=="function"}function Ce(e){return Li(e)?e:()=>e}const Po=()=>{},Pi=e=>e,Ri=(e,l)=>l,Ro=e=>null,$a=e=>!0,ei=(e,l)=>e==l,Fo=/\.\d*?(?=9{6,}|0{6,})/gm,Kl=e=>{if(Gi(e)||zl.has(e))return e;const l=`${e}`,a=l.match(Fo);if(a==null)return e;let n=a[0].length-1;if(l.indexOf("e-")!=-1){let[i,c]=l.split("e");return+`${Kl(i)}e${c}`}return Je(e,n)};function Wl(e,l){return Kl(Je(Kl(e/l))*l)}function ss(e,l){return Kl(pl(Kl(e/l))*l)}function Fi(e,l){return Kl(rl(Kl(e/l))*l)}function Je(e,l=0){if(Gi(e))return e;let a=10**l,n=e*a*(1+Number.EPSILON);return Pt(n)/a}const zl=new Map;function Oi(e){return((""+e).split(".")[1]||"").length}function Nn(e,l,a,n){let i=[],c=n.map(Oi);for(let u=l;u<a;u++){let p=Rt(u),h=Je(dn(e,u),p);for(let v=0;v<n.length;v++){let S=e==10?+`${n[v]}e${u}`:n[v]*h,m=(u>=0?0:p)+(u>=c[v]?0:c[v]),_=e==10?S:Je(S,m);i.push(_),zl.set(_,m)}}return i}const Rn={},la=[],pn=[null,null],Nl=Array.isArray,Gi=Number.isInteger,Oo=e=>e===void 0;function ti(e){return typeof e=="string"}function as(e){let l=!1;if(e!=null){let a=e.constructor;l=a==null||a==Object}return l}function Go(e){return e!=null&&typeof e=="object"}const No=Object.getPrototypeOf(Uint8Array),Ni="__proto__";function hn(e,l=as){let a;if(Nl(e)){let n=e.find(i=>i!=null);if(Nl(n)||l(n)){a=Array(e.length);for(let i=0;i<e.length;i++)a[i]=hn(e[i],l)}else a=e.slice()}else if(e instanceof No)a=e.slice();else if(l(e)){a={};for(let n in e)n!=Ni&&(a[n]=hn(e[n],l))}else a=e;return a}function Dt(e){let l=arguments;for(let a=1;a<l.length;a++){let n=l[a];for(let i in n)i!=Ni&&(as(e[i])?Dt(e[i],hn(n[i])):e[i]=hn(n[i]))}return e}const zo=0,Io=1,Bo=2;function Vo(e,l,a){for(let n=0,i,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(i=u-1;i>=0&&e[i]==null;)e[i--]=null;for(i=u+1;i<a&&e[i]==null;)e[c=i++]=null}}}function Ho(e,l){if(Yo(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return qo(u[0])||(u=Uo(u)),u}let a=new Set;for(let u=0;u<e.length;u++){let h=e[u][0],v=h.length;for(let S=0;S<v;S++)a.add(h[S])}let n=[Array.from(a).sort((u,p)=>u-p)],i=n[0].length,c=new Map;for(let u=0;u<i;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],h=p[0];for(let v=1;v<p.length;v++){let S=p[v],m=Array(i).fill(void 0),_=l?l[u][v]:Io,G=[];for(let k=0;k<S.length;k++){let W=S[k],Q=c.get(h[k]);W===null?_!=zo&&(m[Q]=W,_==Bo&&G.push(Q)):m[Q]=W}Vo(m,G,i),n.push(m)}}return n}const Wo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Uo(e){let l=e[0],a=l.length,n=Array(a);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let i=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(a);for(let h=0;h<a;h++)p[h]=u[n[h]];i.push(p)}return i}function Yo(e){let l=e[0][0],a=l.length;for(let n=1;n<e.length;n++){let i=e[n][0];if(i.length!=a)return!1;if(i!=l){for(let c=0;c<a;c++)if(i[c]!=l[c])return!1}}return!0}function qo(e,l=100){const a=e.length;if(a<=1)return!0;let n=0,i=a-1;for(;n<=i&&e[n]==null;)n++;for(;i>=n&&e[i]==null;)i--;if(i<=n)return!0;const c=Xt(1,rl((i-n+1)/l));for(let u=e[n],p=n+c;p<=i;p+=c){const h=e[p];if(h!=null){if(h<=u)return!1;u=h}}return!0}const zi=["January","February","March","April","May","June","July","August","September","October","November","December"],Ii=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Bi(e){return e.slice(0,3)}const Ko=Ii.map(Bi),jo=zi.map(Bi),Jo={MMMM:zi,MMM:jo,WWWW:Ii,WWW:Ko};function En(e){return(e<10?"0":"")+e}function Zo(e){return(e<10?"00":e<100?"0":"")+e}const Qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>En(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>En(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>En(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>En(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>En(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Zo(e.getMilliseconds())};function na(e,l){l=l||Jo;let a=[],n=/\{([a-z]+)\}|[^{]+/gi,i;for(;i=n.exec(e);)a.push(i[0][0]=="{"?Qo[i[1]]:i[0]);return c=>{let u="";for(let p=0;p<a.length;p++)u+=typeof a[p]=="string"?a[p]:a[p](c,l);return u}}const Xo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function $o(e,l){let a;return l=="UTC"||l=="Etc/UTC"?a=new Date(+e+e.getTimezoneOffset()*6e4):l==Xo?a=e:(a=new Date(e.toLocaleString("en-US",{timeZone:l})),a.setMilliseconds(e.getMilliseconds())),a}const Vi=e=>e%1==0,Xn=[1,2,2.5,5],eu=Nn(10,-32,0,Xn),Hi=Nn(10,0,32,Xn),tu=Hi.filter(Vi),Ul=eu.concat(Hi),sa=`
`,Wi="{YYYY}",li=sa+Wi,Ui="{M}/{D}",Cn=sa+Ui,Un=Cn+"/{YY}",Yi="{aa}",lu="{h}:{mm}",on=lu+Yi,ni=sa+on,si=":{ss}",Ie=null;function qi(e){let l=e*1e3,a=l*60,n=a*60,i=n*24,c=i*30,u=i*365,h=(e==1?Nn(10,0,3,Xn).filter(Vi):Nn(10,-3,0,Xn)).concat([l,l*5,l*10,l*15,l*30,a,a*5,a*10,a*15,a*30,n,n*2,n*3,n*4,n*6,n*8,n*12,i,i*2,i*3,i*4,i*5,i*6,i*7,i*8,i*9,i*10,i*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const v=[[u,Wi,Ie,Ie,Ie,Ie,Ie,Ie,1],[i*28,"{MMM}",li,Ie,Ie,Ie,Ie,Ie,1],[i,Ui,li,Ie,Ie,Ie,Ie,Ie,1],[n,"{h}"+Yi,Un,Ie,Cn,Ie,Ie,Ie,1],[a,on,Un,Ie,Cn,Ie,Ie,Ie,1],[l,si,Un+" "+on,Ie,Cn+" "+on,Ie,ni,Ie,1],[e,si+".{fff}",Un+" "+on,Ie,Cn+" "+on,Ie,ni,Ie,1]];function S(m){return(_,G,k,W,Q,ee)=>{let b=[],U=Q>=u,C=Q>=c&&Q<u,F=m(k),A=Je(F*e,3),le=Fs(F.getFullYear(),U?0:F.getMonth(),C||U?1:F.getDate()),j=Je(le*e,3);if(C||U){let J=C?Q/c:0,ne=U?Q/u:0,w=A==j?A:Je(Fs(le.getFullYear()+ne,le.getMonth()+J,1)*e,3),z=new Date(Pt(w/e)),N=z.getFullYear(),X=z.getMonth();for(let D=0;w<=W;D++){let K=Fs(N+ne*D,X+J*D,1),M=K-m(Je(K*e,3));w=Je((+K+M)*e,3),w<=W&&b.push(w)}}else{let J=Q>=i?i:Q,ne=rl(k)-rl(A),w=j+ne+ss(A-j,J);b.push(w);let z=m(w),N=z.getHours()+z.getMinutes()/a+z.getSeconds()/n,X=Q/n,D=_.axes[G]._space,K=ee/D;for(;w=Je(w+Q,e==1?0:3),!(w>W);)if(X>1){let M=rl(Je(N+X,6))%24,ce=m(w).getHours()-M;ce>1&&(ce=-1),w-=ce*n,N=(N+X)%24;let ve=b[b.length-1];Je((w-ve)/Q,3)*K>=.7&&b.push(w)}else b.push(w)}return b}}return[h,v,S]}const[nu,su,au]=qi(1),[iu,ru,ou]=qi(.001);Nn(2,-53,53,[1]);function ai(e,l){return e.map(a=>a.map((n,i)=>i==0||i==8||n==null?n:l(i==1||a[8]==0?n:a[1]+n)))}function ii(e,l){return(a,n,i,c,u)=>{let p=l.find(k=>u>=k[0])||l[l.length-1],h,v,S,m,_,G;return n.map(k=>{let W=e(k),Q=W.getFullYear(),ee=W.getMonth(),b=W.getDate(),U=W.getHours(),C=W.getMinutes(),F=W.getSeconds(),A=Q!=h&&p[2]||ee!=v&&p[3]||b!=S&&p[4]||U!=m&&p[5]||C!=_&&p[6]||F!=G&&p[7]||p[1];return h=Q,v=ee,S=b,m=U,_=C,G=F,A(W)})}}function uu(e,l){let a=na(l);return(n,i,c,u,p)=>i.map(h=>a(e(h)))}function Fs(e,l,a){return new Date(e,l,a)}function ri(e,l){return l(e)}const cu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function oi(e,l){return(a,n,i,c)=>c==null?Qs:l(e(n))}function fu(e,l){let a=e.series[l];return a.width?a.stroke(e,l):a.points.width?a.points.stroke(e,l):null}function du(e,l){return e.series[l].fill(e,l)}const pu={show:!0,live:!0,isolate:!1,mount:Po,markers:{show:!0,width:2,stroke:fu,fill:du,dash:"solid"},idx:null,idxs:null,values:[]};function hu(e,l){let a=e.cursor.points,n=dl(),i=a.size(e,l);st(n,Mn,i),st(n,An,i);let c=i/-2;st(n,"marginLeft",c),st(n,"marginTop",c);let u=a.width(e,l,i);return u&&st(n,"borderWidth",u),n}function vu(e,l){let a=e.series[l].points;return a._fill||a._stroke}function gu(e,l){let a=e.series[l].points;return a._stroke||a._fill}function mu(e,l){return e.series[l].points.size}const Os=[0,0];function _u(e,l,a){return Os[0]=l,Os[1]=a,Os}function Yn(e,l,a,n=!0){return i=>{i.button==0&&(!n||i.target==l)&&a(i)}}function Gs(e,l,a,n=!0){return i=>{(!n||i.target==l)&&a(i)}}const wu={show:!0,x:!0,y:!0,lock:!1,move:_u,points:{one:!1,show:hu,size:mu,width:0,stroke:gu,fill:vu},bind:{mousedown:Yn,mouseup:Yn,click:Yn,dblclick:Yn,mousemove:Gs,mouseleave:Gs,mouseenter:Gs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,a,n,i)=>n-i,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ki={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},aa=Dt({},Ki,{filter:Ri}),ji=Dt({},aa,{size:10}),Ji=Dt({},Ki,{show:!1}),ia='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Zi="bold "+ia,Qi=1.5,ui={show:!0,scale:"x",stroke:Zs,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Zi,side:2,grid:aa,ticks:ji,border:Ji,font:ia,lineGap:Qi,rotate:0},xu="Value",bu="Time",ci={show:!0,scale:"x",auto:!1,sorted:1,min:je,max:-je,idxs:[]};function Su(e,l,a,n,i){return l.map(c=>c==null?"":ta(c))}function yu(e,l,a,n,i,c,u){let p=[],h=zl.get(i)||0;a=u?a:Je(ss(a,i),h);for(let v=a;v<=n;v=Je(v+i,h))p.push(Object.is(v,-0)?0:v);return p}function Ws(e,l,a,n,i,c,u){const p=[],h=e.scales[e.axes[l].scale].log,v=h==10?Cl:Di,S=rl(v(a));i=dn(h,S),h==10&&(i=Ul[ml(i,Ul)]);let m=a,_=i*h;h==10&&(_=Ul[ml(_,Ul)]);do p.push(m),m=m+i,h==10&&!zl.has(m)&&(m=Je(m,zl.get(i))),m>=_&&(i=m,_=i*h,h==10&&(_=Ul[ml(_,Ul)]));while(m<=n);return p}function ku(e,l,a,n,i,c,u){let h=e.scales[e.axes[l].scale].asinh,v=n>h?Ws(e,l,Xt(h,a),n,i):[h],S=n>=0&&a<=0?[0]:[];return(a<-h?Ws(e,l,Xt(h,-n),-a,i):[h]).reverse().map(_=>-_).concat(S,v)}const Xi=/./,Tu=/[12357]/,Eu=/[125]/,fi=/1/,Us=(e,l,a,n)=>e.map((i,c)=>l==4&&i==0||c%n==0&&a.test(i.toExponential()[i<0?1:0])?i:null);function Mu(e,l,a,n,i){let c=e.axes[a],u=c.scale,p=e.scales[u],h=e.valToPos,v=c._space,S=h(10,u),m=h(9,u)-S>=v?Xi:h(7,u)-S>=v?Tu:h(5,u)-S>=v?Eu:fi;if(m==fi){let _=Rt(h(1,u)-S);if(_<v)return Us(l.slice().reverse(),p.distr,m,pl(v/_)).reverse()}return Us(l,p.distr,m,1)}function Au(e,l,a,n,i){let c=e.axes[a],u=c.scale,p=c._space,h=e.valToPos,v=Rt(h(1,u)-h(2,u));return v<p?Us(l.slice().reverse(),3,Xi,pl(p/v)).reverse():l}function Cu(e,l,a,n){return n==null?Qs:l==null?"":ta(l)}const di={show:!0,scale:"y",stroke:Zs,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Zi,side:3,grid:aa,ticks:ji,border:Ji,font:ia,lineGap:Qi,rotate:0};function Du(e,l){let a=3+(e||1)*2;return Je(a*l,3)}function Lu(e,l){let{scale:a,idxs:n}=e.series[0],i=e._data[0],c=e.valToPos(i[n[0]],a,!0),u=e.valToPos(i[n[1]],a,!0),p=Rt(u-c),h=e.series[l],v=p/(h.points.space*ze);return n[1]-n[0]<=v}const pi={scale:null,auto:!0,sorted:0,min:je,max:-je},$i=(e,l,a,n,i)=>i,hi={show:!0,auto:!0,sorted:0,gaps:$i,alpha:1,facets:[Dt({},pi,{scale:"x"}),Dt({},pi,{scale:"y"})]},vi={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:$i,alpha:1,points:{show:Lu,filter:null},values:null,min:je,max:-je,idxs:[],path:null,clip:null};function Pu(e,l,a,n,i){return a/10}const er={time:lo,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Ru=Dt({},er,{time:!1,ori:1}),gi={};function tr(e,l){let a=gi[e];return a||(a={key:e,plots:[],sub(n){a.plots.push(n)},unsub(n){a.plots=a.plots.filter(i=>i!=n)},pub(n,i,c,u,p,h,v){for(let S=0;S<a.plots.length;S++)a.plots[S]!=i&&a.plots[S].pub(n,i,c,u,p,h,v)}},e!=null&&(gi[e]=a)),a}const vn=1,Ys=2;function jl(e,l,a){const n=e.mode,i=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let h=c[0],v=n==2?c[1]:c[l],S=n==2?u[i.facets[0].scale]:u[e.series[0].scale],m=n==2?u[i.facets[1].scale]:u[i.scale],_=p.left,G=p.top,k=p.width,W=p.height,Q=e.valToPosH,ee=e.valToPosV;return S.ori==0?a(i,h,v,S,m,Q,ee,_,G,k,W,rs,mn,us,nr,ar):a(i,h,v,S,m,ee,Q,G,_,W,k,os,_n,ua,sr,ir)}function ra(e,l){let a=0,n=0,i=Oe(e.bands,la);for(let c=0;c<i.length;c++){let u=i[c];u.series[0]==l?a=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[a,n==1?-1:n==2?1:n==3?2:0]}function Fu(e,l,a,n,i){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,h=e.scales[p];return i==-1?h.min:i==1?h.max:h.distr==3?h.dir==1?h.min:h.max:0}function Dl(e,l,a,n,i,c){return jl(e,l,(u,p,h,v,S,m,_,G,k,W,Q)=>{let ee=u.pxRound;const b=v.dir*(v.ori==0?1:-1),U=v.ori==0?mn:_n;let C,F;b==1?(C=a,F=n):(C=n,F=a);let A=ee(m(p[C],v,W,G)),le=ee(_(h[C],S,Q,k)),j=ee(m(p[F],v,W,G)),J=ee(_(c==1?S.max:S.min,S,Q,k)),ne=new Path2D(i);return U(ne,j,J),U(ne,A,J),U(ne,A,le),ne})}function is(e,l,a,n,i,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?us:ua;let h=a;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let G=_[0]-h;G>0&&p(u,h,n,G,n+c),h=_[1]}}let v=a+i-h,S=10;v>0&&p(u,h,n-S/2,v,n+c+S)}return u}function Ou(e,l,a){let n=e[e.length-1];n&&n[0]==l?n[1]=a:e.push([l,a])}function oa(e,l,a,n,i,c,u){let p=[],h=e.length;for(let v=i==1?a:n;v>=a&&v<=n;v+=i)if(l[v]===null){let m=v,_=v;if(i==1)for(;++v<=n&&l[v]===null;)_=v;else for(;--v>=a&&l[v]===null;)_=v;let G=c(e[m]),k=_==m?G:c(e[_]),W=m-i;G=u<=0&&W>=0&&W<h?c(e[W]):G;let ee=_+i;k=u>=0&&ee>=0&&ee<h?c(e[ee]):k,k>=G&&p.push([G,k])}return p}function mi(e){return e==0?Pi:e==1?Pt:l=>Wl(l,e)}function lr(e){let l=e==0?rs:os,a=e==0?(i,c,u,p,h,v)=>{i.arcTo(c,u,p,h,v)}:(i,c,u,p,h,v)=>{i.arcTo(u,c,h,p,v)},n=e==0?(i,c,u,p,h)=>{i.rect(c,u,p,h)}:(i,c,u,p,h)=>{i.rect(u,c,h,p)};return(i,c,u,p,h,v=0,S=0)=>{v==0&&S==0?n(i,c,u,p,h):(v=_l(v,p/2,h/2),S=_l(S,p/2,h/2),l(i,c+v,u),a(i,c+p,u,c+p,u+h,v),a(i,c+p,u+h,c,u+h,S),a(i,c,u+h,c,u,S),a(i,c,u,c+p,u,v),i.closePath())}}const rs=(e,l,a)=>{e.moveTo(l,a)},os=(e,l,a)=>{e.moveTo(a,l)},mn=(e,l,a)=>{e.lineTo(l,a)},_n=(e,l,a)=>{e.lineTo(a,l)},us=lr(0),ua=lr(1),nr=(e,l,a,n,i,c)=>{e.arc(l,a,n,i,c)},sr=(e,l,a,n,i,c)=>{e.arc(a,l,n,i,c)},ar=(e,l,a,n,i,c,u)=>{e.bezierCurveTo(l,a,n,i,c,u)},ir=(e,l,a,n,i,c,u)=>{e.bezierCurveTo(a,l,i,n,u,c)};function rr(e){return(l,a,n,i,c)=>jl(l,a,(u,p,h,v,S,m,_,G,k,W,Q)=>{let{pxRound:ee,points:b}=u,U,C;v.ori==0?(U=rs,C=nr):(U=os,C=sr);const F=Je(b.width*ze,3);let A=(b.size-b.width)/2*ze,le=Je(A*2,3),j=new Path2D,J=new Path2D,{left:ne,top:w,width:z,height:N}=l.bbox;us(J,ne-le,w-le,z+le*2,N+le*2);const X=D=>{if(h[D]!=null){let K=ee(m(p[D],v,W,G)),M=ee(_(h[D],S,Q,k));U(j,K+A,M),C(j,K,M,A,0,Kn*2)}};if(c)c.forEach(X);else for(let D=n;D<=i;D++)X(D);return{stroke:F>0?j:null,fill:j,clip:J,flags:vn|Ys}})}function or(e){return(l,a,n,i,c,u)=>{n!=i&&(c!=n&&u!=n&&e(l,a,n),c!=i&&u!=i&&e(l,a,i),e(l,a,u))}}const Gu=or(mn),Nu=or(_n);function ur(e){const l=Oe(e?.alignGaps,0);return(a,n,i,c)=>jl(a,n,(u,p,h,v,S,m,_,G,k,W,Q)=>{[i,c]=ls(h,i,c);let ee=u.pxRound,b=N=>ee(m(N,v,W,G)),U=N=>ee(_(N,S,Q,k)),C,F;v.ori==0?(C=mn,F=Gu):(C=_n,F=Nu);const A=v.dir*(v.ori==0?1:-1),le={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:vn},j=le.stroke;let J=!1;if(c-i>=W*4){let N=Y=>a.posToVal(Y,v.key,!0),X=null,D=null,K,M,Ae,me=b(p[A==1?i:c]),ce=b(p[i]),ve=b(p[c]),ue=N(A==1?ce+1:ve-1);for(let Y=A==1?i:c;Y>=i&&Y<=c;Y+=A){let De=p[Y],Te=(A==1?De<ue:De>ue)?me:b(De),xe=h[Y];Te==me?xe!=null?(M=xe,X==null?(C(j,Te,U(M)),K=X=D=M):M<X?X=M:M>D&&(D=M)):xe===null&&(J=!0):(X!=null&&F(j,me,U(X),U(D),U(K),U(M)),xe!=null?(M=xe,C(j,Te,U(M)),X=D=K=M):(X=D=null,xe===null&&(J=!0)),me=Te,ue=N(me+A))}X!=null&&X!=D&&Ae!=me&&F(j,me,U(X),U(D),U(K),U(M))}else for(let N=A==1?i:c;N>=i&&N<=c;N+=A){let X=h[N];X===null?J=!0:X!=null&&C(j,b(p[N]),U(X))}let[w,z]=ra(a,n);if(u.fill!=null||w!=0){let N=le.fill=new Path2D(j),X=u.fillTo(a,n,u.min,u.max,w),D=U(X),K=b(p[i]),M=b(p[c]);A==-1&&([M,K]=[K,M]),C(N,M,D),C(N,K,D)}if(!u.spanGaps){let N=[];J&&N.push(...oa(p,h,i,c,A,b,l)),le.gaps=N=u.gaps(a,n,i,c,N),le.clip=is(N,v.ori,G,k,W,Q)}return z!=0&&(le.band=z==2?[Dl(a,n,i,c,j,-1),Dl(a,n,i,c,j,1)]:Dl(a,n,i,c,j,z)),le})}function zu(e){const l=Oe(e.align,1),a=Oe(e.ascDesc,!1),n=Oe(e.alignGaps,0),i=Oe(e.extend,!1);return(c,u,p,h)=>jl(c,u,(v,S,m,_,G,k,W,Q,ee,b,U)=>{[p,h]=ls(m,p,h);let C=v.pxRound,{left:F,width:A}=c.bbox,le=ce=>C(k(ce,_,b,Q)),j=ce=>C(W(ce,G,U,ee)),J=_.ori==0?mn:_n;const ne={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:vn},w=ne.stroke,z=_.dir*(_.ori==0?1:-1);let N=j(m[z==1?p:h]),X=le(S[z==1?p:h]),D=X,K=X;i&&l==-1&&(K=F,J(w,K,N)),J(w,X,N);for(let ce=z==1?p:h;ce>=p&&ce<=h;ce+=z){let ve=m[ce];if(ve==null)continue;let ue=le(S[ce]),Y=j(ve);l==1?J(w,ue,N):J(w,D,Y),J(w,ue,Y),N=Y,D=ue}let M=D;i&&l==1&&(M=F+A,J(w,M,N));let[Ae,me]=ra(c,u);if(v.fill!=null||Ae!=0){let ce=ne.fill=new Path2D(w),ve=v.fillTo(c,u,v.min,v.max,Ae),ue=j(ve);J(ce,M,ue),J(ce,K,ue)}if(!v.spanGaps){let ce=[];ce.push(...oa(S,m,p,h,z,le,n));let ve=v.width*ze/2,ue=a||l==1?ve:-ve,Y=a||l==-1?-ve:ve;ce.forEach(De=>{De[0]+=ue,De[1]+=Y}),ne.gaps=ce=v.gaps(c,u,p,h,ce),ne.clip=is(ce,_.ori,Q,ee,b,U)}return me!=0&&(ne.band=me==2?[Dl(c,u,p,h,w,-1),Dl(c,u,p,h,w,1)]:Dl(c,u,p,h,w,me)),ne})}function _i(e,l,a,n,i,c,u=je){if(e.length>1){let p=null;for(let h=0,v=1/0;h<e.length;h++)if(l[h]!==void 0){if(p!=null){let S=Rt(e[h]-e[p]);S<v&&(v=S,u=Rt(a(e[h],n,i,c)-a(e[p],n,i,c)))}p=h}}return u}function Iu(e){e=e||Rn;const l=Oe(e.size,[.6,je,1]),a=e.align||0,n=e.gap||0;let i=e.radius;i=i==null?[0,0]:typeof i=="number"?[i,0]:i;const c=Ce(i),u=1-l[0],p=Oe(l[1],je),h=Oe(l[2],1),v=Oe(e.disp,Rn),S=Oe(e.each,G=>{}),{fill:m,stroke:_}=v;return(G,k,W,Q)=>jl(G,k,(ee,b,U,C,F,A,le,j,J,ne,w)=>{let z=ee.pxRound,N=a,X=n*ze,D=p*ze,K=h*ze,M,Ae;C.ori==0?[M,Ae]=c(G,k):[Ae,M]=c(G,k);const me=C.dir*(C.ori==0?1:-1);let ce=C.ori==0?us:ua,ve=C.ori==0?S:(O,Pe,Ke,Kt,ll,ot,Yt)=>{S(O,Pe,Ke,ll,Kt,Yt,ot)},ue=Oe(G.bands,la).find(O=>O.series[0]==k),Y=ue!=null?ue.dir:0,De=ee.fillTo(G,k,ee.min,ee.max,Y),Xe=z(le(De,F,w,J)),Te,xe,Ze,at=ne,Le=z(ee.width*ze),pt=!1,$e=null,qe=null,ht=null,St=null;m!=null&&(Le==0||_!=null)&&(pt=!0,$e=m.values(G,k,W,Q),qe=new Map,new Set($e).forEach(O=>{O!=null&&qe.set(O,new Path2D)}),Le>0&&(ht=_.values(G,k,W,Q),St=new Map,new Set(ht).forEach(O=>{O!=null&&St.set(O,new Path2D)})));let{x0:ye,size:yt}=v;if(ye!=null&&yt!=null){N=1,b=ye.values(G,k,W,Q),ye.unit==2&&(b=b.map(Ke=>G.posToVal(j+Ke*ne,C.key,!0)));let O=yt.values(G,k,W,Q);yt.unit==2?xe=O[0]*ne:xe=A(O[0],C,ne,j)-A(0,C,ne,j),at=_i(b,U,A,C,ne,j,at),Ze=at-xe+X}else at=_i(b,U,A,C,ne,j,at),Ze=at*u+X,xe=at-Ze;Ze<1&&(Ze=0),Le>=xe/2&&(Le=0),Ze<5&&(z=Pi);let Wt=Ze>0,Lt=at-Ze-(Wt?Le:0);xe=z(Hs(Lt,K,D)),Te=(N==0?xe/2:N==me?0:xe)-N*me*((N==0?X/2:0)+(Wt?Le/2:0));const We={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Ot=pt?null:new Path2D;let Gt=null;if(ue!=null)Gt=G.data[ue.series[1]];else{let{y0:O,y1:Pe}=v;O!=null&&Pe!=null&&(U=Pe.values(G,k,W,Q),Gt=O.values(G,k,W,Q))}let Ut=M*xe,de=Ae*xe;for(let O=me==1?W:Q;O>=W&&O<=Q;O+=me){let Pe=U[O];if(Pe==null)continue;if(Gt!=null){let ut=Gt[O]??0;if(Pe-ut==0)continue;Xe=le(ut,F,w,J)}let Ke=C.distr!=2||v!=null?b[O]:O,Kt=A(Ke,C,ne,j),ll=le(Oe(Pe,De),F,w,J),ot=z(Kt-Te),Yt=z(Xt(ll,Xe)),vt=z(_l(ll,Xe)),kt=Yt-vt;if(Pe!=null){let ut=Pe<0?de:Ut,gt=Pe<0?Ut:de;pt?(Le>0&&ht[O]!=null&&ce(St.get(ht[O]),ot,vt+rl(Le/2),xe,Xt(0,kt-Le),ut,gt),$e[O]!=null&&ce(qe.get($e[O]),ot,vt+rl(Le/2),xe,Xt(0,kt-Le),ut,gt)):ce(Ot,ot,vt+rl(Le/2),xe,Xt(0,kt-Le),ut,gt),ve(G,k,O,ot-Le/2,vt,xe+Le,kt)}}return Le>0?We.stroke=pt?St:Ot:pt||(We._fill=ee.width==0?ee._fill:ee._stroke??ee._fill,We.width=0),We.fill=pt?qe:Ot,We})}function Bu(e,l){const a=Oe(l?.alignGaps,0);return(n,i,c,u)=>jl(n,i,(p,h,v,S,m,_,G,k,W,Q,ee)=>{[c,u]=ls(v,c,u);let b=p.pxRound,U=M=>b(_(M,S,Q,k)),C=M=>b(G(M,m,ee,W)),F,A,le;S.ori==0?(F=rs,le=mn,A=ar):(F=os,le=_n,A=ir);const j=S.dir*(S.ori==0?1:-1);let J=U(h[j==1?c:u]),ne=J,w=[],z=[];for(let M=j==1?c:u;M>=c&&M<=u;M+=j)if(v[M]!=null){let me=h[M],ce=U(me);w.push(ne=ce),z.push(C(v[M]))}const N={stroke:e(w,z,F,le,A,b),fill:null,clip:null,band:null,gaps:null,flags:vn},X=N.stroke;let[D,K]=ra(n,i);if(p.fill!=null||D!=0){let M=N.fill=new Path2D(X),Ae=p.fillTo(n,i,p.min,p.max,D),me=C(Ae);le(M,ne,me),le(M,J,me)}if(!p.spanGaps){let M=[];M.push(...oa(h,v,c,u,j,U,a)),N.gaps=M=p.gaps(n,i,c,u,M),N.clip=is(M,S.ori,k,W,Q,ee)}return K!=0&&(N.band=K==2?[Dl(n,i,c,u,X,-1),Dl(n,i,c,u,X,1)]:Dl(n,i,c,u,X,K)),N})}function Vu(e){return Bu(Hu,e)}function Hu(e,l,a,n,i,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(a(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let h=Array(u),v=Array(u-1),S=Array(u-1),m=Array(u-1);for(let _=0;_<u-1;_++)S[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],v[_]=S[_]/m[_];h[0]=v[0];for(let _=1;_<u-1;_++)v[_]===0||v[_-1]===0||v[_-1]>0!=v[_]>0?h[_]=0:(h[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/v[_-1]+(m[_]+2*m[_-1])/v[_]),isFinite(h[_])||(h[_]=0));h[u-1]=v[u-2];for(let _=0;_<u-1;_++)i(p,e[_]+m[_]/3,l[_]+h[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-h[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const qs=new Set;function wi(){for(let e of qs)e.syncRect(!0)}gn&&(ql(So,fn,wi),ql(yo,fn,wi,!0),ql(Zn,fn,()=>{bt.pxRatio=ze}));const Wu=ur(),Uu=rr();function xi(e,l,a,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ks(c,u,l,a))}function Yu(e,l){return e.map((a,n)=>n==0?{}:Dt({},l,a))}function Ks(e,l,a,n){return Dt({},l==0?a:n,e)}function cr(e,l,a){return l==null?pn:[l,a]}const qu=cr;function Ku(e,l,a){return l==null?pn:Qn(l,a,ea,!0)}function fr(e,l,a,n){return l==null?pn:ns(l,a,e.scales[n].log,!1)}const ju=fr;function dr(e,l,a,n){return l==null?pn:$s(l,a,e.scales[n].log,!1)}const Ju=dr;function Zu(e,l,a,n,i){let c=Xt(Xa(e),Xa(l)),u=l-e,p=ml(i/n*u,a);do{let h=a[p],v=n*h/u;if(v>=i&&c+(h<5?zl.get(h):0)<=17)return[h,v]}while(++p<a.length);return[0,0]}function bi(e){let l,a;return e=e.replace(/(\d+)px/,(n,i)=>(l=Pt((a=+i)*ze))+"px"),[e,l,a]}function Qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let a=Je(l[2]*ze,1);l[0]=l[0].replace(/[0-9.]+px/,a+"px"),l[1]=a})}function bt(e,l,a){const n={mode:Oe(e.mode,1)},i=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let h=!1;n.status=0;const v=n.root=dl(no);if(e.id!=null&&(v.id=e.id),il(v,e.class),e.title){let t=dl(io,v);t.textContent=e.title}const S=gl("canvas"),m=n.ctx=S.getContext("2d"),_=dl(ro,v);ql("click",_,t=>{t.target===k&&(tt!=tn||rt!=ln)&&Ht.click(n,t)},!0);const G=n.under=dl(oo,_);_.appendChild(S);const k=n.over=dl(uo,_);e=hn(e);const W=+Oe(e.pxAlign,1),Q=mi(W);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const ee=e.ms||.001,b=n.series=i==1?xi(e.series||[],ci,vi,!1):Yu(e.series||[null],hi),U=n.axes=xi(e.axes||[],ui,di,!0),C=n.scales={},F=n.bands=e.bands||[];F.forEach(t=>{t.fill=Ce(t.fill||null),t.dir=Oe(t.dir,-1)});const A=i==2?b[1].facets[0].scale:b[0].scale,le={axes:xr,series:vr},j=(e.drawOrder||["axes","series"]).map(t=>le[t]);function J(t){const s=t.distr==3?r=>Cl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Rs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:g}=t,x=g-f;return(o-f)/x}}function ne(t){let s=C[t];if(s==null){let r=(e.scales||Rn)[t]||Rn;if(r.from!=null){ne(r.from);let o=Dt({},C[r.from],r,{key:t});o.valToPct=J(o),C[t]=o}else{s=C[t]=Dt({},t==A?er:Ru,r),s.key=t;let o=s.time,f=s.range,g=Nl(f);if((t!=A||i==2&&!o)&&(g&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ja:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ja:{mode:1,hard:f[1],soft:f[1]}},g=!1),!g&&as(f))){let x=f;f=(T,P,V)=>P==null?pn:Qn(P,V,x)}s.range=Ce(f||(o?qu:t==A?s.distr==3?ju:s.distr==4?Ju:cr:s.distr==3?fr:s.distr==4?dr:Ku)),s.auto=Ce(g?!1:s.auto),s.clamp=Ce(s.clamp||Pu),s._min=s._max=null,s.valToPct=J(s)}}}ne("x"),ne("y"),i==1&&b.forEach(t=>{ne(t.scale)}),U.forEach(t=>{ne(t.scale)});for(let t in e.scales)ne(t);const w=C[A],z=w.distr;let N,X;w.ori==0?(il(v,so),N=c,X=u):(il(v,ao),N=u,X=c);const D={};for(let t in C){let s=C[t];(s.min!=null||s.max!=null)&&(D[t]={min:s.min,max:s.max},s.min=s.max=null)}const K=e.tzDate||(t=>new Date(Pt(t/ee))),M=e.fmtDate||na,Ae=ee==1?au(K):ou(K),me=ii(K,ai(ee==1?su:ru,M)),ce=oi(K,ri(cu,M)),ve=[],ue=n.legend=Dt({},pu,e.legend),Y=n.cursor=Dt({},wu,{drag:{y:i==2}},e.cursor),De=ue.show,Xe=Y.show,Te=ue.markers;ue.idxs=ve,Te.width=Ce(Te.width),Te.dash=Ce(Te.dash),Te.stroke=Ce(Te.stroke),Te.fill=Ce(Te.fill);let xe,Ze,at,Le=[],pt=[],$e,qe=!1,ht={};if(ue.live){const t=b[1]?b[1].values:null;qe=t!=null,$e=qe?t(n,1,0):{_:0};for(let s in $e)ht[s]=Qs}if(De)if(xe=gl("table",go,v),at=gl("tbody",null,xe),ue.mount(n,xe),qe){Ze=gl("thead",null,xe,at);let t=gl("tr",null,Ze);gl("th",null,t);for(var St in $e)gl("th",Ga,t).textContent=St}else il(xe,_o),ue.live&&il(xe,mo);const ye={show:!0},yt={show:!1};function Wt(t,s){if(s==0&&(qe||!ue.live||i==2))return pn;let r=[],o=gl("tr",wo,at,at.childNodes[s]);il(o,t.class),t.show||il(o,Yl);let f=gl("th",null,o);if(Te.show){let T=dl(xo,f);if(s>0){let P=Te.width(n,s);P&&(T.style.border=P+"px "+Te.dash(n,s)+" "+Te.stroke(n,s)),T.style.background=Te.fill(n,s)}}let g=dl(Ga,f);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(Te.show||(g.style.color=t.width>0?Te.stroke(n,s):Te.fill(n,s)),We("click",f,T=>{if(Y._lock)return;ae(T);let P=b.indexOf(t);if((T.ctrlKey||T.metaKey)!=ue.isolate){let V=b.some((H,Z)=>Z>0&&Z!=P&&H.show);b.forEach((H,Z)=>{Z>0&&bl(Z,V?Z==P?ye:yt:ye,!0,Ct.setSeries)})}else bl(P,{show:!t.show},!0,Ct.setSeries)},!1),te&&We(Ba,f,T=>{Y._lock||(ae(T),bl(b.indexOf(t),sn,!0,Ct.setSeries))},!1));for(var x in $e){let T=gl("td",bo,o);T.textContent="--",r.push(T)}return[o,r]}const Lt=new Map;function We(t,s,r,o=!0){const f=Lt.get(s)||{},g=Y.bind[t](n,s,r,o);g&&(ql(t,s,f[t]=g),Lt.set(s,f))}function Ot(t,s,r){const o=Lt.get(s)||{};for(let f in o)(t==null||f==t)&&(Vs(f,s,o[f]),delete o[f]);t==null&&Lt.delete(s)}let Gt=0,Ut=0,de=0,O=0,Pe=0,Ke=0,Kt=Pe,ll=Ke,ot=de,Yt=O,vt=0,kt=0,ut=0,gt=0;n.bbox={};let ul=!1,$t=!1,qt=!1,el=!1,xl=!1,q=!1;function pe(t,s,r){(r||t!=n.width||s!=n.height)&&be(t,s),Ql(!1),qt=!0,$t=!0,Xl()}function be(t,s){n.width=Gt=de=t,n.height=Ut=O=s,Pe=Ke=0,ie(),se();let r=n.bbox;vt=r.left=Wl(Pe*ze,.5),kt=r.top=Wl(Ke*ze,.5),ut=r.width=Wl(de*ze,.5),gt=r.height=Wl(O*ze,.5)}const Ve=3;function R(){let t=!1,s=0;for(;!t;){s++;let r=_r(s),o=wr(s);t=s==Ve||r&&o,t||(be(n.width,n.height),$t=!0)}}function $({width:t,height:s}){pe(t,s)}n.setSize=$;function ie(){let t=!1,s=!1,r=!1,o=!1;U.forEach((f,g)=>{if(f.show&&f._show){let{side:x,_size:T}=f,P=x%2,V=f.label!=null?f.labelSize:0,H=T+V;H>0&&(P?(de-=H,x==3?(Pe+=H,o=!0):r=!0):(O-=H,x==0?(Ke+=H,t=!0):s=!0))}}),Qe[0]=t,Qe[1]=r,Qe[2]=s,Qe[3]=o,de-=Ue[1]+Ue[3],Pe+=Ue[3],O-=Ue[2]+Ue[0],Ke+=Ue[0]}function se(){let t=Pe+de,s=Ke+O,r=Pe,o=Ke;function f(g,x){switch(g){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}U.forEach((g,x)=>{if(g.show&&g._show){let T=g.side;g._pos=f(T,g._size),g.label!=null&&(g._lpos=f(T,g.labelSize))}})}if(Y.dataIdx==null){let t=Y.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Ce(t.prox),o=t.bias??=0;Y.dataIdx=(f,g,x,T)=>{if(g==0)return x;let P=x,V=r(f,g,x,T)??je,H=V>=0&&V<je,Z=w.ori==0?de:O,_e=Y.left,Ne=l[0],Fe=l[g];if(s.has(Fe[x])){P=null;let Me=null,he=null,re;if(o==0||o==-1)for(re=x;Me==null&&re-- >0;)s.has(Fe[re])||(Me=re);if(o==0||o==1)for(re=x;he==null&&re++<Fe.length;)s.has(Fe[re])||(he=re);if(Me!=null||he!=null)if(H){let nt=Me==null?-1/0:N(Ne[Me],w,Z,0),_t=he==null?1/0:N(Ne[he],w,Z,0),Bt=_e-nt,Ye=_t-_e;Bt<=Ye?Bt<=V&&(P=Me):Ye<=V&&(P=he)}else P=he==null?Me:Me==null?he:x-Me<=he-x?Me:he}else H&&Rt(_e-N(Ne[x],w,Z,0))>V&&(P=null);return P}}const ae=t=>{Y.event=t};Y.idxs=ve,Y._lock=!1;let B=Y.points;B.show=Ce(B.show),B.size=Ce(B.size),B.stroke=Ce(B.stroke),B.width=Ce(B.width),B.fill=Ce(B.fill);const L=n.focus=Dt({},e.focus||{alpha:.3},Y.focus),te=L.prox>=0,ge=te&&B.one;let oe=[],Ge=[],it=[];function Vt(t,s){let r=B.show(n,s);if(r instanceof HTMLElement)return il(r,vo),il(r,t.class),Tl(r,-10,-10,de,O),k.insertBefore(r,oe[s]),r}function ct(t,s){if(i==1||s>0){let r=i==1&&C[t.scale].time,o=t.value;t.value=r?ti(o)?oi(K,ri(o,M)):o||ce:o||Cu,t.label=t.label||(r?bu:xu)}if(ge||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Wu||Ro,t.fillTo=Ce(t.fillTo||Fu),t.pxAlign=+Oe(t.pxAlign,W),t.pxRound=mi(t.pxAlign),t.stroke=Ce(t.stroke||null),t.fill=Ce(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Du(Xt(1,t.width),1),o=t.points=Dt({},{size:r,width:Xt(1,r*.2),stroke:t.stroke,space:r*2,paths:Uu,_stroke:null,_fill:null},t.points);o.show=Ce(o.show),o.filter=Ce(o.filter),o.fill=Ce(o.fill),o.stroke=Ce(o.stroke),o.paths=Ce(o.paths),o.pxAlign=t.pxAlign}if(De){let r=Wt(t,s);Le.splice(s,0,r[0]),pt.splice(s,0,r[1]),ue.values.push(null)}if(Xe){ve.splice(s,0,null);let r=null;ge?s==0&&(r=Vt(t,s)):s>0&&(r=Vt(t,s)),oe.splice(s,0,r),Ge.splice(s,0,0),it.splice(s,0,0)}It("addSeries",s)}function At(t,s){s=s??b.length,t=i==1?Ks(t,s,ci,vi):Ks(t,s,{},hi),b.splice(s,0,t),ct(b[s],s)}n.addSeries=At;function ft(t){if(b.splice(t,1),De){ue.values.splice(t,1),pt.splice(t,1);let s=Le.splice(t,1)[0];Ot(null,s.firstChild),s.remove()}Xe&&(ve.splice(t,1),oe.splice(t,1)[0].remove(),Ge.splice(t,1),it.splice(t,1)),It("delSeries",t)}n.delSeries=ft;const Qe=[!1,!1,!1,!1];function Ee(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=C[t.scale];o==null&&(t.scale=r?b[1].scale:A,o=C[t.scale]);let f=o.time;t.size=Ce(t.size),t.space=Ce(t.space),t.rotate=Ce(t.rotate),Nl(t.incrs)&&t.incrs.forEach(x=>{!zl.has(x)&&zl.set(x,Oi(x))}),t.incrs=Ce(t.incrs||(o.distr==2?tu:f?ee==1?nu:iu:Ul)),t.splits=Ce(t.splits||(f&&o.distr==1?Ae:o.distr==3?Ws:o.distr==4?ku:yu)),t.stroke=Ce(t.stroke),t.grid.stroke=Ce(t.grid.stroke),t.ticks.stroke=Ce(t.ticks.stroke),t.border.stroke=Ce(t.border.stroke);let g=t.values;t.values=Nl(g)&&!Nl(g[0])?Ce(g):f?Nl(g)?ii(K,ai(g,M)):ti(g)?uu(K,g):g||me:g||Su,t.filter=Ce(t.filter||(o.distr>=3&&o.log==10?Mu:o.distr==3&&o.log==2?Au:Ri)),t.font=bi(t.font),t.labelFont=bi(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(Qe[s]=!0,t._el=dl(co,_))}}function we(t,s,r,o){let[f,g,x,T]=r,P=s%2,V=0;return P==0&&(T||g)&&(V=s==0&&!f||s==2&&!x?Pt(ui.size/3):0),P==1&&(f||x)&&(V=s==1&&!g||s==3&&!T?Pt(di.size/2):0),V}const Tt=n.padding=(e.padding||[we,we,we,we]).map(t=>Ce(Oe(t,we))),Ue=n._padding=Tt.map((t,s)=>t(n,s,Qe,0));let et,Et=null,mt=null;const Il=i==1?b[0].idxs:null;let jt=null,Ll=!1;function Jl(t,s){if(l=t??[],n.data=n._data=l,i==2){et=0;for(let r=1;r<b.length;r++)et+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),jt=l[0],et=jt.length;let r=l;if(z==2){r=l.slice();let o=r[0]=Array(et);for(let f=0;f<et;f++)o[f]=f}n._data=l=r}if(Ql(!0),It("setData"),z==2&&(qt=!0),s!==!1){let r=w;r.auto(n,Ll)?Zl():Fl(A,r.min,r.max),el=el||Y.left>=0,q=!0,Xl()}}n.setData=Jl;function Zl(){Ll=!0;let t,s;i==1&&(et>0?(Et=Il[0]=0,mt=Il[1]=et-1,t=l[0][Et],s=l[0][mt],z==2?(t=Et,s=mt):t==s&&(z==3?[t,s]=ns(t,t,w.log,!1):z==4?[t,s]=$s(t,t,w.log,!1):w.time?s=t+Pt(86400/ee):[t,s]=Qn(t,s,ea,!0))):(Et=Il[0]=t=null,mt=Il[1]=s=null)),Fl(A,t,s)}let Pl,Mt,cs,fs,ds,ps,hs,vs,gs,tl;function ca(t,s,r,o,f,g){t??=za,r??=la,o??="butt",f??=za,g??="round",t!=Pl&&(m.strokeStyle=Pl=t),f!=Mt&&(m.fillStyle=Mt=f),s!=cs&&(m.lineWidth=cs=s),g!=ds&&(m.lineJoin=ds=g),o!=ps&&(m.lineCap=ps=o),r!=fs&&m.setLineDash(fs=r)}function fa(t,s,r,o){s!=Mt&&(m.fillStyle=Mt=s),t!=hs&&(m.font=hs=t),r!=vs&&(m.textAlign=vs=r),o!=gs&&(m.textBaseline=gs=o)}function ms(t,s,r,o,f=0){if(o.length>0&&t.auto(n,Ll)&&(s==null||s.min==null)){let g=Oe(Et,0),x=Oe(mt,o.length-1),T=r.min==null?Mo(o,g,x,f,t.distr==3):[r.min,r.max];t.min=_l(t.min,r.min=T[0]),t.max=Xt(t.max,r.max=T[1])}}const da={min:null,max:null};function pr(){for(let o in C){let f=C[o];D[o]==null&&(f.min==null||D[A]!=null&&f.auto(n,Ll))&&(D[o]=da)}for(let o in C){let f=C[o];D[o]==null&&f.from!=null&&D[f.from]!=null&&(D[o]=da)}D[A]!=null&&Ql(!0);let t={};for(let o in D){let f=D[o];if(f!=null){let g=t[o]=hn(C[o],Go);if(f.min!=null)Dt(g,f);else if(o!=A||i==2)if(et==0&&g.from==null){let x=g.range(n,null,null,o);g.min=x[0],g.max=x[1]}else g.min=je,g.max=-je}}if(et>0){b.forEach((o,f)=>{if(i==1){let g=o.scale,x=D[g];if(x==null)return;let T=t[g];if(f==0){let P=T.range(n,T.min,T.max,g);T.min=P[0],T.max=P[1],Et=ml(T.min,l[0]),mt=ml(T.max,l[0]),mt-Et>1&&(l[0][Et]<T.min&&Et++,l[0][mt]>T.max&&mt--),o.min=jt[Et],o.max=jt[mt]}else o.show&&o.auto&&ms(T,x,o,l[f],o.sorted);o.idxs[0]=Et,o.idxs[1]=mt}else if(f>0&&o.show&&o.auto){let[g,x]=o.facets,T=g.scale,P=x.scale,[V,H]=l[f],Z=t[T],_e=t[P];Z!=null&&ms(Z,D[T],g,V,g.sorted),_e!=null&&ms(_e,D[P],x,H,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],g=D[o];if(f.from==null&&(g==null||g.min==null)){let x=f.range(n,f.min==je?null:f.min,f.max==-je?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let g=t[f.from];if(g.min==null)f.min=f.max=null;else{let x=f.range(n,g.min,g.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],g=C[o];if(g.min!=f.min||g.max!=f.max){g.min=f.min,g.max=f.max;let x=g.distr;g._min=x==3?Cl(g.min):x==4?Rs(g.min,g.asinh):x==100?g.fwd(g.min):g.min,g._max=x==3?Cl(g.max):x==4?Rs(g.max,g.asinh):x==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){b.forEach((o,f)=>{i==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)qt=!0,It("setScale",o);Xe&&Y.left>=0&&(el=q=!0)}for(let o in D)D[o]=null}function hr(t){let s=Hs(Et-1,0,et-1),r=Hs(mt+1,0,et-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<et-1;)r++;return[s,r]}function vr(){if(et>0){let t=b.some(s=>s._focus)&&tl!=L.alpha;t&&(m.globalAlpha=tl=L.alpha),b.forEach((s,r)=>{if(r>0&&s.show&&(pa(r,!1),pa(r,!0),s._paths==null)){let o=tl;tl!=s.alpha&&(m.globalAlpha=tl=s.alpha);let f=i==2?[0,l[r][0].length-1]:hr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),tl!=o&&(m.globalAlpha=tl=o)}}),b.forEach((s,r)=>{if(r>0&&s.show){let o=tl;tl!=s.alpha&&(m.globalAlpha=tl=s.alpha),s._paths!=null&&ha(r,!1);{let f=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,Et,mt,f),x=s.points.filter(n,r,g,f);(g||x)&&(s.points._paths=s.points.paths(n,r,Et,mt,x),ha(r,!0))}tl!=o&&(m.globalAlpha=tl=o),It("drawSeries",r)}}),t&&(m.globalAlpha=tl=1)}}function pa(t,s){let r=s?b[t].points:b[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function ha(t,s){let r=s?b[t].points:b[t],{stroke:o,fill:f,clip:g,flags:x,_stroke:T=r._stroke,_fill:P=r._fill,_width:V=r.width}=r._paths;V=Je(V*ze,3);let H=null,Z=V%2/2;s&&P==null&&(P=V>0?"#fff":T);let _e=r.pxAlign==1&&Z>0;if(_e&&m.translate(Z,Z),!s){let Ne=vt-V/2,Fe=kt-V/2,Me=ut+V,he=gt+V;H=new Path2D,H.rect(Ne,Fe,Me,he)}s?_s(T,V,r.dash,r.cap,P,o,f,x,g):gr(t,T,V,r.dash,r.cap,P,o,f,x,H,g),_e&&m.translate(-Z,-Z)}function gr(t,s,r,o,f,g,x,T,P,V,H){let Z=!1;P!=0&&F.forEach((_e,Ne)=>{if(_e.series[0]==t){let Fe=b[_e.series[1]],Me=l[_e.series[1]],he=(Fe._paths||Rn).band;Nl(he)&&(he=_e.dir==1?he[0]:he[1]);let re,nt=null;Fe.show&&he&&Co(Me,Et,mt)?(nt=_e.fill(n,Ne)||g,re=Fe._paths.clip):he=null,_s(s,r,o,f,nt,x,T,P,V,H,re,he),Z=!0}}),Z||_s(s,r,o,f,g,x,T,P,V,H)}const va=vn|Ys;function _s(t,s,r,o,f,g,x,T,P,V,H,Z){ca(t,s,r,o,f),(P||V||Z)&&(m.save(),P&&m.clip(P),V&&m.clip(V)),Z?(T&va)==va?(m.clip(Z),H&&m.clip(H),In(f,x),zn(t,g,s)):T&Ys?(In(f,x),m.clip(Z),zn(t,g,s)):T&vn&&(m.save(),m.clip(Z),H&&m.clip(H),In(f,x),m.restore(),zn(t,g,s)):(In(f,x),zn(t,g,s)),(P||V||Z)&&m.restore()}function zn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=Pl=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function In(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Mt=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function mr(t,s,r,o){let f=U[t],g;if(o<=0)g=[0,0];else{let x=f._space=f.space(n,t,s,r,o),T=f._incrs=f.incrs(n,t,s,r,o,x);g=Zu(s,r,T,o,x)}return f._found=g}function ws(t,s,r,o,f,g,x,T,P,V){let H=x%2/2;W==1&&m.translate(H,H),ca(T,x,P,V,T),m.beginPath();let Z,_e,Ne,Fe,Me=f+(o==0||o==3?-g:g);r==0?(_e=f,Fe=Me):(Z=f,Ne=Me);for(let he=0;he<t.length;he++)s[he]!=null&&(r==0?Z=Ne=t[he]:_e=Fe=t[he],m.moveTo(Z,_e),m.lineTo(Ne,Fe));m.stroke(),W==1&&m.translate(-H,-H)}function _r(t){let s=!0;return U.forEach((r,o)=>{if(!r.show)return;let f=C[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Ql(!1));return}else r._show||(s=!1,r._show=!0,Ql(!1));let g=r.side,x=g%2,{min:T,max:P}=f,[V,H]=mr(o,T,P,x==0?de:O);if(H==0)return;let Z=f.distr==2,_e=r._splits=r.splits(n,o,T,P,V,H,Z),Ne=f.distr==2?_e.map(re=>jt[re]):_e,Fe=f.distr==2?jt[_e[1]]-jt[_e[0]]:V,Me=r._values=r.values(n,r.filter(n,Ne,o,H,Fe),o,H,Fe);r._rotate=g==2?r.rotate(n,Me,o,H):0;let he=r._size;r._size=pl(r.size(n,Me,o,t)),he!=null&&r._size!=he&&(s=!1)}),s}function wr(t){let s=!0;return Tt.forEach((r,o)=>{let f=r(n,o,Qe,t);f!=Ue[o]&&(s=!1),Ue[o]=f}),s}function xr(){for(let t=0;t<U.length;t++){let s=U[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,g,x=s.stroke(n,t),T=r==0||r==3?-1:1,[P,V]=s._found;if(s.label!=null){let Zt=s.labelGap*T,al=Pt((s._lpos+Zt)*ze);fa(s.labelFont[0],x,"center",r==2?Tn:Na),m.save(),o==1?(f=g=0,m.translate(al,Pt(kt+gt/2)),m.rotate((r==3?-Kn:Kn)/2)):(f=Pt(vt+ut/2),g=al);let Hl=Li(s.label)?s.label(n,t,P,V):s.label;m.fillText(Hl,f,g),m.restore()}if(V==0)continue;let H=C[s.scale],Z=o==0?ut:gt,_e=o==0?vt:kt,Ne=s._splits,Fe=H.distr==2?Ne.map(Zt=>jt[Zt]):Ne,Me=H.distr==2?jt[Ne[1]]-jt[Ne[0]]:P,he=s.ticks,re=s.border,nt=he.show?he.size:0,_t=Pt(nt*ze),Bt=Pt((s.alignTo==2?s._size-nt-s.gap:s.gap)*ze),Ye=s._rotate*-Kn/180,wt=Q(s._pos*ze),nl=(_t+Bt)*T,Jt=wt+nl;g=o==0?Jt:0,f=o==1?Jt:0;let cl=s.font[0],hl=s.align==1?rn:s.align==2?Ds:Ye>0?rn:Ye<0?Ds:o==0?"center":r==3?Ds:rn,yl=Ye||o==1?"middle":r==2?Tn:Na;fa(cl,x,hl,yl);let sl=s.font[1]*s.lineGap,fl=Ne.map(Zt=>Q(p(Zt,H,Z,_e))),vl=s._values;for(let Zt=0;Zt<vl.length;Zt++){let al=vl[Zt];if(al!=null){o==0?f=fl[Zt]:g=fl[Zt],al=""+al;let Hl=al.indexOf(`
`)==-1?[al]:al.split(/\n/gm);for(let Qt=0;Qt<Hl.length;Qt++){let Fa=Hl[Qt];Ye?(m.save(),m.translate(f,g+Qt*sl),m.rotate(Ye),m.fillText(Fa,0,0),m.restore()):m.fillText(Fa,f,g+Qt*sl)}}}he.show&&ws(fl,he.filter(n,Fe,t,V,Me),o,r,wt,_t,Je(he.width*ze,3),he.stroke(n,t),he.dash,he.cap);let kl=s.grid;kl.show&&ws(fl,kl.filter(n,Fe,t,V,Me),o,o==0?2:1,o==0?kt:vt,o==0?gt:ut,Je(kl.width*ze,3),kl.stroke(n,t),kl.dash,kl.cap),re.show&&ws([wt],[1],o==0?1:0,o==0?1:2,o==1?kt:vt,o==1?gt:ut,Je(re.width*ze,3),re.stroke(n,t),re.dash,re.cap)}It("drawAxes")}function Ql(t){b.forEach((s,r)=>{r>0&&(s._paths=null,t&&(i==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Bn=!1,xs=!1,wn=[];function br(){xs=!1;for(let t=0;t<wn.length;t++)It(...wn[t]);wn.length=0}function Xl(){Bn||(Wo(ga),Bn=!0)}function Sr(t,s=!1){Bn=!0,xs=s,t(n),ga(),s&&wn.length>0&&queueMicrotask(br)}n.batch=Sr;function ga(){if(ul&&(pr(),ul=!1),qt&&(R(),qt=!1),$t){if(st(G,rn,Pe),st(G,Tn,Ke),st(G,Mn,de),st(G,An,O),st(k,rn,Pe),st(k,Tn,Ke),st(k,Mn,de),st(k,An,O),st(_,Mn,Gt),st(_,An,Ut),S.width=Pt(Gt*ze),S.height=Pt(Ut*ze),U.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let g=f===3||f===0?r:0,x=f%2==1;st(t,x?"left":"top",o-g),st(t,x?"width":"height",r),st(t,x?"top":"left",x?Ke:Pe),st(t,x?"height":"width",x?O:de),Bs(t,Yl)}else il(t,Yl)}),Pl=Mt=cs=ds=ps=hs=vs=gs=fs=null,tl=1,Sn(!0),Pe!=Kt||Ke!=ll||de!=ot||O!=Yt){Ql(!1);let t=de/ot,s=O/Yt;if(Xe&&!el&&Y.left>=0){Y.left*=t,Y.top*=s,$l&&Tl($l,Pt(Y.left),0,de,O),en&&Tl(en,0,Pt(Y.top),de,O);for(let r=0;r<oe.length;r++){let o=oe[r];o!=null&&(Ge[r]*=t,it[r]*=s,Tl(o,pl(Ge[r]),pl(it[r]),de,O))}}if(lt.show&&!xl&&lt.left>=0&&lt.width>0){lt.left*=t,lt.width*=t,lt.top*=s,lt.height*=s;for(let r in Es)st(nn,r,lt[r])}Kt=Pe,ll=Ke,ot=de,Yt=O}It("setSize"),$t=!1}Gt>0&&Ut>0&&(m.clearRect(0,0,S.width,S.height),It("drawClear"),j.forEach(t=>t()),It("draw")),lt.show&&xl&&(Vn(lt),xl=!1),Xe&&el&&(Vl(null,!0,!1),el=!1),ue.show&&ue.live&&q&&(ks(),q=!1),h||(h=!0,n.status=1,It("ready")),Ll=!1,Bn=!1}n.redraw=(t,s)=>{qt=s||!1,t!==!1?Fl(A,w.min,w.max):Xl()};function bs(t,s){let r=C[t];if(r.from==null){if(et==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(et>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==A&&r.distr==2&&et>0&&(s.min=ml(s.min,l[0]),s.max=ml(s.max,l[0]),s.min==s.max&&s.max++),D[t]=s,ul=!0,Xl()}}n.setScale=bs;let Ss,ys,$l,en,ma,_a,tn,ln,wa,xa,tt,rt,Rl=!1;const Ht=Y.drag;let Nt=Ht.x,zt=Ht.y;Xe&&(Y.x&&(Ss=dl(po,k)),Y.y&&(ys=dl(ho,k)),w.ori==0?($l=Ss,en=ys):($l=ys,en=Ss),tt=Y.left,rt=Y.top);const lt=n.select=Dt({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),nn=lt.show?dl(fo,lt.over?k:G):null;function Vn(t,s){if(lt.show){for(let r in t)lt[r]=t[r],r in Es&&st(nn,r,t[r]);s!==!1&&It("setSelect")}}n.setSelect=Vn;function yr(t){if(b[t].show)De&&Bs(Le[t],Yl);else if(De&&il(Le[t],Yl),Xe){let r=ge?oe[0]:oe[t];r!=null&&Tl(r,-10,-10,de,O)}}function Fl(t,s,r){bs(t,{min:s,max:r})}function bl(t,s,r,o){s.focus!=null&&Ar(t),s.show!=null&&b.forEach((f,g)=>{g>0&&(t==g||t==null)&&(f.show=s.show,yr(g),i==2?(Fl(f.facets[0].scale,null,null),Fl(f.facets[1].scale,null,null)):Fl(f.scale,null,null),Xl())}),r!==!1&&It("setSeries",t,s),o&&yn("setSeries",n,t,s)}n.setSeries=bl;function kr(t,s){Dt(F[t],s)}function Tr(t,s){t.fill=Ce(t.fill||null),t.dir=Oe(t.dir,-1),s=s??F.length,F.splice(s,0,t)}function Er(t){t==null?F.length=0:F.splice(t,1)}n.addBand=Tr,n.setBand=kr,n.delBand=Er;function Mr(t,s){b[t].alpha=s,Xe&&oe[t]!=null&&(oe[t].style.opacity=s),De&&Le[t]&&(Le[t].style.opacity=s)}let El,Ol,Bl;const sn={focus:!0};function Ar(t){if(t!=Bl){let s=t==null,r=L.alpha!=1;b.forEach((o,f)=>{if(i==1||f>0){let g=s||f==0||f==t;o._focus=s?null:g,r&&Mr(f,g?1:L.alpha)}}),Bl=t,r&&Xl()}}De&&te&&We(Va,xe,t=>{Y._lock||(ae(t),Bl!=null&&bl(null,sn,!0,Ct.setSeries))});function Sl(t,s,r){let o=C[s];r&&(t=t/ze-(o.ori==1?Ke:Pe));let f=de;o.ori==1&&(f=O,t=f-t),o.dir==-1&&(t=f-t);let g=o._min,x=o._max,T=t/f,P=g+(x-g)*T,V=o.distr;return V==3?dn(10,P):V==4?Lo(P,o.asinh):V==100?o.bwd(P):P}function Cr(t,s){let r=Sl(t,A,s);return ml(r,l[0],Et,mt)}n.valToIdx=t=>ml(t,l[0]),n.posToIdx=Cr,n.posToVal=Sl,n.valToPos=(t,s,r)=>C[s].ori==0?c(t,C[s],r?ut:de,r?vt:0):u(t,C[s],r?gt:O,r?kt:0),n.setCursor=(t,s,r)=>{tt=t.left,rt=t.top,Vl(null,s,r)};function ba(t,s){st(nn,rn,lt.left=t),st(nn,Mn,lt.width=s)}function Sa(t,s){st(nn,Tn,lt.top=t),st(nn,An,lt.height=s)}let xn=w.ori==0?ba:Sa,bn=w.ori==1?ba:Sa;function Dr(){if(De&&ue.live)for(let t=i==2?1:0;t<b.length;t++){if(t==0&&qe)continue;let s=ue.values[t],r=0;for(let o in s)pt[t][r++].firstChild.nodeValue=s[o]}}function ks(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{ve[o]=r}):Oo(t.idx)||ve.fill(t.idx),ue.idx=ve[0]),De&&ue.live){for(let r=0;r<b.length;r++)(r>0||i==1&&!qe)&&Lr(r,ve[r]);Dr()}q=!1,s!==!1&&It("setLegend")}n.setLegend=ks;function Lr(t,s){let r=b[t],o=t==0&&z==2?jt:l[t],f;qe?f=r.values(n,t,s)??ht:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?ht:{_:f}),ue.values[t]=f}function Vl(t,s,r){wa=tt,xa=rt,[tt,rt]=Y.move(n,tt,rt),Y.left=tt,Y.top=rt,Xe&&($l&&Tl($l,Pt(tt),0,de,O),en&&Tl(en,0,Pt(rt),de,O));let o,f=Et>mt;El=je,Ol=null;let g=w.ori==0?de:O,x=w.ori==1?de:O;if(tt<0||et==0||f){o=Y.idx=null;for(let T=0;T<b.length;T++){let P=oe[T];P!=null&&Tl(P,-10,-10,de,O)}te&&bl(null,sn,!0,t==null&&Ct.setSeries),ue.live&&(ve.fill(o),q=!0)}else{let T,P,V;i==1&&(T=w.ori==0?tt:rt,P=Sl(T,A),o=Y.idx=ml(P,l[0],Et,mt),V=N(l[0][o],w,g,0));let H=-10,Z=-10,_e=0,Ne=0,Fe=!0,Me="",he="";for(let re=i==2?1:0;re<b.length;re++){let nt=b[re],_t=ve[re],Bt=_t==null?null:i==1?l[re][_t]:l[re][1][_t],Ye=Y.dataIdx(n,re,o,P),wt=Ye==null?null:i==1?l[re][Ye]:l[re][1][Ye];if(q=q||wt!=Bt||Ye!=_t,ve[re]=Ye,re>0&&nt.show){let nl=Ye==null?-10:Ye==o?V:N(i==1?l[0][Ye]:l[re][0][Ye],w,g,0),Jt=wt==null?-10:X(wt,i==1?C[nt.scale]:C[nt.facets[1].scale],x,0);if(te&&wt!=null){let cl=w.ori==1?tt:rt,hl=Rt(L.dist(n,re,Ye,Jt,cl));if(hl<El){let yl=L.bias;if(yl!=0){let sl=Sl(cl,nt.scale),fl=wt>=0?1:-1,vl=sl>=0?1:-1;vl==fl&&(vl==1?yl==1?wt>=sl:wt<=sl:yl==1?wt<=sl:wt>=sl)&&(El=hl,Ol=re)}else El=hl,Ol=re}}if(q||ge){let cl,hl;w.ori==0?(cl=nl,hl=Jt):(cl=Jt,hl=nl);let yl,sl,fl,vl,kl,Zt,al=!0,Hl=B.bbox;if(Hl!=null){al=!1;let Qt=Hl(n,re);fl=Qt.left,vl=Qt.top,yl=Qt.width,sl=Qt.height}else fl=cl,vl=hl,yl=sl=B.size(n,re);if(Zt=B.fill(n,re),kl=B.stroke(n,re),ge)re==Ol&&El<=L.prox&&(H=fl,Z=vl,_e=yl,Ne=sl,Fe=al,Me=Zt,he=kl);else{let Qt=oe[re];Qt!=null&&(Ge[re]=fl,it[re]=vl,ja(Qt,yl,sl,al),qa(Qt,Zt,kl),Tl(Qt,pl(fl),pl(vl),de,O))}}}}if(ge){let re=L.prox,nt=Bl==null?El<=re:El>re||Ol!=Bl;if(q||nt){let _t=oe[0];_t!=null&&(Ge[0]=H,it[0]=Z,ja(_t,_e,Ne,Fe),qa(_t,Me,he),Tl(_t,pl(H),pl(Z),de,O))}}}if(lt.show&&Rl)if(t!=null){let[T,P]=Ct.scales,[V,H]=Ct.match,[Z,_e]=t.cursor.sync.scales,Ne=t.cursor.drag;if(Nt=Ne._x,zt=Ne._y,Nt||zt){let{left:Fe,top:Me,width:he,height:re}=t.select,nt=t.scales[Z].ori,_t=t.posToVal,Bt,Ye,wt,nl,Jt,cl=T!=null&&V(T,Z),hl=P!=null&&H(P,_e);cl&&Nt?(nt==0?(Bt=Fe,Ye=he):(Bt=Me,Ye=re),wt=C[T],nl=N(_t(Bt,Z),wt,g,0),Jt=N(_t(Bt+Ye,Z),wt,g,0),xn(_l(nl,Jt),Rt(Jt-nl))):xn(0,g),hl&&zt?(nt==1?(Bt=Fe,Ye=he):(Bt=Me,Ye=re),wt=C[P],nl=X(_t(Bt,_e),wt,x,0),Jt=X(_t(Bt+Ye,_e),wt,x,0),bn(_l(nl,Jt),Rt(Jt-nl))):bn(0,x)}else Ms()}else{let T=Rt(wa-ma),P=Rt(xa-_a);if(w.ori==1){let _e=T;T=P,P=_e}Nt=Ht.x&&T>=Ht.dist,zt=Ht.y&&P>=Ht.dist;let V=Ht.uni;V!=null?Nt&&zt&&(Nt=T>=V,zt=P>=V,!Nt&&!zt&&(P>T?zt=!0:Nt=!0)):Ht.x&&Ht.y&&(Nt||zt)&&(Nt=zt=!0);let H,Z;Nt&&(w.ori==0?(H=tn,Z=tt):(H=ln,Z=rt),xn(_l(H,Z),Rt(Z-H)),zt||bn(0,x)),zt&&(w.ori==1?(H=tn,Z=tt):(H=ln,Z=rt),bn(_l(H,Z),Rt(Z-H)),Nt||xn(0,g)),!Nt&&!zt&&(xn(0,0),bn(0,0))}if(Ht._x=Nt,Ht._y=zt,t==null){if(r){if(Ra!=null){let[T,P]=Ct.scales;Ct.values[0]=T!=null?Sl(w.ori==0?tt:rt,T):null,Ct.values[1]=P!=null?Sl(w.ori==1?tt:rt,P):null}yn(Ls,n,tt,rt,de,O,o)}if(te){let T=r&&Ct.setSeries,P=L.prox;Bl==null?El<=P&&bl(Ol,sn,!0,T):El>P?bl(null,sn,!0,T):Ol!=Bl&&bl(Ol,sn,!0,T)}}q&&(ue.idx=o,ks()),s!==!1&&It("setCursor")}let Gl=null;Object.defineProperty(n,"rect",{get(){return Gl==null&&Sn(!1),Gl}});function Sn(t=!1){t?Gl=null:(Gl=k.getBoundingClientRect(),It("syncRect",Gl))}function ya(t,s,r,o,f,g,x){Y._lock||Rl&&t!=null&&t.movementX==0&&t.movementY==0||(Ts(t,s,r,o,f,g,x,!1,t!=null),t!=null?Vl(null,!0,!0):Vl(s,!0,!1))}function Ts(t,s,r,o,f,g,x,T,P){if(Gl==null&&Sn(!1),ae(t),t!=null)r=t.clientX-Gl.left,o=t.clientY-Gl.top;else{if(r<0||o<0){tt=-10,rt=-10;return}let[V,H]=Ct.scales,Z=s.cursor.sync,[_e,Ne]=Z.values,[Fe,Me]=Z.scales,[he,re]=Ct.match,nt=s.axes[0].side%2==1,_t=w.ori==0?de:O,Bt=w.ori==1?de:O,Ye=nt?g:f,wt=nt?f:g,nl=nt?o:r,Jt=nt?r:o;if(Fe!=null?r=he(V,Fe)?p(_e,C[V],_t,0):-10:r=_t*(nl/Ye),Me!=null?o=re(H,Me)?p(Ne,C[H],Bt,0):-10:o=Bt*(Jt/wt),w.ori==1){let cl=r;r=o,o=cl}}P&&(s==null||s.cursor.event.type==Ls)&&((r<=1||r>=de-1)&&(r=Wl(r,de)),(o<=1||o>=O-1)&&(o=Wl(o,O))),T?(ma=r,_a=o,[tn,ln]=Y.move(n,r,o)):(tt=r,rt=o)}const Es={width:0,height:0,left:0,top:0};function Ms(){Vn(Es,!1)}let ka,Ta,Ea,Ma;function Aa(t,s,r,o,f,g,x){Rl=!0,Nt=zt=Ht._x=Ht._y=!1,Ts(t,s,r,o,f,g,x,!0,!1),t!=null&&(We(Ps,zs,Ca,!1),yn(Ia,n,tn,ln,de,O,null));let{left:T,top:P,width:V,height:H}=lt;ka=T,Ta=P,Ea=V,Ma=H}function Ca(t,s,r,o,f,g,x){Rl=Ht._x=Ht._y=!1,Ts(t,s,r,o,f,g,x,!1,!0);let{left:T,top:P,width:V,height:H}=lt,Z=V>0||H>0,_e=ka!=T||Ta!=P||Ea!=V||Ma!=H;if(Z&&_e&&Vn(lt),Ht.setScale&&Z&&_e){let Ne=T,Fe=V,Me=P,he=H;if(w.ori==1&&(Ne=P,Fe=H,Me=T,he=V),Nt&&Fl(A,Sl(Ne,A),Sl(Ne+Fe,A)),zt)for(let re in C){let nt=C[re];re!=A&&nt.from==null&&nt.min!=je&&Fl(re,Sl(Me+he,re),Sl(Me,re))}Ms()}else Y.lock&&(Y._lock=!Y._lock,Vl(s,!0,t!=null));t!=null&&(Ot(Ps,zs),yn(Ps,n,tt,rt,de,O,null))}function Pr(t,s,r,o,f,g,x){if(Y._lock)return;ae(t);let T=Rl;if(Rl){let P=!0,V=!0,H=10,Z,_e;w.ori==0?(Z=Nt,_e=zt):(Z=zt,_e=Nt),Z&&_e&&(P=tt<=H||tt>=de-H,V=rt<=H||rt>=O-H),Z&&P&&(tt=tt<tn?0:de),_e&&V&&(rt=rt<ln?0:O),Vl(null,!0,!0),Rl=!1}tt=-10,rt=-10,ve.fill(null),Vl(null,!0,!0),T&&(Rl=T)}function Da(t,s,r,o,f,g,x){Y._lock||(ae(t),Zl(),Ms(),t!=null&&yn(Ha,n,tt,rt,de,O,null))}function La(){U.forEach(Qu),pe(n.width,n.height,!0)}ql(Zn,fn,La);const an={};an.mousedown=Aa,an.mousemove=ya,an.mouseup=Ca,an.dblclick=Da,an.setSeries=(t,s,r,o)=>{let f=Ct.match[2];r=f(n,s,r),r!=-1&&bl(r,o,!0,!1)},Xe&&(We(Ia,k,Aa),We(Ls,k,ya),We(Ba,k,t=>{ae(t),Sn(!1)}),We(Va,k,Pr),We(Ha,k,Da),qs.add(n),n.syncRect=Sn);const Hn=n.hooks=e.hooks||{};function It(t,s,r){xs?wn.push([t,s,r]):t in Hn&&Hn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Hn[s]=(Hn[s]||[]).concat(t.hooks[s])});const Pa=(t,s,r)=>r,Ct=Dt({key:null,setSeries:!1,filters:{pub:$a,sub:$a},scales:[A,b[1]?b[1].scale:null],match:[ei,ei,Pa],values:[null,null]},Y.sync);Ct.match.length==2&&Ct.match.push(Pa),Y.sync=Ct;const Ra=Ct.key,As=tr(Ra);function yn(t,s,r,o,f,g,x){Ct.filters.pub(t,s,r,o,f,g,x)&&As.pub(t,s,r,o,f,g,x)}As.sub(n);function Rr(t,s,r,o,f,g,x){Ct.filters.sub(t,s,r,o,f,g,x)&&an[t](null,s,r,o,f,g,x)}n.pub=Rr;function Fr(){As.unsub(n),qs.delete(n),Lt.clear(),Vs(Zn,fn,La),v.remove(),xe?.remove(),It("destroy")}n.destroy=Fr;function Cs(){It("init",e,l),Jl(l||e.data,!1),D[A]?bs(A,D[A]):Zl(),xl=lt.show&&(lt.width>0||lt.height>0),el=q=!0,pe(e.width,e.height)}return b.forEach(ct),U.forEach(Ee),a?a instanceof HTMLElement?(a.appendChild(v),Cs()):a(n,Cs):Cs(),n}bt.assign=Dt;bt.fmtNum=ta;bt.rangeNum=Qn;bt.rangeLog=ns;bt.rangeAsinh=$s;bt.orient=jl;bt.pxRatio=ze;bt.join=Ho;bt.fmtDate=na,bt.tzDate=$o;bt.sync=tr;{bt.addGap=Ou,bt.clipGaps=is;let e=bt.paths={points:rr};e.linear=ur,e.stepped=zu,e.bars=Iu,e.spline=Vu}var Xu=Re('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),$u=Re('<span class="estimated-badge svelte-3wi8ix">est</span>'),ec=Re('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),tc=Re('<span class="estimated-badge svelte-3wi8ix">est</span>'),lc=Re("<span> </span> <!>",1),nc=Re('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),sc=Re('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),ac=Re('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function ic(e,l){es(l,!0);const a=.5,n=1.2,i=0,c=100;function u(w,z){const N=[...w].sort((M,Ae)=>M-Ae),X=z/100*(N.length-1),D=Math.floor(X),K=Math.ceil(X);return D===K?N[D]:N[D]+(N[K]-N[D])*(X-D)}let p=Gn(l,"trend",3,null),h=Be(!1),v=Be(""),S=Be(null),m=He(()=>qn.config.temp_units==="C"),_=He(Ei),G=He(Js),k=He(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(ye=>ye.status!=="invalid");if(w.length===0)return null;const z=[...w].sort((ye,yt)=>new Date(ye.timestamp).getTime()-new Date(yt.timestamp).getTime()),N=z[0],X=z[z.length-1],D=z.map(ye=>ye.sg_calibrated??ye.sg_raw).filter(ye=>ye!==null&&ye>=a&&ye<=n),K=z.map(ye=>ye.temp_calibrated??ye.temp_raw).filter(ye=>ye!==null&&ye>=i&&ye<=c);if(D.length===0)return null;const M=D[D.length-1],Ae=D[0],me=u(D,95),ce=u(D,5),ve=new Date(N.timestamp).getTime(),ue=new Date(X.timestamp).getTime(),De=(ue-ve)/(1e3*60*60*24),Xe=De>0?(M-Ae)/De:0;let Te=null,xe=null,Ze=null,at=null;if(K.length>0){const ye=K[K.length-1],yt=K.reduce((We,Ot)=>We+Ot,0)/K.length,Wt=u(K,95),Lt=u(K,5);Te=d(m)?ye:ye*9/5+32,xe=d(m)?yt:yt*9/5+32,Ze=d(m)?Wt:Wt*9/5+32,at=d(m)?Lt:Lt*9/5+32}let Le=0;const pt=.001;for(let ye=D.length-2;ye>=0;ye--)if(Math.abs(D[ye]-M)>pt){const yt=new Date(z[ye+1].timestamp).getTime();Le=(ue-yt)/(1e3*60*60*24);break}let $e=null,qe=null;const ht=l.originalGravity??me,St=l.originalGravity===null;return ht>1&&ht>M&&($e=(ht-M)/(ht-1)*100,qe=(ht-M)*131.25),{currentSg:M,firstSg:Ae,highSg:me,lowSg:ce,currentTemp:Te,avgTemp:xe,highTemp:Ze,lowTemp:at,fermRate:Xe,durationDays:De,daysAtCurrentSg:Le,apparentAttenuation:$e,abv:qe,ogIsEstimated:St,effectiveOg:ht}});function W(){fe(v,l.originalGravity?.toFixed(3)??"",!0),fe(h,!0),setTimeout(()=>d(S)?.focus(),0)}function Q(){const w=d(v).trim();if(!w)l.onOgChange?.(null);else{const z=parseFloat(w);!isNaN(z)&&z>=.99&&z<=1.2&&l.onOgChange?.(z)}fe(h,!1)}function ee(w){w.key==="Enter"?Q():w.key==="Escape"&&fe(h,!1)}function b(w){return un(w)}function U(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function C(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function F(w){return w===null?"--":w.toFixed(1)}function A(w){return w===null?"--":`${w.toFixed(1)}%`}var le=Fn(),j=Al(le);{var J=w=>{var z=sc(),N=E(z),X=E(N),D=E(X),K=E(D,!0);y(D);var M=I(D,2),Ae=I(E(M),2),me=E(Ae,!0);y(Ae),y(M);var ce=I(M,2),ve=I(E(ce),2),ue=E(ve,!0);y(ve),y(ce);var Y=I(ce,2),De=I(E(Y),2),Xe=E(De,!0);y(De),y(Y);var Te=I(Y,2),xe=I(E(Te),2),Ze=E(xe,!0);y(xe),y(Te),y(X);var at=I(X,2),Le=I(E(at),2),pt=I(E(Le),2),$e=E(pt,!0),qe=I($e),ht=E(qe,!0);y(qe),y(pt),y(Le);var St=I(Le,2),ye=I(E(St),2),yt=E(ye,!0),Wt=I(yt),Lt=E(Wt,!0);y(Wt),y(ye),y(St);var We=I(St,2),Ot=I(E(We),2),Gt=E(Ot,!0),Ut=I(Gt),de=E(Ut,!0);y(Ut),y(Ot),y(We);var O=I(We,2),Pe=I(E(O),2),Ke=E(Pe,!0),Kt=I(Ke),ll=E(Kt,!0);y(Kt),y(Pe),y(O),y(at),y(N);var ot=I(N,2),Yt=E(ot),vt=I(E(Yt),2);let kt;var ut=E(vt);y(vt),y(Yt);var gt=I(Yt,2),ul=I(E(gt),2),$t=E(ul,!0);y(ul),y(gt);var qt=I(gt,2),el=I(E(qt),2),xl=E(el,!0);y(el),y(qt);var q=I(qt,2),pe=I(E(q),2);{var be=ge=>{var oe=Xu();Jn(oe),oe.__keydown=ee,js(oe,Ge=>fe(S,Ge),()=>d(S)),Si("blur",oe,Q),Ti(oe,()=>d(v),Ge=>fe(v,Ge)),ke(ge,oe)},Ve=ge=>{var oe=Fn(),Ge=Al(oe);{var it=ct=>{var At=ec();At.__click=W;var ft=E(At);let Qe;var Ee=E(ft,!0);y(ft);var we=I(ft,2);{var Tt=Ue=>{var et=$u();ke(Ue,et)};dt(we,Ue=>{d(k).ogIsEstimated&&Ue(Tt)})}Ml(2),y(At),xt(Ue=>{cn(At,"title",d(k).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Qe=wl(ft,1,"stat-value svelte-3wi8ix",null,Qe,{estimated:d(k).ogIsEstimated}),Se(Ee,Ue)},[()=>b(d(k).effectiveOg)]),ke(ct,At)},Vt=ct=>{var At=lc(),ft=Al(At);let Qe;var Ee=E(ft,!0);y(ft);var we=I(ft,2);{var Tt=Ue=>{var et=tc();ke(Ue,et)};dt(we,Ue=>{d(k).ogIsEstimated&&Ue(Tt)})}xt(Ue=>{Qe=wl(ft,1,"stat-value svelte-3wi8ix",null,Qe,{estimated:d(k).ogIsEstimated}),Se(Ee,Ue)},[()=>b(d(k).effectiveOg)]),ke(ct,At)};dt(Ge,ct=>{l.onOgChange?ct(it):ct(Vt,!1)},!0)}ke(ge,oe)};dt(pe,ge=>{l.onOgChange&&d(h)?ge(be):ge(Ve,!1)})}y(q);var R=I(q,2),$=I(E(R),2),ie=E($,!0);y($),y(R);var se=I(R,2),ae=I(E(se),2),B=E(ae,!0);y(ae),y(se);var L=I(se,2);{var te=ge=>{var oe=nc(),Ge=I(E(oe),2),it=E(Ge,!0);y(Ge),Ml(2),y(oe),xt((Vt,ct)=>{cn(oe,"title",`Estimated time until target FG (R=${Vt??""})`),Se(it,ct)},[()=>p().r2.toFixed(2),()=>C(p().daysToFg)]),ke(ge,oe)};dt(L,ge=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&ge(te)})}y(ot),y(z),xt((ge,oe,Ge,it,Vt,ct,At,ft,Qe,Ee,we,Tt,Ue)=>{Se(K,d(G)==="SG"?"Gravity":d(G)==="P"?"Plato":"Brix"),Se(me,ge),Se(ue,oe),Se(Xe,Ge),Se(Ze,it),Se($e,Vt),Se(ht,d(_)),Se(yt,ct),Se(Lt,d(_)),Se(Gt,At),Se(de,d(_)),Se(Ke,ft),Se(ll,d(_)),kt=wl(vt,1,"stat-value rate svelte-3wi8ix",null,kt,{fermenting:d(k).fermRate<0}),Se(ut,`${Qe??""}/day`),Se($t,Ee),Se(xl,we),Se(ie,Tt),Se(B,Ue)},[()=>b(d(k).currentSg),()=>b(d(k).firstSg),()=>b(d(k).highSg),()=>b(d(k).lowSg),()=>F(d(k).currentTemp),()=>F(d(k).avgTemp),()=>F(d(k).highTemp),()=>F(d(k).lowTemp),()=>U(d(k).fermRate),()=>C(d(k).durationDays),()=>C(d(k).daysAtCurrentSg),()=>A(d(k).apparentAttenuation),()=>A(d(k).abv)]),ke(w,z)},ne=w=>{var z=ac();ke(w,z)};dt(j,w=>{d(k)?w(J):w(ne,!1)})}ke(e,le),ts()}$n(["keydown","click"]);var rc=Re('<button type="button"> </button>'),oc=Re("<option> </option>"),uc=Re('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),cc=Re('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),fc=Re('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),dc=Re('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Filtered SG</span></label> <label class="toggle-label svelte-12kwequ"><input type="checkbox" class="svelte-12kwequ"/> <span>Filtered Temp</span></label></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function pc(e,l){es(l,!0);const a="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let i=He(()=>qn.config.smoothing_enabled),c=He(()=>qn.config.smoothing_samples),u=Be("UTC"),p=Be(0),h=Be(3),v=Gn(l,"deviceColor",3,"BLACK"),S=Gn(l,"originalGravity",3,null),m=He(()=>qn.config.temp_units==="C"),_=He(Js),G,k=null,W=Be(!0),Q=Be(null),ee=Be(24),b=Be(Dn([])),U=Be(Dn([])),C=Be(Dn([])),F=Be(null),A=Be(null);const le={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},j="#facc15",J="rgba(250, 204, 21, 0.3)",ne="#71717a",w="#a1a1aa",z="rgba(255, 255, 255, 0.04)",N="#22d3ee",X="#a78bfa",D="rgba(250, 204, 21, 0.5)",K="brewsignal_chart_trend_enabled";let M=Be(!0);const Ae="brewsignal_chart_show_filtered_sg",me="brewsignal_chart_show_filtered_temp";let ce=Be(!1),ve=Be(!1);function ue(R,$,ie=1.01){const se=[];for(let we=0;we<R.length;we++)$[we]!==null&&se.push([R[we],$[we]]);if(se.length<10)return null;const ae=se.length;let B=0,L=0,te=0,ge=0;for(const[we,Tt]of se)B+=we,L+=Tt,te+=we*Tt,ge+=we*we;const oe=ae*ge-B*B;if(Math.abs(oe)<1e-10)return null;const Ge=(ae*te-B*L)/oe,it=(L-Ge*B)/ae,Vt=L/ae;let ct=0,At=0;for(const[we,Tt]of se){const Ue=Ge*we+it;ct+=(Tt-Ue)**2,At+=(Tt-Vt)**2}const ft=At>0?1-ct/At:0;let Qe=null,Ee=null;if(Ge<0&&ft>.3){const we=R[R.length-1],Tt=(ie-it)/Ge;Tt>we&&(Ee=(Tt-we)/(1440*60),Ee>0&&Ee<60?Qe=ie:Ee=null)}return{slope:Ge,intercept:it,r2:ft,predictedFg:Qe,daysToFg:Ee}}function Y(R,$){return R.map(ie=>$.slope*ie+$.intercept)}function De(R,$,ie){const se=new Date(R*1e3);try{return ie?se.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:$}):se.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:$})}catch(ae){return console.warn("Invalid timezone:",$,ae),ie?se.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):se.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function Xe(R,$,ie){const se=j,ae=le[v()]||w;return{width:R,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[B=>{const L=B.cursor.idx;if(L==null)return;const te=B.root.querySelector(".u-legend");te&&(te.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`)}]},scales:{x:{time:!0},sg:{auto:!0,range:(B,L,te)=>{const ge=(te-L)*.1||.005;return[L-ge,te+ge]}},temp:{auto:!0,range:(B,L,te)=>{const ge=te-L,oe=10;if(ge<oe){const it=(te+L)/2;return[it-oe/2,it+oe/2]}const Ge=ge*.1;return[L-Ge,te+Ge]}}},axes:[{stroke:ne,grid:{stroke:z,width:1},ticks:{stroke:z,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(B,L)=>L.map(te=>De(te,ie,d(ee)<=24))},{scale:"sg",stroke:se,grid:{stroke:z,width:1},ticks:{stroke:z,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(B,L)=>L.map(te=>un(te)),side:3},{scale:"temp",stroke:ae,grid:{show:!1},ticks:{stroke:z,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(B,L)=>L.map(te=>te.toFixed(0)+""),side:1}],series:[{value:(B,L)=>De(L,ie,!1)+" "+De(L,ie,!0)},{label:d(_)==="SG"?"Gravity":d(_)==="P"?"Plato":"Brix",scale:"sg",stroke:se,width:2,value:(B,L)=>L!==null?un(L):"--",fill:(B,L)=>{const te=B.ctx.createLinearGradient(0,B.bbox.top,0,B.bbox.top+B.bbox.height);return te.addColorStop(0,J),te.addColorStop(1,"transparent"),te},points:{show:!1},paths:bt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:ae,width:1.5,dash:[4,4],value:(B,L)=>L!==null?L.toFixed(1)+"":"--",points:{show:!1},paths:bt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:N,width:1.5,dash:[2,4],value:(B,L)=>L!==null?L.toFixed(1)+"":"--",points:{show:!1},paths:bt.paths.spline?.()},{label:"Chamber",scale:"temp",stroke:X,width:1.5,dash:[4,2],value:(B,L)=>L!==null?L.toFixed(1)+"":"--",points:{show:!1},paths:bt.paths.spline?.()},{label:"Filtered SG",show:d(ce),scale:"sg",stroke:se,width:1.5,dash:[2,2],value:(B,L)=>L!==null?un(L):"--",points:{show:!1},paths:bt.paths.spline?.()},{label:"Filtered Temp",show:d(ve),scale:"temp",stroke:ae,width:1,dash:[2,2],value:(B,L)=>L!==null?L.toFixed(1)+"":"--",points:{show:!1},paths:bt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:D,width:2,dash:[8,4],value:(B,L)=>L!==null?un(L):"--",points:{show:!1},show:d(M)}]}}function Te(R,$){if($<=1)return R;const ie=[];for(let se=0;se<R.length;se++){const ae=[],B=Math.floor($/2);for(let L=Math.max(0,se-B);L<=Math.min(R.length-1,se+B);L++){const te=R[L];te!==null&&ae.push(te)}ae.length>0?ie.push(ae.reduce((L,te)=>L+te,0)/ae.length):ie.push(null)}return ie}function xe(R,$,ie,se,ae,B,L,te){if(R.length<=te)return[R,$,ie,se,ae,B,L];const ge=Math.ceil(R.length/te),oe=[],Ge=[],it=[],Vt=[],ct=[],At=[],ft=[];for(let Qe=0;Qe<R.length;Qe+=ge){const Ee=Math.min(Qe+ge,R.length);let we=0,Tt=0,Ue=0,et=0,Et=0,mt=0,Il=0,jt=0,Ll=0,Jl=0,Zl=0,Pl=0;for(let Mt=Qe;Mt<Ee;Mt++)$[Mt]!==null&&(we+=$[Mt],Tt++),ie[Mt]!==null&&(Ue+=ie[Mt],et++),se[Mt]!==null&&(Et+=se[Mt],mt++),ae[Mt]!==null&&(Il+=ae[Mt],jt++),B[Mt]!==null&&(Ll+=B[Mt],Jl++),L[Mt]!==null&&(Zl+=L[Mt],Pl++);oe.push(R[Math.floor((Qe+Ee-1)/2)]),Ge.push(Tt>0?we/Tt:null),it.push(et>0?Ue/et:null),Vt.push(mt>0?Et/mt:null),ct.push(jt>0?Il/jt:null),At.push(Jl>0?Ll/Jl:null),ft.push(Pl>0?Zl/Pl:null)}return[oe,Ge,it,Vt,ct,At,ft]}function Ze(R){return!R.endsWith("Z")&&!R.match(/[+-]\d{2}:\d{2}$/)&&(R=R+"Z"),new Date(R).getTime()/1e3}function at(R,$,ie){if(R.length===0||$.length===0)return $.map(()=>null);const se=[...R].sort((L,te)=>Ze(L.timestamp)-Ze(te.timestamp)),ae=se.map(L=>Ze(L.timestamp)),B=se.map(L=>L.temperature===null?null:ie?L.temperature:L.temperature*9/5+32);return $.map(L=>{let te=null,ge=null;for(let oe=0;oe<ae.length;oe++)if(ae[oe]<=L&&(te={time:ae[oe],temp:B[oe]}),ae[oe]>=L&&ge===null){ge={time:ae[oe],temp:B[oe]};break}if(te&&ge&&te.temp!==null&&ge.temp!==null){if(te.time===ge.time)return te.temp;const oe=(L-te.time)/(ge.time-te.time);return te.temp+oe*(ge.temp-te.temp)}return te!==null&&te.temp!==null?te.temp:ge!==null&&ge.temp!==null?ge.temp:null})}function Le(R,$,ie,se){const ae=[...R].reverse();let B=[],L=[],te=[];for(const Ee of ae){B.push(Ze(Ee.timestamp)),L.push(Ee.sg_calibrated??Ee.sg_raw);const we=Ee.temp_calibrated??Ee.temp_raw;we!==null?te.push(se?we:we*9/5+32):te.push(null)}let ge=at($,B,se),oe=at(ie,B,se);const Ge=new Map(ae.filter(Ee=>Ee.sg_filtered!==null&&Ee.sg_filtered!==void 0).map(Ee=>[Ze(Ee.timestamp),Ee.sg_filtered])),it=new Map(ae.filter(Ee=>Ee.temp_filtered!==null&&Ee.temp_filtered!==void 0).map(Ee=>[Ze(Ee.timestamp),Ee.temp_filtered]));let Vt=B.map(Ee=>{const we=Ge.get(Ee);return we!==void 0?we:null}),ct=B.map(Ee=>{const we=it.get(Ee);return we!=null?se?we:we*9/5+32:null});d(i)&&d(c)>1&&(L=Te(L,d(c)),te=Te(te,d(c)),ge=Te(ge,d(c)),oe=Te(oe,d(c))),[B,L,te,ge,oe,Vt,ct]=xe(B,L,te,ge,oe,Vt,ct,500);const ft=ue(B,L);fe(F,ft,!0);const Qe=ft?Y(B,ft):B.map(()=>null);return[B,L,te,ge,oe,Vt,ct,Qe]}const pt=3e4;async function $e(R=!1){const ie=Date.now()-d(p);if(!(!R&&d(p)>0&&ie<pt)){fe(W,!0),fe(Q,null);try{if(!d(A)){const se=await qr(l.batchId);fe(A,se.device_id??null,!0)}if(d(A)){const[se,ae,B]=await Promise.all([Kr(d(A),d(ee)),jr(d(ee)).catch(()=>[]),Jr(d(ee)).catch(()=>[])]);fe(b,se,!0),fe(U,ae,!0),fe(C,B,!0),qe()}else fe(b,[],!0),fe(U,[],!0),fe(C,[],!0),fe(Q,"No device assigned to this batch")}catch(se){fe(Q,se instanceof Error?se.message:"Failed to load data",!0)}finally{fe(p,Date.now(),!0),fe(W,!1)}}}function qe(){if(!G||d(b).length===0)return;const R=Le(d(b),d(U),d(C),d(m)),$=Xe(G.clientWidth,d(m),d(u));k&&k.destroy(),k=new bt($,R,G)}function ht(){k&&G&&k.setSize({width:G.clientWidth,height:220})}let St=null;function ye(){if(St&&(clearInterval(St),St=null),d(h)>0){const R=d(h)*60*1e3;St=setInterval(()=>{d(W)||$e(!1)},R)}}yi(async()=>{const R=localStorage.getItem(a);if(R!==null){const ae=parseInt(R,10);Number.isNaN(ae)||fe(h,ae,!0)}const $=localStorage.getItem(K);$!==null&&fe(M,$==="true");const ie=localStorage.getItem(Ae);ie!==null&&fe(ce,ie==="true");const se=localStorage.getItem(me);se!==null&&fe(ve,se==="true");try{const ae=await fetch("/api/system/timezone");if(ae.ok){const B=await ae.json();fe(u,B.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await $e(!0),window.addEventListener("resize",ht),ye()}),Ir(()=>{k?.destroy(),window.removeEventListener("resize",ht),St&&clearInterval(St)}),Ns(()=>{d(m)!==void 0&&d(b).length>0&&G&&qe()}),Ns(()=>{d(i),d(c),d(b).length>0&&G&&qe()});function yt(R){const $=Number(R.target.value);fe(h,$,!0),localStorage.setItem(a,String($)),ye(),$e(!0)}function Wt(){fe(M,!d(M)),localStorage.setItem(K,String(d(M))),qe()}function Lt(){d(b).length>0&&G&&qe()}var We=dc(),Ot=E(We),Gt=E(Ot);On(Gt,21,()=>Yr,jn,(R,$)=>{var ie=rc();let se;ie.__click=()=>{d(ee)!==d($).hours&&(fe(ee,d($).hours,!0),$e(!0))};var ae=E(ie,!0);y(ie),xt(()=>{se=wl(ie,1,"range-btn svelte-12kwequ",null,se,{active:d(ee)===d($).hours}),Se(ae,d($).label)}),ke(R,ie)}),y(Gt);var Ut=I(Gt,2),de=E(Ut),O=I(E(de),2);O.__change=yt,On(O,21,()=>n,jn,(R,$)=>{var ie=oc(),se=E(ie,!0);y(ie);var ae={};xt(()=>{Se(se,d($).label),ae!==(ae=d($).value)&&(ie.value=(ie.__value=d($).value)??"")}),ke(R,ie)}),y(O);var Pe;$r(O),y(de);var Ke=I(de,2),Kt=I(E(Ke),2),ll=E(Kt);Ml(2),y(Kt);var ot=I(Kt,4);let Yt;ot.__click=Wt;var vt=E(ot);Ln(vt,"background: rgba(250, 204, 21, 0.5);"),Ml(2),y(ot);var kt=I(ot,2),ut=E(kt);Jn(ut),ut.__change=()=>{localStorage.setItem(Ae,String(d(ce))),Lt()},Ml(2),y(kt);var gt=I(kt,2),ul=E(gt);Jn(ul),ul.__change=()=>{localStorage.setItem(me,String(d(ve))),Lt()},Ml(2),y(gt),y(Ke),y(Ut),y(Ot);var $t=I(Ot,2),qt=E($t);{var el=R=>{var $=uc();ke(R,$)};dt(qt,R=>{d(W)&&R(el)})}var xl=I(qt,2);{var q=R=>{var $=cc(),ie=I(E($),2);ie.__click=()=>$e(!0),y($),ke(R,$)},pe=R=>{var $=Fn(),ie=Al($);{var se=ae=>{var B=fc();ke(ae,B)};dt(ie,ae=>{d(b).length===0&&ae(se)},!0)}ke(R,$)};dt(xl,R=>{d(Q)?R(q):R(pe,!1)})}y($t),js($t,R=>G=R,()=>G);var be=I($t,2);{var Ve=R=>{{let $=He(()=>d(F)?{predictedFg:d(F).predictedFg,daysToFg:d(F).daysToFg,r2:d(F).r2}:null);ic(R,{get readings(){return d(b)},get originalGravity(){return S()},get trend(){return d($)}})}};dt(be,R=>{d(b).length>0&&R(Ve)})}y(We),xt(()=>{Pe!==(Pe=d(h))&&(O.value=(O.__value=d(h))??"",eo(O,d(h))),Ln(ll,`background: ${(le[v()]||"var(--text-secondary)")??""};`),Yt=wl(ot,1,"legend-item legend-toggle svelte-12kwequ",null,Yt,{"legend-disabled":!d(M)}),cn(ot,"title",d(M)?"Hide trend line":"Show trend line")}),Oa(ut,()=>d(ce),R=>fe(ce,R)),Oa(ul,()=>d(ve),R=>fe(ve,R)),ke(e,We),ts()}$n(["click","change"]);var hc=Re('<span class="error-message svelte-1k5rb4o"> </span>'),vc=Re('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),gc=Re('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),mc=Re('<div class="w-1 rounded-sm transition-all"></div>'),_c=Re('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),wc=Re(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),xc=Re('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),bc=Re('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Sc=Re("<div><!></div>"),yc=Re('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),kc=Re('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function Tc(e,l){es(l,!0);let a=Gn(l,"expanded",3,!1),n=Gn(l,"wide",3,!1),i=He(()=>l.batch.device_id?ki.tilts.get(l.batch.device_id)??null:null),c=He(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),u=He(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=He(()=>l.progress?.temperature?.current??null),h=He(()=>d(i)?.color??"BLACK"),v=He(()=>d(i)?.rssi??null),S=He(()=>d(i)?.paired??!0),m=He(()=>d(i)?.last_seen??new Date().toISOString()),_=He(()=>d(i)?.sg_raw??d(u)),G=He(()=>d(i)?.temp_raw??d(p)),k=Be(!1);Ns(()=>{a()&&!d(k)&&fe(k,!0)});let W=Be(!1),Q=Be(""),ee=Be(null),b=Be(!1),U=Be(null);function C(){fe(Q,d(c),!0),fe(W,!0),fe(U,null),setTimeout(()=>d(ee)?.focus(),0)}async function F(){if(d(b))return;const q=d(Q).trim();if(!q||q===d(c)){fe(W,!1),fe(U,null);return}fe(b,!0),fe(U,null);try{await Zr(l.batch.id,{name:q}),fe(W,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(pe){console.error("Failed to update batch name:",pe),fe(U,pe instanceof Error?pe.message:"Failed to save batch name",!0)}finally{fe(b,!1)}}function A(q){q.key==="Enter"?F():q.key==="Escape"&&fe(W,!1)}let le=He(Ei),j=He(Js);const J={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function ne(q){return un(q)}function w(q){return Ur(q)}function z(q){return q>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:q>=-60?{bars:3,color:"var(--positive)",label:"Good"}:q>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function N(q){const pe=Math.floor((Date.now()-new Date(q).getTime())/1e3);if(pe<10)return"just now";if(pe<60)return`${pe}s ago`;const be=Math.floor(pe/60);if(be<60)return`${be}m ago`;const Ve=Math.floor(be/60);return Ve<24?`${Ve}h ago`:`${Math.floor(Ve/24)}d ago`}let X=He(()=>J[d(h)]||"var(--tilt-black)"),D=He(()=>d(v)!==null?z(d(v)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),K=He(()=>N(d(m)));var M=kc();let Ae;var me=E(M),ce=I(me,2),ve=E(ce),ue=E(ve),Y=E(ue);{var De=q=>{var pe=vc(),be=E(pe);Jn(be),be.__keydown=A;let Ve;js(be,ie=>fe(ee,ie),()=>d(ee));var R=I(be,2);{var $=ie=>{var se=hc(),ae=E(se,!0);y(se),xt(()=>Se(ae,d(U))),ke(ie,se)};dt(R,ie=>{d(U)&&ie($)})}y(pe),xt(()=>{be.disabled=d(b),Ve=wl(be,1,"beer-name-input svelte-1k5rb4o",null,Ve,{error:d(U)})}),Si("blur",be,F),Ti(be,()=>d(Q),ie=>fe(Q,ie)),ke(q,pe)},Xe=q=>{var pe=gc();pe.__click=C;var be=E(pe),Ve=E(be,!0);y(be),Ml(2),y(pe),xt(()=>Se(Ve,d(c))),ke(q,pe)};dt(Y,q=>{d(W)?q(De):q(Xe,!1)})}var Te=I(Y,2),xe=E(Te),Ze=I(xe,2),at=E(Ze,!0);y(Ze),y(Te),y(ue);var Le=I(ue,2),pt=E(Le),$e=E(pt);On($e,20,()=>Array(4),jn,(q,pe,be)=>{var Ve=mc();xt(()=>Ln(Ve,`
									height: ${8+be*4}px;
									background: ${(be<d(D).bars?d(D).color:"var(--bg-hover)")??""};
									opacity: ${be<d(D).bars?1:.4};
								`)),ke(q,Ve)}),y($e);var qe=I($e,2),ht=E(qe);y(qe),y(pt);var St=I(pt,2);{var ye=q=>{var pe=_c();ke(q,pe)};dt(St,q=>{d(S)||q(ye)})}y(Le),y(ve);var yt=I(ve,2),Wt=E(yt),Lt=E(Wt),We=E(Lt,!0),Ot=I(We),Gt=E(Ot,!0);y(Ot),y(Lt);var Ut=I(Lt,2),de=E(Ut,!0);y(Ut),y(Wt);var O=I(Wt,2),Pe=E(O),Ke=E(Pe);{var Kt=q=>{var pe=wc(),be=Al(pe,!0),Ve=I(be),R=E(Ve,!0);y(Ve),xt($=>{Se(be,$),Se(R,d(le))},[()=>w(d(p))]),ke(q,pe)},ll=q=>{var pe=xc(),be=I(Al(pe)),Ve=E(be,!0);y(be),xt(()=>Se(Ve,d(le))),ke(q,pe)};dt(Ke,q=>{d(p)!==null?q(Kt):q(ll,!1)})}y(Pe),Ml(2),y(O),y(yt);var ot=I(yt,2);{var Yt=q=>{var pe=bc(),be=I(E(pe),2),Ve=E(be,!0);y(be);var R=I(be,4),$=E(R);y(R),y(pe),xt((ie,se)=>{Se(Ve,ie),Se($,`${se??""}${d(le)??""}`)},[()=>ne(d(_)),()=>d(G)!==null?w(d(G)):"--"]),ke(q,pe)};dt(ot,q=>{(d(u)!==d(_)||d(p)!==d(G))&&d(i)&&q(Yt)})}var vt=I(ot,2);{var kt=q=>{var pe=Sc();let be;var Ve=E(pe);to(Ve,()=>l.batch.id,R=>{pc(R,{get batchId(){return l.batch.id},get deviceColor(){return d(h)},get originalGravity(){return l.batch.measured_og}})}),y(pe),xt(()=>be=wl(pe,1,"chart-section svelte-1k5rb4o",null,be,{hidden:!a()})),ke(q,pe)};dt(vt,q=>{d(k)&&q(kt)})}var ut=I(vt,2),gt=E(ut),ul=E(gt);y(gt);var $t=I(gt,2),qt=E($t),el=I(qt,2);{var xl=q=>{var pe=yc();pe.__click=function(...R){l.onToggleExpand?.apply(this,R)};var be=E(pe);let Ve;y(pe),xt(()=>{cn(pe,"aria-label",a()?"Collapse chart":"Expand chart"),Ve=wl(be,0,"w-4 h-4 transition-transform",null,Ve,{"rotate-180":a()})}),ke(q,pe)};dt(el,q=>{l.onToggleExpand&&q(xl)})}Ml(2),y($t),y(ut),y(ce),y(M),xt(q=>{Ae=wl(M,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,Ae,{expanded:a(),wide:n()}),Ln(me,`background: ${d(X)??""};`),Ln(xe,`background: ${d(X)??""};`),Se(at,d(h)),cn(pt,"title",`${d(D).label??""} signal (${d(v)??"N/A"??""} dBm)`),Se(ht,`${d(v)??"N/A"??""} dBm`),Se(We,q),Se(Gt,d(j)!=="SG"?d(j):""),Se(de,d(j)==="SG"?"Gravity":d(j)==="P"?"Plato":"Brix"),Se(ul,`Updated ${d(K)??""}`),cn(qt,"href",`/batches/${l.batch.id??""}`)},[()=>ne(d(u))]),ke(e,M),ts()}$n(["keydown","click"]);var Ec=Re('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Mc=Re('<div class="alerts-list svelte-1uha8ag"></div>'),Ac=Re('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Cc=Re('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Dc=Re('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Lc=Re('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Pc=Re('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Rc=Re("<div></div>"),Fc=Re("<!> <!>",1);function Qc(e,l){es(l,!0);let a=Be(!1),n=Be(!1),i=Be(Dn([])),c=Be(Dn(new Map)),u=Be(!0),p=Be(null);yi(async()=>{const F=localStorage.getItem("brewsignal_alerts_dismissed"),A=localStorage.getItem("brewsignal_alerts_dismissed_time");F==="true"&&A&&Date.now()-parseInt(A,10)<360*60*1e3&&fe(a,!0),await h()});async function h(){fe(u,!0),fe(p,null);try{const F=await Qr();fe(i,F.filter(J=>J.status==="fermenting"||J.status==="conditioning"),!0);const A=d(i).map(async J=>{try{const ne=await Xr(J.id);return[J.id,ne]}catch{return null}}),le=await Promise.all(A),j=new Map;for(const J of le)J&&j.set(J[0],J[1]);fe(c,j,!0)}catch(F){fe(p,F instanceof Error?F.message:"Failed to load batches",!0)}finally{fe(u,!1)}}let v=He(()=>new Map(d(i).filter(F=>F.device_id&&(F.status==="fermenting"||F.status==="conditioning")).map(F=>[F.device_id,F.id]))),S=He(()=>{const F=new Map(d(c));for(const[A,le]of d(v)){const j=ki.tilts.get(A);if(j){const J=F.get(le)||{batch_id:le,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}};F.set(le,{...J,measured:{...J.measured,current_sg:j.sg},temperature:{...J.temperature,current:j.temp,status:J.temperature.yeast_min!==void 0&&J.temperature.yeast_max!==void 0?j.temp<J.temperature.yeast_min?"too_cold":j.temp>J.temperature.yeast_max?"too_hot":"in_range":J.temperature.status}})}}return F}),m=Be(null);function _(F){fe(m,d(m)===F?null:F,!0)}function G(){fe(a,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function k(){fe(n,!d(n))}var W=Fc();Wr("1uha8ag",F=>{Br(()=>{Vr.title="Dashboard | BrewSignal"})});var Q=Al(W);{var ee=F=>{var A=Cc(),le=E(A),j=E(le),J=I(E(j),4),ne=E(J,!0);y(J),y(j);var w=I(j,2);w.__click=G,y(le);var z=I(le,2);{var N=K=>{var M=Mc();On(M,21,()=>kn.alerts,jn,(Ae,me)=>{var ce=Ec();let ve;var ue=E(ce),Y=E(ue);y(ue);var De=I(ue,2),Xe=E(De,!0);y(De),y(ce),xt(()=>{ve=wl(ce,1,"alert-item svelte-1uha8ag",null,ve,{warning:d(me).level==="warning",critical:d(me).level==="critical"}),Se(Y,`${d(me).day??""}:`),Se(Xe,d(me).message)}),ke(Ae,ce)}),y(M),ke(K,M)};dt(z,K=>{d(n)||K(N)})}var X=I(z,2);{var D=K=>{var M=Ac();M.__click=k;var Ae=E(M,!0);y(M),xt(()=>Se(Ae,d(n)?`Show ${kn.alerts.length} alerts`:"Show less")),ke(K,M)};dt(X,K=>{kn.alerts.length>3&&K(D)})}y(A),xt(()=>Se(ne,kn.alerts.length)),ke(F,A)};dt(Q,F=>{kn.alerts.length>0&&!d(a)&&F(ee)})}var b=I(Q,2);{var U=F=>{var A=Dc();ke(F,A)},C=F=>{var A=Fn(),le=Al(A);{var j=ne=>{var w=Lc(),z=I(E(w),4),N=E(z,!0);y(z),y(w),xt(()=>Se(N,d(p))),ke(ne,w)},J=ne=>{var w=Fn(),z=Al(w);{var N=D=>{var K=Pc();ke(D,K)},X=D=>{var K=Rc();let M;On(K,21,()=>d(i),Ae=>Ae.id,(Ae,me)=>{{let ce=He(()=>d(S).get(d(me).id)),ve=He(()=>d(m)===d(me).id),ue=He(()=>d(i).length===1);Tc(Ae,{get batch(){return d(me)},get progress(){return d(ce)},get expanded(){return d(ve)},get wide(){return d(ue)},onToggleExpand:()=>_(d(me).id),onBatchUpdated:h})}}),y(K),xt(()=>M=wl(K,1,"tilt-grid svelte-1uha8ag",null,M,{"single-tilt":d(i).length===1})),ke(D,K)};dt(z,D=>{d(i).length===0?D(N):D(X,!1)},!0)}ke(ne,w)};dt(le,ne=>{d(p)?ne(j):ne(J,!1)},!0)}ke(F,A)};dt(b,F=>{d(u)?F(U):F(C,!1)})}ke(e,W),ts()}$n(["click"]);export{Qc as component};
