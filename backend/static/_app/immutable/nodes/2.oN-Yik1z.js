import{d as $n,c as Fn,a as ke,f as Le,s as Se,e as bi}from"../chunks/LrF3SKCG.js";import{o as Fr,R as Or,b7 as Gr,b as Nr,ah as es,at as Dl,c as d,ai as Ve,aj as ts,al as E,an as k,ak as V,aq as Re,ar as vt,s as oe,as as Cl,p as ql,ao as xi,aL as zr,ap as qn,e as Ir,am as Vr}from"../chunks/OlDeM-au.js";import{e as On,i as Jn}from"../chunks/C8cJb_ce.js";import{B as Br,i as ft}from"../chunks/BY7INp_b.js";import{h as Hr}from"../chunks/C70lBF8F.js";import{s as ol}from"../chunks/Bdk7TQwd.js";import{t as Si}from"../chunks/gW5AvVBu.js";import{w as Tn}from"../chunks/Dy-LsXqn.js";import{r as yi,s as zl}from"../chunks/Brko_7Ag.js";import{s as Kl}from"../chunks/C7sKw6Td.js";import{b as ki}from"../chunks/CaQQKXWy.js";import{b as Ks}from"../chunks/twcZaw-j.js";import{p as fn}from"../chunks/By_Sz3-R.js";import{c as Kn,d as Ln,b as js,g as Ti,e as Wr}from"../chunks/DCnh5YbF.js";import{T as Ur,o as Yr,q as qr,s as Kr,t as jr,u as Jr,v as Zr,w as Qr,g as Xr}from"../chunks/D2Emw0fV.js";import{i as $r,s as eo}from"../chunks/D28421SN.js";function to(e,l,a){Fr&&Or();var n=new Br(e),i=!Gr();Nr(()=>{var c=l();i&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,a)})}const lo=!0,Ft="u-",no="uplot",so=Ft+"hz",ao=Ft+"vt",io=Ft+"title",ro=Ft+"wrap",oo=Ft+"under",uo=Ft+"over",co=Ft+"axis",Yl=Ft+"off",fo=Ft+"select",po=Ft+"cursor-x",ho=Ft+"cursor-y",vo=Ft+"cursor-pt",go=Ft+"legend",mo=Ft+"live",_o=Ft+"inline",wo=Ft+"series",bo=Ft+"marker",Fa=Ft+"label",xo=Ft+"value",An="width",Cn="height",En="top",Oa="bottom",un="left",Ds="right",Js="#000",Ga=Js+"0",Ls="mousemove",Na="mousedown",Ps="mouseup",za="mouseenter",Ia="mouseleave",Va="dblclick",So="resize",yo="scroll",Ba="change",Zn="dppxchange",Zs="--",mn=typeof window<"u",Ns=mn?document:null,dn=mn?window:null,ko=mn?navigator:null;let Ne,Wn;function zs(){let e=devicePixelRatio;Ne!=e&&(Ne=e,Wn&&Vs(Ba,Wn,zs),Wn=matchMedia(`(min-resolution: ${Ne-.001}dppx) and (max-resolution: ${Ne+.001}dppx)`),jl(Ba,Wn,zs),dn.dispatchEvent(new CustomEvent(Zn)))}function rl(e,l){if(l!=null){let a=e.classList;!a.contains(l)&&a.add(l)}}function Is(e,l){let a=e.classList;a.contains(l)&&a.remove(l)}function nt(e,l,a){e.style[l]=a+"px"}function wl(e,l,a,n){let i=Ns.createElement(e);return l!=null&&rl(i,l),a?.insertBefore(i,n),i}function pl(e,l){return wl("div",e,l)}const Ha=new WeakMap;function El(e,l,a,n,i){let c="translate("+l+"px,"+a+"px)",u=Ha.get(e);c!=u&&(e.style.transform=c,Ha.set(e,c),l<0||a<0||l>n||a>i?rl(e,Yl):Is(e,Yl))}const Wa=new WeakMap;function Ua(e,l,a){let n=l+a,i=Wa.get(e);n!=i&&(Wa.set(e,n),e.style.background=l,e.style.borderColor=a)}const Ya=new WeakMap;function qa(e,l,a,n){let i=l+""+a,c=Ya.get(e);i!=c&&(Ya.set(e,i),e.style.height=a+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-a/2+"px":0)}const Qs={passive:!0},To={...Qs,capture:!0};function jl(e,l,a,n){l.addEventListener(e,a,n?To:Qs)}function Vs(e,l,a,n){l.removeEventListener(e,a,Qs)}mn&&zs();function bl(e,l,a,n){let i;a=a||0,n=n||l.length-1;let c=n<=2147483647;for(;n-a>1;)i=c?a+n>>1:ul((a+n)/2),l[i]<e?a=i:n=i;return e-l[a]<=l[n]-e?a:n}function Ei(e){return(a,n,i)=>{let c=-1,u=-1;for(let p=n;p<=i;p++)if(e(a[p])){c=p;break}for(let p=i;p>=n;p--)if(e(a[p])){u=p;break}return[c,u]}}const Mi=e=>e!=null,Ai=e=>e!=null&&e>0,ls=Ei(Mi),Eo=Ei(Ai);function Mo(e,l,a,n=0,i=!1){let c=i?Eo:ls,u=i?Ai:Mi;[l,a]=c(e,l,a);let p=e[l],h=e[l];if(l>-1)if(n==1)p=e[l],h=e[a];else if(n==-1)p=e[a],h=e[l];else for(let v=l;v<=a;v++){let S=e[v];u(S)&&(S<p?p=S:S>h&&(h=S))}return[p??je,h??-je]}function ns(e,l,a,n){let i=Ja(e),c=Ja(l);e==l&&(i==-1?(e*=a,l/=a):(e/=a,l*=a));let u=a==10?Ll:Ci,p=i==1?ul:hl,h=c==1?hl:ul,v=p(u(Rt(e))),S=h(u(Rt(l))),m=pn(a,v),_=pn(a,S);return a==10&&(v<0&&(m=Je(m,-v)),S<0&&(_=Je(_,-S))),n||a==2?(e=m*i,l=_*c):(e=Ri(e,m),l=ss(l,_)),[e,l]}function Xs(e,l,a,n){let i=ns(e,l,a,n);return e==0&&(i[0]=0),l==0&&(i[1]=0),i}const $s=.1,Ka={mode:3,pad:$s},Pn={pad:0,soft:null,mode:0},Ao={min:Pn,max:Pn};function Qn(e,l,a,n){return as(a)?ja(e,l,a):(Pn.pad=a,Pn.soft=n?0:null,Pn.mode=n?3:0,ja(e,l,Ao))}function Oe(e,l){return e??l}function Co(e,l,a){for(l=Oe(l,0),a=Oe(a,e.length-1);l<=a;){if(e[l]!=null)return!0;l++}return!1}function ja(e,l,a){let n=a.min,i=a.max,c=Oe(n.pad,0),u=Oe(i.pad,0),p=Oe(n.hard,-je),h=Oe(i.hard,je),v=Oe(n.soft,je),S=Oe(i.soft,-je),m=Oe(n.mode,0),_=Oe(i.mode,0),B=l-e,y=Ll(B),z=el(Rt(e),Rt(l)),ee=Ll(z),ie=Rt(ee-y);(B<1e-24||ie>10)&&(B=0,(e==0||l==0)&&(B=1e-24,m==2&&v!=je&&(c=0),_==2&&S!=-je&&(u=0)));let x=B||z||1e3,W=Ll(x),M=pn(10,ul(W)),C=x*(B==0?e==0?.1:1:c),A=Je(Ri(e-C,M/10),24),ae=e>=v&&(m==1||m==3&&A<=v||m==2&&A>=v)?v:je,te=el(p,A<ae&&e>=ae?ae:xl(ae,A)),K=x*(B==0?l==0?.1:1:u),ne=Je(ss(l+K,M/10),24),w=l<=S&&(_==1||_==3&&ne>=S||_==2&&ne<=S)?S:-je,I=xl(h,ne>w&&l<=w?w:el(w,ne));return te==I&&te==0&&(I=100),[te,I]}const Do=new Intl.NumberFormat(mn?ko.language:"en-US"),ea=e=>Do.format(e),cl=Math,jn=cl.PI,Rt=cl.abs,ul=cl.floor,Pt=cl.round,hl=cl.ceil,xl=cl.min,el=cl.max,pn=cl.pow,Ja=cl.sign,Ll=cl.log10,Ci=cl.log2,Lo=(e,l=1)=>cl.sinh(e)*l,Rs=(e,l=1)=>cl.asinh(e/l),je=1/0;function Za(e){return(Ll((e^e>>31)-(e>>31))|0)+1}function Bs(e,l,a){return xl(el(e,l),a)}function Di(e){return typeof e=="function"}function Ee(e){return Di(e)?e:()=>e}const Po=()=>{},Li=e=>e,Pi=(e,l)=>l,Ro=e=>null,Qa=e=>!0,Xa=(e,l)=>e==l,Fo=/\.\d*?(?=9{6,}|0{6,})/gm,Jl=e=>{if(Oi(e)||Il.has(e))return e;const l=`${e}`,a=l.match(Fo);if(a==null)return e;let n=a[0].length-1;if(l.indexOf("e-")!=-1){let[i,c]=l.split("e");return+`${Jl(i)}e${c}`}return Je(e,n)};function Wl(e,l){return Jl(Je(Jl(e/l))*l)}function ss(e,l){return Jl(hl(Jl(e/l))*l)}function Ri(e,l){return Jl(ul(Jl(e/l))*l)}function Je(e,l=0){if(Oi(e))return e;let a=10**l,n=e*a*(1+Number.EPSILON);return Pt(n)/a}const Il=new Map;function Fi(e){return((""+e).split(".")[1]||"").length}function Gn(e,l,a,n){let i=[],c=n.map(Fi);for(let u=l;u<a;u++){let p=Rt(u),h=Je(pn(e,u),p);for(let v=0;v<n.length;v++){let S=e==10?+`${n[v]}e${u}`:n[v]*h,m=(u>=0?0:p)+(u>=c[v]?0:c[v]),_=e==10?S:Je(S,m);i.push(_),Il.set(_,m)}}return i}const Rn={},ta=[],hn=[null,null],Nl=Array.isArray,Oi=Number.isInteger,Oo=e=>e===void 0;function $a(e){return typeof e=="string"}function as(e){let l=!1;if(e!=null){let a=e.constructor;l=a==null||a==Object}return l}function Go(e){return e!=null&&typeof e=="object"}const No=Object.getPrototypeOf(Uint8Array),Gi="__proto__";function vn(e,l=as){let a;if(Nl(e)){let n=e.find(i=>i!=null);if(Nl(n)||l(n)){a=Array(e.length);for(let i=0;i<e.length;i++)a[i]=vn(e[i],l)}else a=e.slice()}else if(e instanceof No)a=e.slice();else if(l(e)){a={};for(let n in e)n!=Gi&&(a[n]=vn(e[n],l))}else a=e;return a}function Et(e){let l=arguments;for(let a=1;a<l.length;a++){let n=l[a];for(let i in n)i!=Gi&&(as(e[i])?Et(e[i],vn(n[i])):e[i]=vn(n[i]))}return e}const zo=0,Io=1,Vo=2;function Bo(e,l,a){for(let n=0,i,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(i=u-1;i>=0&&e[i]==null;)e[i--]=null;for(i=u+1;i<a&&e[i]==null;)e[c=i++]=null}}}function Ho(e,l){if(Yo(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return qo(u[0])||(u=Uo(u)),u}let a=new Set;for(let u=0;u<e.length;u++){let h=e[u][0],v=h.length;for(let S=0;S<v;S++)a.add(h[S])}let n=[Array.from(a).sort((u,p)=>u-p)],i=n[0].length,c=new Map;for(let u=0;u<i;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],h=p[0];for(let v=1;v<p.length;v++){let S=p[v],m=Array(i).fill(void 0),_=l?l[u][v]:Io,B=[];for(let y=0;y<S.length;y++){let z=S[y],ee=c.get(h[y]);z===null?_!=zo&&(m[ee]=z,_==Vo&&B.push(ee)):m[ee]=z}Bo(m,B,i),n.push(m)}}return n}const Wo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Uo(e){let l=e[0],a=l.length,n=Array(a);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let i=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(a);for(let h=0;h<a;h++)p[h]=u[n[h]];i.push(p)}return i}function Yo(e){let l=e[0][0],a=l.length;for(let n=1;n<e.length;n++){let i=e[n][0];if(i.length!=a)return!1;if(i!=l){for(let c=0;c<a;c++)if(i[c]!=l[c])return!1}}return!0}function qo(e,l=100){const a=e.length;if(a<=1)return!0;let n=0,i=a-1;for(;n<=i&&e[n]==null;)n++;for(;i>=n&&e[i]==null;)i--;if(i<=n)return!0;const c=el(1,ul((i-n+1)/l));for(let u=e[n],p=n+c;p<=i;p+=c){const h=e[p];if(h!=null){if(h<=u)return!1;u=h}}return!0}const Ni=["January","February","March","April","May","June","July","August","September","October","November","December"],zi=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ii(e){return e.slice(0,3)}const Ko=zi.map(Ii),jo=Ni.map(Ii),Jo={MMMM:Ni,MMM:jo,WWWW:zi,WWW:Ko};function Mn(e){return(e<10?"0":"")+e}function Zo(e){return(e<10?"00":e<100?"0":"")+e}const Qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>Mn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>Mn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>Mn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>Mn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>Mn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Zo(e.getMilliseconds())};function la(e,l){l=l||Jo;let a=[],n=/\{([a-z]+)\}|[^{]+/gi,i;for(;i=n.exec(e);)a.push(i[0][0]=="{"?Qo[i[1]]:i[0]);return c=>{let u="";for(let p=0;p<a.length;p++)u+=typeof a[p]=="string"?a[p]:a[p](c,l);return u}}const Xo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function $o(e,l){let a;return l=="UTC"||l=="Etc/UTC"?a=new Date(+e+e.getTimezoneOffset()*6e4):l==Xo?a=e:(a=new Date(e.toLocaleString("en-US",{timeZone:l})),a.setMilliseconds(e.getMilliseconds())),a}const Vi=e=>e%1==0,Xn=[1,2,2.5,5],eu=Gn(10,-32,0,Xn),Bi=Gn(10,0,32,Xn),tu=Bi.filter(Vi),Ul=eu.concat(Bi),na=`
`,Hi="{YYYY}",ei=na+Hi,Wi="{M}/{D}",Dn=na+Wi,Un=Dn+"/{YY}",Ui="{aa}",lu="{h}:{mm}",cn=lu+Ui,ti=na+cn,li=":{ss}",Ie=null;function Yi(e){let l=e*1e3,a=l*60,n=a*60,i=n*24,c=i*30,u=i*365,h=(e==1?Gn(10,0,3,Xn).filter(Vi):Gn(10,-3,0,Xn)).concat([l,l*5,l*10,l*15,l*30,a,a*5,a*10,a*15,a*30,n,n*2,n*3,n*4,n*6,n*8,n*12,i,i*2,i*3,i*4,i*5,i*6,i*7,i*8,i*9,i*10,i*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const v=[[u,Hi,Ie,Ie,Ie,Ie,Ie,Ie,1],[i*28,"{MMM}",ei,Ie,Ie,Ie,Ie,Ie,1],[i,Wi,ei,Ie,Ie,Ie,Ie,Ie,1],[n,"{h}"+Ui,Un,Ie,Dn,Ie,Ie,Ie,1],[a,cn,Un,Ie,Dn,Ie,Ie,Ie,1],[l,li,Un+" "+cn,Ie,Dn+" "+cn,Ie,ti,Ie,1],[e,li+".{fff}",Un+" "+cn,Ie,Dn+" "+cn,Ie,ti,Ie,1]];function S(m){return(_,B,y,z,ee,ie)=>{let x=[],W=ee>=u,M=ee>=c&&ee<u,C=m(y),A=Je(C*e,3),ae=Fs(C.getFullYear(),W?0:C.getMonth(),M||W?1:C.getDate()),te=Je(ae*e,3);if(M||W){let K=M?ee/c:0,ne=W?ee/u:0,w=A==te?A:Je(Fs(ae.getFullYear()+ne,ae.getMonth()+K,1)*e,3),I=new Date(Pt(w/e)),R=I.getFullYear(),se=I.getMonth();for(let P=0;w<=z;P++){let j=Fs(R+ne*P,se+K*P,1),D=j-m(Je(j*e,3));w=Je((+j+D)*e,3),w<=z&&x.push(w)}}else{let K=ee>=i?i:ee,ne=ul(y)-ul(A),w=te+ne+ss(A-te,K);x.push(w);let I=m(w),R=I.getHours()+I.getMinutes()/a+I.getSeconds()/n,se=ee/n,P=_.axes[B]._space,j=ie/P;for(;w=Je(w+ee,e==1?0:3),!(w>z);)if(se>1){let D=ul(Je(R+se,6))%24,ce=m(w).getHours()-D;ce>1&&(ce=-1),w-=ce*n,R=(R+se)%24;let fe=x[x.length-1];Je((w-fe)/ee,3)*j>=.7&&x.push(w)}else x.push(w)}return x}}return[h,v,S]}const[nu,su,au]=Yi(1),[iu,ru,ou]=Yi(.001);Gn(2,-53,53,[1]);function ni(e,l){return e.map(a=>a.map((n,i)=>i==0||i==8||n==null?n:l(i==1||a[8]==0?n:a[1]+n)))}function si(e,l){return(a,n,i,c,u)=>{let p=l.find(y=>u>=y[0])||l[l.length-1],h,v,S,m,_,B;return n.map(y=>{let z=e(y),ee=z.getFullYear(),ie=z.getMonth(),x=z.getDate(),W=z.getHours(),M=z.getMinutes(),C=z.getSeconds(),A=ee!=h&&p[2]||ie!=v&&p[3]||x!=S&&p[4]||W!=m&&p[5]||M!=_&&p[6]||C!=B&&p[7]||p[1];return h=ee,v=ie,S=x,m=W,_=M,B=C,A(z)})}}function uu(e,l){let a=la(l);return(n,i,c,u,p)=>i.map(h=>a(e(h)))}function Fs(e,l,a){return new Date(e,l,a)}function ai(e,l){return l(e)}const cu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ii(e,l){return(a,n,i,c)=>c==null?Zs:l(e(n))}function fu(e,l){let a=e.series[l];return a.width?a.stroke(e,l):a.points.width?a.points.stroke(e,l):null}function du(e,l){return e.series[l].fill(e,l)}const pu={show:!0,live:!0,isolate:!1,mount:Po,markers:{show:!0,width:2,stroke:fu,fill:du,dash:"solid"},idx:null,idxs:null,values:[]};function hu(e,l){let a=e.cursor.points,n=pl(),i=a.size(e,l);nt(n,An,i),nt(n,Cn,i);let c=i/-2;nt(n,"marginLeft",c),nt(n,"marginTop",c);let u=a.width(e,l,i);return u&&nt(n,"borderWidth",u),n}function vu(e,l){let a=e.series[l].points;return a._fill||a._stroke}function gu(e,l){let a=e.series[l].points;return a._stroke||a._fill}function mu(e,l){return e.series[l].points.size}const Os=[0,0];function _u(e,l,a){return Os[0]=l,Os[1]=a,Os}function Yn(e,l,a,n=!0){return i=>{i.button==0&&(!n||i.target==l)&&a(i)}}function Gs(e,l,a,n=!0){return i=>{(!n||i.target==l)&&a(i)}}const wu={show:!0,x:!0,y:!0,lock:!1,move:_u,points:{one:!1,show:hu,size:mu,width:0,stroke:gu,fill:vu},bind:{mousedown:Yn,mouseup:Yn,click:Yn,dblclick:Yn,mousemove:Gs,mouseleave:Gs,mouseenter:Gs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,a,n,i)=>n-i,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},qi={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},sa=Et({},qi,{filter:Pi}),Ki=Et({},sa,{size:10}),ji=Et({},qi,{show:!1}),aa='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ji="bold "+aa,Zi=1.5,ri={show:!0,scale:"x",stroke:Js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ji,side:2,grid:sa,ticks:Ki,border:ji,font:aa,lineGap:Zi,rotate:0},bu="Value",xu="Time",oi={show:!0,scale:"x",auto:!1,sorted:1,min:je,max:-je,idxs:[]};function Su(e,l,a,n,i){return l.map(c=>c==null?"":ea(c))}function yu(e,l,a,n,i,c,u){let p=[],h=Il.get(i)||0;a=u?a:Je(ss(a,i),h);for(let v=a;v<=n;v=Je(v+i,h))p.push(Object.is(v,-0)?0:v);return p}function Hs(e,l,a,n,i,c,u){const p=[],h=e.scales[e.axes[l].scale].log,v=h==10?Ll:Ci,S=ul(v(a));i=pn(h,S),h==10&&(i=Ul[bl(i,Ul)]);let m=a,_=i*h;h==10&&(_=Ul[bl(_,Ul)]);do p.push(m),m=m+i,h==10&&!Il.has(m)&&(m=Je(m,Il.get(i))),m>=_&&(i=m,_=i*h,h==10&&(_=Ul[bl(_,Ul)]));while(m<=n);return p}function ku(e,l,a,n,i,c,u){let h=e.scales[e.axes[l].scale].asinh,v=n>h?Hs(e,l,el(h,a),n,i):[h],S=n>=0&&a<=0?[0]:[];return(a<-h?Hs(e,l,el(h,-n),-a,i):[h]).reverse().map(_=>-_).concat(S,v)}const Qi=/./,Tu=/[12357]/,Eu=/[125]/,ui=/1/,Ws=(e,l,a,n)=>e.map((i,c)=>l==4&&i==0||c%n==0&&a.test(i.toExponential()[i<0?1:0])?i:null);function Mu(e,l,a,n,i){let c=e.axes[a],u=c.scale,p=e.scales[u],h=e.valToPos,v=c._space,S=h(10,u),m=h(9,u)-S>=v?Qi:h(7,u)-S>=v?Tu:h(5,u)-S>=v?Eu:ui;if(m==ui){let _=Rt(h(1,u)-S);if(_<v)return Ws(l.slice().reverse(),p.distr,m,hl(v/_)).reverse()}return Ws(l,p.distr,m,1)}function Au(e,l,a,n,i){let c=e.axes[a],u=c.scale,p=c._space,h=e.valToPos,v=Rt(h(1,u)-h(2,u));return v<p?Ws(l.slice().reverse(),3,Qi,hl(p/v)).reverse():l}function Cu(e,l,a,n){return n==null?Zs:l==null?"":ea(l)}const ci={show:!0,scale:"y",stroke:Js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ji,side:3,grid:sa,ticks:Ki,border:ji,font:aa,lineGap:Zi,rotate:0};function Du(e,l){let a=3+(e||1)*2;return Je(a*l,3)}function Lu(e,l){let{scale:a,idxs:n}=e.series[0],i=e._data[0],c=e.valToPos(i[n[0]],a,!0),u=e.valToPos(i[n[1]],a,!0),p=Rt(u-c),h=e.series[l],v=p/(h.points.space*Ne);return n[1]-n[0]<=v}const fi={scale:null,auto:!0,sorted:0,min:je,max:-je},Xi=(e,l,a,n,i)=>i,di={show:!0,auto:!0,sorted:0,gaps:Xi,alpha:1,facets:[Et({},fi,{scale:"x"}),Et({},fi,{scale:"y"})]},pi={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Xi,alpha:1,points:{show:Lu,filter:null},values:null,min:je,max:-je,idxs:[],path:null,clip:null};function Pu(e,l,a,n,i){return a/10}const $i={time:lo,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Ru=Et({},$i,{time:!1,ori:1}),hi={};function er(e,l){let a=hi[e];return a||(a={key:e,plots:[],sub(n){a.plots.push(n)},unsub(n){a.plots=a.plots.filter(i=>i!=n)},pub(n,i,c,u,p,h,v){for(let S=0;S<a.plots.length;S++)a.plots[S]!=i&&a.plots[S].pub(n,i,c,u,p,h,v)}},e!=null&&(hi[e]=a)),a}const gn=1,Us=2;function Zl(e,l,a){const n=e.mode,i=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let h=c[0],v=n==2?c[1]:c[l],S=n==2?u[i.facets[0].scale]:u[e.series[0].scale],m=n==2?u[i.facets[1].scale]:u[i.scale],_=p.left,B=p.top,y=p.width,z=p.height,ee=e.valToPosH,ie=e.valToPosV;return S.ori==0?a(i,h,v,S,m,ee,ie,_,B,y,z,rs,_n,us,lr,sr):a(i,h,v,S,m,ie,ee,B,_,z,y,os,wn,oa,nr,ar)}function ia(e,l){let a=0,n=0,i=Oe(e.bands,ta);for(let c=0;c<i.length;c++){let u=i[c];u.series[0]==l?a=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[a,n==1?-1:n==2?1:n==3?2:0]}function Fu(e,l,a,n,i){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,h=e.scales[p];return i==-1?h.min:i==1?h.max:h.distr==3?h.dir==1?h.min:h.max:0}function Pl(e,l,a,n,i,c){return Zl(e,l,(u,p,h,v,S,m,_,B,y,z,ee)=>{let ie=u.pxRound;const x=v.dir*(v.ori==0?1:-1),W=v.ori==0?_n:wn;let M,C;x==1?(M=a,C=n):(M=n,C=a);let A=ie(m(p[M],v,z,B)),ae=ie(_(h[M],S,ee,y)),te=ie(m(p[C],v,z,B)),K=ie(_(c==1?S.max:S.min,S,ee,y)),ne=new Path2D(i);return W(ne,te,K),W(ne,A,K),W(ne,A,ae),ne})}function is(e,l,a,n,i,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?us:oa;let h=a;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let B=_[0]-h;B>0&&p(u,h,n,B,n+c),h=_[1]}}let v=a+i-h,S=10;v>0&&p(u,h,n-S/2,v,n+c+S)}return u}function Ou(e,l,a){let n=e[e.length-1];n&&n[0]==l?n[1]=a:e.push([l,a])}function ra(e,l,a,n,i,c,u){let p=[],h=e.length;for(let v=i==1?a:n;v>=a&&v<=n;v+=i)if(l[v]===null){let m=v,_=v;if(i==1)for(;++v<=n&&l[v]===null;)_=v;else for(;--v>=a&&l[v]===null;)_=v;let B=c(e[m]),y=_==m?B:c(e[_]),z=m-i;B=u<=0&&z>=0&&z<h?c(e[z]):B;let ie=_+i;y=u>=0&&ie>=0&&ie<h?c(e[ie]):y,y>=B&&p.push([B,y])}return p}function vi(e){return e==0?Li:e==1?Pt:l=>Wl(l,e)}function tr(e){let l=e==0?rs:os,a=e==0?(i,c,u,p,h,v)=>{i.arcTo(c,u,p,h,v)}:(i,c,u,p,h,v)=>{i.arcTo(u,c,h,p,v)},n=e==0?(i,c,u,p,h)=>{i.rect(c,u,p,h)}:(i,c,u,p,h)=>{i.rect(u,c,h,p)};return(i,c,u,p,h,v=0,S=0)=>{v==0&&S==0?n(i,c,u,p,h):(v=xl(v,p/2,h/2),S=xl(S,p/2,h/2),l(i,c+v,u),a(i,c+p,u,c+p,u+h,v),a(i,c+p,u+h,c,u+h,S),a(i,c,u+h,c,u,S),a(i,c,u,c+p,u,v),i.closePath())}}const rs=(e,l,a)=>{e.moveTo(l,a)},os=(e,l,a)=>{e.moveTo(a,l)},_n=(e,l,a)=>{e.lineTo(l,a)},wn=(e,l,a)=>{e.lineTo(a,l)},us=tr(0),oa=tr(1),lr=(e,l,a,n,i,c)=>{e.arc(l,a,n,i,c)},nr=(e,l,a,n,i,c)=>{e.arc(a,l,n,i,c)},sr=(e,l,a,n,i,c,u)=>{e.bezierCurveTo(l,a,n,i,c,u)},ar=(e,l,a,n,i,c,u)=>{e.bezierCurveTo(a,l,i,n,u,c)};function ir(e){return(l,a,n,i,c)=>Zl(l,a,(u,p,h,v,S,m,_,B,y,z,ee)=>{let{pxRound:ie,points:x}=u,W,M;v.ori==0?(W=rs,M=lr):(W=os,M=nr);const C=Je(x.width*Ne,3);let A=(x.size-x.width)/2*Ne,ae=Je(A*2,3),te=new Path2D,K=new Path2D,{left:ne,top:w,width:I,height:R}=l.bbox;us(K,ne-ae,w-ae,I+ae*2,R+ae*2);const se=P=>{if(h[P]!=null){let j=ie(m(p[P],v,z,B)),D=ie(_(h[P],S,ee,y));W(te,j+A,D),M(te,j,D,A,0,jn*2)}};if(c)c.forEach(se);else for(let P=n;P<=i;P++)se(P);return{stroke:C>0?te:null,fill:te,clip:K,flags:gn|Us}})}function rr(e){return(l,a,n,i,c,u)=>{n!=i&&(c!=n&&u!=n&&e(l,a,n),c!=i&&u!=i&&e(l,a,i),e(l,a,u))}}const Gu=rr(_n),Nu=rr(wn);function or(e){const l=Oe(e?.alignGaps,0);return(a,n,i,c)=>Zl(a,n,(u,p,h,v,S,m,_,B,y,z,ee)=>{[i,c]=ls(h,i,c);let ie=u.pxRound,x=R=>ie(m(R,v,z,B)),W=R=>ie(_(R,S,ee,y)),M,C;v.ori==0?(M=_n,C=Gu):(M=wn,C=Nu);const A=v.dir*(v.ori==0?1:-1),ae={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:gn},te=ae.stroke;let K=!1;if(c-i>=z*4){let R=U=>a.posToVal(U,v.key,!0),se=null,P=null,j,D,we,ve=x(p[A==1?i:c]),ce=x(p[i]),fe=x(p[c]),re=R(A==1?ce+1:fe-1);for(let U=A==1?i:c;U>=i&&U<=c;U+=A){let Me=p[U],De=(A==1?Me<re:Me>re)?ve:x(Me),me=h[U];De==ve?me!=null?(D=me,se==null?(M(te,De,W(D)),j=se=P=D):D<se?se=D:D>P&&(P=D)):me===null&&(K=!0):(se!=null&&C(te,ve,W(se),W(P),W(j),W(D)),me!=null?(D=me,M(te,De,W(D)),se=P=j=D):(se=P=null,me===null&&(K=!0)),ve=De,re=R(ve+A))}se!=null&&se!=P&&we!=ve&&C(te,ve,W(se),W(P),W(j),W(D))}else for(let R=A==1?i:c;R>=i&&R<=c;R+=A){let se=h[R];se===null?K=!0:se!=null&&M(te,x(p[R]),W(se))}let[w,I]=ia(a,n);if(u.fill!=null||w!=0){let R=ae.fill=new Path2D(te),se=u.fillTo(a,n,u.min,u.max,w),P=W(se),j=x(p[i]),D=x(p[c]);A==-1&&([D,j]=[j,D]),M(R,D,P),M(R,j,P)}if(!u.spanGaps){let R=[];K&&R.push(...ra(p,h,i,c,A,x,l)),ae.gaps=R=u.gaps(a,n,i,c,R),ae.clip=is(R,v.ori,B,y,z,ee)}return I!=0&&(ae.band=I==2?[Pl(a,n,i,c,te,-1),Pl(a,n,i,c,te,1)]:Pl(a,n,i,c,te,I)),ae})}function zu(e){const l=Oe(e.align,1),a=Oe(e.ascDesc,!1),n=Oe(e.alignGaps,0),i=Oe(e.extend,!1);return(c,u,p,h)=>Zl(c,u,(v,S,m,_,B,y,z,ee,ie,x,W)=>{[p,h]=ls(m,p,h);let M=v.pxRound,{left:C,width:A}=c.bbox,ae=ce=>M(y(ce,_,x,ee)),te=ce=>M(z(ce,B,W,ie)),K=_.ori==0?_n:wn;const ne={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:gn},w=ne.stroke,I=_.dir*(_.ori==0?1:-1);let R=te(m[I==1?p:h]),se=ae(S[I==1?p:h]),P=se,j=se;i&&l==-1&&(j=C,K(w,j,R)),K(w,se,R);for(let ce=I==1?p:h;ce>=p&&ce<=h;ce+=I){let fe=m[ce];if(fe==null)continue;let re=ae(S[ce]),U=te(fe);l==1?K(w,re,R):K(w,P,U),K(w,re,U),R=U,P=re}let D=P;i&&l==1&&(D=C+A,K(w,D,R));let[we,ve]=ia(c,u);if(v.fill!=null||we!=0){let ce=ne.fill=new Path2D(w),fe=v.fillTo(c,u,v.min,v.max,we),re=te(fe);K(ce,D,re),K(ce,j,re)}if(!v.spanGaps){let ce=[];ce.push(...ra(S,m,p,h,I,ae,n));let fe=v.width*Ne/2,re=a||l==1?fe:-fe,U=a||l==-1?-fe:fe;ce.forEach(Me=>{Me[0]+=re,Me[1]+=U}),ne.gaps=ce=v.gaps(c,u,p,h,ce),ne.clip=is(ce,_.ori,ee,ie,x,W)}return ve!=0&&(ne.band=ve==2?[Pl(c,u,p,h,w,-1),Pl(c,u,p,h,w,1)]:Pl(c,u,p,h,w,ve)),ne})}function gi(e,l,a,n,i,c,u=je){if(e.length>1){let p=null;for(let h=0,v=1/0;h<e.length;h++)if(l[h]!==void 0){if(p!=null){let S=Rt(e[h]-e[p]);S<v&&(v=S,u=Rt(a(e[h],n,i,c)-a(e[p],n,i,c)))}p=h}}return u}function Iu(e){e=e||Rn;const l=Oe(e.size,[.6,je,1]),a=e.align||0,n=e.gap||0;let i=e.radius;i=i==null?[0,0]:typeof i=="number"?[i,0]:i;const c=Ee(i),u=1-l[0],p=Oe(l[1],je),h=Oe(l[2],1),v=Oe(e.disp,Rn),S=Oe(e.each,B=>{}),{fill:m,stroke:_}=v;return(B,y,z,ee)=>Zl(B,y,(ie,x,W,M,C,A,ae,te,K,ne,w)=>{let I=ie.pxRound,R=a,se=n*Ne,P=p*Ne,j=h*Ne,D,we;M.ori==0?[D,we]=c(B,y):[we,D]=c(B,y);const ve=M.dir*(M.ori==0?1:-1);let ce=M.ori==0?us:oa,fe=M.ori==0?S:(N,Ce,Be,Yt,Dt,Ot,qt)=>{S(N,Ce,Be,Dt,Yt,qt,Ot)},re=Oe(B.bands,ta).find(N=>N.series[0]==y),U=re!=null?re.dir:0,Me=ie.fillTo(B,y,ie.min,ie.max,U),Ze=I(ae(Me,C,w,K)),De,me,gt,qe=ne,Ae=I(ie.width*Ne),ot=!1,mt=null,$e=null,ut=null,_t=null;m!=null&&(Ae==0||_!=null)&&(ot=!0,mt=m.values(B,y,z,ee),$e=new Map,new Set(mt).forEach(N=>{N!=null&&$e.set(N,new Path2D)}),Ae>0&&(ut=_.values(B,y,z,ee),_t=new Map,new Set(ut).forEach(N=>{N!=null&&_t.set(N,new Path2D)})));let{x0:be,size:St}=v;if(be!=null&&St!=null){R=1,x=be.values(B,y,z,ee),be.unit==2&&(x=x.map(Be=>B.posToVal(te+Be*ne,M.key,!0)));let N=St.values(B,y,z,ee);St.unit==2?me=N[0]*ne:me=A(N[0],M,ne,te)-A(0,M,ne,te),qe=gi(x,W,A,M,ne,te,qe),gt=qe-me+se}else qe=gi(x,W,A,M,ne,te,qe),gt=qe*u+se,me=qe-gt;gt<1&&(gt=0),Ae>=me/2&&(Ae=0),gt<5&&(I=Li);let At=gt>0,Ct=qe-gt-(At?Ae:0);me=I(Bs(Ct,j,P)),De=(R==0?me/2:R==ve?0:me)-R*ve*((R==0?se/2:0)+(At?Ae/2:0));const Ke={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Vt=ot?null:new Path2D;let Bt=null;if(re!=null)Bt=B.data[re.series[1]];else{let{y0:N,y1:Ce}=v;N!=null&&Ce!=null&&(W=Ce.values(B,y,z,ee),Bt=N.values(B,y,z,ee))}let Kt=D*me,de=we*me;for(let N=ve==1?z:ee;N>=z&&N<=ee;N+=ve){let Ce=W[N];if(Ce==null)continue;if(Bt!=null){let Qe=Bt[N]??0;if(Ce-Qe==0)continue;Ze=ae(Qe,C,w,K)}let Be=M.distr!=2||v!=null?x[N]:N,Yt=A(Be,M,ne,te),Dt=ae(Oe(Ce,Me),C,w,K),Ot=I(Yt-De),qt=I(el(Dt,Ze)),st=I(xl(Dt,Ze)),Lt=qt-st;if(Ce!=null){let Qe=Ce<0?de:Kt,yt=Ce<0?Kt:de;ot?(Ae>0&&ut[N]!=null&&ce(_t.get(ut[N]),Ot,st+ul(Ae/2),me,el(0,Lt-Ae),Qe,yt),mt[N]!=null&&ce($e.get(mt[N]),Ot,st+ul(Ae/2),me,el(0,Lt-Ae),Qe,yt)):ce(Vt,Ot,st+ul(Ae/2),me,el(0,Lt-Ae),Qe,yt),fe(B,y,N,Ot-Ae/2,st,me+Ae,Lt)}}return Ae>0?Ke.stroke=ot?_t:Vt:ot||(Ke._fill=ie.width==0?ie._fill:ie._stroke??ie._fill,Ke.width=0),Ke.fill=ot?$e:Vt,Ke})}function Vu(e,l){const a=Oe(l?.alignGaps,0);return(n,i,c,u)=>Zl(n,i,(p,h,v,S,m,_,B,y,z,ee,ie)=>{[c,u]=ls(v,c,u);let x=p.pxRound,W=D=>x(_(D,S,ee,y)),M=D=>x(B(D,m,ie,z)),C,A,ae;S.ori==0?(C=rs,ae=_n,A=sr):(C=os,ae=wn,A=ar);const te=S.dir*(S.ori==0?1:-1);let K=W(h[te==1?c:u]),ne=K,w=[],I=[];for(let D=te==1?c:u;D>=c&&D<=u;D+=te)if(v[D]!=null){let ve=h[D],ce=W(ve);w.push(ne=ce),I.push(M(v[D]))}const R={stroke:e(w,I,C,ae,A,x),fill:null,clip:null,band:null,gaps:null,flags:gn},se=R.stroke;let[P,j]=ia(n,i);if(p.fill!=null||P!=0){let D=R.fill=new Path2D(se),we=p.fillTo(n,i,p.min,p.max,P),ve=M(we);ae(D,ne,ve),ae(D,K,ve)}if(!p.spanGaps){let D=[];D.push(...ra(h,v,c,u,te,W,a)),R.gaps=D=p.gaps(n,i,c,u,D),R.clip=is(D,S.ori,y,z,ee,ie)}return j!=0&&(R.band=j==2?[Pl(n,i,c,u,se,-1),Pl(n,i,c,u,se,1)]:Pl(n,i,c,u,se,j)),R})}function Bu(e){return Vu(Hu,e)}function Hu(e,l,a,n,i,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(a(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let h=Array(u),v=Array(u-1),S=Array(u-1),m=Array(u-1);for(let _=0;_<u-1;_++)S[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],v[_]=S[_]/m[_];h[0]=v[0];for(let _=1;_<u-1;_++)v[_]===0||v[_-1]===0||v[_-1]>0!=v[_]>0?h[_]=0:(h[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/v[_-1]+(m[_]+2*m[_-1])/v[_]),isFinite(h[_])||(h[_]=0));h[u-1]=v[u-2];for(let _=0;_<u-1;_++)i(p,e[_]+m[_]/3,l[_]+h[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-h[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const Ys=new Set;function mi(){for(let e of Ys)e.syncRect(!0)}mn&&(jl(So,dn,mi),jl(yo,dn,mi,!0),jl(Zn,dn,()=>{Mt.pxRatio=Ne}));const Wu=or(),Uu=ir();function _i(e,l,a,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>qs(c,u,l,a))}function Yu(e,l){return e.map((a,n)=>n==0?{}:Et({},l,a))}function qs(e,l,a,n){return Et({},l==0?a:n,e)}function ur(e,l,a){return l==null?hn:[l,a]}const qu=ur;function Ku(e,l,a){return l==null?hn:Qn(l,a,$s,!0)}function cr(e,l,a,n){return l==null?hn:ns(l,a,e.scales[n].log,!1)}const ju=cr;function fr(e,l,a,n){return l==null?hn:Xs(l,a,e.scales[n].log,!1)}const Ju=fr;function Zu(e,l,a,n,i){let c=el(Za(e),Za(l)),u=l-e,p=bl(i/n*u,a);do{let h=a[p],v=n*h/u;if(v>=i&&c+(h<5?Il.get(h):0)<=17)return[h,v]}while(++p<a.length);return[0,0]}function wi(e){let l,a;return e=e.replace(/(\d+)px/,(n,i)=>(l=Pt((a=+i)*Ne))+"px"),[e,l,a]}function Qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let a=Je(l[2]*Ne,1);l[0]=l[0].replace(/[0-9.]+px/,a+"px"),l[1]=a})}function Mt(e,l,a){const n={mode:Oe(e.mode,1)},i=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let h=!1;n.status=0;const v=n.root=pl(no);if(e.id!=null&&(v.id=e.id),rl(v,e.class),e.title){let t=pl(io,v);t.textContent=e.title}const S=wl("canvas"),m=n.ctx=S.getContext("2d"),_=pl(ro,v);jl("click",_,t=>{t.target===y&&(et!=nn||rt!=sn)&&Ut.click(n,t)},!0);const B=n.under=pl(oo,_);_.appendChild(S);const y=n.over=pl(uo,_);e=vn(e);const z=+Oe(e.pxAlign,1),ee=vi(z);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const ie=e.ms||.001,x=n.series=i==1?_i(e.series||[],oi,pi,!1):Yu(e.series||[null],di),W=n.axes=_i(e.axes||[],ri,ci,!0),M=n.scales={},C=n.bands=e.bands||[];C.forEach(t=>{t.fill=Ee(t.fill||null),t.dir=Oe(t.dir,-1)});const A=i==2?x[1].facets[0].scale:x[0].scale,ae={axes:wr,series:hr},te=(e.drawOrder||["axes","series"]).map(t=>ae[t]);function K(t){const s=t.distr==3?r=>Ll(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Rs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:g}=t,b=g-f;return(o-f)/b}}function ne(t){let s=M[t];if(s==null){let r=(e.scales||Rn)[t]||Rn;if(r.from!=null){ne(r.from);let o=Et({},M[r.from],r,{key:t});o.valToPct=K(o),M[t]=o}else{s=M[t]=Et({},t==A?$i:Ru,r),s.key=t;let o=s.time,f=s.range,g=Nl(f);if((t!=A||i==2&&!o)&&(g&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ka:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ka:{mode:1,hard:f[1],soft:f[1]}},g=!1),!g&&as(f))){let b=f;f=(T,L,H)=>L==null?hn:Qn(L,H,b)}s.range=Ee(f||(o?qu:t==A?s.distr==3?ju:s.distr==4?Ju:ur:s.distr==3?cr:s.distr==4?fr:Ku)),s.auto=Ee(g?!1:s.auto),s.clamp=Ee(s.clamp||Pu),s._min=s._max=null,s.valToPct=K(s)}}}ne("x"),ne("y"),i==1&&x.forEach(t=>{ne(t.scale)}),W.forEach(t=>{ne(t.scale)});for(let t in e.scales)ne(t);const w=M[A],I=w.distr;let R,se;w.ori==0?(rl(v,so),R=c,se=u):(rl(v,ao),R=u,se=c);const P={};for(let t in M){let s=M[t];(s.min!=null||s.max!=null)&&(P[t]={min:s.min,max:s.max},s.min=s.max=null)}const j=e.tzDate||(t=>new Date(Pt(t/ie))),D=e.fmtDate||la,we=ie==1?au(j):ou(j),ve=si(j,ni(ie==1?su:ru,D)),ce=ii(j,ai(cu,D)),fe=[],re=n.legend=Et({},pu,e.legend),U=n.cursor=Et({},wu,{drag:{y:i==2}},e.cursor),Me=re.show,Ze=U.show,De=re.markers;re.idxs=fe,De.width=Ee(De.width),De.dash=Ee(De.dash),De.stroke=Ee(De.stroke),De.fill=Ee(De.fill);let me,gt,qe,Ae=[],ot=[],mt,$e=!1,ut={};if(re.live){const t=x[1]?x[1].values:null;$e=t!=null,mt=$e?t(n,1,0):{_:0};for(let s in mt)ut[s]=Zs}if(Me)if(me=wl("table",go,v),qe=wl("tbody",null,me),re.mount(n,me),$e){gt=wl("thead",null,me,qe);let t=wl("tr",null,gt);wl("th",null,t);for(var _t in mt)wl("th",Fa,t).textContent=_t}else rl(me,_o),re.live&&rl(me,mo);const be={show:!0},St={show:!1};function At(t,s){if(s==0&&($e||!re.live||i==2))return hn;let r=[],o=wl("tr",wo,qe,qe.childNodes[s]);rl(o,t.class),t.show||rl(o,Yl);let f=wl("th",null,o);if(De.show){let T=pl(bo,f);if(s>0){let L=De.width(n,s);L&&(T.style.border=L+"px "+De.dash(n,s)+" "+De.stroke(n,s)),T.style.background=De.fill(n,s)}}let g=pl(Fa,f);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(De.show||(g.style.color=t.width>0?De.stroke(n,s):De.fill(n,s)),Ke("click",f,T=>{if(U._lock)return;dt(T);let L=x.indexOf(t);if((T.ctrlKey||T.metaKey)!=re.isolate){let H=x.some((q,X)=>X>0&&X!=L&&q.show);x.forEach((q,X)=>{X>0&&Sl(X,H?X==L?be:St:be,!0,Tt.setSeries)})}else Sl(L,{show:!t.show},!0,Tt.setSeries)},!1),Z&&Ke(za,f,T=>{U._lock||(dt(T),Sl(x.indexOf(t),rn,!0,Tt.setSeries))},!1));for(var b in mt){let T=wl("td",xo,o);T.textContent="--",r.push(T)}return[o,r]}const Ct=new Map;function Ke(t,s,r,o=!0){const f=Ct.get(s)||{},g=U.bind[t](n,s,r,o);g&&(jl(t,s,f[t]=g),Ct.set(s,f))}function Vt(t,s,r){const o=Ct.get(s)||{};for(let f in o)(t==null||f==t)&&(Vs(f,s,o[f]),delete o[f]);t==null&&Ct.delete(s)}let Bt=0,Kt=0,de=0,N=0,Ce=0,Be=0,Yt=Ce,Dt=Be,Ot=de,qt=N,st=0,Lt=0,Qe=0,yt=0;n.bbox={};let vl=!1,Ht=!1,jt=!1,Jt=!1,Zt=!1,wt=!1;function Ml(t,s,r){(r||t!=n.width||s!=n.height)&&le(t,s),$l(!1),jt=!0,Ht=!0,en()}function le(t,s){n.width=Bt=de=t,n.height=Kt=N=s,Ce=Be=0,Wt(),nl();let r=n.bbox;st=r.left=Wl(Ce*Ne,.5),Lt=r.top=Wl(Be*Ne,.5),Qe=r.width=Wl(de*Ne,.5),yt=r.height=Wl(N*Ne,.5)}const he=3;function _e(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=_r(s);t=s==he||r&&o,t||(le(n.width,n.height),Ht=!0)}}function ze({width:t,height:s}){Ml(t,s)}n.setSize=ze;function Wt(){let t=!1,s=!1,r=!1,o=!1;W.forEach((f,g)=>{if(f.show&&f._show){let{side:b,_size:T}=f,L=b%2,H=f.label!=null?f.labelSize:0,q=T+H;q>0&&(L?(de-=q,b==3?(Ce+=q,o=!0):r=!0):(N-=q,b==0?(Be+=q,t=!0):s=!0))}}),He[0]=t,He[1]=r,He[2]=s,He[3]=o,de-=Pe[1]+Pe[3],Ce+=Pe[3],N-=Pe[2]+Pe[0],Be+=Pe[0]}function nl(){let t=Ce+de,s=Be+N,r=Ce,o=Be;function f(g,b){switch(g){case 1:return t+=b,t-b;case 2:return s+=b,s-b;case 3:return r-=b,r+b;case 0:return o-=b,o+b}}W.forEach((g,b)=>{if(g.show&&g._show){let T=g.side;g._pos=f(T,g._size),g.label!=null&&(g._lpos=f(T,g.labelSize))}})}if(U.dataIdx==null){let t=U.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Ee(t.prox),o=t.bias??=0;U.dataIdx=(f,g,b,T)=>{if(g==0)return b;let L=b,H=r(f,g,b,T)??je,q=H>=0&&H<je,X=w.ori==0?de:N,ge=U.left,Ge=l[0],Fe=l[g];if(s.has(Fe[b])){L=null;let Te=null,pe=null,ue;if(o==0||o==-1)for(ue=b;Te==null&&ue-- >0;)s.has(Fe[ue])||(Te=ue);if(o==0||o==1)for(ue=b;pe==null&&ue++<Fe.length;)s.has(Fe[ue])||(pe=ue);if(Te!=null||pe!=null)if(q){let lt=Te==null?-1/0:R(Ge[Te],w,X,0),pt=pe==null?1/0:R(Ge[pe],w,X,0),It=ge-lt,Ye=pt-ge;It<=Ye?It<=H&&(L=Te):Ye<=H&&(L=pe)}else L=pe==null?Te:Te==null?pe:b-Te<=pe-b?Te:pe}else q&&Rt(ge-R(Ge[b],w,X,0))>H&&(L=null);return L}}const dt=t=>{U.event=t};U.idxs=fe,U._lock=!1;let Xe=U.points;Xe.show=Ee(Xe.show),Xe.size=Ee(Xe.size),Xe.stroke=Ee(Xe.stroke),Xe.width=Ee(Xe.width),Xe.fill=Ee(Xe.fill);const O=n.focus=Et({},e.focus||{alpha:.3},U.focus),Z=O.prox>=0,Y=Z&&Xe.one;let F=[],$=[],J=[];function G(t,s){let r=Xe.show(n,s);if(r instanceof HTMLElement)return rl(r,vo),rl(r,t.class),El(r,-10,-10,de,N),y.insertBefore(r,F[s]),r}function Q(t,s){if(i==1||s>0){let r=i==1&&M[t.scale].time,o=t.value;t.value=r?$a(o)?ii(j,ai(o,D)):o||ce:o||Cu,t.label=t.label||(r?xu:bu)}if(Y||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Wu||Ro,t.fillTo=Ee(t.fillTo||Fu),t.pxAlign=+Oe(t.pxAlign,z),t.pxRound=vi(t.pxAlign),t.stroke=Ee(t.stroke||null),t.fill=Ee(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Du(el(1,t.width),1),o=t.points=Et({},{size:r,width:el(1,r*.2),stroke:t.stroke,space:r*2,paths:Uu,_stroke:null,_fill:null},t.points);o.show=Ee(o.show),o.filter=Ee(o.filter),o.fill=Ee(o.fill),o.stroke=Ee(o.stroke),o.paths=Ee(o.paths),o.pxAlign=t.pxAlign}if(Me){let r=At(t,s);Ae.splice(s,0,r[0]),ot.splice(s,0,r[1]),re.values.push(null)}if(Ze){fe.splice(s,0,null);let r=null;Y?s==0&&(r=G(t,s)):s>0&&(r=G(t,s)),F.splice(s,0,r),$.splice(s,0,0),J.splice(s,0,0)}zt("addSeries",s)}function xe(t,s){s=s??x.length,t=i==1?qs(t,s,oi,pi):qs(t,s,{},di),x.splice(s,0,t),Q(x[s],s)}n.addSeries=xe;function ye(t){if(x.splice(t,1),Me){re.values.splice(t,1),ot.splice(t,1);let s=Ae.splice(t,1)[0];Vt(null,s.firstChild),s.remove()}Ze&&(fe.splice(t,1),F.splice(t,1)[0].remove(),$.splice(t,1),J.splice(t,1)),zt("delSeries",t)}n.delSeries=ye;const He=[!1,!1,!1,!1];function bt(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=M[t.scale];o==null&&(t.scale=r?x[1].scale:A,o=M[t.scale]);let f=o.time;t.size=Ee(t.size),t.space=Ee(t.space),t.rotate=Ee(t.rotate),Nl(t.incrs)&&t.incrs.forEach(b=>{!Il.has(b)&&Il.set(b,Fi(b))}),t.incrs=Ee(t.incrs||(o.distr==2?tu:f?ie==1?nu:iu:Ul)),t.splits=Ee(t.splits||(f&&o.distr==1?we:o.distr==3?Hs:o.distr==4?ku:yu)),t.stroke=Ee(t.stroke),t.grid.stroke=Ee(t.grid.stroke),t.ticks.stroke=Ee(t.ticks.stroke),t.border.stroke=Ee(t.border.stroke);let g=t.values;t.values=Nl(g)&&!Nl(g[0])?Ee(g):f?Nl(g)?si(j,ni(g,D)):$a(g)?uu(j,g):g||ve:g||Su,t.filter=Ee(t.filter||(o.distr>=3&&o.log==10?Mu:o.distr==3&&o.log==2?Au:Pi)),t.font=wi(t.font),t.labelFont=wi(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(He[s]=!0,t._el=pl(co,_))}}function xt(t,s,r,o){let[f,g,b,T]=r,L=s%2,H=0;return L==0&&(T||g)&&(H=s==0&&!f||s==2&&!b?Pt(ri.size/3):0),L==1&&(f||b)&&(H=s==1&&!g||s==3&&!T?Pt(ci.size/2):0),H}const kt=n.padding=(e.padding||[xt,xt,xt,xt]).map(t=>Ee(Oe(t,xt))),Pe=n._padding=kt.map((t,s)=>t(n,s,He,0));let We,at=null,Ue=null;const ct=i==1?x[0].idxs:null;let it=null,gl=!1;function Ql(t,s){if(l=t??[],n.data=n._data=l,i==2){We=0;for(let r=1;r<x.length;r++)We+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),it=l[0],We=it.length;let r=l;if(I==2){r=l.slice();let o=r[0]=Array(We);for(let f=0;f<We;f++)o[f]=f}n._data=l=r}if($l(!0),zt("setData"),I==2&&(jt=!0),s!==!1){let r=w;r.auto(n,gl)?tl():Fl(A,r.min,r.max),Jt=Jt||U.left>=0,wt=!0,en()}}n.setData=Ql;function tl(){gl=!0;let t,s;i==1&&(We>0?(at=ct[0]=0,Ue=ct[1]=We-1,t=l[0][at],s=l[0][Ue],I==2?(t=at,s=Ue):t==s&&(I==3?[t,s]=ns(t,t,w.log,!1):I==4?[t,s]=Xs(t,t,w.log,!1):w.time?s=t+Pt(86400/ie):[t,s]=Qn(t,s,$s,!0))):(at=ct[0]=t=null,Ue=ct[1]=s=null)),Fl(A,t,s)}let Nn,Xl,cs,fs,ds,ps,hs,vs,gs,ll;function ua(t,s,r,o,f,g){t??=Ga,r??=ta,o??="butt",f??=Ga,g??="round",t!=Nn&&(m.strokeStyle=Nn=t),f!=Xl&&(m.fillStyle=Xl=f),s!=cs&&(m.lineWidth=cs=s),g!=ds&&(m.lineJoin=ds=g),o!=ps&&(m.lineCap=ps=o),r!=fs&&m.setLineDash(fs=r)}function ca(t,s,r,o){s!=Xl&&(m.fillStyle=Xl=s),t!=hs&&(m.font=hs=t),r!=vs&&(m.textAlign=vs=r),o!=gs&&(m.textBaseline=gs=o)}function ms(t,s,r,o,f=0){if(o.length>0&&t.auto(n,gl)&&(s==null||s.min==null)){let g=Oe(at,0),b=Oe(Ue,o.length-1),T=r.min==null?Mo(o,g,b,f,t.distr==3):[r.min,r.max];t.min=xl(t.min,r.min=T[0]),t.max=el(t.max,r.max=T[1])}}const fa={min:null,max:null};function dr(){for(let o in M){let f=M[o];P[o]==null&&(f.min==null||P[A]!=null&&f.auto(n,gl))&&(P[o]=fa)}for(let o in M){let f=M[o];P[o]==null&&f.from!=null&&P[f.from]!=null&&(P[o]=fa)}P[A]!=null&&$l(!0);let t={};for(let o in P){let f=P[o];if(f!=null){let g=t[o]=vn(M[o],Go);if(f.min!=null)Et(g,f);else if(o!=A||i==2)if(We==0&&g.from==null){let b=g.range(n,null,null,o);g.min=b[0],g.max=b[1]}else g.min=je,g.max=-je}}if(We>0){x.forEach((o,f)=>{if(i==1){let g=o.scale,b=P[g];if(b==null)return;let T=t[g];if(f==0){let L=T.range(n,T.min,T.max,g);T.min=L[0],T.max=L[1],at=bl(T.min,l[0]),Ue=bl(T.max,l[0]),Ue-at>1&&(l[0][at]<T.min&&at++,l[0][Ue]>T.max&&Ue--),o.min=it[at],o.max=it[Ue]}else o.show&&o.auto&&ms(T,b,o,l[f],o.sorted);o.idxs[0]=at,o.idxs[1]=Ue}else if(f>0&&o.show&&o.auto){let[g,b]=o.facets,T=g.scale,L=b.scale,[H,q]=l[f],X=t[T],ge=t[L];X!=null&&ms(X,P[T],g,H,g.sorted),ge!=null&&ms(ge,P[L],b,q,b.sorted),o.min=b.min,o.max=b.max}});for(let o in t){let f=t[o],g=P[o];if(f.from==null&&(g==null||g.min==null)){let b=f.range(n,f.min==je?null:f.min,f.max==-je?null:f.max,o);f.min=b[0],f.max=b[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let g=t[f.from];if(g.min==null)f.min=f.max=null;else{let b=f.range(n,g.min,g.max,o);f.min=b[0],f.max=b[1]}}}let s={},r=!1;for(let o in t){let f=t[o],g=M[o];if(g.min!=f.min||g.max!=f.max){g.min=f.min,g.max=f.max;let b=g.distr;g._min=b==3?Ll(g.min):b==4?Rs(g.min,g.asinh):b==100?g.fwd(g.min):g.min,g._max=b==3?Ll(g.max):b==4?Rs(g.max,g.asinh):b==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){x.forEach((o,f)=>{i==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)jt=!0,zt("setScale",o);Ze&&U.left>=0&&(Jt=wt=!0)}for(let o in P)P[o]=null}function pr(t){let s=Bs(at-1,0,We-1),r=Bs(Ue+1,0,We-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<We-1;)r++;return[s,r]}function hr(){if(We>0){let t=x.some(s=>s._focus)&&ll!=O.alpha;t&&(m.globalAlpha=ll=O.alpha),x.forEach((s,r)=>{if(r>0&&s.show&&(da(r,!1),da(r,!0),s._paths==null)){let o=ll;ll!=s.alpha&&(m.globalAlpha=ll=s.alpha);let f=i==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),ll!=o&&(m.globalAlpha=ll=o)}}),x.forEach((s,r)=>{if(r>0&&s.show){let o=ll;ll!=s.alpha&&(m.globalAlpha=ll=s.alpha),s._paths!=null&&pa(r,!1);{let f=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,at,Ue,f),b=s.points.filter(n,r,g,f);(g||b)&&(s.points._paths=s.points.paths(n,r,at,Ue,b),pa(r,!0))}ll!=o&&(m.globalAlpha=ll=o),zt("drawSeries",r)}}),t&&(m.globalAlpha=ll=1)}}function da(t,s){let r=s?x[t].points:x[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function pa(t,s){let r=s?x[t].points:x[t],{stroke:o,fill:f,clip:g,flags:b,_stroke:T=r._stroke,_fill:L=r._fill,_width:H=r.width}=r._paths;H=Je(H*Ne,3);let q=null,X=H%2/2;s&&L==null&&(L=H>0?"#fff":T);let ge=r.pxAlign==1&&X>0;if(ge&&m.translate(X,X),!s){let Ge=st-H/2,Fe=Lt-H/2,Te=Qe+H,pe=yt+H;q=new Path2D,q.rect(Ge,Fe,Te,pe)}s?_s(T,H,r.dash,r.cap,L,o,f,b,g):vr(t,T,H,r.dash,r.cap,L,o,f,b,q,g),ge&&m.translate(-X,-X)}function vr(t,s,r,o,f,g,b,T,L,H,q){let X=!1;L!=0&&C.forEach((ge,Ge)=>{if(ge.series[0]==t){let Fe=x[ge.series[1]],Te=l[ge.series[1]],pe=(Fe._paths||Rn).band;Nl(pe)&&(pe=ge.dir==1?pe[0]:pe[1]);let ue,lt=null;Fe.show&&pe&&Co(Te,at,Ue)?(lt=ge.fill(n,Ge)||g,ue=Fe._paths.clip):pe=null,_s(s,r,o,f,lt,b,T,L,H,q,ue,pe),X=!0}}),X||_s(s,r,o,f,g,b,T,L,H,q)}const ha=gn|Us;function _s(t,s,r,o,f,g,b,T,L,H,q,X){ua(t,s,r,o,f),(L||H||X)&&(m.save(),L&&m.clip(L),H&&m.clip(H)),X?(T&ha)==ha?(m.clip(X),q&&m.clip(q),In(f,b),zn(t,g,s)):T&Us?(In(f,b),m.clip(X),zn(t,g,s)):T&gn&&(m.save(),m.clip(X),q&&m.clip(q),In(f,b),m.restore(),zn(t,g,s)):(In(f,b),zn(t,g,s)),(L||H||X)&&m.restore()}function zn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=Nn=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function In(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Xl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function gr(t,s,r,o){let f=W[t],g;if(o<=0)g=[0,0];else{let b=f._space=f.space(n,t,s,r,o),T=f._incrs=f.incrs(n,t,s,r,o,b);g=Zu(s,r,T,o,b)}return f._found=g}function ws(t,s,r,o,f,g,b,T,L,H){let q=b%2/2;z==1&&m.translate(q,q),ua(T,b,L,H,T),m.beginPath();let X,ge,Ge,Fe,Te=f+(o==0||o==3?-g:g);r==0?(ge=f,Fe=Te):(X=f,Ge=Te);for(let pe=0;pe<t.length;pe++)s[pe]!=null&&(r==0?X=Ge=t[pe]:ge=Fe=t[pe],m.moveTo(X,ge),m.lineTo(Ge,Fe));m.stroke(),z==1&&m.translate(-q,-q)}function mr(t){let s=!0;return W.forEach((r,o)=>{if(!r.show)return;let f=M[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,$l(!1));return}else r._show||(s=!1,r._show=!0,$l(!1));let g=r.side,b=g%2,{min:T,max:L}=f,[H,q]=gr(o,T,L,b==0?de:N);if(q==0)return;let X=f.distr==2,ge=r._splits=r.splits(n,o,T,L,H,q,X),Ge=f.distr==2?ge.map(ue=>it[ue]):ge,Fe=f.distr==2?it[ge[1]]-it[ge[0]]:H,Te=r._values=r.values(n,r.filter(n,Ge,o,q,Fe),o,q,Fe);r._rotate=g==2?r.rotate(n,Te,o,q):0;let pe=r._size;r._size=hl(r.size(n,Te,o,t)),pe!=null&&r._size!=pe&&(s=!1)}),s}function _r(t){let s=!0;return kt.forEach((r,o)=>{let f=r(n,o,He,t);f!=Pe[o]&&(s=!1),Pe[o]=f}),s}function wr(){for(let t=0;t<W.length;t++){let s=W[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,g,b=s.stroke(n,t),T=r==0||r==3?-1:1,[L,H]=s._found;if(s.label!=null){let Xt=s.labelGap*T,il=Pt((s._lpos+Xt)*Ne);ca(s.labelFont[0],b,"center",r==2?En:Oa),m.save(),o==1?(f=g=0,m.translate(il,Pt(Lt+yt/2)),m.rotate((r==3?-jn:jn)/2)):(f=Pt(st+Qe/2),g=il);let Hl=Di(s.label)?s.label(n,t,L,H):s.label;m.fillText(Hl,f,g),m.restore()}if(H==0)continue;let q=M[s.scale],X=o==0?Qe:yt,ge=o==0?st:Lt,Ge=s._splits,Fe=q.distr==2?Ge.map(Xt=>it[Xt]):Ge,Te=q.distr==2?it[Ge[1]]-it[Ge[0]]:L,pe=s.ticks,ue=s.border,lt=pe.show?pe.size:0,pt=Pt(lt*Ne),It=Pt((s.alignTo==2?s._size-lt-s.gap:s.gap)*Ne),Ye=s._rotate*-jn/180,ht=ee(s._pos*Ne),sl=(pt+It)*T,Qt=ht+sl;g=o==0?Qt:0,f=o==1?Qt:0;let fl=s.font[0],ml=s.align==1?un:s.align==2?Ds:Ye>0?un:Ye<0?Ds:o==0?"center":r==3?Ds:un,kl=Ye||o==1?"middle":r==2?En:Oa;ca(fl,b,ml,kl);let al=s.font[1]*s.lineGap,dl=Ge.map(Xt=>ee(p(Xt,q,X,ge))),_l=s._values;for(let Xt=0;Xt<_l.length;Xt++){let il=_l[Xt];if(il!=null){o==0?f=dl[Xt]:g=dl[Xt],il=""+il;let Hl=il.indexOf(`
`)==-1?[il]:il.split(/\n/gm);for(let $t=0;$t<Hl.length;$t++){let Ra=Hl[$t];Ye?(m.save(),m.translate(f,g+$t*al),m.rotate(Ye),m.fillText(Ra,0,0),m.restore()):m.fillText(Ra,f,g+$t*al)}}}pe.show&&ws(dl,pe.filter(n,Fe,t,H,Te),o,r,ht,pt,Je(pe.width*Ne,3),pe.stroke(n,t),pe.dash,pe.cap);let Tl=s.grid;Tl.show&&ws(dl,Tl.filter(n,Fe,t,H,Te),o,o==0?2:1,o==0?Lt:st,o==0?yt:Qe,Je(Tl.width*Ne,3),Tl.stroke(n,t),Tl.dash,Tl.cap),ue.show&&ws([ht],[1],o==0?1:0,o==0?1:2,o==1?Lt:st,o==1?yt:Qe,Je(ue.width*Ne,3),ue.stroke(n,t),ue.dash,ue.cap)}zt("drawAxes")}function $l(t){x.forEach((s,r)=>{r>0&&(s._paths=null,t&&(i==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Vn=!1,bs=!1,bn=[];function br(){bs=!1;for(let t=0;t<bn.length;t++)zt(...bn[t]);bn.length=0}function en(){Vn||(Wo(va),Vn=!0)}function xr(t,s=!1){Vn=!0,bs=s,t(n),va(),s&&bn.length>0&&queueMicrotask(br)}n.batch=xr;function va(){if(vl&&(dr(),vl=!1),jt&&(_e(),jt=!1),Ht){if(nt(B,un,Ce),nt(B,En,Be),nt(B,An,de),nt(B,Cn,N),nt(y,un,Ce),nt(y,En,Be),nt(y,An,de),nt(y,Cn,N),nt(_,An,Bt),nt(_,Cn,Kt),S.width=Pt(Bt*Ne),S.height=Pt(Kt*Ne),W.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let g=f===3||f===0?r:0,b=f%2==1;nt(t,b?"left":"top",o-g),nt(t,b?"width":"height",r),nt(t,b?"top":"left",b?Be:Ce),nt(t,b?"height":"width",b?N:de),Is(t,Yl)}else rl(t,Yl)}),Nn=Xl=cs=ds=ps=hs=vs=gs=fs=null,ll=1,yn(!0),Ce!=Yt||Be!=Dt||de!=Ot||N!=qt){$l(!1);let t=de/Ot,s=N/qt;if(Ze&&!Jt&&U.left>=0){U.left*=t,U.top*=s,tn&&El(tn,Pt(U.left),0,de,N),ln&&El(ln,0,Pt(U.top),de,N);for(let r=0;r<F.length;r++){let o=F[r];o!=null&&($[r]*=t,J[r]*=s,El(o,hl($[r]),hl(J[r]),de,N))}}if(tt.show&&!Zt&&tt.left>=0&&tt.width>0){tt.left*=t,tt.width*=t,tt.top*=s,tt.height*=s;for(let r in Es)nt(an,r,tt[r])}Yt=Ce,Dt=Be,Ot=de,qt=N}zt("setSize"),Ht=!1}Bt>0&&Kt>0&&(m.clearRect(0,0,S.width,S.height),zt("drawClear"),te.forEach(t=>t()),zt("draw")),tt.show&&Zt&&(Bn(tt),Zt=!1),Ze&&Jt&&(Bl(null,!0,!1),Jt=!1),re.show&&re.live&&wt&&(ks(),wt=!1),h||(h=!0,n.status=1,zt("ready")),gl=!1,Vn=!1}n.redraw=(t,s)=>{jt=s||!1,t!==!1?Fl(A,w.min,w.max):en()};function xs(t,s){let r=M[t];if(r.from==null){if(We==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(We>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==A&&r.distr==2&&We>0&&(s.min=bl(s.min,l[0]),s.max=bl(s.max,l[0]),s.min==s.max&&s.max++),P[t]=s,vl=!0,en()}}n.setScale=xs;let Ss,ys,tn,ln,ga,ma,nn,sn,_a,wa,et,rt,Rl=!1;const Ut=U.drag;let Gt=Ut.x,Nt=Ut.y;Ze&&(U.x&&(Ss=pl(po,y)),U.y&&(ys=pl(ho,y)),w.ori==0?(tn=Ss,ln=ys):(tn=ys,ln=Ss),et=U.left,rt=U.top);const tt=n.select=Et({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),an=tt.show?pl(fo,tt.over?y:B):null;function Bn(t,s){if(tt.show){for(let r in t)tt[r]=t[r],r in Es&&nt(an,r,t[r]);s!==!1&&zt("setSelect")}}n.setSelect=Bn;function Sr(t){if(x[t].show)Me&&Is(Ae[t],Yl);else if(Me&&rl(Ae[t],Yl),Ze){let r=Y?F[0]:F[t];r!=null&&El(r,-10,-10,de,N)}}function Fl(t,s,r){xs(t,{min:s,max:r})}function Sl(t,s,r,o){s.focus!=null&&Mr(t),s.show!=null&&x.forEach((f,g)=>{g>0&&(t==g||t==null)&&(f.show=s.show,Sr(g),i==2?(Fl(f.facets[0].scale,null,null),Fl(f.facets[1].scale,null,null)):Fl(f.scale,null,null),en())}),r!==!1&&zt("setSeries",t,s),o&&kn("setSeries",n,t,s)}n.setSeries=Sl;function yr(t,s){Et(C[t],s)}function kr(t,s){t.fill=Ee(t.fill||null),t.dir=Oe(t.dir,-1),s=s??C.length,C.splice(s,0,t)}function Tr(t){t==null?C.length=0:C.splice(t,1)}n.addBand=kr,n.setBand=yr,n.delBand=Tr;function Er(t,s){x[t].alpha=s,Ze&&F[t]!=null&&(F[t].style.opacity=s),Me&&Ae[t]&&(Ae[t].style.opacity=s)}let Al,Ol,Vl;const rn={focus:!0};function Mr(t){if(t!=Vl){let s=t==null,r=O.alpha!=1;x.forEach((o,f)=>{if(i==1||f>0){let g=s||f==0||f==t;o._focus=s?null:g,r&&Er(f,g?1:O.alpha)}}),Vl=t,r&&en()}}Me&&Z&&Ke(Ia,me,t=>{U._lock||(dt(t),Vl!=null&&Sl(null,rn,!0,Tt.setSeries))});function yl(t,s,r){let o=M[s];r&&(t=t/Ne-(o.ori==1?Be:Ce));let f=de;o.ori==1&&(f=N,t=f-t),o.dir==-1&&(t=f-t);let g=o._min,b=o._max,T=t/f,L=g+(b-g)*T,H=o.distr;return H==3?pn(10,L):H==4?Lo(L,o.asinh):H==100?o.bwd(L):L}function Ar(t,s){let r=yl(t,A,s);return bl(r,l[0],at,Ue)}n.valToIdx=t=>bl(t,l[0]),n.posToIdx=Ar,n.posToVal=yl,n.valToPos=(t,s,r)=>M[s].ori==0?c(t,M[s],r?Qe:de,r?st:0):u(t,M[s],r?yt:N,r?Lt:0),n.setCursor=(t,s,r)=>{et=t.left,rt=t.top,Bl(null,s,r)};function ba(t,s){nt(an,un,tt.left=t),nt(an,An,tt.width=s)}function xa(t,s){nt(an,En,tt.top=t),nt(an,Cn,tt.height=s)}let xn=w.ori==0?ba:xa,Sn=w.ori==1?ba:xa;function Cr(){if(Me&&re.live)for(let t=i==2?1:0;t<x.length;t++){if(t==0&&$e)continue;let s=re.values[t],r=0;for(let o in s)ot[t][r++].firstChild.nodeValue=s[o]}}function ks(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{fe[o]=r}):Oo(t.idx)||fe.fill(t.idx),re.idx=fe[0]),Me&&re.live){for(let r=0;r<x.length;r++)(r>0||i==1&&!$e)&&Dr(r,fe[r]);Cr()}wt=!1,s!==!1&&zt("setLegend")}n.setLegend=ks;function Dr(t,s){let r=x[t],o=t==0&&I==2?it:l[t],f;$e?f=r.values(n,t,s)??ut:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?ut:{_:f}),re.values[t]=f}function Bl(t,s,r){_a=et,wa=rt,[et,rt]=U.move(n,et,rt),U.left=et,U.top=rt,Ze&&(tn&&El(tn,Pt(et),0,de,N),ln&&El(ln,0,Pt(rt),de,N));let o,f=at>Ue;Al=je,Ol=null;let g=w.ori==0?de:N,b=w.ori==1?de:N;if(et<0||We==0||f){o=U.idx=null;for(let T=0;T<x.length;T++){let L=F[T];L!=null&&El(L,-10,-10,de,N)}Z&&Sl(null,rn,!0,t==null&&Tt.setSeries),re.live&&(fe.fill(o),wt=!0)}else{let T,L,H;i==1&&(T=w.ori==0?et:rt,L=yl(T,A),o=U.idx=bl(L,l[0],at,Ue),H=R(l[0][o],w,g,0));let q=-10,X=-10,ge=0,Ge=0,Fe=!0,Te="",pe="";for(let ue=i==2?1:0;ue<x.length;ue++){let lt=x[ue],pt=fe[ue],It=pt==null?null:i==1?l[ue][pt]:l[ue][1][pt],Ye=U.dataIdx(n,ue,o,L),ht=Ye==null?null:i==1?l[ue][Ye]:l[ue][1][Ye];if(wt=wt||ht!=It||Ye!=pt,fe[ue]=Ye,ue>0&&lt.show){let sl=Ye==null?-10:Ye==o?H:R(i==1?l[0][Ye]:l[ue][0][Ye],w,g,0),Qt=ht==null?-10:se(ht,i==1?M[lt.scale]:M[lt.facets[1].scale],b,0);if(Z&&ht!=null){let fl=w.ori==1?et:rt,ml=Rt(O.dist(n,ue,Ye,Qt,fl));if(ml<Al){let kl=O.bias;if(kl!=0){let al=yl(fl,lt.scale),dl=ht>=0?1:-1,_l=al>=0?1:-1;_l==dl&&(_l==1?kl==1?ht>=al:ht<=al:kl==1?ht<=al:ht>=al)&&(Al=ml,Ol=ue)}else Al=ml,Ol=ue}}if(wt||Y){let fl,ml;w.ori==0?(fl=sl,ml=Qt):(fl=Qt,ml=sl);let kl,al,dl,_l,Tl,Xt,il=!0,Hl=Xe.bbox;if(Hl!=null){il=!1;let $t=Hl(n,ue);dl=$t.left,_l=$t.top,kl=$t.width,al=$t.height}else dl=fl,_l=ml,kl=al=Xe.size(n,ue);if(Xt=Xe.fill(n,ue),Tl=Xe.stroke(n,ue),Y)ue==Ol&&Al<=O.prox&&(q=dl,X=_l,ge=kl,Ge=al,Fe=il,Te=Xt,pe=Tl);else{let $t=F[ue];$t!=null&&($[ue]=dl,J[ue]=_l,qa($t,kl,al,il),Ua($t,Xt,Tl),El($t,hl(dl),hl(_l),de,N))}}}}if(Y){let ue=O.prox,lt=Vl==null?Al<=ue:Al>ue||Ol!=Vl;if(wt||lt){let pt=F[0];pt!=null&&($[0]=q,J[0]=X,qa(pt,ge,Ge,Fe),Ua(pt,Te,pe),El(pt,hl(q),hl(X),de,N))}}}if(tt.show&&Rl)if(t!=null){let[T,L]=Tt.scales,[H,q]=Tt.match,[X,ge]=t.cursor.sync.scales,Ge=t.cursor.drag;if(Gt=Ge._x,Nt=Ge._y,Gt||Nt){let{left:Fe,top:Te,width:pe,height:ue}=t.select,lt=t.scales[X].ori,pt=t.posToVal,It,Ye,ht,sl,Qt,fl=T!=null&&H(T,X),ml=L!=null&&q(L,ge);fl&&Gt?(lt==0?(It=Fe,Ye=pe):(It=Te,Ye=ue),ht=M[T],sl=R(pt(It,X),ht,g,0),Qt=R(pt(It+Ye,X),ht,g,0),xn(xl(sl,Qt),Rt(Qt-sl))):xn(0,g),ml&&Nt?(lt==1?(It=Fe,Ye=pe):(It=Te,Ye=ue),ht=M[L],sl=se(pt(It,ge),ht,b,0),Qt=se(pt(It+Ye,ge),ht,b,0),Sn(xl(sl,Qt),Rt(Qt-sl))):Sn(0,b)}else Ms()}else{let T=Rt(_a-ga),L=Rt(wa-ma);if(w.ori==1){let ge=T;T=L,L=ge}Gt=Ut.x&&T>=Ut.dist,Nt=Ut.y&&L>=Ut.dist;let H=Ut.uni;H!=null?Gt&&Nt&&(Gt=T>=H,Nt=L>=H,!Gt&&!Nt&&(L>T?Nt=!0:Gt=!0)):Ut.x&&Ut.y&&(Gt||Nt)&&(Gt=Nt=!0);let q,X;Gt&&(w.ori==0?(q=nn,X=et):(q=sn,X=rt),xn(xl(q,X),Rt(X-q)),Nt||Sn(0,b)),Nt&&(w.ori==1?(q=nn,X=et):(q=sn,X=rt),Sn(xl(q,X),Rt(X-q)),Gt||xn(0,g)),!Gt&&!Nt&&(xn(0,0),Sn(0,0))}if(Ut._x=Gt,Ut._y=Nt,t==null){if(r){if(Pa!=null){let[T,L]=Tt.scales;Tt.values[0]=T!=null?yl(w.ori==0?et:rt,T):null,Tt.values[1]=L!=null?yl(w.ori==1?et:rt,L):null}kn(Ls,n,et,rt,de,N,o)}if(Z){let T=r&&Tt.setSeries,L=O.prox;Vl==null?Al<=L&&Sl(Ol,rn,!0,T):Al>L?Sl(null,rn,!0,T):Ol!=Vl&&Sl(Ol,rn,!0,T)}}wt&&(re.idx=o,ks()),s!==!1&&zt("setCursor")}let Gl=null;Object.defineProperty(n,"rect",{get(){return Gl==null&&yn(!1),Gl}});function yn(t=!1){t?Gl=null:(Gl=y.getBoundingClientRect(),zt("syncRect",Gl))}function Sa(t,s,r,o,f,g,b){U._lock||Rl&&t!=null&&t.movementX==0&&t.movementY==0||(Ts(t,s,r,o,f,g,b,!1,t!=null),t!=null?Bl(null,!0,!0):Bl(s,!0,!1))}function Ts(t,s,r,o,f,g,b,T,L){if(Gl==null&&yn(!1),dt(t),t!=null)r=t.clientX-Gl.left,o=t.clientY-Gl.top;else{if(r<0||o<0){et=-10,rt=-10;return}let[H,q]=Tt.scales,X=s.cursor.sync,[ge,Ge]=X.values,[Fe,Te]=X.scales,[pe,ue]=Tt.match,lt=s.axes[0].side%2==1,pt=w.ori==0?de:N,It=w.ori==1?de:N,Ye=lt?g:f,ht=lt?f:g,sl=lt?o:r,Qt=lt?r:o;if(Fe!=null?r=pe(H,Fe)?p(ge,M[H],pt,0):-10:r=pt*(sl/Ye),Te!=null?o=ue(q,Te)?p(Ge,M[q],It,0):-10:o=It*(Qt/ht),w.ori==1){let fl=r;r=o,o=fl}}L&&(s==null||s.cursor.event.type==Ls)&&((r<=1||r>=de-1)&&(r=Wl(r,de)),(o<=1||o>=N-1)&&(o=Wl(o,N))),T?(ga=r,ma=o,[nn,sn]=U.move(n,r,o)):(et=r,rt=o)}const Es={width:0,height:0,left:0,top:0};function Ms(){Bn(Es,!1)}let ya,ka,Ta,Ea;function Ma(t,s,r,o,f,g,b){Rl=!0,Gt=Nt=Ut._x=Ut._y=!1,Ts(t,s,r,o,f,g,b,!0,!1),t!=null&&(Ke(Ps,Ns,Aa,!1),kn(Na,n,nn,sn,de,N,null));let{left:T,top:L,width:H,height:q}=tt;ya=T,ka=L,Ta=H,Ea=q}function Aa(t,s,r,o,f,g,b){Rl=Ut._x=Ut._y=!1,Ts(t,s,r,o,f,g,b,!1,!0);let{left:T,top:L,width:H,height:q}=tt,X=H>0||q>0,ge=ya!=T||ka!=L||Ta!=H||Ea!=q;if(X&&ge&&Bn(tt),Ut.setScale&&X&&ge){let Ge=T,Fe=H,Te=L,pe=q;if(w.ori==1&&(Ge=L,Fe=q,Te=T,pe=H),Gt&&Fl(A,yl(Ge,A),yl(Ge+Fe,A)),Nt)for(let ue in M){let lt=M[ue];ue!=A&&lt.from==null&&lt.min!=je&&Fl(ue,yl(Te+pe,ue),yl(Te,ue))}Ms()}else U.lock&&(U._lock=!U._lock,Bl(s,!0,t!=null));t!=null&&(Vt(Ps,Ns),kn(Ps,n,et,rt,de,N,null))}function Lr(t,s,r,o,f,g,b){if(U._lock)return;dt(t);let T=Rl;if(Rl){let L=!0,H=!0,q=10,X,ge;w.ori==0?(X=Gt,ge=Nt):(X=Nt,ge=Gt),X&&ge&&(L=et<=q||et>=de-q,H=rt<=q||rt>=N-q),X&&L&&(et=et<nn?0:de),ge&&H&&(rt=rt<sn?0:N),Bl(null,!0,!0),Rl=!1}et=-10,rt=-10,fe.fill(null),Bl(null,!0,!0),T&&(Rl=T)}function Ca(t,s,r,o,f,g,b){U._lock||(dt(t),tl(),Ms(),t!=null&&kn(Va,n,et,rt,de,N,null))}function Da(){W.forEach(Qu),Ml(n.width,n.height,!0)}jl(Zn,dn,Da);const on={};on.mousedown=Ma,on.mousemove=Sa,on.mouseup=Aa,on.dblclick=Ca,on.setSeries=(t,s,r,o)=>{let f=Tt.match[2];r=f(n,s,r),r!=-1&&Sl(r,o,!0,!1)},Ze&&(Ke(Na,y,Ma),Ke(Ls,y,Sa),Ke(za,y,t=>{dt(t),yn(!1)}),Ke(Ia,y,Lr),Ke(Va,y,Ca),Ys.add(n),n.syncRect=yn);const Hn=n.hooks=e.hooks||{};function zt(t,s,r){bs?bn.push([t,s,r]):t in Hn&&Hn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Hn[s]=(Hn[s]||[]).concat(t.hooks[s])});const La=(t,s,r)=>r,Tt=Et({key:null,setSeries:!1,filters:{pub:Qa,sub:Qa},scales:[A,x[1]?x[1].scale:null],match:[Xa,Xa,La],values:[null,null]},U.sync);Tt.match.length==2&&Tt.match.push(La),U.sync=Tt;const Pa=Tt.key,As=er(Pa);function kn(t,s,r,o,f,g,b){Tt.filters.pub(t,s,r,o,f,g,b)&&As.pub(t,s,r,o,f,g,b)}As.sub(n);function Pr(t,s,r,o,f,g,b){Tt.filters.sub(t,s,r,o,f,g,b)&&on[t](null,s,r,o,f,g,b)}n.pub=Pr;function Rr(){As.unsub(n),Ys.delete(n),Ct.clear(),Vs(Zn,dn,Da),v.remove(),me?.remove(),zt("destroy")}n.destroy=Rr;function Cs(){zt("init",e,l),Ql(l||e.data,!1),P[A]?xs(A,P[A]):tl(),Zt=tt.show&&(tt.width>0||tt.height>0),Jt=wt=!0,Ml(e.width,e.height)}return x.forEach(Q),W.forEach(bt),a?a instanceof HTMLElement?(a.appendChild(v),Cs()):a(n,Cs):Cs(),n}Mt.assign=Et;Mt.fmtNum=ea;Mt.rangeNum=Qn;Mt.rangeLog=ns;Mt.rangeAsinh=Xs;Mt.orient=Zl;Mt.pxRatio=Ne;Mt.join=Ho;Mt.fmtDate=la,Mt.tzDate=$o;Mt.sync=er;{Mt.addGap=Ou,Mt.clipGaps=is;let e=Mt.paths={points:ir};e.linear=or,e.stepped=zu,e.bars=Iu,e.spline=Bu}var Xu=Le('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),$u=Le('<span class="estimated-badge svelte-3wi8ix">est</span>'),ec=Le('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),tc=Le('<span class="estimated-badge svelte-3wi8ix">est</span>'),lc=Le("<span> </span> <!>",1),nc=Le('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),sc=Le('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),ac=Le('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function ic(e,l){es(l,!0);const a=.5,n=1.2,i=0,c=100;function u(w,I){const R=[...w].sort((D,we)=>D-we),se=I/100*(R.length-1),P=Math.floor(se),j=Math.ceil(se);return P===j?R[P]:R[P]+(R[j]-R[P])*(se-P)}let p=fn(l,"trend",3,null),h=Re(!1),v=Re(""),S=Re(null),m=Ve(()=>Kn.config.temp_units==="C"),_=Ve(Ti),B=Ve(js),y=Ve(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(be=>be.status!=="invalid");if(w.length===0)return null;const I=[...w].sort((be,St)=>new Date(be.timestamp).getTime()-new Date(St.timestamp).getTime()),R=I[0],se=I[I.length-1],P=I.map(be=>be.sg_calibrated??be.sg_raw).filter(be=>be!==null&&be>=a&&be<=n),j=I.map(be=>be.temp_calibrated??be.temp_raw).filter(be=>be!==null&&be>=i&&be<=c);if(P.length===0)return null;const D=P[P.length-1],we=P[0],ve=u(P,95),ce=u(P,5),fe=new Date(R.timestamp).getTime(),re=new Date(se.timestamp).getTime(),Me=(re-fe)/(1e3*60*60*24),Ze=Me>0?(D-we)/Me:0;let De=null,me=null,gt=null,qe=null;if(j.length>0){const be=j[j.length-1],St=j.reduce((Ke,Vt)=>Ke+Vt,0)/j.length,At=u(j,95),Ct=u(j,5);De=d(m)?be:be*9/5+32,me=d(m)?St:St*9/5+32,gt=d(m)?At:At*9/5+32,qe=d(m)?Ct:Ct*9/5+32}let Ae=0;const ot=.001;for(let be=P.length-2;be>=0;be--)if(Math.abs(P[be]-D)>ot){const St=new Date(I[be+1].timestamp).getTime();Ae=(re-St)/(1e3*60*60*24);break}let mt=null,$e=null;const ut=l.originalGravity??ve,_t=l.originalGravity===null;return ut>1&&ut>D&&(mt=(ut-D)/(ut-1)*100,$e=(ut-D)*131.25),{currentSg:D,firstSg:we,highSg:ve,lowSg:ce,currentTemp:De,avgTemp:me,highTemp:gt,lowTemp:qe,fermRate:Ze,durationDays:Me,daysAtCurrentSg:Ae,apparentAttenuation:mt,abv:$e,ogIsEstimated:_t,effectiveOg:ut}});function z(){oe(v,l.originalGravity?.toFixed(3)??"",!0),oe(h,!0),setTimeout(()=>d(S)?.focus(),0)}function ee(){const w=d(v).trim();if(!w)l.onOgChange?.(null);else{const I=parseFloat(w);!isNaN(I)&&I>=.99&&I<=1.2&&l.onOgChange?.(I)}oe(h,!1)}function ie(w){w.key==="Enter"?ee():w.key==="Escape"&&oe(h,!1)}function x(w){return Ln(w)}function W(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function M(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function C(w){return w===null?"--":w.toFixed(1)}function A(w){return w===null?"--":`${w.toFixed(1)}%`}var ae=Fn(),te=Dl(ae);{var K=w=>{var I=sc(),R=E(I),se=E(R),P=E(se),j=E(P,!0);k(P);var D=V(P,2),we=V(E(D),2),ve=E(we,!0);k(we),k(D);var ce=V(D,2),fe=V(E(ce),2),re=E(fe,!0);k(fe),k(ce);var U=V(ce,2),Me=V(E(U),2),Ze=E(Me,!0);k(Me),k(U);var De=V(U,2),me=V(E(De),2),gt=E(me,!0);k(me),k(De),k(se);var qe=V(se,2),Ae=V(E(qe),2),ot=V(E(Ae),2),mt=E(ot,!0),$e=V(mt),ut=E($e,!0);k($e),k(ot),k(Ae);var _t=V(Ae,2),be=V(E(_t),2),St=E(be,!0),At=V(St),Ct=E(At,!0);k(At),k(be),k(_t);var Ke=V(_t,2),Vt=V(E(Ke),2),Bt=E(Vt,!0),Kt=V(Bt),de=E(Kt,!0);k(Kt),k(Vt),k(Ke);var N=V(Ke,2),Ce=V(E(N),2),Be=E(Ce,!0),Yt=V(Be),Dt=E(Yt,!0);k(Yt),k(Ce),k(N),k(qe),k(R);var Ot=V(R,2),qt=E(Ot),st=V(E(qt),2);let Lt;var Qe=E(st);k(st),k(qt);var yt=V(qt,2),vl=V(E(yt),2),Ht=E(vl,!0);k(vl),k(yt);var jt=V(yt,2),Jt=V(E(jt),2),Zt=E(Jt,!0);k(Jt),k(jt);var wt=V(jt,2),Ml=V(E(wt),2);{var le=Y=>{var F=Xu();yi(F),F.__keydown=ie,Ks(F,$=>oe(S,$),()=>d(S)),bi("blur",F,ee),ki(F,()=>d(v),$=>oe(v,$)),ke(Y,F)},he=Y=>{var F=Fn(),$=Dl(F);{var J=Q=>{var xe=ec();xe.__click=z;var ye=E(xe);let He;var bt=E(ye,!0);k(ye);var xt=V(ye,2);{var kt=Pe=>{var We=$u();ke(Pe,We)};ft(xt,Pe=>{d(y).ogIsEstimated&&Pe(kt)})}Cl(2),k(xe),vt(Pe=>{zl(xe,"title",d(y).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),He=ol(ye,1,"stat-value svelte-3wi8ix",null,He,{estimated:d(y).ogIsEstimated}),Se(bt,Pe)},[()=>x(d(y).effectiveOg)]),ke(Q,xe)},G=Q=>{var xe=lc(),ye=Dl(xe);let He;var bt=E(ye,!0);k(ye);var xt=V(ye,2);{var kt=Pe=>{var We=tc();ke(Pe,We)};ft(xt,Pe=>{d(y).ogIsEstimated&&Pe(kt)})}vt(Pe=>{He=ol(ye,1,"stat-value svelte-3wi8ix",null,He,{estimated:d(y).ogIsEstimated}),Se(bt,Pe)},[()=>x(d(y).effectiveOg)]),ke(Q,xe)};ft($,Q=>{l.onOgChange?Q(J):Q(G,!1)},!0)}ke(Y,F)};ft(Ml,Y=>{l.onOgChange&&d(h)?Y(le):Y(he,!1)})}k(wt);var _e=V(wt,2),ze=V(E(_e),2),Wt=E(ze,!0);k(ze),k(_e);var nl=V(_e,2),dt=V(E(nl),2),Xe=E(dt,!0);k(dt),k(nl);var O=V(nl,2);{var Z=Y=>{var F=nc(),$=V(E(F),2),J=E($,!0);k($),Cl(2),k(F),vt((G,Q)=>{zl(F,"title",`Estimated time until target FG (R=${G??""})`),Se(J,Q)},[()=>p().r2.toFixed(2),()=>M(p().daysToFg)]),ke(Y,F)};ft(O,Y=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&Y(Z)})}k(Ot),k(I),vt((Y,F,$,J,G,Q,xe,ye,He,bt,xt,kt,Pe)=>{Se(j,d(B)==="SG"?"Gravity":d(B)==="P"?"Plato":"Brix"),Se(ve,Y),Se(re,F),Se(Ze,$),Se(gt,J),Se(mt,G),Se(ut,d(_)),Se(St,Q),Se(Ct,d(_)),Se(Bt,xe),Se(de,d(_)),Se(Be,ye),Se(Dt,d(_)),Lt=ol(st,1,"stat-value rate svelte-3wi8ix",null,Lt,{fermenting:d(y).fermRate<0}),Se(Qe,`${He??""}/day`),Se(Ht,bt),Se(Zt,xt),Se(Wt,kt),Se(Xe,Pe)},[()=>x(d(y).currentSg),()=>x(d(y).firstSg),()=>x(d(y).highSg),()=>x(d(y).lowSg),()=>C(d(y).currentTemp),()=>C(d(y).avgTemp),()=>C(d(y).highTemp),()=>C(d(y).lowTemp),()=>W(d(y).fermRate),()=>M(d(y).durationDays),()=>M(d(y).daysAtCurrentSg),()=>A(d(y).apparentAttenuation),()=>A(d(y).abv)]),ke(w,I)},ne=w=>{var I=ac();ke(w,I)};ft(te,w=>{d(y)?w(K):w(ne,!1)})}ke(e,ae),ts()}$n(["keydown","click"]);var rc=Le('<button type="button"> </button>'),oc=Le("<option> </option>"),uc=Le('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),cc=Le('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),fc=Le('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),dc=Le('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <button type="button"><span class="legend-line legend-line-dotted svelte-12kwequ"></span> <span>Ambient</span></button> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Chamber</span></button> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function pc(e,l){es(l,!0);const a="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let i=Ve(()=>Kn.config.smoothing_enabled),c=Ve(()=>Kn.config.smoothing_samples),u=Re("UTC"),p=Re(0),h=Re(3),v=fn(l,"deviceColor",3,"BLACK"),S=fn(l,"originalGravity",3,null),m=fn(l,"controlEvents",19,()=>[]),_=Ve(()=>Kn.config.temp_units==="C"),B=Ve(js),y,z=null,ee=Re(!0),ie=Re(null),x=Re(24),W=Re(ql([])),M=Re(ql([])),C=Re(ql([])),A=Re(null),ae=Re(null);const te={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},K="#facc15",ne="rgba(250, 204, 21, 0.3)",w="#71717a",I="#a1a1aa",R="rgba(255, 255, 255, 0.04)",se="#22d3ee",P="#a78bfa",j="rgba(250, 204, 21, 0.5)",D="brewsignal_chart_trend_enabled";let we=Re(!0);const ve="brewsignal_chart_ambient_enabled",ce="brewsignal_chart_chamber_enabled";let fe=Re(!0),re=Re(!0),U=Re(ql([]));function Me(O,Z,Y=1.01){const F=[];for(let ct=0;ct<O.length;ct++)Z[ct]!==null&&F.push([O[ct],Z[ct]]);if(F.length<10)return null;const $=F.length;let J=0,G=0,Q=0,xe=0;for(const[ct,it]of F)J+=ct,G+=it,Q+=ct*it,xe+=ct*ct;const ye=$*xe-J*J;if(Math.abs(ye)<1e-10)return null;const He=($*Q-J*G)/ye,bt=(G-He*J)/$,xt=G/$;let kt=0,Pe=0;for(const[ct,it]of F){const gl=He*ct+bt;kt+=(it-gl)**2,Pe+=(it-xt)**2}const We=Pe>0?1-kt/Pe:0;let at=null,Ue=null;if(He<0&&We>.3){const ct=O[O.length-1],it=(Y-bt)/He;it>ct&&(Ue=(it-ct)/(1440*60),Ue>0&&Ue<60?at=Y:Ue=null)}return{slope:He,intercept:bt,r2:We,predictedFg:at,daysToFg:Ue}}function Ze(O){const Z=[];let Y=null,F=null;for(const J of O){const G=ot(J.timestamp);J.action==="heat_on"?Y=G:J.action==="heat_off"&&Y!==null?(Z.push({type:"heating",startTime:Y,endTime:G}),Y=null):J.action==="cool_on"?F=G:J.action==="cool_off"&&F!==null&&(Z.push({type:"cooling",startTime:F,endTime:G}),F=null)}const $=Date.now()/1e3;return Y!==null&&Z.push({type:"heating",startTime:Y,endTime:$}),F!==null&&Z.push({type:"cooling",startTime:F,endTime:$}),Z}function De(O,Z){return O.map(Y=>Z.slope*Y+Z.intercept)}function me(O,Z,Y){const F=new Date(O*1e3);try{return Y?F.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:Z}):F.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:Z})}catch($){return console.warn("Invalid timezone:",Z,$),Y?F.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):F.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function gt(O,Z,Y){const F=K,$=te[v()]||I;return{width:O,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[J=>{const G=J.cursor.idx;if(G==null)return;const Q=J.root.querySelector(".u-legend");Q&&(Q.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`)}]},scales:{x:{time:!0},sg:{auto:!0,range:(J,G,Q)=>{const xe=(Q-G)*.1||.005;return[G-xe,Q+xe]}},temp:{auto:!0,range:(J,G,Q)=>{const xe=Q-G,ye=10;if(xe<ye){const bt=(Q+G)/2;return[bt-ye/2,bt+ye/2]}const He=xe*.1;return[G-He,Q+He]}}},axes:[{stroke:w,grid:{stroke:R,width:1},ticks:{stroke:R,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(J,G)=>G.map(Q=>me(Q,Y,d(x)<=24))},{scale:"sg",stroke:F,grid:{stroke:R,width:1},ticks:{stroke:R,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(J,G)=>G.map(Q=>Ln(Q)),side:3},{scale:"temp",stroke:$,grid:{show:!1},ticks:{stroke:R,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(J,G)=>G.map(Q=>Q.toFixed(0)+""),side:1}],series:[{value:(J,G)=>me(G,Y,!1)+" "+me(G,Y,!0)},{label:d(B)==="SG"?"Gravity":d(B)==="P"?"Plato":"Brix",scale:"sg",stroke:F,width:2,value:(J,G)=>G!==null?Ln(G):"--",fill:(J,G)=>{const Q=J.ctx.createLinearGradient(0,J.bbox.top,0,J.bbox.top+J.bbox.height);return Q.addColorStop(0,ne),Q.addColorStop(1,"transparent"),Q},points:{show:!1},paths:Mt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:$,width:1.5,dash:[4,4],value:(J,G)=>G!==null?G.toFixed(1)+"":"--",points:{show:!1},paths:Mt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:se,width:1.5,dash:[2,4],value:(J,G)=>G!==null?G.toFixed(1)+"":"--",points:{show:!1},paths:Mt.paths.spline?.(),show:d(fe)},{label:"Chamber",scale:"temp",stroke:P,width:1.5,dash:[4,2],value:(J,G)=>G!==null?G.toFixed(1)+"":"--",points:{show:!1},paths:Mt.paths.spline?.(),show:d(re)},{label:"Trend",scale:"sg",stroke:j,width:2,dash:[8,4],value:(J,G)=>G!==null?Ln(G):"--",points:{show:!1},show:d(we)}]}}function qe(O,Z){if(Z<=1)return O;const Y=[];for(let F=0;F<O.length;F++){const $=[],J=Math.floor(Z/2);for(let G=Math.max(0,F-J);G<=Math.min(O.length-1,F+J);G++){const Q=O[G];Q!==null&&$.push(Q)}$.length>0?Y.push($.reduce((G,Q)=>G+Q,0)/$.length):Y.push(null)}return Y}function Ae(O,Z,Y,F,$,J){if(O.length<=J)return[O,Z,Y,F,$];const G=Math.ceil(O.length/J),Q=[],xe=[],ye=[],He=[],bt=[];for(let xt=0;xt<O.length;xt+=G){const kt=Math.min(xt+G,O.length);let Pe=0,We=0,at=0,Ue=0,ct=0,it=0,gl=0,Ql=0;for(let tl=xt;tl<kt;tl++)Z[tl]!==null&&(Pe+=Z[tl],We++),Y[tl]!==null&&(at+=Y[tl],Ue++),F[tl]!==null&&(ct+=F[tl],it++),$[tl]!==null&&(gl+=$[tl],Ql++);Q.push(O[Math.floor((xt+kt-1)/2)]),xe.push(We>0?Pe/We:null),ye.push(Ue>0?at/Ue:null),He.push(it>0?ct/it:null),bt.push(Ql>0?gl/Ql:null)}return[Q,xe,ye,He,bt]}function ot(O){return!O.endsWith("Z")&&!O.match(/[+-]\d{2}:\d{2}$/)&&(O=O+"Z"),new Date(O).getTime()/1e3}function mt(O,Z,Y){if(O.length===0||Z.length===0)return Z.map(()=>null);const F=[...O].sort((G,Q)=>ot(G.timestamp)-ot(Q.timestamp)),$=F.map(G=>ot(G.timestamp)),J=F.map(G=>G.temperature===null?null:Y?G.temperature:G.temperature*9/5+32);return Z.map(G=>{let Q=null,xe=null;for(let ye=0;ye<$.length;ye++)if($[ye]<=G&&(Q={time:$[ye],temp:J[ye]}),$[ye]>=G&&xe===null){xe={time:$[ye],temp:J[ye]};break}if(Q&&xe&&Q.temp!==null&&xe.temp!==null){if(Q.time===xe.time)return Q.temp;const ye=(G-Q.time)/(xe.time-Q.time);return Q.temp+ye*(xe.temp-Q.temp)}return Q!==null&&Q.temp!==null?Q.temp:xe!==null&&xe.temp!==null?xe.temp:null})}function $e(O,Z,Y,F){const $=[...O].reverse();let J=[],G=[],Q=[];for(const kt of $){J.push(ot(kt.timestamp)),G.push(kt.sg_calibrated??kt.sg_raw);const Pe=kt.temp_calibrated??kt.temp_raw;Pe!==null?Q.push(F?Pe:Pe*9/5+32):Q.push(null)}let xe=mt(Z,J,F),ye=mt(Y,J,F);d(i)&&d(c)>1&&(G=qe(G,d(c)),Q=qe(Q,d(c)),xe=qe(xe,d(c)),ye=qe(ye,d(c))),[J,G,Q,xe,ye]=Ae(J,G,Q,xe,ye,500);const bt=Me(J,G);oe(A,bt,!0);const xt=bt?De(J,bt):J.map(()=>null);return[J,G,Q,xe,ye,xt]}const ut=3e4;async function _t(O=!1){const Y=Date.now()-d(p);if(!(!O&&d(p)>0&&Y<ut)){oe(ee,!0),oe(ie,null);try{if(!d(ae)){const F=await Yr(l.batchId);oe(ae,F.device_id??null,!0)}if(d(ae)){const[F,$,J]=await Promise.all([qr(d(ae),d(x),l.batchId),Kr(d(x)).catch(()=>[]),jr(d(x)).catch(()=>[])]);oe(W,F,!0),oe(M,$,!0),oe(C,J,!0),be()}else oe(W,[],!0),oe(M,[],!0),oe(C,[],!0),oe(ie,"No device assigned to this batch")}catch(F){oe(ie,F instanceof Error?F.message:"Failed to load data",!0)}finally{oe(p,Date.now(),!0),oe(ee,!1)}}}function be(){if(!y||d(W).length===0)return;const O=$e(d(W),d(M),d(C),d(_)),Z=gt(y.clientWidth,d(_),d(u));z&&z.destroy(),z=new Mt(Z,O,y)}function St(){z&&y&&z.setSize({width:y.clientWidth,height:220})}let At=null;function Ct(){if(At&&(clearInterval(At),At=null),d(h)>0){const O=d(h)*60*1e3;At=setInterval(()=>{d(ee)||_t(!1)},O)}}xi(async()=>{const O=localStorage.getItem(a);if(O!==null){const $=parseInt(O,10);Number.isNaN($)||oe(h,$,!0)}const Z=localStorage.getItem(D);Z!==null&&oe(we,Z==="true");const Y=localStorage.getItem(ve);Y!==null&&oe(fe,Y==="true");const F=localStorage.getItem(ce);F!==null&&oe(re,F==="true");try{const $=await fetch("/api/system/timezone");if($.ok){const J=await $.json();oe(u,J.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await _t(!0),window.addEventListener("resize",St),Ct()}),zr(()=>{z?.destroy(),window.removeEventListener("resize",St),At&&clearInterval(At)}),qn(()=>{m()&&m().length>0?oe(U,Ze(m()),!0):oe(U,[],!0)}),qn(()=>{d(_)!==void 0&&d(W).length>0&&y&&be()}),qn(()=>{d(i),d(c),d(W).length>0&&y&&be()});function Ke(O){const Z=Number(O.target.value);oe(h,Z,!0),localStorage.setItem(a,String(Z)),Ct(),_t(!0)}function Vt(){oe(we,!d(we)),localStorage.setItem(D,String(d(we))),z&&z.setSeries(5,{show:d(we)})}function Bt(){oe(fe,!d(fe)),localStorage.setItem(ve,String(d(fe))),z&&z.setSeries(3,{show:d(fe)})}function Kt(){oe(re,!d(re)),localStorage.setItem(ce,String(d(re))),z&&z.setSeries(4,{show:d(re)})}var de=dc(),N=E(de),Ce=E(N);On(Ce,21,()=>Ur,Jn,(O,Z)=>{var Y=rc();let F;Y.__click=()=>{d(x)!==d(Z).hours&&(oe(x,d(Z).hours,!0),_t(!0))};var $=E(Y,!0);k(Y),vt(()=>{F=ol(Y,1,"range-btn svelte-12kwequ",null,F,{active:d(x)===d(Z).hours}),Se($,d(Z).label)}),ke(O,Y)}),k(Ce);var Be=V(Ce,2),Yt=E(Be),Dt=V(E(Yt),2);Dt.__change=Ke,On(Dt,21,()=>n,Jn,(O,Z)=>{var Y=oc(),F=E(Y,!0);k(Y);var $={};vt(()=>{Se(F,d(Z).label),$!==($=d(Z).value)&&(Y.value=(Y.__value=d(Z).value)??"")}),ke(O,Y)}),k(Dt);var Ot;$r(Dt),k(Yt);var qt=V(Yt,2),st=V(E(qt),2),Lt=E(st);Cl(2),k(st);var Qe=V(st,2);let yt;Qe.__click=Bt;var vl=E(Qe);Kl(vl,"background: #22d3ee;"),Cl(2),k(Qe);var Ht=V(Qe,2);let jt;Ht.__click=Kt;var Jt=E(Ht);Kl(Jt,"background: #a78bfa;"),Cl(2),k(Ht);var Zt=V(Ht,2);let wt;Zt.__click=Vt;var Ml=E(Zt);Kl(Ml,"background: rgba(250, 204, 21, 0.5);"),Cl(2),k(Zt),k(qt),k(Be),k(N);var le=V(N,2),he=E(le);{var _e=O=>{var Z=uc();ke(O,Z)};ft(he,O=>{d(ee)&&O(_e)})}var ze=V(he,2);{var Wt=O=>{var Z=cc(),Y=V(E(Z),2);Y.__click=()=>_t(!0),k(Z),ke(O,Z)},nl=O=>{var Z=Fn(),Y=Dl(Z);{var F=$=>{var J=fc();ke($,J)};ft(Y,$=>{d(W).length===0&&$(F)},!0)}ke(O,Z)};ft(ze,O=>{d(ie)?O(Wt):O(nl,!1)})}k(le),Ks(le,O=>y=O,()=>y);var dt=V(le,2);{var Xe=O=>{{let Z=Ve(()=>d(A)?{predictedFg:d(A).predictedFg,daysToFg:d(A).daysToFg,r2:d(A).r2}:null);ic(O,{get readings(){return d(W)},get originalGravity(){return S()},get trend(){return d(Z)}})}};ft(dt,O=>{d(W).length>0&&O(Xe)})}k(de),vt(()=>{Ot!==(Ot=d(h))&&(Dt.value=(Dt.__value=d(h))??"",eo(Dt,d(h))),Kl(Lt,`background: ${(te[v()]||"var(--text-secondary)")??""};`),yt=ol(Qe,1,"legend-item legend-toggle svelte-12kwequ",null,yt,{"legend-disabled":!d(fe)}),zl(Qe,"title",d(fe)?"Hide ambient temp":"Show ambient temp"),jt=ol(Ht,1,"legend-item legend-toggle svelte-12kwequ",null,jt,{"legend-disabled":!d(re)}),zl(Ht,"title",d(re)?"Hide chamber temp":"Show chamber temp"),wt=ol(Zt,1,"legend-item legend-toggle svelte-12kwequ",null,wt,{"legend-disabled":!d(we)}),zl(Zt,"title",d(we)?"Hide trend line":"Show trend line")}),ke(e,de),ts()}$n(["click","change"]);var hc=Le('<span class="error-message svelte-1k5rb4o"> </span>'),vc=Le('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),gc=Le('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),mc=Le('<div class="w-1 rounded-sm transition-all"></div>'),_c=Le('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),wc=Le(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),bc=Le('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),xc=Le('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Sc=Le("<div><!></div>"),yc=Le('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),kc=Le('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function Tc(e,l){es(l,!0);let a=fn(l,"expanded",3,!1),n=fn(l,"wide",3,!1),i=Ve(()=>l.batch.device_id?Si.tilts.get(l.batch.device_id)??null:null),c=Ve(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),u=Ve(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=Ve(()=>l.progress?.temperature?.current??null),h=Ve(()=>d(i)?.color??"BLACK"),v=Ve(()=>d(i)?.rssi??null),S=Ve(()=>d(i)?.paired??!0),m=Ve(()=>d(i)?.last_seen??new Date().toISOString()),_=Ve(()=>d(i)?.sg_raw??d(u)),B=Ve(()=>d(i)?.temp_raw??d(p)),y=Re(!1),z=Re(ql([])),ee=Re(!1);qn(()=>{a()&&!d(y)&&(oe(y,!0),d(ee)||Jr(l.batch.id,168).then(le=>{oe(z,le,!0),oe(ee,!0)}).catch(le=>{console.error("Failed to fetch control events:",le),oe(z,[],!0),oe(ee,!0)}))});let ie=Re(!1),x=Re(""),W=Re(null),M=Re(!1),C=Re(null);function A(){oe(x,d(c),!0),oe(ie,!0),oe(C,null),setTimeout(()=>d(W)?.focus(),0)}async function ae(){if(d(M))return;const le=d(x).trim();if(!le||le===d(c)){oe(ie,!1),oe(C,null);return}oe(M,!0),oe(C,null);try{await Zr(l.batch.id,{name:le}),oe(ie,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(he){console.error("Failed to update batch name:",he),oe(C,he instanceof Error?he.message:"Failed to save batch name",!0)}finally{oe(M,!1)}}function te(le){le.key==="Enter"?ae():le.key==="Escape"&&oe(ie,!1)}let K=Ve(Ti),ne=Ve(js);const w={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function I(le){return Ln(le)}function R(le){return Wr(le)}function se(le){return le>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:le>=-60?{bars:3,color:"var(--positive)",label:"Good"}:le>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function P(le){const he=Math.floor((Date.now()-new Date(le).getTime())/1e3);if(he<10)return"just now";if(he<60)return`${he}s ago`;const _e=Math.floor(he/60);if(_e<60)return`${_e}m ago`;const ze=Math.floor(_e/60);return ze<24?`${ze}h ago`:`${Math.floor(ze/24)}d ago`}let j=Ve(()=>w[d(h)]||"var(--tilt-black)"),D=Ve(()=>d(v)!==null?se(d(v)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),we=Ve(()=>P(d(m)));var ve=kc();let ce;var fe=E(ve),re=V(fe,2),U=E(re),Me=E(U),Ze=E(Me);{var De=le=>{var he=vc(),_e=E(he);yi(_e),_e.__keydown=te;let ze;Ks(_e,dt=>oe(W,dt),()=>d(W));var Wt=V(_e,2);{var nl=dt=>{var Xe=hc(),O=E(Xe,!0);k(Xe),vt(()=>Se(O,d(C))),ke(dt,Xe)};ft(Wt,dt=>{d(C)&&dt(nl)})}k(he),vt(()=>{_e.disabled=d(M),ze=ol(_e,1,"beer-name-input svelte-1k5rb4o",null,ze,{error:d(C)})}),bi("blur",_e,ae),ki(_e,()=>d(x),dt=>oe(x,dt)),ke(le,he)},me=le=>{var he=gc();he.__click=A;var _e=E(he),ze=E(_e,!0);k(_e),Cl(2),k(he),vt(()=>Se(ze,d(c))),ke(le,he)};ft(Ze,le=>{d(ie)?le(De):le(me,!1)})}var gt=V(Ze,2),qe=E(gt),Ae=V(qe,2),ot=E(Ae,!0);k(Ae),k(gt),k(Me);var mt=V(Me,2),$e=E(mt),ut=E($e);On(ut,20,()=>Array(4),Jn,(le,he,_e)=>{var ze=mc();vt(()=>Kl(ze,`
									height: ${8+_e*4}px;
									background: ${(_e<d(D).bars?d(D).color:"var(--bg-hover)")??""};
									opacity: ${_e<d(D).bars?1:.4};
								`)),ke(le,ze)}),k(ut);var _t=V(ut,2),be=E(_t);k(_t),k($e);var St=V($e,2);{var At=le=>{var he=_c();ke(le,he)};ft(St,le=>{d(S)||le(At)})}k(mt),k(U);var Ct=V(U,2),Ke=E(Ct),Vt=E(Ke),Bt=E(Vt,!0),Kt=V(Bt),de=E(Kt,!0);k(Kt),k(Vt);var N=V(Vt,2),Ce=E(N,!0);k(N),k(Ke);var Be=V(Ke,2),Yt=E(Be),Dt=E(Yt);{var Ot=le=>{var he=wc(),_e=Dl(he,!0),ze=V(_e),Wt=E(ze,!0);k(ze),vt(nl=>{Se(_e,nl),Se(Wt,d(K))},[()=>R(d(p))]),ke(le,he)},qt=le=>{var he=bc(),_e=V(Dl(he)),ze=E(_e,!0);k(_e),vt(()=>Se(ze,d(K))),ke(le,he)};ft(Dt,le=>{d(p)!==null?le(Ot):le(qt,!1)})}k(Yt),Cl(2),k(Be),k(Ct);var st=V(Ct,2);{var Lt=le=>{var he=xc(),_e=V(E(he),2),ze=E(_e,!0);k(_e);var Wt=V(_e,4),nl=E(Wt);k(Wt),k(he),vt((dt,Xe)=>{Se(ze,dt),Se(nl,`${Xe??""}${d(K)??""}`)},[()=>I(d(_)),()=>d(B)!==null?R(d(B)):"--"]),ke(le,he)};ft(st,le=>{(d(u)!==d(_)||d(p)!==d(B))&&d(i)&&le(Lt)})}var Qe=V(st,2);{var yt=le=>{var he=Sc();let _e;var ze=E(he);to(ze,()=>l.batch.id,Wt=>{pc(Wt,{get batchId(){return l.batch.id},get deviceColor(){return d(h)},get originalGravity(){return l.batch.measured_og},get controlEvents(){return d(z)}})}),k(he),vt(()=>_e=ol(he,1,"chart-section svelte-1k5rb4o",null,_e,{hidden:!a()})),ke(le,he)};ft(Qe,le=>{d(y)&&le(yt)})}var vl=V(Qe,2),Ht=E(vl),jt=E(Ht);k(Ht);var Jt=V(Ht,2),Zt=E(Jt),wt=V(Zt,2);{var Ml=le=>{var he=yc();he.__click=function(...Wt){l.onToggleExpand?.apply(this,Wt)};var _e=E(he);let ze;k(he),vt(()=>{zl(he,"aria-label",a()?"Collapse chart":"Expand chart"),ze=ol(_e,0,"w-4 h-4 transition-transform",null,ze,{"rotate-180":a()})}),ke(le,he)};ft(wt,le=>{l.onToggleExpand&&le(Ml)})}Cl(2),k(Jt),k(vl),k(re),k(ve),vt(le=>{ce=ol(ve,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,ce,{expanded:a(),wide:n()}),Kl(fe,`background: ${d(j)??""};`),Kl(qe,`background: ${d(j)??""};`),Se(ot,d(h)),zl($e,"title",`${d(D).label??""} signal (${d(v)??"N/A"??""} dBm)`),Se(be,`${d(v)??"N/A"??""} dBm`),Se(Bt,le),Se(de,d(ne)!=="SG"?d(ne):""),Se(Ce,d(ne)==="SG"?"Gravity":d(ne)==="P"?"Plato":"Brix"),Se(jt,`Updated ${d(we)??""}`),zl(Zt,"href",`/batches/${l.batch.id??""}`)},[()=>I(d(u))]),ke(e,ve),ts()}$n(["keydown","click"]);var Ec=Le('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Mc=Le('<div class="alerts-list svelte-1uha8ag"></div>'),Ac=Le('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Cc=Le('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Dc=Le('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Lc=Le('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Pc=Le('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Rc=Le("<div></div>"),Fc=Le("<!> <!>",1);function Qc(e,l){es(l,!0);let a=Re(!1),n=Re(!1),i=Re(ql([])),c=Re(ql(new Map)),u=Re(!0),p=Re(null);xi(async()=>{const C=localStorage.getItem("brewsignal_alerts_dismissed"),A=localStorage.getItem("brewsignal_alerts_dismissed_time");C==="true"&&A&&Date.now()-parseInt(A,10)<360*60*1e3&&oe(a,!0),await h()});async function h(){oe(u,!0),oe(p,null);try{const C=await Qr();oe(i,C.filter(K=>K.status==="fermenting"||K.status==="conditioning"),!0);const A=d(i).map(async K=>{try{const ne=await Xr(K.id);return[K.id,ne]}catch{return null}}),ae=await Promise.all(A),te=new Map;for(const K of ae)K&&te.set(K[0],K[1]);oe(c,te,!0)}catch(C){oe(p,C instanceof Error?C.message:"Failed to load batches",!0)}finally{oe(u,!1)}}let v=Ve(()=>new Map(d(i).filter(C=>C.device_id&&(C.status==="fermenting"||C.status==="conditioning")).map(C=>[C.device_id,C.id]))),S=Ve(()=>{const C=new Map(d(c));for(const[A,ae]of d(v)){const te=Si.tilts.get(A);if(te){const K=C.get(ae)||{batch_id:ae,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}};C.set(ae,{...K,measured:{...K.measured,current_sg:te.sg},temperature:{...K.temperature,current:te.temp,status:K.temperature.yeast_min!==void 0&&K.temperature.yeast_max!==void 0?te.temp<K.temperature.yeast_min?"too_cold":te.temp>K.temperature.yeast_max?"too_hot":"in_range":K.temperature.status}})}}return C}),m=Re(null);function _(C){oe(m,d(m)===C?null:C,!0)}function B(){oe(a,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function y(){oe(n,!d(n))}var z=Fc();Hr("1uha8ag",C=>{Ir(()=>{Vr.title="Dashboard | BrewSignal"})});var ee=Dl(z);{var ie=C=>{var A=Cc(),ae=E(A),te=E(ae),K=V(E(te),4),ne=E(K,!0);k(K),k(te);var w=V(te,2);w.__click=B,k(ae);var I=V(ae,2);{var R=j=>{var D=Mc();On(D,21,()=>Tn.alerts,Jn,(we,ve)=>{var ce=Ec();let fe;var re=E(ce),U=E(re);k(re);var Me=V(re,2),Ze=E(Me,!0);k(Me),k(ce),vt(()=>{fe=ol(ce,1,"alert-item svelte-1uha8ag",null,fe,{warning:d(ve).level==="warning",critical:d(ve).level==="critical"}),Se(U,`${d(ve).day??""}:`),Se(Ze,d(ve).message)}),ke(we,ce)}),k(D),ke(j,D)};ft(I,j=>{d(n)||j(R)})}var se=V(I,2);{var P=j=>{var D=Ac();D.__click=y;var we=E(D,!0);k(D),vt(()=>Se(we,d(n)?`Show ${Tn.alerts.length} alerts`:"Show less")),ke(j,D)};ft(se,j=>{Tn.alerts.length>3&&j(P)})}k(A),vt(()=>Se(ne,Tn.alerts.length)),ke(C,A)};ft(ee,C=>{Tn.alerts.length>0&&!d(a)&&C(ie)})}var x=V(ee,2);{var W=C=>{var A=Dc();ke(C,A)},M=C=>{var A=Fn(),ae=Dl(A);{var te=ne=>{var w=Lc(),I=V(E(w),4),R=E(I,!0);k(I),k(w),vt(()=>Se(R,d(p))),ke(ne,w)},K=ne=>{var w=Fn(),I=Dl(w);{var R=P=>{var j=Pc();ke(P,j)},se=P=>{var j=Rc();let D;On(j,21,()=>d(i),we=>we.id,(we,ve)=>{{let ce=Ve(()=>d(S).get(d(ve).id)),fe=Ve(()=>d(m)===d(ve).id),re=Ve(()=>d(i).length===1);Tc(we,{get batch(){return d(ve)},get progress(){return d(ce)},get expanded(){return d(fe)},get wide(){return d(re)},onToggleExpand:()=>_(d(ve).id),onBatchUpdated:h})}}),k(j),vt(()=>D=ol(j,1,"tilt-grid svelte-1uha8ag",null,D,{"single-tilt":d(i).length===1})),ke(P,j)};ft(I,P=>{d(i).length===0?P(R):P(se,!1)},!0)}ke(ne,w)};ft(ae,ne=>{d(p)?ne(te):ne(K,!1)},!0)}ke(C,A)};ft(x,C=>{d(u)?C(W):C(M,!1)})}ke(e,z),ts()}$n(["click"]);export{Qc as component};
