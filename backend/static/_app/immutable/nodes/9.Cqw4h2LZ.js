import{d as Xe,f as b,a as u,s as o,t as Jt,c as Ze}from"../chunks/DZ15WIaR.js";import{a as ta,s as h,p as ut,o as ea,f as Tt,c as d,d as a,g as r,t as w,h as aa,i as t,j as e,k as Rt,n as Dt,l as fe}from"../chunks/CdgKpHHH.js";import{e as gt,i as yt}from"../chunks/Xm3Ul2fO.js";import{i as D}from"../chunks/CiVu40Aa.js";import{r as W}from"../chunks/C7rhiFvF.js";import{s as bt}from"../chunks/CXy9Ft3Z.js";import{b as G,a as ze}from"../chunks/DaMP4aMW.js";import{b as It}from"../chunks/DKHZoZvF.js";import{f as ra,a as ia,b as Nt,c as da,d as Pt,e as ge,g as na,u as oa,h as sa,i as la,j as ca,k as va,l as ua,m as pa,n as xa,o as ba,p as _a,q as ma}from"../chunks/CxswqFen.js";var fa=b('<div class="rounded-lg bg-red-50 p-4 text-red-700 dark:bg-red-900/20 dark:text-red-400"> <button class="ml-2 underline">Dismiss</button></div>'),za=b('<span class="ml-1 rounded-full bg-amber-100 px-2 py-0.5 text-xs text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"> </span>'),ga=b('<div class="flex items-center justify-center py-12"><div class="h-8 w-8 animate-spin rounded-full border-4 border-amber-500 border-t-transparent"></div></div>'),ya=b('<div class="rounded-lg border border-dashed border-zinc-300 p-8 text-center dark:border-zinc-700"><p class="text-zinc-500 dark:text-zinc-400">No equipment added yet</p> <button class="mt-2 text-amber-600 hover:underline dark:text-amber-400">Add your first equipment</button></div>'),ka=b('<p class="mt-2 text-sm text-zinc-600 dark:text-zinc-300"> </p>'),ha=b('<p class="text-sm text-zinc-500 dark:text-zinc-400"> </p>'),wa=b('<div class="rounded-lg border border-zinc-200 bg-white p-4 dark:border-zinc-700 dark:bg-zinc-800"><div class="flex items-start justify-between"><div><h3 class="font-medium text-zinc-900 dark:text-zinc-100"> </h3> <p class="text-sm text-zinc-500 dark:text-zinc-400"> </p></div> <span> </span></div> <!> <!> <div class="mt-3 flex gap-2"><button class="text-sm text-amber-600 hover:underline dark:text-amber-400">Edit</button> <button class="text-sm text-red-600 hover:underline dark:text-red-400">Delete</button></div></div>'),qa=b('<div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3"></div>'),Ea=b('<div class="space-y-4"><div class="flex items-center justify-between"><p class="text-sm text-zinc-500 dark:text-zinc-400"> </p> <button class="rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600">Add Equipment</button></div> <!></div>'),ja=b('<div class="grid gap-4 sm:grid-cols-3"><div class="rounded-lg border border-zinc-200 bg-white p-4 dark:border-zinc-700 dark:bg-zinc-800"><p class="text-sm text-zinc-500 dark:text-zinc-400">Total Weight</p> <p class="text-2xl font-semibold text-zinc-900 dark:text-zinc-100"> </p></div> <div class="rounded-lg border border-zinc-200 bg-white p-4 dark:border-zinc-700 dark:bg-zinc-800"><p class="text-sm text-zinc-500 dark:text-zinc-400">Varieties</p> <p class="text-2xl font-semibold text-zinc-900 dark:text-zinc-100"> </p></div> <div class="rounded-lg border border-zinc-200 bg-white p-4 dark:border-zinc-700 dark:bg-zinc-800"><p class="text-sm text-zinc-500 dark:text-zinc-400">Lots</p> <p class="text-2xl font-semibold text-zinc-900 dark:text-zinc-100"> </p></div></div>'),Aa=b('<div class="rounded-lg border border-dashed border-zinc-300 p-8 text-center dark:border-zinc-700"><p class="text-zinc-500 dark:text-zinc-400"> </p></div>'),Sa=b('<tr class="border-b border-zinc-100 dark:border-zinc-800"><td class="py-3 font-medium text-zinc-900 dark:text-zinc-100"> </td><td class="py-3 text-right text-zinc-600 dark:text-zinc-300"> </td><td class="py-3 text-right text-zinc-600 dark:text-zinc-300"> </td><td class="py-3 capitalize text-zinc-600 dark:text-zinc-300"> </td><td class="py-3 text-zinc-600 dark:text-zinc-300"> </td><td class="py-3 text-zinc-500 dark:text-zinc-400"> </td><td class="py-3 text-right"><button class="text-amber-600 hover:underline dark:text-amber-400">Adjust</button> <span class="mx-1 text-zinc-300">|</span> <button class="text-zinc-600 hover:underline dark:text-zinc-400">Edit</button> <span class="mx-1 text-zinc-300">|</span> <button class="text-red-600 hover:underline dark:text-red-400">Delete</button></td></tr>'),Da=b('<div class="overflow-x-auto"><table class="w-full text-sm"><thead><tr class="border-b border-zinc-200 dark:border-zinc-700"><th class="py-3 text-left font-medium text-zinc-500 dark:text-zinc-400">Variety</th><th class="py-3 text-right font-medium text-zinc-500 dark:text-zinc-400">Amount</th><th class="py-3 text-right font-medium text-zinc-500 dark:text-zinc-400">AA%</th><th class="py-3 text-left font-medium text-zinc-500 dark:text-zinc-400">Form</th><th class="py-3 text-left font-medium text-zinc-500 dark:text-zinc-400">Year</th><th class="py-3 text-left font-medium text-zinc-500 dark:text-zinc-400">Location</th><th class="py-3 text-right font-medium text-zinc-500 dark:text-zinc-400">Actions</th></tr></thead><tbody></tbody></table></div>'),Ya=b('<div class="space-y-4"><!> <div class="flex items-center justify-between gap-4"><input type="text" placeholder="Search hops..." class="flex-1 rounded-lg border border-zinc-300 px-3 py-2 text-sm dark:border-zinc-600 dark:bg-zinc-800"/> <button class="rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600">Add Hops</button></div> <!></div>'),Ca=b('<div class="grid gap-4 sm:grid-cols-4"><div class="rounded-lg border border-zinc-200 bg-white p-4 dark:border-zinc-700 dark:bg-zinc-800"><p class="text-sm text-zinc-500 dark:text-zinc-400">Total Packs</p> <p class="text-2xl font-semibold text-zinc-900 dark:text-zinc-100"> </p></div> <div class="rounded-lg border border-zinc-200 bg-white p-4 dark:border-zinc-700 dark:bg-zinc-800"><p class="text-sm text-zinc-500 dark:text-zinc-400">Strains</p> <p class="text-2xl font-semibold text-zinc-900 dark:text-zinc-100"> </p></div> <div class="rounded-lg border border-zinc-200 bg-white p-4 dark:border-zinc-700 dark:bg-zinc-800"><p class="text-sm text-zinc-500 dark:text-zinc-400">Expiring Soon</p> <p> </p></div> <div class="rounded-lg border border-zinc-200 bg-white p-4 dark:border-zinc-700 dark:bg-zinc-800"><p class="text-sm text-zinc-500 dark:text-zinc-400">Expired</p> <p> </p></div></div>'),Fa=b("<li> </li>"),Ha=b('<li class="text-amber-600"> </li>'),La=b('<div class="rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800 dark:bg-amber-900/20"><p class="font-medium text-amber-800 dark:text-amber-200">Yeast expiring within 30 days:</p> <ul class="mt-2 space-y-1 text-sm text-amber-700 dark:text-amber-300"><!> <!></ul></div>'),Ma=b('<div class="rounded-lg border border-dashed border-zinc-300 p-8 text-center dark:border-zinc-700"><p class="text-zinc-500 dark:text-zinc-400"> </p></div>'),$a=b('<div class="text-xs text-zinc-500 dark:text-zinc-400"> </div>'),Ta=b('<div class="text-xs text-amber-600 dark:text-amber-400"> </div>'),Ia=b('<span class="text-xs"> </span>'),Na=b('<button class="text-green-600 hover:underline dark:text-green-400">Use 1</button> <span class="mx-1 text-zinc-300">|</span>',1),Pa=b('<tr class="border-b border-zinc-100 dark:border-zinc-800"><td class="py-3"><div class="font-medium text-zinc-900 dark:text-zinc-100"> </div> <!> <!></td><td class="py-3 text-right text-zinc-600 dark:text-zinc-300"> </td><td class="py-3 capitalize text-zinc-600 dark:text-zinc-300"> </td><td> <!></td><td class="py-3 text-zinc-500 dark:text-zinc-400"> </td><td class="py-3 text-right"><!> <button class="text-zinc-600 hover:underline dark:text-zinc-400">Edit</button> <span class="mx-1 text-zinc-300">|</span> <button class="text-red-600 hover:underline dark:text-red-400">Delete</button></td></tr>'),Ba=b('<div class="overflow-x-auto"><table class="w-full text-sm"><thead><tr class="border-b border-zinc-200 dark:border-zinc-700"><th class="py-3 text-left font-medium text-zinc-500 dark:text-zinc-400">Strain</th><th class="py-3 text-right font-medium text-zinc-500 dark:text-zinc-400">Qty</th><th class="py-3 text-left font-medium text-zinc-500 dark:text-zinc-400">Form</th><th class="py-3 text-left font-medium text-zinc-500 dark:text-zinc-400">Expiry</th><th class="py-3 text-left font-medium text-zinc-500 dark:text-zinc-400">Location</th><th class="py-3 text-right font-medium text-zinc-500 dark:text-zinc-400">Actions</th></tr></thead><tbody></tbody></table></div>'),Qa=b('<div class="space-y-4"><!> <!> <div class="flex flex-wrap items-center justify-between gap-4"><div class="flex items-center gap-4"><input type="text" placeholder="Search yeast..." class="rounded-lg border border-zinc-300 px-3 py-2 text-sm dark:border-zinc-600 dark:bg-zinc-800"/> <label class="flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400"><input type="checkbox"/> Show expired</label></div> <button class="rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600">Add Yeast</button></div> <!></div>'),Ua=b("<!> <!> <!>",1),Va=b("<option> </option>"),Ga=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="w-full max-w-md rounded-lg bg-white p-6 shadow-xl dark:bg-zinc-800"><h2 class="mb-4 text-lg font-semibold text-zinc-900 dark:text-zinc-100"> </h2> <div class="space-y-4"><div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Name *</label> <input type="text" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700" placeholder="My Fermenter"/></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Type *</label> <select class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"></select></div> <div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Brand</label> <input type="text" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"/></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Model</label> <input type="text" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"/></div></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Capacity (L)</label> <input type="number" step="0.1" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"/></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Notes</label> <textarea rows="2" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"></textarea></div> <label class="flex items-center gap-2"><input type="checkbox"/> <span class="text-sm text-zinc-700 dark:text-zinc-300">Active</span></label></div> <div class="mt-6 flex justify-end gap-3"><button class="rounded-lg border border-zinc-300 px-4 py-2 text-sm dark:border-zinc-600">Cancel</button> <button class="rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600 disabled:opacity-50"> </button></div></div></div>'),Ka=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="w-full max-w-md rounded-lg bg-white p-6 shadow-xl dark:bg-zinc-800"><h2 class="mb-4 text-lg font-semibold text-zinc-900 dark:text-zinc-100"> </h2> <div class="space-y-4"><div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Variety *</label> <input type="text" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700" placeholder="Citra"/></div> <div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Amount (g) *</label> <input type="number" step="1" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"/></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Alpha Acid %</label> <input type="number" step="0.1" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"/></div></div> <div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Form</label> <select class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"><option>Pellet</option><option>Leaf</option><option>Plug</option></select></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Crop Year</label> <input type="number" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"/></div></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Storage Location</label> <input type="text" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700" placeholder="Freezer A"/></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Notes</label> <textarea rows="2" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"></textarea></div></div> <div class="mt-6 flex justify-end gap-3"><button class="rounded-lg border border-zinc-300 px-4 py-2 text-sm dark:border-zinc-600">Cancel</button> <button class="rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600 disabled:opacity-50"> </button></div></div></div>'),Oa=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="w-full max-w-sm rounded-lg bg-white p-6 shadow-xl dark:bg-zinc-800"><h2 class="mb-4 text-lg font-semibold text-zinc-900 dark:text-zinc-100"> </h2> <p class="mb-4 text-sm text-zinc-500 dark:text-zinc-400"> </p> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Amount to add/subtract (g)</label> <input type="number" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700" placeholder="-50 or 100"/> <p class="mt-1 text-xs text-zinc-500 dark:text-zinc-400">Use negative numbers to subtract</p></div> <div class="mt-6 flex justify-end gap-3"><button class="rounded-lg border border-zinc-300 px-4 py-2 text-sm dark:border-zinc-600">Cancel</button> <button class="rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600 disabled:opacity-50"> </button></div></div></div>'),Wa=b("<option> </option>"),Ja=b('<div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Custom Name</label> <input type="text" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700" placeholder="My harvested strain"/></div>'),Ra=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="w-full max-w-md max-h-[90vh] overflow-y-auto rounded-lg bg-white p-6 shadow-xl dark:bg-zinc-800"><h2 class="mb-4 text-lg font-semibold text-zinc-900 dark:text-zinc-100"> </h2> <div class="space-y-4"><div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Yeast Strain</label> <select class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"><option>-- Select or enter custom --</option><!></select></div> <!> <div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Quantity</label> <input type="number" min="0" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"/></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Form</label> <select class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"><option>Dry</option><option>Liquid</option><option>Slant</option><option>Harvested</option></select></div></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Expiry Date</label> <input type="date" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"/></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Storage Location</label> <input type="text" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700" placeholder="Fridge A"/></div> <div><label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">Notes</label> <textarea rows="2" class="mt-1 w-full rounded-lg border border-zinc-300 px-3 py-2 dark:border-zinc-600 dark:bg-zinc-700"></textarea></div></div> <div class="mt-6 flex justify-end gap-3"><button class="rounded-lg border border-zinc-300 px-4 py-2 text-sm dark:border-zinc-600">Cancel</button> <button class="rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600 disabled:opacity-50"> </button></div></div></div>'),Xa=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="w-full max-w-sm rounded-lg bg-white p-6 shadow-xl dark:bg-zinc-800"><h2 class="mb-4 text-lg font-semibold text-zinc-900 dark:text-zinc-100">Confirm Delete</h2> <p class="text-zinc-600 dark:text-zinc-300">Are you sure you want to delete <strong><!></strong>?</p> <div class="mt-6 flex justify-end gap-3"><button class="rounded-lg border border-zinc-300 px-4 py-2 text-sm dark:border-zinc-600">Cancel</button> <button class="rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 disabled:opacity-50"> </button></div></div></div>'),Za=b('<div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-semibold text-zinc-900 dark:text-zinc-100">Inventory</h1> <p class="text-sm text-zinc-500 dark:text-zinc-400">Track your brewing equipment, hops, and yeast</p></div></div> <!> <div class="border-b border-zinc-200 dark:border-zinc-700"><nav class="-mb-px flex space-x-8"><button>Equipment <span class="ml-2 rounded-full bg-zinc-100 px-2 py-0.5 text-xs dark:bg-zinc-800"> </span></button> <button>Hops <span class="ml-2 rounded-full bg-zinc-100 px-2 py-0.5 text-xs dark:bg-zinc-800"> </span></button> <button>Yeast <span class="ml-2 rounded-full bg-zinc-100 px-2 py-0.5 text-xs dark:bg-zinc-800"> </span> <!></button></nav></div> <!></div> <!> <!> <!> <!> <!>',1);function lr(ye,ke){ta(ke,!0);let ct=h("hops"),Bt=h(!0),it=h(null),st=h(ut([])),Yt=h(!1),kt=h(null),I=h(ut({name:"",type:"fermenter",brand:"",model:"",capacity_liters:void 0,is_active:!0,notes:""})),dt=h(ut([])),vt=h(null),Ct=h(!1),ht=h(null),N=h(ut({variety:"",amount_grams:0,alpha_acid_percent:void 0,crop_year:new Date().getFullYear(),form:"pellet",storage_location:"",notes:""})),wt=h(""),nt=h(ut([])),at=h(null),_t=h(ut([])),Ft=h(!1),qt=h(null),M=h(ut({yeast_strain_id:void 0,custom_name:"",quantity:1,form:"dry",expiry_date:"",storage_location:"",notes:""})),Xt=h(ut([])),Et=h(""),Qt=h(!1),Ht=h(!1),mt=h(null),ft=h(0),H=h(null),X=h(!1),Lt=h(!1);const Zt=[{value:"kettle",label:"Brew Kettle"},{value:"fermenter",label:"Fermenter"},{value:"mash_tun",label:"Mash Tun"},{value:"lauter_tun",label:"Lauter Tun"},{value:"hot_liquor_tank",label:"Hot Liquor Tank"},{value:"chiller",label:"Chiller"},{value:"pump",label:"Pump"},{value:"mill",label:"Grain Mill"},{value:"bottling",label:"Bottling"},{value:"kegging",label:"Kegging"},{value:"other",label:"Other"}];let te=fe(()=>()=>{if(!t(wt))return t(dt);const i=t(wt).toLowerCase();return t(dt).filter(n=>n.variety.toLowerCase().includes(i)||n.storage_location?.toLowerCase().includes(i)||n.supplier?.toLowerCase().includes(i))}),ee=fe(()=>()=>{if(!t(Et))return t(nt);const i=t(Et).toLowerCase();return t(nt).filter(n=>n.yeast_strain?.name.toLowerCase().includes(i)||n.custom_name?.toLowerCase().includes(i)||n.yeast_strain?.product_id?.toLowerCase().includes(i))});async function ae(){d(Bt,!0),d(it,null);try{const[i,n,f,q,tt,$,U]=await Promise.all([ra(),ia(),Nt(),da({include_expired:t(Qt)}),Pt(),ge(30),na({limit:500})]);d(st,i,!0),d(dt,n,!0),d(vt,f,!0),d(nt,q,!0),d(at,tt,!0),d(_t,$,!0),d(Xt,U,!0)}catch(i){d(it,i instanceof Error?i.message:"Failed to load inventory",!0)}finally{d(Bt,!1)}}function Ut(i){i?(d(kt,i,!0),d(I,{name:i.name,type:i.type,brand:i.brand||"",model:i.model||"",capacity_liters:i.capacity_liters,is_active:i.is_active,notes:i.notes||""},!0)):(d(kt,null),d(I,{name:"",type:"fermenter",brand:"",model:"",capacity_liters:void 0,is_active:!0,notes:""},!0)),d(Yt,!0)}async function he(){if(t(I).name.trim()){d(X,!0);try{if(t(kt)){const i=await oa(t(kt).id,t(I));d(st,t(st).map(n=>n.id===i.id?i:n),!0)}else{const i=await sa(t(I));d(st,[i,...t(st)],!0)}d(Yt,!1)}catch(i){d(it,i instanceof Error?i.message:"Failed to save equipment",!0)}finally{d(X,!1)}}}function re(i){i?(d(ht,i,!0),d(N,{variety:i.variety,amount_grams:i.amount_grams,alpha_acid_percent:i.alpha_acid_percent,crop_year:i.crop_year,form:i.form,storage_location:i.storage_location||"",supplier:i.supplier||"",notes:i.notes||""},!0)):(d(ht,null),d(N,{variety:"",amount_grams:0,alpha_acid_percent:void 0,crop_year:new Date().getFullYear(),form:"pellet",storage_location:"",notes:""},!0)),d(Ct,!0)}async function we(){if(t(N).variety.trim()){d(X,!0);try{if(t(ht)){const i=await la(t(ht).id,t(N));d(dt,t(dt).map(n=>n.id===i.id?i:n),!0)}else{const i=await ca(t(N));d(dt,[i,...t(dt)],!0)}d(Ct,!1),d(vt,await Nt(),!0)}catch(i){d(it,i instanceof Error?i.message:"Failed to save hop",!0)}finally{d(X,!1)}}}function qe(i){d(mt,i,!0),d(ft,0),d(Ht,!0)}async function Ee(){if(!(!t(mt)||t(ft)===0)){d(X,!0);try{const i=await va(t(mt).id,t(ft));d(dt,t(dt).map(n=>n.id===i.id?i:n),!0),d(Ht,!1),d(vt,await Nt(),!0)}catch(i){d(it,i instanceof Error?i.message:"Failed to adjust hop amount",!0)}finally{d(X,!1)}}}function ie(i){i?(d(qt,i,!0),d(M,{yeast_strain_id:i.yeast_strain_id,custom_name:i.custom_name||"",quantity:i.quantity,form:i.form,expiry_date:i.expiry_date?.split("T")[0]||"",storage_location:i.storage_location||"",supplier:i.supplier||"",notes:i.notes||""},!0)):(d(qt,null),d(M,{yeast_strain_id:void 0,custom_name:"",quantity:1,form:"dry",expiry_date:"",storage_location:"",notes:""},!0)),d(Ft,!0)}async function je(){if(!t(M).yeast_strain_id&&!t(M).custom_name?.trim()){d(it,"Select a yeast strain or enter a custom name");return}d(X,!0);try{const i={...t(M),expiry_date:t(M).expiry_date||void 0};if(t(qt)){const n=await ua(t(qt).id,i);d(nt,t(nt).map(f=>f.id===n.id?n:f),!0)}else{const n=await pa(i);d(nt,[n,...t(nt)],!0)}d(Ft,!1),d(at,await Pt(),!0),d(_t,await ge(30),!0)}catch(i){d(it,i instanceof Error?i.message:"Failed to save yeast",!0)}finally{d(X,!1)}}async function Ae(i){try{const n=await ma(i.id,1);d(nt,t(nt).map(f=>f.id===n.id?n:f),!0),d(at,await Pt(),!0)}catch(n){d(it,n instanceof Error?n.message:"Failed to use yeast",!0)}}async function Se(){if(t(H)){d(Lt,!0);try{t(H).type==="equipment"?(await xa(t(H).item.id),d(st,t(st).filter(i=>i.id!==t(H).item.id),!0)):t(H).type==="hop"?(await ba(t(H).item.id),d(dt,t(dt).filter(i=>i.id!==t(H).item.id),!0),d(vt,await Nt(),!0)):t(H).type==="yeast"&&(await _a(t(H).item.id),d(nt,t(nt).filter(i=>i.id!==t(H).item.id),!0),d(at,await Pt(),!0)),d(H,null)}catch(i){d(it,i instanceof Error?i.message:"Failed to delete item",!0)}finally{d(Lt,!1)}}}function de(i){return i?new Date(i).toLocaleDateString():"--"}function Vt(i){if(!i)return null;const n=new Date(i),f=new Date,q=n.getTime()-f.getTime();return Math.ceil(q/(1e3*60*60*24))}function De(i){const n=Vt(i);return n===null?"":n<0?"text-red-500":n<=30?"text-amber-500":"text-green-600"}ea(ae);var ne=Za(),Gt=Tt(ne),oe=r(a(Gt),2);{var Ye=i=>{var n=fa(),f=a(n),q=r(f);q.__click=()=>d(it,null),e(n),w(()=>o(f,`${t(it)??""} `)),u(i,n)};D(oe,i=>{t(it)&&i(Ye)})}var Kt=r(oe,2),se=a(Kt),jt=a(se);jt.__click=()=>d(ct,"equipment");var le=r(a(jt)),Ce=a(le,!0);e(le),e(jt);var At=r(jt,2);At.__click=()=>d(ct,"hops");var ce=r(a(At)),Fe=a(ce,!0);e(ce),e(At);var Mt=r(At,2);Mt.__click=()=>d(ct,"yeast");var Ot=r(a(Mt)),He=a(Ot,!0);e(Ot);var Le=r(Ot,2);{var Me=i=>{var n=za(),f=a(n);e(n),w(()=>o(f,`${t(at).expiring_soon??""} expiring`)),u(i,n)};D(Le,i=>{t(at)&&t(at).expiring_soon>0&&i(Me)})}e(Mt),e(se),e(Kt);var $e=r(Kt,2);{var Te=i=>{var n=ga();u(i,n)},Ie=i=>{var n=Ua(),f=Tt(n);{var q=g=>{var E=Ea(),j=a(E),F=a(j),A=a(F);e(F);var Y=r(F,2);Y.__click=()=>Ut(),e(j);var V=r(j,2);{var P=z=>{var v=ya(),S=r(a(v),2);S.__click=()=>Ut(),e(v),u(z,v)},B=z=>{var v=qa();gt(v,21,()=>t(st),yt,(S,_)=>{var C=wa(),K=a(C),s=a(K),m=a(s),l=a(m,!0);e(m);var y=r(m,2),k=a(y,!0);e(y),e(s);var p=r(s,2),c=a(p,!0);e(p),e(K);var Q=r(K,2);{var x=O=>{var ot=ka(),lt=a(ot,!0);e(ot),w(St=>o(lt,St),[()=>[t(_).brand,t(_).model].filter(Boolean).join(" ")]),u(O,ot)};D(Q,O=>{(t(_).brand||t(_).model)&&O(x)})}var L=r(Q,2);{var T=O=>{var ot=ha(),lt=a(ot);e(ot),w(()=>o(lt,`${t(_).capacity_liters??""}L capacity`)),u(O,ot)};D(L,O=>{t(_).capacity_liters&&O(T)})}var rt=r(L,2),et=a(rt);et.__click=()=>Ut(t(_));var pt=r(et,2);pt.__click=()=>d(H,{type:"equipment",item:t(_)},!0),e(rt),e(C),w(O=>{o(l,t(_).name),o(k,O),bt(p,1,`rounded-full px-2 py-0.5 text-xs ${t(_).is_active?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-zinc-100 text-zinc-500 dark:bg-zinc-700 dark:text-zinc-400"}`),o(c,t(_).is_active?"Active":"Inactive")},[()=>Zt.find(O=>O.value===t(_).type)?.label||t(_).type]),u(S,C)}),e(v),u(z,v)};D(V,z=>{t(st).length===0?z(P):z(B,!1)})}e(E),w(()=>o(A,`${t(st).length??""} items`)),u(g,E)};D(f,g=>{t(ct)==="equipment"&&g(q)})}var tt=r(f,2);{var $=g=>{var E=Ya(),j=a(E);{var F=v=>{var S=ja(),_=a(S),C=r(a(_),2),K=a(C);e(C),e(_);var s=r(_,2),m=r(a(s),2),l=a(m,!0);e(m),e(s);var y=r(s,2),k=r(a(y),2),p=a(k,!0);e(k),e(y),e(S),w(c=>{o(K,`${c??""} kg`),o(l,t(vt).unique_varieties),o(p,t(vt).total_items)},[()=>(t(vt).total_grams/1e3).toFixed(2)]),u(v,S)};D(j,v=>{t(vt)&&v(F)})}var A=r(j,2),Y=a(A);W(Y);var V=r(Y,2);V.__click=()=>re(),e(A);var P=r(A,2);{var B=v=>{var S=Aa(),_=a(S),C=a(_,!0);e(_),e(S),w(()=>o(C,t(wt)?"No hops match your search":"No hops in inventory")),u(v,S)},z=v=>{var S=Da(),_=a(S),C=r(a(_));gt(C,21,()=>t(te)(),yt,(K,s)=>{var m=Sa(),l=a(m),y=a(l,!0);e(l);var k=r(l),p=a(k,!0);e(k);var c=r(k),Q=a(c,!0);e(c);var x=r(c),L=a(x,!0);e(x);var T=r(x),rt=a(T,!0);e(T);var et=r(T),pt=a(et,!0);e(et);var O=r(et),ot=a(O);ot.__click=()=>qe(t(s));var lt=r(ot,4);lt.__click=()=>re(t(s));var St=r(lt,4);St.__click=()=>d(H,{type:"hop",item:t(s)},!0),e(O),e(m),w((zt,$t)=>{o(y,t(s).variety),o(p,zt),o(Q,$t),o(L,t(s).form),o(rt,t(s).crop_year||"--"),o(pt,t(s).storage_location||"--")},[()=>t(s).amount_grams>=1e3?`${(t(s).amount_grams/1e3).toFixed(2)} kg`:`${t(s).amount_grams.toFixed(0)} g`,()=>t(s).alpha_acid_percent?.toFixed(1)||"--"]),u(K,m)}),e(C),e(_),e(S),u(v,S)};D(P,v=>{t(te)().length===0?v(B):v(z,!1)})}e(E),G(Y,()=>t(wt),v=>d(wt,v)),u(g,E)};D(tt,g=>{t(ct)==="hops"&&g($)})}var U=r(tt,2);{var J=g=>{var E=Qa(),j=a(E);{var F=s=>{var m=Ca(),l=a(m),y=r(a(l),2),k=a(y,!0);e(y),e(l);var p=r(l,2),c=r(a(p),2),Q=a(c,!0);e(c),e(p);var x=r(p,2),L=r(a(x),2),T=a(L,!0);e(L),e(x);var rt=r(x,2),et=r(a(rt),2),pt=a(et,!0);e(et),e(rt),e(m),w(()=>{o(k,t(at).total_quantity),o(Q,t(at).total_items),bt(L,1,`text-2xl font-semibold ${t(at).expiring_soon>0?"text-amber-600":"text-zinc-900 dark:text-zinc-100"}`),o(T,t(at).expiring_soon),bt(et,1,`text-2xl font-semibold ${t(at).expired>0?"text-red-600":"text-zinc-900 dark:text-zinc-100"}`),o(pt,t(at).expired)}),u(s,m)};D(j,s=>{t(at)&&s(F)})}var A=r(j,2);{var Y=s=>{var m=La(),l=r(a(m),2),y=a(l);gt(y,17,()=>t(_t).slice(0,5),yt,(c,Q)=>{var x=Fa(),L=a(x);e(x),w(T=>o(L,`${(t(Q).yeast_strain?.name||t(Q).custom_name)??""} - expires ${T??""}`),[()=>de(t(Q).expiry_date)]),u(c,x)});var k=r(y,2);{var p=c=>{var Q=Ha(),x=a(Q);e(Q),w(()=>o(x,`...and ${t(_t).length-5} more`)),u(c,Q)};D(k,c=>{t(_t).length>5&&c(p)})}e(l),e(m),u(s,m)};D(A,s=>{t(_t).length>0&&s(Y)})}var V=r(A,2),P=a(V),B=a(P);W(B);var z=r(B,2),v=a(z);W(v),v.__change=ae,Dt(),e(z),e(P);var S=r(P,2);S.__click=()=>ie(),e(V);var _=r(V,2);{var C=s=>{var m=Ma(),l=a(m),y=a(l,!0);e(l),e(m),w(()=>o(y,t(Et)?"No yeast matches your search":"No yeast in inventory")),u(s,m)},K=s=>{var m=Ba(),l=a(m),y=r(a(l));gt(y,21,()=>t(ee)(),yt,(k,p)=>{var c=Pa(),Q=a(c),x=a(Q),L=a(x,!0);e(x);var T=r(x,2);{var rt=R=>{var Z=$a(),xt=a(Z);e(Z),w(()=>o(xt,`${t(p).yeast_strain.producer??""} - ${t(p).yeast_strain.product_id??""}`)),u(R,Z)};D(T,R=>{t(p).yeast_strain?.product_id&&R(rt)})}var et=r(T,2);{var pt=R=>{var Z=Ta(),xt=a(Z);e(Z),w(()=>o(xt,`Gen ${t(p).generation??""} (harvested)`)),u(R,Z)};D(et,R=>{t(p).generation&&R(pt)})}e(Q);var O=r(Q),ot=a(O,!0);e(O);var lt=r(O),St=a(lt,!0);e(lt);var zt=r(lt),$t=a(zt),Ge=r($t);{var Ke=R=>{var Z=Ia(),xt=a(Z);e(Z),w(Re=>o(xt,`(${Re??""}d)`),[()=>Vt(t(p).expiry_date)]),u(R,Z)};D(Ge,R=>{Vt(t(p).expiry_date)!==null&&R(Ke)})}e(zt);var Wt=r(zt),Oe=a(Wt,!0);e(Wt);var be=r(Wt),_e=a(be);{var We=R=>{var Z=Na(),xt=Tt(Z);xt.__click=()=>Ae(t(p)),Dt(2),u(R,Z)};D(_e,R=>{t(p).quantity>0&&R(We)})}var me=r(_e,2);me.__click=()=>ie(t(p));var Je=r(me,4);Je.__click=()=>d(H,{type:"yeast",item:t(p)},!0),e(be),e(c),w((R,Z)=>{o(L,t(p).yeast_strain?.name||t(p).custom_name),o(ot,t(p).quantity),o(St,t(p).form),bt(zt,1,`py-3 ${R??""}`),o($t,`${Z??""} `),o(Oe,t(p).storage_location||"--")},[()=>De(t(p).expiry_date),()=>de(t(p).expiry_date)]),u(k,c)}),e(y),e(l),e(m),u(s,m)};D(_,s=>{t(ee)().length===0?s(C):s(K,!1)})}e(E),G(B,()=>t(Et),s=>d(Et,s)),ze(v,()=>t(Qt),s=>d(Qt,s)),u(g,E)};D(U,g=>{t(ct)==="yeast"&&g(J)})}u(i,n)};D($e,i=>{t(Bt)?i(Te):i(Ie,!1)})}e(Gt);var ve=r(Gt,2);{var Ne=i=>{var n=Ga(),f=a(n),q=a(f),tt=a(q,!0);e(q);var $=r(q,2),U=a($),J=r(a(U),2);W(J),e(U);var g=r(U,2),E=r(a(g),2);gt(E,21,()=>Zt,yt,(l,y)=>{var k=Va(),p=a(k,!0);e(k);var c={};w(()=>{o(p,t(y).label),c!==(c=t(y).value)&&(k.value=(k.__value=t(y).value)??"")}),u(l,k)}),e(E),e(g);var j=r(g,2),F=a(j),A=r(a(F),2);W(A),e(F);var Y=r(F,2),V=r(a(Y),2);W(V),e(Y),e(j);var P=r(j,2),B=r(a(P),2);W(B),e(P);var z=r(P,2),v=r(a(z),2);Rt(v),e(z);var S=r(z,2),_=a(S);W(_),Dt(2),e(S),e($);var C=r($,2),K=a(C);K.__click=()=>d(Yt,!1);var s=r(K,2);s.__click=he;var m=a(s,!0);e(s),e(C),e(f),e(n),w(l=>{o(tt,t(kt)?"Edit Equipment":"Add Equipment"),s.disabled=l,o(m,t(X)?"Saving...":"Save")},[()=>t(X)||!t(I).name.trim()]),G(J,()=>t(I).name,l=>t(I).name=l),It(E,()=>t(I).type,l=>t(I).type=l),G(A,()=>t(I).brand,l=>t(I).brand=l),G(V,()=>t(I).model,l=>t(I).model=l),G(B,()=>t(I).capacity_liters,l=>t(I).capacity_liters=l),G(v,()=>t(I).notes,l=>t(I).notes=l),ze(_,()=>t(I).is_active,l=>t(I).is_active=l),u(i,n)};D(ve,i=>{t(Yt)&&i(Ne)})}var ue=r(ve,2);{var Pe=i=>{var n=Ka(),f=a(n),q=a(f),tt=a(q,!0);e(q);var $=r(q,2),U=a($),J=r(a(U),2);W(J),e(U);var g=r(U,2),E=a(g),j=r(a(E),2);W(j),e(E);var F=r(E,2),A=r(a(F),2);W(A),e(F),e(g);var Y=r(g,2),V=a(Y),P=r(a(V),2),B=a(P);B.value=B.__value="pellet";var z=r(B);z.value=z.__value="leaf";var v=r(z);v.value=v.__value="plug",e(P),e(V);var S=r(V,2),_=r(a(S),2);W(_),e(S),e(Y);var C=r(Y,2),K=r(a(C),2);W(K),e(C);var s=r(C,2),m=r(a(s),2);Rt(m),e(s),e($);var l=r($,2),y=a(l);y.__click=()=>d(Ct,!1);var k=r(y,2);k.__click=we;var p=a(k,!0);e(k),e(l),e(f),e(n),w(c=>{o(tt,t(ht)?"Edit Hop":"Add Hop"),k.disabled=c,o(p,t(X)?"Saving...":"Save")},[()=>t(X)||!t(N).variety.trim()]),G(J,()=>t(N).variety,c=>t(N).variety=c),G(j,()=>t(N).amount_grams,c=>t(N).amount_grams=c),G(A,()=>t(N).alpha_acid_percent,c=>t(N).alpha_acid_percent=c),It(P,()=>t(N).form,c=>t(N).form=c),G(_,()=>t(N).crop_year,c=>t(N).crop_year=c),G(K,()=>t(N).storage_location,c=>t(N).storage_location=c),G(m,()=>t(N).notes,c=>t(N).notes=c),u(i,n)};D(ue,i=>{t(Ct)&&i(Pe)})}var pe=r(ue,2);{var Be=i=>{var n=Oa(),f=a(n),q=a(f),tt=a(q);e(q);var $=r(q,2),U=a($);e($);var J=r($,2),g=r(a(J),2);W(g),Dt(2),e(J);var E=r(J,2),j=a(E);j.__click=()=>d(Ht,!1);var F=r(j,2);F.__click=Ee;var A=a(F,!0);e(F),e(E),e(f),e(n),w(()=>{o(tt,`Adjust ${t(mt).variety??""}`),o(U,`Current: ${t(mt).amount_grams??""}g`),F.disabled=t(X)||t(ft)===0,o(A,t(X)?"Adjusting...":"Adjust")}),G(g,()=>t(ft),Y=>d(ft,Y)),u(i,n)};D(pe,i=>{t(Ht)&&t(mt)&&i(Be)})}var xe=r(pe,2);{var Qe=i=>{var n=Ra(),f=a(n),q=a(f),tt=a(q,!0);e(q);var $=r(q,2),U=a($),J=r(a(U),2),g=a(J);g.value=(g.__value=void 0)??"";var E=r(g);gt(E,17,()=>t(Xt),yt,(x,L)=>{var T=Wa(),rt=a(T);e(T);var et={};w(()=>{o(rt,`${t(L).name??""} (${t(L).producer??""} - ${t(L).product_id??""})`),et!==(et=t(L).id)&&(T.value=(T.__value=t(L).id)??"")}),u(x,T)}),e(J),e(U);var j=r(U,2);{var F=x=>{var L=Ja(),T=r(a(L),2);W(T),e(L),G(T,()=>t(M).custom_name,rt=>t(M).custom_name=rt),u(x,L)};D(j,x=>{t(M).yeast_strain_id||x(F)})}var A=r(j,2),Y=a(A),V=r(a(Y),2);W(V),e(Y);var P=r(Y,2),B=r(a(P),2),z=a(B);z.value=z.__value="dry";var v=r(z);v.value=v.__value="liquid";var S=r(v);S.value=S.__value="slant";var _=r(S);_.value=_.__value="harvested",e(B),e(P),e(A);var C=r(A,2),K=r(a(C),2);W(K),e(C);var s=r(C,2),m=r(a(s),2);W(m),e(s);var l=r(s,2),y=r(a(l),2);Rt(y),e(l),e($);var k=r($,2),p=a(k);p.__click=()=>d(Ft,!1);var c=r(p,2);c.__click=je;var Q=a(c,!0);e(c),e(k),e(f),e(n),w(()=>{o(tt,t(qt)?"Edit Yeast":"Add Yeast"),c.disabled=t(X),o(Q,t(X)?"Saving...":"Save")}),It(J,()=>t(M).yeast_strain_id,x=>t(M).yeast_strain_id=x),G(V,()=>t(M).quantity,x=>t(M).quantity=x),It(B,()=>t(M).form,x=>t(M).form=x),G(K,()=>t(M).expiry_date,x=>t(M).expiry_date=x),G(m,()=>t(M).storage_location,x=>t(M).storage_location=x),G(y,()=>t(M).notes,x=>t(M).notes=x),u(i,n)};D(xe,i=>{t(Ft)&&i(Qe)})}var Ue=r(xe,2);{var Ve=i=>{var n=Xa(),f=a(n),q=r(a(f),2),tt=r(a(q)),$=a(tt);{var U=A=>{var Y=Jt();w(()=>o(Y,t(H).item.name)),u(A,Y)},J=A=>{var Y=Ze(),V=Tt(Y);{var P=z=>{var v=Jt();w(()=>o(v,t(H).item.variety)),u(z,v)},B=z=>{var v=Jt();w(()=>o(v,t(H).item.yeast_strain?.name||t(H).item.custom_name)),u(z,v)};D(V,z=>{t(H).type==="hop"?z(P):z(B,!1)},!0)}u(A,Y)};D($,A=>{t(H).type==="equipment"?A(U):A(J,!1)})}e(tt),Dt(),e(q);var g=r(q,2),E=a(g);E.__click=()=>d(H,null);var j=r(E,2);j.__click=Se;var F=a(j,!0);e(j),e(g),e(f),e(n),w(()=>{j.disabled=t(Lt),o(F,t(Lt)?"Deleting...":"Delete")}),u(i,n)};D(Ue,i=>{t(H)&&i(Ve)})}w(()=>{bt(jt,1,`border-b-2 px-1 py-4 text-sm font-medium transition-colors ${t(ct)==="equipment"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-zinc-500 hover:border-zinc-300 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`),o(Ce,t(st).length),bt(At,1,`border-b-2 px-1 py-4 text-sm font-medium transition-colors ${t(ct)==="hops"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-zinc-500 hover:border-zinc-300 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`),o(Fe,t(dt).length),bt(Mt,1,`border-b-2 px-1 py-4 text-sm font-medium transition-colors ${t(ct)==="yeast"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-zinc-500 hover:border-zinc-300 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`),o(He,t(nt).length)}),u(ye,ne),aa()}Xe(["click","change"]);export{lr as component};
